var cde=Object.defineProperty;var ude=(e,t,r)=>t in e?cde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Kk=(e,t,r)=>ude(e,typeof t!="symbol"?t+"":t,r);function dde(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Xct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ade(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Gk={exports:{}},q1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LM;function fde(){if(LM)return q1;LM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return q1.Fragment=t,q1.jsx=r,q1.jsxs=r,q1}var MM;function hde(){return MM||(MM=1,Gk.exports=fde()),Gk.exports}var c=hde(),qk={exports:{}},ln={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UM;function mde(){if(UM)return ln;UM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(q){return q===null||typeof q!="object"?null:(q=f&&q[f]||q["@@iterator"],typeof q=="function"?q:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function b(q,ne,L){this.props=q,this.context=ne,this.refs=v,this.updater=L||p}b.prototype.isReactComponent={},b.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},b.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function y(){}y.prototype=b.prototype;function _(q,ne,L){this.props=q,this.context=ne,this.refs=v,this.updater=L||p}var S=_.prototype=new y;S.constructor=_,g(S,b.prototype),S.isPureReactComponent=!0;var k=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function w(q,ne,L,W,J,te){return L=te.ref,{$$typeof:e,type:q,key:ne,ref:L!==void 0?L:null,props:te}}function C(q,ne){return w(q.type,ne,void 0,void 0,void 0,q.props)}function N(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function R(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(L){return ne[L]})}var O=/\/+/g;function j(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?R(""+q.key):ne.toString(36)}function U(){}function P(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(U,U):(q.status="pending",q.then(function(ne){q.status==="pending"&&(q.status="fulfilled",q.value=ne)},function(ne){q.status==="pending"&&(q.status="rejected",q.reason=ne)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function X(q,ne,L,W,J){var te=typeof q;(te==="undefined"||te==="boolean")&&(q=null);var ie=!1;if(q===null)ie=!0;else switch(te){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(q.$$typeof){case e:case t:ie=!0;break;case d:return ie=q._init,X(ie(q._payload),ne,L,W,J)}}if(ie)return J=J(q),ie=W===""?"."+j(q,0):W,k(J)?(L="",ie!=null&&(L=ie.replace(O,"$&/")+"/"),X(J,ne,L,"",function(ce){return ce})):J!=null&&(N(J)&&(J=C(J,L+(J.key==null||q&&q.key===J.key?"":(""+J.key).replace(O,"$&/")+"/")+ie)),ne.push(J)),1;ie=0;var Ae=W===""?".":W+":";if(k(q))for(var oe=0;oe<q.length;oe++)W=q[oe],te=Ae+j(W,oe),ie+=X(W,ne,L,te,J);else if(oe=h(q),typeof oe=="function")for(q=oe.call(q),oe=0;!(W=q.next()).done;)W=W.value,te=Ae+j(W,oe++),ie+=X(W,ne,L,te,J);else if(te==="object"){if(typeof q.then=="function")return X(P(q),ne,L,W,J);throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ie}function K(q,ne,L){if(q==null)return q;var W=[],J=0;return X(q,W,"","",function(te){return ne.call(L,te,J++)}),W}function Z(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(L){(q._status===0||q._status===-1)&&(q._status=1,q._result=L)},function(L){(q._status===0||q._status===-1)&&(q._status=2,q._result=L)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var H=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function V(){}return ln.Children={map:K,forEach:function(q,ne,L){K(q,function(){ne.apply(this,arguments)},L)},count:function(q){var ne=0;return K(q,function(){ne++}),ne},toArray:function(q){return K(q,function(ne){return ne})||[]},only:function(q){if(!N(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},ln.Component=b,ln.Fragment=r,ln.Profiler=a,ln.PureComponent=_,ln.StrictMode=n,ln.Suspense=l,ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ln.__COMPILER_RUNTIME={__proto__:null,c:function(q){return B.H.useMemoCache(q)}},ln.cache=function(q){return function(){return q.apply(null,arguments)}},ln.cloneElement=function(q,ne,L){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var W=g({},q.props),J=q.key,te=void 0;if(ne!=null)for(ie in ne.ref!==void 0&&(te=void 0),ne.key!==void 0&&(J=""+ne.key),ne)!F.call(ne,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&ne.ref===void 0||(W[ie]=ne[ie]);var ie=arguments.length-2;if(ie===1)W.children=L;else if(1<ie){for(var Ae=Array(ie),oe=0;oe<ie;oe++)Ae[oe]=arguments[oe+2];W.children=Ae}return w(q.type,J,void 0,void 0,te,W)},ln.createContext=function(q){return q={$$typeof:i,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},ln.createElement=function(q,ne,L){var W,J={},te=null;if(ne!=null)for(W in ne.key!==void 0&&(te=""+ne.key),ne)F.call(ne,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(J[W]=ne[W]);var ie=arguments.length-2;if(ie===1)J.children=L;else if(1<ie){for(var Ae=Array(ie),oe=0;oe<ie;oe++)Ae[oe]=arguments[oe+2];J.children=Ae}if(q&&q.defaultProps)for(W in ie=q.defaultProps,ie)J[W]===void 0&&(J[W]=ie[W]);return w(q,te,void 0,void 0,null,J)},ln.createRef=function(){return{current:null}},ln.forwardRef=function(q){return{$$typeof:o,render:q}},ln.isValidElement=N,ln.lazy=function(q){return{$$typeof:d,_payload:{_status:-1,_result:q},_init:Z}},ln.memo=function(q,ne){return{$$typeof:u,type:q,compare:ne===void 0?null:ne}},ln.startTransition=function(q){var ne=B.T,L={};B.T=L;try{var W=q(),J=B.S;J!==null&&J(L,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(V,H)}catch(te){H(te)}finally{B.T=ne}},ln.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ln.use=function(q){return B.H.use(q)},ln.useActionState=function(q,ne,L){return B.H.useActionState(q,ne,L)},ln.useCallback=function(q,ne){return B.H.useCallback(q,ne)},ln.useContext=function(q){return B.H.useContext(q)},ln.useDebugValue=function(){},ln.useDeferredValue=function(q,ne){return B.H.useDeferredValue(q,ne)},ln.useEffect=function(q,ne,L){var W=B.H;if(typeof L=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(q,ne)},ln.useId=function(){return B.H.useId()},ln.useImperativeHandle=function(q,ne,L){return B.H.useImperativeHandle(q,ne,L)},ln.useInsertionEffect=function(q,ne){return B.H.useInsertionEffect(q,ne)},ln.useLayoutEffect=function(q,ne){return B.H.useLayoutEffect(q,ne)},ln.useMemo=function(q,ne){return B.H.useMemo(q,ne)},ln.useOptimistic=function(q,ne){return B.H.useOptimistic(q,ne)},ln.useReducer=function(q,ne,L){return B.H.useReducer(q,ne,L)},ln.useRef=function(q){return B.H.useRef(q)},ln.useState=function(q){return B.H.useState(q)},ln.useSyncExternalStore=function(q,ne,L){return B.H.useSyncExternalStore(q,ne,L)},ln.useTransition=function(){return B.H.useTransition()},ln.version="19.1.1",ln}var QM;function Fx(){return QM||(QM=1,qk.exports=mde()),qk.exports}var I=Fx();const lt=bl(I),pde=dde({__proto__:null,default:lt},[I]);var Wk={exports:{}},W1={},Xk={exports:{}},Yk={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HM;function gde(){return HM||(HM=1,function(e){function t(K,Z){var H=K.length;K.push(Z);e:for(;0<H;){var V=H-1>>>1,q=K[V];if(0<a(q,Z))K[V]=Z,K[H]=q,H=V;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var Z=K[0],H=K.pop();if(H!==Z){K[0]=H;e:for(var V=0,q=K.length,ne=q>>>1;V<ne;){var L=2*(V+1)-1,W=K[L],J=L+1,te=K[J];if(0>a(W,H))J<q&&0>a(te,W)?(K[V]=te,K[J]=H,V=J):(K[V]=W,K[L]=H,V=L);else if(J<q&&0>a(te,H))K[V]=te,K[J]=H,V=J;else break e}}return Z}function a(K,Z){var H=K.sortIndex-Z.sortIndex;return H!==0?H:K.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,f=null,h=3,p=!1,g=!1,v=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function k(K){for(var Z=r(u);Z!==null;){if(Z.callback===null)n(u);else if(Z.startTime<=K)n(u),Z.sortIndex=Z.expirationTime,t(l,Z);else break;Z=r(u)}}function B(K){if(v=!1,k(K),!g)if(r(l)!==null)g=!0,F||(F=!0,j());else{var Z=r(u);Z!==null&&X(B,Z.startTime-K)}}var F=!1,w=-1,C=5,N=-1;function R(){return b?!0:!(e.unstable_now()-N<C)}function O(){if(b=!1,F){var K=e.unstable_now();N=K;var Z=!0;try{e:{g=!1,v&&(v=!1,_(w),w=-1),p=!0;var H=h;try{t:{for(k(K),f=r(l);f!==null&&!(f.expirationTime>K&&R());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var q=V(f.expirationTime<=K);if(K=e.unstable_now(),typeof q=="function"){f.callback=q,k(K),Z=!0;break t}f===r(l)&&n(l),k(K)}else n(l);f=r(l)}if(f!==null)Z=!0;else{var ne=r(u);ne!==null&&X(B,ne.startTime-K),Z=!1}}break e}finally{f=null,h=H,p=!1}Z=void 0}}finally{Z?j():F=!1}}}var j;if(typeof S=="function")j=function(){S(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,P=U.port2;U.port1.onmessage=O,j=function(){P.postMessage(null)}}else j=function(){y(O,0)};function X(K,Z){w=y(function(){K(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(K){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var H=h;h=Z;try{return K()}finally{h=H}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(K,Z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var H=h;h=K;try{return Z()}finally{h=H}},e.unstable_scheduleCallback=function(K,Z,H){var V=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?V+H:V):H=V,K){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=H+q,K={id:d++,callback:Z,priorityLevel:K,startTime:H,expirationTime:q,sortIndex:-1},H>V?(K.sortIndex=H,t(u,K),r(l)===null&&K===r(u)&&(v?(_(w),w=-1):v=!0,X(B,H-V))):(K.sortIndex=q,t(l,K),g||p||(g=!0,F||(F=!0,j()))),K},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(K){var Z=h;return function(){var H=h;h=Z;try{return K.apply(this,arguments)}finally{h=H}}}}(Yk)),Yk}var VM;function vde(){return VM||(VM=1,Xk.exports=gde()),Xk.exports}var Jk={exports:{}},Io={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zM;function xde(){if(zM)return Io;zM=1;var e=Fx();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(l,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:l,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Io.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Io.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(l,u,null,d)},Io.flushSync=function(l){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=u,n.p=d,n.d.f()}},Io.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},Io.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Io.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:p}):d==="script"&&n.d.X(l,{crossOrigin:f,integrity:h,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Io.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},Io.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(l,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Io.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},Io.requestFormReset=function(l){n.d.r(l)},Io.unstable_batchedUpdates=function(l,u){return l(u)},Io.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},Io.useFormStatus=function(){return i.H.useHostTransitionStatus()},Io.version="19.1.1",Io}var $M;function xW(){if($M)return Jk.exports;$M=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Jk.exports=xde(),Jk.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM;function bde(){if(KM)return W1;KM=1;var e=vde(),t=Fx(),r=xW();function n(A){var m="https://react.dev/errors/"+A;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+A+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var m=A,x=A;if(A.alternate)for(;m.return;)m=m.return;else{A=m;do m=A,(m.flags&4098)!==0&&(x=m.return),A=m.return;while(A)}return m.tag===3?x:null}function i(A){if(A.tag===13){var m=A.memoizedState;if(m===null&&(A=A.alternate,A!==null&&(m=A.memoizedState)),m!==null)return m.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function l(A){var m=A.alternate;if(!m){if(m=s(A),m===null)throw Error(n(188));return m!==A?null:A}for(var x=A,E=m;;){var M=x.return;if(M===null)break;var z=M.alternate;if(z===null){if(E=M.return,E!==null){x=E;continue}break}if(M.child===z.child){for(z=M.child;z;){if(z===x)return o(M),A;if(z===E)return o(M),m;z=z.sibling}throw Error(n(188))}if(x.return!==E.return)x=M,E=z;else{for(var le=!1,be=M.child;be;){if(be===x){le=!0,x=M,E=z;break}if(be===E){le=!0,E=M,x=z;break}be=be.sibling}if(!le){for(be=z.child;be;){if(be===x){le=!0,x=z,E=M;break}if(be===E){le=!0,E=z,x=M;break}be=be.sibling}if(!le)throw Error(n(189))}}if(x.alternate!==E)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?A:m}function u(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A;for(A=A.child;A!==null;){if(m=u(A),m!==null)return m;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),S=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function j(A){return A===null||typeof A!="object"?null:(A=O&&A[O]||A["@@iterator"],typeof A=="function"?A:null)}var U=Symbol.for("react.client.reference");function P(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===U?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case B:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case S:return(A.displayName||"Context")+".Provider";case _:return(A._context.displayName||"Context")+".Consumer";case k:var m=A.render;return A=A.displayName,A||(A=m.displayName||m.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case w:return m=A.displayName||null,m!==null?m:P(A.type)||"Memo";case C:m=A._payload,A=A._init;try{return P(A(m))}catch{}}return null}var X=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},V=[],q=-1;function ne(A){return{current:A}}function L(A){0>q||(A.current=V[q],V[q]=null,q--)}function W(A,m){q++,V[q]=A.current,A.current=m}var J=ne(null),te=ne(null),ie=ne(null),Ae=ne(null);function oe(A,m){switch(W(ie,m),W(te,A),W(J,null),m.nodeType){case 9:case 11:A=(A=m.documentElement)&&(A=A.namespaceURI)?AM(A):0;break;default:if(A=m.tagName,m=m.namespaceURI)m=AM(m),A=fM(m,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}L(J),W(J,A)}function ce(){L(J),L(te),L(ie)}function ge(A){A.memoizedState!==null&&W(Ae,A);var m=J.current,x=fM(m,A.type);m!==x&&(W(te,A),W(J,x))}function je(A){te.current===A&&(L(J),L(te)),Ae.current===A&&(L(Ae),V1._currentValue=H)}var re=Object.prototype.hasOwnProperty,Se=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,_e=e.unstable_shouldYield,he=e.unstable_requestPaint,Ie=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,Xe=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Pe=e.unstable_LowPriority,qe=e.unstable_IdlePriority,Ze=e.log,ot=e.unstable_setDisableYieldValue,mt=null,Bt=null;function Lt(A){if(typeof Ze=="function"&&ot(A),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(mt,A)}catch{}}var Ot=Math.clz32?Math.clz32:Nr,Qt=Math.log,bt=Math.LN2;function Nr(A){return A>>>=0,A===0?32:31-(Qt(A)/bt|0)|0}var tr=256,nn=4194304;function Cr(A){var m=A&42;if(m!==0)return m;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Vr(A,m,x){var E=A.pendingLanes;if(E===0)return 0;var M=0,z=A.suspendedLanes,le=A.pingedLanes;A=A.warmLanes;var be=E&134217727;return be!==0?(E=be&~z,E!==0?M=Cr(E):(le&=be,le!==0?M=Cr(le):x||(x=be&~A,x!==0&&(M=Cr(x))))):(be=E&~z,be!==0?M=Cr(be):le!==0?M=Cr(le):x||(x=E&~A,x!==0&&(M=Cr(x)))),M===0?0:m!==0&&m!==M&&(m&z)===0&&(z=M&-M,x=m&-m,z>=x||z===32&&(x&4194048)!==0)?m:M}function In(A,m){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&m)===0}function jr(A,m){switch(A){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var A=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),A}function pt(){var A=nn;return nn<<=1,(nn&62914560)===0&&(nn=4194304),A}function Je(A){for(var m=[],x=0;31>x;x++)m.push(A);return m}function gt(A,m){A.pendingLanes|=m,m!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function dt(A,m,x,E,M,z){var le=A.pendingLanes;A.pendingLanes=x,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=x,A.entangledLanes&=x,A.errorRecoveryDisabledLanes&=x,A.shellSuspendCounter=0;var be=A.entanglements,Re=A.expirationTimes,it=A.hiddenUpdates;for(x=le&~x;0<x;){var Ct=31-Ot(x),It=1<<Ct;be[Ct]=0,Re[Ct]=-1;var At=it[Ct];if(At!==null)for(it[Ct]=null,Ct=0;Ct<At.length;Ct++){var ft=At[Ct];ft!==null&&(ft.lane&=-536870913)}x&=~It}E!==0&&Dt(A,E,0),z!==0&&M===0&&A.tag!==0&&(A.suspendedLanes|=z&~(le&~m))}function Dt(A,m,x){A.pendingLanes|=m,A.suspendedLanes&=~m;var E=31-Ot(m);A.entangledLanes|=m,A.entanglements[E]=A.entanglements[E]|1073741824|x&4194090}function zt(A,m){var x=A.entangledLanes|=m;for(A=A.entanglements;x;){var E=31-Ot(x),M=1<<E;M&m|A[E]&m&&(A[E]|=m),x&=~M}}function Pr(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Xr(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function pn(){var A=Z.p;return A!==0?A:(A=window.event,A===void 0?32:jM(A.type))}function gn(A,m){var x=Z.p;try{return Z.p=A,m()}finally{Z.p=x}}var $t=Math.random().toString(36).slice(2),tn="__reactFiber$"+$t,en="__reactProps$"+$t,cr="__reactContainer$"+$t,Yr="__reactEvents$"+$t,ta="__reactListeners$"+$t,fe="__reactHandles$"+$t,Be="__reactResources$"+$t,Ee="__reactMarker$"+$t;function Ce(A){delete A[tn],delete A[en],delete A[Yr],delete A[ta],delete A[fe]}function Ne(A){var m=A[tn];if(m)return m;for(var x=A.parentNode;x;){if(m=x[cr]||x[tn]){if(x=m.alternate,m.child!==null||x!==null&&x.child!==null)for(A=gM(A);A!==null;){if(x=A[tn])return x;A=gM(A)}return m}A=x,x=A.parentNode}return null}function Te(A){if(A=A[tn]||A[cr]){var m=A.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return A}return null}function Ye(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A.stateNode;throw Error(n(33))}function ut(A){var m=A[Be];return m||(m=A[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function $e(A){A[Ee]=!0}var tt=new Set,at={};function Tt(A,m){Vt(A,m),Vt(A+"Capture",m)}function Vt(A,m){for(at[A]=m,A=0;A<m.length;A++)tt.add(m[A])}var Yt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},Kt={};function _r(A){return re.call(Kt,A)?!0:re.call(Ht,A)?!1:Yt.test(A)?Kt[A]=!0:(Ht[A]=!0,!1)}function an(A,m,x){if(_r(m))if(x===null)A.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":A.removeAttribute(m);return;case"boolean":var E=m.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){A.removeAttribute(m);return}}A.setAttribute(m,""+x)}}function sn(A,m,x){if(x===null)A.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(m);return}A.setAttribute(m,""+x)}}function dn(A,m,x,E){if(E===null)A.removeAttribute(x);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(x);return}A.setAttributeNS(m,x,""+E)}}var ds,bo;function As(A){if(ds===void 0)try{throw Error()}catch(x){var m=x.stack.trim().match(/\n( *(at )?)/);ds=m&&m[1]||"",bo=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ds+A+bo}var ei=!1;function js(A,m){if(!A||ei)return"";ei=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(m){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(ft){var At=ft}Reflect.construct(A,[],It)}else{try{It.call()}catch(ft){At=ft}A.call(It.prototype)}}else{try{throw Error()}catch(ft){At=ft}(It=A())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(ft){if(ft&&At&&typeof ft.stack=="string")return[ft.stack,At.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=E.DetermineComponentFrameRoot(),le=z[0],be=z[1];if(le&&be){var Re=le.split(`
`),it=be.split(`
`);for(M=E=0;E<Re.length&&!Re[E].includes("DetermineComponentFrameRoot");)E++;for(;M<it.length&&!it[M].includes("DetermineComponentFrameRoot");)M++;if(E===Re.length||M===it.length)for(E=Re.length-1,M=it.length-1;1<=E&&0<=M&&Re[E]!==it[M];)M--;for(;1<=E&&0<=M;E--,M--)if(Re[E]!==it[M]){if(E!==1||M!==1)do if(E--,M--,0>M||Re[E]!==it[M]){var Ct=`
`+Re[E].replace(" at new "," at ");return A.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",A.displayName)),Ct}while(1<=E&&0<=M);break}}}finally{ei=!1,Error.prepareStackTrace=x}return(x=A?A.displayName||A.name:"")?As(x):""}function vi(A){switch(A.tag){case 26:case 27:case 5:return As(A.type);case 16:return As("Lazy");case 13:return As("Suspense");case 19:return As("SuspenseList");case 0:case 15:return js(A.type,!1);case 11:return js(A.type.render,!1);case 1:return js(A.type,!0);case 31:return As("Activity");default:return""}}function xa(A){try{var m="";do m+=vi(A),A=A.return;while(A);return m}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function ti(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Id(A){var m=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function xh(A){var m=Id(A)?"checked":"value",x=Object.getOwnPropertyDescriptor(A.constructor.prototype,m),E=""+A[m];if(!A.hasOwnProperty(m)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var M=x.get,z=x.set;return Object.defineProperty(A,m,{configurable:!0,get:function(){return M.call(this)},set:function(le){E=""+le,z.call(this,le)}}),Object.defineProperty(A,m,{enumerable:x.enumerable}),{getValue:function(){return E},setValue:function(le){E=""+le},stopTracking:function(){A._valueTracker=null,delete A[m]}}}}function Uc(A){A._valueTracker||(A._valueTracker=xh(A))}function qA(A){if(!A)return!1;var m=A._valueTracker;if(!m)return!0;var x=m.getValue(),E="";return A&&(E=Id(A)?A.checked?"true":"false":A.value),A=E,A!==x?(m.setValue(A),!0):!1}function xi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var jd=/[\n"\\]/g;function jn(A){return A.replace(jd,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function bi(A,m,x,E,M,z,le,be){A.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?A.type=le:A.removeAttribute("type"),m!=null?le==="number"?(m===0&&A.value===""||A.value!=m)&&(A.value=""+ti(m)):A.value!==""+ti(m)&&(A.value=""+ti(m)):le!=="submit"&&le!=="reset"||A.removeAttribute("value"),m!=null?Hc(A,le,ti(m)):x!=null?Hc(A,le,ti(x)):E!=null&&A.removeAttribute("value"),M==null&&z!=null&&(A.defaultChecked=!!z),M!=null&&(A.checked=M&&typeof M!="function"&&typeof M!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+ti(be):A.removeAttribute("name")}function Qc(A,m,x,E,M,z,le,be){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(A.type=z),m!=null||x!=null){if(!(z!=="submit"&&z!=="reset"||m!=null))return;x=x!=null?""+ti(x):"",m=m!=null?""+ti(m):x,be||m===A.value||(A.value=m),A.defaultValue=m}E=E??M,E=typeof E!="function"&&typeof E!="symbol"&&!!E,A.checked=be?A.checked:!!E,A.defaultChecked=!!E,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(A.name=le)}function Hc(A,m,x){m==="number"&&xi(A.ownerDocument)===A||A.defaultValue===""+x||(A.defaultValue=""+x)}function wl(A,m,x,E){if(A=A.options,m){m={};for(var M=0;M<x.length;M++)m["$"+x[M]]=!0;for(x=0;x<A.length;x++)M=m.hasOwnProperty("$"+A[x].value),A[x].selected!==M&&(A[x].selected=M),M&&E&&(A[x].defaultSelected=!0)}else{for(x=""+ti(x),m=null,M=0;M<A.length;M++){if(A[M].value===x){A[M].selected=!0,E&&(A[M].defaultSelected=!0);return}m!==null||A[M].disabled||(m=A[M])}m!==null&&(m.selected=!0)}}function Hn(A,m,x){if(m!=null&&(m=""+ti(m),m!==A.value&&(A.value=m),x==null)){A.defaultValue!==m&&(A.defaultValue=m);return}A.defaultValue=x!=null?""+ti(x):""}function Vc(A,m,x,E){if(m==null){if(E!=null){if(x!=null)throw Error(n(92));if(X(E)){if(1<E.length)throw Error(n(93));E=E[0]}x=E}x==null&&(x=""),m=x}x=ti(m),A.defaultValue=x,E=A.textContent,E===x&&E!==""&&E!==null&&(A.value=E)}function yo(A,m){if(m){var x=A.firstChild;if(x&&x===A.lastChild&&x.nodeType===3){x.nodeValue=m;return}}A.textContent=m}var ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bh(A,m,x){var E=m.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?E?A.setProperty(m,""):m==="float"?A.cssFloat="":A[m]="":E?A.setProperty(m,x):typeof x!="number"||x===0||ec.has(m)?m==="float"?A.cssFloat=x:A[m]=(""+x).trim():A[m]=x+"px"}function WA(A,m,x){if(m!=null&&typeof m!="object")throw Error(n(62));if(A=A.style,x!=null){for(var E in x)!x.hasOwnProperty(E)||m!=null&&m.hasOwnProperty(E)||(E.indexOf("--")===0?A.setProperty(E,""):E==="float"?A.cssFloat="":A[E]="");for(var M in m)E=m[M],m.hasOwnProperty(M)&&x[M]!==E&&bh(A,M,E)}else for(var z in m)m.hasOwnProperty(z)&&bh(A,z,m[z])}function XA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rc(A){return Fd.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var El=null;function ca(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var nc=null,Cl=null;function Br(A){var m=Te(A);if(m&&(A=m.stateNode)){var x=A[en]||null;e:switch(A=m.stateNode,m.type){case"input":if(bi(A,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),m=x.name,x.type==="radio"&&m!=null){for(x=A;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+jn(""+m)+'"][type="radio"]'),m=0;m<x.length;m++){var E=x[m];if(E!==A&&E.form===A.form){var M=E[en]||null;if(!M)throw Error(n(90));bi(E,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(m=0;m<x.length;m++)E=x[m],E.form===A.form&&qA(E)}break e;case"textarea":Hn(A,x.value,x.defaultValue);break e;case"select":m=x.value,m!=null&&wl(A,!!x.multiple,m,!1)}}}var _l=!1;function yh(A,m,x){if(_l)return A(m,x);_l=!0;try{var E=A(m);return E}finally{if(_l=!1,(nc!==null||Cl!==null)&&(Q2(),nc&&(m=nc,A=Cl,Cl=nc=null,Br(m),A)))for(m=0;m<A.length;m++)Br(A[m])}}function Fi(A,m){var x=A.stateNode;if(x===null)return null;var E=x[en]||null;if(E===null)return null;x=E[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(A=A.type,E=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!E;break e;default:A=!1}if(A)return null;if(x&&typeof x!="function")throw Error(n(231,m,typeof x));return x}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eo=!1;if(wo)try{var Sl={};Object.defineProperty(Sl,"passive",{get:function(){eo=!0}}),window.addEventListener("test",Sl,Sl),window.removeEventListener("test",Sl,Sl)}catch{eo=!1}var Eo=null,zc=null,ac=null;function YA(){if(ac)return ac;var A,m=zc,x=m.length,E,M="value"in Eo?Eo.value:Eo.textContent,z=M.length;for(A=0;A<x&&m[A]===M[A];A++);var le=x-A;for(E=1;E<=le&&m[x-E]===M[z-E];E++);return ac=M.slice(A,1<E?1-E:void 0)}function Co(A){var m=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&m===13&&(A=13)):A=m,A===10&&(A=13),32<=A||A===13?A:0}function Oi(){return!0}function Nl(){return!1}function fs(A){function m(x,E,M,z,le){this._reactName=x,this._targetInst=M,this.type=E,this.nativeEvent=z,this.target=le,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(x=A[be],this[be]=x?x(z):z[be]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Oi:Nl,this.isPropagationStopped=Nl,this}return d(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),m}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$c=fs(vn),kl=d({},vn,{view:0,detail:0}),JA=fs(kl),Lu,Mu,nl,Di=d({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wc,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==nl&&(nl&&A.type==="mousemove"?(Lu=A.screenX-nl.screenX,Mu=A.screenY-nl.screenY):Mu=Lu=0,nl=A),Lu)},movementY:function(A){return"movementY"in A?A.movementY:Mu}}),hs=fs(Di),wh=d({},Di,{dataTransfer:0}),Kc=fs(wh),yi=d({},kl,{relatedTarget:0}),Gc=fs(yi),sc=d({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Od=fs(sc),Uu=d({},vn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Dd=fs(Uu),ZA=d({},vn,{data:0}),Qu=fs(ZA),qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vu(A){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(A):(A=Rd[A])?!!m[A]:!1}function Wc(){return Vu}var Eh=d({},kl,{key:function(A){if(A.key){var m=qc[A.key]||A.key;if(m!=="Unidentified")return m}return A.type==="keypress"?(A=Co(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Hu[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wc,charCode:function(A){return A.type==="keypress"?Co(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Co(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),ic=fs(Eh),Xc=d({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=fs(Xc),Ri=d({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wc}),Pd=fs(Ri),G=d({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),de=fs(G),Fe=d({},Di,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=fs(Fe),Ke=d({},vn,{newState:0,oldState:0}),xt=fs(Ke),Pt=[9,13,27,32],Jt=wo&&"CompositionEvent"in window,D=null;wo&&"documentMode"in document&&(D=document.documentMode);var ee=wo&&"TextEvent"in window&&!D,se=wo&&(!Jt||D&&8<D&&11>=D),xe=" ",ze=!1;function st(A,m){switch(A){case"keyup":return Pt.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Tr=!1;function xn(A,m){switch(A){case"compositionend":return Mt(m);case"keypress":return m.which!==32?null:(ze=!0,xe);case"textInput":return A=m.data,A===xe&&ze?null:A;default:return null}}function Gr(A,m){if(Tr)return A==="compositionend"||!Jt&&st(A,m)?(A=YA(),ac=zc=Eo=null,Tr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return se&&m.locale!=="ko"?null:m.data;default:return null}}var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ra(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m==="input"?!!Vn[A.type]:m==="textarea"}function Bl(A,m,x,E){nc?Cl?Cl.push(E):Cl=[E]:nc=E,m=G2(m,"onChange"),0<m.length&&(x=new $c("onChange","change",null,x,E),A.push({event:x,listeners:m}))}var Za=null,_o=null;function Yc(A){oM(A,0)}function Ld(A){var m=Ye(A);if(qA(m))return A}function Ch(A,m){if(A==="change")return m}var ef=!1;if(wo){var Fs;if(wo){var Md="oninput"in document;if(!Md){var tf=document.createElement("div");tf.setAttribute("oninput","return;"),Md=typeof tf.oninput=="function"}Fs=Md}else Fs=!1;ef=Fs&&(!document.documentMode||9<document.documentMode)}function rf(){Za&&(Za.detachEvent("onpropertychange",_h),_o=Za=null)}function _h(A){if(A.propertyName==="value"&&Ld(_o)){var m=[];Bl(m,_o,A,ca(A)),yh(Yc,m)}}function So(A,m,x){A==="focusin"?(rf(),Za=m,_o=x,Za.attachEvent("onpropertychange",_h)):A==="focusout"&&rf()}function u1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Ld(_o)}function bm(A,m){if(A==="click")return Ld(m)}function cg(A,m){if(A==="input"||A==="change")return Ld(m)}function Tl(A,m){return A===m&&(A!==0||1/A===1/m)||A!==A&&m!==m}var ri=typeof Object.is=="function"?Object.is:Tl;function Ud(A,m){if(ri(A,m))return!0;if(typeof A!="object"||A===null||typeof m!="object"||m===null)return!1;var x=Object.keys(A),E=Object.keys(m);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var M=x[E];if(!re.call(m,M)||!ri(A[M],m[M]))return!1}return!0}function ym(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function $u(A,m){var x=ym(A);A=0;for(var E;x;){if(x.nodeType===3){if(E=A+x.textContent.length,A<=m&&E>=m)return{node:x,offset:m-A};A=E}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=ym(x)}}function Qd(A,m){return A&&m?A===m?!0:A&&A.nodeType===3?!1:m&&m.nodeType===3?Qd(A,m.parentNode):"contains"in A?A.contains(m):A.compareDocumentPosition?!!(A.compareDocumentPosition(m)&16):!1:!1}function to(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var m=xi(A.document);m instanceof A.HTMLIFrameElement;){try{var x=typeof m.contentWindow.location.href=="string"}catch{x=!1}if(x)A=m.contentWindow;else break;m=xi(A.document)}return m}function wi(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m&&(m==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||m==="textarea"||A.contentEditable==="true")}var Hd=wo&&"documentMode"in document&&11>=document.documentMode,No=null,oc=null,Jc=null,lc=!1;function za(A,m,x){var E=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;lc||No==null||No!==xi(E)||(E=No,"selectionStart"in E&&wi(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Jc&&Ud(Jc,E)||(Jc=E,E=G2(oc,"onSelect"),0<E.length&&(m=new $c("onSelect","select",null,m,x),A.push({event:m,listeners:E}),m.target=No)))}function cc(A,m){var x={};return x[A.toLowerCase()]=m.toLowerCase(),x["Webkit"+A]="webkit"+m,x["Moz"+A]="moz"+m,x}var ms={animationend:cc("Animation","AnimationEnd"),animationiteration:cc("Animation","AnimationIteration"),animationstart:cc("Animation","AnimationStart"),transitionrun:cc("Transition","TransitionRun"),transitionstart:cc("Transition","TransitionStart"),transitioncancel:cc("Transition","TransitionCancel"),transitionend:cc("Transition","TransitionEnd")},ko={},nf={};wo&&(nf=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function Zc(A){if(ko[A])return ko[A];if(!ms[A])return A;var m=ms[A],x;for(x in m)if(m.hasOwnProperty(x)&&x in nf)return ko[A]=m[x];return A}var Sh=Zc("animationend"),Vd=Zc("animationiteration"),zd=Zc("animationstart"),$d=Zc("transitionrun"),af=Zc("transitionstart"),Nh=Zc("transitioncancel"),Kd=Zc("transitionend"),Ku=new Map,sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sf.push("scrollEnd");function $a(A,m){Ku.set(A,m),Tt(m,[A])}var al=new WeakMap;function fn(A,m){if(typeof A=="object"&&A!==null){var x=al.get(A);return x!==void 0?x:(m={value:A,source:m,stack:xa(m)},al.set(A,m),m)}return{value:A,source:m,stack:xa(m)}}var hn=[],ba=0,es=0;function Il(){for(var A=ba,m=es=ba=0;m<A;){var x=hn[m];hn[m++]=null;var E=hn[m];hn[m++]=null;var M=hn[m];hn[m++]=null;var z=hn[m];if(hn[m++]=null,E!==null&&M!==null){var le=E.pending;le===null?M.next=M:(M.next=le.next,le.next=M),E.pending=M}z!==0&&ug(x,M,z)}}function Gd(A,m,x,E){hn[ba++]=A,hn[ba++]=m,hn[ba++]=x,hn[ba++]=E,es|=E,A.lanes|=E,A=A.alternate,A!==null&&(A.lanes|=E)}function qd(A,m,x,E){return Gd(A,m,x,E),of(A)}function Gu(A,m){return Gd(A,null,null,m),of(A)}function ug(A,m,x){A.lanes|=x;var E=A.alternate;E!==null&&(E.lanes|=x);for(var M=!1,z=A.return;z!==null;)z.childLanes|=x,E=z.alternate,E!==null&&(E.childLanes|=x),z.tag===22&&(A=z.stateNode,A===null||A._visibility&1||(M=!0)),A=z,z=z.return;return A.tag===3?(z=A.stateNode,M&&m!==null&&(M=31-Ot(x),A=z.hiddenUpdates,E=A[M],E===null?A[M]=[m]:E.push(m),m.lane=x|536870912),z):null}function of(A){if(50<D1)throw D1=0,pk=null,Error(n(185));for(var m=A.return;m!==null;)A=m,m=A.return;return A.tag===3?A.stateNode:null}var ni={};function jl(A,m,x,E){this.tag=A,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(A,m,x,E){return new jl(A,m,x,E)}function kh(A){return A=A.prototype,!(!A||!A.isReactComponent)}function eu(A,m){var x=A.alternate;return x===null?(x=Pi(A.tag,m,A.key,A.mode),x.elementType=A.elementType,x.type=A.type,x.stateNode=A.stateNode,x.alternate=A,A.alternate=x):(x.pendingProps=m,x.type=A.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=A.flags&65011712,x.childLanes=A.childLanes,x.lanes=A.lanes,x.child=A.child,x.memoizedProps=A.memoizedProps,x.memoizedState=A.memoizedState,x.updateQueue=A.updateQueue,m=A.dependencies,x.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},x.sibling=A.sibling,x.index=A.index,x.ref=A.ref,x.refCleanup=A.refCleanup,x}function wm(A,m){A.flags&=65011714;var x=A.alternate;return x===null?(A.childLanes=0,A.lanes=m,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=x.childLanes,A.lanes=x.lanes,A.child=x.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=x.memoizedProps,A.memoizedState=x.memoizedState,A.updateQueue=x.updateQueue,A.type=x.type,m=x.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A}function lf(A,m,x,E,M,z){var le=0;if(E=A,typeof A=="function")kh(A)&&(le=1);else if(typeof A=="string")le=Xue(A,x,J.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case N:return A=Pi(31,x,m,M),A.elementType=N,A.lanes=z,A;case g:return qu(x.children,M,z,m);case v:le=8,M|=24;break;case b:return A=Pi(12,x,m,M|2),A.elementType=b,A.lanes=z,A;case B:return A=Pi(13,x,m,M),A.elementType=B,A.lanes=z,A;case F:return A=Pi(19,x,m,M),A.elementType=F,A.lanes=z,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case S:le=10;break e;case _:le=9;break e;case k:le=11;break e;case w:le=14;break e;case C:le=16,E=null;break e}le=29,x=Error(n(130,A===null?"null":typeof A,"")),E=null}return m=Pi(le,x,m,M),m.elementType=A,m.type=E,m.lanes=z,m}function qu(A,m,x,E){return A=Pi(7,A,E,m),A.lanes=x,A}function dg(A,m,x){return A=Pi(6,A,null,m),A.lanes=x,A}function Em(A,m,x){return m=Pi(4,A.children!==null?A.children:[],A.key,m),m.lanes=x,m.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},m}var Wd=[],Wu=0,Bh=null,Ag=0,Fl=[],sl=0,cf=null,Xu=1,Yu="";function uf(A,m){Wd[Wu++]=Ag,Wd[Wu++]=Bh,Bh=A,Ag=m}function d2(A,m,x){Fl[sl++]=Xu,Fl[sl++]=Yu,Fl[sl++]=cf,cf=A;var E=Xu;A=Yu;var M=32-Ot(E)-1;E&=~(1<<M),x+=1;var z=32-Ot(m)+M;if(30<z){var le=M-M%5;z=(E&(1<<le)-1).toString(32),E>>=le,M-=le,Xu=1<<32-Ot(m)+M|x<<M|E,Yu=z+A}else Xu=1<<z|x<<M|E,Yu=A}function Cm(A){A.return!==null&&(uf(A,1),d2(A,1,0))}function _m(A){for(;A===Bh;)Bh=Wd[--Wu],Wd[Wu]=null,Ag=Wd[--Wu],Wd[Wu]=null;for(;A===cf;)cf=Fl[--sl],Fl[sl]=null,Yu=Fl[--sl],Fl[sl]=null,Xu=Fl[--sl],Fl[sl]=null}var Os=null,Ka=null,Mn=!1,Xd=null,tu=!1,d1=Error(n(519));function df(A){var m=Error(n(418,""));throw Th(fn(m,A)),d1}function A2(A){var m=A.stateNode,x=A.type,E=A.memoizedProps;switch(m[tn]=A,m[en]=E,x){case"dialog":_n("cancel",m),_n("close",m);break;case"iframe":case"object":case"embed":_n("load",m);break;case"video":case"audio":for(x=0;x<P1.length;x++)_n(P1[x],m);break;case"source":_n("error",m);break;case"img":case"image":case"link":_n("error",m),_n("load",m);break;case"details":_n("toggle",m);break;case"input":_n("invalid",m),Qc(m,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),Uc(m);break;case"select":_n("invalid",m);break;case"textarea":_n("invalid",m),Vc(m,E.value,E.defaultValue,E.children),Uc(m)}x=E.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||m.textContent===""+x||E.suppressHydrationWarning===!0||dM(m.textContent,x)?(E.popover!=null&&(_n("beforetoggle",m),_n("toggle",m)),E.onScroll!=null&&_n("scroll",m),E.onScrollEnd!=null&&_n("scrollend",m),E.onClick!=null&&(m.onclick=q2),m=!0):m=!1,m||df(A)}function Ju(A){for(Os=A.return;Os;)switch(Os.tag){case 5:case 13:tu=!1;return;case 27:case 3:tu=!0;return;default:Os=Os.return}}function ro(A){if(A!==Os)return!1;if(!Mn)return Ju(A),Mn=!0,!1;var m=A.tag,x;if((x=m!==3&&m!==27)&&((x=m===5)&&(x=A.type,x=!(x!=="form"&&x!=="button")||jk(A.type,A.memoizedProps)),x=!x),x&&Ka&&df(A),Ju(A),m===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,m=0;A;){if(A.nodeType===8)if(x=A.data,x==="/$"){if(m===0){Ka=id(A.nextSibling);break e}m--}else x!=="$"&&x!=="$!"&&x!=="$?"||m++;A=A.nextSibling}Ka=null}}else m===27?(m=Ka,Gh(A.type)?(A=Rk,Rk=null,Ka=A):Ka=m):Ka=Os?id(A.stateNode.nextSibling):null;return!0}function il(){Ka=Os=null,Mn=!1}function f2(){var A=Xd;return A!==null&&(Rl===null?Rl=A:Rl.push.apply(Rl,A),Xd=null),A}function Th(A){Xd===null?Xd=[A]:Xd.push(A)}var ru=ne(null),ai=null,Zu=null;function Yd(A,m,x){W(ru,m._currentValue),m._currentValue=x}function nu(A){A._currentValue=ru.current,L(ru)}function fg(A,m,x){for(;A!==null;){var E=A.alternate;if((A.childLanes&m)!==m?(A.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),A===x)break;A=A.return}}function hg(A,m,x,E){var M=A.child;for(M!==null&&(M.return=A);M!==null;){var z=M.dependencies;if(z!==null){var le=M.child;z=z.firstContext;e:for(;z!==null;){var be=z;z=M;for(var Re=0;Re<m.length;Re++)if(be.context===m[Re]){z.lanes|=x,be=z.alternate,be!==null&&(be.lanes|=x),fg(z.return,x,A),E||(le=null);break e}z=be.next}}else if(M.tag===18){if(le=M.return,le===null)throw Error(n(341));le.lanes|=x,z=le.alternate,z!==null&&(z.lanes|=x),fg(le,x,A),le=null}else le=M.child;if(le!==null)le.return=M;else for(le=M;le!==null;){if(le===A){le=null;break}if(M=le.sibling,M!==null){M.return=le.return,le=M;break}le=le.return}M=le}}function Ih(A,m,x,E){A=null;for(var M=m,z=!1;M!==null;){if(!z){if((M.flags&524288)!==0)z=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var le=M.alternate;if(le===null)throw Error(n(387));if(le=le.memoizedProps,le!==null){var be=M.type;ri(M.pendingProps.value,le.value)||(A!==null?A.push(be):A=[be])}}else if(M===Ae.current){if(le=M.alternate,le===null)throw Error(n(387));le.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(A!==null?A.push(V1):A=[V1])}M=M.return}A!==null&&hg(m,A,x,E),m.flags|=262144}function mg(A){for(A=A.firstContext;A!==null;){if(!ri(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function au(A){ai=A,Zu=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Ds(A){return pg(ai,A)}function Jd(A,m){return ai===null&&au(A),pg(A,m)}function pg(A,m){var x=m._currentValue;if(m={context:m,memoizedValue:x,next:null},Zu===null){if(A===null)throw Error(n(308));Zu=m,A.dependencies={lanes:0,firstContext:m},A.flags|=524288}else Zu=Zu.next=m;return x}var Q4=typeof AbortController<"u"?AbortController:function(){var A=[],m=this.signal={aborted:!1,addEventListener:function(x,E){A.push(E)}};this.abort=function(){m.aborted=!0,A.forEach(function(x){return x()})}},h2=e.unstable_scheduleCallback,H4=e.unstable_NormalPriority,Rs={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function A1(){return{controller:new Q4,data:new Map,refCount:0}}function Sm(A){A.refCount--,A.refCount===0&&h2(H4,function(){A.controller.abort()})}var Nm=null,f1=0,Af=0,ed=null;function V4(A,m){if(Nm===null){var x=Nm=[];f1=0,Af=Ek(),ed={status:"pending",value:void 0,then:function(E){x.push(E)}}}return f1++,m.then(m2,m2),m}function m2(){if(--f1===0&&Nm!==null){ed!==null&&(ed.status="fulfilled");var A=Nm;Nm=null,Af=0,ed=null;for(var m=0;m<A.length;m++)(0,A[m])()}}function p2(A,m){var x=[],E={status:"pending",value:null,reason:null,then:function(M){x.push(M)}};return A.then(function(){E.status="fulfilled",E.value=m;for(var M=0;M<x.length;M++)(0,x[M])(m)},function(M){for(E.status="rejected",E.reason=M,M=0;M<x.length;M++)(0,x[M])(void 0)}),E}var T=K.S;K.S=function(A,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&V4(A,m),T!==null&&T(A,m)};var Q=ne(null);function Y(){var A=Q.current;return A!==null?A:ja.pooledCache}function ae(A,m){m===null?W(Q,Q.current):W(Q,m.pool)}function ue(){var A=Y();return A===null?null:{parent:Rs._currentValue,pool:A}}var me=Error(n(460)),pe=Error(n(474)),ve=Error(n(542)),we={then:function(){}};function ke(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Me(){}function nt(A,m,x){switch(x=A[x],x===void 0?A.push(m):x!==m&&(m.then(Me,Me),m=x),m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Nt(A),A;default:if(typeof m.status=="string")m.then(Me,Me);else{if(A=ja,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=m,A.status="pending",A.then(function(E){if(m.status==="pending"){var M=m;M.status="fulfilled",M.value=E}},function(E){if(m.status==="pending"){var M=m;M.status="rejected",M.reason=E}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Nt(A),A}throw et=m,me}}var et=null;function Ge(){if(et===null)throw Error(n(459));var A=et;return et=null,A}function Nt(A){if(A===me||A===ve)throw Error(n(483))}var ht=!1;function Ue(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,m){A=A.updateQueue,m.updateQueue===A&&(m.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Et(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function kt(A,m,x){var E=A.updateQueue;if(E===null)return null;if(E=E.shared,(da&2)!==0){var M=E.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),E.pending=m,m=of(A),ug(A,null,x),m}return Gd(A,E,m,x),of(A)}function _t(A,m,x){if(m=m.updateQueue,m!==null&&(m=m.shared,(x&4194048)!==0)){var E=m.lanes;E&=A.pendingLanes,x|=E,m.lanes=x,zt(A,x)}}function rr(A,m){var x=A.updateQueue,E=A.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var M=null,z=null;if(x=x.firstBaseUpdate,x!==null){do{var le={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};z===null?M=z=le:z=z.next=le,x=x.next}while(x!==null);z===null?M=z=m:z=z.next=m}else M=z=m;x={baseState:E.baseState,firstBaseUpdate:M,lastBaseUpdate:z,shared:E.shared,callbacks:E.callbacks},A.updateQueue=x;return}A=x.lastBaseUpdate,A===null?x.firstBaseUpdate=m:A.next=m,x.lastBaseUpdate=m}var Wt=!1;function hr(){if(Wt){var A=ed;if(A!==null)throw A}}function Zt(A,m,x,E){Wt=!1;var M=A.updateQueue;ht=!1;var z=M.firstBaseUpdate,le=M.lastBaseUpdate,be=M.shared.pending;if(be!==null){M.shared.pending=null;var Re=be,it=Re.next;Re.next=null,le===null?z=it:le.next=it,le=Re;var Ct=A.alternate;Ct!==null&&(Ct=Ct.updateQueue,be=Ct.lastBaseUpdate,be!==le&&(be===null?Ct.firstBaseUpdate=it:be.next=it,Ct.lastBaseUpdate=Re))}if(z!==null){var It=M.baseState;le=0,Ct=it=Re=null,be=z;do{var At=be.lane&-536870913,ft=At!==be.lane;if(ft?(Rn&At)===At:(E&At)===At){At!==0&&At===Af&&(Wt=!0),Ct!==null&&(Ct=Ct.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var zr=A,Ir=be;At=m;var wa=x;switch(Ir.tag){case 1:if(zr=Ir.payload,typeof zr=="function"){It=zr.call(wa,It,At);break e}It=zr;break e;case 3:zr.flags=zr.flags&-65537|128;case 0:if(zr=Ir.payload,At=typeof zr=="function"?zr.call(wa,It,At):zr,At==null)break e;It=d({},It,At);break e;case 2:ht=!0}}At=be.callback,At!==null&&(A.flags|=64,ft&&(A.flags|=8192),ft=M.callbacks,ft===null?M.callbacks=[At]:ft.push(At))}else ft={lane:At,tag:be.tag,payload:be.payload,callback:be.callback,next:null},Ct===null?(it=Ct=ft,Re=It):Ct=Ct.next=ft,le|=At;if(be=be.next,be===null){if(be=M.shared.pending,be===null)break;ft=be,be=ft.next,ft.next=null,M.lastBaseUpdate=ft,M.shared.pending=null}}while(!0);Ct===null&&(Re=It),M.baseState=Re,M.firstBaseUpdate=it,M.lastBaseUpdate=Ct,z===null&&(M.shared.lanes=0),Vh|=le,A.lanes=le,A.memoizedState=It}}function On(A,m){if(typeof A!="function")throw Error(n(191,A));A.call(m)}function zn(A,m){var x=A.callbacks;if(x!==null)for(A.callbacks=null,A=0;A<x.length;A++)On(x[A],m)}var An=ne(null),on=ne(0);function na(A,m){A=wf,W(on,A),W(An,m),wf=A|m.baseLanes}function $n(){W(on,wf),W(An,An.current)}function qr(){wf=on.current,L(An),L(on)}var ua=0,Sr=null,Lr=null,Fn=null,Dn=!1,si=!1,Ps=!1,ts=0,rs=0,ps=null,Ol=0;function Kn(){throw Error(n(321))}function gs(A,m){if(m===null)return!1;for(var x=0;x<m.length&&x<A.length;x++)if(!ri(A[x],m[x]))return!1;return!0}function uc(A,m,x,E,M,z){return ua=z,Sr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,K.H=A===null||A.memoizedState===null?$L:KL,Ps=!1,z=x(E,M),Ps=!1,si&&(z=ff(m,x,E,M)),Zd(A),z}function Zd(A){K.H=k2;var m=Lr!==null&&Lr.next!==null;if(ua=0,Fn=Lr=Sr=null,Dn=!1,rs=0,ps=null,m)throw Error(n(300));A===null||Li||(A=A.dependencies,A!==null&&mg(A)&&(Li=!0))}function ff(A,m,x,E){Sr=A;var M=0;do{if(si&&(ps=null),rs=0,si=!1,25<=M)throw Error(n(301));if(M+=1,Fn=Lr=null,A.updateQueue!=null){var z=A.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}K.H=oue,z=m(x,E)}while(si);return z}function eA(){var A=K.H,m=A.useState()[0];return m=typeof m.then=="function"?tA(m):m,A=A.useState()[0],(Lr!==null?Lr.memoizedState:null)!==A&&(Sr.flags|=1024),m}function Ia(){var A=ts!==0;return ts=0,A}function km(A,m,x){m.updateQueue=A.updateQueue,m.flags&=-2053,A.lanes&=~x}function gg(A){if(Dn){for(A=A.memoizedState;A!==null;){var m=A.queue;m!==null&&(m.pending=null),A=A.next}Dn=!1}ua=0,Fn=Lr=Sr=null,si=!1,rs=ts=0,ps=null}function no(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?Sr.memoizedState=Fn=A:Fn=Fn.next=A,Fn}function Pa(){if(Lr===null){var A=Sr.alternate;A=A!==null?A.memoizedState:null}else A=Lr.next;var m=Fn===null?Sr.memoizedState:Fn.next;if(m!==null)Fn=m,Lr=A;else{if(A===null)throw Sr.alternate===null?Error(n(467)):Error(n(310));Lr=A,A={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Fn===null?Sr.memoizedState=Fn=A:Fn=Fn.next=A}return Fn}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tA(A){var m=rs;return rs+=1,ps===null&&(ps=[]),A=nt(ps,A,m),m=Sr,(Fn===null?m.memoizedState:Fn.next)===null&&(m=m.alternate,K.H=m===null||m.memoizedState===null?$L:KL),A}function Bo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return tA(A);if(A.$$typeof===S)return Ds(A)}throw Error(n(438,String(A)))}function rA(A){var m=null,x=Sr.updateQueue;if(x!==null&&(m=x.memoCache),m==null){var E=Sr.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(m={data:E.data.map(function(M){return M.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),x===null&&(x=hf(),Sr.updateQueue=x),x.memoCache=m,x=m.data[m.index],x===void 0)for(x=m.data[m.index]=Array(A),E=0;E<A;E++)x[E]=R;return m.index++,x}function To(A,m){return typeof m=="function"?m(A):m}function Bm(A){var m=Pa();return jh(m,Lr,A)}function jh(A,m,x){var E=A.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=x;var M=A.baseQueue,z=E.pending;if(z!==null){if(M!==null){var le=M.next;M.next=z.next,z.next=le}m.baseQueue=M=z,E.pending=null}if(z=A.baseState,M===null)A.memoizedState=z;else{m=M.next;var be=le=null,Re=null,it=m,Ct=!1;do{var It=it.lane&-536870913;if(It!==it.lane?(Rn&It)===It:(ua&It)===It){var At=it.revertLane;if(At===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),It===Af&&(Ct=!0);else if((ua&At)===At){it=it.next,At===Af&&(Ct=!0);continue}else It={lane:0,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Re===null?(be=Re=It,le=z):Re=Re.next=It,Sr.lanes|=At,Vh|=At;It=it.action,Ps&&x(z,It),z=it.hasEagerState?it.eagerState:x(z,It)}else At={lane:It,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Re===null?(be=Re=At,le=z):Re=Re.next=At,Sr.lanes|=It,Vh|=It;it=it.next}while(it!==null&&it!==m);if(Re===null?le=z:Re.next=be,!ri(z,A.memoizedState)&&(Li=!0,Ct&&(x=ed,x!==null)))throw x;A.memoizedState=z,A.baseState=le,A.baseQueue=Re,E.lastRenderedState=z}return M===null&&(E.lanes=0),[A.memoizedState,E.dispatch]}function vg(A){var m=Pa(),x=m.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=A;var E=x.dispatch,M=x.pending,z=m.memoizedState;if(M!==null){x.pending=null;var le=M=M.next;do z=A(z,le.action),le=le.next;while(le!==M);ri(z,m.memoizedState)||(Li=!0),m.memoizedState=z,m.baseQueue===null&&(m.baseState=z),x.lastRenderedState=z}return[z,E]}function Tm(A,m,x){var E=Sr,M=Pa(),z=Mn;if(z){if(x===void 0)throw Error(n(407));x=x()}else x=m();var le=!ri((Lr||M).memoizedState,x);le&&(M.memoizedState=x,Li=!0),M=M.queue;var be=Fh.bind(null,E,M,A);if(Rh(2048,8,be,[A]),M.getSnapshot!==m||le||Fn!==null&&Fn.memoizedState.tag&1){if(E.flags|=2048,rd(9,Om(),Im.bind(null,E,M,x,m),null),ja===null)throw Error(n(349));z||(ua&124)!==0||xg(E,m,x)}return x}function xg(A,m,x){A.flags|=16384,A={getSnapshot:m,value:x},m=Sr.updateQueue,m===null?(m=hf(),Sr.updateQueue=m,m.stores=[A]):(x=m.stores,x===null?m.stores=[A]:x.push(A))}function Im(A,m,x,E){m.value=x,m.getSnapshot=E,g2(m)&&v2(A)}function Fh(A,m,x){return x(function(){g2(m)&&v2(A)})}function g2(A){var m=A.getSnapshot;A=A.value;try{var x=m();return!ri(A,x)}catch{return!0}}function v2(A){var m=Gu(A,2);m!==null&&pc(m,A,2)}function jm(A){var m=no();if(typeof A=="function"){var x=A;if(A=x(),Ps){Lt(!0);try{x()}finally{Lt(!1)}}}return m.memoizedState=m.baseState=A,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:A},m}function td(A,m,x,E){return A.baseState=x,jh(A,Lr,typeof E=="function"?E:To)}function z4(A,m,x,E,M){if(N2(A))throw Error(n(485));if(A=m.action,A!==null){var z={payload:M,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){z.listeners.push(le)}};K.T!==null?x(!0):z.isTransition=!1,E(z),x=m.pending,x===null?(z.next=m.pending=z,x2(m,z)):(z.next=x.next,m.pending=x.next=z)}}function x2(A,m){var x=m.action,E=m.payload,M=A.state;if(m.isTransition){var z=K.T,le={};K.T=le;try{var be=x(M,E),Re=K.S;Re!==null&&Re(le,be),b2(A,m,be)}catch(it){Oh(A,m,it)}finally{K.T=z}}else try{z=x(M,E),b2(A,m,z)}catch(it){Oh(A,m,it)}}function b2(A,m,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(E){h1(A,m,E)},function(E){return Oh(A,m,E)}):h1(A,m,x)}function h1(A,m,x){m.status="fulfilled",m.value=x,m1(m),A.state=x,m=A.pending,m!==null&&(x=m.next,x===m?A.pending=null:(x=x.next,m.next=x,x2(A,x)))}function Oh(A,m,x){var E=A.pending;if(A.pending=null,E!==null){E=E.next;do m.status="rejected",m.reason=x,m1(m),m=m.next;while(m!==E)}A.action=null}function m1(A){A=A.listeners;for(var m=0;m<A.length;m++)(0,A[m])()}function p1(A,m){return m}function Fm(A,m){if(Mn){var x=ja.formState;if(x!==null){e:{var E=Sr;if(Mn){if(Ka){t:{for(var M=Ka,z=tu;M.nodeType!==8;){if(!z){M=null;break t}if(M=id(M.nextSibling),M===null){M=null;break t}}z=M.data,M=z==="F!"||z==="F"?M:null}if(M){Ka=id(M.nextSibling),E=M.data==="F!";break e}}df(E)}E=!1}E&&(m=x[0])}}return x=no(),x.memoizedState=x.baseState=m,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p1,lastRenderedState:m},x.queue=E,x=HL.bind(null,Sr,E),E.dispatch=x,E=jm(!1),z=$4.bind(null,Sr,!1,E.queue),E=no(),M={state:m,dispatch:null,action:A,pending:null},E.queue=M,x=z4.bind(null,Sr,M,z,x),M.dispatch=x,E.memoizedState=A,[m,x,!1]}function bg(A){var m=Pa();return Dh(m,Lr,A)}function Dh(A,m,x){if(m=jh(A,m,p1)[0],A=Bm(To)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var E=tA(m)}catch(le){throw le===me?ve:le}else E=m;m=Pa();var M=m.queue,z=M.dispatch;return x!==m.memoizedState&&(Sr.flags|=2048,rd(9,Om(),y2.bind(null,M,x),null)),[E,z,A]}function y2(A,m){A.action=m}function w2(A){var m=Pa(),x=Lr;if(x!==null)return Dh(m,x,A);Pa(),m=m.memoizedState,x=Pa();var E=x.queue.dispatch;return x.memoizedState=A,[m,E,!1]}function rd(A,m,x,E){return A={tag:A,create:x,deps:E,inst:m,next:null},m=Sr.updateQueue,m===null&&(m=hf(),Sr.updateQueue=m),x=m.lastEffect,x===null?m.lastEffect=A.next=A:(E=x.next,x.next=A,A.next=E,m.lastEffect=A),A}function Om(){return{destroy:void 0,resource:void 0}}function yg(){return Pa().memoizedState}function dc(A,m,x,E){var M=no();E=E===void 0?null:E,Sr.flags|=A,M.memoizedState=rd(1|m,Om(),x,E)}function Rh(A,m,x,E){var M=Pa();E=E===void 0?null:E;var z=M.memoizedState.inst;Lr!==null&&E!==null&&gs(E,Lr.memoizedState.deps)?M.memoizedState=rd(m,z,x,E):(Sr.flags|=A,M.memoizedState=rd(1|m,z,x,E))}function g1(A,m){dc(8390656,8,A,m)}function E2(A,m){Rh(2048,8,A,m)}function v1(A,m){return Rh(4,2,A,m)}function mf(A,m){return Rh(4,4,A,m)}function C2(A,m){if(typeof m=="function"){A=A();var x=m(A);return function(){typeof x=="function"?x():m(null)}}if(m!=null)return A=A(),m.current=A,function(){m.current=null}}function x1(A,m,x){x=x!=null?x.concat([A]):null,Rh(4,4,C2.bind(null,m,A),x)}function b1(){}function y1(A,m){var x=Pa();m=m===void 0?null:m;var E=x.memoizedState;return m!==null&&gs(m,E[1])?E[0]:(x.memoizedState=[A,m],A)}function _2(A,m){var x=Pa();m=m===void 0?null:m;var E=x.memoizedState;if(m!==null&&gs(m,E[1]))return E[0];if(E=A(),Ps){Lt(!0);try{A()}finally{Lt(!1)}}return x.memoizedState=[E,m],E}function pf(A,m,x){return x===void 0||(ua&1073741824)!==0?A.memoizedState=m:(A.memoizedState=x,A=L8(),Sr.lanes|=A,Vh|=A,x)}function wg(A,m,x,E){return ri(x,m)?x:An.current!==null?(A=pf(A,x,E),ri(A,m)||(Li=!0),A):(ua&42)===0?(Li=!0,A.memoizedState=x):(A=L8(),Sr.lanes|=A,Vh|=A,m)}function Dm(A,m,x,E,M){var z=Z.p;Z.p=z!==0&&8>z?z:8;var le=K.T,be={};K.T=be,$4(A,!1,m,x);try{var Re=M(),it=K.S;if(it!==null&&it(be,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var Ct=p2(Re,E);_1(A,m,Ct,mc(A))}else _1(A,m,E,mc(A))}catch(It){_1(A,m,{then:function(){},status:"rejected",reason:It},mc())}finally{Z.p=z,K.T=le}}function nd(){}function su(A,m,x,E){if(A.tag!==5)throw Error(n(476));var M=ad(A).queue;Dm(A,M,m,H,x===null?nd:function(){return Rm(A),x(E)})}function ad(A){var m=A.memoizedState;if(m!==null)return m;m={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:H},next:null};var x={};return m.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:x},next:null},A.memoizedState=m,A=A.alternate,A!==null&&(A.memoizedState=m),m}function Rm(A){var m=ad(A).next.queue;_1(A,m,{},mc())}function Pm(){return Ds(V1)}function w1(){return Pa().memoizedState}function S2(){return Pa().memoizedState}function E1(A){for(var m=A.return;m!==null;){switch(m.tag){case 24:case 3:var x=mc();A=Et(x);var E=kt(m,A,x);E!==null&&(pc(E,m,x),_t(E,m,x)),m={cache:A1()},A.payload=m;return}m=m.return}}function C1(A,m,x){var E=mc();x={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},N2(A)?VL(m,x):(x=qd(A,m,x,E),x!==null&&(pc(x,A,E),zL(x,m,E)))}function HL(A,m,x){var E=mc();_1(A,m,x,E)}function _1(A,m,x,E){var M={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(N2(A))VL(m,M);else{var z=A.alternate;if(A.lanes===0&&(z===null||z.lanes===0)&&(z=m.lastRenderedReducer,z!==null))try{var le=m.lastRenderedState,be=z(le,x);if(M.hasEagerState=!0,M.eagerState=be,ri(be,le))return Gd(A,m,M,0),ja===null&&Il(),!1}catch{}finally{}if(x=qd(A,m,M,E),x!==null)return pc(x,A,E),zL(x,m,E),!0}return!1}function $4(A,m,x,E){if(E={lane:2,revertLane:Ek(),action:E,hasEagerState:!1,eagerState:null,next:null},N2(A)){if(m)throw Error(n(479))}else m=qd(A,x,E,2),m!==null&&pc(m,A,2)}function N2(A){var m=A.alternate;return A===Sr||m!==null&&m===Sr}function VL(A,m){si=Dn=!0;var x=A.pending;x===null?m.next=m:(m.next=x.next,x.next=m),A.pending=m}function zL(A,m,x){if((x&4194048)!==0){var E=m.lanes;E&=A.pendingLanes,x|=E,m.lanes=x,zt(A,x)}}var k2={readContext:Ds,use:Bo,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn},$L={readContext:Ds,use:Bo,useCallback:function(A,m){return no().memoizedState=[A,m===void 0?null:m],A},useContext:Ds,useEffect:g1,useImperativeHandle:function(A,m,x){x=x!=null?x.concat([A]):null,dc(4194308,4,C2.bind(null,m,A),x)},useLayoutEffect:function(A,m){return dc(4194308,4,A,m)},useInsertionEffect:function(A,m){dc(4,2,A,m)},useMemo:function(A,m){var x=no();m=m===void 0?null:m;var E=A();if(Ps){Lt(!0);try{A()}finally{Lt(!1)}}return x.memoizedState=[E,m],E},useReducer:function(A,m,x){var E=no();if(x!==void 0){var M=x(m);if(Ps){Lt(!0);try{x(m)}finally{Lt(!1)}}}else M=m;return E.memoizedState=E.baseState=M,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:M},E.queue=A,A=A.dispatch=C1.bind(null,Sr,A),[E.memoizedState,A]},useRef:function(A){var m=no();return A={current:A},m.memoizedState=A},useState:function(A){A=jm(A);var m=A.queue,x=HL.bind(null,Sr,m);return m.dispatch=x,[A.memoizedState,x]},useDebugValue:b1,useDeferredValue:function(A,m){var x=no();return pf(x,A,m)},useTransition:function(){var A=jm(!1);return A=Dm.bind(null,Sr,A.queue,!0,!1),no().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,m,x){var E=Sr,M=no();if(Mn){if(x===void 0)throw Error(n(407));x=x()}else{if(x=m(),ja===null)throw Error(n(349));(Rn&124)!==0||xg(E,m,x)}M.memoizedState=x;var z={value:x,getSnapshot:m};return M.queue=z,g1(Fh.bind(null,E,z,A),[A]),E.flags|=2048,rd(9,Om(),Im.bind(null,E,z,x,m),null),x},useId:function(){var A=no(),m=ja.identifierPrefix;if(Mn){var x=Yu,E=Xu;x=(E&~(1<<32-Ot(E)-1)).toString(32)+x,m="«"+m+"R"+x,x=ts++,0<x&&(m+="H"+x.toString(32)),m+="»"}else x=Ol++,m="«"+m+"r"+x.toString(32)+"»";return A.memoizedState=m},useHostTransitionStatus:Pm,useFormState:Fm,useActionState:Fm,useOptimistic:function(A){var m=no();m.memoizedState=m.baseState=A;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=x,m=$4.bind(null,Sr,!0,x),x.dispatch=m,[A,m]},useMemoCache:rA,useCacheRefresh:function(){return no().memoizedState=E1.bind(null,Sr)}},KL={readContext:Ds,use:Bo,useCallback:y1,useContext:Ds,useEffect:E2,useImperativeHandle:x1,useInsertionEffect:v1,useLayoutEffect:mf,useMemo:_2,useReducer:Bm,useRef:yg,useState:function(){return Bm(To)},useDebugValue:b1,useDeferredValue:function(A,m){var x=Pa();return wg(x,Lr.memoizedState,A,m)},useTransition:function(){var A=Bm(To)[0],m=Pa().memoizedState;return[typeof A=="boolean"?A:tA(A),m]},useSyncExternalStore:Tm,useId:w1,useHostTransitionStatus:Pm,useFormState:bg,useActionState:bg,useOptimistic:function(A,m){var x=Pa();return td(x,Lr,A,m)},useMemoCache:rA,useCacheRefresh:S2},oue={readContext:Ds,use:Bo,useCallback:y1,useContext:Ds,useEffect:E2,useImperativeHandle:x1,useInsertionEffect:v1,useLayoutEffect:mf,useMemo:_2,useReducer:vg,useRef:yg,useState:function(){return vg(To)},useDebugValue:b1,useDeferredValue:function(A,m){var x=Pa();return Lr===null?pf(x,A,m):wg(x,Lr.memoizedState,A,m)},useTransition:function(){var A=vg(To)[0],m=Pa().memoizedState;return[typeof A=="boolean"?A:tA(A),m]},useSyncExternalStore:Tm,useId:w1,useHostTransitionStatus:Pm,useFormState:w2,useActionState:w2,useOptimistic:function(A,m){var x=Pa();return Lr!==null?td(x,Lr,A,m):(x.baseState=A,[A,x.queue.dispatch])},useMemoCache:rA,useCacheRefresh:S2},Eg=null,S1=0;function B2(A){var m=S1;return S1+=1,Eg===null&&(Eg=[]),nt(Eg,A,m)}function N1(A,m){m=m.props.ref,A.ref=m!==void 0?m:null}function T2(A,m){throw m.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(m),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)))}function GL(A){var m=A._init;return m(A._payload)}function qL(A){function m(We,Qe){if(A){var rt=We.deletions;rt===null?(We.deletions=[Qe],We.flags|=16):rt.push(Qe)}}function x(We,Qe){if(!A)return null;for(;Qe!==null;)m(We,Qe),Qe=Qe.sibling;return null}function E(We){for(var Qe=new Map;We!==null;)We.key!==null?Qe.set(We.key,We):Qe.set(We.index,We),We=We.sibling;return Qe}function M(We,Qe){return We=eu(We,Qe),We.index=0,We.sibling=null,We}function z(We,Qe,rt){return We.index=rt,A?(rt=We.alternate,rt!==null?(rt=rt.index,rt<Qe?(We.flags|=67108866,Qe):rt):(We.flags|=67108866,Qe)):(We.flags|=1048576,Qe)}function le(We){return A&&We.alternate===null&&(We.flags|=67108866),We}function be(We,Qe,rt,St){return Qe===null||Qe.tag!==6?(Qe=dg(rt,We.mode,St),Qe.return=We,Qe):(Qe=M(Qe,rt),Qe.return=We,Qe)}function Re(We,Qe,rt,St){var Ar=rt.type;return Ar===g?Ct(We,Qe,rt.props.children,St,rt.key):Qe!==null&&(Qe.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===C&&GL(Ar)===Qe.type)?(Qe=M(Qe,rt.props),N1(Qe,rt),Qe.return=We,Qe):(Qe=lf(rt.type,rt.key,rt.props,null,We.mode,St),N1(Qe,rt),Qe.return=We,Qe)}function it(We,Qe,rt,St){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==rt.containerInfo||Qe.stateNode.implementation!==rt.implementation?(Qe=Em(rt,We.mode,St),Qe.return=We,Qe):(Qe=M(Qe,rt.children||[]),Qe.return=We,Qe)}function Ct(We,Qe,rt,St,Ar){return Qe===null||Qe.tag!==7?(Qe=qu(rt,We.mode,St,Ar),Qe.return=We,Qe):(Qe=M(Qe,rt),Qe.return=We,Qe)}function It(We,Qe,rt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Qe=dg(""+Qe,We.mode,rt),Qe.return=We,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case h:return rt=lf(Qe.type,Qe.key,Qe.props,null,We.mode,rt),N1(rt,Qe),rt.return=We,rt;case p:return Qe=Em(Qe,We.mode,rt),Qe.return=We,Qe;case C:var St=Qe._init;return Qe=St(Qe._payload),It(We,Qe,rt)}if(X(Qe)||j(Qe))return Qe=qu(Qe,We.mode,rt,null),Qe.return=We,Qe;if(typeof Qe.then=="function")return It(We,B2(Qe),rt);if(Qe.$$typeof===S)return It(We,Jd(We,Qe),rt);T2(We,Qe)}return null}function At(We,Qe,rt,St){var Ar=Qe!==null?Qe.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Ar!==null?null:be(We,Qe,""+rt,St);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:return rt.key===Ar?Re(We,Qe,rt,St):null;case p:return rt.key===Ar?it(We,Qe,rt,St):null;case C:return Ar=rt._init,rt=Ar(rt._payload),At(We,Qe,rt,St)}if(X(rt)||j(rt))return Ar!==null?null:Ct(We,Qe,rt,St,null);if(typeof rt.then=="function")return At(We,Qe,B2(rt),St);if(rt.$$typeof===S)return At(We,Qe,Jd(We,rt),St);T2(We,rt)}return null}function ft(We,Qe,rt,St,Ar){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return We=We.get(rt)||null,be(Qe,We,""+St,Ar);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case h:return We=We.get(St.key===null?rt:St.key)||null,Re(Qe,We,St,Ar);case p:return We=We.get(St.key===null?rt:St.key)||null,it(Qe,We,St,Ar);case C:var bn=St._init;return St=bn(St._payload),ft(We,Qe,rt,St,Ar)}if(X(St)||j(St))return We=We.get(rt)||null,Ct(Qe,We,St,Ar,null);if(typeof St.then=="function")return ft(We,Qe,rt,B2(St),Ar);if(St.$$typeof===S)return ft(We,Qe,rt,Jd(Qe,St),Ar);T2(Qe,St)}return null}function zr(We,Qe,rt,St){for(var Ar=null,bn=null,gr=Qe,Fr=Qe=0,Ui=null;gr!==null&&Fr<rt.length;Fr++){gr.index>Fr?(Ui=gr,gr=null):Ui=gr.sibling;var Gn=At(We,gr,rt[Fr],St);if(Gn===null){gr===null&&(gr=Ui);break}A&&gr&&Gn.alternate===null&&m(We,gr),Qe=z(Gn,Qe,Fr),bn===null?Ar=Gn:bn.sibling=Gn,bn=Gn,gr=Ui}if(Fr===rt.length)return x(We,gr),Mn&&uf(We,Fr),Ar;if(gr===null){for(;Fr<rt.length;Fr++)gr=It(We,rt[Fr],St),gr!==null&&(Qe=z(gr,Qe,Fr),bn===null?Ar=gr:bn.sibling=gr,bn=gr);return Mn&&uf(We,Fr),Ar}for(gr=E(gr);Fr<rt.length;Fr++)Ui=ft(gr,We,Fr,rt[Fr],St),Ui!==null&&(A&&Ui.alternate!==null&&gr.delete(Ui.key===null?Fr:Ui.key),Qe=z(Ui,Qe,Fr),bn===null?Ar=Ui:bn.sibling=Ui,bn=Ui);return A&&gr.forEach(function(Jh){return m(We,Jh)}),Mn&&uf(We,Fr),Ar}function Ir(We,Qe,rt,St){if(rt==null)throw Error(n(151));for(var Ar=null,bn=null,gr=Qe,Fr=Qe=0,Ui=null,Gn=rt.next();gr!==null&&!Gn.done;Fr++,Gn=rt.next()){gr.index>Fr?(Ui=gr,gr=null):Ui=gr.sibling;var Jh=At(We,gr,Gn.value,St);if(Jh===null){gr===null&&(gr=Ui);break}A&&gr&&Jh.alternate===null&&m(We,gr),Qe=z(Jh,Qe,Fr),bn===null?Ar=Jh:bn.sibling=Jh,bn=Jh,gr=Ui}if(Gn.done)return x(We,gr),Mn&&uf(We,Fr),Ar;if(gr===null){for(;!Gn.done;Fr++,Gn=rt.next())Gn=It(We,Gn.value,St),Gn!==null&&(Qe=z(Gn,Qe,Fr),bn===null?Ar=Gn:bn.sibling=Gn,bn=Gn);return Mn&&uf(We,Fr),Ar}for(gr=E(gr);!Gn.done;Fr++,Gn=rt.next())Gn=ft(gr,We,Fr,Gn.value,St),Gn!==null&&(A&&Gn.alternate!==null&&gr.delete(Gn.key===null?Fr:Gn.key),Qe=z(Gn,Qe,Fr),bn===null?Ar=Gn:bn.sibling=Gn,bn=Gn);return A&&gr.forEach(function(lde){return m(We,lde)}),Mn&&uf(We,Fr),Ar}function wa(We,Qe,rt,St){if(typeof rt=="object"&&rt!==null&&rt.type===g&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:e:{for(var Ar=rt.key;Qe!==null;){if(Qe.key===Ar){if(Ar=rt.type,Ar===g){if(Qe.tag===7){x(We,Qe.sibling),St=M(Qe,rt.props.children),St.return=We,We=St;break e}}else if(Qe.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===C&&GL(Ar)===Qe.type){x(We,Qe.sibling),St=M(Qe,rt.props),N1(St,rt),St.return=We,We=St;break e}x(We,Qe);break}else m(We,Qe);Qe=Qe.sibling}rt.type===g?(St=qu(rt.props.children,We.mode,St,rt.key),St.return=We,We=St):(St=lf(rt.type,rt.key,rt.props,null,We.mode,St),N1(St,rt),St.return=We,We=St)}return le(We);case p:e:{for(Ar=rt.key;Qe!==null;){if(Qe.key===Ar)if(Qe.tag===4&&Qe.stateNode.containerInfo===rt.containerInfo&&Qe.stateNode.implementation===rt.implementation){x(We,Qe.sibling),St=M(Qe,rt.children||[]),St.return=We,We=St;break e}else{x(We,Qe);break}else m(We,Qe);Qe=Qe.sibling}St=Em(rt,We.mode,St),St.return=We,We=St}return le(We);case C:return Ar=rt._init,rt=Ar(rt._payload),wa(We,Qe,rt,St)}if(X(rt))return zr(We,Qe,rt,St);if(j(rt)){if(Ar=j(rt),typeof Ar!="function")throw Error(n(150));return rt=Ar.call(rt),Ir(We,Qe,rt,St)}if(typeof rt.then=="function")return wa(We,Qe,B2(rt),St);if(rt.$$typeof===S)return wa(We,Qe,Jd(We,rt),St);T2(We,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,Qe!==null&&Qe.tag===6?(x(We,Qe.sibling),St=M(Qe,rt),St.return=We,We=St):(x(We,Qe),St=dg(rt,We.mode,St),St.return=We,We=St),le(We)):x(We,Qe)}return function(We,Qe,rt,St){try{S1=0;var Ar=wa(We,Qe,rt,St);return Eg=null,Ar}catch(gr){if(gr===me||gr===ve)throw gr;var bn=Pi(29,gr,null,We.mode);return bn.lanes=St,bn.return=We,bn}finally{}}}var Cg=qL(!0),WL=qL(!1),iu=ne(null),nA=null;function Ph(A){var m=A.alternate;W(Ei,Ei.current&1),W(iu,A),nA===null&&(m===null||An.current!==null||m.memoizedState!==null)&&(nA=A)}function XL(A){if(A.tag===22){if(W(Ei,Ei.current),W(iu,A),nA===null){var m=A.alternate;m!==null&&m.memoizedState!==null&&(nA=A)}}else Lh()}function Lh(){W(Ei,Ei.current),W(iu,iu.current)}function gf(A){L(iu),nA===A&&(nA=null),L(Ei)}var Ei=ne(0);function I2(A){for(var m=A;m!==null;){if(m.tag===13){var x=m.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||Dk(x)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function K4(A,m,x,E){m=A.memoizedState,x=x(E,m),x=x==null?m:d({},m,x),A.memoizedState=x,A.lanes===0&&(A.updateQueue.baseState=x)}var G4={enqueueSetState:function(A,m,x){A=A._reactInternals;var E=mc(),M=Et(E);M.payload=m,x!=null&&(M.callback=x),m=kt(A,M,E),m!==null&&(pc(m,A,E),_t(m,A,E))},enqueueReplaceState:function(A,m,x){A=A._reactInternals;var E=mc(),M=Et(E);M.tag=1,M.payload=m,x!=null&&(M.callback=x),m=kt(A,M,E),m!==null&&(pc(m,A,E),_t(m,A,E))},enqueueForceUpdate:function(A,m){A=A._reactInternals;var x=mc(),E=Et(x);E.tag=2,m!=null&&(E.callback=m),m=kt(A,E,x),m!==null&&(pc(m,A,x),_t(m,A,x))}};function YL(A,m,x,E,M,z,le){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(E,z,le):m.prototype&&m.prototype.isPureReactComponent?!Ud(x,E)||!Ud(M,z):!0}function JL(A,m,x,E){A=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(x,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(x,E),m.state!==A&&G4.enqueueReplaceState(m,m.state,null)}function Lm(A,m){var x=m;if("ref"in m){x={};for(var E in m)E!=="ref"&&(x[E]=m[E])}if(A=A.defaultProps){x===m&&(x=d({},x));for(var M in A)x[M]===void 0&&(x[M]=A[M])}return x}var j2=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function ZL(A){j2(A)}function e8(A){console.error(A)}function t8(A){j2(A)}function F2(A,m){try{var x=A.onUncaughtError;x(m.value,{componentStack:m.stack})}catch(E){setTimeout(function(){throw E})}}function r8(A,m,x){try{var E=A.onCaughtError;E(x.value,{componentStack:x.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function q4(A,m,x){return x=Et(x),x.tag=3,x.payload={element:null},x.callback=function(){F2(A,m)},x}function n8(A){return A=Et(A),A.tag=3,A}function a8(A,m,x,E){var M=x.type.getDerivedStateFromError;if(typeof M=="function"){var z=E.value;A.payload=function(){return M(z)},A.callback=function(){r8(m,x,E)}}var le=x.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(A.callback=function(){r8(m,x,E),typeof M!="function"&&(zh===null?zh=new Set([this]):zh.add(this));var be=E.stack;this.componentDidCatch(E.value,{componentStack:be!==null?be:""})})}function lue(A,m,x,E,M){if(x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(m=x.alternate,m!==null&&Ih(m,x,M,!0),x=iu.current,x!==null){switch(x.tag){case 13:return nA===null?vk():x.alternate===null&&vs===0&&(vs=3),x.flags&=-257,x.flags|=65536,x.lanes=M,E===we?x.flags|=16384:(m=x.updateQueue,m===null?x.updateQueue=new Set([E]):m.add(E),bk(A,E,M)),!1;case 22:return x.flags|=65536,E===we?x.flags|=16384:(m=x.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([E])},x.updateQueue=m):(x=m.retryQueue,x===null?m.retryQueue=new Set([E]):x.add(E)),bk(A,E,M)),!1}throw Error(n(435,x.tag))}return bk(A,E,M),vk(),!1}if(Mn)return m=iu.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=M,E!==d1&&(A=Error(n(422),{cause:E}),Th(fn(A,x)))):(E!==d1&&(m=Error(n(423),{cause:E}),Th(fn(m,x))),A=A.current.alternate,A.flags|=65536,M&=-M,A.lanes|=M,E=fn(E,x),M=q4(A.stateNode,E,M),rr(A,M),vs!==4&&(vs=2)),!1;var z=Error(n(520),{cause:E});if(z=fn(z,x),O1===null?O1=[z]:O1.push(z),vs!==4&&(vs=2),m===null)return!0;E=fn(E,x),x=m;do{switch(x.tag){case 3:return x.flags|=65536,A=M&-M,x.lanes|=A,A=q4(x.stateNode,E,A),rr(x,A),!1;case 1:if(m=x.type,z=x.stateNode,(x.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(zh===null||!zh.has(z))))return x.flags|=65536,M&=-M,x.lanes|=M,M=n8(M),a8(M,A,x,E),rr(x,M),!1}x=x.return}while(x!==null);return!1}var s8=Error(n(461)),Li=!1;function ao(A,m,x,E){m.child=A===null?WL(m,null,x,E):Cg(m,A.child,x,E)}function i8(A,m,x,E,M){x=x.render;var z=m.ref;if("ref"in E){var le={};for(var be in E)be!=="ref"&&(le[be]=E[be])}else le=E;return au(m),E=uc(A,m,x,le,z,M),be=Ia(),A!==null&&!Li?(km(A,m,M),vf(A,m,M)):(Mn&&be&&Cm(m),m.flags|=1,ao(A,m,E,M),m.child)}function o8(A,m,x,E,M){if(A===null){var z=x.type;return typeof z=="function"&&!kh(z)&&z.defaultProps===void 0&&x.compare===null?(m.tag=15,m.type=z,l8(A,m,z,E,M)):(A=lf(x.type,null,E,m,m.mode,M),A.ref=m.ref,A.return=m,m.child=A)}if(z=A.child,!rk(A,M)){var le=z.memoizedProps;if(x=x.compare,x=x!==null?x:Ud,x(le,E)&&A.ref===m.ref)return vf(A,m,M)}return m.flags|=1,A=eu(z,E),A.ref=m.ref,A.return=m,m.child=A}function l8(A,m,x,E,M){if(A!==null){var z=A.memoizedProps;if(Ud(z,E)&&A.ref===m.ref)if(Li=!1,m.pendingProps=E=z,rk(A,M))(A.flags&131072)!==0&&(Li=!0);else return m.lanes=A.lanes,vf(A,m,M)}return W4(A,m,x,E,M)}function c8(A,m,x){var E=m.pendingProps,M=E.children,z=A!==null?A.memoizedState:null;if(E.mode==="hidden"){if((m.flags&128)!==0){if(E=z!==null?z.baseLanes|x:x,A!==null){for(M=m.child=A.child,z=0;M!==null;)z=z|M.lanes|M.childLanes,M=M.sibling;m.childLanes=z&~E}else m.childLanes=0,m.child=null;return u8(A,m,E,x)}if((x&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},A!==null&&ae(m,z!==null?z.cachePool:null),z!==null?na(m,z):$n(),XL(m);else return m.lanes=m.childLanes=536870912,u8(A,m,z!==null?z.baseLanes|x:x,x)}else z!==null?(ae(m,z.cachePool),na(m,z),Lh(),m.memoizedState=null):(A!==null&&ae(m,null),$n(),Lh());return ao(A,m,M,x),m.child}function u8(A,m,x,E){var M=Y();return M=M===null?null:{parent:Rs._currentValue,pool:M},m.memoizedState={baseLanes:x,cachePool:M},A!==null&&ae(m,null),$n(),XL(m),A!==null&&Ih(A,m,E,!0),null}function O2(A,m){var x=m.ref;if(x===null)A!==null&&A.ref!==null&&(m.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(A===null||A.ref!==x)&&(m.flags|=4194816)}}function W4(A,m,x,E,M){return au(m),x=uc(A,m,x,E,void 0,M),E=Ia(),A!==null&&!Li?(km(A,m,M),vf(A,m,M)):(Mn&&E&&Cm(m),m.flags|=1,ao(A,m,x,M),m.child)}function d8(A,m,x,E,M,z){return au(m),m.updateQueue=null,x=ff(m,E,x,M),Zd(A),E=Ia(),A!==null&&!Li?(km(A,m,z),vf(A,m,z)):(Mn&&E&&Cm(m),m.flags|=1,ao(A,m,x,z),m.child)}function A8(A,m,x,E,M){if(au(m),m.stateNode===null){var z=ni,le=x.contextType;typeof le=="object"&&le!==null&&(z=Ds(le)),z=new x(E,z),m.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=G4,m.stateNode=z,z._reactInternals=m,z=m.stateNode,z.props=E,z.state=m.memoizedState,z.refs={},Ue(m),le=x.contextType,z.context=typeof le=="object"&&le!==null?Ds(le):ni,z.state=m.memoizedState,le=x.getDerivedStateFromProps,typeof le=="function"&&(K4(m,x,le,E),z.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(le=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),le!==z.state&&G4.enqueueReplaceState(z,z.state,null),Zt(m,E,z,M),hr(),z.state=m.memoizedState),typeof z.componentDidMount=="function"&&(m.flags|=4194308),E=!0}else if(A===null){z=m.stateNode;var be=m.memoizedProps,Re=Lm(x,be);z.props=Re;var it=z.context,Ct=x.contextType;le=ni,typeof Ct=="object"&&Ct!==null&&(le=Ds(Ct));var It=x.getDerivedStateFromProps;Ct=typeof It=="function"||typeof z.getSnapshotBeforeUpdate=="function",be=m.pendingProps!==be,Ct||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(be||it!==le)&&JL(m,z,E,le),ht=!1;var At=m.memoizedState;z.state=At,Zt(m,E,z,M),hr(),it=m.memoizedState,be||At!==it||ht?(typeof It=="function"&&(K4(m,x,It,E),it=m.memoizedState),(Re=ht||YL(m,x,Re,E,At,it,le))?(Ct||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(m.flags|=4194308)):(typeof z.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=it),z.props=E,z.state=it,z.context=le,E=Re):(typeof z.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{z=m.stateNode,Ve(A,m),le=m.memoizedProps,Ct=Lm(x,le),z.props=Ct,It=m.pendingProps,At=z.context,it=x.contextType,Re=ni,typeof it=="object"&&it!==null&&(Re=Ds(it)),be=x.getDerivedStateFromProps,(it=typeof be=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(le!==It||At!==Re)&&JL(m,z,E,Re),ht=!1,At=m.memoizedState,z.state=At,Zt(m,E,z,M),hr();var ft=m.memoizedState;le!==It||At!==ft||ht||A!==null&&A.dependencies!==null&&mg(A.dependencies)?(typeof be=="function"&&(K4(m,x,be,E),ft=m.memoizedState),(Ct=ht||YL(m,x,Ct,E,At,ft,Re)||A!==null&&A.dependencies!==null&&mg(A.dependencies))?(it||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(E,ft,Re),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(E,ft,Re)),typeof z.componentDidUpdate=="function"&&(m.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof z.componentDidUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=ft),z.props=E,z.state=ft,z.context=Re,E=Ct):(typeof z.componentDidUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),E=!1)}return z=E,O2(A,m),E=(m.flags&128)!==0,z||E?(z=m.stateNode,x=E&&typeof x.getDerivedStateFromError!="function"?null:z.render(),m.flags|=1,A!==null&&E?(m.child=Cg(m,A.child,null,M),m.child=Cg(m,null,x,M)):ao(A,m,x,M),m.memoizedState=z.state,A=m.child):A=vf(A,m,M),A}function f8(A,m,x,E){return il(),m.flags|=256,ao(A,m,x,E),m.child}var X4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Y4(A){return{baseLanes:A,cachePool:ue()}}function J4(A,m,x){return A=A!==null?A.childLanes&~x:0,m&&(A|=ou),A}function h8(A,m,x){var E=m.pendingProps,M=!1,z=(m.flags&128)!==0,le;if((le=z)||(le=A!==null&&A.memoizedState===null?!1:(Ei.current&2)!==0),le&&(M=!0,m.flags&=-129),le=(m.flags&32)!==0,m.flags&=-33,A===null){if(Mn){if(M?Ph(m):Lh(),Mn){var be=Ka,Re;if(Re=be){e:{for(Re=be,be=tu;Re.nodeType!==8;){if(!be){be=null;break e}if(Re=id(Re.nextSibling),Re===null){be=null;break e}}be=Re}be!==null?(m.memoizedState={dehydrated:be,treeContext:cf!==null?{id:Xu,overflow:Yu}:null,retryLane:536870912,hydrationErrors:null},Re=Pi(18,null,null,0),Re.stateNode=be,Re.return=m,m.child=Re,Os=m,Ka=null,Re=!0):Re=!1}Re||df(m)}if(be=m.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return Dk(be)?m.lanes=32:m.lanes=536870912,null;gf(m)}return be=E.children,E=E.fallback,M?(Lh(),M=m.mode,be=D2({mode:"hidden",children:be},M),E=qu(E,M,x,null),be.return=m,E.return=m,be.sibling=E,m.child=be,M=m.child,M.memoizedState=Y4(x),M.childLanes=J4(A,le,x),m.memoizedState=X4,E):(Ph(m),Z4(m,be))}if(Re=A.memoizedState,Re!==null&&(be=Re.dehydrated,be!==null)){if(z)m.flags&256?(Ph(m),m.flags&=-257,m=ek(A,m,x)):m.memoizedState!==null?(Lh(),m.child=A.child,m.flags|=128,m=null):(Lh(),M=E.fallback,be=m.mode,E=D2({mode:"visible",children:E.children},be),M=qu(M,be,x,null),M.flags|=2,E.return=m,M.return=m,E.sibling=M,m.child=E,Cg(m,A.child,null,x),E=m.child,E.memoizedState=Y4(x),E.childLanes=J4(A,le,x),m.memoizedState=X4,m=M);else if(Ph(m),Dk(be)){if(le=be.nextSibling&&be.nextSibling.dataset,le)var it=le.dgst;le=it,E=Error(n(419)),E.stack="",E.digest=le,Th({value:E,source:null,stack:null}),m=ek(A,m,x)}else if(Li||Ih(A,m,x,!1),le=(x&A.childLanes)!==0,Li||le){if(le=ja,le!==null&&(E=x&-x,E=(E&42)!==0?1:Pr(E),E=(E&(le.suspendedLanes|x))!==0?0:E,E!==0&&E!==Re.retryLane))throw Re.retryLane=E,Gu(A,E),pc(le,A,E),s8;be.data==="$?"||vk(),m=ek(A,m,x)}else be.data==="$?"?(m.flags|=192,m.child=A.child,m=null):(A=Re.treeContext,Ka=id(be.nextSibling),Os=m,Mn=!0,Xd=null,tu=!1,A!==null&&(Fl[sl++]=Xu,Fl[sl++]=Yu,Fl[sl++]=cf,Xu=A.id,Yu=A.overflow,cf=m),m=Z4(m,E.children),m.flags|=4096);return m}return M?(Lh(),M=E.fallback,be=m.mode,Re=A.child,it=Re.sibling,E=eu(Re,{mode:"hidden",children:E.children}),E.subtreeFlags=Re.subtreeFlags&65011712,it!==null?M=eu(it,M):(M=qu(M,be,x,null),M.flags|=2),M.return=m,E.return=m,E.sibling=M,m.child=E,E=M,M=m.child,be=A.child.memoizedState,be===null?be=Y4(x):(Re=be.cachePool,Re!==null?(it=Rs._currentValue,Re=Re.parent!==it?{parent:it,pool:it}:Re):Re=ue(),be={baseLanes:be.baseLanes|x,cachePool:Re}),M.memoizedState=be,M.childLanes=J4(A,le,x),m.memoizedState=X4,E):(Ph(m),x=A.child,A=x.sibling,x=eu(x,{mode:"visible",children:E.children}),x.return=m,x.sibling=null,A!==null&&(le=m.deletions,le===null?(m.deletions=[A],m.flags|=16):le.push(A)),m.child=x,m.memoizedState=null,x)}function Z4(A,m){return m=D2({mode:"visible",children:m},A.mode),m.return=A,A.child=m}function D2(A,m){return A=Pi(22,A,null,m),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function ek(A,m,x){return Cg(m,A.child,null,x),A=Z4(m,m.pendingProps.children),A.flags|=2,m.memoizedState=null,A}function m8(A,m,x){A.lanes|=m;var E=A.alternate;E!==null&&(E.lanes|=m),fg(A.return,m,x)}function tk(A,m,x,E,M){var z=A.memoizedState;z===null?A.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:M}:(z.isBackwards=m,z.rendering=null,z.renderingStartTime=0,z.last=E,z.tail=x,z.tailMode=M)}function p8(A,m,x){var E=m.pendingProps,M=E.revealOrder,z=E.tail;if(ao(A,m,E.children,x),E=Ei.current,(E&2)!==0)E=E&1|2,m.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=m.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&m8(A,x,m);else if(A.tag===19)m8(A,x,m);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break e;for(;A.sibling===null;){if(A.return===null||A.return===m)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}E&=1}switch(W(Ei,E),M){case"forwards":for(x=m.child,M=null;x!==null;)A=x.alternate,A!==null&&I2(A)===null&&(M=x),x=x.sibling;x=M,x===null?(M=m.child,m.child=null):(M=x.sibling,x.sibling=null),tk(m,!1,M,x,z);break;case"backwards":for(x=null,M=m.child,m.child=null;M!==null;){if(A=M.alternate,A!==null&&I2(A)===null){m.child=M;break}A=M.sibling,M.sibling=x,x=M,M=A}tk(m,!0,x,null,z);break;case"together":tk(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function vf(A,m,x){if(A!==null&&(m.dependencies=A.dependencies),Vh|=m.lanes,(x&m.childLanes)===0)if(A!==null){if(Ih(A,m,x,!1),(x&m.childLanes)===0)return null}else return null;if(A!==null&&m.child!==A.child)throw Error(n(153));if(m.child!==null){for(A=m.child,x=eu(A,A.pendingProps),m.child=x,x.return=m;A.sibling!==null;)A=A.sibling,x=x.sibling=eu(A,A.pendingProps),x.return=m;x.sibling=null}return m.child}function rk(A,m){return(A.lanes&m)!==0?!0:(A=A.dependencies,!!(A!==null&&mg(A)))}function cue(A,m,x){switch(m.tag){case 3:oe(m,m.stateNode.containerInfo),Yd(m,Rs,A.memoizedState.cache),il();break;case 27:case 5:ge(m);break;case 4:oe(m,m.stateNode.containerInfo);break;case 10:Yd(m,m.type,m.memoizedProps.value);break;case 13:var E=m.memoizedState;if(E!==null)return E.dehydrated!==null?(Ph(m),m.flags|=128,null):(x&m.child.childLanes)!==0?h8(A,m,x):(Ph(m),A=vf(A,m,x),A!==null?A.sibling:null);Ph(m);break;case 19:var M=(A.flags&128)!==0;if(E=(x&m.childLanes)!==0,E||(Ih(A,m,x,!1),E=(x&m.childLanes)!==0),M){if(E)return p8(A,m,x);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),W(Ei,Ei.current),E)break;return null;case 22:case 23:return m.lanes=0,c8(A,m,x);case 24:Yd(m,Rs,A.memoizedState.cache)}return vf(A,m,x)}function g8(A,m,x){if(A!==null)if(A.memoizedProps!==m.pendingProps)Li=!0;else{if(!rk(A,x)&&(m.flags&128)===0)return Li=!1,cue(A,m,x);Li=(A.flags&131072)!==0}else Li=!1,Mn&&(m.flags&1048576)!==0&&d2(m,Ag,m.index);switch(m.lanes=0,m.tag){case 16:e:{A=m.pendingProps;var E=m.elementType,M=E._init;if(E=M(E._payload),m.type=E,typeof E=="function")kh(E)?(A=Lm(E,A),m.tag=1,m=A8(null,m,E,A,x)):(m.tag=0,m=W4(null,m,E,A,x));else{if(E!=null){if(M=E.$$typeof,M===k){m.tag=11,m=i8(null,m,E,A,x);break e}else if(M===w){m.tag=14,m=o8(null,m,E,A,x);break e}}throw m=P(E)||E,Error(n(306,m,""))}}return m;case 0:return W4(A,m,m.type,m.pendingProps,x);case 1:return E=m.type,M=Lm(E,m.pendingProps),A8(A,m,E,M,x);case 3:e:{if(oe(m,m.stateNode.containerInfo),A===null)throw Error(n(387));E=m.pendingProps;var z=m.memoizedState;M=z.element,Ve(A,m),Zt(m,E,null,x);var le=m.memoizedState;if(E=le.cache,Yd(m,Rs,E),E!==z.cache&&hg(m,[Rs],x,!0),hr(),E=le.element,z.isDehydrated)if(z={element:E,isDehydrated:!1,cache:le.cache},m.updateQueue.baseState=z,m.memoizedState=z,m.flags&256){m=f8(A,m,E,x);break e}else if(E!==M){M=fn(Error(n(424)),m),Th(M),m=f8(A,m,E,x);break e}else{switch(A=m.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Ka=id(A.firstChild),Os=m,Mn=!0,Xd=null,tu=!0,x=WL(m,null,E,x),m.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(il(),E===M){m=vf(A,m,x);break e}ao(A,m,E,x)}m=m.child}return m;case 26:return O2(A,m),A===null?(x=yM(m.type,null,m.pendingProps,null))?m.memoizedState=x:Mn||(x=m.type,A=m.pendingProps,E=W2(ie.current).createElement(x),E[tn]=m,E[en]=A,io(E,x,A),$e(E),m.stateNode=E):m.memoizedState=yM(m.type,A.memoizedProps,m.pendingProps,A.memoizedState),null;case 27:return ge(m),A===null&&Mn&&(E=m.stateNode=vM(m.type,m.pendingProps,ie.current),Os=m,tu=!0,M=Ka,Gh(m.type)?(Rk=M,Ka=id(E.firstChild)):Ka=M),ao(A,m,m.pendingProps.children,x),O2(A,m),A===null&&(m.flags|=4194304),m.child;case 5:return A===null&&Mn&&((M=E=Ka)&&(E=Pue(E,m.type,m.pendingProps,tu),E!==null?(m.stateNode=E,Os=m,Ka=id(E.firstChild),tu=!1,M=!0):M=!1),M||df(m)),ge(m),M=m.type,z=m.pendingProps,le=A!==null?A.memoizedProps:null,E=z.children,jk(M,z)?E=null:le!==null&&jk(M,le)&&(m.flags|=32),m.memoizedState!==null&&(M=uc(A,m,eA,null,null,x),V1._currentValue=M),O2(A,m),ao(A,m,E,x),m.child;case 6:return A===null&&Mn&&((A=x=Ka)&&(x=Lue(x,m.pendingProps,tu),x!==null?(m.stateNode=x,Os=m,Ka=null,A=!0):A=!1),A||df(m)),null;case 13:return h8(A,m,x);case 4:return oe(m,m.stateNode.containerInfo),E=m.pendingProps,A===null?m.child=Cg(m,null,E,x):ao(A,m,E,x),m.child;case 11:return i8(A,m,m.type,m.pendingProps,x);case 7:return ao(A,m,m.pendingProps,x),m.child;case 8:return ao(A,m,m.pendingProps.children,x),m.child;case 12:return ao(A,m,m.pendingProps.children,x),m.child;case 10:return E=m.pendingProps,Yd(m,m.type,E.value),ao(A,m,E.children,x),m.child;case 9:return M=m.type._context,E=m.pendingProps.children,au(m),M=Ds(M),E=E(M),m.flags|=1,ao(A,m,E,x),m.child;case 14:return o8(A,m,m.type,m.pendingProps,x);case 15:return l8(A,m,m.type,m.pendingProps,x);case 19:return p8(A,m,x);case 31:return E=m.pendingProps,x=m.mode,E={mode:E.mode,children:E.children},A===null?(x=D2(E,x),x.ref=m.ref,m.child=x,x.return=m,m=x):(x=eu(A.child,E),x.ref=m.ref,m.child=x,x.return=m,m=x),m;case 22:return c8(A,m,x);case 24:return au(m),E=Ds(Rs),A===null?(M=Y(),M===null&&(M=ja,z=A1(),M.pooledCache=z,z.refCount++,z!==null&&(M.pooledCacheLanes|=x),M=z),m.memoizedState={parent:E,cache:M},Ue(m),Yd(m,Rs,M)):((A.lanes&x)!==0&&(Ve(A,m),Zt(m,null,null,x),hr()),M=A.memoizedState,z=m.memoizedState,M.parent!==E?(M={parent:E,cache:E},m.memoizedState=M,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=M),Yd(m,Rs,E)):(E=z.cache,Yd(m,Rs,E),E!==M.cache&&hg(m,[Rs],x,!0))),ao(A,m,m.pendingProps.children,x),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function xf(A){A.flags|=4}function v8(A,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!SM(m)){if(m=iu.current,m!==null&&((Rn&4194048)===Rn?nA!==null:(Rn&62914560)!==Rn&&(Rn&536870912)===0||m!==nA))throw et=we,pe;A.flags|=8192}}function R2(A,m){m!==null&&(A.flags|=4),A.flags&16384&&(m=A.tag!==22?pt():536870912,A.lanes|=m,kg|=m)}function k1(A,m){if(!Mn)switch(A.tailMode){case"hidden":m=A.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?A.tail=null:x.sibling=null;break;case"collapsed":x=A.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?m||A.tail===null?A.tail=null:A.tail.sibling=null:E.sibling=null}}function ns(A){var m=A.alternate!==null&&A.alternate.child===A.child,x=0,E=0;if(m)for(var M=A.child;M!==null;)x|=M.lanes|M.childLanes,E|=M.subtreeFlags&65011712,E|=M.flags&65011712,M.return=A,M=M.sibling;else for(M=A.child;M!==null;)x|=M.lanes|M.childLanes,E|=M.subtreeFlags,E|=M.flags,M.return=A,M=M.sibling;return A.subtreeFlags|=E,A.childLanes=x,m}function uue(A,m,x){var E=m.pendingProps;switch(_m(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ns(m),null;case 1:return ns(m),null;case 3:return x=m.stateNode,E=null,A!==null&&(E=A.memoizedState.cache),m.memoizedState.cache!==E&&(m.flags|=2048),nu(Rs),ce(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(A===null||A.child===null)&&(ro(m)?xf(m):A===null||A.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,f2())),ns(m),null;case 26:return x=m.memoizedState,A===null?(xf(m),x!==null?(ns(m),v8(m,x)):(ns(m),m.flags&=-16777217)):x?x!==A.memoizedState?(xf(m),ns(m),v8(m,x)):(ns(m),m.flags&=-16777217):(A.memoizedProps!==E&&xf(m),ns(m),m.flags&=-16777217),null;case 27:je(m),x=ie.current;var M=m.type;if(A!==null&&m.stateNode!=null)A.memoizedProps!==E&&xf(m);else{if(!E){if(m.stateNode===null)throw Error(n(166));return ns(m),null}A=J.current,ro(m)?A2(m):(A=vM(M,E,x),m.stateNode=A,xf(m))}return ns(m),null;case 5:if(je(m),x=m.type,A!==null&&m.stateNode!=null)A.memoizedProps!==E&&xf(m);else{if(!E){if(m.stateNode===null)throw Error(n(166));return ns(m),null}if(A=J.current,ro(m))A2(m);else{switch(M=W2(ie.current),A){case 1:A=M.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:A=M.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":A=M.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":A=M.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":A=M.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof E.is=="string"?M.createElement("select",{is:E.is}):M.createElement("select"),E.multiple?A.multiple=!0:E.size&&(A.size=E.size);break;default:A=typeof E.is=="string"?M.createElement(x,{is:E.is}):M.createElement(x)}}A[tn]=m,A[en]=E;e:for(M=m.child;M!==null;){if(M.tag===5||M.tag===6)A.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===m)break e;for(;M.sibling===null;){if(M.return===null||M.return===m)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}m.stateNode=A;e:switch(io(A,x,E),x){case"button":case"input":case"select":case"textarea":A=!!E.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&xf(m)}}return ns(m),m.flags&=-16777217,null;case 6:if(A&&m.stateNode!=null)A.memoizedProps!==E&&xf(m);else{if(typeof E!="string"&&m.stateNode===null)throw Error(n(166));if(A=ie.current,ro(m)){if(A=m.stateNode,x=m.memoizedProps,E=null,M=Os,M!==null)switch(M.tag){case 27:case 5:E=M.memoizedProps}A[tn]=m,A=!!(A.nodeValue===x||E!==null&&E.suppressHydrationWarning===!0||dM(A.nodeValue,x)),A||df(m)}else A=W2(A).createTextNode(E),A[tn]=m,m.stateNode=A}return ns(m),null;case 13:if(E=m.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(M=ro(m),E!==null&&E.dehydrated!==null){if(A===null){if(!M)throw Error(n(318));if(M=m.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[tn]=m}else il(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ns(m),M=!1}else M=f2(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=M),M=!0;if(!M)return m.flags&256?(gf(m),m):(gf(m),null)}if(gf(m),(m.flags&128)!==0)return m.lanes=x,m;if(x=E!==null,A=A!==null&&A.memoizedState!==null,x){E=m.child,M=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(M=E.alternate.memoizedState.cachePool.pool);var z=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(z=E.memoizedState.cachePool.pool),z!==M&&(E.flags|=2048)}return x!==A&&x&&(m.child.flags|=8192),R2(m,m.updateQueue),ns(m),null;case 4:return ce(),A===null&&Nk(m.stateNode.containerInfo),ns(m),null;case 10:return nu(m.type),ns(m),null;case 19:if(L(Ei),M=m.memoizedState,M===null)return ns(m),null;if(E=(m.flags&128)!==0,z=M.rendering,z===null)if(E)k1(M,!1);else{if(vs!==0||A!==null&&(A.flags&128)!==0)for(A=m.child;A!==null;){if(z=I2(A),z!==null){for(m.flags|=128,k1(M,!1),A=z.updateQueue,m.updateQueue=A,R2(m,A),m.subtreeFlags=0,A=x,x=m.child;x!==null;)wm(x,A),x=x.sibling;return W(Ei,Ei.current&1|2),m.child}A=A.sibling}M.tail!==null&&Ie()>M2&&(m.flags|=128,E=!0,k1(M,!1),m.lanes=4194304)}else{if(!E)if(A=I2(z),A!==null){if(m.flags|=128,E=!0,A=A.updateQueue,m.updateQueue=A,R2(m,A),k1(M,!0),M.tail===null&&M.tailMode==="hidden"&&!z.alternate&&!Mn)return ns(m),null}else 2*Ie()-M.renderingStartTime>M2&&x!==536870912&&(m.flags|=128,E=!0,k1(M,!1),m.lanes=4194304);M.isBackwards?(z.sibling=m.child,m.child=z):(A=M.last,A!==null?A.sibling=z:m.child=z,M.last=z)}return M.tail!==null?(m=M.tail,M.rendering=m,M.tail=m.sibling,M.renderingStartTime=Ie(),m.sibling=null,A=Ei.current,W(Ei,E?A&1|2:A&1),m):(ns(m),null);case 22:case 23:return gf(m),qr(),E=m.memoizedState!==null,A!==null?A.memoizedState!==null!==E&&(m.flags|=8192):E&&(m.flags|=8192),E?(x&536870912)!==0&&(m.flags&128)===0&&(ns(m),m.subtreeFlags&6&&(m.flags|=8192)):ns(m),x=m.updateQueue,x!==null&&R2(m,x.retryQueue),x=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(x=A.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048),A!==null&&L(Q),null;case 24:return x=null,A!==null&&(x=A.memoizedState.cache),m.memoizedState.cache!==x&&(m.flags|=2048),nu(Rs),ns(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function due(A,m){switch(_m(m),m.tag){case 1:return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 3:return nu(Rs),ce(),A=m.flags,(A&65536)!==0&&(A&128)===0?(m.flags=A&-65537|128,m):null;case 26:case 27:case 5:return je(m),null;case 13:if(gf(m),A=m.memoizedState,A!==null&&A.dehydrated!==null){if(m.alternate===null)throw Error(n(340));il()}return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 19:return L(Ei),null;case 4:return ce(),null;case 10:return nu(m.type),null;case 22:case 23:return gf(m),qr(),A!==null&&L(Q),A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 24:return nu(Rs),null;case 25:return null;default:return null}}function x8(A,m){switch(_m(m),m.tag){case 3:nu(Rs),ce();break;case 26:case 27:case 5:je(m);break;case 4:ce();break;case 13:gf(m);break;case 19:L(Ei);break;case 10:nu(m.type);break;case 22:case 23:gf(m),qr(),A!==null&&L(Q);break;case 24:nu(Rs)}}function B1(A,m){try{var x=m.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var M=E.next;x=M;do{if((x.tag&A)===A){E=void 0;var z=x.create,le=x.inst;E=z(),le.destroy=E}x=x.next}while(x!==M)}}catch(be){Sa(m,m.return,be)}}function Mh(A,m,x){try{var E=m.updateQueue,M=E!==null?E.lastEffect:null;if(M!==null){var z=M.next;E=z;do{if((E.tag&A)===A){var le=E.inst,be=le.destroy;if(be!==void 0){le.destroy=void 0,M=m;var Re=x,it=be;try{it()}catch(Ct){Sa(M,Re,Ct)}}}E=E.next}while(E!==z)}}catch(Ct){Sa(m,m.return,Ct)}}function b8(A){var m=A.updateQueue;if(m!==null){var x=A.stateNode;try{zn(m,x)}catch(E){Sa(A,A.return,E)}}}function y8(A,m,x){x.props=Lm(A.type,A.memoizedProps),x.state=A.memoizedState;try{x.componentWillUnmount()}catch(E){Sa(A,m,E)}}function T1(A,m){try{var x=A.ref;if(x!==null){switch(A.tag){case 26:case 27:case 5:var E=A.stateNode;break;case 30:E=A.stateNode;break;default:E=A.stateNode}typeof x=="function"?A.refCleanup=x(E):x.current=E}}catch(M){Sa(A,m,M)}}function aA(A,m){var x=A.ref,E=A.refCleanup;if(x!==null)if(typeof E=="function")try{E()}catch(M){Sa(A,m,M)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(M){Sa(A,m,M)}else x.current=null}function w8(A){var m=A.type,x=A.memoizedProps,E=A.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":x.autoFocus&&E.focus();break e;case"img":x.src?E.src=x.src:x.srcSet&&(E.srcset=x.srcSet)}}catch(M){Sa(A,A.return,M)}}function nk(A,m,x){try{var E=A.stateNode;jue(E,A.type,x,m),E[en]=m}catch(M){Sa(A,A.return,M)}}function E8(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&Gh(A.type)||A.tag===4}function ak(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||E8(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&Gh(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function sk(A,m,x){var E=A.tag;if(E===5||E===6)A=A.stateNode,m?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(A,m):(m=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,m.appendChild(A),x=x._reactRootContainer,x!=null||m.onclick!==null||(m.onclick=q2));else if(E!==4&&(E===27&&Gh(A.type)&&(x=A.stateNode,m=null),A=A.child,A!==null))for(sk(A,m,x),A=A.sibling;A!==null;)sk(A,m,x),A=A.sibling}function P2(A,m,x){var E=A.tag;if(E===5||E===6)A=A.stateNode,m?x.insertBefore(A,m):x.appendChild(A);else if(E!==4&&(E===27&&Gh(A.type)&&(x=A.stateNode),A=A.child,A!==null))for(P2(A,m,x),A=A.sibling;A!==null;)P2(A,m,x),A=A.sibling}function C8(A){var m=A.stateNode,x=A.memoizedProps;try{for(var E=A.type,M=m.attributes;M.length;)m.removeAttributeNode(M[0]);io(m,E,x),m[tn]=A,m[en]=x}catch(z){Sa(A,A.return,z)}}var bf=!1,Ls=!1,ik=!1,_8=typeof WeakSet=="function"?WeakSet:Set,Mi=null;function Aue(A,m){if(A=A.containerInfo,Tk=tE,A=to(A),wi(A)){if("selectionStart"in A)var x={start:A.selectionStart,end:A.selectionEnd};else e:{x=(x=A.ownerDocument)&&x.defaultView||window;var E=x.getSelection&&x.getSelection();if(E&&E.rangeCount!==0){x=E.anchorNode;var M=E.anchorOffset,z=E.focusNode;E=E.focusOffset;try{x.nodeType,z.nodeType}catch{x=null;break e}var le=0,be=-1,Re=-1,it=0,Ct=0,It=A,At=null;t:for(;;){for(var ft;It!==x||M!==0&&It.nodeType!==3||(be=le+M),It!==z||E!==0&&It.nodeType!==3||(Re=le+E),It.nodeType===3&&(le+=It.nodeValue.length),(ft=It.firstChild)!==null;)At=It,It=ft;for(;;){if(It===A)break t;if(At===x&&++it===M&&(be=le),At===z&&++Ct===E&&(Re=le),(ft=It.nextSibling)!==null)break;It=At,At=It.parentNode}It=ft}x=be===-1||Re===-1?null:{start:be,end:Re}}else x=null}x=x||{start:0,end:0}}else x=null;for(Ik={focusedElem:A,selectionRange:x},tE=!1,Mi=m;Mi!==null;)if(m=Mi,A=m.child,(m.subtreeFlags&1024)!==0&&A!==null)A.return=m,Mi=A;else for(;Mi!==null;){switch(m=Mi,z=m.alternate,A=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&z!==null){A=void 0,x=m,M=z.memoizedProps,z=z.memoizedState,E=x.stateNode;try{var zr=Lm(x.type,M,x.elementType===x.type);A=E.getSnapshotBeforeUpdate(zr,z),E.__reactInternalSnapshotBeforeUpdate=A}catch(Ir){Sa(x,x.return,Ir)}}break;case 3:if((A&1024)!==0){if(A=m.stateNode.containerInfo,x=A.nodeType,x===9)Ok(A);else if(x===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":Ok(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=m.sibling,A!==null){A.return=m.return,Mi=A;break}Mi=m.return}}function S8(A,m,x){var E=x.flags;switch(x.tag){case 0:case 11:case 15:Uh(A,x),E&4&&B1(5,x);break;case 1:if(Uh(A,x),E&4)if(A=x.stateNode,m===null)try{A.componentDidMount()}catch(le){Sa(x,x.return,le)}else{var M=Lm(x.type,m.memoizedProps);m=m.memoizedState;try{A.componentDidUpdate(M,m,A.__reactInternalSnapshotBeforeUpdate)}catch(le){Sa(x,x.return,le)}}E&64&&b8(x),E&512&&T1(x,x.return);break;case 3:if(Uh(A,x),E&64&&(A=x.updateQueue,A!==null)){if(m=null,x.child!==null)switch(x.child.tag){case 27:case 5:m=x.child.stateNode;break;case 1:m=x.child.stateNode}try{zn(A,m)}catch(le){Sa(x,x.return,le)}}break;case 27:m===null&&E&4&&C8(x);case 26:case 5:Uh(A,x),m===null&&E&4&&w8(x),E&512&&T1(x,x.return);break;case 12:Uh(A,x);break;case 13:Uh(A,x),E&4&&B8(A,x),E&64&&(A=x.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(x=yue.bind(null,x),Mue(A,x))));break;case 22:if(E=x.memoizedState!==null||bf,!E){m=m!==null&&m.memoizedState!==null||Ls,M=bf;var z=Ls;bf=E,(Ls=m)&&!z?Qh(A,x,(x.subtreeFlags&8772)!==0):Uh(A,x),bf=M,Ls=z}break;case 30:break;default:Uh(A,x)}}function N8(A){var m=A.alternate;m!==null&&(A.alternate=null,N8(m)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(m=A.stateNode,m!==null&&Ce(m)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Ga=null,Dl=!1;function yf(A,m,x){for(x=x.child;x!==null;)k8(A,m,x),x=x.sibling}function k8(A,m,x){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(mt,x)}catch{}switch(x.tag){case 26:Ls||aA(x,m),yf(A,m,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Ls||aA(x,m);var E=Ga,M=Dl;Gh(x.type)&&(Ga=x.stateNode,Dl=!1),yf(A,m,x),M1(x.stateNode),Ga=E,Dl=M;break;case 5:Ls||aA(x,m);case 6:if(E=Ga,M=Dl,Ga=null,yf(A,m,x),Ga=E,Dl=M,Ga!==null)if(Dl)try{(Ga.nodeType===9?Ga.body:Ga.nodeName==="HTML"?Ga.ownerDocument.body:Ga).removeChild(x.stateNode)}catch(z){Sa(x,m,z)}else try{Ga.removeChild(x.stateNode)}catch(z){Sa(x,m,z)}break;case 18:Ga!==null&&(Dl?(A=Ga,pM(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,x.stateNode),G1(A)):pM(Ga,x.stateNode));break;case 4:E=Ga,M=Dl,Ga=x.stateNode.containerInfo,Dl=!0,yf(A,m,x),Ga=E,Dl=M;break;case 0:case 11:case 14:case 15:Ls||Mh(2,x,m),Ls||Mh(4,x,m),yf(A,m,x);break;case 1:Ls||(aA(x,m),E=x.stateNode,typeof E.componentWillUnmount=="function"&&y8(x,m,E)),yf(A,m,x);break;case 21:yf(A,m,x);break;case 22:Ls=(E=Ls)||x.memoizedState!==null,yf(A,m,x),Ls=E;break;default:yf(A,m,x)}}function B8(A,m){if(m.memoizedState===null&&(A=m.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{G1(A)}catch(x){Sa(m,m.return,x)}}function fue(A){switch(A.tag){case 13:case 19:var m=A.stateNode;return m===null&&(m=A.stateNode=new _8),m;case 22:return A=A.stateNode,m=A._retryCache,m===null&&(m=A._retryCache=new _8),m;default:throw Error(n(435,A.tag))}}function ok(A,m){var x=fue(A);m.forEach(function(E){var M=wue.bind(null,A,E);x.has(E)||(x.add(E),E.then(M,M))})}function Ac(A,m){var x=m.deletions;if(x!==null)for(var E=0;E<x.length;E++){var M=x[E],z=A,le=m,be=le;e:for(;be!==null;){switch(be.tag){case 27:if(Gh(be.type)){Ga=be.stateNode,Dl=!1;break e}break;case 5:Ga=be.stateNode,Dl=!1;break e;case 3:case 4:Ga=be.stateNode.containerInfo,Dl=!0;break e}be=be.return}if(Ga===null)throw Error(n(160));k8(z,le,M),Ga=null,Dl=!1,z=M.alternate,z!==null&&(z.return=null),M.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)T8(m,A),m=m.sibling}var sd=null;function T8(A,m){var x=A.alternate,E=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Ac(m,A),fc(A),E&4&&(Mh(3,A,A.return),B1(3,A),Mh(5,A,A.return));break;case 1:Ac(m,A),fc(A),E&512&&(Ls||x===null||aA(x,x.return)),E&64&&bf&&(A=A.updateQueue,A!==null&&(E=A.callbacks,E!==null&&(x=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=x===null?E:x.concat(E))));break;case 26:var M=sd;if(Ac(m,A),fc(A),E&512&&(Ls||x===null||aA(x,x.return)),E&4){var z=x!==null?x.memoizedState:null;if(E=A.memoizedState,x===null)if(E===null)if(A.stateNode===null){e:{E=A.type,x=A.memoizedProps,M=M.ownerDocument||M;t:switch(E){case"title":z=M.getElementsByTagName("title")[0],(!z||z[Ee]||z[tn]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=M.createElement(E),M.head.insertBefore(z,M.querySelector("head > title"))),io(z,E,x),z[tn]=A,$e(z),E=z;break e;case"link":var le=CM("link","href",M).get(E+(x.href||""));if(le){for(var be=0;be<le.length;be++)if(z=le[be],z.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&z.getAttribute("rel")===(x.rel==null?null:x.rel)&&z.getAttribute("title")===(x.title==null?null:x.title)&&z.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){le.splice(be,1);break t}}z=M.createElement(E),io(z,E,x),M.head.appendChild(z);break;case"meta":if(le=CM("meta","content",M).get(E+(x.content||""))){for(be=0;be<le.length;be++)if(z=le[be],z.getAttribute("content")===(x.content==null?null:""+x.content)&&z.getAttribute("name")===(x.name==null?null:x.name)&&z.getAttribute("property")===(x.property==null?null:x.property)&&z.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&z.getAttribute("charset")===(x.charSet==null?null:x.charSet)){le.splice(be,1);break t}}z=M.createElement(E),io(z,E,x),M.head.appendChild(z);break;default:throw Error(n(468,E))}z[tn]=A,$e(z),E=z}A.stateNode=E}else _M(M,A.type,A.stateNode);else A.stateNode=EM(M,E,A.memoizedProps);else z!==E?(z===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):z.count--,E===null?_M(M,A.type,A.stateNode):EM(M,E,A.memoizedProps)):E===null&&A.stateNode!==null&&nk(A,A.memoizedProps,x.memoizedProps)}break;case 27:Ac(m,A),fc(A),E&512&&(Ls||x===null||aA(x,x.return)),x!==null&&E&4&&nk(A,A.memoizedProps,x.memoizedProps);break;case 5:if(Ac(m,A),fc(A),E&512&&(Ls||x===null||aA(x,x.return)),A.flags&32){M=A.stateNode;try{yo(M,"")}catch(ft){Sa(A,A.return,ft)}}E&4&&A.stateNode!=null&&(M=A.memoizedProps,nk(A,M,x!==null?x.memoizedProps:M)),E&1024&&(ik=!0);break;case 6:if(Ac(m,A),fc(A),E&4){if(A.stateNode===null)throw Error(n(162));E=A.memoizedProps,x=A.stateNode;try{x.nodeValue=E}catch(ft){Sa(A,A.return,ft)}}break;case 3:if(J2=null,M=sd,sd=X2(m.containerInfo),Ac(m,A),sd=M,fc(A),E&4&&x!==null&&x.memoizedState.isDehydrated)try{G1(m.containerInfo)}catch(ft){Sa(A,A.return,ft)}ik&&(ik=!1,I8(A));break;case 4:E=sd,sd=X2(A.stateNode.containerInfo),Ac(m,A),fc(A),sd=E;break;case 12:Ac(m,A),fc(A);break;case 13:Ac(m,A),fc(A),A.child.flags&8192&&A.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(fk=Ie()),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,ok(A,E)));break;case 22:M=A.memoizedState!==null;var Re=x!==null&&x.memoizedState!==null,it=bf,Ct=Ls;if(bf=it||M,Ls=Ct||Re,Ac(m,A),Ls=Ct,bf=it,fc(A),E&8192)e:for(m=A.stateNode,m._visibility=M?m._visibility&-2:m._visibility|1,M&&(x===null||Re||bf||Ls||Mm(A)),x=null,m=A;;){if(m.tag===5||m.tag===26){if(x===null){Re=x=m;try{if(z=Re.stateNode,M)le=z.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{be=Re.stateNode;var It=Re.memoizedProps.style,At=It!=null&&It.hasOwnProperty("display")?It.display:null;be.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ft){Sa(Re,Re.return,ft)}}}else if(m.tag===6){if(x===null){Re=m;try{Re.stateNode.nodeValue=M?"":Re.memoizedProps}catch(ft){Sa(Re,Re.return,ft)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===A)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break e;for(;m.sibling===null;){if(m.return===null||m.return===A)break e;x===m&&(x=null),m=m.return}x===m&&(x=null),m.sibling.return=m.return,m=m.sibling}E&4&&(E=A.updateQueue,E!==null&&(x=E.retryQueue,x!==null&&(E.retryQueue=null,ok(A,x))));break;case 19:Ac(m,A),fc(A),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,ok(A,E)));break;case 30:break;case 21:break;default:Ac(m,A),fc(A)}}function fc(A){var m=A.flags;if(m&2){try{for(var x,E=A.return;E!==null;){if(E8(E)){x=E;break}E=E.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var M=x.stateNode,z=ak(A);P2(A,z,M);break;case 5:var le=x.stateNode;x.flags&32&&(yo(le,""),x.flags&=-33);var be=ak(A);P2(A,be,le);break;case 3:case 4:var Re=x.stateNode.containerInfo,it=ak(A);sk(A,it,Re);break;default:throw Error(n(161))}}catch(Ct){Sa(A,A.return,Ct)}A.flags&=-3}m&4096&&(A.flags&=-4097)}function I8(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var m=A;I8(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),A=A.sibling}}function Uh(A,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)S8(A,m.alternate,m),m=m.sibling}function Mm(A){for(A=A.child;A!==null;){var m=A;switch(m.tag){case 0:case 11:case 14:case 15:Mh(4,m,m.return),Mm(m);break;case 1:aA(m,m.return);var x=m.stateNode;typeof x.componentWillUnmount=="function"&&y8(m,m.return,x),Mm(m);break;case 27:M1(m.stateNode);case 26:case 5:aA(m,m.return),Mm(m);break;case 22:m.memoizedState===null&&Mm(m);break;case 30:Mm(m);break;default:Mm(m)}A=A.sibling}}function Qh(A,m,x){for(x=x&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var E=m.alternate,M=A,z=m,le=z.flags;switch(z.tag){case 0:case 11:case 15:Qh(M,z,x),B1(4,z);break;case 1:if(Qh(M,z,x),E=z,M=E.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(it){Sa(E,E.return,it)}if(E=z,M=E.updateQueue,M!==null){var be=E.stateNode;try{var Re=M.shared.hiddenCallbacks;if(Re!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Re.length;M++)On(Re[M],be)}catch(it){Sa(E,E.return,it)}}x&&le&64&&b8(z),T1(z,z.return);break;case 27:C8(z);case 26:case 5:Qh(M,z,x),x&&E===null&&le&4&&w8(z),T1(z,z.return);break;case 12:Qh(M,z,x);break;case 13:Qh(M,z,x),x&&le&4&&B8(M,z);break;case 22:z.memoizedState===null&&Qh(M,z,x),T1(z,z.return);break;case 30:break;default:Qh(M,z,x)}m=m.sibling}}function lk(A,m){var x=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(x=A.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==x&&(A!=null&&A.refCount++,x!=null&&Sm(x))}function ck(A,m){A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Sm(A))}function sA(A,m,x,E){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)j8(A,m,x,E),m=m.sibling}function j8(A,m,x,E){var M=m.flags;switch(m.tag){case 0:case 11:case 15:sA(A,m,x,E),M&2048&&B1(9,m);break;case 1:sA(A,m,x,E);break;case 3:sA(A,m,x,E),M&2048&&(A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Sm(A)));break;case 12:if(M&2048){sA(A,m,x,E),A=m.stateNode;try{var z=m.memoizedProps,le=z.id,be=z.onPostCommit;typeof be=="function"&&be(le,m.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Re){Sa(m,m.return,Re)}}else sA(A,m,x,E);break;case 13:sA(A,m,x,E);break;case 23:break;case 22:z=m.stateNode,le=m.alternate,m.memoizedState!==null?z._visibility&2?sA(A,m,x,E):I1(A,m):z._visibility&2?sA(A,m,x,E):(z._visibility|=2,_g(A,m,x,E,(m.subtreeFlags&10256)!==0)),M&2048&&lk(le,m);break;case 24:sA(A,m,x,E),M&2048&&ck(m.alternate,m);break;default:sA(A,m,x,E)}}function _g(A,m,x,E,M){for(M=M&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var z=A,le=m,be=x,Re=E,it=le.flags;switch(le.tag){case 0:case 11:case 15:_g(z,le,be,Re,M),B1(8,le);break;case 23:break;case 22:var Ct=le.stateNode;le.memoizedState!==null?Ct._visibility&2?_g(z,le,be,Re,M):I1(z,le):(Ct._visibility|=2,_g(z,le,be,Re,M)),M&&it&2048&&lk(le.alternate,le);break;case 24:_g(z,le,be,Re,M),M&&it&2048&&ck(le.alternate,le);break;default:_g(z,le,be,Re,M)}m=m.sibling}}function I1(A,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var x=A,E=m,M=E.flags;switch(E.tag){case 22:I1(x,E),M&2048&&lk(E.alternate,E);break;case 24:I1(x,E),M&2048&&ck(E.alternate,E);break;default:I1(x,E)}m=m.sibling}}var j1=8192;function Sg(A){if(A.subtreeFlags&j1)for(A=A.child;A!==null;)F8(A),A=A.sibling}function F8(A){switch(A.tag){case 26:Sg(A),A.flags&j1&&A.memoizedState!==null&&Jue(sd,A.memoizedState,A.memoizedProps);break;case 5:Sg(A);break;case 3:case 4:var m=sd;sd=X2(A.stateNode.containerInfo),Sg(A),sd=m;break;case 22:A.memoizedState===null&&(m=A.alternate,m!==null&&m.memoizedState!==null?(m=j1,j1=16777216,Sg(A),j1=m):Sg(A));break;default:Sg(A)}}function O8(A){var m=A.alternate;if(m!==null&&(A=m.child,A!==null)){m.child=null;do m=A.sibling,A.sibling=null,A=m;while(A!==null)}}function F1(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var E=m[x];Mi=E,R8(E,A)}O8(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)D8(A),A=A.sibling}function D8(A){switch(A.tag){case 0:case 11:case 15:F1(A),A.flags&2048&&Mh(9,A,A.return);break;case 3:F1(A);break;case 12:F1(A);break;case 22:var m=A.stateNode;A.memoizedState!==null&&m._visibility&2&&(A.return===null||A.return.tag!==13)?(m._visibility&=-3,L2(A)):F1(A);break;default:F1(A)}}function L2(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var E=m[x];Mi=E,R8(E,A)}O8(A)}for(A=A.child;A!==null;){switch(m=A,m.tag){case 0:case 11:case 15:Mh(8,m,m.return),L2(m);break;case 22:x=m.stateNode,x._visibility&2&&(x._visibility&=-3,L2(m));break;default:L2(m)}A=A.sibling}}function R8(A,m){for(;Mi!==null;){var x=Mi;switch(x.tag){case 0:case 11:case 15:Mh(8,x,m);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var E=x.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Sm(x.memoizedState.cache)}if(E=x.child,E!==null)E.return=x,Mi=E;else e:for(x=A;Mi!==null;){E=Mi;var M=E.sibling,z=E.return;if(N8(E),E===x){Mi=null;break e}if(M!==null){M.return=z,Mi=M;break e}Mi=z}}}var hue={getCacheForType:function(A){var m=Ds(Rs),x=m.data.get(A);return x===void 0&&(x=A(),m.data.set(A,x)),x}},mue=typeof WeakMap=="function"?WeakMap:Map,da=0,ja=null,Cn=null,Rn=0,Aa=0,hc=null,Hh=!1,Ng=!1,uk=!1,wf=0,vs=0,Vh=0,Um=0,dk=0,ou=0,kg=0,O1=null,Rl=null,Ak=!1,fk=0,M2=1/0,U2=null,zh=null,so=0,$h=null,Bg=null,Tg=0,hk=0,mk=null,P8=null,D1=0,pk=null;function mc(){if((da&2)!==0&&Rn!==0)return Rn&-Rn;if(K.T!==null){var A=Af;return A!==0?A:Ek()}return pn()}function L8(){ou===0&&(ou=(Rn&536870912)===0||Mn?vt():536870912);var A=iu.current;return A!==null&&(A.flags|=32),ou}function pc(A,m,x){(A===ja&&(Aa===2||Aa===9)||A.cancelPendingCommit!==null)&&(Ig(A,0),Kh(A,Rn,ou,!1)),gt(A,x),((da&2)===0||A!==ja)&&(A===ja&&((da&2)===0&&(Um|=x),vs===4&&Kh(A,Rn,ou,!1)),iA(A))}function M8(A,m,x){if((da&6)!==0)throw Error(n(327));var E=!x&&(m&124)===0&&(m&A.expiredLanes)===0||In(A,m),M=E?vue(A,m):xk(A,m,!0),z=E;do{if(M===0){Ng&&!E&&Kh(A,m,0,!1);break}else{if(x=A.current.alternate,z&&!pue(x)){M=xk(A,m,!1),z=!1;continue}if(M===2){if(z=m,A.errorRecoveryDisabledLanes&z)var le=0;else le=A.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){m=le;e:{var be=A;M=O1;var Re=be.current.memoizedState.isDehydrated;if(Re&&(Ig(be,le).flags|=256),le=xk(be,le,!1),le!==2){if(uk&&!Re){be.errorRecoveryDisabledLanes|=z,Um|=z,M=4;break e}z=Rl,Rl=M,z!==null&&(Rl===null?Rl=z:Rl.push.apply(Rl,z))}M=le}if(z=!1,M!==2)continue}}if(M===1){Ig(A,0),Kh(A,m,0,!0);break}e:{switch(E=A,z=M,z){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:Kh(E,m,ou,!Hh);break e;case 2:Rl=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(M=fk+300-Ie(),10<M)){if(Kh(E,m,ou,!Hh),Vr(E,0,!0)!==0)break e;E.timeoutHandle=hM(U8.bind(null,E,x,Rl,U2,Ak,m,ou,Um,kg,Hh,z,2,-0,0),M);break e}U8(E,x,Rl,U2,Ak,m,ou,Um,kg,Hh,z,0,-0,0)}}break}while(!0);iA(A)}function U8(A,m,x,E,M,z,le,be,Re,it,Ct,It,At,ft){if(A.timeoutHandle=-1,It=m.subtreeFlags,(It&8192||(It&16785408)===16785408)&&(H1={stylesheets:null,count:0,unsuspend:Yue},F8(m),It=Zue(),It!==null)){A.cancelPendingCommit=It(G8.bind(null,A,m,z,x,E,M,le,be,Re,Ct,1,At,ft)),Kh(A,z,le,!it);return}G8(A,m,z,x,E,M,le,be,Re)}function pue(A){for(var m=A;;){var x=m.tag;if((x===0||x===11||x===15)&&m.flags&16384&&(x=m.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var E=0;E<x.length;E++){var M=x[E],z=M.getSnapshot;M=M.value;try{if(!ri(z(),M))return!1}catch{return!1}}if(x=m.child,m.subtreeFlags&16384&&x!==null)x.return=m,m=x;else{if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Kh(A,m,x,E){m&=~dk,m&=~Um,A.suspendedLanes|=m,A.pingedLanes&=~m,E&&(A.warmLanes|=m),E=A.expirationTimes;for(var M=m;0<M;){var z=31-Ot(M),le=1<<z;E[z]=-1,M&=~le}x!==0&&Dt(A,x,m)}function Q2(){return(da&6)===0?(R1(0),!1):!0}function gk(){if(Cn!==null){if(Aa===0)var A=Cn.return;else A=Cn,Zu=ai=null,gg(A),Eg=null,S1=0,A=Cn;for(;A!==null;)x8(A.alternate,A),A=A.return;Cn=null}}function Ig(A,m){var x=A.timeoutHandle;x!==-1&&(A.timeoutHandle=-1,Oue(x)),x=A.cancelPendingCommit,x!==null&&(A.cancelPendingCommit=null,x()),gk(),ja=A,Cn=x=eu(A.current,null),Rn=m,Aa=0,hc=null,Hh=!1,Ng=In(A,m),uk=!1,kg=ou=dk=Um=Vh=vs=0,Rl=O1=null,Ak=!1,(m&8)!==0&&(m|=m&32);var E=A.entangledLanes;if(E!==0)for(A=A.entanglements,E&=m;0<E;){var M=31-Ot(E),z=1<<M;m|=A[M],E&=~z}return wf=m,Il(),x}function Q8(A,m){Sr=null,K.H=k2,m===me||m===ve?(m=Ge(),Aa=3):m===pe?(m=Ge(),Aa=4):Aa=m===s8?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,hc=m,Cn===null&&(vs=1,F2(A,fn(m,A.current)))}function H8(){var A=K.H;return K.H=k2,A===null?k2:A}function V8(){var A=K.A;return K.A=hue,A}function vk(){vs=4,Hh||(Rn&4194048)!==Rn&&iu.current!==null||(Ng=!0),(Vh&134217727)===0&&(Um&134217727)===0||ja===null||Kh(ja,Rn,ou,!1)}function xk(A,m,x){var E=da;da|=2;var M=H8(),z=V8();(ja!==A||Rn!==m)&&(U2=null,Ig(A,m)),m=!1;var le=vs;e:do try{if(Aa!==0&&Cn!==null){var be=Cn,Re=hc;switch(Aa){case 8:gk(),le=6;break e;case 3:case 2:case 9:case 6:iu.current===null&&(m=!0);var it=Aa;if(Aa=0,hc=null,jg(A,be,Re,it),x&&Ng){le=0;break e}break;default:it=Aa,Aa=0,hc=null,jg(A,be,Re,it)}}gue(),le=vs;break}catch(Ct){Q8(A,Ct)}while(!0);return m&&A.shellSuspendCounter++,Zu=ai=null,da=E,K.H=M,K.A=z,Cn===null&&(ja=null,Rn=0,Il()),le}function gue(){for(;Cn!==null;)z8(Cn)}function vue(A,m){var x=da;da|=2;var E=H8(),M=V8();ja!==A||Rn!==m?(U2=null,M2=Ie()+500,Ig(A,m)):Ng=In(A,m);e:do try{if(Aa!==0&&Cn!==null){m=Cn;var z=hc;t:switch(Aa){case 1:Aa=0,hc=null,jg(A,m,z,1);break;case 2:case 9:if(ke(z)){Aa=0,hc=null,$8(m);break}m=function(){Aa!==2&&Aa!==9||ja!==A||(Aa=7),iA(A)},z.then(m,m);break e;case 3:Aa=7;break e;case 4:Aa=5;break e;case 7:ke(z)?(Aa=0,hc=null,$8(m)):(Aa=0,hc=null,jg(A,m,z,7));break;case 5:var le=null;switch(Cn.tag){case 26:le=Cn.memoizedState;case 5:case 27:var be=Cn;if(!le||SM(le)){Aa=0,hc=null;var Re=be.sibling;if(Re!==null)Cn=Re;else{var it=be.return;it!==null?(Cn=it,H2(it)):Cn=null}break t}}Aa=0,hc=null,jg(A,m,z,5);break;case 6:Aa=0,hc=null,jg(A,m,z,6);break;case 8:gk(),vs=6;break e;default:throw Error(n(462))}}xue();break}catch(Ct){Q8(A,Ct)}while(!0);return Zu=ai=null,K.H=E,K.A=M,da=x,Cn!==null?0:(ja=null,Rn=0,Il(),vs)}function xue(){for(;Cn!==null&&!_e();)z8(Cn)}function z8(A){var m=g8(A.alternate,A,wf);A.memoizedProps=A.pendingProps,m===null?H2(A):Cn=m}function $8(A){var m=A,x=m.alternate;switch(m.tag){case 15:case 0:m=d8(x,m,m.pendingProps,m.type,void 0,Rn);break;case 11:m=d8(x,m,m.pendingProps,m.type.render,m.ref,Rn);break;case 5:gg(m);default:x8(x,m),m=Cn=wm(m,wf),m=g8(x,m,wf)}A.memoizedProps=A.pendingProps,m===null?H2(A):Cn=m}function jg(A,m,x,E){Zu=ai=null,gg(m),Eg=null,S1=0;var M=m.return;try{if(lue(A,M,m,x,Rn)){vs=1,F2(A,fn(x,A.current)),Cn=null;return}}catch(z){if(M!==null)throw Cn=M,z;vs=1,F2(A,fn(x,A.current)),Cn=null;return}m.flags&32768?(Mn||E===1?A=!0:Ng||(Rn&536870912)!==0?A=!1:(Hh=A=!0,(E===2||E===9||E===3||E===6)&&(E=iu.current,E!==null&&E.tag===13&&(E.flags|=16384))),K8(m,A)):H2(m)}function H2(A){var m=A;do{if((m.flags&32768)!==0){K8(m,Hh);return}A=m.return;var x=uue(m.alternate,m,wf);if(x!==null){Cn=x;return}if(m=m.sibling,m!==null){Cn=m;return}Cn=m=A}while(m!==null);vs===0&&(vs=5)}function K8(A,m){do{var x=due(A.alternate,A);if(x!==null){x.flags&=32767,Cn=x;return}if(x=A.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!m&&(A=A.sibling,A!==null)){Cn=A;return}Cn=A=x}while(A!==null);vs=6,Cn=null}function G8(A,m,x,E,M,z,le,be,Re){A.cancelPendingCommit=null;do V2();while(so!==0);if((da&6)!==0)throw Error(n(327));if(m!==null){if(m===A.current)throw Error(n(177));if(z=m.lanes|m.childLanes,z|=es,dt(A,x,z,le,be,Re),A===ja&&(Cn=ja=null,Rn=0),Bg=m,$h=A,Tg=x,hk=z,mk=M,P8=E,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,Eue(Oe,function(){return J8(),null})):(A.callbackNode=null,A.callbackPriority=0),E=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||E){E=K.T,K.T=null,M=Z.p,Z.p=2,le=da,da|=4;try{Aue(A,m,x)}finally{da=le,Z.p=M,K.T=E}}so=1,q8(),W8(),X8()}}function q8(){if(so===1){so=0;var A=$h,m=Bg,x=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||x){x=K.T,K.T=null;var E=Z.p;Z.p=2;var M=da;da|=4;try{T8(m,A);var z=Ik,le=to(A.containerInfo),be=z.focusedElem,Re=z.selectionRange;if(le!==be&&be&&be.ownerDocument&&Qd(be.ownerDocument.documentElement,be)){if(Re!==null&&wi(be)){var it=Re.start,Ct=Re.end;if(Ct===void 0&&(Ct=it),"selectionStart"in be)be.selectionStart=it,be.selectionEnd=Math.min(Ct,be.value.length);else{var It=be.ownerDocument||document,At=It&&It.defaultView||window;if(At.getSelection){var ft=At.getSelection(),zr=be.textContent.length,Ir=Math.min(Re.start,zr),wa=Re.end===void 0?Ir:Math.min(Re.end,zr);!ft.extend&&Ir>wa&&(le=wa,wa=Ir,Ir=le);var We=$u(be,Ir),Qe=$u(be,wa);if(We&&Qe&&(ft.rangeCount!==1||ft.anchorNode!==We.node||ft.anchorOffset!==We.offset||ft.focusNode!==Qe.node||ft.focusOffset!==Qe.offset)){var rt=It.createRange();rt.setStart(We.node,We.offset),ft.removeAllRanges(),Ir>wa?(ft.addRange(rt),ft.extend(Qe.node,Qe.offset)):(rt.setEnd(Qe.node,Qe.offset),ft.addRange(rt))}}}}for(It=[],ft=be;ft=ft.parentNode;)ft.nodeType===1&&It.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<It.length;be++){var St=It[be];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}tE=!!Tk,Ik=Tk=null}finally{da=M,Z.p=E,K.T=x}}A.current=m,so=2}}function W8(){if(so===2){so=0;var A=$h,m=Bg,x=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||x){x=K.T,K.T=null;var E=Z.p;Z.p=2;var M=da;da|=4;try{S8(A,m.alternate,m)}finally{da=M,Z.p=E,K.T=x}}so=3}}function X8(){if(so===4||so===3){so=0,he();var A=$h,m=Bg,x=Tg,E=P8;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?so=5:(so=0,Bg=$h=null,Y8(A,A.pendingLanes));var M=A.pendingLanes;if(M===0&&(zh=null),Xr(x),m=m.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(mt,m,void 0,(m.current.flags&128)===128)}catch{}if(E!==null){m=K.T,M=Z.p,Z.p=2,K.T=null;try{for(var z=A.onRecoverableError,le=0;le<E.length;le++){var be=E[le];z(be.value,{componentStack:be.stack})}}finally{K.T=m,Z.p=M}}(Tg&3)!==0&&V2(),iA(A),M=A.pendingLanes,(x&4194090)!==0&&(M&42)!==0?A===pk?D1++:(D1=0,pk=A):D1=0,R1(0)}}function Y8(A,m){(A.pooledCacheLanes&=m)===0&&(m=A.pooledCache,m!=null&&(A.pooledCache=null,Sm(m)))}function V2(A){return q8(),W8(),X8(),J8()}function J8(){if(so!==5)return!1;var A=$h,m=hk;hk=0;var x=Xr(Tg),E=K.T,M=Z.p;try{Z.p=32>x?32:x,K.T=null,x=mk,mk=null;var z=$h,le=Tg;if(so=0,Bg=$h=null,Tg=0,(da&6)!==0)throw Error(n(331));var be=da;if(da|=4,D8(z.current),j8(z,z.current,le,x),da=be,R1(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(mt,z)}catch{}return!0}finally{Z.p=M,K.T=E,Y8(A,m)}}function Z8(A,m,x){m=fn(x,m),m=q4(A.stateNode,m,2),A=kt(A,m,2),A!==null&&(gt(A,2),iA(A))}function Sa(A,m,x){if(A.tag===3)Z8(A,A,x);else for(;m!==null;){if(m.tag===3){Z8(m,A,x);break}else if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(zh===null||!zh.has(E))){A=fn(x,A),x=n8(2),E=kt(m,x,2),E!==null&&(a8(x,E,m,A),gt(E,2),iA(E));break}}m=m.return}}function bk(A,m,x){var E=A.pingCache;if(E===null){E=A.pingCache=new mue;var M=new Set;E.set(m,M)}else M=E.get(m),M===void 0&&(M=new Set,E.set(m,M));M.has(x)||(uk=!0,M.add(x),A=bue.bind(null,A,m,x),m.then(A,A))}function bue(A,m,x){var E=A.pingCache;E!==null&&E.delete(m),A.pingedLanes|=A.suspendedLanes&x,A.warmLanes&=~x,ja===A&&(Rn&x)===x&&(vs===4||vs===3&&(Rn&62914560)===Rn&&300>Ie()-fk?(da&2)===0&&Ig(A,0):dk|=x,kg===Rn&&(kg=0)),iA(A)}function eM(A,m){m===0&&(m=pt()),A=Gu(A,m),A!==null&&(gt(A,m),iA(A))}function yue(A){var m=A.memoizedState,x=0;m!==null&&(x=m.retryLane),eM(A,x)}function wue(A,m){var x=0;switch(A.tag){case 13:var E=A.stateNode,M=A.memoizedState;M!==null&&(x=M.retryLane);break;case 19:E=A.stateNode;break;case 22:E=A.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(m),eM(A,x)}function Eue(A,m){return Se(A,m)}var z2=null,Fg=null,yk=!1,$2=!1,wk=!1,Qm=0;function iA(A){A!==Fg&&A.next===null&&(Fg===null?z2=Fg=A:Fg=Fg.next=A),$2=!0,yk||(yk=!0,_ue())}function R1(A,m){if(!wk&&$2){wk=!0;do for(var x=!1,E=z2;E!==null;){if(A!==0){var M=E.pendingLanes;if(M===0)var z=0;else{var le=E.suspendedLanes,be=E.pingedLanes;z=(1<<31-Ot(42|A)+1)-1,z&=M&~(le&~be),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(x=!0,aM(E,z))}else z=Rn,z=Vr(E,E===ja?z:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(z&3)===0||In(E,z)||(x=!0,aM(E,z));E=E.next}while(x);wk=!1}}function Cue(){tM()}function tM(){$2=yk=!1;var A=0;Qm!==0&&(Fue()&&(A=Qm),Qm=0);for(var m=Ie(),x=null,E=z2;E!==null;){var M=E.next,z=rM(E,m);z===0?(E.next=null,x===null?z2=M:x.next=M,M===null&&(Fg=x)):(x=E,(A!==0||(z&3)!==0)&&($2=!0)),E=M}R1(A)}function rM(A,m){for(var x=A.suspendedLanes,E=A.pingedLanes,M=A.expirationTimes,z=A.pendingLanes&-62914561;0<z;){var le=31-Ot(z),be=1<<le,Re=M[le];Re===-1?((be&x)===0||(be&E)!==0)&&(M[le]=jr(be,m)):Re<=m&&(A.expiredLanes|=be),z&=~be}if(m=ja,x=Rn,x=Vr(A,A===m?x:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E=A.callbackNode,x===0||A===m&&(Aa===2||Aa===9)||A.cancelPendingCommit!==null)return E!==null&&E!==null&&De(E),A.callbackNode=null,A.callbackPriority=0;if((x&3)===0||In(A,x)){if(m=x&-x,m===A.callbackPriority)return m;switch(E!==null&&De(E),Xr(x)){case 2:case 8:x=ye;break;case 32:x=Oe;break;case 268435456:x=qe;break;default:x=Oe}return E=nM.bind(null,A),x=Se(x,E),A.callbackPriority=m,A.callbackNode=x,m}return E!==null&&E!==null&&De(E),A.callbackPriority=2,A.callbackNode=null,2}function nM(A,m){if(so!==0&&so!==5)return A.callbackNode=null,A.callbackPriority=0,null;var x=A.callbackNode;if(V2()&&A.callbackNode!==x)return null;var E=Rn;return E=Vr(A,A===ja?E:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E===0?null:(M8(A,E,m),rM(A,Ie()),A.callbackNode!=null&&A.callbackNode===x?nM.bind(null,A):null)}function aM(A,m){if(V2())return null;M8(A,m,!0)}function _ue(){Due(function(){(da&6)!==0?Se(Xe,Cue):tM()})}function Ek(){return Qm===0&&(Qm=vt()),Qm}function sM(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:rc(""+A)}function iM(A,m){var x=m.ownerDocument.createElement("input");return x.name=m.name,x.value=m.value,A.id&&x.setAttribute("form",A.id),m.parentNode.insertBefore(x,m),A=new FormData(A),x.parentNode.removeChild(x),A}function Sue(A,m,x,E,M){if(m==="submit"&&x&&x.stateNode===M){var z=sM((M[en]||null).action),le=E.submitter;le&&(m=(m=le[en]||null)?sM(m.formAction):le.getAttribute("formAction"),m!==null&&(z=m,le=null));var be=new $c("action","action",null,E,M);A.push({event:be,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Qm!==0){var Re=le?iM(M,le):new FormData(M);su(x,{pending:!0,data:Re,method:M.method,action:z},null,Re)}}else typeof z=="function"&&(be.preventDefault(),Re=le?iM(M,le):new FormData(M),su(x,{pending:!0,data:Re,method:M.method,action:z},z,Re))},currentTarget:M}]})}}for(var Ck=0;Ck<sf.length;Ck++){var _k=sf[Ck],Nue=_k.toLowerCase(),kue=_k[0].toUpperCase()+_k.slice(1);$a(Nue,"on"+kue)}$a(Sh,"onAnimationEnd"),$a(Vd,"onAnimationIteration"),$a(zd,"onAnimationStart"),$a("dblclick","onDoubleClick"),$a("focusin","onFocus"),$a("focusout","onBlur"),$a($d,"onTransitionRun"),$a(af,"onTransitionStart"),$a(Nh,"onTransitionCancel"),$a(Kd,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),Tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var P1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bue=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(P1));function oM(A,m){m=(m&4)!==0;for(var x=0;x<A.length;x++){var E=A[x],M=E.event;E=E.listeners;e:{var z=void 0;if(m)for(var le=E.length-1;0<=le;le--){var be=E[le],Re=be.instance,it=be.currentTarget;if(be=be.listener,Re!==z&&M.isPropagationStopped())break e;z=be,M.currentTarget=it;try{z(M)}catch(Ct){j2(Ct)}M.currentTarget=null,z=Re}else for(le=0;le<E.length;le++){if(be=E[le],Re=be.instance,it=be.currentTarget,be=be.listener,Re!==z&&M.isPropagationStopped())break e;z=be,M.currentTarget=it;try{z(M)}catch(Ct){j2(Ct)}M.currentTarget=null,z=Re}}}}function _n(A,m){var x=m[Yr];x===void 0&&(x=m[Yr]=new Set);var E=A+"__bubble";x.has(E)||(lM(m,A,2,!1),x.add(E))}function Sk(A,m,x){var E=0;m&&(E|=4),lM(x,A,E,m)}var K2="_reactListening"+Math.random().toString(36).slice(2);function Nk(A){if(!A[K2]){A[K2]=!0,tt.forEach(function(x){x!=="selectionchange"&&(Bue.has(x)||Sk(x,!1,A),Sk(x,!0,A))});var m=A.nodeType===9?A:A.ownerDocument;m===null||m[K2]||(m[K2]=!0,Sk("selectionchange",!1,m))}}function lM(A,m,x,E){switch(jM(m)){case 2:var M=rde;break;case 8:M=nde;break;default:M=Qk}x=M.bind(null,m,x,A),M=void 0,!eo||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),E?M!==void 0?A.addEventListener(m,x,{capture:!0,passive:M}):A.addEventListener(m,x,!0):M!==void 0?A.addEventListener(m,x,{passive:M}):A.addEventListener(m,x,!1)}function kk(A,m,x,E,M){var z=E;if((m&1)===0&&(m&2)===0&&E!==null)e:for(;;){if(E===null)return;var le=E.tag;if(le===3||le===4){var be=E.stateNode.containerInfo;if(be===M)break;if(le===4)for(le=E.return;le!==null;){var Re=le.tag;if((Re===3||Re===4)&&le.stateNode.containerInfo===M)return;le=le.return}for(;be!==null;){if(le=Ne(be),le===null)return;if(Re=le.tag,Re===5||Re===6||Re===26||Re===27){E=z=le;continue e}be=be.parentNode}}E=E.return}yh(function(){var it=z,Ct=ca(x),It=[];e:{var At=Ku.get(A);if(At!==void 0){var ft=$c,zr=A;switch(A){case"keypress":if(Co(x)===0)break e;case"keydown":case"keyup":ft=ic;break;case"focusin":zr="focus",ft=Gc;break;case"focusout":zr="blur",ft=Gc;break;case"beforeblur":case"afterblur":ft=Gc;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Kc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Pd;break;case Sh:case Vd:case zd:ft=Od;break;case Kd:ft=de;break;case"scroll":case"scrollend":ft=JA;break;case"wheel":ft=Le;break;case"copy":case"cut":case"paste":ft=Dd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=zu;break;case"toggle":case"beforetoggle":ft=xt}var Ir=(m&4)!==0,wa=!Ir&&(A==="scroll"||A==="scrollend"),We=Ir?At!==null?At+"Capture":null:At;Ir=[];for(var Qe=it,rt;Qe!==null;){var St=Qe;if(rt=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||rt===null||We===null||(St=Fi(Qe,We),St!=null&&Ir.push(L1(Qe,St,rt))),wa)break;Qe=Qe.return}0<Ir.length&&(At=new ft(At,zr,null,x,Ct),It.push({event:At,listeners:Ir}))}}if((m&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",ft=A==="mouseout"||A==="pointerout",At&&x!==El&&(zr=x.relatedTarget||x.fromElement)&&(Ne(zr)||zr[cr]))break e;if((ft||At)&&(At=Ct.window===Ct?Ct:(At=Ct.ownerDocument)?At.defaultView||At.parentWindow:window,ft?(zr=x.relatedTarget||x.toElement,ft=it,zr=zr?Ne(zr):null,zr!==null&&(wa=s(zr),Ir=zr.tag,zr!==wa||Ir!==5&&Ir!==27&&Ir!==6)&&(zr=null)):(ft=null,zr=it),ft!==zr)){if(Ir=hs,St="onMouseLeave",We="onMouseEnter",Qe="mouse",(A==="pointerout"||A==="pointerover")&&(Ir=zu,St="onPointerLeave",We="onPointerEnter",Qe="pointer"),wa=ft==null?At:Ye(ft),rt=zr==null?At:Ye(zr),At=new Ir(St,Qe+"leave",ft,x,Ct),At.target=wa,At.relatedTarget=rt,St=null,Ne(Ct)===it&&(Ir=new Ir(We,Qe+"enter",zr,x,Ct),Ir.target=rt,Ir.relatedTarget=wa,St=Ir),wa=St,ft&&zr)t:{for(Ir=ft,We=zr,Qe=0,rt=Ir;rt;rt=Og(rt))Qe++;for(rt=0,St=We;St;St=Og(St))rt++;for(;0<Qe-rt;)Ir=Og(Ir),Qe--;for(;0<rt-Qe;)We=Og(We),rt--;for(;Qe--;){if(Ir===We||We!==null&&Ir===We.alternate)break t;Ir=Og(Ir),We=Og(We)}Ir=null}else Ir=null;ft!==null&&cM(It,At,ft,Ir,!1),zr!==null&&wa!==null&&cM(It,wa,zr,Ir,!0)}}e:{if(At=it?Ye(it):window,ft=At.nodeName&&At.nodeName.toLowerCase(),ft==="select"||ft==="input"&&At.type==="file")var Ar=Ch;else if(ra(At))if(ef)Ar=cg;else{Ar=u1;var bn=So}else ft=At.nodeName,!ft||ft.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?it&&XA(it.elementType)&&(Ar=Ch):Ar=bm;if(Ar&&(Ar=Ar(A,it))){Bl(It,Ar,x,Ct);break e}bn&&bn(A,At,it),A==="focusout"&&it&&At.type==="number"&&it.memoizedProps.value!=null&&Hc(At,"number",At.value)}switch(bn=it?Ye(it):window,A){case"focusin":(ra(bn)||bn.contentEditable==="true")&&(No=bn,oc=it,Jc=null);break;case"focusout":Jc=oc=No=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,za(It,x,Ct);break;case"selectionchange":if(Hd)break;case"keydown":case"keyup":za(It,x,Ct)}var gr;if(Jt)e:{switch(A){case"compositionstart":var Fr="onCompositionStart";break e;case"compositionend":Fr="onCompositionEnd";break e;case"compositionupdate":Fr="onCompositionUpdate";break e}Fr=void 0}else Tr?st(A,x)&&(Fr="onCompositionEnd"):A==="keydown"&&x.keyCode===229&&(Fr="onCompositionStart");Fr&&(se&&x.locale!=="ko"&&(Tr||Fr!=="onCompositionStart"?Fr==="onCompositionEnd"&&Tr&&(gr=YA()):(Eo=Ct,zc="value"in Eo?Eo.value:Eo.textContent,Tr=!0)),bn=G2(it,Fr),0<bn.length&&(Fr=new Qu(Fr,A,null,x,Ct),It.push({event:Fr,listeners:bn}),gr?Fr.data=gr:(gr=Mt(x),gr!==null&&(Fr.data=gr)))),(gr=ee?xn(A,x):Gr(A,x))&&(Fr=G2(it,"onBeforeInput"),0<Fr.length&&(bn=new Qu("onBeforeInput","beforeinput",null,x,Ct),It.push({event:bn,listeners:Fr}),bn.data=gr)),Sue(It,A,it,x,Ct)}oM(It,m)})}function L1(A,m,x){return{instance:A,listener:m,currentTarget:x}}function G2(A,m){for(var x=m+"Capture",E=[];A!==null;){var M=A,z=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||z===null||(M=Fi(A,x),M!=null&&E.unshift(L1(A,M,z)),M=Fi(A,m),M!=null&&E.push(L1(A,M,z))),A.tag===3)return E;A=A.return}return[]}function Og(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function cM(A,m,x,E,M){for(var z=m._reactName,le=[];x!==null&&x!==E;){var be=x,Re=be.alternate,it=be.stateNode;if(be=be.tag,Re!==null&&Re===E)break;be!==5&&be!==26&&be!==27||it===null||(Re=it,M?(it=Fi(x,z),it!=null&&le.unshift(L1(x,it,Re))):M||(it=Fi(x,z),it!=null&&le.push(L1(x,it,Re)))),x=x.return}le.length!==0&&A.push({event:m,listeners:le})}var Tue=/\r\n?/g,Iue=/\u0000|\uFFFD/g;function uM(A){return(typeof A=="string"?A:""+A).replace(Tue,`
`).replace(Iue,"")}function dM(A,m){return m=uM(m),uM(A)===m}function q2(){}function ya(A,m,x,E,M,z){switch(x){case"children":typeof E=="string"?m==="body"||m==="textarea"&&E===""||yo(A,E):(typeof E=="number"||typeof E=="bigint")&&m!=="body"&&yo(A,""+E);break;case"className":sn(A,"class",E);break;case"tabIndex":sn(A,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":sn(A,x,E);break;case"style":WA(A,E,z);break;case"data":if(m!=="object"){sn(A,"data",E);break}case"src":case"href":if(E===""&&(m!=="a"||x!=="href")){A.removeAttribute(x);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(x);break}E=rc(""+E),A.setAttribute(x,E);break;case"action":case"formAction":if(typeof E=="function"){A.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(x==="formAction"?(m!=="input"&&ya(A,m,"name",M.name,M,null),ya(A,m,"formEncType",M.formEncType,M,null),ya(A,m,"formMethod",M.formMethod,M,null),ya(A,m,"formTarget",M.formTarget,M,null)):(ya(A,m,"encType",M.encType,M,null),ya(A,m,"method",M.method,M,null),ya(A,m,"target",M.target,M,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(x);break}E=rc(""+E),A.setAttribute(x,E);break;case"onClick":E!=null&&(A.onclick=q2);break;case"onScroll":E!=null&&_n("scroll",A);break;case"onScrollEnd":E!=null&&_n("scrollend",A);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=x}}break;case"multiple":A.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":A.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){A.removeAttribute("xlink:href");break}x=rc(""+E),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,""+E):A.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,""):A.removeAttribute(x);break;case"capture":case"download":E===!0?A.setAttribute(x,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,E):A.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?A.setAttribute(x,E):A.removeAttribute(x);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?A.removeAttribute(x):A.setAttribute(x,E);break;case"popover":_n("beforetoggle",A),_n("toggle",A),an(A,"popover",E);break;case"xlinkActuate":dn(A,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":dn(A,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":dn(A,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":dn(A,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":dn(A,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":dn(A,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":dn(A,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":dn(A,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":dn(A,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":an(A,"is",E);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=tc.get(x)||x,an(A,x,E))}}function Bk(A,m,x,E,M,z){switch(x){case"style":WA(A,E,z);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(M.children!=null)throw Error(n(60));A.innerHTML=x}}break;case"children":typeof E=="string"?yo(A,E):(typeof E=="number"||typeof E=="bigint")&&yo(A,""+E);break;case"onScroll":E!=null&&_n("scroll",A);break;case"onScrollEnd":E!=null&&_n("scrollend",A);break;case"onClick":E!=null&&(A.onclick=q2);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!at.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(M=x.endsWith("Capture"),m=x.slice(2,M?x.length-7:void 0),z=A[en]||null,z=z!=null?z[x]:null,typeof z=="function"&&A.removeEventListener(m,z,M),typeof E=="function")){typeof z!="function"&&z!==null&&(x in A?A[x]=null:A.hasAttribute(x)&&A.removeAttribute(x)),A.addEventListener(m,E,M);break e}x in A?A[x]=E:E===!0?A.setAttribute(x,""):an(A,x,E)}}}function io(A,m,x){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",A),_n("load",A);var E=!1,M=!1,z;for(z in x)if(x.hasOwnProperty(z)){var le=x[z];if(le!=null)switch(z){case"src":E=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ya(A,m,z,le,x,null)}}M&&ya(A,m,"srcSet",x.srcSet,x,null),E&&ya(A,m,"src",x.src,x,null);return;case"input":_n("invalid",A);var be=z=le=M=null,Re=null,it=null;for(E in x)if(x.hasOwnProperty(E)){var Ct=x[E];if(Ct!=null)switch(E){case"name":M=Ct;break;case"type":le=Ct;break;case"checked":Re=Ct;break;case"defaultChecked":it=Ct;break;case"value":z=Ct;break;case"defaultValue":be=Ct;break;case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(n(137,m));break;default:ya(A,m,E,Ct,x,null)}}Qc(A,z,be,Re,it,le,M,!1),Uc(A);return;case"select":_n("invalid",A),E=le=z=null;for(M in x)if(x.hasOwnProperty(M)&&(be=x[M],be!=null))switch(M){case"value":z=be;break;case"defaultValue":le=be;break;case"multiple":E=be;default:ya(A,m,M,be,x,null)}m=z,x=le,A.multiple=!!E,m!=null?wl(A,!!E,m,!1):x!=null&&wl(A,!!E,x,!0);return;case"textarea":_n("invalid",A),z=M=E=null;for(le in x)if(x.hasOwnProperty(le)&&(be=x[le],be!=null))switch(le){case"value":E=be;break;case"defaultValue":M=be;break;case"children":z=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:ya(A,m,le,be,x,null)}Vc(A,E,M,z),Uc(A);return;case"option":for(Re in x)if(x.hasOwnProperty(Re)&&(E=x[Re],E!=null))switch(Re){case"selected":A.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:ya(A,m,Re,E,x,null)}return;case"dialog":_n("beforetoggle",A),_n("toggle",A),_n("cancel",A),_n("close",A);break;case"iframe":case"object":_n("load",A);break;case"video":case"audio":for(E=0;E<P1.length;E++)_n(P1[E],A);break;case"image":_n("error",A),_n("load",A);break;case"details":_n("toggle",A);break;case"embed":case"source":case"link":_n("error",A),_n("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(it in x)if(x.hasOwnProperty(it)&&(E=x[it],E!=null))switch(it){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ya(A,m,it,E,x,null)}return;default:if(XA(m)){for(Ct in x)x.hasOwnProperty(Ct)&&(E=x[Ct],E!==void 0&&Bk(A,m,Ct,E,x,void 0));return}}for(be in x)x.hasOwnProperty(be)&&(E=x[be],E!=null&&ya(A,m,be,E,x,null))}function jue(A,m,x,E){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,z=null,le=null,be=null,Re=null,it=null,Ct=null;for(ft in x){var It=x[ft];if(x.hasOwnProperty(ft)&&It!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":Re=It;default:E.hasOwnProperty(ft)||ya(A,m,ft,null,E,It)}}for(var At in E){var ft=E[At];if(It=x[At],E.hasOwnProperty(At)&&(ft!=null||It!=null))switch(At){case"type":z=ft;break;case"name":M=ft;break;case"checked":it=ft;break;case"defaultChecked":Ct=ft;break;case"value":le=ft;break;case"defaultValue":be=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,m));break;default:ft!==It&&ya(A,m,At,ft,E,It)}}bi(A,le,be,Re,it,Ct,z,M);return;case"select":ft=le=be=At=null;for(z in x)if(Re=x[z],x.hasOwnProperty(z)&&Re!=null)switch(z){case"value":break;case"multiple":ft=Re;default:E.hasOwnProperty(z)||ya(A,m,z,null,E,Re)}for(M in E)if(z=E[M],Re=x[M],E.hasOwnProperty(M)&&(z!=null||Re!=null))switch(M){case"value":At=z;break;case"defaultValue":be=z;break;case"multiple":le=z;default:z!==Re&&ya(A,m,M,z,E,Re)}m=be,x=le,E=ft,At!=null?wl(A,!!x,At,!1):!!E!=!!x&&(m!=null?wl(A,!!x,m,!0):wl(A,!!x,x?[]:"",!1));return;case"textarea":ft=At=null;for(be in x)if(M=x[be],x.hasOwnProperty(be)&&M!=null&&!E.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:ya(A,m,be,null,E,M)}for(le in E)if(M=E[le],z=x[le],E.hasOwnProperty(le)&&(M!=null||z!=null))switch(le){case"value":At=M;break;case"defaultValue":ft=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==z&&ya(A,m,le,M,E,z)}Hn(A,At,ft);return;case"option":for(var zr in x)if(At=x[zr],x.hasOwnProperty(zr)&&At!=null&&!E.hasOwnProperty(zr))switch(zr){case"selected":A.selected=!1;break;default:ya(A,m,zr,null,E,At)}for(Re in E)if(At=E[Re],ft=x[Re],E.hasOwnProperty(Re)&&At!==ft&&(At!=null||ft!=null))switch(Re){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ya(A,m,Re,At,E,ft)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ir in x)At=x[Ir],x.hasOwnProperty(Ir)&&At!=null&&!E.hasOwnProperty(Ir)&&ya(A,m,Ir,null,E,At);for(it in E)if(At=E[it],ft=x[it],E.hasOwnProperty(it)&&At!==ft&&(At!=null||ft!=null))switch(it){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,m));break;default:ya(A,m,it,At,E,ft)}return;default:if(XA(m)){for(var wa in x)At=x[wa],x.hasOwnProperty(wa)&&At!==void 0&&!E.hasOwnProperty(wa)&&Bk(A,m,wa,void 0,E,At);for(Ct in E)At=E[Ct],ft=x[Ct],!E.hasOwnProperty(Ct)||At===ft||At===void 0&&ft===void 0||Bk(A,m,Ct,At,E,ft);return}}for(var We in x)At=x[We],x.hasOwnProperty(We)&&At!=null&&!E.hasOwnProperty(We)&&ya(A,m,We,null,E,At);for(It in E)At=E[It],ft=x[It],!E.hasOwnProperty(It)||At===ft||At==null&&ft==null||ya(A,m,It,At,E,ft)}var Tk=null,Ik=null;function W2(A){return A.nodeType===9?A:A.ownerDocument}function AM(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fM(A,m){if(A===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&m==="foreignObject"?0:A}function jk(A,m){return A==="textarea"||A==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Fk=null;function Fue(){var A=window.event;return A&&A.type==="popstate"?A===Fk?!1:(Fk=A,!0):(Fk=null,!1)}var hM=typeof setTimeout=="function"?setTimeout:void 0,Oue=typeof clearTimeout=="function"?clearTimeout:void 0,mM=typeof Promise=="function"?Promise:void 0,Due=typeof queueMicrotask=="function"?queueMicrotask:typeof mM<"u"?function(A){return mM.resolve(null).then(A).catch(Rue)}:hM;function Rue(A){setTimeout(function(){throw A})}function Gh(A){return A==="head"}function pM(A,m){var x=m,E=0,M=0;do{var z=x.nextSibling;if(A.removeChild(x),z&&z.nodeType===8)if(x=z.data,x==="/$"){if(0<E&&8>E){x=E;var le=A.ownerDocument;if(x&1&&M1(le.documentElement),x&2&&M1(le.body),x&4)for(x=le.head,M1(x),le=x.firstChild;le;){var be=le.nextSibling,Re=le.nodeName;le[Ee]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&le.rel.toLowerCase()==="stylesheet"||x.removeChild(le),le=be}}if(M===0){A.removeChild(z),G1(m);return}M--}else x==="$"||x==="$?"||x==="$!"?M++:E=x.charCodeAt(0)-48;else E=0;x=z}while(x);G1(m)}function Ok(A){var m=A.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var x=m;switch(m=m.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":Ok(x),Ce(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}A.removeChild(x)}}function Pue(A,m,x,E){for(;A.nodeType===1;){var M=x;if(A.nodeName.toLowerCase()!==m.toLowerCase()){if(!E&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(E){if(!A[Ee])switch(m){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(z=A.getAttribute("rel"),z==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(z!==M.rel||A.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||A.getAttribute("title")!==(M.title==null?null:M.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(z=A.getAttribute("src"),(z!==(M.src==null?null:M.src)||A.getAttribute("type")!==(M.type==null?null:M.type)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&z&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(m==="input"&&A.type==="hidden"){var z=M.name==null?null:""+M.name;if(M.type==="hidden"&&A.getAttribute("name")===z)return A}else return A;if(A=id(A.nextSibling),A===null)break}return null}function Lue(A,m,x){if(m==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!x||(A=id(A.nextSibling),A===null))return null;return A}function Dk(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function Mue(A,m){var x=A.ownerDocument;if(A.data!=="$?"||x.readyState==="complete")m();else{var E=function(){m(),x.removeEventListener("DOMContentLoaded",E)};x.addEventListener("DOMContentLoaded",E),A._reactRetry=E}}function id(A){for(;A!=null;A=A.nextSibling){var m=A.nodeType;if(m===1||m===3)break;if(m===8){if(m=A.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return A}var Rk=null;function gM(A){A=A.previousSibling;for(var m=0;A;){if(A.nodeType===8){var x=A.data;if(x==="$"||x==="$!"||x==="$?"){if(m===0)return A;m--}else x==="/$"&&m++}A=A.previousSibling}return null}function vM(A,m,x){switch(m=W2(x),A){case"html":if(A=m.documentElement,!A)throw Error(n(452));return A;case"head":if(A=m.head,!A)throw Error(n(453));return A;case"body":if(A=m.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function M1(A){for(var m=A.attributes;m.length;)A.removeAttributeNode(m[0]);Ce(A)}var lu=new Map,xM=new Set;function X2(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Ef=Z.d;Z.d={f:Uue,r:Que,D:Hue,C:Vue,L:zue,m:$ue,X:Gue,S:Kue,M:que};function Uue(){var A=Ef.f(),m=Q2();return A||m}function Que(A){var m=Te(A);m!==null&&m.tag===5&&m.type==="form"?Rm(m):Ef.r(A)}var Dg=typeof document>"u"?null:document;function bM(A,m,x){var E=Dg;if(E&&typeof m=="string"&&m){var M=jn(m);M='link[rel="'+A+'"][href="'+M+'"]',typeof x=="string"&&(M+='[crossorigin="'+x+'"]'),xM.has(M)||(xM.add(M),A={rel:A,crossOrigin:x,href:m},E.querySelector(M)===null&&(m=E.createElement("link"),io(m,"link",A),$e(m),E.head.appendChild(m)))}}function Hue(A){Ef.D(A),bM("dns-prefetch",A,null)}function Vue(A,m){Ef.C(A,m),bM("preconnect",A,m)}function zue(A,m,x){Ef.L(A,m,x);var E=Dg;if(E&&A&&m){var M='link[rel="preload"][as="'+jn(m)+'"]';m==="image"&&x&&x.imageSrcSet?(M+='[imagesrcset="'+jn(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(M+='[imagesizes="'+jn(x.imageSizes)+'"]')):M+='[href="'+jn(A)+'"]';var z=M;switch(m){case"style":z=Rg(A);break;case"script":z=Pg(A)}lu.has(z)||(A=d({rel:"preload",href:m==="image"&&x&&x.imageSrcSet?void 0:A,as:m},x),lu.set(z,A),E.querySelector(M)!==null||m==="style"&&E.querySelector(U1(z))||m==="script"&&E.querySelector(Q1(z))||(m=E.createElement("link"),io(m,"link",A),$e(m),E.head.appendChild(m)))}}function $ue(A,m){Ef.m(A,m);var x=Dg;if(x&&A){var E=m&&typeof m.as=="string"?m.as:"script",M='link[rel="modulepreload"][as="'+jn(E)+'"][href="'+jn(A)+'"]',z=M;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=Pg(A)}if(!lu.has(z)&&(A=d({rel:"modulepreload",href:A},m),lu.set(z,A),x.querySelector(M)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(Q1(z)))return}E=x.createElement("link"),io(E,"link",A),$e(E),x.head.appendChild(E)}}}function Kue(A,m,x){Ef.S(A,m,x);var E=Dg;if(E&&A){var M=ut(E).hoistableStyles,z=Rg(A);m=m||"default";var le=M.get(z);if(!le){var be={loading:0,preload:null};if(le=E.querySelector(U1(z)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":m},x),(x=lu.get(z))&&Pk(A,x);var Re=le=E.createElement("link");$e(Re),io(Re,"link",A),Re._p=new Promise(function(it,Ct){Re.onload=it,Re.onerror=Ct}),Re.addEventListener("load",function(){be.loading|=1}),Re.addEventListener("error",function(){be.loading|=2}),be.loading|=4,Y2(le,m,E)}le={type:"stylesheet",instance:le,count:1,state:be},M.set(z,le)}}}function Gue(A,m){Ef.X(A,m);var x=Dg;if(x&&A){var E=ut(x).hoistableScripts,M=Pg(A),z=E.get(M);z||(z=x.querySelector(Q1(M)),z||(A=d({src:A,async:!0},m),(m=lu.get(M))&&Lk(A,m),z=x.createElement("script"),$e(z),io(z,"link",A),x.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},E.set(M,z))}}function que(A,m){Ef.M(A,m);var x=Dg;if(x&&A){var E=ut(x).hoistableScripts,M=Pg(A),z=E.get(M);z||(z=x.querySelector(Q1(M)),z||(A=d({src:A,async:!0,type:"module"},m),(m=lu.get(M))&&Lk(A,m),z=x.createElement("script"),$e(z),io(z,"link",A),x.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},E.set(M,z))}}function yM(A,m,x,E){var M=(M=ie.current)?X2(M):null;if(!M)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(m=Rg(x.href),x=ut(M).hoistableStyles,E=x.get(m),E||(E={type:"style",instance:null,count:0,state:null},x.set(m,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){A=Rg(x.href);var z=ut(M).hoistableStyles,le=z.get(A);if(le||(M=M.ownerDocument||M,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(A,le),(z=M.querySelector(U1(A)))&&!z._p&&(le.instance=z,le.state.loading=5),lu.has(A)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},lu.set(A,x),z||Wue(M,A,x,le.state))),m&&E===null)throw Error(n(528,""));return le}if(m&&E!==null)throw Error(n(529,""));return null;case"script":return m=x.async,x=x.src,typeof x=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Pg(x),x=ut(M).hoistableScripts,E=x.get(m),E||(E={type:"script",instance:null,count:0,state:null},x.set(m,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function Rg(A){return'href="'+jn(A)+'"'}function U1(A){return'link[rel="stylesheet"]['+A+"]"}function wM(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function Wue(A,m,x,E){A.querySelector('link[rel="preload"][as="style"]['+m+"]")?E.loading=1:(m=A.createElement("link"),E.preload=m,m.addEventListener("load",function(){return E.loading|=1}),m.addEventListener("error",function(){return E.loading|=2}),io(m,"link",x),$e(m),A.head.appendChild(m))}function Pg(A){return'[src="'+jn(A)+'"]'}function Q1(A){return"script[async]"+A}function EM(A,m,x){if(m.count++,m.instance===null)switch(m.type){case"style":var E=A.querySelector('style[data-href~="'+jn(x.href)+'"]');if(E)return m.instance=E,$e(E),E;var M=d({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return E=(A.ownerDocument||A).createElement("style"),$e(E),io(E,"style",M),Y2(E,x.precedence,A),m.instance=E;case"stylesheet":M=Rg(x.href);var z=A.querySelector(U1(M));if(z)return m.state.loading|=4,m.instance=z,$e(z),z;E=wM(x),(M=lu.get(M))&&Pk(E,M),z=(A.ownerDocument||A).createElement("link"),$e(z);var le=z;return le._p=new Promise(function(be,Re){le.onload=be,le.onerror=Re}),io(z,"link",E),m.state.loading|=4,Y2(z,x.precedence,A),m.instance=z;case"script":return z=Pg(x.src),(M=A.querySelector(Q1(z)))?(m.instance=M,$e(M),M):(E=x,(M=lu.get(z))&&(E=d({},x),Lk(E,M)),A=A.ownerDocument||A,M=A.createElement("script"),$e(M),io(M,"link",E),A.head.appendChild(M),m.instance=M);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(E=m.instance,m.state.loading|=4,Y2(E,x.precedence,A));return m.instance}function Y2(A,m,x){for(var E=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=E.length?E[E.length-1]:null,z=M,le=0;le<E.length;le++){var be=E[le];if(be.dataset.precedence===m)z=be;else if(z!==M)break}z?z.parentNode.insertBefore(A,z.nextSibling):(m=x.nodeType===9?x.head:x,m.insertBefore(A,m.firstChild))}function Pk(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.title==null&&(A.title=m.title)}function Lk(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.integrity==null&&(A.integrity=m.integrity)}var J2=null;function CM(A,m,x){if(J2===null){var E=new Map,M=J2=new Map;M.set(x,E)}else M=J2,E=M.get(x),E||(E=new Map,M.set(x,E));if(E.has(A))return E;for(E.set(A,null),x=x.getElementsByTagName(A),M=0;M<x.length;M++){var z=x[M];if(!(z[Ee]||z[tn]||A==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var le=z.getAttribute(m)||"";le=A+le;var be=E.get(le);be?be.push(z):E.set(le,[z])}}return E}function _M(A,m,x){A=A.ownerDocument||A,A.head.insertBefore(x,m==="title"?A.querySelector("head > title"):null)}function Xue(A,m,x){if(x===1||m.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return A=m.disabled,typeof m.precedence=="string"&&A==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function SM(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var H1=null;function Yue(){}function Jue(A,m,x){if(H1===null)throw Error(n(475));var E=H1;if(m.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var M=Rg(x.href),z=A.querySelector(U1(M));if(z){A=z._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(E.count++,E=Z2.bind(E),A.then(E,E)),m.state.loading|=4,m.instance=z,$e(z);return}z=A.ownerDocument||A,x=wM(x),(M=lu.get(M))&&Pk(x,M),z=z.createElement("link"),$e(z);var le=z;le._p=new Promise(function(be,Re){le.onload=be,le.onerror=Re}),io(z,"link",x),m.instance=z}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(m,A),(A=m.state.preload)&&(m.state.loading&3)===0&&(E.count++,m=Z2.bind(E),A.addEventListener("load",m),A.addEventListener("error",m))}}function Zue(){if(H1===null)throw Error(n(475));var A=H1;return A.stylesheets&&A.count===0&&Mk(A,A.stylesheets),0<A.count?function(m){var x=setTimeout(function(){if(A.stylesheets&&Mk(A,A.stylesheets),A.unsuspend){var E=A.unsuspend;A.unsuspend=null,E()}},6e4);return A.unsuspend=m,function(){A.unsuspend=null,clearTimeout(x)}}:null}function Z2(){if(this.count--,this.count===0){if(this.stylesheets)Mk(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var eE=null;function Mk(A,m){A.stylesheets=null,A.unsuspend!==null&&(A.count++,eE=new Map,m.forEach(ede,A),eE=null,Z2.call(A))}function ede(A,m){if(!(m.state.loading&4)){var x=eE.get(A);if(x)var E=x.get(null);else{x=new Map,eE.set(A,x);for(var M=A.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<M.length;z++){var le=M[z];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(x.set(le.dataset.precedence,le),E=le)}E&&x.set(null,E)}M=m.instance,le=M.getAttribute("data-precedence"),z=x.get(le)||E,z===E&&x.set(null,M),x.set(le,M),this.count++,E=Z2.bind(this),M.addEventListener("load",E),M.addEventListener("error",E),z?z.parentNode.insertBefore(M,z.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(M,A.firstChild)),m.state.loading|=4}}var V1={$$typeof:S,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function tde(A,m,x,E,M,z,le,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Je(0),this.hiddenUpdates=Je(null),this.identifierPrefix=E,this.onUncaughtError=M,this.onCaughtError=z,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function NM(A,m,x,E,M,z,le,be,Re,it,Ct,It){return A=new tde(A,m,x,le,be,Re,it,It),m=1,z===!0&&(m|=24),z=Pi(3,null,null,m),A.current=z,z.stateNode=A,m=A1(),m.refCount++,A.pooledCache=m,m.refCount++,z.memoizedState={element:E,isDehydrated:x,cache:m},Ue(z),A}function kM(A){return A?(A=ni,A):ni}function BM(A,m,x,E,M,z){M=kM(M),E.context===null?E.context=M:E.pendingContext=M,E=Et(m),E.payload={element:x},z=z===void 0?null:z,z!==null&&(E.callback=z),x=kt(A,E,m),x!==null&&(pc(x,A,m),_t(x,A,m))}function TM(A,m){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var x=A.retryLane;A.retryLane=x!==0&&x<m?x:m}}function Uk(A,m){TM(A,m),(A=A.alternate)&&TM(A,m)}function IM(A){if(A.tag===13){var m=Gu(A,67108864);m!==null&&pc(m,A,67108864),Uk(A,67108864)}}var tE=!0;function rde(A,m,x,E){var M=K.T;K.T=null;var z=Z.p;try{Z.p=2,Qk(A,m,x,E)}finally{Z.p=z,K.T=M}}function nde(A,m,x,E){var M=K.T;K.T=null;var z=Z.p;try{Z.p=8,Qk(A,m,x,E)}finally{Z.p=z,K.T=M}}function Qk(A,m,x,E){if(tE){var M=Hk(E);if(M===null)kk(A,m,E,rE,x),FM(A,E);else if(sde(M,A,m,x,E))E.stopPropagation();else if(FM(A,E),m&4&&-1<ade.indexOf(A)){for(;M!==null;){var z=Te(M);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var le=Cr(z.pendingLanes);if(le!==0){var be=z;for(be.pendingLanes|=2,be.entangledLanes|=2;le;){var Re=1<<31-Ot(le);be.entanglements[1]|=Re,le&=~Re}iA(z),(da&6)===0&&(M2=Ie()+500,R1(0))}}break;case 13:be=Gu(z,2),be!==null&&pc(be,z,2),Q2(),Uk(z,2)}if(z=Hk(E),z===null&&kk(A,m,E,rE,x),z===M)break;M=z}M!==null&&E.stopPropagation()}else kk(A,m,E,null,x)}}function Hk(A){return A=ca(A),Vk(A)}var rE=null;function Vk(A){if(rE=null,A=Ne(A),A!==null){var m=s(A);if(m===null)A=null;else{var x=m.tag;if(x===13){if(A=i(m),A!==null)return A;A=null}else if(x===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;A=null}else m!==A&&(A=null)}}return rE=A,null}function jM(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case Xe:return 2;case ye:return 8;case Oe:case Pe:return 32;case qe:return 268435456;default:return 32}default:return 32}}var zk=!1,qh=null,Wh=null,Xh=null,z1=new Map,$1=new Map,Yh=[],ade="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FM(A,m){switch(A){case"focusin":case"focusout":qh=null;break;case"dragenter":case"dragleave":Wh=null;break;case"mouseover":case"mouseout":Xh=null;break;case"pointerover":case"pointerout":z1.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":$1.delete(m.pointerId)}}function K1(A,m,x,E,M,z){return A===null||A.nativeEvent!==z?(A={blockedOn:m,domEventName:x,eventSystemFlags:E,nativeEvent:z,targetContainers:[M]},m!==null&&(m=Te(m),m!==null&&IM(m)),A):(A.eventSystemFlags|=E,m=A.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),A)}function sde(A,m,x,E,M){switch(m){case"focusin":return qh=K1(qh,A,m,x,E,M),!0;case"dragenter":return Wh=K1(Wh,A,m,x,E,M),!0;case"mouseover":return Xh=K1(Xh,A,m,x,E,M),!0;case"pointerover":var z=M.pointerId;return z1.set(z,K1(z1.get(z)||null,A,m,x,E,M)),!0;case"gotpointercapture":return z=M.pointerId,$1.set(z,K1($1.get(z)||null,A,m,x,E,M)),!0}return!1}function OM(A){var m=Ne(A.target);if(m!==null){var x=s(m);if(x!==null){if(m=x.tag,m===13){if(m=i(x),m!==null){A.blockedOn=m,gn(A.priority,function(){if(x.tag===13){var E=mc();E=Pr(E);var M=Gu(x,E);M!==null&&pc(M,x,E),Uk(x,E)}});return}}else if(m===3&&x.stateNode.current.memoizedState.isDehydrated){A.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}A.blockedOn=null}function nE(A){if(A.blockedOn!==null)return!1;for(var m=A.targetContainers;0<m.length;){var x=Hk(A.nativeEvent);if(x===null){x=A.nativeEvent;var E=new x.constructor(x.type,x);El=E,x.target.dispatchEvent(E),El=null}else return m=Te(x),m!==null&&IM(m),A.blockedOn=x,!1;m.shift()}return!0}function DM(A,m,x){nE(A)&&x.delete(m)}function ide(){zk=!1,qh!==null&&nE(qh)&&(qh=null),Wh!==null&&nE(Wh)&&(Wh=null),Xh!==null&&nE(Xh)&&(Xh=null),z1.forEach(DM),$1.forEach(DM)}function aE(A,m){A.blockedOn===m&&(A.blockedOn=null,zk||(zk=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ide)))}var sE=null;function RM(A){sE!==A&&(sE=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){sE===A&&(sE=null);for(var m=0;m<A.length;m+=3){var x=A[m],E=A[m+1],M=A[m+2];if(typeof E!="function"){if(Vk(E||x)===null)continue;break}var z=Te(x);z!==null&&(A.splice(m,3),m-=3,su(z,{pending:!0,data:M,method:x.method,action:E},E,M))}}))}function G1(A){function m(Re){return aE(Re,A)}qh!==null&&aE(qh,A),Wh!==null&&aE(Wh,A),Xh!==null&&aE(Xh,A),z1.forEach(m),$1.forEach(m);for(var x=0;x<Yh.length;x++){var E=Yh[x];E.blockedOn===A&&(E.blockedOn=null)}for(;0<Yh.length&&(x=Yh[0],x.blockedOn===null);)OM(x),x.blockedOn===null&&Yh.shift();if(x=(A.ownerDocument||A).$$reactFormReplay,x!=null)for(E=0;E<x.length;E+=3){var M=x[E],z=x[E+1],le=M[en]||null;if(typeof z=="function")le||RM(x);else if(le){var be=null;if(z&&z.hasAttribute("formAction")){if(M=z,le=z[en]||null)be=le.formAction;else if(Vk(M)!==null)continue}else be=le.action;typeof be=="function"?x[E+1]=be:(x.splice(E,3),E-=3),RM(x)}}}function $k(A){this._internalRoot=A}iE.prototype.render=$k.prototype.render=function(A){var m=this._internalRoot;if(m===null)throw Error(n(409));var x=m.current,E=mc();BM(x,E,A,m,null,null)},iE.prototype.unmount=$k.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var m=A.containerInfo;BM(A.current,2,null,A,null,null),Q2(),m[cr]=null}};function iE(A){this._internalRoot=A}iE.prototype.unstable_scheduleHydration=function(A){if(A){var m=pn();A={blockedOn:null,target:A,priority:m};for(var x=0;x<Yh.length&&m!==0&&m<Yh[x].priority;x++);Yh.splice(x,0,A),x===0&&OM(A)}};var PM=t.version;if(PM!=="19.1.1")throw Error(n(527,PM,"19.1.1"));Z.findDOMNode=function(A){var m=A._reactInternals;if(m===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(m),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var ode={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oE.isDisabled&&oE.supportsFiber)try{mt=oE.inject(ode),Bt=oE}catch{}}return W1.createRoot=function(A,m){if(!a(A))throw Error(n(299));var x=!1,E="",M=ZL,z=e8,le=t8,be=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(M=m.onUncaughtError),m.onCaughtError!==void 0&&(z=m.onCaughtError),m.onRecoverableError!==void 0&&(le=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(be=m.unstable_transitionCallbacks)),m=NM(A,1,!1,null,null,x,E,M,z,le,be,null),A[cr]=m.current,Nk(A),new $k(m)},W1.hydrateRoot=function(A,m,x){if(!a(A))throw Error(n(299));var E=!1,M="",z=ZL,le=e8,be=t8,Re=null,it=null;return x!=null&&(x.unstable_strictMode===!0&&(E=!0),x.identifierPrefix!==void 0&&(M=x.identifierPrefix),x.onUncaughtError!==void 0&&(z=x.onUncaughtError),x.onCaughtError!==void 0&&(le=x.onCaughtError),x.onRecoverableError!==void 0&&(be=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Re=x.unstable_transitionCallbacks),x.formState!==void 0&&(it=x.formState)),m=NM(A,1,!0,m,x??null,E,M,z,le,be,Re,it),m.context=kM(null),x=m.current,E=mc(),E=Pr(E),M=Et(E),M.callback=null,kt(x,M,E),x=E,m.current.lanes=x,gt(m,x),iA(m),A[cr]=m.current,Nk(A),new iE(m)},W1.version="19.1.1",W1}var GM;function yde(){if(GM)return Wk.exports;GM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wk.exports=bde(),Wk.exports}var wde=yde();const Ede=bl(wde),Cde=()=>{};var qM={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bW=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},_de=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},yW={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,l=a+2<e.length,u=l?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;l||(p=64,i||(h=64)),n.push(r[d],r[f],r[h],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bW(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):_de(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new Sde;const h=s<<2|o>>4;if(n.push(h),u!==64){const p=o<<4&240|u>>2;if(n.push(p),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Sde extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nde=function(e){const t=bW(e);return yW.encodeByteArray(t,!0)},S_=function(e){return Nde(e).replace(/\./g,"")},wW=function(e){try{return yW.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kde(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bde=()=>kde().__FIREBASE_DEFAULTS__,Tde=()=>{if(typeof process>"u"||typeof qM>"u")return;const e=qM.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Ide=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&wW(e[1]);return t&&JSON.parse(t)},T5=()=>{try{return Cde()||Bde()||Tde()||Ide()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},EW=e=>{var t,r;return(r=(t=T5())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},U6=e=>{const t=EW(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},CW=()=>{var e;return(e=T5())==null?void 0:e.config},_W=e=>{var t;return(t=T5())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jde{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function I5(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[S_(JSON.stringify(r)),S_(JSON.stringify(i)),""].join(".")}const $b={};function Fde(){const e={prod:[],emulator:[]};for(const t of Object.keys($b))$b[t]?e.emulator.push(t):e.prod.push(t);return e}function Ode(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let WM=!1;function j5(e,t){if(typeof window>"u"||typeof document>"u"||!ch(window.location.host)||$b[e]===t||$b[e]||WM)return;$b[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=Fde().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{WM=!0,i()},h}function d(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=Ode(n),p=r("text"),g=document.getElementById(p)||document.createElement("span"),v=r("learnmore"),b=document.getElementById(v)||document.createElement("a"),y=r("preprendIcon"),_=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const S=h.element;o(S),d(b,v);const k=u();l(_,y),S.append(_,g,b,k),document.body.appendChild(S)}s?(g.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dde(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jo())}function Rde(){var t;const e=(t=T5())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Pde(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lde(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Mde(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ude(){const e=Jo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Qde(){return!Rde()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hde(){try{return typeof indexedDB=="object"}catch{return!1}}function Vde(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zde="FirebaseError";class _d extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=zde,Object.setPrototypeOf(this,_d.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hw.prototype.create)}}class hw{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?$de(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new _d(a,o,n)}}function $de(e,t){return e.replace(Kde,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const Kde=/\{\$([^}]+)}/g;function Gde(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function H0(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(XM(s)&&XM(i)){if(!H0(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function XM(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function wb(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function Eb(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function qde(e,t){const r=new Wde(e,t);return r.subscribe.bind(r)}class Wde{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Xde(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=Zk),a.error===void 0&&(a.error=Zk),a.complete===void 0&&(a.complete=Zk);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xde(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function Zk(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(e){return e&&e._delegate?e._delegate:e}class Kf{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yde=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new jde;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Zde(t))try{this.getOrInitializeService({instanceIdentifier:zm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=zm){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zm){return this.instances.has(t)}getOptions(t=zm){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Jde(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=zm){return this.component?this.component.multipleInstances?t:zm:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Jde(e){return e===zm?void 0:e}function Zde(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eAe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Yde(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Nn||(Nn={}));const tAe={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},rAe=Nn.INFO,nAe={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},aAe=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=nAe[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let Q6=class{constructor(t){this.name=t,this._logLevel=rAe,this._logHandler=aAe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?tAe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...t),this._logHandler(this,Nn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...t),this._logHandler(this,Nn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...t),this._logHandler(this,Nn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...t),this._logHandler(this,Nn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...t),this._logHandler(this,Nn.ERROR,...t)}};const sAe=(e,t)=>t.some(r=>e instanceof r);let YM,JM;function iAe(){return YM||(YM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oAe(){return JM||(JM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NW=new WeakMap,MI=new WeakMap,kW=new WeakMap,eB=new WeakMap,H6=new WeakMap;function lAe(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(B0(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&NW.set(r,e)}).catch(()=>{}),H6.set(t,e),t}function cAe(e){if(MI.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});MI.set(e,t)}let UI={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return MI.get(e);if(t==="objectStoreNames")return e.objectStoreNames||kW.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return B0(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function uAe(e){UI=e(UI)}function dAe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(tB(this),t,...r);return kW.set(n,t.sort?t.sort():[t]),B0(n)}:oAe().includes(e)?function(...t){return e.apply(tB(this),t),B0(NW.get(this))}:function(...t){return B0(e.apply(tB(this),t))}}function AAe(e){return typeof e=="function"?dAe(e):(e instanceof IDBTransaction&&cAe(e),sAe(e,iAe())?new Proxy(e,UI):e)}function B0(e){if(e instanceof IDBRequest)return lAe(e);if(eB.has(e))return eB.get(e);const t=AAe(e);return t!==e&&(eB.set(e,t),H6.set(t,e)),t}const tB=e=>H6.get(e);function fAe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=B0(i);return n&&i.addEventListener("upgradeneeded",l=>{n(B0(i.result),l.oldVersion,l.newVersion,B0(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),a&&l.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const hAe=["get","getKey","getAll","getAllKeys","count"],mAe=["put","add","delete","clear"],rB=new Map;function ZM(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(rB.get(t))return rB.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=mAe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||hAe.includes(r)))return;const s=async function(i,...o){const l=this.transaction(i,a?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&l.done]))[0]};return rB.set(t,s),s}uAe(e=>({...e,get:(t,r,n)=>ZM(t,r)||e.get(t,r,n),has:(t,r)=>!!ZM(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pAe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(gAe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function gAe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const QI="@firebase/app",eU="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new Q6("@firebase/app"),vAe="@firebase/app-compat",xAe="@firebase/analytics-compat",bAe="@firebase/analytics",yAe="@firebase/app-check-compat",wAe="@firebase/app-check",EAe="@firebase/auth",CAe="@firebase/auth-compat",_Ae="@firebase/database",SAe="@firebase/data-connect",NAe="@firebase/database-compat",kAe="@firebase/functions",BAe="@firebase/functions-compat",TAe="@firebase/installations",IAe="@firebase/installations-compat",jAe="@firebase/messaging",FAe="@firebase/messaging-compat",OAe="@firebase/performance",DAe="@firebase/performance-compat",RAe="@firebase/remote-config",PAe="@firebase/remote-config-compat",LAe="@firebase/storage",MAe="@firebase/storage-compat",UAe="@firebase/firestore",QAe="@firebase/ai",HAe="@firebase/firestore-compat",VAe="firebase",zAe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="[DEFAULT]",$Ae={[QI]:"fire-core",[vAe]:"fire-core-compat",[bAe]:"fire-analytics",[xAe]:"fire-analytics-compat",[wAe]:"fire-app-check",[yAe]:"fire-app-check-compat",[EAe]:"fire-auth",[CAe]:"fire-auth-compat",[_Ae]:"fire-rtdb",[SAe]:"fire-data-connect",[NAe]:"fire-rtdb-compat",[kAe]:"fire-fn",[BAe]:"fire-fn-compat",[TAe]:"fire-iid",[IAe]:"fire-iid-compat",[jAe]:"fire-fcm",[FAe]:"fire-fcm-compat",[OAe]:"fire-perf",[DAe]:"fire-perf-compat",[RAe]:"fire-rc",[PAe]:"fire-rc-compat",[LAe]:"fire-gcs",[MAe]:"fire-gcs-compat",[UAe]:"fire-fst",[HAe]:"fire-fst-compat",[QAe]:"fire-vertex","fire-js":"fire-js",[VAe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new Map,KAe=new Map,VI=new Map;function tU(e,t){try{e.container.addComponent(t)}catch(r){Gf.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function V0(e){const t=e.name;if(VI.has(t))return Gf.debug(`There were multiple attempts to register component ${t}.`),!1;VI.set(t,e);for(const r of vy.values())tU(r,e);for(const r of KAe.values())tU(r,e);return!0}function pw(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Cc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GAe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},T0=new hw("app","Firebase",GAe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qAe{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Kf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw T0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=zAe;function V6(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:HI,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw T0.create("bad-app-name",{appName:String(a)});if(r||(r=CW()),!r)throw T0.create("no-options");const s=vy.get(a);if(s){if(H0(r,s.options)&&H0(n,s.config))return s;throw T0.create("duplicate-app",{appName:a})}const i=new eAe(a);for(const l of VI.values())i.addComponent(l);const o=new qAe(r,n,i);return vy.set(a,o),o}function F5(e=HI){const t=vy.get(e);if(!t&&e===HI&&CW())return V6();if(!t)throw T0.create("no-app",{appName:e});return t}function rU(){return Array.from(vy.values())}function Tu(e,t,r){let n=$Ae[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gf.warn(i.join(" "));return}V0(new Kf(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WAe="firebase-heartbeat-database",XAe=1,xy="firebase-heartbeat-store";let nB=null;function BW(){return nB||(nB=fAe(WAe,XAe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(xy)}catch(r){console.warn(r)}}}}).catch(e=>{throw T0.create("idb-open",{originalErrorMessage:e.message})})),nB}async function YAe(e){try{const r=(await BW()).transaction(xy),n=await r.objectStore(xy).get(TW(e));return await r.done,n}catch(t){if(t instanceof _d)Gf.warn(t.message);else{const r=T0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Gf.warn(r.message)}}}async function nU(e,t){try{const n=(await BW()).transaction(xy,"readwrite");await n.objectStore(xy).put(t,TW(e)),await n.done}catch(r){if(r instanceof _d)Gf.warn(r.message);else{const n=T0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Gf.warn(n.message)}}}function TW(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JAe=1024,ZAe=30;class efe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new rfe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=aU();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>ZAe){const i=nfe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Gf.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=aU(),{heartbeatsToSend:n,unsentEntries:a}=tfe(this._heartbeatsCache.heartbeats),s=S_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Gf.warn(r),""}}}function aU(){return new Date().toISOString().substring(0,10)}function tfe(e,t=JAe){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),sU(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),sU(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class rfe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hde()?Vde().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await YAe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return nU(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return nU(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function sU(e){return S_(JSON.stringify({version:2,heartbeats:e})).length}function nfe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function afe(e){V0(new Kf("platform-logger",t=>new pAe(t),"PRIVATE")),V0(new Kf("heartbeat",t=>new efe(t),"PRIVATE")),Tu(QI,eU,e),Tu(QI,eU,"esm2020"),Tu("fire-js","")}afe("");function IW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sfe=IW,jW=new hw("auth","Firebase",IW());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=new Q6("@firebase/auth");function ife(e,...t){N_.logLevel<=Nn.WARN&&N_.warn(`Auth (${Gp}): ${e}`,...t)}function PC(e,...t){N_.logLevel<=Nn.ERROR&&N_.error(`Auth (${Gp}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(e,...t){throw z6(e,...t)}function NA(e,...t){return z6(e,...t)}function FW(e,t,r){const n={...sfe(),[t]:r};return new hw("auth","Firebase",n).create(t,{appName:e.name})}function I0(e){return FW(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z6(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return jW.create(e,...t)}function Qr(e,t,...r){if(!e)throw z6(t,...r)}function If(e){const t="INTERNAL ASSERTION FAILED: "+e;throw PC(t),new Error(t)}function qf(e,t){e||If(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function ofe(){return iU()==="http:"||iU()==="https:"}function iU(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lfe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ofe()||Lde()||"connection"in navigator)?navigator.onLine:!0}function cfe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t,r){this.shortDelay=t,this.longDelay=r,qf(r>t,"Short delay should be less than long delay!"),this.isMobile=Dde()||Mde()}get(){return lfe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(e,t){qf(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;If("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;If("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;If("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ufe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Afe=new gw(3e4,6e4);function im(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function uh(e,t,r,n,a={}){return DW(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=mw({key:e.config.apiKey,...i}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:l,...s};return Pde()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&ch(e.emulatorConfig.host)&&(u.credentials="include"),OW.fetch()(await RW(e,e.config.apiHost,r,o),u)})}async function DW(e,t,r){e._canInitEmulator=!1;const n={...ufe,...t};try{const a=new hfe(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw lE(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lE(e,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw lE(e,"email-already-in-use",i);if(l==="USER_DISABLED")throw lE(e,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw FW(e,d,u);Ed(e,d)}}catch(a){if(a instanceof _d)throw a;Ed(e,"network-request-failed",{message:String(a)})}}async function O5(e,t,r,n,a={}){const s=await uh(e,t,r,n,a);return"mfaPendingCredential"in s&&Ed(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function RW(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?$6(e.config,a):`${e.config.apiScheme}://${a}`;return dfe.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function ffe(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hfe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(NA(this.auth,"network-request-failed")),Afe.get())})}}function lE(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=NA(e,t,n);return a.customData._tokenResponse=r,a}function oU(e){return e!==void 0&&e.enterprise!==void 0}class mfe{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return ffe(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pfe(e,t){return uh(e,"GET","/v2/recaptchaConfig",im(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gfe(e,t){return uh(e,"POST","/v1/accounts:delete",t)}async function k_(e,t){return uh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function vfe(e,t=!1){const r=va(e),n=await r.getIdToken(t),a=K6(n);Qr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Kb(aB(a.auth_time)),issuedAtTime:Kb(aB(a.iat)),expirationTime:Kb(aB(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function aB(e){return Number(e)*1e3}function K6(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return PC("JWT malformed, contained fewer than 3 sections"),null;try{const a=wW(r);return a?JSON.parse(a):(PC("Failed to decode base64 JWT payload"),null)}catch(a){return PC("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function lU(e){const t=K6(e);return Qr(t,"internal-error"),Qr(typeof t.exp<"u","internal-error"),Qr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function by(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof _d&&xfe(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function xfe({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bfe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kb(this.lastLoginAt),this.creationTime=Kb(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B_(e){var f;const t=e.auth,r=await e.getIdToken(),n=await by(e,k_(t,{idToken:r}));Qr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?PW(a.providerUserInfo):[],i=wfe(e.providerData,s),o=e.isAnonymous,l=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new $I(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function yfe(e){const t=va(e);await B_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function wfe(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function PW(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Efe(e,t){const r=await DW(e,{},async()=>{const n=mw({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await RW(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&ch(e.emulatorConfig.host)&&(l.credentials="include"),OW.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Cfe(e,t){return uh(e,"POST","/v2/accounts:revokeToken",im(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Qr(t.idToken,"internal-error"),Qr(typeof t.idToken<"u","internal-error"),Qr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):lU(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Qr(t.length!==0,"internal-error");const r=lU(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Qr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await Efe(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new jv;return n&&(Qr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Qr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Qr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new jv,this.toJSON())}_performRefresh(){return If("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(e,t){Qr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class pd{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new bfe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new $I(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await by(this,this.stsTokenManager.getToken(this.auth,t));return Qr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return vfe(this,t)}reload(){return yfe(this)}_assign(t){this!==t&&(Qr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new pd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await B_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cc(this.auth.app))return Promise.reject(I0(this.auth));const t=await this.getIdToken();return await by(this,gfe(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:p,providerData:g,stsTokenManager:v}=r;Qr(f&&v,t,"internal-error");const b=jv.fromJSON(this.name,v);Qr(typeof f=="string",t,"internal-error"),Zh(n,t.name),Zh(a,t.name),Qr(typeof h=="boolean",t,"internal-error"),Qr(typeof p=="boolean",t,"internal-error"),Zh(s,t.name),Zh(i,t.name),Zh(o,t.name),Zh(l,t.name),Zh(u,t.name),Zh(d,t.name);const y=new pd({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(_=>({..._}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new jv;a.updateFromServerResponse(r);const s=new pd({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await B_(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Qr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?PW(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new jv;o.updateFromIdToken(n);const l=new pd({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new $I(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=new Map;function jf(e){qf(e instanceof Function,"Expected a class definition");let t=cU.get(e);return t?(qf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cU.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}LW.type="NONE";const uU=LW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(e,t,r){return`firebase:${e}:${t}:${r}`}class Fv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=LC(this.userKey,a.apiKey,s),this.fullPersistenceKey=LC("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await k_(this.auth,{idToken:t}).catch(()=>{});return r?pd._fromGetAccountInfoResponse(this.auth,r,t):null}return pd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Fv(jf(uU),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||jf(uU);const i=LC(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await k_(t,{idToken:d}).catch(()=>{});if(!h)break;f=await pd._fromGetAccountInfoResponse(t,h,d)}else f=pd._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const l=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Fv(s,t,n):(s=l[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Fv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(HW(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(MW(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zW(t))return"Blackberry";if($W(t))return"Webos";if(UW(t))return"Safari";if((t.includes("chrome/")||QW(t))&&!t.includes("edge/"))return"Chrome";if(VW(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function MW(e=Jo()){return/firefox\//i.test(e)}function UW(e=Jo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function QW(e=Jo()){return/crios\//i.test(e)}function HW(e=Jo()){return/iemobile/i.test(e)}function VW(e=Jo()){return/android/i.test(e)}function zW(e=Jo()){return/blackberry/i.test(e)}function $W(e=Jo()){return/webos/i.test(e)}function G6(e=Jo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _fe(e=Jo()){var t;return G6(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Sfe(){return Ude()&&document.documentMode===10}function KW(e=Jo()){return G6(e)||VW(e)||$W(e)||zW(e)||/windows phone/i.test(e)||HW(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GW(e,t=[]){let r;switch(e){case"Browser":r=dU(Jo());break;case"Worker":r=`${dU(Jo())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Gp}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nfe{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const l=t(s);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kfe(e,t={}){return uh(e,"GET","/v2/passwordPolicy",im(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bfe=6;class Tfe{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Bfe,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ife{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AU(this),this.idTokenSubscription=new AU(this),this.beforeStateQueue=new Nfe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=jf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await Fv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await k_(this,{idToken:t}),n=await pd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Cc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(t);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await B_(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=cfe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Cc(this.app))return Promise.reject(I0(this));const r=t?va(t):null;return r&&Qr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Qr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Cc(this.app)?Promise.reject(I0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Cc(this.app)?Promise.reject(I0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jf(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await kfe(this),r=new Tfe(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new hw("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Cfe(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&jf(t)||this._popupRedirectResolver;Qr(r,this,"argument-error"),this.redirectPersistenceManager=await Fv.create(this,[jf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const l=t.addObserver(r,n,a);return()=>{i=!0,l()}}else{const l=t.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=GW(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Cc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&ife(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function qp(e){return va(e)}class AU{constructor(t){this.auth=t,this.observer=null,this.addObserver=qde(r=>this.observer=r)}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D5={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jfe(e){D5=e}function qW(e){return D5.loadJS(e)}function Ffe(){return D5.recaptchaEnterpriseScript}function Ofe(){return D5.gapiScript}function Dfe(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Rfe{constructor(){this.enterprise=new Pfe}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class Pfe{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const Lfe="recaptcha-enterprise",WW="NO_RECAPTCHA";class Mfe{constructor(t){this.type=Lfe,this.auth=qp(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{pfe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new mfe(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function a(s,i,o){const l=window.grecaptcha;oU(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(WW)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Rfe().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&oU(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Ffe();l.length!==0&&(l+=o),qW(l).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function fU(e,t,r,n=!1,a=!1){const s=new Mfe(e);let i;if(a)i=WW;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function KI(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await fU(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await fU(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ufe(e,t){const r=pw(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(H0(s,t??{}))return a;Ed(a,"already-initialized")}return r.initialize({options:t})}function Qfe(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(jf);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Hfe(e,t,r){const n=qp(e);Qr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=XW(t),{host:i,port:o}=Vfe(t),l=o===null?"":`:${o}`,u={url:`${s}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Qr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Qr(H0(u,n.config.emulator)&&H0(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,ch(i)?(I5(`${s}//${i}${l}`),j5("Auth",!0)):zfe()}function XW(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Vfe(e){const t=XW(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:hU(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:hU(i)}}}function hU(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function zfe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return If("not implemented")}_getIdTokenResponse(t){return If("not implemented")}_linkToIdToken(t,r){return If("not implemented")}_getReauthenticationResolver(t){return If("not implemented")}}async function $fe(e,t){return uh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kfe(e,t){return O5(e,"POST","/v1/accounts:signInWithPassword",im(e,t))}async function Gfe(e,t){return uh(e,"POST","/v1/accounts:sendOobCode",im(e,t))}async function qfe(e,t){return Gfe(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wfe(e,t){return O5(e,"POST","/v1/accounts:signInWithEmailLink",im(e,t))}async function Xfe(e,t){return O5(e,"POST","/v1/accounts:signInWithEmailLink",im(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends q6{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new yy(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new yy(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return KI(t,r,"signInWithPassword",Kfe);case"emailLink":return Wfe(t,{email:this._email,oobCode:this._password});default:Ed(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return KI(t,n,"signUpPassword",$fe);case"emailLink":return Xfe(t,{idToken:r,email:this._email,oobCode:this._password});default:Ed(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ov(e,t){return O5(e,"POST","/v1/accounts:signInWithIdp",im(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yfe="http://localhost";class Bp extends q6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Bp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Ed("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new Bp(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return Ov(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Ov(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Ov(t,r)}buildRequest(){const t={requestUri:Yfe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=mw(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jfe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zfe(e){const t=wb(Eb(e)).link,r=t?wb(Eb(t)).deep_link_id:null,n=wb(Eb(e)).deep_link_id;return(n?wb(Eb(n)).link:null)||n||r||t||e}class W6{constructor(t){const r=wb(Eb(t)),n=r.apiKey??null,a=r.oobCode??null,s=Jfe(r.mode??null);Qr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=Zfe(t);try{return new W6(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.providerId=Ox.PROVIDER_ID}static credential(t,r){return yy._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=W6.parseLink(r);return Qr(n,"argument-error"),yy._fromEmailAndCode(t,n.code,n.tenantId)}}Ox.PROVIDER_ID="password";Ox.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ox.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw extends YW{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends vw{constructor(){super("facebook.com")}static credential(t){return Bp._fromParams({providerId:h0.PROVIDER_ID,signInMethod:h0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return h0.credentialFromTaggedObject(t)}static credentialFromError(t){return h0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return h0.credential(t.oauthAccessToken)}catch{return null}}}h0.FACEBOOK_SIGN_IN_METHOD="facebook.com";h0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends vw{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Bp._fromParams({providerId:m0.PROVIDER_ID,signInMethod:m0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return m0.credentialFromTaggedObject(t)}static credentialFromError(t){return m0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return m0.credential(r,n)}catch{return null}}}m0.GOOGLE_SIGN_IN_METHOD="google.com";m0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends vw{constructor(){super("github.com")}static credential(t){return Bp._fromParams({providerId:p0.PROVIDER_ID,signInMethod:p0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return p0.credentialFromTaggedObject(t)}static credentialFromError(t){return p0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return p0.credential(t.oauthAccessToken)}catch{return null}}}p0.GITHUB_SIGN_IN_METHOD="github.com";p0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends vw{constructor(){super("twitter.com")}static credential(t,r){return Bp._fromParams({providerId:g0.PROVIDER_ID,signInMethod:g0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return g0.credentialFromTaggedObject(t)}static credentialFromError(t){return g0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return g0.credential(r,n)}catch{return null}}}g0.TWITTER_SIGN_IN_METHOD="twitter.com";g0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await pd._fromIdTokenResponse(t,n,a),i=mU(n);return new tx({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=mU(n);return new tx({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function mU(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends _d{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,T_.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new T_(t,r,n,a)}}function JW(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?T_._fromErrorAndOperation(e,s,t,n):s})}async function ehe(e,t,r=!1){const n=await by(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return tx._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function the(e,t,r=!1){const{auth:n}=e;if(Cc(n.app))return Promise.reject(I0(n));const a="reauthenticate";try{const s=await by(e,JW(n,a,t,e),r);Qr(s.idToken,n,"internal-error");const i=K6(s.idToken);Qr(i,n,"internal-error");const{sub:o}=i;return Qr(e.uid===o,n,"user-mismatch"),tx._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ed(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZW(e,t,r=!1){if(Cc(e.app))return Promise.reject(I0(e));const n="signIn",a=await JW(e,n,t),s=await tx._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function rhe(e,t){return ZW(qp(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nhe(e){const t=qp(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ahe(e,t,r){const n=qp(e);await KI(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qfe)}function she(e,t,r){return Cc(e.app)?Promise.reject(I0(e)):rhe(va(e),Ox.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&nhe(e),n})}function ihe(e,t,r,n){return va(e).onIdTokenChanged(t,r,n)}function ohe(e,t,r){return va(e).beforeAuthStateChanged(t,r)}function eX(e,t,r,n){return va(e).onAuthStateChanged(t,r,n)}function lhe(e){return va(e).signOut()}const I_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(I_,"1"),this.storage.removeItem(I_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const che=1e3,uhe=10;class rX extends tX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KW(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);Sfe()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,uhe):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},che)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}rX.type="LOCAL";const dhe=rX;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nX extends tX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}nX.type="SESSION";const aX=nX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ahe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new R5(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),l=await Ahe(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}R5.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fhe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,l)=>{const u=X6("",20);a.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(){return window}function hhe(e){kA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sX(){return typeof kA().WorkerGlobalScope<"u"&&typeof kA().importScripts=="function"}async function mhe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function phe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function ghe(){return sX()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iX="firebaseLocalStorageDb",vhe=1,j_="firebaseLocalStorage",oX="fbase_key";class xw{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function P5(e,t){return e.transaction([j_],t?"readwrite":"readonly").objectStore(j_)}function xhe(){const e=indexedDB.deleteDatabase(iX);return new xw(e).toPromise()}function GI(){const e=indexedDB.open(iX,vhe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(j_,{keyPath:oX})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(j_)?t(n):(n.close(),await xhe(),t(await GI()))})})}async function pU(e,t,r){const n=P5(e,!0).put({[oX]:t,value:r});return new xw(n).toPromise()}async function bhe(e,t){const r=P5(e,!1).get(t),n=await new xw(r).toPromise();return n===void 0?null:n.value}function gU(e,t){const r=P5(e,!0).delete(t);return new xw(r).toPromise()}const yhe=800,whe=3;class lX{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await GI(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>whe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sX()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=R5._getInstance(ghe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await mhe(),!this.activeServiceWorker)return;this.sender=new fhe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||phe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await GI();return await pU(t,I_,"1"),await gU(t,I_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>pU(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>bhe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gU(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=P5(a,!1).getAll();return new xw(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yhe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lX.type="LOCAL";const Ehe=lX;new gw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Che(e,t){return t?jf(t):(Qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6 extends q6{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ov(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Ov(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Ov(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function _he(e){return ZW(e.auth,new Y6(e),e.bypassAuthState)}function She(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),the(r,new Y6(e),e.bypassAuthState)}async function Nhe(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),ehe(r,new Y6(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return _he;case"linkViaPopup":case"linkViaRedirect":return Nhe;case"reauthViaPopup":case"reauthViaRedirect":return She;default:Ed(this.auth,"internal-error")}}resolve(t){qf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){qf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const khe=new gw(2e3,1e4);class vv extends cX{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,vv.currentPopupAction&&vv.currentPopupAction.cancel(),vv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Qr(t,this.auth,"internal-error"),t}async onExecution(){qf(this.filter.length===1,"Popup operations only handle one event");const t=X6();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(NA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(NA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(NA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,khe.get())};t()}}vv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bhe="pendingRedirect",MC=new Map;class The extends cX{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=MC.get(this.auth._key());if(!t){try{const n=await Ihe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}MC.set(this.auth._key(),t)}return this.bypassAuthState||MC.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ihe(e,t){const r=Ohe(t),n=Fhe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function jhe(e,t){MC.set(e._key(),t)}function Fhe(e){return jf(e._redirectPersistence)}function Ohe(e){return LC(Bhe,e.config.apiKey,e.name)}async function Dhe(e,t,r=!1){if(Cc(e.app))return Promise.reject(I0(e));const n=qp(e),a=Che(n,t),i=await new The(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rhe=600*1e3;class Phe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Lhe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!uX(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(NA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Rhe&&this.cachedEventUids.clear(),this.cachedEventUids.has(vU(t))}saveEventToCache(t){this.cachedEventUids.add(vU(t)),this.lastProcessedEventTime=Date.now()}}function vU(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function uX({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Lhe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uX(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mhe(e,t={}){return uh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uhe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qhe=/^https?/;async function Hhe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Mhe(e);for(const r of t)try{if(Vhe(r))return}catch{}Ed(e,"unauthorized-domain")}function Vhe(e){const t=zI(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Qhe.test(r))return!1;if(Uhe.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zhe=new gw(3e4,6e4);function xU(){const e=kA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function $he(e){return new Promise((t,r)=>{var a,s,i;function n(){xU(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xU(),r(NA(e,"network-request-failed"))},timeout:zhe.get()})}if((s=(a=kA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=kA().gapi)!=null&&i.load)n();else{const o=Dfe("iframefcb");return kA()[o]=()=>{gapi.load?n():r(NA(e,"network-request-failed"))},qW(`${Ofe()}?onload=${o}`).catch(l=>r(l))}}).catch(t=>{throw UC=null,t})}let UC=null;function Khe(e){return UC=UC||$he(e),UC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ghe=new gw(5e3,15e3),qhe="__/auth/iframe",Whe="emulator/auth/iframe",Xhe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yhe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jhe(e){const t=e.config;Qr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?$6(t,Whe):`https://${e.config.authDomain}/${qhe}`,n={apiKey:t.apiKey,appName:e.name,v:Gp},a=Yhe.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${mw(n).slice(1)}`}async function Zhe(e){const t=await Khe(e),r=kA().gapi;return Qr(r,e,"internal-error"),t.open({where:document.body,url:Jhe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xhe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=NA(e,"network-request-failed"),o=kA().setTimeout(()=>{s(i)},Ghe.get());function l(){kA().clearTimeout(o),a(n)}n.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t0e=500,r0e=600,n0e="_blank",a0e="http://localhost";class bU{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s0e(e,t,r,n=t0e,a=r0e){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...e0e,width:n.toString(),height:a.toString(),top:s,left:i},u=Jo().toLowerCase();r&&(o=QW(u)?n0e:r),MW(u)&&(t=t||a0e,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(_fe(u)&&o!=="_self")return i0e(t||"",o),new bU(null);const f=window.open(t||"",o,d);Qr(f,e,"popup-blocked");try{f.focus()}catch{}return new bU(f)}function i0e(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0e="__/auth/handler",l0e="emulator/auth/handler",c0e=encodeURIComponent("fac");async function yU(e,t,r,n,a,s){Qr(e.config.authDomain,e,"auth-domain-config-required"),Qr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Gp,eventId:a};if(t instanceof YW){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",Gde(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof vw){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await e._getAppCheckToken(),u=l?`#${c0e}=${encodeURIComponent(l)}`:"";return`${u0e(e)}?${mw(o).slice(1)}${u}`}function u0e({config:e}){return e.emulator?$6(e,l0e):`https://${e.authDomain}/${o0e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB="webStorageSupport";class d0e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aX,this._completeRedirectFn=Dhe,this._overrideRedirectResult=jhe}async _openPopup(t,r,n,a){var i;qf((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await yU(t,r,n,zI(),a);return s0e(t,s,X6())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await yU(t,r,n,zI(),a);return hhe(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(qf(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await Zhe(t),n=new Phe(t);return r.register("authEvent",a=>(Qr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(sB,{type:sB},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[sB];s!==void 0&&r(!!s),Ed(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Hhe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return KW()||UW()||G6()}}const A0e=d0e;var wU="@firebase/auth",EU="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0e{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0e(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m0e(e){V0(new Kf("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Qr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GW(e)},u=new Ife(n,a,s,l);return Qfe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),V0(new Kf("auth-internal",t=>{const r=qp(t.getProvider("auth").getImmediate());return(n=>new f0e(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tu(wU,EU,h0e(e)),Tu(wU,EU,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0e=300,g0e=_W("authIdTokenMaxAge")||p0e;let CU=null;const v0e=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>g0e)return;const a=r==null?void 0:r.token;CU!==a&&(CU=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function dX(e=F5()){const t=pw(e,"auth");if(t.isInitialized())return t.getImmediate();const r=Ufe(e,{popupRedirectResolver:A0e,persistence:[Ehe,dhe,aX]}),n=_W("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=v0e(s.toString());ohe(r,i,()=>i(r.currentUser)),ihe(r,o=>i(o))}}const a=EW("auth");return a&&Hfe(r,`http://${a}`),r}function x0e(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}jfe({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=NA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",x0e().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m0e("Browser");var b0e="firebase",y0e="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tu(b0e,y0e,"app");var _U=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j0,AX;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,C){function N(){}N.prototype=C.prototype,w.D=C.prototype,w.prototype=new N,w.prototype.constructor=w,w.C=function(R,O,j){for(var U=Array(arguments.length-2),P=2;P<arguments.length;P++)U[P-2]=arguments[P];return C.prototype[O].apply(R,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,C,N){N||(N=0);var R=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)R[O]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(O=0;16>O;++O)R[O]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=w.g[0],N=w.g[1],O=w.g[2];var j=w.g[3],U=C+(j^N&(O^j))+R[0]+3614090360&4294967295;C=N+(U<<7&4294967295|U>>>25),U=j+(O^C&(N^O))+R[1]+3905402710&4294967295,j=C+(U<<12&4294967295|U>>>20),U=O+(N^j&(C^N))+R[2]+606105819&4294967295,O=j+(U<<17&4294967295|U>>>15),U=N+(C^O&(j^C))+R[3]+3250441966&4294967295,N=O+(U<<22&4294967295|U>>>10),U=C+(j^N&(O^j))+R[4]+4118548399&4294967295,C=N+(U<<7&4294967295|U>>>25),U=j+(O^C&(N^O))+R[5]+1200080426&4294967295,j=C+(U<<12&4294967295|U>>>20),U=O+(N^j&(C^N))+R[6]+2821735955&4294967295,O=j+(U<<17&4294967295|U>>>15),U=N+(C^O&(j^C))+R[7]+4249261313&4294967295,N=O+(U<<22&4294967295|U>>>10),U=C+(j^N&(O^j))+R[8]+1770035416&4294967295,C=N+(U<<7&4294967295|U>>>25),U=j+(O^C&(N^O))+R[9]+2336552879&4294967295,j=C+(U<<12&4294967295|U>>>20),U=O+(N^j&(C^N))+R[10]+4294925233&4294967295,O=j+(U<<17&4294967295|U>>>15),U=N+(C^O&(j^C))+R[11]+2304563134&4294967295,N=O+(U<<22&4294967295|U>>>10),U=C+(j^N&(O^j))+R[12]+1804603682&4294967295,C=N+(U<<7&4294967295|U>>>25),U=j+(O^C&(N^O))+R[13]+4254626195&4294967295,j=C+(U<<12&4294967295|U>>>20),U=O+(N^j&(C^N))+R[14]+2792965006&4294967295,O=j+(U<<17&4294967295|U>>>15),U=N+(C^O&(j^C))+R[15]+1236535329&4294967295,N=O+(U<<22&4294967295|U>>>10),U=C+(O^j&(N^O))+R[1]+4129170786&4294967295,C=N+(U<<5&4294967295|U>>>27),U=j+(N^O&(C^N))+R[6]+3225465664&4294967295,j=C+(U<<9&4294967295|U>>>23),U=O+(C^N&(j^C))+R[11]+643717713&4294967295,O=j+(U<<14&4294967295|U>>>18),U=N+(j^C&(O^j))+R[0]+3921069994&4294967295,N=O+(U<<20&4294967295|U>>>12),U=C+(O^j&(N^O))+R[5]+3593408605&4294967295,C=N+(U<<5&4294967295|U>>>27),U=j+(N^O&(C^N))+R[10]+38016083&4294967295,j=C+(U<<9&4294967295|U>>>23),U=O+(C^N&(j^C))+R[15]+3634488961&4294967295,O=j+(U<<14&4294967295|U>>>18),U=N+(j^C&(O^j))+R[4]+3889429448&4294967295,N=O+(U<<20&4294967295|U>>>12),U=C+(O^j&(N^O))+R[9]+568446438&4294967295,C=N+(U<<5&4294967295|U>>>27),U=j+(N^O&(C^N))+R[14]+3275163606&4294967295,j=C+(U<<9&4294967295|U>>>23),U=O+(C^N&(j^C))+R[3]+4107603335&4294967295,O=j+(U<<14&4294967295|U>>>18),U=N+(j^C&(O^j))+R[8]+1163531501&4294967295,N=O+(U<<20&4294967295|U>>>12),U=C+(O^j&(N^O))+R[13]+2850285829&4294967295,C=N+(U<<5&4294967295|U>>>27),U=j+(N^O&(C^N))+R[2]+4243563512&4294967295,j=C+(U<<9&4294967295|U>>>23),U=O+(C^N&(j^C))+R[7]+1735328473&4294967295,O=j+(U<<14&4294967295|U>>>18),U=N+(j^C&(O^j))+R[12]+2368359562&4294967295,N=O+(U<<20&4294967295|U>>>12),U=C+(N^O^j)+R[5]+4294588738&4294967295,C=N+(U<<4&4294967295|U>>>28),U=j+(C^N^O)+R[8]+2272392833&4294967295,j=C+(U<<11&4294967295|U>>>21),U=O+(j^C^N)+R[11]+1839030562&4294967295,O=j+(U<<16&4294967295|U>>>16),U=N+(O^j^C)+R[14]+4259657740&4294967295,N=O+(U<<23&4294967295|U>>>9),U=C+(N^O^j)+R[1]+2763975236&4294967295,C=N+(U<<4&4294967295|U>>>28),U=j+(C^N^O)+R[4]+1272893353&4294967295,j=C+(U<<11&4294967295|U>>>21),U=O+(j^C^N)+R[7]+4139469664&4294967295,O=j+(U<<16&4294967295|U>>>16),U=N+(O^j^C)+R[10]+3200236656&4294967295,N=O+(U<<23&4294967295|U>>>9),U=C+(N^O^j)+R[13]+681279174&4294967295,C=N+(U<<4&4294967295|U>>>28),U=j+(C^N^O)+R[0]+3936430074&4294967295,j=C+(U<<11&4294967295|U>>>21),U=O+(j^C^N)+R[3]+3572445317&4294967295,O=j+(U<<16&4294967295|U>>>16),U=N+(O^j^C)+R[6]+76029189&4294967295,N=O+(U<<23&4294967295|U>>>9),U=C+(N^O^j)+R[9]+3654602809&4294967295,C=N+(U<<4&4294967295|U>>>28),U=j+(C^N^O)+R[12]+3873151461&4294967295,j=C+(U<<11&4294967295|U>>>21),U=O+(j^C^N)+R[15]+530742520&4294967295,O=j+(U<<16&4294967295|U>>>16),U=N+(O^j^C)+R[2]+3299628645&4294967295,N=O+(U<<23&4294967295|U>>>9),U=C+(O^(N|~j))+R[0]+4096336452&4294967295,C=N+(U<<6&4294967295|U>>>26),U=j+(N^(C|~O))+R[7]+1126891415&4294967295,j=C+(U<<10&4294967295|U>>>22),U=O+(C^(j|~N))+R[14]+2878612391&4294967295,O=j+(U<<15&4294967295|U>>>17),U=N+(j^(O|~C))+R[5]+4237533241&4294967295,N=O+(U<<21&4294967295|U>>>11),U=C+(O^(N|~j))+R[12]+1700485571&4294967295,C=N+(U<<6&4294967295|U>>>26),U=j+(N^(C|~O))+R[3]+2399980690&4294967295,j=C+(U<<10&4294967295|U>>>22),U=O+(C^(j|~N))+R[10]+4293915773&4294967295,O=j+(U<<15&4294967295|U>>>17),U=N+(j^(O|~C))+R[1]+2240044497&4294967295,N=O+(U<<21&4294967295|U>>>11),U=C+(O^(N|~j))+R[8]+1873313359&4294967295,C=N+(U<<6&4294967295|U>>>26),U=j+(N^(C|~O))+R[15]+4264355552&4294967295,j=C+(U<<10&4294967295|U>>>22),U=O+(C^(j|~N))+R[6]+2734768916&4294967295,O=j+(U<<15&4294967295|U>>>17),U=N+(j^(O|~C))+R[13]+1309151649&4294967295,N=O+(U<<21&4294967295|U>>>11),U=C+(O^(N|~j))+R[4]+4149444226&4294967295,C=N+(U<<6&4294967295|U>>>26),U=j+(N^(C|~O))+R[11]+3174756917&4294967295,j=C+(U<<10&4294967295|U>>>22),U=O+(C^(j|~N))+R[2]+718787259&4294967295,O=j+(U<<15&4294967295|U>>>17),U=N+(j^(O|~C))+R[9]+3951481745&4294967295,w.g[0]=w.g[0]+C&4294967295,w.g[1]=w.g[1]+(O+(U<<21&4294967295|U>>>11))&4294967295,w.g[2]=w.g[2]+O&4294967295,w.g[3]=w.g[3]+j&4294967295}n.prototype.u=function(w,C){C===void 0&&(C=w.length);for(var N=C-this.blockSize,R=this.B,O=this.h,j=0;j<C;){if(O==0)for(;j<=N;)a(this,w,j),j+=this.blockSize;if(typeof w=="string"){for(;j<C;)if(R[O++]=w.charCodeAt(j++),O==this.blockSize){a(this,R),O=0;break}}else for(;j<C;)if(R[O++]=w[j++],O==this.blockSize){a(this,R),O=0;break}}this.h=O,this.o+=C},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var C=1;C<w.length-8;++C)w[C]=0;var N=8*this.o;for(C=w.length-8;C<w.length;++C)w[C]=N&255,N/=256;for(this.u(w),w=Array(16),C=N=0;4>C;++C)for(var R=0;32>R;R+=8)w[N++]=this.g[C]>>>R&255;return w};function s(w,C){var N=o;return Object.prototype.hasOwnProperty.call(N,w)?N[w]:N[w]=C(w)}function i(w,C){this.h=C;for(var N=[],R=!0,O=w.length-1;0<=O;O--){var j=w[O]|0;R&&j==C||(N[O]=j,R=!1)}this.g=N}var o={};function l(w){return-128<=w&&128>w?s(w,function(C){return new i([C|0],0>C?-1:0)}):new i([w|0],0>w?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return f;if(0>w)return b(u(-w));for(var C=[],N=1,R=0;w>=N;R++)C[R]=w/N|0,N*=4294967296;return new i(C,0)}function d(w,C){if(w.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w.charAt(0)=="-")return b(d(w.substring(1),C));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(C,8)),R=f,O=0;O<w.length;O+=8){var j=Math.min(8,w.length-O),U=parseInt(w.substring(O,O+j),C);8>j?(j=u(Math.pow(C,j)),R=R.j(j).add(u(U))):(R=R.j(N),R=R.add(u(U)))}return R}var f=l(0),h=l(1),p=l(16777216);e=i.prototype,e.m=function(){if(v(this))return-b(this).m();for(var w=0,C=1,N=0;N<this.g.length;N++){var R=this.i(N);w+=(0<=R?R:4294967296+R)*C,C*=4294967296}return w},e.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(g(this))return"0";if(v(this))return"-"+b(this).toString(w);for(var C=u(Math.pow(w,6)),N=this,R="";;){var O=k(N,C).g;N=y(N,O.j(C));var j=((0<N.g.length?N.g[0]:N.h)>>>0).toString(w);if(N=O,g(N))return j+R;for(;6>j.length;)j="0"+j;R=j+R}},e.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function g(w){if(w.h!=0)return!1;for(var C=0;C<w.g.length;C++)if(w.g[C]!=0)return!1;return!0}function v(w){return w.h==-1}e.l=function(w){return w=y(this,w),v(w)?-1:g(w)?0:1};function b(w){for(var C=w.g.length,N=[],R=0;R<C;R++)N[R]=~w.g[R];return new i(N,~w.h).add(h)}e.abs=function(){return v(this)?b(this):this},e.add=function(w){for(var C=Math.max(this.g.length,w.g.length),N=[],R=0,O=0;O<=C;O++){var j=R+(this.i(O)&65535)+(w.i(O)&65535),U=(j>>>16)+(this.i(O)>>>16)+(w.i(O)>>>16);R=U>>>16,j&=65535,U&=65535,N[O]=U<<16|j}return new i(N,N[N.length-1]&-2147483648?-1:0)};function y(w,C){return w.add(b(C))}e.j=function(w){if(g(this)||g(w))return f;if(v(this))return v(w)?b(this).j(b(w)):b(b(this).j(w));if(v(w))return b(this.j(b(w)));if(0>this.l(p)&&0>w.l(p))return u(this.m()*w.m());for(var C=this.g.length+w.g.length,N=[],R=0;R<2*C;R++)N[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<w.g.length;O++){var j=this.i(R)>>>16,U=this.i(R)&65535,P=w.i(O)>>>16,X=w.i(O)&65535;N[2*R+2*O]+=U*X,_(N,2*R+2*O),N[2*R+2*O+1]+=j*X,_(N,2*R+2*O+1),N[2*R+2*O+1]+=U*P,_(N,2*R+2*O+1),N[2*R+2*O+2]+=j*P,_(N,2*R+2*O+2)}for(R=0;R<C;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=C;R<2*C;R++)N[R]=0;return new i(N,0)};function _(w,C){for(;(w[C]&65535)!=w[C];)w[C+1]+=w[C]>>>16,w[C]&=65535,C++}function S(w,C){this.g=w,this.h=C}function k(w,C){if(g(C))throw Error("division by zero");if(g(w))return new S(f,f);if(v(w))return C=k(b(w),C),new S(b(C.g),b(C.h));if(v(C))return C=k(w,b(C)),new S(b(C.g),C.h);if(30<w.g.length){if(v(w)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var N=h,R=C;0>=R.l(w);)N=B(N),R=B(R);var O=F(N,1),j=F(R,1);for(R=F(R,2),N=F(N,2);!g(R);){var U=j.add(R);0>=U.l(w)&&(O=O.add(N),j=U),R=F(R,1),N=F(N,1)}return C=y(w,O.j(C)),new S(O,C)}for(O=f;0<=w.l(C);){for(N=Math.max(1,Math.floor(w.m()/C.m())),R=Math.ceil(Math.log(N)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),j=u(N),U=j.j(C);v(U)||0<U.l(w);)N-=R,j=u(N),U=j.j(C);g(j)&&(j=h),O=O.add(j),w=y(w,U)}return new S(O,w)}e.A=function(w){return k(this,w).h},e.and=function(w){for(var C=Math.max(this.g.length,w.g.length),N=[],R=0;R<C;R++)N[R]=this.i(R)&w.i(R);return new i(N,this.h&w.h)},e.or=function(w){for(var C=Math.max(this.g.length,w.g.length),N=[],R=0;R<C;R++)N[R]=this.i(R)|w.i(R);return new i(N,this.h|w.h)},e.xor=function(w){for(var C=Math.max(this.g.length,w.g.length),N=[],R=0;R<C;R++)N[R]=this.i(R)^w.i(R);return new i(N,this.h^w.h)};function B(w){for(var C=w.g.length+1,N=[],R=0;R<C;R++)N[R]=w.i(R)<<1|w.i(R-1)>>>31;return new i(N,w.h)}function F(w,C){var N=C>>5;C%=32;for(var R=w.g.length-N,O=[],j=0;j<R;j++)O[j]=0<C?w.i(j+N)>>>C|w.i(j+N+1)<<32-C:w.i(j+N);return new i(O,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,AX=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,j0=i}).apply(typeof _U<"u"?_U:typeof self<"u"?self:typeof window<"u"?window:{});var cE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fX,Cb,hX,QC,qI,mX,pX,gX;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,ee,se){return D==Array.prototype||D==Object.prototype||(D[ee]=se.value),D};function r(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof cE=="object"&&cE];for(var ee=0;ee<D.length;++ee){var se=D[ee];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(D,ee){if(ee)e:{var se=n;D=D.split(".");for(var xe=0;xe<D.length-1;xe++){var ze=D[xe];if(!(ze in se))break e;se=se[ze]}D=D[D.length-1],xe=se[D],ee=ee(xe),ee!=xe&&ee!=null&&t(se,D,{configurable:!0,writable:!0,value:ee})}}function s(D,ee){D instanceof String&&(D+="");var se=0,xe=!1,ze={next:function(){if(!xe&&se<D.length){var st=se++;return{value:ee(st,D[st]),done:!1}}return xe=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(D){return D||function(){return s(this,function(ee,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(D){var ee=typeof D;return ee=ee!="object"?ee:D?Array.isArray(D)?"array":ee:"null",ee=="array"||ee=="object"&&typeof D.length=="number"}function u(D){var ee=typeof D;return ee=="object"&&D!=null||ee=="function"}function d(D,ee,se){return D.call.apply(D.bind,arguments)}function f(D,ee,se){if(!D)throw Error();if(2<arguments.length){var xe=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,xe),D.apply(ee,ze)}}return function(){return D.apply(ee,arguments)}}function h(D,ee,se){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(D,ee){var se=Array.prototype.slice.call(arguments,1);return function(){var xe=se.slice();return xe.push.apply(xe,arguments),D.apply(this,xe)}}function g(D,ee){function se(){}se.prototype=ee.prototype,D.aa=ee.prototype,D.prototype=new se,D.prototype.constructor=D,D.Qb=function(xe,ze,st){for(var Mt=Array(arguments.length-2),Tr=2;Tr<arguments.length;Tr++)Mt[Tr-2]=arguments[Tr];return ee.prototype[ze].apply(xe,Mt)}}function v(D){const ee=D.length;if(0<ee){const se=Array(ee);for(let xe=0;xe<ee;xe++)se[xe]=D[xe];return se}return[]}function b(D,ee){for(let se=1;se<arguments.length;se++){const xe=arguments[se];if(l(xe)){const ze=D.length||0,st=xe.length||0;D.length=ze+st;for(let Mt=0;Mt<st;Mt++)D[ze+Mt]=xe[Mt]}else D.push(xe)}}class y{constructor(ee,se){this.i=ee,this.j=se,this.h=0,this.g=null}get(){let ee;return 0<this.h?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function _(D){return/^[\s\xa0]*$/.test(D)}function S(){var D=o.navigator;return D&&(D=D.userAgent)?D:""}function k(D){return k[" "](D),D}k[" "]=function(){};var B=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function F(D,ee,se){for(const xe in D)ee.call(se,D[xe],xe,D)}function w(D,ee){for(const se in D)ee.call(void 0,D[se],se,D)}function C(D){const ee={};for(const se in D)ee[se]=D[se];return ee}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(D,ee){let se,xe;for(let ze=1;ze<arguments.length;ze++){xe=arguments[ze];for(se in xe)D[se]=xe[se];for(let st=0;st<N.length;st++)se=N[st],Object.prototype.hasOwnProperty.call(xe,se)&&(D[se]=xe[se])}}function O(D){var ee=1;D=D.split(":");const se=[];for(;0<ee&&D.length;)se.push(D.shift()),ee--;return D.length&&se.push(D.join(":")),se}function j(D){o.setTimeout(()=>{throw D},0)}function U(){var D=V;let ee=null;return D.g&&(ee=D.g,D.g=D.g.next,D.g||(D.h=null),ee.next=null),ee}class P{constructor(){this.h=this.g=null}add(ee,se){const xe=X.get();xe.set(ee,se),this.h?this.h.next=xe:this.g=xe,this.h=xe}}var X=new y(()=>new K,D=>D.reset());class K{constructor(){this.next=this.g=this.h=null}set(ee,se){this.h=ee,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,H=!1,V=new P,q=()=>{const D=o.Promise.resolve(void 0);Z=()=>{D.then(ne)}};var ne=()=>{for(var D;D=U();){try{D.h.call(D.g)}catch(se){j(se)}var ee=X;ee.j(D),100>ee.h&&(ee.h++,D.next=ee.g,ee.g=D)}H=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(D,ee){this.type=D,this.g=this.target=ee,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var D=!1,ee=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const se=()=>{};o.addEventListener("test",se,ee),o.removeEventListener("test",se,ee)}catch{}return D}();function te(D,ee){if(W.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D){var se=this.type=D.type,xe=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;if(this.target=D.target||D.srcElement,this.g=ee,ee=D.relatedTarget){if(B){e:{try{k(ee.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(ee=null)}}else se=="mouseover"?ee=D.fromElement:se=="mouseout"&&(ee=D.toElement);this.relatedTarget=ee,xe?(this.clientX=xe.clientX!==void 0?xe.clientX:xe.pageX,this.clientY=xe.clientY!==void 0?xe.clientY:xe.pageY,this.screenX=xe.screenX||0,this.screenY=xe.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=typeof D.pointerType=="string"?D.pointerType:ie[D.pointerType]||"",this.state=D.state,this.i=D,D.defaultPrevented&&te.aa.h.call(this)}}g(te,W);var ie={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ce(D,ee,se,xe,ze){this.listener=D,this.proxy=null,this.src=ee,this.type=se,this.capture=!!xe,this.ha=ze,this.key=++oe,this.da=this.fa=!1}function ge(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function je(D){this.src=D,this.g={},this.h=0}je.prototype.add=function(D,ee,se,xe,ze){var st=D.toString();D=this.g[st],D||(D=this.g[st]=[],this.h++);var Mt=Se(D,ee,xe,ze);return-1<Mt?(ee=D[Mt],se||(ee.fa=!1)):(ee=new ce(ee,this.src,st,!!xe,ze),ee.fa=se,D.push(ee)),ee};function re(D,ee){var se=ee.type;if(se in D.g){var xe=D.g[se],ze=Array.prototype.indexOf.call(xe,ee,void 0),st;(st=0<=ze)&&Array.prototype.splice.call(xe,ze,1),st&&(ge(ee),D.g[se].length==0&&(delete D.g[se],D.h--))}}function Se(D,ee,se,xe){for(var ze=0;ze<D.length;++ze){var st=D[ze];if(!st.da&&st.listener==ee&&st.capture==!!se&&st.ha==xe)return ze}return-1}var De="closure_lm_"+(1e6*Math.random()|0),_e={};function he(D,ee,se,xe,ze){if(Array.isArray(ee)){for(var st=0;st<ee.length;st++)he(D,ee[st],se,xe,ze);return null}return se=ot(se),D&&D[Ae]?D.K(ee,se,u(xe)?!!xe.capture:!1,ze):Ie(D,ee,se,!1,xe,ze)}function Ie(D,ee,se,xe,ze,st){if(!ee)throw Error("Invalid event type");var Mt=u(ze)?!!ze.capture:!!ze,Tr=qe(D);if(Tr||(D[De]=Tr=new je(D)),se=Tr.add(ee,se,xe,Mt,st),se.proxy)return se;if(xe=He(),se.proxy=xe,xe.src=D,xe.listener=se,D.addEventListener)J||(ze=Mt),ze===void 0&&(ze=!1),D.addEventListener(ee.toString(),xe,ze);else if(D.attachEvent)D.attachEvent(Oe(ee.toString()),xe);else if(D.addListener&&D.removeListener)D.addListener(xe);else throw Error("addEventListener and attachEvent are unavailable.");return se}function He(){function D(se){return ee.call(D.src,D.listener,se)}const ee=Pe;return D}function Xe(D,ee,se,xe,ze){if(Array.isArray(ee))for(var st=0;st<ee.length;st++)Xe(D,ee[st],se,xe,ze);else xe=u(xe)?!!xe.capture:!!xe,se=ot(se),D&&D[Ae]?(D=D.i,ee=String(ee).toString(),ee in D.g&&(st=D.g[ee],se=Se(st,se,xe,ze),-1<se&&(ge(st[se]),Array.prototype.splice.call(st,se,1),st.length==0&&(delete D.g[ee],D.h--)))):D&&(D=qe(D))&&(ee=D.g[ee.toString()],D=-1,ee&&(D=Se(ee,se,xe,ze)),(se=-1<D?ee[D]:null)&&ye(se))}function ye(D){if(typeof D!="number"&&D&&!D.da){var ee=D.src;if(ee&&ee[Ae])re(ee.i,D);else{var se=D.type,xe=D.proxy;ee.removeEventListener?ee.removeEventListener(se,xe,D.capture):ee.detachEvent?ee.detachEvent(Oe(se),xe):ee.addListener&&ee.removeListener&&ee.removeListener(xe),(se=qe(ee))?(re(se,D),se.h==0&&(se.src=null,ee[De]=null)):ge(D)}}}function Oe(D){return D in _e?_e[D]:_e[D]="on"+D}function Pe(D,ee){if(D.da)D=!0;else{ee=new te(ee,this);var se=D.listener,xe=D.ha||D.src;D.fa&&ye(D),D=se.call(xe,ee)}return D}function qe(D){return D=D[De],D instanceof je?D:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(D){return typeof D=="function"?D:(D[Ze]||(D[Ze]=function(ee){return D.handleEvent(ee)}),D[Ze])}function mt(){L.call(this),this.i=new je(this),this.M=this,this.F=null}g(mt,L),mt.prototype[Ae]=!0,mt.prototype.removeEventListener=function(D,ee,se,xe){Xe(this,D,ee,se,xe)};function Bt(D,ee){var se,xe=D.F;if(xe)for(se=[];xe;xe=xe.F)se.push(xe);if(D=D.M,xe=ee.type||ee,typeof ee=="string")ee=new W(ee,D);else if(ee instanceof W)ee.target=ee.target||D;else{var ze=ee;ee=new W(xe,D),R(ee,ze)}if(ze=!0,se)for(var st=se.length-1;0<=st;st--){var Mt=ee.g=se[st];ze=Lt(Mt,xe,!0,ee)&&ze}if(Mt=ee.g=D,ze=Lt(Mt,xe,!0,ee)&&ze,ze=Lt(Mt,xe,!1,ee)&&ze,se)for(st=0;st<se.length;st++)Mt=ee.g=se[st],ze=Lt(Mt,xe,!1,ee)&&ze}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var D=this.i,ee;for(ee in D.g){for(var se=D.g[ee],xe=0;xe<se.length;xe++)ge(se[xe]);delete D.g[ee],D.h--}}this.F=null},mt.prototype.K=function(D,ee,se,xe){return this.i.add(String(D),ee,!1,se,xe)},mt.prototype.L=function(D,ee,se,xe){return this.i.add(String(D),ee,!0,se,xe)};function Lt(D,ee,se,xe){if(ee=D.i.g[String(ee)],!ee)return!0;ee=ee.concat();for(var ze=!0,st=0;st<ee.length;++st){var Mt=ee[st];if(Mt&&!Mt.da&&Mt.capture==se){var Tr=Mt.listener,xn=Mt.ha||Mt.src;Mt.fa&&re(D.i,Mt),ze=Tr.call(xn,xe)!==!1&&ze}}return ze&&!xe.defaultPrevented}function Ot(D,ee,se){if(typeof D=="function")se&&(D=h(D,se));else if(D&&typeof D.handleEvent=="function")D=h(D.handleEvent,D);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:o.setTimeout(D,ee||0)}function Qt(D){D.g=Ot(()=>{D.g=null,D.i&&(D.i=!1,Qt(D))},D.l);const ee=D.h;D.h=null,D.m.apply(null,ee)}class bt extends L{constructor(ee,se){super(),this.m=ee,this.l=se,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(D){L.call(this),this.h=D,this.g={}}g(Nr,L);var tr=[];function nn(D){F(D.g,function(ee,se){this.g.hasOwnProperty(se)&&ye(ee)},D),D.g={}}Nr.prototype.N=function(){Nr.aa.N.call(this),nn(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cr=o.JSON.stringify,Vr=o.JSON.parse,In=class{stringify(D){return o.JSON.stringify(D,void 0)}parse(D){return o.JSON.parse(D,void 0)}};function jr(){}jr.prototype.h=null;function vt(D){return D.h||(D.h=D.i())}function pt(){}var Je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){W.call(this,"d")}g(gt,W);function dt(){W.call(this,"c")}g(dt,W);var Dt={},zt=null;function Pr(){return zt=zt||new mt}Dt.La="serverreachability";function Xr(D){W.call(this,Dt.La,D)}g(Xr,W);function pn(D){const ee=Pr();Bt(ee,new Xr(ee))}Dt.STAT_EVENT="statevent";function gn(D,ee){W.call(this,Dt.STAT_EVENT,D),this.stat=ee}g(gn,W);function $t(D){const ee=Pr();Bt(ee,new gn(ee,D))}Dt.Ma="timingevent";function tn(D,ee){W.call(this,Dt.Ma,D),this.size=ee}g(tn,W);function en(D,ee){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){D()},ee)}function cr(){this.g=!0}cr.prototype.xa=function(){this.g=!1};function Yr(D,ee,se,xe,ze,st){D.info(function(){if(D.g)if(st)for(var Mt="",Tr=st.split("&"),xn=0;xn<Tr.length;xn++){var Gr=Tr[xn].split("=");if(1<Gr.length){var Vn=Gr[0];Gr=Gr[1];var ra=Vn.split("_");Mt=2<=ra.length&&ra[1]=="type"?Mt+(Vn+"="+Gr+"&"):Mt+(Vn+"=redacted&")}}else Mt=null;else Mt=st;return"XMLHTTP REQ ("+xe+") [attempt "+ze+"]: "+ee+`
`+se+`
`+Mt})}function ta(D,ee,se,xe,ze,st,Mt){D.info(function(){return"XMLHTTP RESP ("+xe+") [ attempt "+ze+"]: "+ee+`
`+se+`
`+st+" "+Mt})}function fe(D,ee,se,xe){D.info(function(){return"XMLHTTP TEXT ("+ee+"): "+Ee(D,se)+(xe?" "+xe:"")})}function Be(D,ee){D.info(function(){return"TIMEOUT: "+ee})}cr.prototype.info=function(){};function Ee(D,ee){if(!D.g)return ee;if(!ee)return null;try{var se=JSON.parse(ee);if(se){for(D=0;D<se.length;D++)if(Array.isArray(se[D])){var xe=se[D];if(!(2>xe.length)){var ze=xe[1];if(Array.isArray(ze)&&!(1>ze.length)){var st=ze[0];if(st!="noop"&&st!="stop"&&st!="close")for(var Mt=1;Mt<ze.length;Mt++)ze[Mt]=""}}}}return Cr(se)}catch{return ee}}var Ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Te;function Ye(){}g(Ye,jr),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},Te=new Ye;function ut(D,ee,se,xe){this.j=D,this.i=ee,this.l=se,this.R=xe||1,this.U=new Nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var tt={},at={};function Tt(D,ee,se){D.L=1,D.v=Vc(bi(ee)),D.m=se,D.P=!0,Vt(D,null)}function Vt(D,ee){D.F=Date.now(),Kt(D),D.A=bi(D.v);var se=D.A,xe=D.R;Array.isArray(xe)||(xe=[String(xe)]),Br(se.i,"t",xe),D.C=0,se=D.j.J,D.h=new $e,D.g=de(D.j,se?ee:null,!D.m),0<D.O&&(D.M=new bt(h(D.Y,D,D.g),D.O)),ee=D.U,se=D.g,xe=D.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(tr[0]=ze.toString()),ze=tr);for(var st=0;st<ze.length;st++){var Mt=he(se,ze[st],xe||ee.handleEvent,!1,ee.h||ee);if(!Mt)break;ee.g[Mt.key]=Mt}ee=D.H?C(D.H):{},D.m?(D.u||(D.u="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.A,D.u,D.m,ee)):(D.u="GET",D.g.ea(D.A,D.u,null,ee)),pn(),Yr(D.i,D.u,D.A,D.l,D.R,D.m)}ut.prototype.ca=function(D){D=D.target;const ee=this.M;ee&&hs(D)==3?ee.j():this.Y(D)},ut.prototype.Y=function(D){try{if(D==this.g)e:{const ra=hs(this.g);var ee=this.g.Ba();const Bl=this.g.Z();if(!(3>ra)&&(ra!=3||this.g&&(this.h.h||this.g.oa()||wh(this.g)))){this.J||ra!=4||ee==7||(ee==8||0>=Bl?pn(3):pn(2)),an(this);var se=this.g.Z();this.X=se;t:if(Yt(this)){var xe=wh(this.g);D="";var ze=xe.length,st=hs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),sn(this);var Mt="";break t}this.h.i=new o.TextDecoder}for(ee=0;ee<ze;ee++)this.h.h=!0,D+=this.h.i.decode(xe[ee],{stream:!(st&&ee==ze-1)});xe.length=0,this.h.g+=D,this.C=0,Mt=this.h.g}else Mt=this.g.oa();if(this.o=se==200,ta(this.i,this.u,this.A,this.l,this.R,ra,se),this.o){if(this.T&&!this.K){t:{if(this.g){var Tr,xn=this.g;if((Tr=xn.g?xn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Tr)){var Gr=Tr;break t}}Gr=null}if(se=Gr)fe(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ds(this,se);else{this.o=!1,this.s=3,$t(12),dn(this),sn(this);break e}}if(this.P){se=!0;let Za;for(;!this.J&&this.C<Mt.length;)if(Za=Ht(this,Mt),Za==at){ra==4&&(this.s=4,$t(14),se=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(Za==tt){this.s=4,$t(15),fe(this.i,this.l,Mt,"[Invalid Chunk]"),se=!1;break}else fe(this.i,this.l,Za,null),ds(this,Za);if(Yt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ra!=4||Mt.length!=0||this.h.h||(this.s=1,$t(16),se=!1),this.o=this.o&&se,!se)fe(this.i,this.l,Mt,"[Invalid Chunked Response]"),dn(this),sn(this);else if(0<Mt.length&&!this.W){this.W=!0;var Vn=this.j;Vn.g==this&&Vn.ba&&!Vn.M&&(Vn.j.info("Great, no buffering proxy detected. Bytes received: "+Mt.length),Wc(Vn),Vn.M=!0,$t(11))}}else fe(this.i,this.l,Mt,null),ds(this,Mt);ra==4&&dn(this),this.o&&!this.J&&(ra==4?Xc(this.j,this):(this.o=!1,Kt(this)))}else Kc(this.g),se==400&&0<Mt.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),dn(this),sn(this)}}}catch{}finally{}};function Yt(D){return D.g?D.u=="GET"&&D.L!=2&&D.j.Ca:!1}function Ht(D,ee){var se=D.C,xe=ee.indexOf(`
`,se);return xe==-1?at:(se=Number(ee.substring(se,xe)),isNaN(se)?tt:(xe+=1,xe+se>ee.length?at:(ee=ee.slice(xe,xe+se),D.C=xe+se,ee)))}ut.prototype.cancel=function(){this.J=!0,dn(this)};function Kt(D){D.S=Date.now()+D.I,_r(D,D.I)}function _r(D,ee){if(D.B!=null)throw Error("WatchDog timer not null");D.B=en(h(D.ba,D),ee)}function an(D){D.B&&(o.clearTimeout(D.B),D.B=null)}ut.prototype.ba=function(){this.B=null;const D=Date.now();0<=D-this.S?(Be(this.i,this.A),this.L!=2&&(pn(),$t(17)),dn(this),this.s=2,sn(this)):_r(this,this.S-D)};function sn(D){D.j.G==0||D.J||Xc(D.j,D)}function dn(D){an(D);var ee=D.M;ee&&typeof ee.ma=="function"&&ee.ma(),D.M=null,nn(D.U),D.g&&(ee=D.g,D.g=null,ee.abort(),ee.ma())}function ds(D,ee){try{var se=D.j;if(se.G!=0&&(se.g==D||vi(se.h,D))){if(!D.K&&vi(se.h,D)&&se.G==3){try{var xe=se.Da.g.parse(ee)}catch{xe=null}if(Array.isArray(xe)&&xe.length==3){var ze=xe;if(ze[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<D.F)ic(se),Od(se);else break e;Vu(se),$t(18)}}else se.za=ze[1],0<se.za-se.T&&37500>ze[2]&&se.F&&se.v==0&&!se.C&&(se.C=en(h(se.Za,se),6e3));if(1>=js(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else Ri(se,11)}else if((D.K||se.g==D)&&ic(se),!_(ee))for(ze=se.Da.g.parse(ee),ee=0;ee<ze.length;ee++){let Gr=ze[ee];if(se.T=Gr[0],Gr=Gr[1],se.G==2)if(Gr[0]=="c"){se.K=Gr[1],se.ia=Gr[2];const Vn=Gr[3];Vn!=null&&(se.la=Vn,se.j.info("VER="+se.la));const ra=Gr[4];ra!=null&&(se.Aa=ra,se.j.info("SVER="+se.Aa));const Bl=Gr[5];Bl!=null&&typeof Bl=="number"&&0<Bl&&(xe=1.5*Bl,se.L=xe,se.j.info("backChannelRequestTimeoutMs_="+xe)),xe=se;const Za=D.g;if(Za){const _o=Za.g?Za.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var st=xe.h;st.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(st.j=st.l,st.g=new Set,st.h&&(xa(st,st.h),st.h=null))}if(xe.D){const Yc=Za.g?Za.g.getResponseHeader("X-HTTP-Session-Id"):null;Yc&&(xe.ya=Yc,Hn(xe.I,xe.D,Yc))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-D.F,se.j.info("Handshake RTT: "+se.R+"ms")),xe=se;var Mt=D;if(xe.qa=G(xe,xe.J?xe.ia:null,xe.W),Mt.K){ti(xe.h,Mt);var Tr=Mt,xn=xe.L;xn&&(Tr.I=xn),Tr.B&&(an(Tr),Kt(Tr)),xe.g=Mt}else Rd(xe);0<se.i.length&&Dd(se)}else Gr[0]!="stop"&&Gr[0]!="close"||Ri(se,7);else se.G==3&&(Gr[0]=="stop"||Gr[0]=="close"?Gr[0]=="stop"?Ri(se,7):sc(se):Gr[0]!="noop"&&se.l&&se.l.ta(Gr),se.v=0)}}pn(4)}catch{}}var bo=class{constructor(D,ee){this.g=D,this.map=ee}};function As(D){this.l=D||10,o.PerformanceNavigationTiming?(D=o.performance.getEntriesByType("navigation"),D=0<D.length&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ei(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function js(D){return D.h?1:D.g?D.g.size:0}function vi(D,ee){return D.h?D.h==ee:D.g?D.g.has(ee):!1}function xa(D,ee){D.g?D.g.add(ee):D.h=ee}function ti(D,ee){D.h&&D.h==ee?D.h=null:D.g&&D.g.has(ee)&&D.g.delete(ee)}As.prototype.cancel=function(){if(this.i=Id(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function Id(D){if(D.h!=null)return D.i.concat(D.h.D);if(D.g!=null&&D.g.size!==0){let ee=D.i;for(const se of D.g.values())ee=ee.concat(se.D);return ee}return v(D.i)}function xh(D){if(D.V&&typeof D.V=="function")return D.V();if(typeof Map<"u"&&D instanceof Map||typeof Set<"u"&&D instanceof Set)return Array.from(D.values());if(typeof D=="string")return D.split("");if(l(D)){for(var ee=[],se=D.length,xe=0;xe<se;xe++)ee.push(D[xe]);return ee}ee=[],se=0;for(xe in D)ee[se++]=D[xe];return ee}function Uc(D){if(D.na&&typeof D.na=="function")return D.na();if(!D.V||typeof D.V!="function"){if(typeof Map<"u"&&D instanceof Map)return Array.from(D.keys());if(!(typeof Set<"u"&&D instanceof Set)){if(l(D)||typeof D=="string"){var ee=[];D=D.length;for(var se=0;se<D;se++)ee.push(se);return ee}ee=[],se=0;for(const xe in D)ee[se++]=xe;return ee}}}function qA(D,ee){if(D.forEach&&typeof D.forEach=="function")D.forEach(ee,void 0);else if(l(D)||typeof D=="string")Array.prototype.forEach.call(D,ee,void 0);else for(var se=Uc(D),xe=xh(D),ze=xe.length,st=0;st<ze;st++)ee.call(void 0,xe[st],se&&se[st],D)}var xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jd(D,ee){if(D){D=D.split("&");for(var se=0;se<D.length;se++){var xe=D[se].indexOf("="),ze=null;if(0<=xe){var st=D[se].substring(0,xe);ze=D[se].substring(xe+1)}else st=D[se];ee(st,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function jn(D){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,D instanceof jn){this.h=D.h,Qc(this,D.j),this.o=D.o,this.g=D.g,Hc(this,D.s),this.l=D.l;var ee=D.i,se=new El;se.i=ee.i,ee.g&&(se.g=new Map(ee.g),se.h=ee.h),wl(this,se),this.m=D.m}else D&&(ee=String(D).match(xi))?(this.h=!1,Qc(this,ee[1]||"",!0),this.o=yo(ee[2]||""),this.g=yo(ee[3]||"",!0),Hc(this,ee[4]),this.l=yo(ee[5]||"",!0),wl(this,ee[6]||"",!0),this.m=yo(ee[7]||"")):(this.h=!1,this.i=new El(null,this.h))}jn.prototype.toString=function(){var D=[],ee=this.j;ee&&D.push(ec(ee,WA,!0),":");var se=this.g;return(se||ee=="file")&&(D.push("//"),(ee=this.o)&&D.push(ec(ee,WA,!0),"@"),D.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&D.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&D.push("/"),D.push(ec(se,se.charAt(0)=="/"?tc:XA,!0))),(se=this.i.toString())&&D.push("?",se),(se=this.m)&&D.push("#",ec(se,rc)),D.join("")};function bi(D){return new jn(D)}function Qc(D,ee,se){D.j=se?yo(ee,!0):ee,D.j&&(D.j=D.j.replace(/:$/,""))}function Hc(D,ee){if(ee){if(ee=Number(ee),isNaN(ee)||0>ee)throw Error("Bad port number "+ee);D.s=ee}else D.s=null}function wl(D,ee,se){ee instanceof El?(D.i=ee,yh(D.i,D.h)):(se||(ee=ec(ee,Fd)),D.i=new El(ee,D.h))}function Hn(D,ee,se){D.i.set(ee,se)}function Vc(D){return Hn(D,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),D}function yo(D,ee){return D?ee?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function ec(D,ee,se){return typeof D=="string"?(D=encodeURI(D).replace(ee,bh),se&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function bh(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var WA=/[#\/\?@]/g,XA=/[#\?:]/g,tc=/[#\?]/g,Fd=/[#\?@]/g,rc=/#/g;function El(D,ee){this.h=this.g=null,this.i=D||null,this.j=!!ee}function ca(D){D.g||(D.g=new Map,D.h=0,D.i&&jd(D.i,function(ee,se){D.add(decodeURIComponent(ee.replace(/\+/g," ")),se)}))}e=El.prototype,e.add=function(D,ee){ca(this),this.i=null,D=_l(this,D);var se=this.g.get(D);return se||this.g.set(D,se=[]),se.push(ee),this.h+=1,this};function nc(D,ee){ca(D),ee=_l(D,ee),D.g.has(ee)&&(D.i=null,D.h-=D.g.get(ee).length,D.g.delete(ee))}function Cl(D,ee){return ca(D),ee=_l(D,ee),D.g.has(ee)}e.forEach=function(D,ee){ca(this),this.g.forEach(function(se,xe){se.forEach(function(ze){D.call(ee,ze,xe,this)},this)},this)},e.na=function(){ca(this);const D=Array.from(this.g.values()),ee=Array.from(this.g.keys()),se=[];for(let xe=0;xe<ee.length;xe++){const ze=D[xe];for(let st=0;st<ze.length;st++)se.push(ee[xe])}return se},e.V=function(D){ca(this);let ee=[];if(typeof D=="string")Cl(this,D)&&(ee=ee.concat(this.g.get(_l(this,D))));else{D=Array.from(this.g.values());for(let se=0;se<D.length;se++)ee=ee.concat(D[se])}return ee},e.set=function(D,ee){return ca(this),this.i=null,D=_l(this,D),Cl(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[ee]),this.h+=1,this},e.get=function(D,ee){return D?(D=this.V(D),0<D.length?String(D[0]):ee):ee};function Br(D,ee,se){nc(D,ee),0<se.length&&(D.i=null,D.g.set(_l(D,ee),v(se)),D.h+=se.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],ee=Array.from(this.g.keys());for(var se=0;se<ee.length;se++){var xe=ee[se];const st=encodeURIComponent(String(xe)),Mt=this.V(xe);for(xe=0;xe<Mt.length;xe++){var ze=st;Mt[xe]!==""&&(ze+="="+encodeURIComponent(String(Mt[xe]))),D.push(ze)}}return this.i=D.join("&")};function _l(D,ee){return ee=String(ee),D.j&&(ee=ee.toLowerCase()),ee}function yh(D,ee){ee&&!D.j&&(ca(D),D.i=null,D.g.forEach(function(se,xe){var ze=xe.toLowerCase();xe!=ze&&(nc(this,xe),Br(this,ze,se))},D)),D.j=ee}function Fi(D,ee){const se=new cr;if(o.Image){const xe=new Image;xe.onload=p(eo,se,"TestLoadImage: loaded",!0,ee,xe),xe.onerror=p(eo,se,"TestLoadImage: error",!1,ee,xe),xe.onabort=p(eo,se,"TestLoadImage: abort",!1,ee,xe),xe.ontimeout=p(eo,se,"TestLoadImage: timeout",!1,ee,xe),o.setTimeout(function(){xe.ontimeout&&xe.ontimeout()},1e4),xe.src=D}else ee(!1)}function wo(D,ee){const se=new cr,xe=new AbortController,ze=setTimeout(()=>{xe.abort(),eo(se,"TestPingServer: timeout",!1,ee)},1e4);fetch(D,{signal:xe.signal}).then(st=>{clearTimeout(ze),st.ok?eo(se,"TestPingServer: ok",!0,ee):eo(se,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(ze),eo(se,"TestPingServer: error",!1,ee)})}function eo(D,ee,se,xe,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),xe(se)}catch{}}function Sl(){this.g=new In}function Eo(D,ee,se){const xe=se||"";try{qA(D,function(ze,st){let Mt=ze;u(ze)&&(Mt=Cr(ze)),ee.push(xe+st+"="+encodeURIComponent(Mt))})}catch(ze){throw ee.push(xe+"type="+encodeURIComponent("_badmap")),ze}}function zc(D){this.l=D.Ub||null,this.j=D.eb||!1}g(zc,jr),zc.prototype.g=function(){return new ac(this.l,this.j)},zc.prototype.i=function(D){return function(){return D}}({});function ac(D,ee){mt.call(this),this.D=D,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(ac,mt),e=ac.prototype,e.open=function(D,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=D,this.A=ee,this.readyState=1,Oi(this)},e.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ee={headers:this.u,method:this.B,credentials:this.m,cache:void 0};D&&(ee.body=D),(this.D||o).fetch(new Request(this.A,ee)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},e.Sa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;YA(this)}else D.text().then(this.Ra.bind(this),this.ga.bind(this))};function YA(D){D.j.read().then(D.Pa.bind(D)).catch(D.ga.bind(D))}e.Pa=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var ee=D.value?D.value:new Uint8Array(0);(ee=this.v.decode(ee,{stream:!D.done}))&&(this.response=this.responseText+=ee)}D.done?Co(this):Oi(this),this.readyState==3&&YA(this)}},e.Ra=function(D){this.g&&(this.response=this.responseText=D,Co(this))},e.Qa=function(D){this.g&&(this.response=D,Co(this))},e.ga=function(){this.g&&Co(this)};function Co(D){D.readyState=4,D.l=null,D.j=null,D.v=null,Oi(D)}e.setRequestHeader=function(D,ee){this.u.append(D,ee)},e.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],ee=this.h.entries();for(var se=ee.next();!se.done;)se=se.value,D.push(se[0]+": "+se[1]),se=ee.next();return D.join(`\r
`)};function Oi(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(ac.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function Nl(D){let ee="";return F(D,function(se,xe){ee+=xe,ee+=":",ee+=se,ee+=`\r
`}),ee}function fs(D,ee,se){e:{for(xe in se){var xe=!1;break e}xe=!0}xe||(se=Nl(se),typeof D=="string"?se!=null&&encodeURIComponent(String(se)):Hn(D,ee,se))}function vn(D){mt.call(this),this.headers=new Map,this.o=D||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(vn,mt);var $c=/^https?$/i,kl=["POST","PUT"];e=vn.prototype,e.Ha=function(D){this.J=D},e.ea=function(D,ee,se,xe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);ee=ee?ee.toUpperCase():"GET",this.D=D,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Te.g(),this.v=this.o?vt(this.o):vt(Te),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ee,String(D),!0),this.B=!1}catch(st){JA(this,st);return}if(D=se||"",se=new Map(this.headers),xe)if(Object.getPrototypeOf(xe)===Object.prototype)for(var ze in xe)se.set(ze,xe[ze]);else if(typeof xe.keys=="function"&&typeof xe.get=="function")for(const st of xe.keys())se.set(st,xe.get(st));else throw Error("Unknown input type for opt_headers: "+String(xe));xe=Array.from(se.keys()).find(st=>st.toLowerCase()=="content-type"),ze=o.FormData&&D instanceof o.FormData,!(0<=Array.prototype.indexOf.call(kl,ee,void 0))||xe||ze||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[st,Mt]of se)this.g.setRequestHeader(st,Mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Di(this),this.u=!0,this.g.send(D),this.u=!1}catch(st){JA(this,st)}};function JA(D,ee){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=ee,D.m=5,Lu(D),nl(D)}function Lu(D){D.A||(D.A=!0,Bt(D,"complete"),Bt(D,"error"))}e.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=D||7,Bt(this,"complete"),Bt(this,"abort"),nl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nl(this,!0)),vn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Mu(this):this.bb())},e.bb=function(){Mu(this)};function Mu(D){if(D.h&&typeof i<"u"&&(!D.v[1]||hs(D)!=4||D.Z()!=2)){if(D.u&&hs(D)==4)Ot(D.Ea,0,D);else if(Bt(D,"readystatechange"),hs(D)==4){D.h=!1;try{const Mt=D.Z();e:switch(Mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var se;if(!(se=ee)){var xe;if(xe=Mt===0){var ze=String(D.D).match(xi)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),xe=!$c.test(ze?ze.toLowerCase():"")}se=xe}if(se)Bt(D,"complete"),Bt(D,"success");else{D.m=6;try{var st=2<hs(D)?D.g.statusText:""}catch{st=""}D.l=st+" ["+D.Z()+"]",Lu(D)}}finally{nl(D)}}}}function nl(D,ee){if(D.g){Di(D);const se=D.g,xe=D.v[0]?()=>{}:null;D.g=null,D.v=null,ee||Bt(D,"ready");try{se.onreadystatechange=xe}catch{}}}function Di(D){D.I&&(o.clearTimeout(D.I),D.I=null)}e.isActive=function(){return!!this.g};function hs(D){return D.g?D.g.readyState:0}e.Z=function(){try{return 2<hs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(D){if(this.g){var ee=this.g.responseText;return D&&ee.indexOf(D)==0&&(ee=ee.substring(D.length)),Vr(ee)}};function wh(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.H){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function Kc(D){const ee={};D=(D.g&&2<=hs(D)&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let xe=0;xe<D.length;xe++){if(_(D[xe]))continue;var se=O(D[xe]);const ze=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const st=ee[ze]||[];ee[ze]=st,st.push(se)}w(ee,function(xe){return xe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(D,ee,se){return se&&se.internalChannelParams&&se.internalChannelParams[D]||ee}function Gc(D){this.Aa=0,this.i=[],this.j=new cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yi("failFast",!1,D),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yi("baseRetryDelayMs",5e3,D),this.cb=yi("retryDelaySeedMs",1e4,D),this.Wa=yi("forwardChannelMaxRetries",2,D),this.wa=yi("forwardChannelRequestTimeoutMs",2e4,D),this.pa=D&&D.xmlHttpFactory||void 0,this.Xa=D&&D.Tb||void 0,this.Ca=D&&D.useFetchStreams||!1,this.L=void 0,this.J=D&&D.supportsCrossDomainXhr||!1,this.K="",this.h=new As(D&&D.concurrentRequestLimit),this.Da=new Sl,this.P=D&&D.fastHandshake||!1,this.O=D&&D.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=D&&D.Rb||!1,D&&D.xa&&this.j.xa(),D&&D.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&D&&D.detectBufferingProxy||!1,this.ja=void 0,D&&D.longPollingTimeout&&0<D.longPollingTimeout&&(this.ja=D.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Gc.prototype,e.la=8,e.G=1,e.connect=function(D,ee,se,xe){$t(0),this.W=D,this.H=ee||{},se&&xe!==void 0&&(this.H.OSID=se,this.H.OAID=xe),this.F=this.X,this.I=G(this,null,this.W),Dd(this)};function sc(D){if(Uu(D),D.G==3){var ee=D.U++,se=bi(D.I);if(Hn(se,"SID",D.K),Hn(se,"RID",ee),Hn(se,"TYPE","terminate"),qc(D,se),ee=new ut(D,D.j,ee),ee.L=2,ee.v=Vc(bi(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(ee.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=ee.v,se=!0),se||(ee.g=de(ee.j,null),ee.g.ea(ee.v)),ee.F=Date.now(),Kt(ee)}Pd(D)}function Od(D){D.g&&(Wc(D),D.g.cancel(),D.g=null)}function Uu(D){Od(D),D.u&&(o.clearTimeout(D.u),D.u=null),ic(D),D.h.cancel(),D.s&&(typeof D.s=="number"&&o.clearTimeout(D.s),D.s=null)}function Dd(D){if(!ei(D.h)&&!D.s){D.s=!0;var ee=D.Ga;Z||q(),H||(Z(),H=!0),V.add(ee,D),D.B=0}}function ZA(D,ee){return js(D.h)>=D.h.j-(D.s?1:0)?!1:D.s?(D.i=ee.D.concat(D.i),!0):D.G==1||D.G==2||D.B>=(D.Va?0:D.Wa)?!1:(D.s=en(h(D.Ga,D,ee),zu(D,D.B)),D.B++,!0)}e.Ga=function(D){if(this.s)if(this.s=null,this.G==1){if(!D){this.U=Math.floor(1e5*Math.random()),D=this.U++;const ze=new ut(this,this.j,D);let st=this.o;if(this.S&&(st?(st=C(st),R(st,this.S)):st=this.S),this.m!==null||this.O||(ze.H=st,st=null),this.P)e:{for(var ee=0,se=0;se<this.i.length;se++){t:{var xe=this.i[se];if("__data__"in xe.map&&(xe=xe.map.__data__,typeof xe=="string")){xe=xe.length;break t}xe=void 0}if(xe===void 0)break;if(ee+=xe,4096<ee){ee=se;break e}if(ee===4096||se===this.i.length-1){ee=se+1;break e}}ee=1e3}else ee=1e3;ee=Hu(this,ze,ee),se=bi(this.I),Hn(se,"RID",D),Hn(se,"CVER",22),this.D&&Hn(se,"X-HTTP-Session-Id",this.D),qc(this,se),st&&(this.O?ee="headers="+encodeURIComponent(String(Nl(st)))+"&"+ee:this.m&&fs(se,this.m,st)),xa(this.h,ze),this.Ua&&Hn(se,"TYPE","init"),this.P?(Hn(se,"$req",ee),Hn(se,"SID","null"),ze.T=!0,Tt(ze,se,null)):Tt(ze,se,ee),this.G=2}}else this.G==3&&(D?Qu(this,D):this.i.length==0||ei(this.h)||Qu(this))};function Qu(D,ee){var se;ee?se=ee.l:se=D.U++;const xe=bi(D.I);Hn(xe,"SID",D.K),Hn(xe,"RID",se),Hn(xe,"AID",D.T),qc(D,xe),D.m&&D.o&&fs(xe,D.m,D.o),se=new ut(D,D.j,se,D.B+1),D.m===null&&(se.H=D.o),ee&&(D.i=ee.D.concat(D.i)),ee=Hu(D,se,1e3),se.I=Math.round(.5*D.wa)+Math.round(.5*D.wa*Math.random()),xa(D.h,se),Tt(se,xe,ee)}function qc(D,ee){D.H&&F(D.H,function(se,xe){Hn(ee,xe,se)}),D.l&&qA({},function(se,xe){Hn(ee,xe,se)})}function Hu(D,ee,se){se=Math.min(D.i.length,se);var xe=D.l?h(D.l.Na,D.l,D):null;e:{var ze=D.i;let st=-1;for(;;){const Mt=["count="+se];st==-1?0<se?(st=ze[0].g,Mt.push("ofs="+st)):st=0:Mt.push("ofs="+st);let Tr=!0;for(let xn=0;xn<se;xn++){let Gr=ze[xn].g;const Vn=ze[xn].map;if(Gr-=st,0>Gr)st=Math.max(0,ze[xn].g-100),Tr=!1;else try{Eo(Vn,Mt,"req"+Gr+"_")}catch{xe&&xe(Vn)}}if(Tr){xe=Mt.join("&");break e}}}return D=D.i.splice(0,se),ee.D=D,xe}function Rd(D){if(!D.g&&!D.u){D.Y=1;var ee=D.Fa;Z||q(),H||(Z(),H=!0),V.add(ee,D),D.v=0}}function Vu(D){return D.g||D.u||3<=D.v?!1:(D.Y++,D.u=en(h(D.Fa,D),zu(D,D.v)),D.v++,!0)}e.Fa=function(){if(this.u=null,Eh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var D=2*this.R;this.j.info("BP detection timer enabled: "+D),this.A=en(h(this.ab,this),D)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Od(this),Eh(this))};function Wc(D){D.A!=null&&(o.clearTimeout(D.A),D.A=null)}function Eh(D){D.g=new ut(D,D.j,"rpc",D.Y),D.m===null&&(D.g.H=D.o),D.g.O=0;var ee=bi(D.qa);Hn(ee,"RID","rpc"),Hn(ee,"SID",D.K),Hn(ee,"AID",D.T),Hn(ee,"CI",D.F?"0":"1"),!D.F&&D.ja&&Hn(ee,"TO",D.ja),Hn(ee,"TYPE","xmlhttp"),qc(D,ee),D.m&&D.o&&fs(ee,D.m,D.o),D.L&&(D.g.I=D.L);var se=D.g;D=D.ia,se.L=1,se.v=Vc(bi(ee)),se.m=null,se.P=!0,Vt(se,D)}e.Za=function(){this.C!=null&&(this.C=null,Od(this),Vu(this),$t(19))};function ic(D){D.C!=null&&(o.clearTimeout(D.C),D.C=null)}function Xc(D,ee){var se=null;if(D.g==ee){ic(D),Wc(D),D.g=null;var xe=2}else if(vi(D.h,ee))se=ee.D,ti(D.h,ee),xe=1;else return;if(D.G!=0){if(ee.o)if(xe==1){se=ee.m?ee.m.length:0,ee=Date.now()-ee.F;var ze=D.B;xe=Pr(),Bt(xe,new tn(xe,se)),Dd(D)}else Rd(D);else if(ze=ee.s,ze==3||ze==0&&0<ee.X||!(xe==1&&ZA(D,ee)||xe==2&&Vu(D)))switch(se&&0<se.length&&(ee=D.h,ee.i=ee.i.concat(se)),ze){case 1:Ri(D,5);break;case 4:Ri(D,10);break;case 3:Ri(D,6);break;default:Ri(D,2)}}}function zu(D,ee){let se=D.Ta+Math.floor(Math.random()*D.cb);return D.isActive()||(se*=2),se*ee}function Ri(D,ee){if(D.j.info("Error code "+ee),ee==2){var se=h(D.fb,D),xe=D.Xa;const ze=!xe;xe=new jn(xe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Qc(xe,"https"),Vc(xe),ze?Fi(xe.toString(),se):wo(xe.toString(),se)}else $t(2);D.G=0,D.l&&D.l.sa(ee),Pd(D),Uu(D)}e.fb=function(D){D?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Pd(D){if(D.G=0,D.ka=[],D.l){const ee=Id(D.h);(ee.length!=0||D.i.length!=0)&&(b(D.ka,ee),b(D.ka,D.i),D.h.i.length=0,v(D.i),D.i.length=0),D.l.ra()}}function G(D,ee,se){var xe=se instanceof jn?bi(se):new jn(se);if(xe.g!="")ee&&(xe.g=ee+"."+xe.g),Hc(xe,xe.s);else{var ze=o.location;xe=ze.protocol,ee=ee?ee+"."+ze.hostname:ze.hostname,ze=+ze.port;var st=new jn(null);xe&&Qc(st,xe),ee&&(st.g=ee),ze&&Hc(st,ze),se&&(st.l=se),xe=st}return se=D.D,ee=D.ya,se&&ee&&Hn(xe,se,ee),Hn(xe,"VER",D.la),qc(D,xe),xe}function de(D,ee,se){if(ee&&!D.J)throw Error("Can't create secondary domain capable XhrIo object.");return ee=D.Ca&&!D.pa?new vn(new zc({eb:se})):new vn(D.pa),ee.Ha(D.J),ee}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}e=Fe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Le(){}Le.prototype.g=function(D,ee){return new Ke(D,ee)};function Ke(D,ee){mt.call(this),this.g=new Gc(ee),this.l=D,this.h=ee&&ee.messageUrlParams||null,D=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(D?D["X-WebChannel-Content-Type"]=ee.messageContentType:D={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.va&&(D?D["X-WebChannel-Client-Profile"]=ee.va:D={"X-WebChannel-Client-Profile":ee.va}),this.g.S=D,(D=ee&&ee.Sb)&&!_(D)&&(this.g.m=D),this.v=ee&&ee.supportsCrossDomainXhr||!1,this.u=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!_(ee)&&(this.g.D=ee,D=this.h,D!==null&&ee in D&&(D=this.h,ee in D&&delete D[ee])),this.j=new Jt(this)}g(Ke,mt),Ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){sc(this.g)},Ke.prototype.o=function(D){var ee=this.g;if(typeof D=="string"){var se={};se.__data__=D,D=se}else this.u&&(se={},se.__data__=Cr(D),D=se);ee.i.push(new bo(ee.Ya++,D)),ee.G==3&&Dd(ee)},Ke.prototype.N=function(){this.g.l=null,delete this.j,sc(this.g),delete this.g,Ke.aa.N.call(this)};function xt(D){gt.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var ee=D.__sm__;if(ee){e:{for(const se in ee){D=se;break e}D=void 0}(this.i=D)&&(D=this.i,ee=ee!==null&&D in ee?ee[D]:void 0),this.data=ee}else this.data=D}g(xt,gt);function Pt(){dt.call(this),this.status=1}g(Pt,dt);function Jt(D){this.g=D}g(Jt,Fe),Jt.prototype.ua=function(){Bt(this.g,"a")},Jt.prototype.ta=function(D){Bt(this.g,new xt(D))},Jt.prototype.sa=function(D){Bt(this.g,new Pt)},Jt.prototype.ra=function(){Bt(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,gX=function(){return new Le},pX=function(){return Pr()},mX=Dt,qI={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,QC=Ce,Ne.COMPLETE="complete",hX=Ne,pt.EventType=Je,Je.OPEN="a",Je.CLOSE="b",Je.ERROR="c",Je.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Cb=pt,vn.prototype.listenOnce=vn.prototype.L,vn.prototype.getLastError=vn.prototype.Ka,vn.prototype.getLastErrorCode=vn.prototype.Ba,vn.prototype.getStatus=vn.prototype.Z,vn.prototype.getResponseJson=vn.prototype.Oa,vn.prototype.getResponseText=vn.prototype.oa,vn.prototype.send=vn.prototype.ea,vn.prototype.setWithCredentials=vn.prototype.Ha,fX=vn}).apply(typeof cE<"u"?cE:typeof self<"u"?self:typeof window<"u"?window:{});const SU="@firebase/firestore",NU="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Uo.UNAUTHENTICATED=new Uo(null),Uo.GOOGLE_CREDENTIALS=new Uo("google-credentials-uid"),Uo.FIRST_PARTY=new Uo("first-party-uid"),Uo.MOCK_USER=new Uo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dx="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=new Q6("@firebase/firestore");function cv(){return Tp.logLevel}function lr(e,...t){if(Tp.logLevel<=Nn.DEBUG){const r=t.map(J6);Tp.debug(`Firestore (${Dx}): ${e}`,...r)}}function Wf(e,...t){if(Tp.logLevel<=Nn.ERROR){const r=t.map(J6);Tp.error(`Firestore (${Dx}): ${e}`,...r)}}function rx(e,...t){if(Tp.logLevel<=Nn.WARN){const r=t.map(J6);Tp.warn(`Firestore (${Dx}): ${e}`,...r)}}function J6(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,vX(e,n,r)}function vX(e,t,r){let n=`FIRESTORE (${Dx}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Wf(n),new Error(n)}function oa(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||vX(t,a,n)}function Zr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends _d{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xX{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class w0e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Uo.UNAUTHENTICATED))}shutdown(){}}class E0e{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class C0e{constructor(t){this.t=t,this.currentUser=Uo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){oa(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new Lf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Lf,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{lr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(lr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Lf)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(lr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(oa(typeof n.accessToken=="string",31837,{l:n}),new xX(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return oa(t===null||typeof t=="string",2055,{h:t}),new Uo(t)}}class _0e{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Uo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S0e{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new _0e(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Uo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kU{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N0e{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){oa(this.o===void 0,3512);const n=s=>{s.error!=null&&lr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,lr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{lr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):lr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kU(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(oa(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new kU(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0e(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=k0e(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function kn(e,t){return e<t?-1:e>t?1:0}function WI(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return iB(a)===iB(s)?kn(a,s):iB(a)?1:-1}return kn(e.length,t.length)}const B0e=55296,T0e=57343;function iB(e){const t=e.charCodeAt(0);return t>=B0e&&t<=T0e}function nx(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU="__name__";class fA{constructor(t,r,n){r===void 0?r=0:r>t.length&&Hr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Hr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return fA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof fA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=fA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return kn(t.length,r.length)}static compareSegments(t,r){const n=fA.isNumericId(t),a=fA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?fA.extractNumericId(t).compare(fA.extractNumericId(r)):WI(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return j0.fromString(t.substring(4,t.length-2))}}class ka extends fA{construct(t,r,n){return new ka(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Xt(wt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new ka(r)}static emptyPath(){return new ka([])}}const I0e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mo extends fA{construct(t,r,n){return new mo(t,r,n)}static isValidIdentifier(t){return I0e.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===BU}static keyField(){return new mo([BU])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Xt(wt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Xt(wt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Xt(wt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Xt(wt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new mo(r)}static emptyPath(){return new mo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t){this.path=t}static fromPath(t){return new vr(ka.fromString(t))}static fromName(t){return new vr(ka.fromString(t).popFirst(5))}static empty(){return new vr(ka.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ka.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return ka.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vr(new ka(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bX(e,t,r){if(!r)throw new Xt(wt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function j0e(e,t,r,n){if(t===!0&&n===!0)throw new Xt(wt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function TU(e){if(!vr.isDocumentKey(e))throw new Xt(wt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function IU(e){if(vr.isDocumentKey(e))throw new Xt(wt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function yX(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function L5(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hr(12329,{type:typeof e})}function ml(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(wt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=L5(e);throw new Xt(wt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function F0e(e,t){if(t<=0)throw new Xt(wt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(e,t){const r={typeString:e};return t&&(r.value=t),r}function bw(e,t){if(!yX(e))throw new Xt(wt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Xt(wt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=-62135596800,FU=1e6;class yr{static now(){return yr.fromMillis(Date.now())}static fromDate(t){return yr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*FU);return new yr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Xt(wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Xt(wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<jU)throw new Xt(wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FU}_compareTo(t){return this.seconds===t.seconds?kn(this.nanoseconds,t.nanoseconds):kn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(bw(t,yr._jsonSchema))return new yr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-jU;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yr._jsonSchemaVersion="firestore/timestamp/1.0",yr._jsonSchema={type:mi("string",yr._jsonSchemaVersion),seconds:mi("number"),nanoseconds:mi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{static fromTimestamp(t){return new Wr(t)}static min(){return new Wr(new yr(0,0))}static max(){return new Wr(new yr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=-1;function O0e(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Wr.fromTimestamp(n===1e9?new yr(r+1,0):new yr(r,n));return new z0(a,vr.empty(),t)}function D0e(e){return new z0(e.readTime,e.key,wy)}class z0{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new z0(Wr.min(),vr.empty(),wy)}static max(){return new z0(Wr.max(),vr.empty(),wy)}}function R0e(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=vr.comparator(e.documentKey,t.documentKey),r!==0?r:kn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L0e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(e){if(e.code!==wt.FAILED_PRECONDITION||e.message!==P0e)throw e;lr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Hr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new jt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof jt?r:jt.resolve(r)}catch(r){return jt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):jt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):jt.reject(r)}static resolve(t){return new jt((r,n)=>{r(t)})}static reject(t){return new jt((r,n)=>{n(t)})}static waitFor(t){return new jt((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},l=>n(l))}),i=!0,s===a&&r()})}static or(t){let r=jt.resolve(!1);for(const n of t)r=r.next(a=>a?jt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new jt((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new jt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function M0e(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Px(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}M5.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=-1;function U5(e){return e==null}function F_(e){return e===0&&1/e==-1/0}function U0e(e){return typeof e=="number"&&Number.isInteger(e)&&!F_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wX="";function Q0e(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=OU(t)),t=H0e(e.get(r),t);return OU(t)}function H0e(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case wX:r+="";break;default:r+=s}}return r}function OU(e){return e+wX+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function om(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function EX(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t,r){this.comparator=t,this.root=r||Ao.EMPTY}insert(t,r){return new is(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ao.BLACK,null,null))}remove(t){return new is(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ao.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new uE(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new uE(this.root,t,this.comparator,!1)}getReverseIterator(){return new uE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new uE(this.root,t,this.comparator,!0)}}class uE{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ao{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??Ao.RED,this.left=a??Ao.EMPTY,this.right=s??Ao.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new Ao(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ao.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return Ao.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ao.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ao.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Hr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Hr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Hr(27949);return t+(this.isRed()?0:1)}}Ao.EMPTY=null,Ao.RED=!0,Ao.BLACK=!1;Ao.EMPTY=new class{constructor(){this.size=0}get key(){throw Hr(57766)}get value(){throw Hr(16141)}get color(){throw Hr(16727)}get left(){throw Hr(29726)}get right(){throw Hr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new Ao(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this.comparator=t,this.data=new is(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new RU(this.data.getIterator())}getIteratorFrom(t){return new RU(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Ni)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Ni(this.comparator);return r.data=t,r}}class RU{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t){this.fields=t,t.sort(mo.comparator)}static empty(){return new kc([])}unionWith(t){let r=new Ni(mo.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new kc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return nx(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new CX("Invalid base64 string: "+s):s}}(t);return new vo(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new vo(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}vo.EMPTY_BYTE_STRING=new vo("");const V0e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $0(e){if(oa(!!e,39018),typeof e=="string"){let t=0;const r=V0e.exec(e);if(oa(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Vs(e.seconds),nanos:Vs(e.nanos)}}function Vs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function K0(e){return typeof e=="string"?vo.fromBase64String(e):vo.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _X="server_timestamp",SX="__type__",NX="__previous_value__",kX="__local_write_time__";function Q5(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[SX])==null?void 0:n.stringValue)===_X}function H5(e){const t=e.mapValue.fields[NX];return Q5(t)?H5(t):t}function Ey(e){const t=$0(e.mapValue.fields[kX].timestampValue);return new yr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0e{constructor(t,r,n,a,s,i,o,l,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const O_="(default)";class Cy{constructor(t,r){this.projectId=t,this.database=r||O_}static empty(){return new Cy("","")}get isDefaultDatabase(){return this.database===O_}isEqual(t){return t instanceof Cy&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BX="__type__",$0e="__max__",dE={mapValue:{}},TX="__vector__",D_="value";function G0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Q5(e)?4:G0e(e)?9007199254740991:K0e(e)?10:11:Hr(28295,{value:e})}function PA(e,t){if(e===t)return!0;const r=G0(e);if(r!==G0(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ey(e).isEqual(Ey(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=$0(a.timestampValue),o=$0(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return K0(a.bytesValue).isEqual(K0(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Vs(a.geoPointValue.latitude)===Vs(s.geoPointValue.latitude)&&Vs(a.geoPointValue.longitude)===Vs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Vs(a.integerValue)===Vs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Vs(a.doubleValue),o=Vs(s.doubleValue);return i===o?F_(i)===F_(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return nx(e.arrayValue.values||[],t.arrayValue.values||[],PA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(DU(i)!==DU(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!PA(i[l],o[l])))return!1;return!0}(e,t);default:return Hr(52216,{left:e})}}function _y(e,t){return(e.values||[]).find(r=>PA(r,t))!==void 0}function ax(e,t){if(e===t)return 0;const r=G0(e),n=G0(t);if(r!==n)return kn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return kn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=Vs(s.integerValue||s.doubleValue),l=Vs(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(e,t);case 3:return PU(e.timestampValue,t.timestampValue);case 4:return PU(Ey(e),Ey(t));case 5:return WI(e.stringValue,t.stringValue);case 6:return function(s,i){const o=K0(s),l=K0(i);return o.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=kn(o[u],l[u]);if(d!==0)return d}return kn(o.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=kn(Vs(s.latitude),Vs(i.latitude));return o!==0?o:kn(Vs(s.longitude),Vs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return LU(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,p,g,v;const o=s.fields||{},l=i.fields||{},u=(h=o[D_])==null?void 0:h.arrayValue,d=(p=l[D_])==null?void 0:p.arrayValue,f=kn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((v=d==null?void 0:d.values)==null?void 0:v.length)||0);return f!==0?f:LU(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===dE.mapValue&&i===dE.mapValue)return 0;if(s===dE.mapValue)return 1;if(i===dE.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const h=WI(l[f],d[f]);if(h!==0)return h;const p=ax(o[l[f]],u[d[f]]);if(p!==0)return p}return kn(l.length,d.length)}(e.mapValue,t.mapValue);default:throw Hr(23264,{he:r})}}function PU(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return kn(e,t);const r=$0(e),n=$0(t),a=kn(r.seconds,n.seconds);return a!==0?a:kn(r.nanos,n.nanos)}function LU(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=ax(r[a],n[a]);if(s)return s}return kn(r.length,n.length)}function sx(e){return XI(e)}function XI(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=$0(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return K0(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return vr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=XI(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${XI(r.fields[i])}`;return a+"}"}(e.mapValue):Hr(61005,{value:e})}function HC(e){switch(G0(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=H5(e);return t?16+HC(t):16;case 5:return 2*e.stringValue.length;case 6:return K0(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+HC(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return om(n.fields,(s,i)=>{a+=s.length+HC(i)}),a}(e.mapValue);default:throw Hr(13486,{value:e})}}function R_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function YI(e){return!!e&&"integerValue"in e}function tO(e){return!!e&&"arrayValue"in e}function MU(e){return!!e&&"nullValue"in e}function UU(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function VC(e){return!!e&&"mapValue"in e}function K0e(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[BX])==null?void 0:n.stringValue)===TX}function Gb(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return om(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Gb(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Gb(e.arrayValue.values[r]);return t}return{...e}}function G0e(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===$0e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t){this.value=t}static empty(){return new zl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!VC(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gb(r)}setAll(t){let r=mo.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Gb(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());VC(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return PA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];VC(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){om(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new zl(Gb(this.value))}}function IX(e){const t=[];return om(e.fields,(r,n)=>{const a=new mo([r]);if(VC(n)){const s=IX(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new kc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new zo(t,0,Wr.min(),Wr.min(),Wr.min(),zl.empty(),0)}static newFoundDocument(t,r,n,a){return new zo(t,1,r,Wr.min(),n,a,0)}static newNoDocument(t,r){return new zo(t,2,r,Wr.min(),Wr.min(),zl.empty(),0)}static newUnknownDocument(t,r){return new zo(t,3,r,Wr.min(),Wr.min(),zl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Wr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t,r){this.position=t,this.inclusive=r}}function QU(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=vr.comparator(vr.fromName(i.referenceValue),r.key):n=ax(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function HU(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!PA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t,r="asc"){this.field=t,this.dir=r}}function q0e(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{}class hi extends jX{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new X0e(t,r,n):r==="array-contains"?new Z0e(t,n):r==="in"?new eme(t,n):r==="not-in"?new tme(t,n):r==="array-contains-any"?new rme(t,n):new hi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new Y0e(t,n):new J0e(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(ax(r,this.value)):r!==null&&G0(this.value)===G0(r)&&this.matchesComparison(ax(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cd extends jX{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Cd(t,r)}matches(t){return FX(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function FX(e){return e.op==="and"}function OX(e){return W0e(e)&&FX(e)}function W0e(e){for(const t of e.filters)if(t instanceof Cd)return!1;return!0}function JI(e){if(e instanceof hi)return e.field.canonicalString()+e.op.toString()+sx(e.value);if(OX(e))return e.filters.map(t=>JI(t)).join(",");{const t=e.filters.map(r=>JI(r)).join(",");return`${e.op}(${t})`}}function DX(e,t){return e instanceof hi?function(n,a){return a instanceof hi&&n.op===a.op&&n.field.isEqual(a.field)&&PA(n.value,a.value)}(e,t):e instanceof Cd?function(n,a){return a instanceof Cd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&DX(i,a.filters[o]),!0):!1}(e,t):void Hr(19439)}function RX(e){return e instanceof hi?function(r){return`${r.field.canonicalString()} ${r.op} ${sx(r.value)}`}(e):e instanceof Cd?function(r){return r.op.toString()+" {"+r.getFilters().map(RX).join(" ,")+"}"}(e):"Filter"}class X0e extends hi{constructor(t,r,n){super(t,r,n),this.key=vr.fromName(n.referenceValue)}matches(t){const r=vr.comparator(t.key,this.key);return this.matchesComparison(r)}}class Y0e extends hi{constructor(t,r){super(t,"in",r),this.keys=PX("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class J0e extends hi{constructor(t,r){super(t,"not-in",r),this.keys=PX("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function PX(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>vr.fromName(n.referenceValue))}class Z0e extends hi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return tO(r)&&_y(r.arrayValue,this.value)}}class eme extends hi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&_y(this.value.arrayValue,r)}}class tme extends hi{constructor(t,r){super(t,"not-in",r)}matches(t){if(_y(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!_y(this.value.arrayValue,r)}}class rme extends hi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!tO(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>_y(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nme{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function VU(e,t=null,r=[],n=[],a=null,s=null,i=null){return new nme(e,t,r,n,a,s,i)}function rO(e){const t=Zr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>JI(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),U5(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>sx(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>sx(n)).join(",")),t.Te=r}return t.Te}function nO(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!q0e(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!DX(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!HU(e.startAt,t.startAt)&&HU(e.endAt,t.endAt)}function ZI(e){return vr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,l=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ame(e,t,r,n,a,s,i,o){return new Wp(e,t,r,n,a,s,i,o)}function V5(e){return new Wp(e)}function zU(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function aO(e){return e.collectionGroup!==null}function Dv(e){const t=Zr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ni(mo.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Sy(s,n))}),r.has(mo.keyField().canonicalString())||t.Ie.push(new Sy(mo.keyField(),n))}return t.Ie}function BA(e){const t=Zr(e);return t.Ee||(t.Ee=sme(t,Dv(e))),t.Ee}function sme(e,t){if(e.limitType==="F")return VU(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Sy(a.field,s)});const r=e.endAt?new ix(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new ix(e.startAt.position,e.startAt.inclusive):null;return VU(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function ej(e,t){const r=e.filters.concat([t]);return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function P_(e,t,r){return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function z5(e,t){return nO(BA(e),BA(t))&&e.limitType===t.limitType}function LX(e){return`${rO(BA(e))}|lt:${e.limitType}`}function uv(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>RX(a)).join(", ")}]`),U5(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>sx(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>sx(a)).join(",")),`Target(${n})`}(BA(e))}; limitType=${e.limitType})`}function $5(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):vr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Dv(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,l){const u=QU(i,o,l);return i.inclusive?u<=0:u<0}(n.startAt,Dv(n),a)||n.endAt&&!function(i,o,l){const u=QU(i,o,l);return i.inclusive?u>=0:u>0}(n.endAt,Dv(n),a))}(e,t)}function ime(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function MX(e){return(t,r)=>{let n=!1;for(const a of Dv(e)){const s=ome(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function ome(e,t,r){const n=e.field.isKeyField()?vr.comparator(t.key,r.key):function(s,i,o){const l=i.data.field(s),u=o.data.field(s);return l!==null&&u!==null?ax(l,u):Hr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Hr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){om(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return EX(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lme=new is(vr.comparator);function Xf(){return lme}const UX=new is(vr.comparator);function _b(...e){let t=UX;for(const r of e)t=t.insert(r.key,r);return t}function QX(e){let t=UX;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function tp(){return qb()}function HX(){return qb()}function qb(){return new Xp(e=>e.toString(),(e,t)=>e.isEqual(t))}const cme=new is(vr.comparator),ume=new Ni(vr.comparator);function Bn(...e){let t=ume;for(const r of e)t=t.add(r);return t}const dme=new Ni(kn);function Ame(){return dme}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:F_(t)?"-0":t}}function VX(e){return{integerValue:""+e}}function fme(e,t){return U0e(t)?VX(t):sO(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this._=void 0}}function hme(e,t,r){return e instanceof Ny?function(a,s){const i={fields:{[SX]:{stringValue:_X},[kX]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&Q5(s)&&(s=H5(s)),s&&(i.fields[NX]=s),{mapValue:i}}(r,t):e instanceof ox?$X(e,t):e instanceof ky?KX(e,t):function(a,s){const i=zX(a,s),o=$U(i)+$U(a.Ae);return YI(i)&&YI(a.Ae)?VX(o):sO(a.serializer,o)}(e,t)}function mme(e,t,r){return e instanceof ox?$X(e,t):e instanceof ky?KX(e,t):r}function zX(e,t){return e instanceof L_?function(n){return YI(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Ny extends K5{}class ox extends K5{constructor(t){super(),this.elements=t}}function $X(e,t){const r=GX(t);for(const n of e.elements)r.some(a=>PA(a,n))||r.push(n);return{arrayValue:{values:r}}}class ky extends K5{constructor(t){super(),this.elements=t}}function KX(e,t){let r=GX(t);for(const n of e.elements)r=r.filter(a=>!PA(a,n));return{arrayValue:{values:r}}}class L_ extends K5{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function $U(e){return Vs(e.integerValue||e.doubleValue)}function GX(e){return tO(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qX{constructor(t,r){this.field=t,this.transform=r}}function pme(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof ox&&a instanceof ox||n instanceof ky&&a instanceof ky?nx(n.elements,a.elements,PA):n instanceof L_&&a instanceof L_?PA(n.Ae,a.Ae):n instanceof Ny&&a instanceof Ny}(e.transform,t.transform)}class gme{constructor(t,r){this.version=t,this.transformResults=r}}class pl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new pl}static exists(t){return new pl(void 0,t)}static updateTime(t){return new pl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function zC(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class G5{}function WX(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new q5(e.key,pl.none()):new yw(e.key,e.data,pl.none());{const r=e.data,n=zl.empty();let a=new Ni(mo.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new lm(e.key,n,new kc(a.toArray()),pl.none())}}function vme(e,t,r){e instanceof yw?function(a,s,i){const o=a.value.clone(),l=GU(a.fieldTransforms,s,i.transformResults);o.setAll(l),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof lm?function(a,s,i){if(!zC(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=GU(a.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(XX(a)),l.setAll(o),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function Wb(e,t,r,n){return e instanceof yw?function(s,i,o,l){if(!zC(s.precondition,i))return o;const u=s.value.clone(),d=qU(s.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof lm?function(s,i,o,l){if(!zC(s.precondition,i))return o;const u=qU(s.fieldTransforms,l,i),d=i.data;return d.setAll(XX(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return zC(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function xme(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=zX(n.transform,a||null);s!=null&&(r===null&&(r=zl.empty()),r.set(n.field,s))}return r||null}function KU(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&nx(n,a,(s,i)=>pme(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class yw extends G5{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class lm extends G5{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XX(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function GU(e,t,r){const n=new Map;oa(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,mme(i,o,r[a]))}return n}function qU(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,hme(s,i,t))}return n}class q5 extends G5{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bme extends G5{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yme{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&vme(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=Wb(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=Wb(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=HX();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const l=WX(i,o);l!==null&&n.set(a.key,l),i.isValidDocument()||i.convertToNoDocument(Wr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Bn())}isEqual(t){return this.batchId===t.batchId&&nx(this.mutations,t.mutations,(r,n)=>KU(r,n))&&nx(this.baseMutations,t.baseMutations,(r,n)=>KU(r,n))}}class iO{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){oa(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return cme}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new iO(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wme{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eme{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi,Pn;function Cme(e){switch(e){case wt.OK:return Hr(64938);case wt.CANCELLED:case wt.UNKNOWN:case wt.DEADLINE_EXCEEDED:case wt.RESOURCE_EXHAUSTED:case wt.INTERNAL:case wt.UNAVAILABLE:case wt.UNAUTHENTICATED:return!1;case wt.INVALID_ARGUMENT:case wt.NOT_FOUND:case wt.ALREADY_EXISTS:case wt.PERMISSION_DENIED:case wt.FAILED_PRECONDITION:case wt.ABORTED:case wt.OUT_OF_RANGE:case wt.UNIMPLEMENTED:case wt.DATA_LOSS:return!0;default:return Hr(15467,{code:e})}}function YX(e){if(e===void 0)return Wf("GRPC error has no .code"),wt.UNKNOWN;switch(e){case oi.OK:return wt.OK;case oi.CANCELLED:return wt.CANCELLED;case oi.UNKNOWN:return wt.UNKNOWN;case oi.DEADLINE_EXCEEDED:return wt.DEADLINE_EXCEEDED;case oi.RESOURCE_EXHAUSTED:return wt.RESOURCE_EXHAUSTED;case oi.INTERNAL:return wt.INTERNAL;case oi.UNAVAILABLE:return wt.UNAVAILABLE;case oi.UNAUTHENTICATED:return wt.UNAUTHENTICATED;case oi.INVALID_ARGUMENT:return wt.INVALID_ARGUMENT;case oi.NOT_FOUND:return wt.NOT_FOUND;case oi.ALREADY_EXISTS:return wt.ALREADY_EXISTS;case oi.PERMISSION_DENIED:return wt.PERMISSION_DENIED;case oi.FAILED_PRECONDITION:return wt.FAILED_PRECONDITION;case oi.ABORTED:return wt.ABORTED;case oi.OUT_OF_RANGE:return wt.OUT_OF_RANGE;case oi.UNIMPLEMENTED:return wt.UNIMPLEMENTED;case oi.DATA_LOSS:return wt.DATA_LOSS;default:return Hr(39323,{code:e})}}(Pn=oi||(oi={}))[Pn.OK=0]="OK",Pn[Pn.CANCELLED=1]="CANCELLED",Pn[Pn.UNKNOWN=2]="UNKNOWN",Pn[Pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pn[Pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pn[Pn.NOT_FOUND=5]="NOT_FOUND",Pn[Pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pn[Pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pn[Pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pn[Pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pn[Pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pn[Pn.ABORTED=10]="ABORTED",Pn[Pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pn[Pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pn[Pn.INTERNAL=13]="INTERNAL",Pn[Pn.UNAVAILABLE=14]="UNAVAILABLE",Pn[Pn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _me(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sme=new j0([4294967295,4294967295],0);function WU(e){const t=_me().encode(e),r=new AX;return r.update(t),new Uint8Array(r.digest())}function XU(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new j0([r,n],0),new j0([a,s],0)]}class oO{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Sb(`Invalid padding: ${r}`);if(n<0)throw new Sb(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Sb(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Sb(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=j0.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(j0.fromNumber(n)));return a.compare(Sme)===1&&(a=new j0([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=WU(t),[n,a]=XU(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new oO(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=WU(t),[n,a]=XU(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Sb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,ww.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new W5(Wr.min(),a,new is(kn),Xf(),Bn())}}class ww{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new ww(n,r,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class JX{constructor(t,r){this.targetId=t,this.Ce=r}}class ZX{constructor(t,r,n=vo.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class YU{constructor(){this.ve=0,this.Fe=JU(),this.Me=vo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Bn(),r=Bn(),n=Bn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Hr(38017,{changeType:s})}}),new ww(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=JU()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,oa(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Nme{constructor(t){this.Ge=t,this.ze=new Map,this.je=Xf(),this.Je=AE(),this.He=AE(),this.Ye=new is(kn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Hr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(ZI(s))if(n===0){const i=new vr(s.path);this.et(r,i,zo.newNoDocument(i,Wr.min()))}else oa(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),l=o?this.ct(o,t,i):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=K0(n).toUint8Array()}catch(l){if(l instanceof CX)return rx("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new oO(i,a,s)}catch(l){return rx(l instanceof Sb?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&ZI(o.target)){const l=new vr(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,zo.newNoDocument(l,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=Bn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new W5(t,r,this.Ye,this.je,n);return this.je=Xf(),this.Je=AE(),this.He=AE(),this.Ye=new is(kn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new YU,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Ni(kn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Ni(kn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||lr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new YU),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function AE(){return new is(vr.comparator)}function JU(){return new is(vr.comparator)}const kme={asc:"ASCENDING",desc:"DESCENDING"},Bme={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tme={and:"AND",or:"OR"};class Ime{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function tj(e,t){return e.useProto3Json||U5(t)?t:{value:t}}function M_(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function eY(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jme(e,t){return M_(e,t.toTimestamp())}function TA(e){return oa(!!e,49232),Wr.fromTimestamp(function(r){const n=$0(r);return new yr(n.seconds,n.nanos)}(e))}function lO(e,t){return rj(e,t).canonicalString()}function rj(e,t){const r=function(a){return new ka(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function tY(e){const t=ka.fromString(e);return oa(iY(t),10190,{key:t.toString()}),t}function nj(e,t){return lO(e.databaseId,t.path)}function oB(e,t){const r=tY(t);if(r.get(1)!==e.databaseId.projectId)throw new Xt(wt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Xt(wt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new vr(nY(r))}function rY(e,t){return lO(e.databaseId,t)}function Fme(e){const t=tY(e);return t.length===4?ka.emptyPath():nY(t)}function aj(e){return new ka(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nY(e){return oa(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function ZU(e,t,r){return{name:nj(e,t),fields:r.value.mapValue.fields}}function Ome(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Hr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(oa(d===void 0||typeof d=="string",58123),vo.fromBase64String(d||"")):(oa(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),vo.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?wt.UNKNOWN:YX(u.code);return new Xt(d,u.message||"")}(i);r=new ZX(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=oB(e,n.document.name),s=TA(n.document.updateTime),i=n.document.createTime?TA(n.document.createTime):Wr.min(),o=new zl({mapValue:{fields:n.document.fields}}),l=zo.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new $C(u,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=oB(e,n.document),s=n.readTime?TA(n.readTime):Wr.min(),i=zo.newNoDocument(a,s),o=n.removedTargetIds||[];r=new $C([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=oB(e,n.document),s=n.removedTargetIds||[];r=new $C([],s,a,null)}else{if(!("filter"in t))return Hr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new Eme(a,s),o=n.targetId;r=new JX(o,i)}}return r}function Dme(e,t){let r;if(t instanceof yw)r={update:ZU(e,t.key,t.value)};else if(t instanceof q5)r={delete:nj(e,t.key)};else if(t instanceof lm)r={update:ZU(e,t.key,t.data),updateMask:zme(t.fieldMask)};else{if(!(t instanceof bme))return Hr(16599,{Vt:t.type});r={verify:nj(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Ny)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ox)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ky)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof L_)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Hr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:jme(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Hr(27497)}(e,t.precondition)),r}function Rme(e,t){return e&&e.length>0?(oa(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?TA(a.updateTime):TA(s);return i.isEqual(Wr.min())&&(i=TA(s)),new gme(i,a.transformResults||[])}(r,t))):[]}function Pme(e,t){return{documents:[rY(e,t.path)]}}function Lme(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=rY(e,a);const s=function(u){if(u.length!==0)return sY(Cd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:dv(h.field),direction:Qme(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=tj(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Mme(e){let t=Fme(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){oa(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=aY(f);return h instanceof Cd&&OX(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new Sy(Av(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,U5(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new ix(p,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new ix(p,h)}(r.endAt)),ame(t,a,i,s,o,"F",l,u)}function Ume(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function aY(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Av(r.unaryFilter.field);return hi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Av(r.unaryFilter.field);return hi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Av(r.unaryFilter.field);return hi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Av(r.unaryFilter.field);return hi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Hr(61313);default:return Hr(60726)}}(e):e.fieldFilter!==void 0?function(r){return hi.create(Av(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Hr(58110);default:return Hr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Cd.create(r.compositeFilter.filters.map(n=>aY(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Hr(1026)}}(r.compositeFilter.op))}(e):Hr(30097,{filter:e})}function Qme(e){return kme[e]}function Hme(e){return Bme[e]}function Vme(e){return Tme[e]}function dv(e){return{fieldPath:e.canonicalString()}}function Av(e){return mo.fromServerFormat(e.fieldPath)}function sY(e){return e instanceof hi?function(r){if(r.op==="=="){if(UU(r.value))return{unaryFilter:{field:dv(r.field),op:"IS_NAN"}};if(MU(r.value))return{unaryFilter:{field:dv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(UU(r.value))return{unaryFilter:{field:dv(r.field),op:"IS_NOT_NAN"}};if(MU(r.value))return{unaryFilter:{field:dv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dv(r.field),op:Hme(r.op),value:r.value}}}(e):e instanceof Cd?function(r){const n=r.getFilters().map(a=>sY(a));return n.length===1?n[0]:{compositeFilter:{op:Vme(r.op),filters:n}}}(e):Hr(54877,{filter:e})}function zme(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function iY(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(t,r,n,a,s=Wr.min(),i=Wr.min(),o=vo.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new w0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new w0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new w0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new w0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $me{constructor(t){this.yt=t}}function Kme(e){const t=Mme({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?P_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gme{constructor(){this.Cn=new qme}addToCollectionParentIndex(t,r){return this.Cn.add(r),jt.resolve()}getCollectionParents(t,r){return jt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return jt.resolve()}deleteFieldIndex(t,r){return jt.resolve()}deleteAllFieldIndexes(t){return jt.resolve()}createTargetIndexes(t,r){return jt.resolve()}getDocumentsMatchingTarget(t,r){return jt.resolve(null)}getIndexType(t,r){return jt.resolve(0)}getFieldIndexes(t,r){return jt.resolve([])}getNextCollectionGroupToUpdate(t){return jt.resolve(null)}getMinOffset(t,r){return jt.resolve(z0.min())}getMinOffsetFromCollectionGroup(t,r){return jt.resolve(z0.min())}updateCollectionGroup(t,r,n){return jt.resolve()}updateIndexEntries(t,r){return jt.resolve()}}class qme{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Ni(ka.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Ni(ka.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oY=41943040;class Ul{static withCacheSize(t){return new Ul(t,Ul.DEFAULT_COLLECTION_PERCENTILE,Ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ul.DEFAULT_COLLECTION_PERCENTILE=10,Ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ul.DEFAULT=new Ul(oY,Ul.DEFAULT_COLLECTION_PERCENTILE,Ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ul.DISABLED=new Ul(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new lx(0)}static cr(){return new lx(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7="LruGarbageCollector",Wme=1048576;function r7([e,t],[r,n]){const a=kn(e,r);return a===0?kn(t,n):a}class Xme{constructor(t){this.Ir=t,this.buffer=new Ni(r7),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();r7(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Yme{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lr(t7,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Px(r)?lr(t7,"Ignoring IndexedDB error during garbage collection: ",r):await Rx(r)}await this.Vr(3e5)})}}class Jme{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return jt.resolve(M5.ce);const n=new Xme(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(lr("LruGarbageCollector","Garbage collection skipped; disabled"),jt.resolve(e7)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(lr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),e7):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,l,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(lr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),cv()<=Nn.DEBUG&&lr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),jt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function Zme(e,t){return new Jme(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class epe{constructor(){this.changes=new Xp(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,zo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?jt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tpe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rpe{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&Wb(n.mutation,a,kc.empty(),yr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Bn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Bn()){const a=tp();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=_b();return s.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=tp();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Bn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=Xf();const i=qb(),o=function(){return qb()}();return r.forEach((l,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof lm)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Wb(d.mutation,u,d.mutation.getFieldMask(),yr.now())):i.set(u.key,kc.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new tpe(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=qb();let a=new is((i,o)=>i-o),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let d=n.get(l)||kc.empty();d=o.applyToLocalView(u,d),n.set(l,d);const f=(a.get(o.batchId)||Bn()).add(l);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,f=HX();d.forEach(h=>{if(!s.has(h)){const p=WX(r.get(h),n.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return jt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return vr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):aO(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):jt.resolve(tp());let o=wy,l=s;return i.next(u=>jt.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?jt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{l=l.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,Bn())).next(d=>({batchId:o,changes:QX(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new vr(r)).next(n=>{let a=_b();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=_b();return this.indexManager.getCollectionParents(t,s).next(o=>jt.forEach(o,l=>{const u=function(f,h){return new Wp(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,zo.newInvalidDocument(d)))});let o=_b();return i.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Wb(d.mutation,u,kc.empty(),yr.now()),$5(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class npe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return jt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:TA(a.createTime)}}(r)),jt.resolve()}getNamedQuery(t,r){return jt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Kme(a.bundledQuery),readTime:TA(a.readTime)}}(r)),jt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ape{constructor(){this.overlays=new is(vr.comparator),this.qr=new Map}getOverlay(t,r){return jt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=tp();return jt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),jt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),jt.resolve()}getOverlaysForCollection(t,r,n){const a=tp(),s=r.length+1,i=new vr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&a.set(l.getKey(),l)}return jt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new is((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=tp(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=tp(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return jt.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new wme(r,n));let s=this.qr.get(r);s===void 0&&(s=Bn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class spe{constructor(){this.sessionToken=vo.EMPTY_BYTE_STRING}getSessionToken(t){return jt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,jt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.Qr=new Ni(Vi.$r),this.Ur=new Ni(Vi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Vi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Vi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new vr(new ka([])),n=new Vi(r,t),a=new Vi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new vr(new ka([])),n=new Vi(r,t),a=new Vi(r,t+1);let s=Bn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Vi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Vi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return vr.comparator(t.key,r.key)||kn(t.Yr,r.Yr)}static Kr(t,r){return kn(t.Yr,r.Yr)||vr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ipe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ni(Vi.$r)}checkEmpty(t){return jt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new yme(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Vi(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return jt.resolve(i)}lookupMutationBatch(t,r){return jt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return jt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return jt.resolve(this.mutationQueue.length===0?eO:this.tr-1)}getAllMutationBatches(t){return jt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Vi(r,0),a=new Vi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),jt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Ni(kn);return r.forEach(a=>{const s=new Vi(a,0),i=new Vi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),jt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;vr.isDocumentKey(s)||(s=s.child(""));const i=new Vi(new vr(s),0);let o=new Ni(kn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(l.Yr)),!0)},i),jt.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){oa(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return jt.forEach(r.mutations,a=>{const s=new Vi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Vi(r,0),a=this.Zr.firstAfterOrEqual(n);return jt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,jt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ope{constructor(t){this.ri=t,this.docs=function(){return new is(vr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return jt.resolve(n?n.document.mutableCopy():zo.newInvalidDocument(r))}getEntries(t,r){let n=Xf();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():zo.newInvalidDocument(a))}),jt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=Xf();const i=r.path,o=new vr(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||R0e(D0e(d),n)<=0||(a.has(d.key)||$5(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return jt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Hr(9500)}ii(t,r){return jt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new lpe(this)}getSize(t){return jt.resolve(this.size)}}class lpe extends epe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),jt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cpe{constructor(t){this.persistence=t,this.si=new Xp(r=>rO(r),nO),this.lastRemoteSnapshotVersion=Wr.min(),this.highestTargetId=0,this.oi=0,this._i=new cO,this.targetCount=0,this.ai=lx.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),jt.resolve()}getLastRemoteSnapshotVersion(t){return jt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return jt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),jt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),jt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new lx(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,jt.resolve()}updateTargetData(t,r){return this.Pr(r),jt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,jt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),jt.waitFor(s).next(()=>a)}getTargetCount(t){return jt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return jt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),jt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),jt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),jt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return jt.resolve(n)}containsKey(t,r){return jt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(t,r){this.ui={},this.overlays={},this.ci=new M5(0),this.li=!1,this.li=!0,this.hi=new spe,this.referenceDelegate=t(this),this.Pi=new cpe(this),this.indexManager=new Gme,this.remoteDocumentCache=function(a){return new ope(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new $me(r),this.Ii=new npe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new ape,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new ipe(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){lr("MemoryPersistence","Starting transaction:",t);const a=new upe(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return jt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class upe extends L0e{constructor(t){super(),this.currentSequenceNumber=t}}class uO{constructor(t){this.persistence=t,this.Ri=new cO,this.Vi=null}static mi(t){return new uO(t)}get fi(){if(this.Vi)return this.Vi;throw Hr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),jt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),jt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),jt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jt.forEach(this.fi,n=>{const a=vr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Wr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return jt.or([()=>jt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class U_{constructor(t,r){this.persistence=t,this.pi=new Xp(n=>Q0e(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Zme(this,r)}static mi(t,r){return new U_(t,r)}Ei(){}di(t){return jt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return jt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?jt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Wr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),jt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),jt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),jt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),jt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=HC(t.data.value)),r}br(t,r,n){return jt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return jt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Bn(),a=Bn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new dO(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dpe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ape{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Qde()?8:M0e(Jo())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new dpe;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(cv()<=Nn.DEBUG&&lr("QueryEngine","SDK will not create cache indexes for query:",uv(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),jt.resolve()):(cv()<=Nn.DEBUG&&lr("QueryEngine","Query:",uv(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(cv()<=Nn.DEBUG&&lr("QueryEngine","The SDK decides to create cache indexes for query:",uv(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,BA(r))):jt.resolve())}ys(t,r){if(zU(r))return jt.resolve(null);let n=BA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=P_(r,null,"F"),n=BA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=Bn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,i,l.readTime)?this.ys(t,P_(r,null,"F")):this.vs(t,u,r,l)}))})))}ws(t,r,n,a){return zU(r)||a.isEqual(Wr.min())?jt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?jt.resolve(null):(cv()<=Nn.DEBUG&&lr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),uv(r)),this.vs(t,i,r,O0e(a,wy)).next(o=>o))})}Ds(t,r){let n=new Ni(MX(t));return r.forEach((a,s)=>{$5(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return cv()<=Nn.DEBUG&&lr("QueryEngine","Using full collection scan to execute query:",uv(r)),this.ps.getDocumentsMatchingQuery(t,r,z0.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO="LocalStore",fpe=3e8;class hpe{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new is(kn),this.xs=new Xp(s=>rO(s),nO),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new rpe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function mpe(e,t,r,n){return new hpe(e,t,r,n)}async function cY(e,t){const r=Zr(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let l=Bn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function ppe(e,t){const r=Zr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const f=u.batch,h=f.keys();let p=jt.resolve();return h.forEach(g=>{p=p.next(()=>d.getEntry(l,g)).next(v=>{const b=u.docVersions.get(g);oa(b!==null,48541),v.version.compareTo(b)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Bn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function uY(e){const t=Zr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function gpe(e,t){const r=Zr(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(vo.EMPTY_BYTE_STRING,Wr.min()).withLastLimboFreeSnapshotVersion(Wr.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(f,p),function(v,b,y){return v.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=fpe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let l=Xf(),u=Bn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(vpe(s,i,t.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!n.isEqual(Wr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return jt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(r.Ms=a,s))}function vpe(e,t,r){let n=Bn(),a=Bn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=Xf();return r.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),l.isNoDocument()&&l.version.isEqual(Wr.min())?(t.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),i=i.insert(o,l)):lr(AO,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:a}})}function xpe(e,t){const r=Zr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=eO),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function bpe(e,t){const r=Zr(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,jt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new w0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function sj(e,t,r){const n=Zr(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!Px(i))throw i;lr(AO,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function n7(e,t,r){const n=Zr(e);let a=Wr.min(),s=Bn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const f=Zr(l),h=f.xs.get(d);return h!==void 0?jt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,BA(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Wr.min(),r?s:Bn())).next(o=>(ype(n,ime(t),o),{documents:o,Qs:s})))}function ype(e,t,r){let n=e.Os.get(t)||Wr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class a7{constructor(){this.activeTargetIds=Ame()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class wpe{constructor(){this.Mo=new a7,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new a7,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Epe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7="ConnectivityMonitor";class i7{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lr(s7,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lr(s7,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fE=null;function ij(){return fE===null?fE=function(){return 268435456+Math.round(2147483648*Math.random())}():fE++,"0x"+fE.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB="RestConnection",Cpe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _pe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===O_?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=ij(),o=this.zo(t,r.toUriEncodedString());lr(lB,`Sending RPC '${t}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,s);const{host:u}=new URL(o),d=ch(u);return this.Jo(t,o,l,n,d).then(f=>(lr(lB,`Received RPC '${t}' ${i}: `,f),f),f=>{throw rx(lB,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Dx}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=Cpe[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Spe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="WebChannelConnection";class Npe extends _pe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=ij();return new Promise((o,l)=>{const u=new fX;u.setWithCredentials(!0),u.listenOnce(hX.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case QC.NO_ERROR:const f=u.getResponseJson();lr(jo,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case QC.TIMEOUT:lr(jo,`RPC '${t}' ${i} timed out`),l(new Xt(wt.DEADLINE_EXCEEDED,"Request time out"));break;case QC.HTTP_ERROR:const h=u.getStatus();if(lr(jo,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const v=function(y){const _=y.toLowerCase().replace(/_/g,"-");return Object.values(wt).indexOf(_)>=0?_:wt.UNKNOWN}(g.status);l(new Xt(v,g.message))}else l(new Xt(wt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Xt(wt.UNAVAILABLE,"Connection failed."));break;default:Hr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{lr(jo,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);lr(jo,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=ij(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=gX(),o=pX(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=s.join("");lr(jo,`Creating RPC '${t}' stream ${a}: ${d}`,l);const f=i.createWebChannel(d,l);this.I_(f);let h=!1,p=!1;const g=new Spe({Yo:b=>{p?lr(jo,`Not sending because RPC '${t}' stream ${a} is closed:`,b):(h||(lr(jo,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),lr(jo,`RPC '${t}' stream ${a} sending:`,b),f.send(b))},Zo:()=>f.close()}),v=(b,y,_)=>{b.listen(y,S=>{try{_(S)}catch(k){setTimeout(()=>{throw k},0)}})};return v(f,Cb.EventType.OPEN,()=>{p||(lr(jo,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),v(f,Cb.EventType.CLOSE,()=>{p||(p=!0,lr(jo,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),v(f,Cb.EventType.ERROR,b=>{p||(p=!0,rx(jo,`RPC '${t}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new Xt(wt.UNAVAILABLE,"The operation could not be completed")))}),v(f,Cb.EventType.MESSAGE,b=>{var y;if(!p){const _=b.data[0];oa(!!_,16349);const S=_,k=(S==null?void 0:S.error)||((y=S[0])==null?void 0:y.error);if(k){lr(jo,`RPC '${t}' stream ${a} received error:`,k);const B=k.status;let F=function(N){const R=oi[N];if(R!==void 0)return YX(R)}(B),w=k.message;F===void 0&&(F=wt.INTERNAL,w="Unknown error status: "+B+" with message "+k.message),p=!0,g.a_(new Xt(F,w)),f.close()}else lr(jo,`RPC '${t}' stream ${a} received:`,_),g.u_(_)}}),v(o,mX.STAT_EVENT,b=>{b.stat===qI.PROXY?lr(jo,`RPC '${t}' stream ${a} detected buffering proxy`):b.stat===qI.NOPROXY&&lr(jo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function cB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(e){return new Ime(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&lr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7="PersistentStream";class AY{constructor(t,r,n,a,s,i,o,l){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dY(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===wt.RESOURCE_EXHAUSTED?(Wf(r.toString()),Wf("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===wt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Xt(wt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return lr(o7,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(lr(o7,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kpe extends AY{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=Ome(this.serializer,t),n=function(s){if(!("targetChange"in s))return Wr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Wr.min():i.readTime?TA(i.readTime):Wr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=aj(this.serializer),r.addTarget=function(s,i){let o;const l=i.target;if(o=ZI(l)?{documents:Pme(s,l)}:{query:Lme(s,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=eY(s,i.resumeToken);const u=tj(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Wr.min())>0){o.readTime=M_(s,i.snapshotVersion.toTimestamp());const u=tj(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=Ume(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=aj(this.serializer),r.removeTarget=t,this.q_(r)}}class Bpe extends AY{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return oa(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,oa(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){oa(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Rme(t.writeResults,t.commitTime),n=TA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=aj(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>Dme(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tpe{}class Ipe extends Tpe{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Xt(wt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,rj(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xt(wt.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,rj(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xt(wt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jpe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wf(r),this.aa=!1):lr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="RemoteStore";class Fpe{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Yp(this)&&(lr(Ip,"Restarting streams for network reachability change."),await async function(l){const u=Zr(l);u.Ea.add(4),await Ew(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Y5(u)}(this))})}),this.Ra=new jpe(n,a)}}async function Y5(e){if(Yp(e))for(const t of e.da)await t(!0)}async function Ew(e){for(const t of e.da)await t(!1)}function fY(e,t){const r=Zr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),pO(r)?mO(r):Lx(r).O_()&&hO(r,t))}function fO(e,t){const r=Zr(e),n=Lx(r);r.Ia.delete(t),n.O_()&&hY(r,t),r.Ia.size===0&&(n.O_()?n.L_():Yp(r)&&r.Ra.set("Unknown"))}function hO(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Lx(e).Y_(t)}function hY(e,t){e.Va.Ue(t),Lx(e).Z_(t)}function mO(e){e.Va=new Nme({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Lx(e).start(),e.Ra.ua()}function pO(e){return Yp(e)&&!Lx(e).x_()&&e.Ia.size>0}function Yp(e){return Zr(e).Ea.size===0}function mY(e){e.Va=void 0}async function Ope(e){e.Ra.set("Online")}async function Dpe(e){e.Ia.forEach((t,r)=>{hO(e,t)})}async function Rpe(e,t){mY(e),pO(e)?(e.Ra.ha(t),mO(e)):e.Ra.set("Unknown")}async function Ppe(e,t,r){if(e.Ra.set("Online"),t instanceof ZX&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){lr(Ip,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Q_(e,n)}else if(t instanceof $C?e.Va.Ze(t):t instanceof JX?e.Va.st(t):e.Va.tt(t),!r.isEqual(Wr.min()))try{const n=await uY(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(vo.EMPTY_BYTE_STRING,d.snapshotVersion)),hY(s,l);const f=new w0(d.target,l,u,d.sequenceNumber);hO(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){lr(Ip,"Failed to raise snapshot:",n),await Q_(e,n)}}async function Q_(e,t,r){if(!Px(t))throw t;e.Ea.add(1),await Ew(e),e.Ra.set("Offline"),r||(r=()=>uY(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{lr(Ip,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await Y5(e)})}function pY(e,t){return t().catch(r=>Q_(e,r,t))}async function J5(e){const t=Zr(e),r=q0(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:eO;for(;Lpe(t);)try{const a=await xpe(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,Mpe(t,a)}catch(a){await Q_(t,a)}gY(t)&&vY(t)}function Lpe(e){return Yp(e)&&e.Ta.length<10}function Mpe(e,t){e.Ta.push(t);const r=q0(e);r.O_()&&r.X_&&r.ea(t.mutations)}function gY(e){return Yp(e)&&!q0(e).x_()&&e.Ta.length>0}function vY(e){q0(e).start()}async function Upe(e){q0(e).ra()}async function Qpe(e){const t=q0(e);for(const r of e.Ta)t.ea(r.mutations)}async function Hpe(e,t,r){const n=e.Ta.shift(),a=iO.from(n,t,r);await pY(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await J5(e)}async function Vpe(e,t){t&&q0(e).X_&&await async function(n,a){if(function(i){return Cme(i)&&i!==wt.ABORTED}(a.code)){const s=n.Ta.shift();q0(n).B_(),await pY(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await J5(n)}}(e,t),gY(e)&&vY(e)}async function l7(e,t){const r=Zr(e);r.asyncQueue.verifyOperationInProgress(),lr(Ip,"RemoteStore received new credentials");const n=Yp(r);r.Ea.add(3),await Ew(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await Y5(r)}async function zpe(e,t){const r=Zr(e);t?(r.Ea.delete(2),await Y5(r)):t||(r.Ea.add(2),await Ew(r),r.Ra.set("Unknown"))}function Lx(e){return e.ma||(e.ma=function(r,n,a){const s=Zr(r);return s.sa(),new kpe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:Ope.bind(null,e),t_:Dpe.bind(null,e),r_:Rpe.bind(null,e),H_:Ppe.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),pO(e)?mO(e):e.Ra.set("Unknown")):(await e.ma.stop(),mY(e))})),e.ma}function q0(e){return e.fa||(e.fa=function(r,n,a){const s=Zr(r);return s.sa(),new Bpe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Upe.bind(null,e),r_:Vpe.bind(null,e),ta:Qpe.bind(null,e),na:Hpe.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await J5(e)):(await e.fa.stop(),e.Ta.length>0&&(lr(Ip,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Lf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new gO(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(wt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vO(e,t){if(Wf("AsyncQueue",`${t}: ${e}`),Px(e))return new Xt(wt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{static emptySet(t){return new Rv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||vr.comparator(r.key,n.key):(r,n)=>vr.comparator(r.key,n.key),this.keyedMap=_b(),this.sortedSet=new is(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Rv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Rv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(){this.ga=new is(vr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Hr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class cx{constructor(t,r,n,a,s,i,o,l,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new cx(t,r,Rv.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&z5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $pe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Kpe{constructor(){this.queries=u7(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Zr(r),s=a.queries;a.queries=u7(),s.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Xt(wt.ABORTED,"Firestore shutting down"))}}function u7(){return new Xp(e=>LX(e),z5)}async function xO(e,t){const r=Zr(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new $pe,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=vO(i,`Initialization of query '${uv(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&yO(r)}async function bO(e,t){const r=Zr(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Gpe(e,t){const r=Zr(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&yO(r)}function qpe(e,t,r){const n=Zr(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function yO(e){e.Ca.forEach(t=>{t.next()})}var oj,d7;(d7=oj||(oj={})).Ma="default",d7.Cache="cache";class wO{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new cx(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=cx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==oj.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xY{constructor(t){this.key=t}}class bY{constructor(t){this.key=t}}class Wpe{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bn(),this.mutatedKeys=Bn(),this.eu=MX(t),this.tu=new Rv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new c7,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),p=$5(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?g!==v&&(n.track({type:3,doc:p}),b=!0):this.su(h,p)||(n.track({type:2,doc:p}),b=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),b=!0):h&&!p&&(n.track({type:1,doc:h}),b=!0,(l||u)&&(o=!0)),b&&(p?(i=i.add(p),s=v?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(p,g){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hr(20277,{Rt:b})}};return v(p)-v(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new cx(this.query,t.tu,s,i,t.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c7,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Bn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new bY(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new xY(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Bn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return cx.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const EO="SyncEngine";class Xpe{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class Ype{constructor(t){this.key=t,this.hu=!1}}class Jpe{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Xp(o=>LX(o),z5),this.Iu=new Map,this.Eu=new Set,this.du=new is(vr.comparator),this.Au=new Map,this.Ru=new cO,this.Vu={},this.mu=new Map,this.fu=lx.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Zpe(e,t,r=!0){const n=SY(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await yY(n,t,r,!0),a}async function ege(e,t){const r=SY(e);await yY(r,t,!0,!1)}async function yY(e,t,r,n){const a=await bpe(e.localStore,BA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await tge(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&fY(e.remoteStore,a),o}async function tge(e,t,r,n,a){e.pu=(f,h,p)=>async function(v,b,y,_){let S=b.view.ru(y);S.Cs&&(S=await n7(v.localStore,b.query,!1).then(({documents:w})=>b.view.ru(w,S)));const k=_&&_.targetChanges.get(b.targetId),B=_&&_.targetMismatches.get(b.targetId)!=null,F=b.view.applyChanges(S,v.isPrimaryClient,k,B);return f7(v,b.targetId,F.au),F.snapshot}(e,f,h,p);const s=await n7(e.localStore,t,!0),i=new Wpe(t,s.Qs),o=i.ru(s.documents),l=ww.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,l);f7(e,r,u.au);const d=new Xpe(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function rge(e,t,r){const n=Zr(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!z5(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await sj(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&fO(n.remoteStore,a.targetId),lj(n,a.targetId)}).catch(Rx)):(lj(n,a.targetId),await sj(n.localStore,a.targetId,!0))}async function nge(e,t){const r=Zr(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),fO(r.remoteStore,n.targetId))}async function age(e,t,r){const n=dge(e);try{const a=await function(i,o){const l=Zr(i),u=yr.now(),d=o.reduce((p,g)=>p.add(g.key),Bn());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Xf(),v=Bn();return l.Ns.getEntries(p,d).next(b=>{g=b,g.forEach((y,_)=>{_.isValidDocument()||(v=v.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(b=>{f=b;const y=[];for(const _ of o){const S=xme(_,f.get(_.key).overlayedDocument);S!=null&&y.push(new lm(_.key,S,IX(S.value.mapValue),pl.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,y,o)}).next(b=>{h=b;const y=b.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:h.batchId,changes:QX(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new is(kn)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await Cw(n,a.changes),await J5(n.remoteStore)}catch(a){const s=vO(a,"Failed to persist write");r.reject(s)}}async function wY(e,t){const r=Zr(e);try{const n=await gpe(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(oa(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?oa(i.hu,14607):a.removedDocuments.size>0&&(oa(i.hu,42227),i.hu=!1))}),await Cw(r,n,t)}catch(n){await Rx(n)}}function A7(e,t,r){const n=Zr(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const l=Zr(i);l.onlineState=o;let u=!1;l.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&yO(l)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function sge(e,t,r){const n=Zr(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new is(vr.comparator);i=i.insert(s,zo.newNoDocument(s,Wr.min()));const o=Bn().add(s),l=new W5(Wr.min(),new Map,new is(kn),i,o);await wY(n,l),n.du=n.du.remove(s),n.Au.delete(t),CO(n)}else await sj(n.localStore,t,!1).then(()=>lj(n,t,r)).catch(Rx)}async function ige(e,t){const r=Zr(e),n=t.batch.batchId;try{const a=await ppe(r.localStore,t);CY(r,n,null),EY(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Cw(r,a)}catch(a){await Rx(a)}}async function oge(e,t,r){const n=Zr(e);try{const a=await function(i,o){const l=Zr(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(oa(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(n.localStore,t);CY(n,t,r),EY(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Cw(n,a)}catch(a){await Rx(a)}}function EY(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function CY(e,t,r){const n=Zr(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function lj(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||_Y(e,n)})}function _Y(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(fO(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),CO(e))}function f7(e,t,r){for(const n of r)n instanceof xY?(e.Ru.addReference(n.key,t),lge(e,n)):n instanceof bY?(lr(EO,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||_Y(e,n.key)):Hr(19791,{wu:n})}function lge(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(lr(EO,"New document in limbo: "+r),e.Eu.add(n),CO(e))}function CO(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new vr(ka.fromString(t)),n=e.fu.next();e.Au.set(n,new Ype(r)),e.du=e.du.insert(r,n),fY(e.remoteStore,new w0(BA(V5(r.path)),n,"TargetPurposeLimboResolution",M5.ce))}}async function Cw(e,t,r){const n=Zr(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){a.push(u);const f=dO.As(l.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(l,u){const d=Zr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>jt.forEach(u,h=>jt.forEach(h.Es,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>jt.forEach(h.ds,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!Px(f))throw f;lr(AO,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.Ms.get(h),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,v)}}}(n.localStore,s))}async function cge(e,t){const r=Zr(e);if(!r.currentUser.isEqual(t)){lr(EO,"User change. New user:",t.toKey());const n=await cY(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new Xt(wt.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Cw(r,n.Ls)}}function uge(e,t){const r=Zr(e),n=r.Au.get(t);if(n&&n.hu)return Bn().add(n.key);{let a=Bn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function SY(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wY.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=uge.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sge.bind(null,t),t.Pu.H_=Gpe.bind(null,t.eventManager),t.Pu.yu=qpe.bind(null,t.eventManager),t}function dge(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ige.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oge.bind(null,t),t}class H_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=X5(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return mpe(this.persistence,new Ape,t.initialUser,this.serializer)}Cu(t){return new lY(uO.mi,this.serializer)}Du(t){return new wpe}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}H_.provider={build:()=>new H_};class Age extends H_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){oa(this.persistence.referenceDelegate instanceof U_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Yme(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Ul.withCacheSize(this.cacheSizeBytes):Ul.DEFAULT;return new lY(n=>U_.mi(n,r),this.serializer)}}class cj{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>A7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=cge.bind(null,this.syncEngine),await zpe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Kpe}()}createDatastore(t){const r=X5(t.databaseInfo.databaseId),n=function(s){return new Npe(s)}(t.databaseInfo);return function(s,i,o,l){return new Ipe(s,i,o,l)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new Fpe(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>A7(this.syncEngine,r,0),function(){return i7.v()?new i7:new Epe}())}createSyncEngine(t,r){return function(a,s,i,o,l,u,d){const f=new Jpe(a,s,i,o,l,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=Zr(a);lr(Ip,"RemoteStore shutting down."),s.Ea.add(5),await Ew(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}cj.provider={build:()=>new cj};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Wf("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="FirestoreClient";class fge{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Uo.UNAUTHENTICATED,this.clientId=Z6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{lr(W0,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(lr(W0,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Lf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=vO(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function uB(e,t){e.asyncQueue.verifyOperationInProgress(),lr(W0,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await cY(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function h7(e,t){e.asyncQueue.verifyOperationInProgress();const r=await hge(e);lr(W0,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>l7(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>l7(t.remoteStore,a)),e._onlineComponents=t}async function hge(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){lr(W0,"Using user provided OfflineComponentProvider");try{await uB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===wt.FAILED_PRECONDITION||a.code===wt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;rx("Error using user provided cache. Falling back to memory cache: "+r),await uB(e,new H_)}}else lr(W0,"Using default OfflineComponentProvider"),await uB(e,new Age(void 0));return e._offlineComponents}async function NY(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(lr(W0,"Using user provided OnlineComponentProvider"),await h7(e,e._uninitializedComponentsProvider._online)):(lr(W0,"Using default OnlineComponentProvider"),await h7(e,new cj))),e._onlineComponents}function mge(e){return NY(e).then(t=>t.syncEngine)}async function V_(e){const t=await NY(e),r=t.eventManager;return r.onListen=Zpe.bind(null,t.syncEngine),r.onUnlisten=rge.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=ege.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=nge.bind(null,t.syncEngine),r}function pge(e,t,r={}){const n=new Lf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new _O({next:h=>{d.Nu(),i.enqueueAndForget(()=>bO(s,f));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new Xt(wt.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?u.reject(new Xt(wt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new wO(V5(o.path),d,{includeMetadataChanges:!0,qa:!0});return xO(s,f)}(await V_(e),e.asyncQueue,t,r,n)),n.promise}function gge(e,t,r={}){const n=new Lf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new _O({next:h=>{d.Nu(),i.enqueueAndForget(()=>bO(s,f)),h.fromCache&&l.source==="server"?u.reject(new Xt(wt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new wO(o,d,{includeMetadataChanges:!0,qa:!0});return xO(s,f)}(await V_(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BY="firestore.googleapis.com",p7=!0;class g7{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(wt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BY,this.ssl=p7}else this.host=t.host,this.ssl=t.ssl??p7;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=oY;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Wme)throw new Xt(wt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}j0e("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kY(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Xt(wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Xt(wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Xt(wt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Z5{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g7({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(wt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Xt(wt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g7(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new w0e;switch(n.type){case"firstParty":return new S0e(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Xt(wt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=m7.get(r);n&&(lr("ComponentProvider","Removing Datastore"),m7.delete(r),n.terminate())}(this),Promise.resolve()}}function vge(e,t,r,n={}){var u;e=ml(e,Z5);const a=ch(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(I5(`https://${o}`),j5("Firestore",!0)),s.host!==BY&&s.host!==o&&rx("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:a,emulatorOptions:n};if(!H0(l,i)&&(e._setSettings(l),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Uo.MOCK_USER;else{d=SW(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Xt(wt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Uo(h)}e._authCredentials=new E0e(new xX(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new QA(this.firestore,t,this._query)}}class Cs{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new F0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Cs(this.firestore,t,this._key)}toJSON(){return{type:Cs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(bw(r,Cs._jsonSchema))return new Cs(t,n||null,new vr(ka.fromString(r.referencePath)))}}Cs._jsonSchemaVersion="firestore/documentReference/1.0",Cs._jsonSchema={type:mi("string",Cs._jsonSchemaVersion),referencePath:mi("string")};class F0 extends QA{constructor(t,r,n){super(t,r,V5(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Cs(this.firestore,null,new vr(t))}withConverter(t){return new F0(this.firestore,t,this._path)}}function Ut(e,t,...r){if(e=va(e),bX("collection","path",t),e instanceof Z5){const n=ka.fromString(t,...r);return IU(n),new F0(e,null,n)}{if(!(e instanceof Cs||e instanceof F0))throw new Xt(wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ka.fromString(t,...r));return IU(n),new F0(e.firestore,null,n)}}function pr(e,t,...r){if(e=va(e),arguments.length===1&&(t=Z6.newId()),bX("doc","path",t),e instanceof Z5){const n=ka.fromString(t,...r);return TU(n),new Cs(e,null,new vr(n))}{if(!(e instanceof Cs||e instanceof F0))throw new Xt(wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ka.fromString(t,...r));return TU(n),new Cs(e.firestore,e instanceof F0?e.converter:null,new vr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="AsyncQueue";class x7{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dY(this,"async_queue_retry"),this._c=()=>{const n=cB();n&&lr(v7,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=cB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=cB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Lf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Px(t))throw t;lr(v7,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,Wf("INTERNAL UNHANDLED ERROR: ",b7(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=gO.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Hr(47125,{Pc:b7(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function b7(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class LA extends Z5{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new x7,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new x7(t),this._firestoreClient=void 0,await t}}}function TY(e,t){const r=typeof e=="object"?e:F5(),n=typeof e=="string"?e:O_,a=pw(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=U6("firestore");s&&vge(a,...s)}return a}function _w(e){if(e._terminated)throw new Xt(wt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||xge(e),e._firestoreClient}function xge(e){var n,a,s;const t=e._freezeSettings(),r=function(o,l,u,d){return new z0e(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kY(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new fge(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wu(vo.fromBase64String(t))}catch(r){throw new Xt(wt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new wu(vo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:wu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(bw(t,wu._jsonSchema))return wu.fromBase64String(t.bytes)}}wu._jsonSchemaVersion="firestore/bytes/1.0",wu._jsonSchema={type:mi("string",wu._jsonSchemaVersion),bytes:mi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Xt(wt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Xt(wt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Xt(wt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return kn(this._lat,t._lat)||kn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:IA._jsonSchemaVersion}}static fromJSON(t){if(bw(t,IA._jsonSchema))return new IA(t.latitude,t.longitude)}}IA._jsonSchemaVersion="firestore/geoPoint/1.0",IA._jsonSchema={type:mi("string",IA._jsonSchemaVersion),latitude:mi("number"),longitude:mi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:jA._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(bw(t,jA._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new jA(t.vectorValues);throw new Xt(wt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jA._jsonSchemaVersion="firestore/vectorValue/1.0",jA._jsonSchema={type:mi("string",jA._jsonSchemaVersion),vectorValues:mi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bge=/^__.*__$/;class yge{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new lm(t,this.data,this.fieldMask,r,this.fieldTransforms):new yw(t,this.data,r,this.fieldTransforms)}}class IY{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new lm(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function jY(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hr(40011,{Ac:e})}}class eN{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new eN({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return z_(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(jY(this.Ac)&&bge.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class wge{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||X5(t)}Cc(t,r,n,a=!1){return new eN({Ac:t,methodName:r,Dc:n,path:mo.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mx(e){const t=e._freezeSettings(),r=X5(e._databaseId);return new wge(e._databaseId,!!t.ignoreUndefinedProperties,r)}function SO(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);BO("Data must be an object, but it was:",i,n);const o=RY(n,i);let l,u;if(s.merge)l=new kc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=uj(t,f,r);if(!i.contains(h))throw new Xt(wt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);LY(d,h)||d.push(h)}l=new kc(d),u=i.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=i.fieldTransforms;return new yge(new zl(o),l,u)}class tN extends Nw{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof tN}}function Ege(e,t,r){return new eN({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class NO extends Nw{_toFieldTransform(t){return new qX(t.path,new Ny)}isEqual(t){return t instanceof NO}}class kO extends Nw{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Ege(this,t,!0),n=this.vc.map(s=>Ux(s,r)),a=new ox(n);return new qX(t.path,a)}isEqual(t){return t instanceof kO&&H0(this.vc,t.vc)}}function FY(e,t,r,n){const a=e.Cc(1,t,r);BO("Data must be an object, but it was:",a,n);const s=[],i=zl.empty();om(n,(l,u)=>{const d=TO(t,l,r);u=va(u);const f=a.yc(d);if(u instanceof tN)s.push(d);else{const h=Ux(u,f);h!=null&&(s.push(d),i.set(d,h))}});const o=new kc(s);return new IY(i,o,a.fieldTransforms)}function OY(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[uj(t,n,r)],l=[a];if(s.length%2!=0)throw new Xt(wt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(uj(t,s[h])),l.push(s[h+1]);const u=[],d=zl.empty();for(let h=o.length-1;h>=0;--h)if(!LY(u,o[h])){const p=o[h];let g=l[h];g=va(g);const v=i.yc(p);if(g instanceof tN)u.push(p);else{const b=Ux(g,v);b!=null&&(u.push(p),d.set(p,b))}}const f=new kc(u);return new IY(d,f,i.fieldTransforms)}function DY(e,t,r,n=!1){return Ux(r,e.Cc(n?4:3,t))}function Ux(e,t){if(PY(e=va(e)))return BO("Unsupported field value:",t,e),RY(e,t);if(e instanceof Nw)return function(n,a){if(!jY(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let l=Ux(o,a.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=va(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return fme(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=yr.fromDate(n);return{timestampValue:M_(a.serializer,s)}}if(n instanceof yr){const s=new yr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:M_(a.serializer,s)}}if(n instanceof IA)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wu)return{bytesValue:eY(a.serializer,n._byteString)};if(n instanceof Cs){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lO(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof jA)return function(i,o){return{mapValue:{fields:{[BX]:{stringValue:TX},[D_]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return sO(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${L5(n)}`)}(e,t)}function RY(e,t){const r={};return EX(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):om(e,(n,a)=>{const s=Ux(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function PY(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof yr||e instanceof IA||e instanceof wu||e instanceof Cs||e instanceof Nw||e instanceof jA)}function BO(e,t,r){if(!PY(r)||!yX(r)){const n=L5(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function uj(e,t,r){if((t=va(t))instanceof Sw)return t._internalPath;if(typeof t=="string")return TO(e,t);throw z_("Field path arguments must be of type string or ",e,!1,void 0,r)}const Cge=new RegExp("[~\\*/\\[\\]]");function TO(e,t,r){if(t.search(Cge)>=0)throw z_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new Sw(...t.split("."))._internalPath}catch{throw z_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function z_(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=` in field ${n}`),i&&(l+=` in document ${a}`),l+=")"),new Xt(wt.INVALID_ARGUMENT,o+e+l)}function LY(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Cs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new _ge(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(rN("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class _ge extends IO{data(){return super.data()}}function rN(e,t){return typeof t=="string"?TO(e,t):t instanceof Sw?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MY(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Xt(wt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jO{}class nN extends jO{}function nr(e,t,...r){let n=[];t instanceof jO&&n.push(t),n=n.concat(r),function(s){const i=s.filter(l=>l instanceof FO).length,o=s.filter(l=>l instanceof aN).length;if(i>1||i>0&&o>0)throw new Xt(wt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class aN extends nN{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new aN(t,r,n)}_apply(t){const r=this._parse(t);return UY(t._query,r),new QA(t.firestore,t.converter,ej(t._query,r))}_parse(t){const r=Mx(t.firestore);return function(s,i,o,l,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Xt(wt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){E7(f,d);const g=[];for(const v of f)g.push(w7(l,s,v));h={arrayValue:{values:g}}}else h=w7(l,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||E7(f,d),h=DY(o,i,f,d==="in"||d==="not-in");return hi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Ln(e,t,r){const n=t,a=rN("where",e);return aN._create(a,n,r)}class FO extends jO{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new FO(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Cd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const l of o)UY(i,l),i=ej(i,l)}(t._query,r),new QA(t.firestore,t.converter,ej(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class OO extends nN{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new OO(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Xt(wt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Xt(wt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sy(s,i)}(t._query,this._field,this._direction);return new QA(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Wp(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function Kr(e,t="asc"){const r=t,n=rN("orderBy",e);return OO._create(n,r)}class DO extends nN{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new DO(t,r,n)}_apply(t){return new QA(t.firestore,t.converter,P_(t._query,this._limit,this._limitType))}}function FA(e){return F0e("limit",e),DO._create("limit",e,"F")}class RO extends nN{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new RO(t,r,n)}_apply(t){const r=Nge(t,this.type,this._docOrFields,this._inclusive);return new QA(t.firestore,t.converter,function(a,s){return new Wp(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function Sge(...e){return RO._create("startAfter",e,!1)}function Nge(e,t,r,n){if(r[0]=va(r[0]),r[0]instanceof IO)return function(s,i,o,l,u){if(!l)throw new Xt(wt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const f of Dv(s))if(f.field.isKeyField())d.push(R_(i,l.key));else{const h=l.data.field(f.field);if(Q5(h))throw new Xt(wt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new Xt(wt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(h)}return new ix(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=Mx(e.firestore);return function(i,o,l,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new Xt(wt.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<d.length;g++){const v=d[g];if(h[g].field.isKeyField()){if(typeof v!="string")throw new Xt(wt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!aO(i)&&v.indexOf("/")!==-1)throw new Xt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const b=i.path.child(ka.fromString(v));if(!vr.isDocumentKey(b))throw new Xt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new vr(b);p.push(R_(o,y))}else{const b=DY(l,u,v);p.push(b)}}return new ix(p,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function w7(e,t,r){if(typeof(r=va(r))=="string"){if(r==="")throw new Xt(wt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aO(t)&&r.indexOf("/")!==-1)throw new Xt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(ka.fromString(r));if(!vr.isDocumentKey(n))throw new Xt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return R_(e,new vr(n))}if(r instanceof Cs)return R_(e,r._key);throw new Xt(wt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${L5(r)}.`)}function E7(e,t){if(!Array.isArray(e)||e.length===0)throw new Xt(wt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function UY(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Xt(wt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xt(wt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class kge{convertValue(t,r="none"){switch(G0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(K0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Hr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return om(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[D_].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Vs(i.doubleValue));return new jA(r)}convertGeoPoint(t){return new IA(Vs(t.latitude),Vs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=H5(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Ey(t));default:return null}}convertTimestamp(t){const r=$0(t);return new yr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=ka.fromString(t);oa(iY(n),9688,{name:t});const a=new Cy(n.get(1),n.get(3)),s=new vr(n.popFirst(5));return a.isEqual(r)||Wf(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class Nb{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class dp extends IO{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new KC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(rN("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(wt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=dp._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}dp._jsonSchemaVersion="firestore/documentSnapshot/1.0",dp._jsonSchema={type:mi("string",dp._jsonSchemaVersion),bundleSource:mi("string","DocumentSnapshot"),bundleName:mi("string"),bundle:mi("string")};class KC extends dp{data(t={}){return super.data(t)}}class Ap{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new Nb(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new KC(this._firestore,this._userDataWriter,n.key,n,new Nb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Xt(wt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const l=new KC(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Nb(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new KC(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Nb(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Bge(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(wt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ap._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Z6.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Bge(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(e){e=ml(e,Cs);const t=ml(e.firestore,LA);return pge(_w(t),e._key).then(r=>QY(t,e,r))}Ap._jsonSchemaVersion="firestore/querySnapshot/1.0",Ap._jsonSchema={type:mi("string",Ap._jsonSchemaVersion),bundleSource:mi("string","QuerySnapshot"),bundleName:mi("string"),bundle:mi("string")};class LO extends kge{constructor(t){super(),this.firestore=t}convertBytes(t){return new wu(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Cs(this.firestore,null,r)}}function qs(e){e=ml(e,QA);const t=ml(e.firestore,LA),r=_w(t),n=new LO(t);return MY(e._query),gge(r,e._query).then(a=>new Ap(t,n,e,a))}function xo(e,t,r){e=ml(e,Cs);const n=ml(e.firestore,LA),a=PO(e.converter,t,r);return Bw(n,[SO(Mx(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,pl.none())])}function cm(e,t,r,...n){e=ml(e,Cs);const a=ml(e.firestore,LA),s=Mx(a);let i;return i=typeof(t=va(t))=="string"||t instanceof Sw?OY(s,"updateDoc",e._key,t,r,n):FY(s,"updateDoc",e._key,t),Bw(a,[i.toMutation(e._key,pl.exists(!0))])}function Ys(e){return Bw(ml(e.firestore,LA),[new q5(e._key,pl.none())])}function ea(e,t){const r=ml(e.firestore,LA),n=pr(e),a=PO(e.converter,t);return Bw(r,[SO(Mx(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,pl.exists(!1))]).then(()=>n)}function wr(e,...t){var l,u,d;e=va(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||y7(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(y7(t[n])){const f=t[n];t[n]=(l=f.next)==null?void 0:l.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof Cs)i=ml(e.firestore,LA),o=V5(e._key.path),s={next:f=>{t[n]&&t[n](QY(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=ml(e,QA);i=ml(f.firestore,LA),o=f._query;const h=new LO(i);s={next:p=>{t[n]&&t[n](new Ap(i,h,f,p))},error:t[n+1],complete:t[n+2]},MY(e._query)}return function(h,p,g,v){const b=new _O(v),y=new wO(p,b,g);return h.asyncQueue.enqueueAndForget(async()=>xO(await V_(h),y)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>bO(await V_(h),y))}}(_w(i),o,a,s)}function Bw(e,t){return function(n,a){const s=new Lf;return n.asyncQueue.enqueueAndForget(async()=>age(await mge(n),a,s)),s.promise}(_w(e),t)}function QY(e,t,r){const n=r.docs.get(t._key),a=new LO(e);return new dp(e,a,t._key,n,new Nb(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tge{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Mx(t)}set(t,r,n){this._verifyNotCommitted();const a=dB(t,this._firestore),s=PO(a.converter,r,n),i=SO(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,pl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=dB(t,this._firestore);let i;return i=typeof(r=va(r))=="string"||r instanceof Sw?OY(this._dataReader,"WriteBatch.update",s._key,r,n,a):FY(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,pl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=dB(t,this._firestore);return this._mutations=this._mutations.concat(new q5(r._key,pl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xt(wt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dB(e,t){if((e=va(e)).firestore!==t)throw new Xt(wt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function jp(){return new NO("serverTimestamp")}function Ige(...e){return new kO("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(e){return _w(e=ml(e,LA)),new Tge(e,t=>Bw(e,t))}(function(t,r=!0){(function(a){Dx=a})(Gp),V0(new Kf("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new LA(new C0e(n.getProvider("auth-internal")),new N0e(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xt(wt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cy(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Tu(SU,NU,t),Tu(SU,NU,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY="firebasestorage.googleapis.com",VY="storageBucket",jge=120*1e3,Fge=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends _d{constructor(t,r,n=0){super(AB(t),`Firebase Storage: ${r} (${AB(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Is.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return AB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bs;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bs||(Bs={}));function AB(e){return"storage/"+e}function UO(){const e="An unknown error occurred, please check the error payload for server response.";return new Is(Bs.UNKNOWN,e)}function Oge(e){return new Is(Bs.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Dge(e){return new Is(Bs.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Rge(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Is(Bs.UNAUTHENTICATED,e)}function Pge(){return new Is(Bs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Lge(e){return new Is(Bs.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Mge(){return new Is(Bs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Uge(){return new Is(Bs.CANCELED,"User canceled the upload/download.")}function Qge(e){return new Is(Bs.INVALID_URL,"Invalid URL '"+e+"'.")}function Hge(e){return new Is(Bs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Vge(){return new Is(Bs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VY+"' property when initializing the app?")}function zge(){return new Is(Bs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $ge(){return new Is(Bs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Kge(e){return new Is(Bs.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dj(e){return new Is(Bs.INVALID_ARGUMENT,e)}function zY(){return new Is(Bs.APP_DELETED,"The Firebase app was deleted.")}function Gge(e){return new Is(Bs.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xb(e,t){return new Is(Bs.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function X1(e){throw new Is(Bs.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=Bc.makeFromUrl(t,r)}catch{return new Bc(t,"")}if(n.path==="")return n;throw Hge(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),l={bucket:1,path:3};function u(k){k.path_=decodeURIComponent(k.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},v=r===HY?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${v}/${a}/${b}`,"i"),S=[{regex:o,indices:l,postModify:s},{regex:p,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let k=0;k<S.length;k++){const B=S[k],F=B.regex.exec(t);if(F){const w=F[B.indices.bucket];let C=F[B.indices.path];C||(C=""),n=new Bc(w,C),B.postModify(n);break}}if(n==null)throw Qge(t);return n}}class qge{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wge(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function l(){return o===2}let u=!1;function d(...b){u||(u=!0,t.apply(null,b))}function f(b){a=setTimeout(()=>{a=null,e(p,l())},b)}function h(){s&&clearTimeout(s)}function p(b,...y){if(u){h();return}if(b){h(),d.call(null,b,...y);return}if(l()||i){h(),d.call(null,b,...y);return}n<64&&(n*=2);let S;o===1?(o=2,S=0):S=(n+Math.random())*1e3,f(S)}let g=!1;function v(b){g||(g=!0,h(),!u&&(a!==null?(b||(o=2),clearTimeout(a),f(0)):b||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,v(!0)},r),v}function Xge(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yge(e){return e!==void 0}function Jge(e){return typeof e=="object"&&!Array.isArray(e)}function QO(e){return typeof e=="string"||e instanceof String}function C7(e){return HO()&&e instanceof Blob}function HO(){return typeof Blob<"u"}function _7(e,t,r,n){if(n<t)throw dj(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw dj(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function $Y(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var fp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(fp||(fp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zge(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eve{constructor(t,r,n,a,s,i,o,l,u,d,f,h=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new hE(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===fp.NO_ERROR,l=s.getStatus();if(!o||Zge(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===fp.ABORT;n(!1,new hE(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new hE(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Yge(l)?s(l):s()}catch(l){i(l)}else if(o!==null){const l=UO();l.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,l)):i(l)}else if(a.canceled){const l=this.appDelete_?zY():Uge();i(l)}else{const l=Mge();i(l)}};this.canceled_?r(!1,new hE(!1,null,!0)):this.backoffId_=Wge(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Xge(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hE{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function tve(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function rve(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function nve(e,t){t&&(e["X-Firebase-GMPID"]=t)}function ave(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function sve(e,t,r,n,a,s,i=!0,o=!1){const l=$Y(e.urlParams),u=e.url+l,d=Object.assign({},e.headers);return nve(d,t),tve(d,r),rve(d,s),ave(d,n),new eve(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ive(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ove(...e){const t=ive();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(HO())return new Blob(e);throw new Is(Bs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lve(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cve(e){if(typeof atob>"u")throw Kge("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fB{constructor(t,r){this.data=t,this.contentType=r||null}}function uve(e,t){switch(e){case yA.RAW:return new fB(KY(t));case yA.BASE64:case yA.BASE64URL:return new fB(GY(e,t));case yA.DATA_URL:return new fB(Ave(t),fve(t))}throw UO()}function KY(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function dve(e){let t;try{t=decodeURIComponent(e)}catch{throw Xb(yA.DATA_URL,"Malformed data URL.")}return KY(t)}function GY(e,t){switch(e){case yA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw Xb(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case yA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw Xb(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=cve(t)}catch(a){throw a.message.includes("polyfill")?a:Xb(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class qY{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Xb(yA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=hve(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function Ave(e){const t=new qY(e);return t.base64?GY(yA.BASE64,t.rest):dve(t.rest)}function fve(e){return new qY(e).contentType}function hve(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,r){let n=0,a="";C7(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(C7(this.data_)){const n=this.data_,a=lve(n,t,r);return a===null?null:new v0(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new v0(n,!0)}}static getBlob(...t){if(HO()){const r=t.map(n=>n instanceof v0?n.data_:n);return new v0(ove.apply(null,r))}else{const r=t.map(i=>QO(i)?uve(yA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new v0(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(e){let t;try{t=JSON.parse(e)}catch{return null}return Jge(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mve(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function pve(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function XY(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gve(e,t){return t}class ol{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||gve}}let mE=null;function vve(e){return!QO(e)||e.length<2?e:XY(e)}function YY(){if(mE)return mE;const e=[];e.push(new ol("bucket")),e.push(new ol("generation")),e.push(new ol("metageneration")),e.push(new ol("name","fullPath",!0));function t(s,i){return vve(i)}const r=new ol("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new ol("size");return a.xform=n,e.push(a),e.push(new ol("timeCreated")),e.push(new ol("updated")),e.push(new ol("md5Hash",null,!0)),e.push(new ol("cacheControl",null,!0)),e.push(new ol("contentDisposition",null,!0)),e.push(new ol("contentEncoding",null,!0)),e.push(new ol("contentLanguage",null,!0)),e.push(new ol("contentType",null,!0)),e.push(new ol("metadata","customMetadata",!0)),mE=e,mE}function xve(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new Bc(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function bve(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return xve(n,e),n}function JY(e,t,r){const n=WY(t);return n===null?null:bve(e,n,r)}function yve(e,t,r,n){const a=WY(t);if(a===null||!QO(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),p=VO(h,r,n),g=$Y({alt:"media",token:u});return p+g})[0]}function wve(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}class ZY{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eJ(e){if(!e)throw UO()}function Eve(e,t){function r(n,a){const s=JY(e,a,t);return eJ(s!==null),s}return r}function Cve(e,t){function r(n,a){const s=JY(e,a,t);return eJ(s!==null),yve(s,a,e.host,e._protocol)}return r}function tJ(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Pge():a=Rge():r.getStatus()===402?a=Dge(e.bucket):r.getStatus()===403?a=Lge(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function _ve(e){const t=tJ(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=Oge(e.path)),s.serverResponse=a.serverResponse,s}return r}function Sve(e,t,r){const n=t.fullServerUrl(),a=VO(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new ZY(a,s,Cve(e,r),i);return o.errorHandler=_ve(t),o}function Nve(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function kve(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=Nve(null,t)),n}function Bve(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let S="";for(let k=0;k<2;k++)S=S+Math.random().toString().slice(2);return S}const l=o();i["Content-Type"]="multipart/related; boundary="+l;const u=kve(t,n,a),d=wve(u,r),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=v0.getBlob(f,n,h);if(p===null)throw zge();const g={name:u.fullPath},v=VO(s,e.host,e._protocol),b="POST",y=e.maxUploadRetryTime,_=new ZY(v,b,Eve(e,r),y);return _.urlParams=g,_.headers=i,_.body=p.uploadData(),_.errorHandler=tJ(t),_}class Tve{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw X1("cannot .send() more than once");if(ch(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw X1("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw X1("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw X1("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw X1("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Ive extends Tve{initXhr(){this.xhr_.responseType="text"}}function rJ(){return new Ive}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(t,r){this._service=t,r instanceof Bc?this._location=r:this._location=Bc.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Fp(t,r)}get root(){const t=new Bc(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XY(this._location.path)}get storage(){return this._service}get parent(){const t=mve(this._location.path);if(t===null)return null;const r=new Bc(this._location.bucket,t);return new Fp(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Gge(t)}}function jve(e,t,r){e._throwIfRoot("uploadBytes");const n=Bve(e.storage,e._location,YY(),new v0(t,!0),r);return e.storage.makeRequestWithTokens(n,rJ).then(a=>({metadata:a,ref:e}))}function Fve(e){e._throwIfRoot("getDownloadURL");const t=Sve(e.storage,e._location,YY());return e.storage.makeRequestWithTokens(t,rJ).then(r=>{if(r===null)throw $ge();return r})}function Ove(e,t){const r=pve(e._location.path,t),n=new Bc(e._location.bucket,r);return new Fp(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dve(e){return/^[A-Za-z]+:\/\//.test(e)}function Rve(e,t){return new Fp(e,t)}function nJ(e,t){if(e instanceof zO){const r=e;if(r._bucket==null)throw Vge();const n=new Fp(r,r._bucket);return t!=null?nJ(n,t):n}else return t!==void 0?Ove(e,t):e}function Pve(e,t){if(t&&Dve(t)){if(e instanceof zO)return Rve(e,t);throw dj("To use ref(service, url), the first argument must be a Storage instance.")}else return nJ(e,t)}function S7(e,t){const r=t==null?void 0:t[VY];return r==null?null:Bc.makeFromBucketSpec(r,e)}function Lve(e,t,r,n={}){e.host=`${t}:${r}`;const a=ch(t);a&&(I5(`https://${e.host}/b`),j5("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:SW(s,e.app.options.projectId))}class zO{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=HY,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jge,this._maxUploadRetryTime=Fge,this._requests=new Set,a!=null?this._bucket=Bc.makeFromBucketSpec(a,this._host):this._bucket=S7(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Bc.makeFromBucketSpec(this._url,t):this._bucket=S7(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){_7("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){_7("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Cc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Fp(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new qge(zY());{const i=sve(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const N7="@firebase/storage",k7="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aJ="storage";function $O(e,t,r){return e=va(e),jve(e,t,r)}function KO(e){return e=va(e),Fve(e)}function GO(e,t){return e=va(e),Pve(e,t)}function qO(e=F5(),t){e=va(e);const n=pw(e,aJ).getImmediate({identifier:t}),a=U6("storage");return a&&Mve(n,...a),n}function Mve(e,t,r,n={}){Lve(e,t,r,n)}function Uve(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new zO(r,n,a,t,Gp)}function Qve(){V0(new Kf(aJ,Uve,"PUBLIC").setMultipleInstances(!0)),Tu(N7,k7,""),Tu(N7,k7,"esm2020")}Qve();const Hve={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.appspot.com",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},WO=V6(Hve),Tw=dX(WO),Rr=TY(WO),sJ=qO(WO),Vve=Object.freeze(Object.defineProperty({__proto__:null,auth:Tw,db:Rr,storage:sJ},Symbol.toStringTag,{value:"Module"})),zve=async(e,t)=>{try{return(await she(Tw,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},hB=async()=>{try{await lhe(Tw)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},$ve=async e=>{try{await ahe(Tw,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},iJ=async e=>{try{const t=pr(Rr,"usuarios",e),r=await kw(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var er=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(er||{}),un=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(un||{}),Xm=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Xm||{});const Kve=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),gi="w-6 h-6",sN="w-24 h-24",XO=()=>c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),Gve=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),qve=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Wve=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),kb=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Bb=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),oJ=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Xve=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:sN,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),Yve=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:sN,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Jve=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:sN,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Zve=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:sN,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),exe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),B7=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),pE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),mB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),gE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),pB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),T7=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),txe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),rxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),nxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),axe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),I7=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),sxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),gB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),ixe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:gi,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),oxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),j7=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:gi,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),lxe=[{id:er.SUBDIRECCION,label:"Subdirección Pedagógica",icon:c.jsx(Xve,{})},{id:er.PROFESORADO,label:"Profesorado",icon:c.jsx(Yve,{})},{id:er.COORDINACION_TP,label:"Coordinación TP",icon:c.jsx(Jve,{})},{id:er.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(Zve,{})}],cxe={[er.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(exe,{})},{name:"Administración",icon:c.jsx(axe,{})},{name:"Seguimiento Curricular",icon:c.jsx(oxe,{})},{name:"Acompañamiento docente",icon:c.jsx(nxe,{})},{name:"Análisis Taxonómico",icon:c.jsx(j7,{})},{name:"Interdisciplinario",icon:c.jsx(gB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(B7,{})},{name:"Crear horarios",icon:c.jsx(mB,{})},{name:"Seguimiento de acciones pedagógicas",icon:c.jsx(gE,{})},{name:"Inclusión",icon:c.jsx(I7,{})},{name:"Calendario Académico",icon:c.jsx(pE,{})},{name:"Muro de Anuncios",icon:c.jsx(kb,{})},{name:"Mensajería Interna",icon:c.jsx(Bb,{})},{name:"Generador de Actas",icon:c.jsx(pB,{})}],[er.PROFESORADO]:[{name:"Planificación",icon:c.jsx(T7,{})},{name:"Mis Acompañamientos",icon:c.jsx(sxe,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(txe,{})},{name:"Análisis Taxonómico",icon:c.jsx(j7,{})},{name:"Interdisciplinario",icon:c.jsx(gB,{})},{name:"Inclusión",icon:c.jsx(I7,{})},{name:"Actividades Remotas",icon:c.jsx(rxe,{})},{name:"Evaluación de Aprendizajes",icon:c.jsx(pB,{})},{name:"Evaluaciones Formativas",icon:c.jsx(gE,{})},{name:"Calendario Académico",icon:c.jsx(pE,{})},{name:"Muro de Anuncios",icon:c.jsx(kb,{})},{name:"Mensajería Interna",icon:c.jsx(Bb,{})},{name:"Generador de Actas",icon:c.jsx(B7,{})}],[er.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(gE,{})},{name:"Asistencia Dual",icon:c.jsx(mB,{})},{name:"Pañol",icon:c.jsx(ixe,{})},{name:"Gestión de Empresas",icon:c.jsx(Kve,{})},{name:"Calendario Académico",icon:c.jsx(pE,{})},{name:"Muro de Anuncios",icon:c.jsx(kb,{})},{name:"Mensajería Interna",icon:c.jsx(Bb,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Generador de Actas",icon:c.jsx(pB,{})}],[er.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(T7,{})},{name:"Evaluación Formativa",icon:c.jsx(gE,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(gB,{})},{name:"Asistencia a Empresa",icon:c.jsx(mB,{})},{name:"Calendario Académico",icon:c.jsx(pE,{})},{name:"Muro de Anuncios",icon:c.jsx(kb,{})},{name:"Mensajería Interna",icon:c.jsx(Bb,{})}]},F7=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],vE=["Pendiente","En Proceso","Cumplida"],xv=["1º Medio","2º Medio","3º Medio","4º Medio"],qi=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],_s=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Aj=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],GC=["Lunes","Martes","Miércoles","Jueves","Viernes"],fj=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],uxe={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},Pv={[un.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[un.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[un.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[un.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},dxe=Object.values(Xm),vB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],xB=["Vinculado","Desvinculado","En proceso","Empresa"],hp=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Axe=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],$_=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],Yb=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],lJ=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],xE=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],fxe=["Mecánica Industrial","Mecánica Automotriz"],hxe=["INACAP","UNAB","DUOC","Universidad de Las Américas"],mxe={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},pxe=["Pasantía","Visita","Certificación","Formación en empresa"],gxe={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},vxe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},xxe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=I.useState(""),[s,i]=I.useState(""),[o,l]=I.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),l("forgot_sent")},f=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:r})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(XO,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},bE=({trigger:e,children:t,onOpen:r})=>{const[n,a]=I.useState(!1),s=I.useRef(null),i=()=>{const l=!n;a(l),l&&r&&r()},o=l=>{s.current&&!s.current.contains(l.target)&&a(!1)};return I.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:s,children:[c.jsx("div",{onClick:i,children:e}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},O7="usuariosLiceo",bxe=({user:e,onClose:t,onSave:r})=>{const[n,a]=I.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...e,...n};try{const u=localStorage.getItem(O7);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=l:d.push(l),localStorage.setItem(O7,JSON.stringify(d)),r(l),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},D7="usuariosLiceo",yxe=({user:e,onClose:t,onSave:r})=>{const[n,a]=I.useState(""),[s,i]=I.useState(""),[o,l]=I.useState(null),u=d=>{if(d.preventDefault(),l(null),!n){l("La contraseña no puede estar en blanco.");return}if(n!==s){l("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(D7);let p=h?JSON.parse(h):[];const g=p.findIndex(v=>v.id===e.id);g>-1?p[g]=f:p.push(f),localStorage.setItem(D7,JSON.stringify(p)),r(f),t()}catch(h){console.error("Failed to save new password:",h),l("No se pudo guardar la nueva contraseña.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wxe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Exe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),R7=e=>{const t=Exe(e);return t.charAt(0).toUpperCase()+t.slice(1)},cJ=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Cxe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _xe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sxe=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},l)=>I.createElement("svg",{ref:l,..._xe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:cJ("lucide",a),...!s&&!Cxe(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>I.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=(e,t)=>{const r=I.forwardRef(({className:n,...a},s)=>I.createElement(Sxe,{ref:s,iconNode:t,className:cJ(`lucide-${wxe(R7(e))}`,`lucide-${e}`,n),...a}));return r.displayName=R7(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nxe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],kxe=Yn("book-open",Nxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bxe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Txe=Yn("briefcase",Bxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ixe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],jxe=Yn("building",Ixe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fxe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Oxe=Yn("calendar-check",Fxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dxe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Rxe=Yn("chart-column",Dxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pxe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Lxe=Yn("chevron-left",Pxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mxe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Uxe=Yn("chevron-right",Mxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qxe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Hxe=Yn("clipboard-list",Qxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vxe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zxe=Yn("clock",Vxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $xe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],uJ=Yn("download",$xe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kxe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Gxe=Yn("funnel",Kxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qxe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Wxe=Yn("hash",qxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xxe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Yxe=Yn("info",Xxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jxe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Zxe=Yn("layout-dashboard",Jxe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],t1e=Yn("mail",e1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],hj=Yn("map-pin",r1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1e=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],a1e=Yn("megaphone",n1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],i1e=Yn("message-square",s1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],dJ=Yn("pencil",o1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],AJ=Yn("plus",l1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1e=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],u1e=Yn("puzzle",c1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1e=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],A1e=Yn("route",d1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fJ=Yn("save",f1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],mj=Yn("square-plus",h1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],p1e=Yn("star",m1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],v1e=Yn("target",g1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Iw=Yn("trash-2",x1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],y1e=Yn("upload",b1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],P7=Yn("user",w1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],C1e=Yn("users",E1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],S1e=Yn("video",_1e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],L7=Yn("x",N1e);async function k1e(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:jp()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await ea(Ut(Rr,"notificaciones"),t)).id}function B1e(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(l=>{l.id&&(i.has(l.id)||i.set(l.id,l))});const o=Array.from(i.values()).sort((l,u)=>{var h,p;const d=(h=l.createdAt)!=null&&h.toDate?l.createdAt.toDate().getTime():0;return((p=u.createdAt)!=null&&p.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=nr(Ut(Rr,"notificaciones"),Ln("docenteEmailLower","==",e.email.toLowerCase()),Kr("createdAt","desc"));r.push(wr(i,o=>{n=o.docs.map(l=>({id:l.id,...l.data()})),s()}))}if(e.nombreCompleto){const i=nr(Ut(Rr,"notificaciones"),Ln("docenteNombre","==",e.nombreCompleto),Kr("createdAt","desc"));r.push(wr(i,o=>{a=o.docs.map(l=>({id:l.id,...l.data()})),s()}))}return()=>r.forEach(i=>i())}async function T1e(e){const t=pr(Rr,"notificaciones",e);await cm(t,{leida:!0})}async function I1e(e){const t=pr(Rr,"notificaciones",e);await Ys(t)}const M7="anunciosMuro",U7="mensajesInternos",Q7="lir-read-status",j1e=({user:e})=>{if(e.fotoUrl)return c.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},F1e=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[u,d]=I.useState([]),[f,h]=I.useState([]),[p,g]=I.useState(!1),[v,b]=I.useState(!1),[y,_]=I.useState([]),S=I.useCallback(()=>{try{const N=localStorage.getItem(`${Q7}-${e.id}`);return N?JSON.parse(N):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),k=I.useCallback(N=>{try{localStorage.setItem(`${Q7}-${e.id}`,JSON.stringify(N))}catch(R){console.error("Failed to set read status:",R)}},[e.id]);I.useEffect(()=>{const N=JSON.parse(localStorage.getItem(M7)||"[]"),R=S();d(N.filter(j=>!R.announcements.includes(j.id)));const O=JSON.parse(localStorage.getItem(U7)||"[]");h(O.filter(j=>j.para===e.email).sort((j,U)=>new Date(U.fecha).getTime()-new Date(j.fecha).getTime()).slice(0,5))},[e.id,S,o]),I.useEffect(()=>{if(!(e!=null&&e.email))return;const N=B1e({email:e.email,nombreCompleto:e.nombreCompleto},R=>{const O=R.filter(j=>j.tipo&&(j.tipo.toLowerCase()==="pie"||j.tipo==="nueva_intervencion"));_(O)});return()=>N()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const B=()=>{const N=S(),R=JSON.parse(localStorage.getItem(M7)||"[]").map(O=>O.id);N.announcements=R,k(N),d([])},F=()=>{const N=S(),O=JSON.parse(localStorage.getItem(U7)||"[]").filter(j=>j.para===e.email).map(j=>j.id);N.messages=[...new Set([...N.messages,...O])],k(N),l()},w=y.filter(N=>!N.leida).length,C=N=>{var R;try{const O=(R=N.createdAt)!=null&&R.toDate?N.createdAt.toDate():new Date(N.createdAt);return O?O.toLocaleString("es-CL"):""}catch{return""}};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:c.jsx(qve,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:c.jsx(Wve,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),c.jsx(bE,{onOpen:B,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[c.jsx(kb,{}),u.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(N=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:N.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:N.mensaje})]},N.id)),u.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(bE,{trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[c.jsx(u1e,{className:"w-5 h-5"}),w>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:w})]}),children:c.jsxs("div",{className:"p-2 w-80",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),c.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&c.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(N=>c.jsx("li",{className:"p-2 text-sm",children:c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:N.titulo}),c.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:N.mensaje}),N.estudianteNombre&&c.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",c.jsx("b",{children:N.estudianteNombre})]}),c.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:C(N)})]}),c.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!N.leida&&c.jsx("button",{onClick:()=>N.id&&T1e(N.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),c.jsx("button",{onClick:()=>N.id&&I1e(N.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},N.id))]})]})}),c.jsx(bE,{onOpen:F,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(Bb,{}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(N=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",N.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:N.asunto})]},N.id)),f.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(bE,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(j1e,{user:e})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&c.jsx("li",{children:c.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),c.jsx("li",{children:c.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&c.jsx(bxe,{user:e,onClose:()=>g(!1),onSave:n}),v&&c.jsx(yxe,{user:e,onClose:()=>b(!1),onSave:n})]})},O1e={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.appspot.com",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},YO=rU().length?rU()[0]:V6(O1e),Ft=TY(YO),D1e=dX(YO),R1e=qO(YO),jw="reemplazos_docentes",P1e="usuarios",JO=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},L1e=e=>{const t=e.data();return{id:e.id,...t}},M1e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:yr.fromDate(new Date),fechaActualizacion:yr.fromDate(new Date)};return(await ea(Ut(Ft,jw),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},U1e=async(e,t)=>{try{const r=pr(Ft,jw,e),n=await kw(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Ys(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},Q1e=(e,t,r=50)=>{try{const n=nr(Ut(Ft,jw),Ln("userId","==",e),Kr("diaAusencia","desc"),FA(r));return wr(n,a=>{const s=a.docs.map(JO);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},H1e=e=>{try{const t=nr(Ut(Ft,P1e),Ln("profile","==",er.PROFESORADO));return wr(t,n=>{const a=n.docs.map(L1e);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},V1e=async e=>{try{const t=nr(Ut(Ft,jw),Ln("userId","==",e)),n=(await qs(t)).docs.map(JO),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},z1e=async(e,t)=>{try{if(!t.trim())return[];const r=nr(Ut(Ft,jw),Ln("userId","==",e),Kr("diaAusencia","desc"),FA(100)),a=(await qs(r)).docs.map(JO),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},$1e=Array.from({length:12},(e,t)=>t+1),H7={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},K1e=e=>{const[t,r]=I.useState([]),[n,a]=I.useState(!0),[s,i]=I.useState(null);I.useEffect(()=>e?Q1e(e,f=>{r(f),a(!1)}):void 0,[e]);const o=I.useCallback(async d=>{try{return i(null),await M1e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),l=I.useCallback(async d=>{try{i(null),await U1e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=I.useCallback(async d=>{try{return i(null),d.trim()?await z1e(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:l,search:u}},G1e=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(!0);I.useEffect(()=>H1e(i=>{t(i),n(!1)}),[]);const a=I.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},q1e=({selectedBlocks:e,onChange:t,legend:r,disabled:n=!1})=>c.jsxs("fieldset",{children:[c.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:$1e.map(a=>c.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[c.jsx("input",{type:"checkbox",value:a,checked:e.includes(a),onChange:t,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),c.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:a})]},a))})]}),W1e=({userId:e})=>{const[t,r]=I.useState(null),[n,a]=I.useState(!1),s=I.useCallback(async()=>{try{a(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),u=await V1e(e);r(u)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{a(!1)}},[e]);return I.useEffect(()=>{e&&s()},[e,s]),n?c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("div",{className:"animate-pulse flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):t?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.totalReemplazos}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.horasRealizadas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:t.horasCubiertas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[t.porcentajeRealizadas.toFixed(1),"%"]}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},X1e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=K1e(t),{profesorNames:l,loading:u}=G1e(),[d,f]=I.useState(H7),[h,p]=I.useState(""),[g,v]=I.useState([]),[b,y]=I.useState(null),[_,S]=I.useState(!1),[k,B]=I.useState(!1);I.useEffect(()=>{(async()=>{if(!h.trim()){v(r);return}B(!0);try{const j=await s(h);v(j)}catch(j){console.error("Error en búsqueda:",j),v(r)}finally{B(!1)}})()},[r,h,s]);const F=I.useCallback(O=>{const{name:j,value:U}=O.target;f(P=>({...P,[j]:U}))},[]),w=I.useCallback(O=>{const j=parseInt(O.target.value,10);f(U=>{const P=U.bloquesAfectados,X=P.includes(j)?P.filter(K=>K!==j):[...P,j].sort((K,Z)=>K-Z);return{...U,bloquesAfectados:X}})},[]),C=I.useCallback(async O=>{O.preventDefault(),y(null),S(!0);const{docenteAusente:j,asignaturaAusente:U,curso:P,diaAusencia:X,bloquesAfectados:K,docenteReemplazante:Z,asignaturaReemplazante:H}=d;if(!j||!U||!P||!X||!Z||!H||K.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),S(!1);return}if(j===Z){y("El docente ausente y el reemplazante no pueden ser la misma persona."),S(!1);return}const V=new Date(X),q=new Date;if(q.setHours(0,0,0,0),V<q&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){S(!1);return}try{const ne=U.trim().toLowerCase()===H.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",L={...d,resultado:ne};await n(L),f(H7);const W=ne==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",J=document.createElement("div");J.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",J.textContent=W,document.body.appendChild(J),setTimeout(()=>{document.body.contains(J)&&document.body.removeChild(J)},3e3)}catch(ne){console.error("Error al guardar reemplazo:",ne),y("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{S(!1)}},[d,n]),N=I.useCallback(async O=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await a(O)}catch(j){console.error("Error al eliminar reemplazo:",j),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[a]),R="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!e||!e.email&&!e.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx(W1e,{userId:t}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:F,className:R,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:F,className:R,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:d.curso,onChange:F,className:R,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),_s.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:F,className:R,disabled:_,required:!0})]}),c.jsx(q1e,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:w,disabled:_})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:F,className:R,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:F,className:R,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),c.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(b||o)&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:b||o})}),c.jsx("div",{className:"pt-4 text-right",children:c.jsxs("button",{type:"submit",disabled:_||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[_&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),_?"Registrando...":"Registrar Reemplazo"]})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:h,onChange:O=>p(O.target.value),className:`${R} md:w-1/2 pl-10`,disabled:k}),c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:k?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),h&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:k?"Buscando...":`${g.length} resultado(s) encontrado(s)`})]}),i?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:g.length>0?g.map(O=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(O.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:O.curso}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[O.docenteAusente,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:O.asignaturaAusente})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[O.docenteReemplazante,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:O.asignaturaReemplazante})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:O.bloquesAfectados.join(", ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${O.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:O.resultado})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>N(O.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:_,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},O.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),g.length>0&&!h&&c.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",g.length," registros"]})]})]})},Y1e=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=Ut(Rr,"reemplazos"),r=nr(t,Kr("fecha","desc"));return wr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},J1e=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=Ut(Rr,"acompanamientos"),r=nr(t,Kr("fecha","desc"));return wr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},Z1e=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=Ut(Rr,"calendar_events"),r=nr(t,Kr("date","asc"));return wr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},oA=({title:e,value:t,description:r,isLoading:n=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Hm=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=I.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=I.useMemo(()=>Math.max(...s,1),[s]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},ebe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState([]),[a,s]=I.useState([]),[i,o]=I.useState(!0),[l,u]=I.useState(null);return I.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const p=Y1e(b=>{t(b),h()}),g=J1e(b=>{n(b),h()}),v=Z1e(b=>{s(b),h()});return()=>{p(),g(),v()}}catch(p){console.error("❌ Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:l}},tbe=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=ebe(),[i,o]=I.useState(Yb);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),I.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):Yb)}catch(p){console.error("Error al leer rúbrica personalizada",p),o(Yb)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=I.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(B=>B.resultado==="Hora realizada").length,v=p-g,b=`${(g/p*100).toFixed(1)}%`,y=(B,F)=>B.reduce((w,C)=>{const N=C[F];return typeof N=="string"&&(w[N]=(w[N]||0)+1),w},{}),_=y(t,"docenteAusente"),S=y(t,"docenteReemplazante"),k=y(t,"curso");return{totalInasistencias:p,horasRealizadas:g,horasCubiertas:v,tasaCobertura:b,inasistenciasPorDocente:Object.entries(_).map(([B,F])=>({label:B,value:F})),reemplazosPorDocente:Object.entries(S).map(([B,F])=>({label:B,value:F})),inasistenciasPorCurso:Object.entries(k).map(([B,F])=>({label:B,value:F})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:v}]}},[t]),u=I.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(F=>{F.criteria.forEach(w=>{g.set(w.name,F.domain)})});let v=0,b=0;const y={},_={};r.forEach(F=>{y[F.docente]||(y[F.docente]={total:0,count:0}),Object.entries(F.rubricaResultados).forEach(([w,C])=>{v+=C,b++,y[F.docente].total+=C,y[F.docente].count++;const N=g.get(w);N&&(_[N]||(_[N]={total:0,count:0}),_[N].total+=C,_[N].count++)})});const S=b>0?(v/b).toFixed(2):"N/A",k=Object.entries(y).map(([F,w])=>({label:F,value:w.count>0?(w.total/w.count).toFixed(2):0})),B=Object.entries(_).map(([F,w])=>({label:F,value:w.count>0?(w.total/w.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:S,desempenoPorDocente:k,desempenoPorDominio:B}},[r,i]),d=I.useMemo(()=>{const p={[un.EVALUACION]:0,[un.ACTO]:0,[un.ACTIVIDAD_FOCALIZADA]:0,[un.SALIDA_PEDAGOGICA]:0};for(const v of n)p.hasOwnProperty(v.type)&&p[v.type]++;const g=Object.entries(p).map(([v,b])=>({label:Pv[v].label,value:b}));return{totalEvaluaciones:p[un.EVALUACION],totalActos:p[un.ACTO],totalActividadesFocalizadas:p[un.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[un.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"📊"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),c.jsx("p",{children:"• Calendario Académico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(oA,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:a}),c.jsx(oA,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),c.jsx(oA,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),c.jsx(oA,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Hm,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),c.jsx(Hm,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),c.jsx(Hm,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),c.jsx(Hm,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(oA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),c.jsx(oA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Hm,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),c.jsx(Hm,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(oA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),c.jsx(oA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),c.jsx(oA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),c.jsx(oA,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Hm,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,g)=>{var v,b;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin título"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",p.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((v=Pv[p.type])==null?void 0:v.color)||"bg-gray-100 text-gray-800"}`,children:((b=Pv[p.type])==null?void 0:b.label)||p.type})]})},p.id||g)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var V7;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(V7||(V7={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z7;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(z7||(z7={}));var $7;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})($7||($7={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7=["user","model","function","system"];var G7;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(G7||(G7={}));var q7;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(q7||(q7={}));var W7;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(W7||(W7={}));var X7;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(X7||(X7={}));var Jb;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Jb||(Jb={}));var Y7;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Y7||(Y7={}));var J7;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(J7||(J7={}));var Z7;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Z7||(Z7={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Lg extends qo{constructor(t,r){super(t),this.response=r}}class hJ extends qo{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class O0 extends qo{}class mJ extends qo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rbe="https://generativelanguage.googleapis.com",nbe="v1beta",abe="0.24.1",sbe="genai-js";var Op;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Op||(Op={}));class ibe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||nbe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||rbe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function obe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${sbe}/${abe}`),t.join(" ")}async function lbe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",obe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new O0(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new O0(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new O0(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function cbe(e,t,r,n,a,s){const i=new ibe(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},fbe(s)),{method:"POST",headers:await lbe(i),body:a})}}async function Fw(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:l}=await cbe(e,t,r,n,a,s);return ube(o,l,i)}async function ube(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){dbe(a,e)}return n.ok||await Abe(n,e),n}function dbe(e,t){let r=e;throw r.name==="AbortError"?(r=new mJ(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof hJ||e instanceof O0||(r=new qo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function Abe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new hJ(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function fbe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),qC(e.candidates[0]))throw new Lg(`${u0(e)}`,e);return hbe(e)}else if(e.promptFeedback)throw new Lg(`Text not available. ${u0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),qC(e.candidates[0]))throw new Lg(`${u0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),e9(e)[0]}else if(e.promptFeedback)throw new Lg(`Function call not available. ${u0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),qC(e.candidates[0]))throw new Lg(`${u0(e)}`,e);return e9(e)}else if(e.promptFeedback)throw new Lg(`Function call not available. ${u0(e)}`,e)},e}function hbe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function e9(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const mbe=[Jb.RECITATION,Jb.SAFETY,Jb.LANGUAGE];function qC(e){return!!e.finishReason&&mbe.includes(e.finishReason)}function u0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];qC(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function By(e){return this instanceof By?(this.v=e,this):new By(e)}function pbe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(p){return new Promise(function(g,v){s.push([h,p,g,v])>1||o(h,p)})})}function o(h,p){try{l(n[h](p))}catch(g){f(s[0][3],g)}}function l(h){h.value instanceof By?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function f(h,p){h(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function gbe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=bbe(t),[n,a]=r.tee();return{stream:xbe(n),response:vbe(a)}}async function vbe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return ZO(ybe(t));t.push(a)}}function xbe(e){return pbe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield By(r.read());if(a)break;yield yield By(ZO(n))}})}function bbe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new qo("Failed to parse stream"));return}n.close();return}a+=i;let l=a.match(t9),u;for(;l;){try{u=JSON.parse(l[1])}catch{n.error(new qo(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(u),a=a.substring(l[0].length),l=a.match(t9)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new mJ("Request aborted when reading from the stream"):o=new qo("Error reading from the stream"),o})}}})}function ybe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pJ(e,t,r,n){const a=await Fw(t,Op.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return gbe(a)}async function gJ(e,t,r,n){const s=await(await Fw(t,Op.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:ZO(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vJ(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Ty(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return wbe(t)}function wbe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new qo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new qo("No content is provided for sending chat message.");return n?t:r}function Ebe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new O0("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=Ty(e);n.contents=[s]}return{generateContentRequest:n}}function r9(e){let t;return e.contents?t=e:t={contents:[Ty(e)]},e.systemInstruction&&(t.systemInstruction=vJ(e.systemInstruction)),t}function Cbe(e){return typeof e=="string"||Array.isArray(e)?{content:Ty(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],_be={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Sbe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new qo(`First content should be with role 'user', got ${n}`);if(!K7.includes(n))throw new qo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(K7)}`);if(!Array.isArray(a))throw new qo("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new qo("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const l of n9)l in o&&(s[l]+=1);const i=_be[n];for(const o of n9)if(!i.includes(o)&&s[o]>0)throw new qo(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function a9(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="SILENT_ERROR";class Nbe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(Sbe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,l;await this._sendPromise;const u=Ty(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>gJ(this._apiKey,this.model,d,f)).then(p=>{var g;if(a9(p.response)){this._history.push(u);const v=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(v)}else{const v=u0(p.response);v&&console.warn(`sendMessage() was unsuccessful. ${v}. Inspect response object for details.`)}h=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,o,l;await this._sendPromise;const u=Ty(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=pJ(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(p=>{throw new Error(s9)}).then(p=>p.response).then(p=>{if(a9(p)){this._history.push(u);const g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=u0(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==s9&&console.error(p)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kbe(e,t,r,n){return(await Fw(t,Op.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bbe(e,t,r,n){return(await Fw(t,Op.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function Tbe(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await Fw(t,Op.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=vJ(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=r9(t),s=Object.assign(Object.assign({},this._requestOptions),r);return gJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=r9(t),s=Object.assign(Object.assign({},this._requestOptions),r);return pJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new Nbe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=Ebe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return kbe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=Cbe(t),a=Object.assign(Object.assign({},this._requestOptions),r);return Bbe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return Tbe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new qo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new i9(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new O0("Cached content must contain a `name` field.");if(!t.model)throw new O0("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===l)continue}throw new O0(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new i9(this.apiKey,s,n)}}const eD="horario_asignaciones",xJ="horarios_generados",Ibe="usuarios",bJ=e=>{const t=e.data();return{id:e.id,...t}},jbe=e=>{const t=nr(Ut(Ft,eD));return wr(t,n=>{const a=n.docs.map(s=>bJ(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},Fbe=async e=>{try{return(await ea(Ut(Ft,eD),e)).id}catch(t){throw console.error("Error al agregar asignación:",t),new Error("No se pudo agregar la asignación.")}},Obe=async e=>{try{const t=pr(Ft,eD,e);await Ys(t)}catch(t){throw console.error("Error al eliminar asignación:",t),new Error("No se pudo eliminar la asignación.")}},o9=async e=>{try{const t=pr(Ft,xJ,"global");await xo(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},Dbe=e=>{const t=pr(Ft,xJ,"global");return wr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},Rbe=e=>{const t=nr(Ut(Ft,Ibe),Ln("profile","==",er.PROFESORADO));return wr(t,n=>{const a=n.docs.map(s=>bJ(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},Pbe=({horarios:e})=>Object.keys(e).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),_s.map(t=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),c.jsx("tbody",{children:GC.map(t=>c.jsxs(lt.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+_s.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),fj.map(({bloque:r,inicio:n,fin:a})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),_s.map(s=>{var o,l;const i=(l=(o=e[s])==null?void 0:o[t])==null?void 0:l[r];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),Lbe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState({curso:"",asignatura:"",profesor:""}),[a,s]=I.useState([]),[i,o]=I.useState({}),[l,u]=I.useState(_s[0]),[d,f]=I.useState(!1),[h,p]=I.useState(!0),[g,v]=I.useState(null),[b,y]=I.useState(null),[_,S]=I.useState(null),[k,B]=I.useState({asignatura:"",profesor:""}),[F,w]=I.useState("edicion"),[C,N]=I.useState("");I.useEffect(()=>{p(!0);const H=jbe(t),V=Dbe(o),q=Rbe(ne=>{const L=ne.map(W=>W.nombreCompleto).sort();s(L),p(!1)});return()=>{H(),V(),q()}},[]);const R=async H=>{if(H.preventDefault(),v(null),!r.curso||!r.asignatura||!r.profesor){v("Todos los campos de la asignación son obligatorios.");return}try{await Fbe({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(V){v(V instanceof Error?V.message:"Error al guardar la asignación.")}},O=async H=>{try{await Obe(H)}catch(V){v(V instanceof Error?V.message:"Error al eliminar la asignación.")}},j=async()=>{if(e.length===0){v("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}f(!0),v(null),y(null);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new os(H),q=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${GC.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(fj,null,2)}
                - Cursos del liceo: ${_s.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(uxe,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${C||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,te=(await(await V.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(q)).response).text().replace(/^```json\s*|```\s*$/g,""),ie=JSON.parse(te);await o9(ie),y("¡Horario generado y guardado con éxito!")}catch(H){console.error("Error al generar horario con IA:",H),v("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{f(!1)}},U=(H,V,q)=>{S({dia:H,bloque:V}),B({asignatura:(q==null?void 0:q.asignatura)||"",profesor:(q==null?void 0:q.profesor)||""})},P=async()=>{if(!_)return;const{dia:H,bloque:V}=_,q=JSON.parse(JSON.stringify(i));q[l]||(q[l]={}),q[l][H]||(q[l][H]={}),q[l][H][V]={asignatura:k.asignatura||null,profesor:k.profesor||null};try{await o9(q),S(null)}catch(ne){v(ne instanceof Error?ne.message:"Error al guardar la edición.")}},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=()=>{const H=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),GC.map(V=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:V},V))]})}),c.jsx("tbody",{children:fj.map(({bloque:V,inicio:q,fin:ne})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:V}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${q} - ${ne}`})]}),GC.map(L=>{var te;const W=(_==null?void 0:_.dia)===L&&(_==null?void 0:_.bloque)===V,J=(te=H[L])==null?void 0:te[V];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!W&&U(L,V,J),children:W?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:k.asignatura,onChange:ie=>B(Ae=>({...Ae,asignatura:ie.target.value})),className:X+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:k.profesor,onChange:ie=>B(Ae=>({...Ae,profesor:ie.target.value})),className:X+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>S(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:P,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):J!=null&&J.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:J.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",J.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${L}-${V}`)})]},V))})]})})},Z=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),c.jsxs("form",{onSubmit:R,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:r.curso,onChange:H=>n(V=>({...V,curso:H.target.value})),className:X,children:[c.jsx("option",{value:"",children:"Seleccione"}),_s.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:H=>n(V=>({...V,asignatura:H.target.value})),className:X,children:[c.jsx("option",{value:"",children:"Seleccione"}),qi.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:r.profesor,onChange:H=>n(V=>({...V,profesor:H.target.value})),className:X,children:[c.jsx("option",{value:"",children:"Seleccione"}),a.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:e.map(H=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[H.curso," - ",H.asignatura," - ",c.jsx("strong",{children:H.profesor})]}),c.jsx("button",{onClick:()=>O(H.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},H.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:C,onChange:H=>N(H.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:X})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:j,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),g&&c.jsx("p",{className:"text-red-600",children:g}),b&&c.jsx("p",{className:"text-green-600",children:b})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:H=>u(H.target.value),className:X+" md:w-1/3",children:_s.map(H=>c.jsx("option",{value:H,children:H},H))})]}),Object.keys(i).length>0?K():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return h?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>w("edicion"),className:`${F==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),c.jsx("button",{onClick:()=>w("global"),className:`${F==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),F==="edicion"?Z():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(Pbe,{horarios:i})]})]})},iN="acciones",Mbe=async()=>{try{const e=nr(Ut(Rr,iN),Kr("fechaRegistro","desc"));return(await qs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acciones:",e),new Error("No se pudieron cargar las acciones pedagógicas")}},Ube=async e=>{try{return{id:(await ea(Ut(Rr,iN),{...e,fechaRegistro:e.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acción:",t),new Error("No se pudo crear la acción pedagógica")}},l9=async(e,t)=>{try{const r=pr(Rr,iN,e);await cm(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",e),new Error("No se pudo actualizar la acción pedagógica")}},Qbe=async e=>{try{const t=pr(Rr,iN,e);await Ys(t)}catch(t){throw console.error("Error al eliminar acción:",t,"ID:",e),new Error("No se pudo eliminar la acción pedagógica")}},c9={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},Hbe={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},Vbe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(!1),[a,s]=I.useState(null),[i,o]=I.useState(c9),[l,u]=I.useState(null),[d,f]=I.useState(""),[h,p]=I.useState(""),[g,v]=I.useState(""),b=I.useCallback(async()=>{n(!0);try{const N=await Mbe();t(N),s(null)}catch(N){console.error("Error al cargar acciones:",N),s("No se pudieron cargar las acciones pedagógicas.")}finally{n(!1)}},[]);I.useEffect(()=>{b()},[b]);const y=I.useCallback(N=>{const{name:R,value:O}=N.target;o(j=>({...j,[R]:O}))},[]),_=I.useCallback(()=>{o(c9),u(null),s(null)},[]),S=I.useCallback(async N=>{if(N.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){s("Los campos responsables, área, descripción y fecha de cumplimiento son obligatorios.");return}try{l?await l9(l,i):await Ube(i),await b(),_()}catch(R){console.error("Error al guardar acción:",R),s("Error al guardar la acción.")}},[i,l,b,_]),k=I.useCallback(N=>{window.scrollTo({top:0,behavior:"smooth"}),u(N.id),o({...N,enlaceDocumento:N.enlaceDocumento||""})},[]),B=I.useCallback(async N=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await Qbe(N),await b()}catch(R){console.error("Error al eliminar acción:",R),s("No se pudo eliminar la acción.")}},[b]),F=I.useCallback(async N=>{try{const R=e.find(O=>O.id===N);if(R){const j=(vE.indexOf(R.estado)+1)%vE.length,U=vE[j];await l9(N,{estado:U}),await b()}}catch(R){console.error("Error al cambiar estado:",R),s("No se pudo cambiar el estado de la acción.")}},[e,b]),w=I.useMemo(()=>e.filter(N=>{const R=d===""||N.responsable.toLowerCase().includes(d.toLowerCase())||N.descripcion.toLowerCase().includes(d.toLowerCase()),O=h===""||N.area===h,j=g===""||N.estado===g;return R&&O&&j}),[e,d,h,g]),C="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:y,className:C})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:y,placeholder:"Nombre del responsable",className:C})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:y,className:C,children:[c.jsx("option",{value:"",children:"Seleccione un área"}),F7.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:y,rows:3,placeholder:"Detalle de la acción a realizar...",className:C})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:y,className:C})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),c.jsx("input",{type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:y,placeholder:"https://ejemplo.com/documento",className:C})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:_,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:N=>f(N.target.value),className:C+" md:col-span-1"}),c.jsxs("select",{value:h,onChange:N=>p(N.target.value),className:C,children:[c.jsx("option",{value:"",children:"Filtrar por Área"}),F7.map(N=>c.jsx("option",{value:N,children:N},N))]}),c.jsxs("select",{value:g,onChange:N=>v(N.target.value),className:C,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),vE.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):w.length>0?w.map(N=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:N.responsable}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:N.area})]}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:N.descripcion}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[c.jsxs("div",{children:["Reg: ",N.fechaRegistro]}),c.jsxs("div",{className:"font-semibold",children:["Comp: ",N.fechaCumplimiento]})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>F(N.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Hbe[N.estado]}`,children:N.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[N.enlaceDocumento&&c.jsx("a",{href:N.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:"🔗"}),c.jsx("button",{onClick:()=>k(N),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>B(N.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},N.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},oN="planificaciones",yJ="actividades_calendario",wJ=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},zbe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:yr.fromDate(new Date),fechaActualizacion:yr.fromDate(new Date)};return(await ea(Ut(Ft,oN),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},$be=async(e,t,r)=>{try{const n=pr(Ft,oN,e),a=await kw(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await cm(n,{...t,fechaActualizacion:yr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},Kbe=async(e,t)=>{try{const r=pr(Ft,oN,e),n=await kw(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await Ys(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},Gbe=(e,t)=>{const r=nr(Ut(Ft,oN),Ln("userId","==",e),Kr("fechaCreacion","desc"));return wr(r,n=>{const a=n.docs.map(wJ);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},qbe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:yr.fromDate(new Date),fechaActualizacion:yr.fromDate(new Date)};return(await ea(Ut(Ft,yJ),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Wbe=(e,t)=>{const r=nr(Ut(Ft,yJ),Ln("userId","==",e),Kr("fecha","desc"));return wr(r,n=>{const a=n.docs.map(wJ);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},Xbe=e=>{const[t,r]=I.useState([]),[n,a]=I.useState(!0),[s,i]=I.useState(null);return I.useEffect(()=>e?(a(!0),Gbe(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await zbe(d,e)}catch(f){throw i(f.message||"Error al guardar planificación"),f}},update:async(d,f)=>{try{i(null),await $be(d,f,e)}catch(h){throw i(h.message||"Error al actualizar planificación"),h}},remove:async d=>{try{i(null),await Kbe(d,e)}catch(f){throw i(f.message||"Error al eliminar planificación"),f}}}},pj=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},Ybe=e=>{const[t,r]=I.useState([]),[n,a]=I.useState(!0),[s,i]=I.useState(null);I.useEffect(()=>e?Wbe(e,u=>{r(u),a(!1)}):void 0,[e]);const o=I.useCallback(async l=>{try{return i(null),await qbe(l,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},Jbe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=I.useState(e),i=l=>{s({...a,[l.target.name]:l.target.value})},o=async()=>{try{await r(a),t()}catch(l){console.error("Error al guardar lección:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Zbe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=I.useState(e.progreso??0),[o,l]=I.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),l(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{l(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),c.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&c.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),c.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),c.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},eye=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=I.useState(e),[o,l]=I.useState(!1),u=f=>{const{name:h,value:p}=f.target,[g,v]=h.split(".");i(g==="momentosClase"?b=>({...b,momentosClase:{...b.momentosClase,[v]:p}}):b=>({...b,[h]:p}))},d=async()=>{l(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{l(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),c.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:"← Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:"🗑️ Eliminar Plan"}),c.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},tye=({userId:e})=>{const{actividades:t,save:r}=Ybe(e),[n,a]=I.useState("list"),[s,i]=I.useState(null),[o,l]=I.useState(!1),[u,d]=I.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=I.useState(f);I.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(F){console.error("Error al verificar evento en calendario:",F)}},v=F=>{const{name:w,value:C}=F.target;p(N=>({...N,[w]:C}))},b=(F,w,C)=>{p(N=>({...N,tareas:N.tareas.map(R=>R.id===F?{...R,[w]:C}:R)}))},y=()=>{p(F=>({...F,tareas:[...F.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},_=F=>{p(w=>({...w,tareas:w.tareas.filter(C=>C.id!==F)}))},S=async F=>{F.preventDefault(),l(!0);const w=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(C=>C.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{pj("Planificación - Actividad Calendario");const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",U=(await(await new os(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text(),P={...h,objetivo:U.replace(/(\*\*|\*)/g,"")},X=await r(P),K={...P,id:X};i(K),a("summary")}catch(C){console.error("Error al generar objetivo con IA:",C),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const N={...h,objetivo:"No generado"},R=await r(N),O={...N,id:R};i(O),a("summary")}catch(N){console.error("Error al guardar actividad:",N),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},k=async F=>{if(F)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(w){console.error("Error adding to calendar:",w),alert("Hubo un error al agregar la actividad al calendario.")}},B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:S,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:h.nombre,onChange:v,placeholder:"Nombre de la Actividad",className:B,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:v,className:B,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:v,className:B,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:v,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:B,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:v,placeholder:"Ubicación",className:B,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:h.participantes,onChange:v,placeholder:"Participantes",className:B,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:v,placeholder:"Recursos Generales Necesarios",rows:2,className:B,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((F,w)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>_(F.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),c.jsx("textarea",{value:F.descripcion,onChange:C=>b(F.id,"descripcion",C.target.value),placeholder:`Descripción de la Tarea ${w+1}`,rows:2,className:B,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:F.responsable,onChange:C=>b(F.id,"responsable",C.target.value),placeholder:"Responsable",className:B,required:!0,disabled:o}),c.jsx("input",{value:F.recursos,onChange:C=>b(F.id,"recursos",C.target.value),placeholder:"Recursos Necesarios",className:B,disabled:o})]})]},F.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:"✓"}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:s.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),c.jsx("p",{children:s.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),c.jsx("span",{children:s.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:s.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:s.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:s.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>k(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{a("form"),p(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:t.length>0?t.map(F=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:F.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(F.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",F.ubicacion]})]},F.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},rye=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=Xbe(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=I.useState(o),[d,f]=I.useState(null),[h,p]=I.useState(!1),[g,v]=I.useState(null),[b,y]=I.useState("unidad"),[_,S]=I.useState(null),[k,B]=I.useState(null),F=I.useMemo(()=>e.asignaturas||[],[e.asignaturas]),w=I.useMemo(()=>{const q=e.cursos||[],ne=new Set;return q.forEach(L=>{L.startsWith("1º")?ne.add("1º Medio"):L.startsWith("2º")?ne.add("2º Medio"):L.startsWith("3º")?ne.add("3º Medio"):L.startsWith("4º")&&ne.add("4º Medio")}),Array.from(ne)},[e.cursos]);I.useEffect(()=>{u(q=>({...q,asignatura:F[0]||"",nivel:w[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(q=>({id:q.id,autor:q.autor,tipo:q.tipo,coincideConUserId:q.autor===t}))})},[F,w,e,t,r]);const C=q=>{const{name:ne,value:L}=q.target;u(W=>({...W,[ne]:ne==="cantidadClases"?parseInt(L,10):L}))},N=()=>{const{asignatura:q,nivel:ne,nombreUnidad:L,contenidos:W,cantidadClases:J,observaciones:te,ideasParaUnidad:ie}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${q}
    - Nivel: ${ne}
    - Nombre de la Unidad: "${L}"
    - Contenidos clave a trabajar (insumo principal): "${W}"
    - Cantidad de clases para la unidad: ${J}
    - Ideas y perspectiva del docente para la unidad: "${ie||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${te||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${J} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},R=async q=>{if(q.preventDefault(),p(!0),v(null),!l.contenidos||!l.nombreUnidad){v("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{pj("Planificación - Unidad");const ne="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new os(ne).getGenerativeModel({model:"gemini-1.5-flash-latest"}),J=N(),te={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},oe=(await(await W.generateContent({contents:[{parts:[{text:J}]}],generationConfig:{responseMimeType:"application/json",responseSchema:te}})).response).text(),ce=JSON.parse(oe),ge={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:ce.objetivosAprendizaje,indicadoresEvaluacion:ce.indicadoresEvaluacion,detallesLeccion:ce.detallesLeccion};if(d)await a(d.id,ge),f({...ge,id:d.id});else{const je=await n(ge);f({...ge,id:je})}}catch(ne){console.error("Error al generar planificación con IA",ne),v("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{p(!1)}},O=async(q,ne)=>{p(!0),v(null);const L=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ne.asignatura}
    - Nivel: ${ne.nivel}
    - Objetivo de la clase: ${q.objetivosAprendizaje}
    - Contenidos: ${q.contenidosConceptuales}
    - Actividades sugeridas: ${q.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{pj("Planificación - Utilizar Clase");const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",te=new os(W).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ie={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ce=(await(await te.generateContent({contents:[{parts:[{text:L}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ie}})).response).text(),ge=JSON.parse(ce),je={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:ne.asignatura,nivel:ne.nivel,contenidos:q.contenidosConceptuales,observaciones:"",nombreClase:q.actividades,duracionClase:80,momentosClase:ge,detalleLeccionOrigen:q};await n(je),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),y("clase")}catch(W){console.error("Error al generar plan de clase con IA",W),v("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{p(!1)}},j=q=>{q.tipo==="Unidad"&&(u({asignatura:q.asignatura,nivel:q.nivel,nombreUnidad:q.nombreUnidad,contenidos:q.contenidos,cantidadClases:q.cantidadClases,observaciones:q.observaciones,ideasParaUnidad:q.ideasParaUnidad||""}),f(q),window.scrollTo({top:0,behavior:"smooth"}))},U=async q=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(q),(d==null?void 0:d.id)===q&&(f(null),u(o))}catch(ne){console.error("Error al eliminar planificación:",ne),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},P=async q=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await s(q),(_==null?void 0:_.id)===q&&S(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(ne){console.error("Error al eliminar plan de clase:",ne),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},X=(q,ne)=>{d&&B({planId:d.id,lessonIndex:q,lessonData:ne})},K=async q=>{if(k)try{const{planId:ne,lessonIndex:L}=k,W=r.find(ie=>ie.id===ne&&ie.tipo==="Unidad");if(!W)return;const J=[...W.detallesLeccion];J[L]=q;const te={...W,detallesLeccion:J};await a(ne,te),f(te),B(null)}catch(ne){console.error("Error al actualizar lección:",ne),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},Z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:R,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:C,className:Z,disabled:h,children:F.length>0?F.map(q=>c.jsx("option",{value:q,children:q},q)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:C,className:Z,disabled:h,children:w.length>0?w.map(q=>c.jsx("option",{value:q,children:q},q)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:C,className:Z,placeholder:"Ej: La Célula y sus procesos",disabled:h})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:C,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:Z,disabled:h})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:C,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:Z,disabled:h})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:C,className:Z,min:"1",max:"20",disabled:h})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:C,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:Z,disabled:h})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:h||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:h?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),g&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),c.jsx(Zbe,{plan:d,onEditLesson:X,onUseLesson:O,onUpdatePlan:a,isLoading:h})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:r.filter(q=>q.tipo==="Unidad").length>0?r.filter(q=>q.tipo==="Unidad").map(q=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===q.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:q.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(q.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",q.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>j(q),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:h,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>U(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:h,children:"🗑️"})]})]})},q.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),V=()=>{const q=r.filter(ne=>ne.tipo==="Clase").sort((ne,L)=>new Date(L.fechaCreacion).getTime()-new Date(ne.fechaCreacion).getTime());return _?c.jsx(eye,{plan:_,onBack:()=>S(null),onDelete:P,onSave:async ne=>{try{await a(ne.id,ne),S(ne)}catch(L){console.error("Error al actualizar plan de clase:",L),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:q.length>0?q.map(ne=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ne.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ne.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ne.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>S(ne),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ne.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>y("unidad"),className:`${b==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>y("clase"),className:`${b==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>y("calendario"),className:`${b==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),b==="unidad"&&H(),b==="clase"&&V(),b==="calendario"&&c.jsx(tye,{userId:t}),k&&c.jsx(Jbe,{lesson:k.lessonData,onClose:()=>B(null),onSave:K,isLoading:h})]})},lN="events",nye=async()=>{try{const e=nr(Ut(Rr,lN),Kr("date","asc"));return(await qs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},aye=async e=>{try{return{id:(await ea(Ut(Rr,lN),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},sye=async(e,t)=>{try{const r=pr(Rr,lN,e);await cm(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},iye=async e=>{try{const t=pr(Rr,lN,e);await Ys(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},oye=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],u9={[un.EVALUACION]:c.jsx(kxe,{className:"h-4 w-4"}),[un.ACTO]:c.jsx(a1e,{className:"h-4 w-4"}),[un.ACTIVIDAD_FOCALIZADA]:c.jsx(v1e,{className:"h-4 w-4"}),[un.SALIDA_PEDAGOGICA]:c.jsx(A1e,{className:"h-4 w-4"})},lye=e=>{switch(e.type){case un.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case un.ACTO:return`Acto: ${e.ubicacion}`;case un.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case un.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},cye=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,l]=I.useState({});I.useEffect(()=>{l(a||{type:un.EVALUACION,subtype:Xm.PRUEBA_PARCIAL,asignatura:qi[0],curso:_s[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=v=>{const{name:b,value:y}=v.target;l(_=>({..._,[b]:y}))},f=v=>{l(b=>{if(b.type===un.SALIDA_PEDAGOGICA){const y=b.cursos||[],_=y.includes(v)?y.filter(S=>S!==v):[...y,v];return{...b,cursos:_.sort()}}return b})},h=v=>{var y;v.preventDefault();let b;switch(o.type){case un.EVALUACION:{const _={date:s,type:un.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Xm.RUBRICA||o.subtype===Xm.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(_.enlace=o.enlace.trim()),b=_;break}case un.ACTO:b={date:s,type:un.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case un.ACTIVIDAD_FOCALIZADA:b={date:s,type:un.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case un.SALIDA_PEDAGOGICA:b={date:s,type:un.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(b)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(o.type){case un.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:dxe.map(v=>c.jsx("option",{value:v,children:v},v))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:qi.map(v=>c.jsx("option",{value:v,children:v},v))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:_s.map(v=>c.jsx("option",{value:v,children:v},v))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===Xm.RUBRICA||o.subtype===Xm.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case un.ACTO:case un.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),c.jsxs("div",{className:"relative",children:[c.jsx(hj,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),c.jsxs("div",{className:"relative",children:[c.jsx(zxe,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case un.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),c.jsxs("div",{className:"relative",children:[c.jsx(hj,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:_s.map(v=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(v),onChange:()=>f(v),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),c.jsx("span",{children:v})]},v))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:c.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:v=>v.stopPropagation(),children:c.jsxs("form",{onSubmit:h,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:p})]}),c.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:c.jsx(L7,{className:"h-5 w-5"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(un).map(v=>c.jsx("option",{value:v,children:v},v))})]}),g()]})]}),c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[c.jsx("div",{children:a&&n&&c.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[c.jsx(Iw,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[c.jsx(L7,{className:"h-4 w-4"}),"Cancelar"]}),c.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[c.jsx(fJ,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},uye=({profile:e})=>{const[t,r]=I.useState(new Date),[n,a]=I.useState([]),[s,i]=I.useState(!1),[o,l]=I.useState(null),[u,d]=I.useState(!1),[f,h]=I.useState(Object.values(un)),[p,g]=I.useState(!1),[v,b]=I.useState(null),[y,_]=I.useState(null),S=I.useCallback(async()=>{i(!0);try{const O=await nye();a(O),l(null)}catch(O){console.error("Error al cargar eventos desde Firestore",O),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);I.useEffect(()=>{S()},[S]);const k=I.useMemo(()=>{const O=t.getFullYear(),j=t.getMonth(),U=new Date(O,j,1).getDay(),P=new Date(O,j+1,0).getDate(),X=[];let K=1;for(let Z=0;Z<6;Z++){const H=[];for(let V=0;V<7;V++)Z===0&&V<U||K>P?H.push(null):(H.push(new Date(O,j,K)),K++);if(X.push(H),K>P)break}return X},[t]),B=O=>{h(j=>j.includes(O)?j.filter(U=>U!==O):[...j,O])},F=()=>{f.length===Object.values(un).length?h([]):h(Object.values(un))},w=O=>{e!==er.ESTUDIANTE&&(b(O.toISOString().split("T")[0]),_(null),g(!0))},C=(O,j)=>{j.stopPropagation(),e!==er.ESTUDIANTE&&(b(O.date),_(O),g(!0))},N=async O=>{d(!0);try{y?await sye(y.id,O):await aye(O),await S(),g(!1)}catch(j){console.error("Error al guardar evento:",j);const U=j instanceof Error?j.message:"Error desconocido";l(`Error al guardar el evento: ${U}`)}finally{d(!1)}},R=async()=>{if(y){d(!0);try{await iye(y.id),await S(),g(!1)}catch(O){console.error("Error al eliminar evento:",O);const j=O instanceof Error?O.message:"Error desconocido";l(`No se pudo eliminar el evento: ${j}`)}finally{d(!1)}}};return c.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[c.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),c.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),c.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&c.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),o&&c.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&c.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[c.jsx(Yxe,{className:"h-5 w-5 mt-0.5"}),c.jsx("p",{children:"No hay eventos registrados en la nube."})]}),c.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[c.jsx(Gxe,{className:"h-4 w-4"}),c.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:F,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(un).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(un).map(O=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(O)?`shadow-sm ${Pv[O].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[c.jsx("input",{type:"checkbox",checked:f.includes(O),onChange:()=>B(O),className:"hidden"}),c.jsx("span",{className:"shrink-0",children:u9[O]}),c.jsx("span",{children:Pv[O].label})]},O))]})]}),c.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:c.jsx(Lxe,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:c.jsx(Uxe,{className:"h-5 w-5"})})]}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:oye.map(O=>c.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:O},O))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:k.flat().map((O,j)=>{const U=O&&O.toDateString()===new Date().toDateString(),P=O==null?void 0:O.toISOString().split("T")[0],X=P?n.filter(K=>K.date===P&&f.includes(K.type)):[];return c.jsx("div",{onClick:()=>O&&w(O),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${O?e!==er.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:O&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${U?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:O.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:X.map(K=>c.jsxs("div",{onClick:Z=>C(K,Z),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Pv[K.type].color}`,children:[c.jsx("span",{className:"shrink-0",children:u9[K.type]}),c.jsx("span",{className:"truncate",children:lye(K)})]},K.id))}),e!==er.ESTUDIANTE&&c.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:c.jsx(AJ,{className:"h-4 w-4"})})]})},j)})})]}),p&&c.jsx(cye,{isOpen:p,onClose:()=>g(!1),onSave:N,onDelete:R,event:y,date:v,isLoading:u})]})},cN="anuncios",dye=async()=>{try{const e=nr(Ut(Rr,cN),Kr("fechaPublicacion","desc"));return(await qs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},Aye=async e=>{try{return{id:(await ea(Ut(Rr,cN),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},fye=async(e,t)=>{try{const r=pr(Rr,cN,e);await cm(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},hye=async e=>{try{const t=pr(Rr,cN,e);await Ys(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},d9=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],mye=({currentUser:e})=>{const[t,r]=I.useState([]),[n,a]=I.useState(!1),[s,i]=I.useState(null),[o,l]=I.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=I.useState({tipo:"Todos",cursos:[]}),f=I.useCallback(async()=>{a(!0);try{const w=await dye();r(w),i(null)}catch(w){console.error("Error al cargar anuncios desde Firestore",w),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);I.useEffect(()=>{f()},[f]);const h=w=>{const{name:C,value:N}=w.target;l(R=>({...R,[C]:N}))},p=w=>{d({tipo:w,cursos:w==="Cursos"?[]:void 0})},g=w=>{d(C=>{var R;if(C.tipo!=="Cursos")return C;const N=(R=C.cursos)!=null&&R.includes(w)?C.cursos.filter(O=>O!==w):[...C.cursos||[],w];return{...C,cursos:N}})},v=async w=>{if(w.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const C={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await Aye(C),await f(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(C){console.error("Error al crear anuncio:",C),i("Error al publicar el anuncio en la nube.")}},b=async w=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await hye(w),await f()}catch(C){console.error("Error al eliminar anuncio:",C),i("No se pudo eliminar el anuncio en la nube.")}},y=async w=>{try{const C=t.find(N=>N.id===w);C&&(await fye(w,{destacado:!C.destacado}),await f())}catch(C){console.error("Error al actualizar anuncio:",C),i("No se pudo actualizar el estado del anuncio en la nube.")}},_=I.useMemo(()=>[...t].sort((w,C)=>w.destacado&&!C.destacado?-1:!w.destacado&&C.destacado?1:new Date(C.fechaPublicacion).getTime()-new Date(w.fechaPublicacion).getTime()),[t]),S=I.useMemo(()=>{const w=e.profile,C=e.curso;return _.filter(N=>{if(w===er.SUBDIRECCION)return!0;if(!N.destinatarios)return w!==er.ESTUDIANTE;const{tipo:R,cursos:O}=N.destinatarios;return R==="Todos"||R==="Profesores"&&w===er.PROFESORADO||R==="Coordinación TP"&&w===er.COORDINACION_TP?!0:R==="Cursos"?w===er.ESTUDIANTE?O==null?void 0:O.includes(C||""):!0:!1})},[_,e]),k=w=>e.profile===er.ESTUDIANTE?!1:e.profile===er.SUBDIRECCION||e.profile===w.profileCreador,B=()=>e.profile===er.SUBDIRECCION||e.profile===er.PROFESORADO,F="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==er.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:F})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:F})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(w=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:w,checked:u.tipo===w,onChange:()=>p(w),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:w.replace("Coordinación TP","Coord. TP")})]},w))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:_s.map(w=>{var C;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(C=u.cursos)==null?void 0:C.includes(w),onChange:()=>g(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:w})]},w)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:F})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&S.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&S.length>0&&S.map((w,C)=>{const N=d9[C%d9.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${N.bg} ${N.rotate}`,children:[w.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:w.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:w.mensaje}),w.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:w.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:w.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(w.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[B()&&c.jsx("button",{onClick:()=>y(w.id),title:w.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${w.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),k(w)&&c.jsx("button",{onClick:()=>b(w.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},w.id)})})]})},EJ="api_logs",pye=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:yr.fromDate(new Date)};await ea(Ut(Ft,EJ),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},gye=e=>{const t=nr(Ut(Ft,EJ),Kr("timestamp","desc"));return wr(t,n=>{const a=n.docs.map(s=>{var o,l;const i=s.data();return{id:s.id,...i,timestamp:((l=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},X0=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}pye(e,t)},tD="actas_de_reunion",vye=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},xye=e=>{const t=nr(Ut(Ft,tD),Kr("fechaCreacion","desc"));return wr(t,n=>{const a=n.docs.map(s=>vye(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},bye=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:yr.fromDate(new Date(e.fechaCreacion))};return(await ea(Ut(Ft,tD),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},yye=async e=>{try{const t=pr(Ft,tD,e);await Ys(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},CJ=window.SpeechRecognition||window.webkitSpeechRecognition,A9=!!CJ,wye=({isListening:e})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Eye=({currentUser:e})=>{const[t,r]=I.useState([]),[n,a]=I.useState(null),[s,i]=I.useState({tipoReunion:vB[0],asistentes:"",textoReunion:""}),[o,l]=I.useState(!1),[u,d]=I.useState(!1),[f,h]=I.useState(!0),[p,g]=I.useState(null),v=I.useRef(null);I.useEffect(()=>{h(!0);const w=xye(C=>{r(C),!n&&C.length>0&&a(C[0]),h(!1)});return()=>w()},[n]);const b=w=>{const{name:C,value:N}=w.target;i(R=>({...R,[C]:N}))},y=I.useCallback(()=>{var w;if(!A9){g("El reconocimiento de voz no es compatible con este navegador.");return}o?(w=v.current)==null||w.stop():(v.current=new CJ,v.current.lang="es-CL",v.current.continuous=!0,v.current.interimResults=!0,v.current.onresult=C=>{let N="";for(let R=C.resultIndex;R<C.results.length;++R)C.results[R].isFinal&&(N+=C.results[R][0].transcript+". ");i(R=>({...R,textoReunion:R.textoReunion+N}))},v.current.onstart=()=>l(!0),v.current.onend=()=>l(!1),v.current.onerror=C=>{console.error("Speech recognition error",C.error),g(`Error de reconocimiento: ${C.error}`),l(!1)},v.current.start())},[o]),_=async w=>{w.preventDefault();const{tipoReunion:C,asistentes:N,textoReunion:R}=s;if(!C||!N.trim()||!R.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{X0("Generador de Actas");const O="",U=new globalThis.GoogleGenerativeAI(O).getGenerativeModel({model:"gemini-pro"}),P=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${R}"
                
                Asistentes a la reunión para referencia de nombres: ${N}
            `,H=(await(await U.generateContent(P)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(H),q={fechaCreacion:new Date().toISOString(),...s,...V},ne=await bye(q,e);i({tipoReunion:vB[0],asistentes:"",textoReunion:""})}catch(O){console.error("Error al analizar acta con IA:",O),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},S=async w=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await yye(w),(n==null?void 0:n.id)===w&&a(t.length>1?t[1]:null)}catch(C){console.error("Error deleting acta:",C),alert("No se pudo eliminar el acta.")}},k=w=>{a(w)},B=w=>w.temas||w.acuerdos||w.plazos||w.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),w.temas&&w.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.temas.map((N,R)=>c.jsx("li",{children:N},R))})]}),w.acuerdos&&w.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.acuerdos.map((N,R)=>c.jsx("li",{children:N},R))})]}),w.plazos&&w.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.plazos.map((N,R)=>c.jsx("li",{children:N},R))})]}),w.responsables&&w.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.responsables.map((N,R)=>c.jsx("li",{children:N},R))})]})]}):null,F="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?c.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),c.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:b,required:!0,className:F,children:vB.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:b,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:F})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:b,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:F}),A9&&c.jsx("button",{type:"button",onClick:y,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(wye,{isListening:o})})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(w=>c.jsxs("button",{onClick:()=>k(w),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===w.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(w.fechaCreacion).toLocaleDateString("es-CL")})]},w.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),c.jsx("button",{onClick:()=>S(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((w,C)=>w.trim()&&c.jsx("li",{children:w.trim()},C))}),B(n),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:n.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},Cye="modulepreload",_ye=function(e){return"/"+e},f9={},K_=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=_ye(u),u in f9)return;f9[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Cye,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function pa(e){"@babel/helpers - typeof";return pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pa(e)}var Wo=Uint8Array,Tc=Uint16Array,rD=Int32Array,uN=new Wo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dN=new Wo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gj=new Wo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_J=function(e,t){for(var r=new Tc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new rD(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},SJ=_J(uN,2),NJ=SJ.b,vj=SJ.r;NJ[28]=258,vj[258]=28;var kJ=_J(dN,0),Sye=kJ.b,h9=kJ.r,xj=new Tc(32768);for(var Qa=0;Qa<32768;++Qa){var e0=(Qa&43690)>>1|(Qa&21845)<<1;e0=(e0&52428)>>2|(e0&13107)<<2,e0=(e0&61680)>>4|(e0&3855)<<4,xj[Qa]=((e0&65280)>>8|(e0&255)<<8)>>1}var OA=function(e,t,r){for(var n=e.length,a=0,s=new Tc(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Tc(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Tc(1<<t);var l=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[xj[f]>>l]=u}else for(o=new Tc(n),a=0;a<n;++a)e[a]&&(o[a]=xj[i[e[a]-1]++]>>15-e[a]);return o},Y0=new Wo(288);for(var Qa=0;Qa<144;++Qa)Y0[Qa]=8;for(var Qa=144;Qa<256;++Qa)Y0[Qa]=9;for(var Qa=256;Qa<280;++Qa)Y0[Qa]=7;for(var Qa=280;Qa<288;++Qa)Y0[Qa]=8;var Iy=new Wo(32);for(var Qa=0;Qa<32;++Qa)Iy[Qa]=5;var Nye=OA(Y0,9,0),kye=OA(Y0,9,1),Bye=OA(Iy,5,0),Tye=OA(Iy,5,1),bB=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},od=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},yB=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},nD=function(e){return(e+7)/8|0},BJ=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Wo(e.subarray(t,r))},Iye=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],dd=function(e,t,r){var n=new Error(t||Iye[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,dd),!r)throw n;return n},jye=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Wo(0);var i=!r,o=i||t.i!=2,l=t.i;i&&(r=new Wo(a*3));var u=function(je){var re=r.length;if(je>re){var Se=new Wo(Math.max(re*2,je));Se.set(r),r=Se}},d=t.f||0,f=t.p||0,h=t.b||0,p=t.l,g=t.d,v=t.m,b=t.n,y=a*8;do{if(!p){d=od(e,f,1);var _=od(e,f+1,3);if(f+=3,_)if(_==1)p=kye,g=Tye,v=9,b=5;else if(_==2){var F=od(e,f,31)+257,w=od(e,f+10,15)+4,C=F+od(e,f+5,31)+1;f+=14;for(var N=new Wo(C),R=new Wo(19),O=0;O<w;++O)R[gj[O]]=od(e,f+O*3,7);f+=w*3;for(var j=bB(R),U=(1<<j)-1,P=OA(R,j,1),O=0;O<C;){var X=P[od(e,f,U)];f+=X&15;var S=X>>4;if(S<16)N[O++]=S;else{var K=0,Z=0;for(S==16?(Z=3+od(e,f,3),f+=2,K=N[O-1]):S==17?(Z=3+od(e,f,7),f+=3):S==18&&(Z=11+od(e,f,127),f+=7);Z--;)N[O++]=K}}var H=N.subarray(0,F),V=N.subarray(F);v=bB(H),b=bB(V),p=OA(H,v,1),g=OA(V,b,1)}else dd(1);else{var S=nD(f)+4,k=e[S-4]|e[S-3]<<8,B=S+k;if(B>a){l&&dd(0);break}o&&u(h+k),r.set(e.subarray(S,B),h),t.b=h+=k,t.p=f=B*8,t.f=d;continue}if(f>y){l&&dd(0);break}}o&&u(h+131072);for(var q=(1<<v)-1,ne=(1<<b)-1,L=f;;L=f){var K=p[yB(e,f)&q],W=K>>4;if(f+=K&15,f>y){l&&dd(0);break}if(K||dd(2),W<256)r[h++]=W;else if(W==256){L=f,p=null;break}else{var J=W-254;if(W>264){var O=W-257,te=uN[O];J=od(e,f,(1<<te)-1)+NJ[O],f+=te}var ie=g[yB(e,f)&ne],Ae=ie>>4;ie||dd(3),f+=ie&15;var V=Sye[Ae];if(Ae>3){var te=dN[Ae];V+=yB(e,f)&(1<<te)-1,f+=te}if(f>y){l&&dd(0);break}o&&u(h+131072);var oe=h+J;if(h<V){var ce=s-V,ge=Math.min(V,oe);for(ce+h<0&&dd(3);h<ge;++h)r[h]=n[ce+h]}for(;h<oe;++h)r[h]=r[h-V]}}t.l=p,t.p=L,t.b=h,t.f=d,p&&(d=1,t.m=v,t.d=g,t.n=b)}while(!d);return h!=r.length&&i?BJ(r,0,h):r.subarray(0,h)},Cf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Y1=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},wB=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:IJ,l:0};if(a==1){var i=new Wo(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(B,F){return B.f-F.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],l=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var p=new Tc(h+1),g=bj(r[d-1],p,0);if(g>t){var n=0,v=0,b=g-t,y=1<<b;for(s.sort(function(F,w){return p[w.s]-p[F.s]||F.f-w.f});n<a;++n){var _=s[n].s;if(p[_]>t)v+=y-(1<<g-p[_]),p[_]=t;else break}for(v>>=b;v>0;){var S=s[n].s;p[S]<t?v-=1<<t-p[S]++-1:++n}for(;n>=0&&v;--n){var k=s[n].s;p[k]==t&&(--p[k],++v)}g=t}return{t:new Wo(p),l:g}},bj=function(e,t,r){return e.s==-1?Math.max(bj(e.l,t,r+1),bj(e.r,t,r+1)):t[e.s]=r},m9=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Tc(++t),n=0,a=e[0],s=1,i=function(l){r[n++]=l},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},J1=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},TJ=function(e,t,r){var n=r.length,a=nD(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},p9=function(e,t,r,n,a,s,i,o,l,u,d){Cf(t,d++,r),++a[256];for(var f=wB(a,15),h=f.t,p=f.l,g=wB(s,15),v=g.t,b=g.l,y=m9(h),_=y.c,S=y.n,k=m9(v),B=k.c,F=k.n,w=new Tc(19),C=0;C<_.length;++C)++w[_[C]&31];for(var C=0;C<B.length;++C)++w[B[C]&31];for(var N=wB(w,7),R=N.t,O=N.l,j=19;j>4&&!R[gj[j-1]];--j);var U=u+5<<3,P=J1(a,Y0)+J1(s,Iy)+i,X=J1(a,h)+J1(s,v)+i+14+3*j+J1(w,R)+2*w[16]+3*w[17]+7*w[18];if(l>=0&&U<=P&&U<=X)return TJ(t,d,e.subarray(l,l+u));var K,Z,H,V;if(Cf(t,d,1+(X<P)),d+=2,X<P){K=OA(h,p,0),Z=h,H=OA(v,b,0),V=v;var q=OA(R,O,0);Cf(t,d,S-257),Cf(t,d+5,F-1),Cf(t,d+10,j-4),d+=14;for(var C=0;C<j;++C)Cf(t,d+3*C,R[gj[C]]);d+=3*j;for(var ne=[_,B],L=0;L<2;++L)for(var W=ne[L],C=0;C<W.length;++C){var J=W[C]&31;Cf(t,d,q[J]),d+=R[J],J>15&&(Cf(t,d,W[C]>>5&127),d+=W[C]>>12)}}else K=Nye,Z=Y0,H=Bye,V=Iy;for(var C=0;C<o;++C){var te=n[C];if(te>255){var J=te>>18&31;Y1(t,d,K[J+257]),d+=Z[J+257],J>7&&(Cf(t,d,te>>23&31),d+=uN[J]);var ie=te&31;Y1(t,d,H[ie]),d+=V[ie],ie>3&&(Y1(t,d,te>>5&8191),d+=dN[ie])}else Y1(t,d,K[te]),d+=Z[te]}return Y1(t,d,K[256]),d+Z[256]},Fye=new rD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),IJ=new Wo(0),Oye=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Wo(n+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(l[0]=s.r>>3);for(var f=Fye[t-1],h=f>>13,p=f&8191,g=(1<<r)-1,v=s.p||new Tc(32768),b=s.h||new Tc(g+1),y=Math.ceil(r/3),_=2*y,S=function(De){return(e[De]^e[De+1]<<y^e[De+2]<<_)&g},k=new rD(25e3),B=new Tc(288),F=new Tc(32),w=0,C=0,N=s.i||0,R=0,O=s.w||0,j=0;N+2<i;++N){var U=S(N),P=N&32767,X=b[U];if(v[P]=X,b[U]=P,O<=N){var K=i-N;if((w>7e3||R>24576)&&(K>423||!u)){d=p9(e,l,0,k,B,F,C,R,j,N-j,d),R=w=C=0,j=N;for(var Z=0;Z<286;++Z)B[Z]=0;for(var Z=0;Z<30;++Z)F[Z]=0}var H=2,V=0,q=p,ne=P-X&32767;if(K>2&&U==S(N-ne))for(var L=Math.min(h,K)-1,W=Math.min(32767,N),J=Math.min(258,K);ne<=W&&--q&&P!=X;){if(e[N+H]==e[N+H-ne]){for(var te=0;te<J&&e[N+te]==e[N+te-ne];++te);if(te>H){if(H=te,V=ne,te>L)break;for(var ie=Math.min(ne,te-2),Ae=0,Z=0;Z<ie;++Z){var oe=N-ne+Z&32767,ce=v[oe],ge=oe-ce&32767;ge>Ae&&(Ae=ge,X=oe)}}}P=X,X=v[P],ne+=P-X&32767}if(V){k[R++]=268435456|vj[H]<<18|h9[V];var je=vj[H]&31,re=h9[V]&31;C+=uN[je]+dN[re],++B[257+je],++F[re],O=N+H,++w}else k[R++]=e[N],++B[e[N]]}}for(N=Math.max(N,O);N<i;++N)k[R++]=e[N],++B[e[N]];d=p9(e,l,u,k,B,F,C,R,j,N-j,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=b,s.p=v,s.i=N,s.w=O)}else{for(var N=s.w||0;N<i+u;N+=65535){var Se=N+65535;Se>=i&&(l[d/8|0]=u,Se=i),d=TJ(l,d+1,e.subarray(N,Se))}s.i=i}return BJ(o,0,n+nD(d)+a)},jJ=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Dye=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Wo(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return Oye(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},FJ=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Rye=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=jJ();a.p(t.dictionary),FJ(e,2,a.d())}},Pye=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&dd(6,"invalid zlib data"),(e[1]>>5&1)==1&&dd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function yj(e,t){t||(t={});var r=jJ();r.p(e);var n=Dye(e,t,t.dictionary?6:2,4);return Rye(n,t),FJ(n,n.length-4,r.d()),n}function Lye(e,t){return jye(e.subarray(Pye(e),-4),{i:2},t,t)}var Mye=typeof TextDecoder<"u"&&new TextDecoder,Uye=0;try{Mye.decode(IJ,{stream:!0}),Uye=1}catch{}var Mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function EB(){Mr.console&&typeof Mr.console.log=="function"&&Mr.console.log.apply(Mr.console,arguments)}var Na={log:EB,warn:function(e){Mr.console&&(typeof Mr.console.warn=="function"?Mr.console.warn.apply(Mr.console,arguments):EB.call(null,arguments))},error:function(e){Mr.console&&(typeof Mr.console.error=="function"?Mr.console.error.apply(Mr.console,arguments):EB(e))}};function CB(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){$m(n.response,t,r)},n.onerror=function(){Na.error("could not download file")},n.send()}function g9(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function yE(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Zb,wj,$m=Mr.saveAs||((typeof window>"u"?"undefined":pa(window))!=="object"||window!==Mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Mr.URL||Mr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?g9(a.href)?CB(e,t,r):yE(a,a.target="_blank"):yE(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){yE(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(g9(e))CB(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){yE(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:pa(s)!=="object"&&(Na.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return CB(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Mr.HTMLElement)||Mr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":pa(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var l=Mr.URL||Mr.webkitURL,u=l.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function OJ(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _B(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Fo(r,n,a,s,t[0],7,-680876936),s=Fo(s,r,n,a,t[1],12,-389564586),a=Fo(a,s,r,n,t[2],17,606105819),n=Fo(n,a,s,r,t[3],22,-1044525330),r=Fo(r,n,a,s,t[4],7,-176418897),s=Fo(s,r,n,a,t[5],12,1200080426),a=Fo(a,s,r,n,t[6],17,-1473231341),n=Fo(n,a,s,r,t[7],22,-45705983),r=Fo(r,n,a,s,t[8],7,1770035416),s=Fo(s,r,n,a,t[9],12,-1958414417),a=Fo(a,s,r,n,t[10],17,-42063),n=Fo(n,a,s,r,t[11],22,-1990404162),r=Fo(r,n,a,s,t[12],7,1804603682),s=Fo(s,r,n,a,t[13],12,-40341101),a=Fo(a,s,r,n,t[14],17,-1502002290),r=Oo(r,n=Fo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Oo(s,r,n,a,t[6],9,-1069501632),a=Oo(a,s,r,n,t[11],14,643717713),n=Oo(n,a,s,r,t[0],20,-373897302),r=Oo(r,n,a,s,t[5],5,-701558691),s=Oo(s,r,n,a,t[10],9,38016083),a=Oo(a,s,r,n,t[15],14,-660478335),n=Oo(n,a,s,r,t[4],20,-405537848),r=Oo(r,n,a,s,t[9],5,568446438),s=Oo(s,r,n,a,t[14],9,-1019803690),a=Oo(a,s,r,n,t[3],14,-187363961),n=Oo(n,a,s,r,t[8],20,1163531501),r=Oo(r,n,a,s,t[13],5,-1444681467),s=Oo(s,r,n,a,t[2],9,-51403784),a=Oo(a,s,r,n,t[7],14,1735328473),r=Do(r,n=Oo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Do(s,r,n,a,t[8],11,-2022574463),a=Do(a,s,r,n,t[11],16,1839030562),n=Do(n,a,s,r,t[14],23,-35309556),r=Do(r,n,a,s,t[1],4,-1530992060),s=Do(s,r,n,a,t[4],11,1272893353),a=Do(a,s,r,n,t[7],16,-155497632),n=Do(n,a,s,r,t[10],23,-1094730640),r=Do(r,n,a,s,t[13],4,681279174),s=Do(s,r,n,a,t[0],11,-358537222),a=Do(a,s,r,n,t[3],16,-722521979),n=Do(n,a,s,r,t[6],23,76029189),r=Do(r,n,a,s,t[9],4,-640364487),s=Do(s,r,n,a,t[12],11,-421815835),a=Do(a,s,r,n,t[15],16,530742520),r=Ro(r,n=Do(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Ro(s,r,n,a,t[7],10,1126891415),a=Ro(a,s,r,n,t[14],15,-1416354905),n=Ro(n,a,s,r,t[5],21,-57434055),r=Ro(r,n,a,s,t[12],6,1700485571),s=Ro(s,r,n,a,t[3],10,-1894986606),a=Ro(a,s,r,n,t[10],15,-1051523),n=Ro(n,a,s,r,t[1],21,-2054922799),r=Ro(r,n,a,s,t[8],6,1873313359),s=Ro(s,r,n,a,t[15],10,-30611744),a=Ro(a,s,r,n,t[6],15,-1560198380),n=Ro(n,a,s,r,t[13],21,1309151649),r=Ro(r,n,a,s,t[4],6,-145523070),s=Ro(s,r,n,a,t[11],10,-1120210379),a=Ro(a,s,r,n,t[2],15,718787259),n=Ro(n,a,s,r,t[9],21,-343485551),e[0]=E0(r,e[0]),e[1]=E0(n,e[1]),e[2]=E0(a,e[2]),e[3]=E0(s,e[3])}function AN(e,t,r,n,a,s){return t=E0(E0(t,e),E0(n,s)),E0(t<<a|t>>>32-a,r)}function Fo(e,t,r,n,a,s,i){return AN(t&r|~t&n,e,t,a,s,i)}function Oo(e,t,r,n,a,s,i){return AN(t&n|r&~n,e,t,a,s,i)}function Do(e,t,r,n,a,s,i){return AN(t^r^n,e,t,a,s,i)}function Ro(e,t,r,n,a,s,i){return AN(r^(t|~n),e,t,a,s,i)}function DJ(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)_B(n,Qye(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(_B(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,_B(n,a),n}function Qye(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Zb=Mr.atob.bind(Mr),wj=Mr.btoa.bind(Mr);var v9="0123456789abcdef".split("");function Hye(e){for(var t="",r=0;r<4;r++)t+=v9[e>>8*r+4&15]+v9[e>>8*r&15];return t}function Vye(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Ej(e){return DJ(e).map(Vye).join("")}var zye=function(e){for(var t=0;t<e.length;t++)e[t]=Hye(e[t]);return e.join("")}(DJ("hello"))!="5d41402abc4b2a76b9719d911017c592";function E0(e,t){if(zye){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Cj(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,p=0,g="";for(l=0;l<f;l++)p=(p+(d=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=d,i=o[(o[h]+o[p])%256],g+=String.fromCharCode(t.charCodeAt(l)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var x9={print:4,modify:8,copy:16,"annot-forms":32};function fv(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(x9.perm!==void 0)throw new Error("Invalid permission: "+o);a+=x9[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=Ej(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Cj(this.encryptionKey,this.padding)}function hv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function b9(e){if(pa(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Mr.console&&Na.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function G_(e){if(!(this instanceof G_))return new G_(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function RJ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ym(e,t,r,n,a){if(!(this instanceof Ym))return new Ym(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,RJ.call(this,n,a)}function bv(e,t,r,n,a){if(!(this instanceof bv))return new bv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,RJ.call(this,n,a)}function mr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,u="S",d=null;pa(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=b9;var g="1.3",v=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(G){g=G};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(G){return b[G]};a=a||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},S=_.COMPAT;function k(){this.saveGraphicsState(),he(new $t(bt,0,0,-bt,0,Ri()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),u="n",S=_.ADVANCED}function B(){this.restoreGraphicsState(),u="S",S=_.COMPAT}var F=p.__private__.combineFontStyleAndFontWeight=function(G,de){if(G=="bold"&&de=="normal"||G=="bold"&&de==400||G=="normal"&&de=="italic"||G=="bold"&&de=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return de&&(G=de==400||de==="normal"?G==="italic"?"italic":"normal":de!=700&&de!=="bold"||G!=="normal"?(de==700?"bold":de)+""+G:"bold"),G};p.advancedAPI=function(G){var de=S===_.COMPAT;return de&&k.call(this),typeof G!="function"||(G(this),de&&B.call(this)),this},p.compatAPI=function(G){var de=S===_.ADVANCED;return de&&B.call(this),typeof G!="function"||(G(this),de&&k.call(this)),this},p.isAdvancedAPI=function(){return S===_.ADVANCED};var w,C=function(G){if(S!==_.ADVANCED)throw new Error(G+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=p.roundToPrecision=p.__private__.roundToPrecision=function(G,de){var Fe=t||de;if(isNaN(G)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return G.toFixed(Fe).replace(/0+$/,"")};w=p.hpf=p.__private__.hpf=typeof l=="number"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return N(G,l)}:l==="smart"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return N(G,G>-1&&G<1?16:5)}:function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return N(G,16)};var R=p.f2=p.__private__.f2=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f2");return N(G,2)},O=p.__private__.f3=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f3");return N(G,3)},j=p.scale=p.__private__.scale=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.scale");return S===_.COMPAT?G*bt:S===_.ADVANCED?G:void 0},U=function(G){return S===_.COMPAT?Ri()-G:S===_.ADVANCED?G:void 0},P=function(G){return j(U(G))};p.__private__.setPrecision=p.setPrecision=function(G){typeof parseInt(G,10)=="number"&&(t=parseInt(G,10))};var X,K="00000000000000000000000000000000",Z=p.__private__.getFileId=function(){return K},H=p.__private__.setFileId=function(G){return K=G!==void 0&&/^[a-fA-F0-9]{32}$/.test(G)?G.toUpperCase():K.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ca=new fv(d.userPermissions,d.userPassword,d.ownerPassword,K)),K};p.setFileId=function(G){return H(G),this},p.getFileId=function(){return Z()};var V=p.__private__.convertDateToPDFDate=function(G){var de=G.getTimezoneOffset(),Fe=de<0?"+":"-",Le=Math.floor(Math.abs(de/60)),Ke=Math.abs(de%60),xt=[Fe,J(Le),"'",J(Ke),"'"].join("");return["D:",G.getFullYear(),J(G.getMonth()+1),J(G.getDate()),J(G.getHours()),J(G.getMinutes()),J(G.getSeconds()),xt].join("")},q=p.__private__.convertPDFDateToDate=function(G){var de=parseInt(G.substr(2,4),10),Fe=parseInt(G.substr(6,2),10)-1,Le=parseInt(G.substr(8,2),10),Ke=parseInt(G.substr(10,2),10),xt=parseInt(G.substr(12,2),10),Pt=parseInt(G.substr(14,2),10);return new Date(de,Fe,Le,Ke,xt,Pt,0)},ne=p.__private__.setCreationDate=function(G){var de;if(G===void 0&&(G=new Date),G instanceof Date)de=V(G);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(G))throw new Error("Invalid argument passed to jsPDF.setCreationDate");de=G}return X=de},L=p.__private__.getCreationDate=function(G){var de=X;return G==="jsDate"&&(de=q(X)),de};p.setCreationDate=function(G){return ne(G),this},p.getCreationDate=function(G){return L(G)};var W,J=p.__private__.padd2=function(G){return("0"+parseInt(G)).slice(-2)},te=p.__private__.padd2Hex=function(G){return("00"+(G=G.toString())).substr(G.length)},ie=0,Ae=[],oe=[],ce=0,ge=[],je=[],re=!1,Se=oe,De=function(){ie=0,ce=0,oe=[],Ae=[],ge=[],Ee=ta(),Ce=ta()};p.__private__.setCustomOutputDestination=function(G){re=!0,Se=G};var _e=function(G){re||(Se=G)};p.__private__.resetCustomOutputDestination=function(){re=!1,Se=oe};var he=p.__private__.out=function(G){return G=G.toString(),ce+=G.length+1,Se.push(G),Se},Ie=p.__private__.write=function(G){return he(arguments.length===1?G.toString():Array.prototype.join.call(arguments," "))},He=p.__private__.getArrayBuffer=function(G){for(var de=G.length,Fe=new ArrayBuffer(de),Le=new Uint8Array(Fe);de--;)Le[de]=G.charCodeAt(de);return Fe},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Xe};var ye=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(G){return ye=S===_.ADVANCED?G/bt:G,this};var Oe,Pe=p.__private__.getFontSize=p.getFontSize=function(){return S===_.COMPAT?ye:ye*bt},qe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(G){return qe=G,this},p.__private__.getR2L=p.getR2L=function(){return qe};var Ze,ot=p.__private__.setZoomMode=function(G){var de=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(G))Oe=G;else if(isNaN(G)){if(de.indexOf(G)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+G+'" is not recognized.');Oe=G}else Oe=parseInt(G,10)};p.__private__.getZoomMode=function(){return Oe};var mt,Bt=p.__private__.setPageMode=function(G){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(G)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+G+'" is not recognized.');Ze=G};p.__private__.getPageMode=function(){return Ze};var Lt=p.__private__.setLayoutMode=function(G){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(G)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+G+'" is not recognized.');mt=G};p.__private__.getLayoutMode=function(){return mt},p.__private__.setDisplayMode=p.setDisplayMode=function(G,de,Fe){return ot(G),Lt(de),Bt(Fe),this};var Ot={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(G){if(Object.keys(Ot).indexOf(G)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ot[G]},p.__private__.getDocumentProperties=function(){return Ot},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(G){for(var de in Ot)Ot.hasOwnProperty(de)&&G[de]&&(Ot[de]=G[de]);return this},p.__private__.setDocumentProperty=function(G,de){if(Object.keys(Ot).indexOf(G)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ot[G]=de};var Qt,bt,Nr,tr,nn,Cr={},Vr={},In=[],jr={},vt={},pt={},Je={},gt=null,dt=0,Dt=[],zt=new b9(p),Pr=e.hotfixes||[],Xr={},pn={},gn=[],$t=function G(de,Fe,Le,Ke,xt,Pt){if(!(this instanceof G))return new G(de,Fe,Le,Ke,xt,Pt);isNaN(de)&&(de=1),isNaN(Fe)&&(Fe=0),isNaN(Le)&&(Le=0),isNaN(Ke)&&(Ke=1),isNaN(xt)&&(xt=0),isNaN(Pt)&&(Pt=0),this._matrix=[de,Fe,Le,Ke,xt,Pt]};Object.defineProperty($t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty($t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty($t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty($t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty($t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty($t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty($t.prototype,"a",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty($t.prototype,"b",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty($t.prototype,"c",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty($t.prototype,"d",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty($t.prototype,"e",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty($t.prototype,"f",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty($t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$t.prototype.join=function(G){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(w).join(G)},$t.prototype.multiply=function(G){var de=G.sx*this.sx+G.shy*this.shx,Fe=G.sx*this.shy+G.shy*this.sy,Le=G.shx*this.sx+G.sy*this.shx,Ke=G.shx*this.shy+G.sy*this.sy,xt=G.tx*this.sx+G.ty*this.shx+this.tx,Pt=G.tx*this.shy+G.ty*this.sy+this.ty;return new $t(de,Fe,Le,Ke,xt,Pt)},$t.prototype.decompose=function(){var G=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ke=this.tx,xt=this.ty,Pt=Math.sqrt(G*G+de*de),Jt=(G/=Pt)*Fe+(de/=Pt)*Le;Fe-=G*Jt,Le-=de*Jt;var D=Math.sqrt(Fe*Fe+Le*Le);return Jt/=D,G*(Le/=D)<de*(Fe/=D)&&(G=-G,de=-de,Jt=-Jt,Pt=-Pt),{scale:new $t(Pt,0,0,D,0,0),translate:new $t(1,0,0,1,Ke,xt),rotate:new $t(G,de,-de,G,0,0),skew:new $t(1,0,Jt,1,0,0)}},$t.prototype.toString=function(G){return this.join(" ")},$t.prototype.inversed=function(){var G=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ke=this.tx,xt=this.ty,Pt=1/(G*Le-de*Fe),Jt=Le*Pt,D=-de*Pt,ee=-Fe*Pt,se=G*Pt;return new $t(Jt,D,ee,se,-Jt*Ke-ee*xt,-D*Ke-se*xt)},$t.prototype.applyToPoint=function(G){var de=G.x*this.sx+G.y*this.shx+this.tx,Fe=G.x*this.shy+G.y*this.sy+this.ty;return new Hu(de,Fe)},$t.prototype.applyToRectangle=function(G){var de=this.applyToPoint(G),Fe=this.applyToPoint(new Hu(G.x+G.w,G.y+G.h));return new Rd(de.x,de.y,Fe.x-de.x,Fe.y-de.y)},$t.prototype.clone=function(){var G=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ke=this.tx,xt=this.ty;return new $t(G,de,Fe,Le,Ke,xt)},p.Matrix=$t;var tn=p.matrixMult=function(G,de){return de.multiply(G)},en=new $t(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=en;var cr=function(G,de){if(!vt[G]){var Fe=(de instanceof Ym?"Sh":"P")+(Object.keys(jr).length+1).toString(10);de.id=Fe,vt[G]=Fe,jr[Fe]=de,zt.publish("addPattern",de)}};p.ShadingPattern=Ym,p.TilingPattern=bv,p.addShadingPattern=function(G,de){return C("addShadingPattern()"),cr(G,de),this},p.beginTilingPattern=function(G){C("beginTilingPattern()"),Wc(G.boundingBox[0],G.boundingBox[1],G.boundingBox[2]-G.boundingBox[0],G.boundingBox[3]-G.boundingBox[1],G.matrix)},p.endTilingPattern=function(G,de){C("endTilingPattern()"),de.stream=je[W].join(`
`),cr(G,de),zt.publish("endTilingPattern",de),gn.pop().restore()};var Yr=p.__private__.newObject=function(){var G=ta();return fe(G,!0),G},ta=p.__private__.newObjectDeferred=function(){return ie++,Ae[ie]=function(){return ce},ie},fe=function(G,de){return de=typeof de=="boolean"&&de,Ae[G]=ce,de&&he(G+" 0 obj"),G},Be=p.__private__.newAdditionalObject=function(){var G={objId:ta(),content:""};return ge.push(G),G},Ee=ta(),Ce=ta(),Ne=p.__private__.decodeColorString=function(G){var de=G.split(" ");if(de.length!==2||de[1]!=="g"&&de[1]!=="G")de.length===5&&(de[4]==="k"||de[4]==="K")&&(de=[(1-de[0])*(1-de[3]),(1-de[1])*(1-de[3]),(1-de[2])*(1-de[3]),"r"]);else{var Fe=parseFloat(de[0]);de=[Fe,Fe,Fe,"r"]}for(var Le="#",Ke=0;Ke<3;Ke++)Le+=("0"+Math.floor(255*parseFloat(de[Ke])).toString(16)).slice(-2);return Le},Te=p.__private__.encodeColorString=function(G){var de;typeof G=="string"&&(G={ch1:G});var Fe=G.ch1,Le=G.ch2,Ke=G.ch3,xt=G.ch4,Pt=G.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var Jt=new OJ(Fe);if(Jt.ok)Fe=Jt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var D=parseInt(Fe.substr(1),16);Fe=D>>16&255,Le=D>>8&255,Ke=255&D}if(Le===void 0||xt===void 0&&Fe===Le&&Le===Ke)if(typeof Fe=="string")de=Fe+" "+Pt[0];else switch(G.precision){case 2:de=R(Fe/255)+" "+Pt[0];break;case 3:default:de=O(Fe/255)+" "+Pt[0]}else if(xt===void 0||pa(xt)==="object"){if(xt&&!isNaN(xt.a)&&xt.a===0)return de=["1.","1.","1.",Pt[1]].join(" ");if(typeof Fe=="string")de=[Fe,Le,Ke,Pt[1]].join(" ");else switch(G.precision){case 2:de=[R(Fe/255),R(Le/255),R(Ke/255),Pt[1]].join(" ");break;default:case 3:de=[O(Fe/255),O(Le/255),O(Ke/255),Pt[1]].join(" ")}}else if(typeof Fe=="string")de=[Fe,Le,Ke,xt,Pt[2]].join(" ");else switch(G.precision){case 2:de=[R(Fe),R(Le),R(Ke),R(xt),Pt[2]].join(" ");break;case 3:default:de=[O(Fe),O(Le),O(Ke),O(xt),Pt[2]].join(" ")}return de},Ye=p.__private__.getFilters=function(){return i},ut=p.__private__.putStream=function(G){var de=(G=G||{}).data||"",Fe=G.filters||Ye(),Le=G.alreadyAppliedFilters||[],Ke=G.addLength1||!1,xt=de.length,Pt=G.objectId,Jt=function(Tr){return Tr};if(d!==null&&Pt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Jt=ca.encryptor(Pt,0));var D={};Fe===!0&&(Fe=["FlateEncode"]);var ee=G.additionalKeyValues||[],se=(D=mr.API.processDataByFilters!==void 0?mr.API.processDataByFilters(de,Fe):{data:de,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(D.data.length!==0&&(ee.push({key:"Length",value:D.data.length}),Ke===!0&&ee.push({key:"Length1",value:xt})),se.length!=0)if(se.split("/").length-1==1)ee.push({key:"Filter",value:se});else{ee.push({key:"Filter",value:"["+se+"]"});for(var xe=0;xe<ee.length;xe+=1)if(ee[xe].key==="DecodeParms"){for(var ze=[],st=0;st<D.reverseChain.split("/").length-1;st+=1)ze.push("null");ze.push(ee[xe].value),ee[xe].value="["+ze.join(" ")+"]"}}he("<<");for(var Mt=0;Mt<ee.length;Mt++)he("/"+ee[Mt].key+" "+ee[Mt].value);he(">>"),D.data.length!==0&&(he("stream"),he(Jt(D.data)),he("endstream"))},$e=p.__private__.putPage=function(G){var de=G.number,Fe=G.data,Le=G.objId,Ke=G.contentsObjId;fe(Le,!0),he("<</Type /Page"),he("/Parent "+G.rootDictionaryObjId+" 0 R"),he("/Resources "+G.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(w(G.mediaBox.bottomLeftX))+" "+parseFloat(w(G.mediaBox.bottomLeftY))+" "+w(G.mediaBox.topRightX)+" "+w(G.mediaBox.topRightY)+"]"),G.cropBox!==null&&he("/CropBox ["+w(G.cropBox.bottomLeftX)+" "+w(G.cropBox.bottomLeftY)+" "+w(G.cropBox.topRightX)+" "+w(G.cropBox.topRightY)+"]"),G.bleedBox!==null&&he("/BleedBox ["+w(G.bleedBox.bottomLeftX)+" "+w(G.bleedBox.bottomLeftY)+" "+w(G.bleedBox.topRightX)+" "+w(G.bleedBox.topRightY)+"]"),G.trimBox!==null&&he("/TrimBox ["+w(G.trimBox.bottomLeftX)+" "+w(G.trimBox.bottomLeftY)+" "+w(G.trimBox.topRightX)+" "+w(G.trimBox.topRightY)+"]"),G.artBox!==null&&he("/ArtBox ["+w(G.artBox.bottomLeftX)+" "+w(G.artBox.bottomLeftY)+" "+w(G.artBox.topRightX)+" "+w(G.artBox.topRightY)+"]"),typeof G.userUnit=="number"&&G.userUnit!==1&&he("/UserUnit "+G.userUnit),zt.publish("putPage",{objId:Le,pageContext:Dt[de],pageNumber:de,page:Fe}),he("/Contents "+Ke+" 0 R"),he(">>"),he("endobj");var xt=Fe.join(`
`);return S===_.ADVANCED&&(xt+=`
Q`),fe(Ke,!0),ut({data:xt,filters:Ye(),objectId:Ke}),he("endobj"),Le},tt=p.__private__.putPages=function(){var G,de,Fe=[];for(G=1;G<=dt;G++)Dt[G].objId=ta(),Dt[G].contentsObjId=ta();for(G=1;G<=dt;G++)Fe.push($e({number:G,data:je[G],objId:Dt[G].objId,contentsObjId:Dt[G].contentsObjId,mediaBox:Dt[G].mediaBox,cropBox:Dt[G].cropBox,bleedBox:Dt[G].bleedBox,trimBox:Dt[G].trimBox,artBox:Dt[G].artBox,userUnit:Dt[G].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:Ce}));fe(Ee,!0),he("<</Type /Pages");var Le="/Kids [";for(de=0;de<dt;de++)Le+=Fe[de]+" 0 R ";he(Le+"]"),he("/Count "+dt),he(">>"),he("endobj"),zt.publish("postPutPages")},at=function(G){zt.publish("putFont",{font:G,out:he,newObject:Yr,putStream:ut}),G.isAlreadyPutted!==!0&&(G.objectNumber=Yr(),he("<<"),he("/Type /Font"),he("/BaseFont /"+hv(G.postScriptName)),he("/Subtype /Type1"),typeof G.encoding=="string"&&he("/Encoding /"+G.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},Tt=function(){for(var G in Cr)Cr.hasOwnProperty(G)&&(f===!1||f===!0&&h.hasOwnProperty(G))&&at(Cr[G])},Vt=function(G){G.objectNumber=Yr();var de=[];de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Form"}),de.push({key:"BBox",value:"["+[w(G.x),w(G.y),w(G.x+G.width),w(G.y+G.height)].join(" ")+"]"}),de.push({key:"Matrix",value:"["+G.matrix.toString()+"]"});var Fe=G.pages[1].join(`
`);ut({data:Fe,additionalKeyValues:de,objectId:G.objectNumber}),he("endobj")},Yt=function(){for(var G in Xr)Xr.hasOwnProperty(G)&&Vt(Xr[G])},Ht=function(G,de){var Fe,Le=[],Ke=1/(de-1);for(Fe=0;Fe<1;Fe+=Ke)Le.push(Fe);if(Le.push(1),G[0].offset!=0){var xt={offset:0,color:G[0].color};G.unshift(xt)}if(G[G.length-1].offset!=1){var Pt={offset:1,color:G[G.length-1].color};G.push(Pt)}for(var Jt="",D=0,ee=0;ee<Le.length;ee++){for(Fe=Le[ee];Fe>G[D+1].offset;)D++;var se=G[D].offset,xe=(Fe-se)/(G[D+1].offset-se),ze=G[D].color,st=G[D+1].color;Jt+=te(Math.round((1-xe)*ze[0]+xe*st[0]).toString(16))+te(Math.round((1-xe)*ze[1]+xe*st[1]).toString(16))+te(Math.round((1-xe)*ze[2]+xe*st[2]).toString(16))}return Jt.trim()},Kt=function(G,de){de||(de=21);var Fe=Yr(),Le=Ht(G.colors,de),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+de+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ut({data:Le,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),he("endobj"),G.objectNumber=Yr(),he("<< /ShadingType "+G.type),he("/ColorSpace /DeviceRGB");var xt="/Coords ["+w(parseFloat(G.coords[0]))+" "+w(parseFloat(G.coords[1]))+" ";G.type===2?xt+=w(parseFloat(G.coords[2]))+" "+w(parseFloat(G.coords[3])):xt+=w(parseFloat(G.coords[2]))+" "+w(parseFloat(G.coords[3]))+" "+w(parseFloat(G.coords[4]))+" "+w(parseFloat(G.coords[5])),he(xt+="]"),G.matrix&&he("/Matrix ["+G.matrix.toString()+"]"),he("/Function "+Fe+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},_r=function(G,de){var Fe=ta(),Le=Yr();de.push({resourcesOid:Fe,objectOid:Le}),G.objectNumber=Le;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+G.boundingBox.map(w).join(" ")+"]"}),Ke.push({key:"XStep",value:w(G.xStep)}),Ke.push({key:"YStep",value:w(G.yStep)}),Ke.push({key:"Resources",value:Fe+" 0 R"}),G.matrix&&Ke.push({key:"Matrix",value:"["+G.matrix.toString()+"]"}),ut({data:G.stream,additionalKeyValues:Ke,objectId:G.objectNumber}),he("endobj")},an=function(G){var de;for(de in jr)jr.hasOwnProperty(de)&&(jr[de]instanceof Ym?Kt(jr[de]):jr[de]instanceof bv&&_r(jr[de],G))},sn=function(G){for(var de in G.objectNumber=Yr(),he("<<"),G)switch(de){case"opacity":he("/ca "+R(G[de]));break;case"stroke-opacity":he("/CA "+R(G[de]))}he(">>"),he("endobj")},dn=function(){var G;for(G in pt)pt.hasOwnProperty(G)&&sn(pt[G])},ds=function(){for(var G in he("/XObject <<"),Xr)Xr.hasOwnProperty(G)&&Xr[G].objectNumber>=0&&he("/"+G+" "+Xr[G].objectNumber+" 0 R");zt.publish("putXobjectDict"),he(">>")},bo=function(){ca.oid=Yr(),he("<<"),he("/Filter /Standard"),he("/V "+ca.v),he("/R "+ca.r),he("/U <"+ca.toHexString(ca.U)+">"),he("/O <"+ca.toHexString(ca.O)+">"),he("/P "+ca.P),he(">>"),he("endobj")},As=function(){for(var G in he("/Font <<"),Cr)Cr.hasOwnProperty(G)&&(f===!1||f===!0&&h.hasOwnProperty(G))&&he("/"+G+" "+Cr[G].objectNumber+" 0 R");he(">>")},ei=function(){if(Object.keys(jr).length>0){for(var G in he("/Shading <<"),jr)jr.hasOwnProperty(G)&&jr[G]instanceof Ym&&jr[G].objectNumber>=0&&he("/"+G+" "+jr[G].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),he(">>")}},js=function(G){if(Object.keys(jr).length>0){for(var de in he("/Pattern <<"),jr)jr.hasOwnProperty(de)&&jr[de]instanceof p.TilingPattern&&jr[de].objectNumber>=0&&jr[de].objectNumber<G&&he("/"+de+" "+jr[de].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),he(">>")}},vi=function(){if(Object.keys(pt).length>0){var G;for(G in he("/ExtGState <<"),pt)pt.hasOwnProperty(G)&&pt[G].objectNumber>=0&&he("/"+G+" "+pt[G].objectNumber+" 0 R");zt.publish("putGStateDict"),he(">>")}},xa=function(G){fe(G.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),As(),ei(),js(G.objectOid),vi(),ds(),he(">>"),he("endobj")},ti=function(){var G=[];Tt(),dn(),Yt(),an(G),zt.publish("putResources"),G.forEach(xa),xa({resourcesOid:Ce,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},Id=function(){zt.publish("putAdditionalObjects");for(var G=0;G<ge.length;G++){var de=ge[G];fe(de.objId,!0),he(de.content),he("endobj")}zt.publish("postPutAdditionalObjects")},xh=function(G){Vr[G.fontName]=Vr[G.fontName]||{},Vr[G.fontName][G.fontStyle]=G.id},Uc=function(G,de,Fe,Le,Ke){var xt={id:"F"+(Object.keys(Cr).length+1).toString(10),postScriptName:G,fontName:de,fontStyle:Fe,encoding:Le,isStandardFont:Ke||!1,metadata:{}};return zt.publish("addFont",{font:xt,instance:this}),Cr[xt.id]=xt,xh(xt),xt.id},qA=function(G){for(var de=0,Fe=Xe.length;de<Fe;de++){var Le=Uc.call(this,G[de][0],G[de][1],G[de][2],Xe[de][3],!0);f===!1&&(h[Le]=!0);var Ke=G[de][0].split("-");xh({id:Le,fontName:Ke[0],fontStyle:Ke[1]||""})}zt.publish("addFonts",{fonts:Cr,dictionary:Vr})},xi=function(G){return G.foo=function(){try{return G.apply(this,arguments)}catch(Le){var de=Le.stack||"";~de.indexOf(" at ")&&(de=de.split(" at ")[1]);var Fe="Error in function "+de.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Mr.console)throw new Error(Fe);Mr.console.error(Fe,Le),Mr.alert&&alert(Fe)}},G.foo.bar=G,G.foo},jd=function(G,de){var Fe,Le,Ke,xt,Pt,Jt,D,ee,se;if(Ke=(de=de||{}).sourceEncoding||"Unicode",Pt=de.outputEncoding,(de.autoencode||Pt)&&Cr[Qt].metadata&&Cr[Qt].metadata[Ke]&&Cr[Qt].metadata[Ke].encoding&&(xt=Cr[Qt].metadata[Ke].encoding,!Pt&&Cr[Qt].encoding&&(Pt=Cr[Qt].encoding),!Pt&&xt.codePages&&(Pt=xt.codePages[0]),typeof Pt=="string"&&(Pt=xt[Pt]),Pt)){for(D=!1,Jt=[],Fe=0,Le=G.length;Fe<Le;Fe++)(ee=Pt[G.charCodeAt(Fe)])?Jt.push(String.fromCharCode(ee)):Jt.push(G[Fe]),Jt[Fe].charCodeAt(0)>>8&&(D=!0);G=Jt.join("")}for(Fe=G.length;D===void 0&&Fe!==0;)G.charCodeAt(Fe-1)>>8&&(D=!0),Fe--;if(!D)return G;for(Jt=de.noBOM?[]:[254,255],Fe=0,Le=G.length;Fe<Le;Fe++){if((se=(ee=G.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+G+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Jt.push(se),Jt.push(ee-(se<<8))}return String.fromCharCode.apply(void 0,Jt)},jn=p.__private__.pdfEscape=p.pdfEscape=function(G,de){return jd(G,de).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bi=p.__private__.beginPage=function(G){je[++dt]=[],Dt[dt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(G[0]),topRightY:Number(G[1])}},wl(dt),_e(je[W])},Qc=function(G,de){var Fe,Le,Ke;switch(r=de||r,typeof G=="string"&&(Fe=y(G.toLowerCase()),Array.isArray(Fe)&&(Le=Fe[0],Ke=Fe[1])),Array.isArray(G)&&(Le=G[0]*bt,Ke=G[1]*bt),isNaN(Le)&&(Le=a[0],Ke=a[1]),(Le>14400||Ke>14400)&&(Na.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ke=Math.min(14400,Ke)),a=[Le,Ke],r.substr(0,1)){case"l":Ke>Le&&(a=[Ke,Le]);break;case"p":Le>Ke&&(a=[Ke,Le])}bi(a),JA($c),he(yi),ZA!==0&&he(ZA+" J"),Qu!==0&&he(Qu+" j"),zt.publish("addPage",{pageNumber:dt})},Hc=function(G){G>0&&G<=dt&&(je.splice(G,1),Dt.splice(G,1),dt--,W>dt&&(W=dt),this.setPage(W))},wl=function(G){G>0&&G<=dt&&(W=G)},Hn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return je.length-1},Vc=function(G,de,Fe){var Le,Ke=void 0;return Fe=Fe||{},G=G!==void 0?G:Cr[Qt].fontName,de=de!==void 0?de:Cr[Qt].fontStyle,Le=G.toLowerCase(),Vr[Le]!==void 0&&Vr[Le][de]!==void 0?Ke=Vr[Le][de]:Vr[G]!==void 0&&Vr[G][de]!==void 0?Ke=Vr[G][de]:Fe.disableWarning===!1&&Na.warn("Unable to look up font label for font '"+G+"', '"+de+"'. Refer to getFontList() for available fonts."),Ke||Fe.noFallback||(Ke=Vr.times[de])==null&&(Ke=Vr.times.normal),Ke},yo=p.__private__.putInfo=function(){var G=Yr(),de=function(Le){return Le};for(var Fe in d!==null&&(de=ca.encryptor(G,0)),he("<<"),he("/Producer ("+jn(de("jsPDF "+mr.version))+")"),Ot)Ot.hasOwnProperty(Fe)&&Ot[Fe]&&he("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+jn(de(Ot[Fe]))+")");he("/CreationDate ("+jn(de(X))+")"),he(">>"),he("endobj")},ec=p.__private__.putCatalog=function(G){var de=(G=G||{}).rootDictionaryObjId||Ee;switch(Yr(),he("<<"),he("/Type /Catalog"),he("/Pages "+de+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+Oe;Fe.substr(Fe.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&he("/OpenAction [3 0 R /XYZ null null "+R(Oe)+"]")}switch(mt||(mt="continuous"),mt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}Ze&&he("/PageMode /"+Ze),zt.publish("putCatalog"),he(">>"),he("endobj")},bh=p.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(ie+1)),he("/Root "+ie+" 0 R"),he("/Info "+(ie-1)+" 0 R"),d!==null&&he("/Encrypt "+ca.oid+" 0 R"),he("/ID [ <"+K+"> <"+K+"> ]"),he(">>")},WA=p.__private__.putHeader=function(){he("%PDF-"+g),he("%ºß¬à")},XA=p.__private__.putXRef=function(){var G="0000000000";he("xref"),he("0 "+(ie+1)),he("0000000000 65535 f ");for(var de=1;de<=ie;de++)typeof Ae[de]=="function"?he((G+Ae[de]()).slice(-10)+" 00000 n "):Ae[de]!==void 0?he((G+Ae[de]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},tc=p.__private__.buildDocument=function(){De(),_e(oe),zt.publish("buildDocument"),WA(),tt(),Id(),ti(),d!==null&&bo(),yo(),ec();var G=ce;return XA(),bh(),he("startxref"),he(""+G),he("%%EOF"),_e(je[W]),oe.join(`
`)},Fd=p.__private__.getBlob=function(G){return new Blob([He(G)],{type:"application/pdf"})},rc=p.output=p.__private__.output=xi(function(G,de){switch(typeof(de=de||{})=="string"?de={filename:de}:de.filename=de.filename||"generated.pdf",G){case void 0:return tc();case"save":p.save(de.filename);break;case"arraybuffer":return He(tc());case"blob":return Fd(tc());case"bloburi":case"bloburl":if(Mr.URL!==void 0&&typeof Mr.URL.createObjectURL=="function")return Mr.URL&&Mr.URL.createObjectURL(Fd(tc()))||void 0;Na.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Le=tc();try{Fe=wj(Le)}catch{Fe=wj(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+de.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';de.pdfObjectUrl&&(Ke=de.pdfObjectUrl,xt="");var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+xt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(de)+");<\/script></body></html>",Jt=Mr.open();return Jt!==null&&Jt.document.write(Pt),Jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var D='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(de.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+de.filename+'" width="500px" height="400px" /></body></html>',ee=Mr.open();if(ee!==null){ee.document.write(D);var se=this;ee.document.documentElement.querySelector("#pdfViewer").onload=function(){ee.document.title=de.filename,ee.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return ee}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",de)+'"></iframe></body></html>',ze=Mr.open();if(ze!==null&&(ze.document.write(xe),ze.document.title=de.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Mr.document.location.href=this.output("datauristring",de);default:return null}}),El=function(G){return Array.isArray(Pr)===!0&&Pr.indexOf(G)>-1};switch(n){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=El("px_scaling")==1?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);bt=n}var ca=null;ne(),H();var nc=function(G){return d!==null?ca.encryptor(G,0):function(de){return de}},Cl=p.__private__.getPageInfo=p.getPageInfo=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[G].objId,pageNumber:G,pageContext:Dt[G]}},Br=p.__private__.getPageInfoByObjId=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var de in Dt)if(Dt[de].objId===G)break;return Cl(de)},_l=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Dt[W].objId,pageNumber:W,pageContext:Dt[W]}};p.addPage=function(){return Qc.apply(this,arguments),this},p.setPage=function(){return wl.apply(this,arguments),_e.call(this,je[W]),this},p.insertPage=function(G){return this.addPage(),this.movePage(W,G),this},p.movePage=function(G,de){var Fe,Le;if(G>de){Fe=je[G],Le=Dt[G];for(var Ke=G;Ke>de;Ke--)je[Ke]=je[Ke-1],Dt[Ke]=Dt[Ke-1];je[de]=Fe,Dt[de]=Le,this.setPage(de)}else if(G<de){Fe=je[G],Le=Dt[G];for(var xt=G;xt<de;xt++)je[xt]=je[xt+1],Dt[xt]=Dt[xt+1];je[de]=Fe,Dt[de]=Le,this.setPage(de)}return this},p.deletePage=function(){return Hc.apply(this,arguments),this},p.__private__.text=p.text=function(G,de,Fe,Le,Ke){var xt,Pt,Jt,D,ee,se,xe,ze,st,Mt=(Le=Le||{}).scope||this;if(typeof G=="number"&&typeof de=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var Tr=Fe;Fe=de,de=G,G=Tr}if(arguments[3]instanceof $t?(C("The transform parameter of text() with a Matrix value"),st=Ke):(Jt=arguments[4],D=arguments[5],pa(xe=arguments[3])==="object"&&xe!==null||(typeof Jt=="string"&&(D=Jt,Jt=null),typeof xe=="string"&&(D=xe,xe=null),typeof xe=="number"&&(Jt=xe,xe=null),Le={flags:xe,angle:Jt,align:D})),isNaN(de)||isNaN(Fe)||G==null)throw new Error("Invalid arguments passed to jsPDF.text");if(G.length===0)return Mt;var xn="",Gr=!1,Vn=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:vn,ra=Mt.internal.scaleFactor;function Bl(fn){return fn=fn.split("	").join(Array(Le.TabLen||9).join(" ")),jn(fn,xe)}function Za(fn){for(var hn,ba=fn.concat(),es=[],Il=ba.length;Il--;)typeof(hn=ba.shift())=="string"?es.push(hn):Array.isArray(fn)&&(hn.length===1||hn[1]===void 0&&hn[2]===void 0)?es.push(hn[0]):es.push([hn[0],hn[1],hn[2]]);return es}function _o(fn,hn){var ba;if(typeof fn=="string")ba=hn(fn)[0];else if(Array.isArray(fn)){for(var es,Il,Gd=fn.concat(),qd=[],Gu=Gd.length;Gu--;)typeof(es=Gd.shift())=="string"?qd.push(hn(es)[0]):Array.isArray(es)&&typeof es[0]=="string"&&(Il=hn(es[0],es[1],es[2]),qd.push([Il[0],Il[1],Il[2]]));ba=qd}return ba}var Yc=!1,Ld=!0;if(typeof G=="string")Yc=!0;else if(Array.isArray(G)){var Ch=G.concat();Pt=[];for(var ef,Fs=Ch.length;Fs--;)(typeof(ef=Ch.shift())!="string"||Array.isArray(ef)&&typeof ef[0]!="string")&&(Ld=!1);Yc=Ld}if(Yc===!1)throw new Error('Type of text must be string or Array. "'+G+'" is not recognized.');typeof G=="string"&&(G=G.match(/[\r?\n]/)?G.split(/\r\n|\r|\n/g):[G]);var Md=ye/Mt.internal.scaleFactor,tf=Md*(Vn-1);switch(Le.baseline){case"bottom":Fe-=tf;break;case"top":Fe+=Md-tf;break;case"hanging":Fe+=Md-2*tf;break;case"middle":Fe+=Md/2-tf}if((se=Le.maxWidth||0)>0&&(typeof G=="string"?G=Mt.splitTextToSize(G,se):Object.prototype.toString.call(G)==="[object Array]"&&(G=G.reduce(function(fn,hn){return fn.concat(Mt.splitTextToSize(hn,se))},[]))),xt={text:G,x:de,y:Fe,options:Le,mutex:{pdfEscape:jn,activeFontKey:Qt,fonts:Cr,activeFontSize:ye}},zt.publish("preProcessText",xt),G=xt.text,Jt=(Le=xt.options).angle,!(st instanceof $t)&&Jt&&typeof Jt=="number"){Jt*=Math.PI/180,Le.rotationDirection===0&&(Jt=-Jt),S===_.ADVANCED&&(Jt=-Jt);var rf=Math.cos(Jt),_h=Math.sin(Jt);st=new $t(rf,_h,-_h,rf,0,0)}else Jt&&Jt instanceof $t&&(st=Jt);S!==_.ADVANCED||st||(st=en),(ee=Le.charSpace||Uu)!==void 0&&(xn+=w(j(ee))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Le.horizontalScale)!==void 0&&(xn+=w(100*ze)+` Tz
`),Le.lang;var So=-1,u1=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,bm=Mt.internal.getCurrentPageInfo().pageContext;switch(u1){case 0:case!1:case"fill":So=0;break;case 1:case!0:case"stroke":So=1;break;case 2:case"fillThenStroke":So=2;break;case 3:case"invisible":So=3;break;case 4:case"fillAndAddForClipping":So=4;break;case 5:case"strokeAndAddPathForClipping":So=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":So=6;break;case 7:case"addToPathForClipping":So=7}var cg=bm.usedRenderingMode!==void 0?bm.usedRenderingMode:-1;So!==-1?xn+=So+` Tr
`:cg!==-1&&(xn+=`0 Tr
`),So!==-1&&(bm.usedRenderingMode=So),D=Le.align||"left";var Tl,ri=ye*Vn,Ud=Mt.internal.pageSize.getWidth(),ym=Cr[Qt];ee=Le.charSpace||Uu,se=Le.maxWidth||0,xe=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var $u=[],Qd=function(fn){return Mt.getStringUnitWidth(fn,{font:ym,charSpace:ee,fontSize:ye,doKerning:!1})*ye/ra};if(Object.prototype.toString.call(G)==="[object Array]"){var to;Pt=Za(G),D!=="left"&&(Tl=Pt.map(Qd));var wi,Hd=0;if(D==="right"){de-=Tl[0],G=[],Fs=Pt.length;for(var No=0;No<Fs;No++)No===0?(wi=Di(de),to=hs(Fe)):(wi=j(Hd-Tl[No]),to=-ri),G.push([Pt[No],wi,to]),Hd=Tl[No]}else if(D==="center"){de-=Tl[0]/2,G=[],Fs=Pt.length;for(var oc=0;oc<Fs;oc++)oc===0?(wi=Di(de),to=hs(Fe)):(wi=j((Hd-Tl[oc])/2),to=-ri),G.push([Pt[oc],wi,to]),Hd=Tl[oc]}else if(D==="left"){G=[],Fs=Pt.length;for(var Jc=0;Jc<Fs;Jc++)G.push(Pt[Jc])}else if(D==="justify"&&ym.encoding==="Identity-H"){G=[],Fs=Pt.length,se=se!==0?se:Ud;for(var lc=0,za=0;za<Fs;za++)if(to=za===0?hs(Fe):-ri,wi=za===0?Di(de):lc,za<Fs-1){var cc=j((se-Tl[za])/(Pt[za].split(" ").length-1)),ms=Pt[za].split(" ");G.push([ms[0]+" ",wi,to]),lc=0;for(var ko=1;ko<ms.length;ko++){var nf=(Qd(ms[ko-1]+" "+ms[ko])-Qd(ms[ko]))*ra+cc;ko==ms.length-1?G.push([ms[ko],nf,0]):G.push([ms[ko]+" ",nf,0]),lc-=nf}}else G.push([Pt[za],wi,to]);G.push(["",lc,0])}else{if(D!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(G=[],Fs=Pt.length,se=se!==0?se:Ud,za=0;za<Fs;za++)to=za===0?hs(Fe):-ri,wi=za===0?Di(de):0,za<Fs-1?$u.push(w(j((se-Tl[za])/(Pt[za].split(" ").length-1)))):$u.push(0),G.push([Pt[za],wi,to])}}var Zc=typeof Le.R2L=="boolean"?Le.R2L:qe;Zc===!0&&(G=_o(G,function(fn,hn,ba){return[fn.split("").reverse().join(""),hn,ba]})),xt={text:G,x:de,y:Fe,options:Le,mutex:{pdfEscape:jn,activeFontKey:Qt,fonts:Cr,activeFontSize:ye}},zt.publish("postProcessText",xt),G=xt.text,Gr=xt.mutex.isHex||!1;var Sh=Cr[Qt].encoding;Sh!=="WinAnsiEncoding"&&Sh!=="StandardEncoding"||(G=_o(G,function(fn,hn,ba){return[Bl(fn),hn,ba]})),Pt=Za(G),G=[];for(var Vd,zd,$d,af=0,Nh=1,Kd=Array.isArray(Pt[0])?Nh:af,Ku="",sf=function(fn,hn,ba){var es="";return ba instanceof $t?(ba=typeof Le.angle=="number"?tn(ba,new $t(1,0,0,1,fn,hn)):tn(new $t(1,0,0,1,fn,hn),ba),S===_.ADVANCED&&(ba=tn(new $t(1,0,0,-1,0,0),ba)),es=ba.join(" ")+` Tm
`):es=w(fn)+" "+w(hn)+` Td
`,es},$a=0;$a<Pt.length;$a++){switch(Ku="",Kd){case Nh:$d=(Gr?"<":"(")+Pt[$a][0]+(Gr?">":")"),Vd=parseFloat(Pt[$a][1]),zd=parseFloat(Pt[$a][2]);break;case af:$d=(Gr?"<":"(")+Pt[$a]+(Gr?">":")"),Vd=Di(de),zd=hs(Fe)}$u!==void 0&&$u[$a]!==void 0&&(Ku=$u[$a]+` Tw
`),$a===0?G.push(Ku+sf(Vd,zd,st)+$d):Kd===af?G.push(Ku+$d):Kd===Nh&&G.push(Ku+sf(Vd,zd,st)+$d)}G=Kd===af?G.join(` Tj
T* `):G.join(` Tj
`),G+=` Tj
`;var al=`BT
/`;return al+=Qt+" "+ye+` Tf
`,al+=w(ye*Vn)+` TL
`,al+=sc+`
`,al+=xn,al+=G,he(al+="ET"),h[Qt]=!0,Mt};var yh=p.__private__.clip=p.clip=function(G){return he(G==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return yh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return he("n"),this};var Fi=p.__private__.isValidStyle=function(G){var de=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(G)!==-1&&(de=!0),de};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(G){return Fi(G)&&(u=G),this};var wo=p.__private__.getStyle=p.getStyle=function(G){var de=u;switch(G){case"D":case"S":de="S";break;case"F":de="f";break;case"FD":case"DF":de="B";break;case"f":case"f*":case"B":case"B*":de=G}return de},eo=p.close=function(){return he("h"),this};p.stroke=function(){return he("S"),this},p.fill=function(G){return Sl("f",G),this},p.fillEvenOdd=function(G){return Sl("f*",G),this},p.fillStroke=function(G){return Sl("B",G),this},p.fillStrokeEvenOdd=function(G){return Sl("B*",G),this};var Sl=function(G,de){pa(de)==="object"?ac(de,G):he(G)},Eo=function(G){G===null||S===_.ADVANCED&&G===void 0||(G=wo(G),he(G))};function zc(G,de,Fe,Le,Ke){var xt=new bv(de||this.boundingBox,Fe||this.xStep,Le||this.yStep,this.gState,Ke||this.matrix);xt.stream=this.stream;var Pt=G+"$$"+this.cloneIndex+++"$$";return cr(Pt,xt),xt}var ac=function(G,de){var Fe=vt[G.key],Le=jr[Fe];if(Le instanceof Ym)he("q"),he(YA(de)),Le.gState&&p.setGState(Le.gState),he(G.matrix.toString()+" cm"),he("/"+Fe+" sh"),he("Q");else if(Le instanceof bv){var Ke=new $t(1,0,0,-1,0,Ri());G.matrix&&(Ke=Ke.multiply(G.matrix||en),Fe=zc.call(Le,G.key,G.boundingBox,G.xStep,G.yStep,Ke).id),he("q"),he("/Pattern cs"),he("/"+Fe+" scn"),Le.gState&&p.setGState(Le.gState),he(de),he("Q")}},YA=function(G){switch(G){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Co=p.moveTo=function(G,de){return he(w(j(G))+" "+w(P(de))+" m"),this},Oi=p.lineTo=function(G,de){return he(w(j(G))+" "+w(P(de))+" l"),this},Nl=p.curveTo=function(G,de,Fe,Le,Ke,xt){return he([w(j(G)),w(P(de)),w(j(Fe)),w(P(Le)),w(j(Ke)),w(P(xt)),"c"].join(" ")),this};p.__private__.line=p.line=function(G,de,Fe,Le,Ke){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!Fi(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return S===_.COMPAT?this.lines([[Fe-G,Le-de]],G,de,[1,1],Ke||"S"):this.lines([[Fe-G,Le-de]],G,de,[1,1]).stroke()},p.__private__.lines=p.lines=function(G,de,Fe,Le,Ke,xt){var Pt,Jt,D,ee,se,xe,ze,st,Mt,Tr,xn,Gr;if(typeof G=="number"&&(Gr=Fe,Fe=de,de=G,G=Gr),Le=Le||[1,1],xt=xt||!1,isNaN(de)||isNaN(Fe)||!Array.isArray(G)||!Array.isArray(Le)||!Fi(Ke)||typeof xt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Co(de,Fe),Pt=Le[0],Jt=Le[1],ee=G.length,Tr=de,xn=Fe,D=0;D<ee;D++)(se=G[D]).length===2?(Tr=se[0]*Pt+Tr,xn=se[1]*Jt+xn,Oi(Tr,xn)):(xe=se[0]*Pt+Tr,ze=se[1]*Jt+xn,st=se[2]*Pt+Tr,Mt=se[3]*Jt+xn,Tr=se[4]*Pt+Tr,xn=se[5]*Jt+xn,Nl(xe,ze,st,Mt,Tr,xn));return xt&&eo(),Eo(Ke),this},p.path=function(G){for(var de=0;de<G.length;de++){var Fe=G[de],Le=Fe.c;switch(Fe.op){case"m":Co(Le[0],Le[1]);break;case"l":Oi(Le[0],Le[1]);break;case"c":Nl.apply(this,Le);break;case"h":eo()}}return this},p.__private__.rect=p.rect=function(G,de,Fe,Le,Ke){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!Fi(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return S===_.COMPAT&&(Le=-Le),he([w(j(G)),w(P(de)),w(j(Fe)),w(j(Le)),"re"].join(" ")),Eo(Ke),this},p.__private__.triangle=p.triangle=function(G,de,Fe,Le,Ke,xt,Pt){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||isNaN(Ke)||isNaN(xt)||!Fi(Pt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-G,Le-de],[Ke-Fe,xt-Le],[G-Ke,de-xt]],G,de,[1,1],Pt,!0),this},p.__private__.roundedRect=p.roundedRect=function(G,de,Fe,Le,Ke,xt,Pt){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||isNaN(Ke)||isNaN(xt)||!Fi(Pt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Jt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*Fe),xt=Math.min(xt,.5*Le),this.lines([[Fe-2*Ke,0],[Ke*Jt,0,Ke,xt-xt*Jt,Ke,xt],[0,Le-2*xt],[0,xt*Jt,-Ke*Jt,xt,-Ke,xt],[2*Ke-Fe,0],[-Ke*Jt,0,-Ke,-xt*Jt,-Ke,-xt],[0,2*xt-Le],[0,-xt*Jt,Ke*Jt,-xt,Ke,-xt]],G+Ke,de,[1,1],Pt,!0),this},p.__private__.ellipse=p.ellipse=function(G,de,Fe,Le,Ke){if(isNaN(G)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!Fi(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xt=4/3*(Math.SQRT2-1)*Fe,Pt=4/3*(Math.SQRT2-1)*Le;return Co(G+Fe,de),Nl(G+Fe,de-Pt,G+xt,de-Le,G,de-Le),Nl(G-xt,de-Le,G-Fe,de-Pt,G-Fe,de),Nl(G-Fe,de+Pt,G-xt,de+Le,G,de+Le),Nl(G+xt,de+Le,G+Fe,de+Pt,G+Fe,de),Eo(Ke),this},p.__private__.circle=p.circle=function(G,de,Fe,Le){if(isNaN(G)||isNaN(de)||isNaN(Fe)||!Fi(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(G,de,Fe,Fe,Le)},p.setFont=function(G,de,Fe){return Fe&&(de=F(de,Fe)),Qt=Vc(G,de,{disableWarning:!1}),this};var fs=p.__private__.getFont=p.getFont=function(){return Cr[Vc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var G,de,Fe={};for(G in Vr)if(Vr.hasOwnProperty(G))for(de in Fe[G]=[],Vr[G])Vr[G].hasOwnProperty(de)&&Fe[G].push(de);return Fe},p.addFont=function(G,de,Fe,Le,Ke){var xt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xt.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&xt.indexOf(arguments[3])==-1&&(Fe=F(Fe,Le)),Ke=Ke||"Identity-H",Uc.call(this,G,de,Fe,Ke)};var vn,$c=e.lineWidth||.200025,kl=p.__private__.getLineWidth=p.getLineWidth=function(){return $c},JA=p.__private__.setLineWidth=p.setLineWidth=function(G){return $c=G,he(w(j(G))+" w"),this};p.__private__.setLineDash=mr.API.setLineDash=mr.API.setLineDashPattern=function(G,de){if(G=G||[],de=de||0,isNaN(de)||!Array.isArray(G))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return G=G.map(function(Fe){return w(j(Fe))}).join(" "),de=w(j(de)),he("["+G+"] "+de+" d"),this};var Lu=p.__private__.getLineHeight=p.getLineHeight=function(){return ye*vn};p.__private__.getLineHeight=p.getLineHeight=function(){return ye*vn};var Mu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(G){return typeof(G=G||1.15)=="number"&&(vn=G),this},nl=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return vn};Mu(e.lineHeight);var Di=p.__private__.getHorizontalCoordinate=function(G){return j(G)},hs=p.__private__.getVerticalCoordinate=function(G){return S===_.ADVANCED?G:Dt[W].mediaBox.topRightY-Dt[W].mediaBox.bottomLeftY-j(G)},wh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(G){return w(Di(G))},Kc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(G){return w(hs(G))},yi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ne(yi)},p.__private__.setStrokeColor=p.setDrawColor=function(G,de,Fe,Le){return yi=Te({ch1:G,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"draw",precision:2}),he(yi),this};var Gc=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ne(Gc)},p.__private__.setFillColor=p.setFillColor=function(G,de,Fe,Le){return Gc=Te({ch1:G,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"fill",precision:2}),he(Gc),this};var sc=e.textColor||"0 g",Od=p.__private__.getTextColor=p.getTextColor=function(){return Ne(sc)};p.__private__.setTextColor=p.setTextColor=function(G,de,Fe,Le){return sc=Te({ch1:G,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"text",precision:3}),this};var Uu=e.charSpace,Dd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Uu||0)};p.__private__.setCharSpace=p.setCharSpace=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Uu=G,this};var ZA=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(G){var de=p.CapJoinStyles[G];if(de===void 0)throw new Error("Line cap style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ZA=de,he(de+" J"),this};var Qu=0;p.__private__.setLineJoin=p.setLineJoin=function(G){var de=p.CapJoinStyles[G];if(de===void 0)throw new Error("Line join style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qu=de,he(de+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(G){if(G=G||0,isNaN(G))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(w(j(G))+" M"),this},p.GState=G_,p.setGState=function(G){(G=typeof G=="string"?pt[Je[G]]:qc(null,G)).equals(gt)||(he("/"+G.id+" gs"),gt=G)};var qc=function(G,de){if(!G||!Je[G]){var Fe=!1;for(var Le in pt)if(pt.hasOwnProperty(Le)&&pt[Le].equals(de)){Fe=!0;break}if(Fe)de=pt[Le];else{var Ke="GS"+(Object.keys(pt).length+1).toString(10);pt[Ke]=de,de.id=Ke}return G&&(Je[G]=de.id),zt.publish("addGState",de),de}};p.addGState=function(G,de){return qc(G,de),this},p.saveGraphicsState=function(){return he("q"),In.push({key:Qt,size:ye,color:sc}),this},p.restoreGraphicsState=function(){he("Q");var G=In.pop();return Qt=G.key,ye=G.size,sc=G.color,gt=null,this},p.setCurrentTransformationMatrix=function(G){return he(G.toString()+" cm"),this},p.comment=function(G){return he("#"+G),this};var Hu=function(G,de){var Fe=G||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(xt){isNaN(xt)||(Fe=parseFloat(xt))}});var Le=de||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(xt){isNaN(xt)||(Le=parseFloat(xt))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(xt){Ke=xt.toString()}}),this},Rd=function(G,de,Fe,Le){Hu.call(this,G,de),this.type="rect";var Ke=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(Pt){isNaN(Pt)||(Ke=parseFloat(Pt))}});var xt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xt},set:function(Pt){isNaN(Pt)||(xt=parseFloat(Pt))}}),this},Vu=function(){this.page=dt,this.currentPage=W,this.pages=je.slice(0),this.pagesContext=Dt.slice(0),this.x=Nr,this.y=tr,this.matrix=nn,this.width=Xc(W),this.height=Ri(W),this.outputDestination=Se,this.id="",this.objectNumber=-1};Vu.prototype.restore=function(){dt=this.page,W=this.currentPage,Dt=this.pagesContext,je=this.pages,Nr=this.x,tr=this.y,nn=this.matrix,zu(W,this.width),Pd(W,this.height),Se=this.outputDestination};var Wc=function(G,de,Fe,Le,Ke){gn.push(new Vu),dt=W=0,je=[],Nr=G,tr=de,nn=Ke,bi([Fe,Le])},Eh=function(G){if(pn[G])gn.pop().restore();else{var de=new Vu,Fe="Xo"+(Object.keys(Xr).length+1).toString(10);de.id=Fe,pn[G]=Fe,Xr[Fe]=de,zt.publish("addFormObject",de),gn.pop().restore()}};for(var ic in p.beginFormObject=function(G,de,Fe,Le,Ke){return Wc(G,de,Fe,Le,Ke),this},p.endFormObject=function(G){return Eh(G),this},p.doFormObject=function(G,de){var Fe=Xr[pn[G]];return he("q"),he(de.toString()+" cm"),he("/"+Fe.id+" Do"),he("Q"),this},p.getFormObject=function(G){var de=Xr[pn[G]];return{x:de.x,y:de.y,width:de.width,height:de.height,matrix:de.matrix}},p.save=function(G,de){return G=G||"generated.pdf",(de=de||{}).returnPromise=de.returnPromise||!1,de.returnPromise===!1?($m(Fd(tc()),G),typeof $m.unload=="function"&&Mr.setTimeout&&setTimeout($m.unload,911),this):new Promise(function(Fe,Le){try{var Ke=$m(Fd(tc()),G);typeof $m.unload=="function"&&Mr.setTimeout&&setTimeout($m.unload,911),Fe(Ke)}catch(xt){Le(xt.message)}})},mr.API)mr.API.hasOwnProperty(ic)&&(ic==="events"&&mr.API.events.length?function(G,de){var Fe,Le,Ke;for(Ke=de.length-1;Ke!==-1;Ke--)Fe=de[Ke][0],Le=de[Ke][1],G.subscribe.apply(G,[Fe].concat(typeof Le=="function"?[Le]:Le))}(zt,mr.API.events):p[ic]=mr.API[ic]);var Xc=p.getPageWidth=function(G){return(Dt[G=G||W].mediaBox.topRightX-Dt[G].mediaBox.bottomLeftX)/bt},zu=p.setPageWidth=function(G,de){Dt[G].mediaBox.topRightX=de*bt+Dt[G].mediaBox.bottomLeftX},Ri=p.getPageHeight=function(G){return(Dt[G=G||W].mediaBox.topRightY-Dt[G].mediaBox.bottomLeftY)/bt},Pd=p.setPageHeight=function(G,de){Dt[G].mediaBox.topRightY=de*bt+Dt[G].mediaBox.bottomLeftY};return p.internal={pdfEscape:jn,getStyle:wo,getFont:fs,getFontSize:Pe,getCharSpace:Dd,getTextColor:Od,getLineHeight:Lu,getLineHeightFactor:nl,getLineWidth:kl,write:Ie,getHorizontalCoordinate:Di,getVerticalCoordinate:hs,getCoordinateString:wh,getVerticalCoordinateString:Kc,collections:{},newObject:Yr,newAdditionalObject:Be,newObjectDeferred:ta,newObjectDeferredBegin:fe,getFilters:Ye,putStream:ut,events:zt,scaleFactor:bt,pageSize:{getWidth:function(){return Xc(W)},setWidth:function(G){zu(W,G)},getHeight:function(){return Ri(W)},setHeight:function(G){Pd(W,G)}},encryptionOptions:d,encryption:ca,getEncryptor:nc,output:rc,getNumberOfPages:Hn,pages:je,out:he,f2:R,f3:O,getPageInfo:Cl,getPageInfoByObjId:Br,getCurrentPageInfo:_l,getPDFVersion:v,Point:Hu,Rectangle:Rd,Matrix:$t,hasHotfix:El},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Xc(W)},set:function(G){zu(W,G)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ri(W)},set:function(G){Pd(W,G)},enumerable:!0,configurable:!0}),qA.call(p,Xe),Qt="F1",Qc(a,r),zt.publish("initialized"),p}fv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},fv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},fv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},fv.prototype.processOwnerPassword=function(e,t){return Cj(Ej(t).substr(0,5),e)},fv.prototype.encryptor=function(e,t){var r=Ej(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Cj(r,n)}},G_.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||pa(e)!==pa(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},mr.API={events:[]},mr.version="2.5.2";var ys=mr.API,aD=1,Jp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mg=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jr=function(e){return e.toFixed(2)},t0=function(e){return e.toFixed(5)};ys.__acroform__={};var Jl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},y9=function(e){return e*aD},uA=function(e){var t=new LJ,r=fr.internal.getHeight(e)||0,n=fr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Jr(n)),Number(Jr(r))],t},$ye=ys.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Kye=ys.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Gye=ys.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},$s=ys.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Gye(e,t-1)},Ks=ys.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $ye(e,t-1)},Gs=ys.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Kye(e,t-1)},qye=ys.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(s)||0,[Number(Jr(l.lowerLeft_X)),Number(Jr(l.lowerLeft_Y)),Number(Jr(l.upperRight_X)),Number(Jr(l.upperRight_Y))]},Wye=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=_j(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Jr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=uA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},_j=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(O){return O.split(`
`)}):a.map(function(O){return[O]});var s=r,i=fr.internal.getHeight(e)||0;i=i<0?-i:i;var o=fr.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(O,j,U){if(O+1<a.length){var P=j+" "+a[O+1][0];return wE(P,e,U).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=wE("3",e,s).height,h=e.multiline?i-s:(i-f)/2,p=h+=2,g=0,v=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+wE(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",_=0,S=0;S<a.length;S++)if(a.hasOwnProperty(S)){var k=!1;if(a[S].length!==1&&b!==a[S].length-1){if((f+2)*(_+2)+2>i)continue e;y+=a[S][b],k=!0,v=S,S--}else{y=(y+=a[S][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var B=parseInt(S),F=l(B,y,s),w=S>=a.length-1;if(F&&!w){y+=" ",b=0;continue}if(F||w){if(w)v=B;else if(e.multiline&&(f+2)*(_+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(_+2)+2>i)continue e;v=B}}for(var C="",N=g;N<=v;N++){var R=a[N];if(e.multiline){if(N===v){C+=R[b]+" ",b=(b+1)%R.length;continue}if(N===g){C+=R[R.length-1]+" ";continue}}C+=R[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,d=wE(C,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=Jr(u)+" "+Jr(p)+` Td
`,t+="("+Jp(C)+`) Tj
`,t+=-Jr(u)+` 0 Td
`,p=-(s+2),d=0,g=k?v:v+1,_++,y=""}break}return n.text=t,n.fontSize=s,n},wE=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Xye={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Yye=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Jye=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),pa(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},Zye=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Sd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Xye)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");aD=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new MJ,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&Yye(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=qye(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=fr.createDefaultAppearanceStream(o),pa(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Wye(o);l.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var g=p[i];typeof g=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=p)=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}s&&Jye(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},PJ=ys.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),pa(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Jp(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},SB=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Jp(n(e))+")"},wA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wA.prototype.toString=function(){return this.objId+" 0 R"},wA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},wA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:PJ(a,this.objId,this.scope)}):a instanceof wA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var LJ=function(){wA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Jl(LJ,wA);var MJ=function(){wA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Jp(r(e))+")"}},set:function(r){e=r}})};Jl(MJ,wA);var Sd=function e(){wA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$s(t,3)},set:function(y){y?this.F=Ks(t,3):this.F=Gs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof q_)return;s="FieldObject"+e.FieldNum++}var y=function(_){return _};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Jp(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/aD:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof q_||this instanceof mp))return SB(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ki?h:SB(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof Ki?y:y.substr(0,1)==="("?Mg(y.substr(1,y.length-2)):Mg(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Mg(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Ki?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ki?p:SB(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Ki?y:y.substr(0,1)==="("?Mg(y.substr(1,y.length-2)):Mg(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Mg(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Ki?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(y){y=!!y,v=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,1)},set:function(y){y?this.Ff=Ks(this.Ff,1):this.Ff=Gs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,2)},set:function(y){y?this.Ff=Ks(this.Ff,2):this.Ff=Gs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,3)},set:function(y){y?this.Ff=Ks(this.Ff,3):this.Ff=Gs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Jl(Sd,wA);var Lv=function(){Sd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return PJ(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var l,u=[];l=i.exec(s);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,18)},set:function(r){r?this.Ff=Ks(this.Ff,18):this.Ff=Gs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ks(this.Ff,19):this.Ff=Gs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,20)},set:function(r){r?(this.Ff=Ks(this.Ff,20),t.sort()):this.Ff=Gs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,22)},set:function(r){r?this.Ff=Ks(this.Ff,22):this.Ff=Gs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,23)},set:function(r){r?this.Ff=Ks(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,27)},set:function(r){r?this.Ff=Ks(this.Ff,27):this.Ff=Gs(this.Ff,27)}}),this.hasAppearanceStream=!1};Jl(Lv,Sd);var Mv=function(){Lv.call(this),this.fontName="helvetica",this.combo=!1};Jl(Mv,Lv);var Uv=function(){Mv.call(this),this.combo=!0};Jl(Uv,Mv);var WC=function(){Uv.call(this),this.edit=!0};Jl(WC,Uv);var Ki=function(){Sd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,15)},set:function(r){r?this.Ff=Ks(this.Ff,15):this.Ff=Gs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,16)},set:function(r){r?this.Ff=Ks(this.Ff,16):this.Ff=Gs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,17)},set:function(r){r?this.Ff=Ks(this.Ff,17):this.Ff=Gs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,26)},set:function(r){r?this.Ff=Ks(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Jp(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){pa(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Jl(Ki,Sd);var XC=function(){Ki.call(this),this.pushButton=!0};Jl(XC,Ki);var Qv=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Jl(Qv,Ki);var q_=function(){var e,t;Sd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Jp(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){pa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=fr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Jl(q_,Sd),Qv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Qv.prototype.createOption=function(e){var t=new q_;return t.Parent=this,t.optionName=e,this.Kids.push(t),ewe.call(this.scope,t),t};var YC=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=fr.CheckBox.createAppearanceStream()};Jl(YC,Ki);var mp=function(){Sd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,13)},set:function(t){t?this.Ff=Ks(this.Ff,13):this.Ff=Gs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,21)},set:function(t){t?this.Ff=Ks(this.Ff,21):this.Ff=Gs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,23)},set:function(t){t?this.Ff=Ks(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,24)},set:function(t){t?this.Ff=Ks(this.Ff,24):this.Ff=Gs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,25)},set:function(t){t?this.Ff=Ks(this.Ff,25):this.Ff=Gs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,26)},set:function(t){t?this.Ff=Ks(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Jl(mp,Sd);var JC=function(){mp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,14)},set:function(e){e?this.Ff=Ks(this.Ff,14):this.Ff=Gs(this.Ff,14)}}),this.password=!0};Jl(JC,mp);var fr={CheckBox:{createAppearanceStream:function(){return{N:{On:fr.CheckBox.YesNormal},D:{On:fr.CheckBox.YesPushDown,Off:fr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=uA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=_j(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Jr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=uA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=fr.internal.getHeight(e),i=fr.internal.getWidth(e),o=_j(e,e.caption);return a.push("1 g"),a.push("0 0 "+Jr(i)+" "+Jr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Jr(i-1)+" "+Jr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Jr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=uA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:fr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=fr.RadioButton.Circle.YesNormal,t.D[e]=fr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=uA(e);t.scope=e.scope;var r=[],n=fr.internal.getWidth(e)<=fr.internal.getHeight(e)?fr.internal.getWidth(e)/4:fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=fr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+t0(fr.internal.getWidth(e)/2)+" "+t0(fr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=uA(e);t.scope=e.scope;var r=[],n=fr.internal.getWidth(e)<=fr.internal.getHeight(e)?fr.internal.getWidth(e)/4:fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*fr.internal.Bezier_C).toFixed(5)),i=Number((n*fr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+t0(fr.internal.getWidth(e)/2)+" "+t0(fr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+t0(fr.internal.getWidth(e)/2)+" "+t0(fr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=uA(e);t.scope=e.scope;var r=[],n=fr.internal.getWidth(e)<=fr.internal.getHeight(e)?fr.internal.getWidth(e)/4:fr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*fr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+t0(fr.internal.getWidth(e)/2)+" "+t0(fr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:fr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=fr.RadioButton.Cross.YesNormal,t.D[e]=fr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=uA(e);t.scope=e.scope;var r=[],n=fr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Jr(fr.internal.getWidth(e)-2)+" "+Jr(fr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Jr(n.x1.x)+" "+Jr(n.x1.y)+" m"),r.push(Jr(n.x2.x)+" "+Jr(n.x2.y)+" l"),r.push(Jr(n.x4.x)+" "+Jr(n.x4.y)+" m"),r.push(Jr(n.x3.x)+" "+Jr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=uA(e);t.scope=e.scope;var r=fr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Jr(fr.internal.getWidth(e)-2)+" "+Jr(fr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Jr(r.x1.x)+" "+Jr(r.x1.y)+" m"),n.push(Jr(r.x2.x)+" "+Jr(r.x2.y)+" l"),n.push(Jr(r.x4.x)+" "+Jr(r.x4.y)+" m"),n.push(Jr(r.x3.x)+" "+Jr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=uA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(fr.internal.getWidth(e))+" "+Jr(fr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};fr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=fr.internal.getWidth(e),r=fr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},fr.internal.getWidth=function(e){var t=0;return pa(e)==="object"&&(t=y9(e.Rect[2])),t},fr.internal.getHeight=function(e){var t=0;return pa(e)==="object"&&(t=y9(e.Rect[3])),t};var ewe=ys.addField=function(e){if(Zye(this,e),!(e instanceof Sd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ys.AcroFormChoiceField=Lv,ys.AcroFormListBox=Mv,ys.AcroFormComboBox=Uv,ys.AcroFormEditBox=WC,ys.AcroFormButton=Ki,ys.AcroFormPushButton=XC,ys.AcroFormRadioButton=Qv,ys.AcroFormCheckBox=YC,ys.AcroFormTextField=mp,ys.AcroFormPasswordField=JC,ys.AcroFormAppearance=fr,ys.AcroForm={ChoiceField:Lv,ListBox:Mv,ComboBox:Uv,EditBox:WC,Button:Ki,PushButton:XC,RadioButton:Qv,CheckBox:YC,TextField:mp,PasswordField:JC,Appearance:fr},mr.AcroForm={ChoiceField:Lv,ListBox:Mv,ComboBox:Uv,EditBox:WC,Button:Ki,PushButton:XC,RadioButton:Qv,CheckBox:YC,TextField:mp,PasswordField:JC,Appearance:fr};mr.AcroForm;function UJ(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(O,j){var U,P,X,K,Z,H=t;if((j=j||t)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(F(O))for(Z in r)for(X=r[Z],U=0;U<X.length;U+=1){for(K=!0,P=0;P<X[U].length;P+=1)if(X[U][P]!==void 0&&X[U][P]!==O[P]){K=!1;break}if(K===!0){H=Z;break}}else for(Z in r)for(X=r[Z],U=0;U<X.length;U+=1){for(K=!0,P=0;P<X[U].length;P+=1)if(X[U][P]!==void 0&&X[U][P]!==O.charCodeAt(P)){K=!1;break}if(K===!0){H=Z;break}}return H===t&&j!==t&&(H=j),H},a=function O(j){for(var U=this.internal.write,P=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var K=[];if(K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Image"}),K.push({key:"Width",value:j.width}),K.push({key:"Height",value:j.height}),j.colorSpace===b.INDEXED?K.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(K.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===b.DEVICE_CMYK&&K.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),K.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&K.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)){for(var Z="",H=0,V=j.transparency.length;H<V;H++)Z+=j.transparency[H]+" "+j.transparency[H]+" ";K.push({key:"Mask",value:"["+Z+"]"})}j.sMask!==void 0&&K.push({key:"SMask",value:j.objectId+1+" 0 R"});var q=j.filter!==void 0?["/"+j.filter]:void 0;if(P({data:j.data,additionalKeyValues:K,alreadyAppliedFilters:q,objectId:j.objectId}),U("endobj"),"sMask"in j&&j.sMask!==void 0){var ne="/Predictor "+j.predictor+" /Colors 1 /BitsPerComponent "+j.bitsPerComponent+" /Columns "+j.width,L={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:j.bitsPerComponent,decodeParameters:ne,data:j.sMask};"filter"in j&&(L.filter=j.filter),O.call(this,L)}if(j.colorSpace===b.INDEXED){var W=this.internal.newObject();P({data:C(new Uint8Array(j.palette)),objectId:W}),U("endobj")}},s=function(){var O=this.internal.collections.addImage_images;for(var j in O)a.call(this,O[j])},i=function(){var O,j=this.internal.collections.addImage_images,U=this.internal.write;for(var P in j)U("/I"+(O=j[P]).index,O.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var O=this.internal.collections.addImage_images;return o.call(this),O},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(O){return typeof e["process"+O.toUpperCase()]=="function"},f=function(O){return pa(O)==="object"&&O.nodeType===1},h=function(O,j){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var U=""+O.getAttribute("src");if(U.indexOf("data:image/")===0)return Zb(unescape(U).split("base64,").pop());var P=e.loadFile(U,!0);if(P!==void 0)return P}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var X;switch(j){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;case"JPEG":case"JPG":default:X="image/jpeg"}return Zb(O.toDataURL(X,1).split("base64,").pop())}},p=function(O){var j=this.internal.collections.addImage_images;if(j){for(var U in j)if(O===j[U].alias)return j[U]}},g=function(O,j,U){return O||j||(O=-96,j=-96),O<0&&(O=-1*U.width*72/O/this.internal.scaleFactor),j<0&&(j=-1*U.height*72/j/this.internal.scaleFactor),O===0&&(O=j*U.width/U.height),j===0&&(j=O*U.height/U.width),[O,j]},v=function(O,j,U,P,X,K){var Z=g.call(this,U,P,X),H=this.internal.getCoordinateString,V=this.internal.getVerticalCoordinateString,q=l.call(this);if(U=Z[0],P=Z[1],q[X.index]=X,K){K*=Math.PI/180;var ne=Math.cos(K),L=Math.sin(K),W=function(te){return te.toFixed(4)},J=[W(ne),W(L),W(-1*L),W(ne),0,0,"cm"]}this.internal.write("q"),K?(this.internal.write([1,"0","0",1,H(O),V(j+P),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([H(U),"0","0",H(P),"0","0","cm"].join(" "))):this.internal.write([H(U),"0","0",H(P),H(O),V(j+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=e.__addimage__.sHashCode=function(O){var j,U,P=0;if(typeof O=="string")for(U=O.length,j=0;j<U;j++)P=(P<<5)-P+O.charCodeAt(j),P|=0;else if(F(O))for(U=O.byteLength/2,j=0;j<U;j++)P=(P<<5)-P+O[j],P|=0;return P},S=e.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var j=!0;return O.length===0&&(j=!1),O.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(j=!1),j},k=e.__addimage__.extractImageFromDataUrl=function(O){var j=(O=O||"").split("base64,"),U=null;if(j.length===2){var P=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(j[0]);Array.isArray(P)&&(U={mimeType:P[1],charset:P[2],data:j[1]})}return U},B=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(O){return B()&&O instanceof ArrayBuffer};var F=e.__addimage__.isArrayBufferView=function(O){return B()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},w=e.__addimage__.binaryStringToUint8Array=function(O){for(var j=O.length,U=new Uint8Array(j),P=0;P<j;P++)U[P]=O.charCodeAt(P);return U},C=e.__addimage__.arrayBufferToBinaryString=function(O){for(var j="",U=F(O)?O:new Uint8Array(O),P=0;P<U.length;P+=8192)j+=String.fromCharCode.apply(null,U.subarray(P,P+8192));return j};e.addImage=function(){var O,j,U,P,X,K,Z,H,V;if(typeof arguments[1]=="number"?(j=t,U=arguments[1],P=arguments[2],X=arguments[3],K=arguments[4],Z=arguments[5],H=arguments[6],V=arguments[7]):(j=arguments[1],U=arguments[2],P=arguments[3],X=arguments[4],K=arguments[5],Z=arguments[6],H=arguments[7],V=arguments[8]),pa(O=arguments[0])==="object"&&!f(O)&&"imageData"in O){var q=O;O=q.imageData,j=q.format||j||t,U=q.x||U||0,P=q.y||P||0,X=q.w||q.width||X,K=q.h||q.height||K,Z=q.alias||Z,H=q.compression||H,V=q.rotation||q.angle||V}var ne=this.internal.getFilters();if(H===void 0&&ne.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(U)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var L=N.call(this,O,j,Z,H);return v.call(this,U,P,X,K,L,V),this};var N=function(O,j,U,P){var X,K,Z;if(typeof O=="string"&&n(O)===t){O=unescape(O);var H=R(O,!1);(H!==""||(H=e.loadFile(O,!0))!==void 0)&&(O=H)}if(f(O)&&(O=h(O,j)),j=n(O,j),!d(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((Z=U)==null||Z.length===0)&&(U=function(V){return typeof V=="string"||F(V)?_(V):F(V.data)?_(V.data):null}(O)),(X=p.call(this,U))||(B()&&(O instanceof Uint8Array||j==="RGBA"||(K=O,O=w(O))),X=this["process"+j.toUpperCase()](O,u.call(this),U,function(V){return V&&typeof V=="string"&&(V=V.toUpperCase()),V in e.image_compression?V:y.NONE}(P),K)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},R=e.__addimage__.convertBase64ToBinaryString=function(O,j){var U;j=typeof j!="boolean"||j;var P,X="";if(typeof O=="string"){P=(U=k(O))!==null?U.data:O;try{X=Zb(P)}catch(K){if(j)throw S(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+K.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};e.getImageProperties=function(O){var j,U,P="";if(f(O)&&(O=h(O)),typeof O=="string"&&n(O)===t&&((P=R(O,!1))===""&&(P=e.loadFile(O)||""),O=P),U=n(O),!d(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!B()||O instanceof Uint8Array||(O=w(O)),!(j=this["process"+U.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=U,j}})(mr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};mr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(v.objId),_=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(y(_))+") >>",v.content=s;var S=v.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var B=this.annotations._nameMap[n.options.name];n.options.pageNumber=B.page,n.options.top=B.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var F=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+F+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,a-u,o,i,s),l},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(mr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=e.__arabicParser__.isArabicEndLetter=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(v){return i(v)&&a.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var b=0,y=r,_="",S=0;for(b=0;b<v.length;b+=1)y[v.charCodeAt(b)]!==void 0?(S++,typeof(y=y[v.charCodeAt(b)])=="number"&&(_+=String.fromCharCode(y),y=r,S=0),b===v.length-1&&(y=r,_+=v.charAt(b-(S-1)),b-=S-1,S=0)):(y=r,_+=v.charAt(b-S),b-=S,S=0);return _};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(v,b,y){return i(v)?s(v)===!1?-1:!u(v)||!i(b)&&!i(y)||!i(y)&&o(b)||o(v)&&!i(b)||o(v)&&l(b)||o(v)&&o(b)?0:d(v)&&i(b)&&!o(b)&&i(y)&&u(y)?3:o(v)||!i(y)?1:2:-1},p=function(v){var b=0,y=0,_=0,S="",k="",B="",F=(v=v||"").split("\\s+"),w=[];for(b=0;b<F.length;b+=1){for(w.push(""),y=0;y<F[b].length;y+=1)S=F[b][y],k=F[b][y-1],B=F[b][y+1],i(S)?(_=h(S,k,B),w[b]+=_!==-1?String.fromCharCode(t[S.charCodeAt(0)][_]):S):w[b]+=S;w[b]=f(w[b])}return w.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var _=0;for(y=[],_=0;_<b.length;_+=1)Array.isArray(b[_])?y.push([p(b[_][0]),b[_][1],b[_][2]]):y.push([p(b[_])]);v=y}else v=p(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",g])}(mr.API),mr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(mr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(v){g=v}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,g=0,v=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=u.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,k){return S.concat(b.splitTextToSize(k,y))},[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)p<(v=this.getStringUnitWidth(l[_],{font:f})*d)&&(p=v);return p!==0&&(g=l.length),{w:p/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};e.table=function(l,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,g,v,b,y=[],_=[],S=[],k={},B={},F=[],w=[],C=(h=h||{}).autoSize||!1,N=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,O=h.margins||Object.assign({width:this.getPageWidth()},t),j=typeof h.padding=="number"?h.padding:3,U=h.headerBackgroundColor||"#c8c8c8",P=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=P,this.setFontSize(R),f==null)_=y=Object.keys(d[0]),S=y.map(function(){return"left"});else if(Array.isArray(f)&&pa(f[0])==="object")for(y=f.map(function(q){return q.name}),_=f.map(function(q){return q.prompt||q.name||""}),S=f.map(function(q){return q.align||"left"}),p=0;p<f.length;p+=1)B[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(_=y=f,S=y.map(function(){return"left"}));if(C||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<y.length;p+=1){for(k[b=y[p]]=d.map(function(q){return q[b]}),this.setFont(void 0,"bold"),F.push(this.getTextDimensions(_[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=k[b],this.setFont(void 0,"normal"),v=0;v<g.length;v+=1)F.push(this.getTextDimensions(g[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[b]=Math.max.apply(null,F)+j+j,F=[]}if(N){var X={};for(p=0;p<y.length;p+=1)X[y[p]]={},X[y[p]].text=_[p],X[y[p]].align=S[p];var K=o.call(this,X,B);w=y.map(function(q){return new s(l,u,B[q],K,X[q].text,void 0,X[q].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var Z=f.reduce(function(q,ne){return q[ne.name]=ne.align,q},{});for(p=0;p<d.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:d[p]},this);var H=o.call(this,d[p],B);for(v=0;v<y.length;v+=1){var V=d[p][y[v]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:v,data:V},this),i.call(this,new s(l,u,B[y[v]],H,V,p+2,Z[y[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(p){var g=l[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/h+d+d},this).reduce(function(p,g){return Math.max(p,g)},0)};e.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(mr.API);var QJ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},HJ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Sj=UJ(HJ),VJ=[100,200,300,400,500,600,700,800,900],twe=UJ(VJ);function Nj(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return QJ[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof Sj[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function w9(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var rwe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},E9={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function C9(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function nwe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},rwe,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=Nj(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+C9(s)+"' and default family '"+n+"'.");if(i=function(l,u){if(u[l])return u[l];var d=Sj[l],f=d<=Sj.normal?-1:1,h=w9(u,HJ,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(s.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=QJ[l],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+l)}(s.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=twe[l],f=w9(u,VJ,d,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+C9(s)+"'.");return i}function _9(e){return e.trimLeft()}function awe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function swe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var EE,S9,N9,NB=["times"];(function(e){var t,r,n,a,s,i,o,l,u,d=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new i,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new i,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var f=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=L;Object.defineProperty(this,"pdf",{get:function(){return W}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(_e){J=!!_e}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(_e){te=!!_e}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(_e){isNaN(_e)||(ie=_e)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(_e){isNaN(_e)||(Ae=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var he;typeof _e=="number"?he=[_e,_e,_e,_e]:((he=new Array(4))[0]=_e[0],he[1]=_e.length>=2?_e[1]:he[0],he[2]=_e.length>=3?_e[2]:he[0],he[3]=_e.length>=4?_e[3]:he[1]),u.margin=he}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(_e){oe=_e}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(_e){ce=_e}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(_e){ge=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof d&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var je=[];Object.defineProperty(this,"ctxStack",{get:function(){return je},set:function(_e){je=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var he;he=h(_e),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var he=h(_e);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var re=null;function Se(_e,he){if(re===null){var Ie=function(He){var Xe=[];return Object.keys(He).forEach(function(ye){He[ye].forEach(function(Oe){var Pe=null;switch(Oe){case"bold":Pe={family:ye,weight:"bold"};break;case"italic":Pe={family:ye,style:"italic"};break;case"bolditalic":Pe={family:ye,weight:"bold",style:"italic"};break;case"":case"normal":Pe={family:ye}}Pe!==null&&(Pe.ref={name:ye,style:Oe},Xe.push(Pe))})}),Xe}(_e.getFontList());re=function(He){for(var Xe={},ye=0;ye<He.length;++ye){var Oe=Nj(He[ye]),Pe=Oe.family,qe=Oe.stretch,Ze=Oe.style,ot=Oe.weight;Xe[Pe]=Xe[Pe]||{},Xe[Pe][qe]=Xe[Pe][qe]||{},Xe[Pe][qe][Ze]=Xe[Pe][qe][Ze]||{},Xe[Pe][qe][Ze][ot]=Oe}return Xe}(Ie.concat(he))}return re}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(_e){re=null,De=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var he;if(this.ctx.font=_e,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var Ie=he[1],He=(he[2],he[3]),Xe=he[4],ye=(he[5],he[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(Oe==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var Pe=function(Ot){var Qt,bt,Nr=[],tr=Ot.trim();if(tr==="")return NB;if(tr in E9)return[E9[tr]];for(;tr!=="";){switch(bt=null,Qt=(tr=_9(tr)).charAt(0)){case'"':case"'":bt=awe(tr.substring(1),Qt);break;default:bt=swe(tr)}if(bt===null||(Nr.push(bt[0]),(tr=_9(bt[1]))!==""&&tr.charAt(0)!==","))return NB;tr=tr.replace(/^,/,"")}return Nr}(ye);if(this.fontFaces){var qe=nwe(Se(this.pdf,this.fontFaces),Pe.map(function(Ot){return{family:Ot,stretch:"normal",weight:He,style:Ie}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var Ze="";(He==="bold"||parseInt(He,10)>=700||Ie==="bold")&&(Ze="bold"),Ie==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ot="",mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Bt=0;Bt<Pe.length;Bt++){if(this.pdf.internal.getFont(Pe[Bt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ot=Pe[Bt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Pe[Bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Pe[Bt],Ze="bold";else if(this.pdf.internal.getFont(Pe[Bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Pe[Bt],Ze="normal";break}}if(ot===""){for(var Lt=0;Lt<Pe.length;Lt++)if(mt[Pe[Lt]]){ot=mt[Pe[Lt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};f.prototype.setLineDash=function(L){this.lineDash=L},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){k.call(this,"fill",!1)},f.prototype.stroke=function(){k.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(L,W){if(isNaN(L)||isNaN(W))throw Na.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new i(L,W));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(L,W)},f.prototype.closePath=function(){var L=new i(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&pa(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){L=new i(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(L.x,L.y)},f.prototype.lineTo=function(L,W){if(isNaN(L)||isNaN(W))throw Na.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new i(L,W));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(J.x,J.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},f.prototype.quadraticCurveTo=function(L,W,J,te){if(isNaN(J)||isNaN(te)||isNaN(L)||isNaN(W))throw Na.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new i(J,te)),Ae=this.ctx.transform.applyToPoint(new i(L,W));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},f.prototype.bezierCurveTo=function(L,W,J,te,ie,Ae){if(isNaN(ie)||isNaN(Ae)||isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Na.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new i(ie,Ae)),ce=this.ctx.transform.applyToPoint(new i(L,W)),ge=this.ctx.transform.applyToPoint(new i(J,te));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:ge.x,y2:ge.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new i(oe.x,oe.y)},f.prototype.arc=function(L,W,J,te,ie,Ae){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te)||isNaN(ie))throw Na.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new i(L,W));L=oe.x,W=oe.y;var ce=this.ctx.transform.applyToPoint(new i(0,J)),ge=this.ctx.transform.applyToPoint(new i(0,0));J=Math.sqrt(Math.pow(ce.x-ge.x,2)+Math.pow(ce.y-ge.y,2))}Math.abs(ie-te)>=2*Math.PI&&(te=0,ie=2*Math.PI),this.path.push({type:"arc",x:L,y:W,radius:J,startAngle:te,endAngle:ie,counterclockwise:Ae})},f.prototype.arcTo=function(L,W,J,te,ie){throw new Error("arcTo not implemented.")},f.prototype.rect=function(L,W,J,te){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Na.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,W),this.lineTo(L+J,W),this.lineTo(L+J,W+te),this.lineTo(L,W+te),this.lineTo(L,W),this.lineTo(L+J,W),this.lineTo(L,W)},f.prototype.fillRect=function(L,W,J,te){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Na.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,W,J,te),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},f.prototype.strokeRect=function(L,W,J,te){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Na.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(L,W,J,te),this.stroke())},f.prototype.clearRect=function(L,W,J,te){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te))throw Na.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,W,J,te))},f.prototype.save=function(L){L=typeof L!="boolean"||L;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(W),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var W,J,te,ie;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))W=0,J=0,te=0,ie=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(Ae!==null)W=parseInt(Ae[1]),J=parseInt(Ae[2]),te=parseInt(Ae[3]),ie=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)W=parseInt(Ae[1]),J=parseInt(Ae[2]),te=parseInt(Ae[3]),ie=parseFloat(Ae[4]);else{if(ie=1,typeof L=="string"&&L.charAt(0)!=="#"){var oe=new OJ(L);L=oe.ok?oe.toHex():"#000000"}L.length===4?(W=L.substring(1,2),W+=W,J=L.substring(2,3),J+=J,te=L.substring(3,4),te+=te):(W=L.substring(1,3),J=L.substring(3,5),te=L.substring(5,7)),W=parseInt(W,16),J=parseInt(J,16),te=parseInt(te,16)}}return{r:W,g:J,b:te,a:ie,style:L}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(L,W,J,te){if(isNaN(W)||isNaN(J)||typeof L!="string")throw Na.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var ie=H(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;j.call(this,{text:L,x:W,y:J,scale:Ae,angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(L,W,J,te){if(isNaN(W)||isNaN(J)||typeof L!="string")throw Na.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){te=isNaN(te)?void 0:te;var ie=H(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;j.call(this,{text:L,x:W,y:J,scale:Ae,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(L){if(typeof L!="string")throw Na.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,J=this.pdf.internal.scaleFactor,te=W.internal.getFontSize(),ie=W.getStringUnitWidth(L)*te/W.internal.scaleFactor,Ae=function(oe){var ce=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new Ae({width:ie*=Math.round(96*J/72*1e4)/1e4})},f.prototype.scale=function(L,W){if(isNaN(L)||isNaN(W))throw Na.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(L,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.rotate=function(L){if(isNaN(L))throw Na.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.translate=function(L,W){if(isNaN(L)||isNaN(W))throw Na.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,L,W);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.transform=function(L,W,J,te,ie,Ae){if(isNaN(L)||isNaN(W)||isNaN(J)||isNaN(te)||isNaN(ie)||isNaN(Ae))throw Na.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new l(L,W,J,te,ie,Ae);this.ctx.transform=this.ctx.transform.multiply(oe)},f.prototype.setTransform=function(L,W,J,te,ie,Ae){L=isNaN(L)?1:L,W=isNaN(W)?0:W,J=isNaN(J)?0:J,te=isNaN(te)?1:te,ie=isNaN(ie)?0:ie,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new l(L,W,J,te,ie,Ae)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(L,W,J,te,ie,Ae,oe,ce,ge){var je=this.pdf.getImageProperties(L),re=1,Se=1,De=1,_e=1;te!==void 0&&ce!==void 0&&(De=ce/te,_e=ge/ie,re=je.width/te*ce/te,Se=je.height/ie*ge/ie),Ae===void 0&&(Ae=W,oe=J,W=0,J=0),te!==void 0&&ce===void 0&&(ce=te,ge=ie),te===void 0&&ce===void 0&&(ce=je.width,ge=je.height);for(var he,Ie=this.ctx.transform.decompose(),He=H(Ie.rotate.shx),Xe=new l,ye=(Xe=(Xe=(Xe=Xe.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new o(Ae-W*De,oe-J*_e,te*re,ie*Se)),Oe=b.call(this,ye),Pe=[],qe=0;qe<Oe.length;qe+=1)Pe.indexOf(Oe[qe])===-1&&Pe.push(Oe[qe]);if(S(Pe),this.autoPaging)for(var Ze=Pe[0],ot=Pe[Pe.length-1],mt=Ze;mt<ot+1;mt++){this.pdf.setPage(mt);var Bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=mt===1?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=mt===1?0:Ot+(mt-2)*Qt;if(this.ctx.clip_path.length!==0){var Nr=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(he,this.posX+this.margin[3],-bt+Lt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=Nr}var tr=JSON.parse(JSON.stringify(ye));tr=_([tr],this.posX+this.margin[3],-bt+Lt+this.ctx.prevPageLastElemOffset)[0];var nn=(mt>Ze||mt<ot)&&v.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,Qt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",tr.x,tr.y,tr.w,tr.h,null,null,He),nn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",ye.x,ye.y,ye.w,ye.h,null,null,He)};var b=function(L,W,J){var te=[];W=W||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":te.push(Math.floor((L.y+ie)/J)+1);break;case"arc":te.push(Math.floor((L.y+ie-L.radius)/J)+1),te.push(Math.floor((L.y+ie+L.radius)/J)+1);break;case"qct":var Ae=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);te.push(Math.floor((Ae.y+ie)/J)+1),te.push(Math.floor((Ae.y+Ae.h+ie)/J)+1);break;case"bct":var oe=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);te.push(Math.floor((oe.y+ie)/J)+1),te.push(Math.floor((oe.y+oe.h+ie)/J)+1);break;case"rect":te.push(Math.floor((L.y+ie)/J)+1),te.push(Math.floor((L.y+L.h+ie)/J)+1)}for(var ce=0;ce<te.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<te[ce];)y.call(this);return te},y=function(){var L=this.fillStyle,W=this.strokeStyle,J=this.font,te=this.lineCap,ie=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=W,this.font=J,this.lineCap=te,this.lineWidth=ie,this.lineJoin=Ae},_=function(L,W,J){for(var te=0;te<L.length;te++)switch(L[te].type){case"bct":L[te].x2+=W,L[te].y2+=J;case"qct":L[te].x1+=W,L[te].y1+=J;case"mt":case"lt":case"arc":default:L[te].x+=W,L[te].y+=J}return L},S=function(L){return L.sort(function(W,J){return W-J})},k=function(L,W){for(var J,te,ie=this.fillStyle,Ae=this.strokeStyle,oe=this.lineCap,ce=this.lineWidth,ge=Math.abs(ce*this.ctx.transform.scaleX),je=this.lineJoin,re=JSON.parse(JSON.stringify(this.path)),Se=JSON.parse(JSON.stringify(this.path)),De=[],_e=0;_e<Se.length;_e++)if(Se[_e].x!==void 0)for(var he=b.call(this,Se[_e]),Ie=0;Ie<he.length;Ie+=1)De.indexOf(he[Ie])===-1&&De.push(he[Ie]);for(var He=0;He<De.length;He++)for(;this.pdf.internal.getNumberOfPages()<De[He];)y.call(this);if(S(De),this.autoPaging)for(var Xe=De[0],ye=De[De.length-1],Oe=Xe;Oe<ye+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=ie,this.strokeStyle=Ae,this.lineCap=oe,this.lineWidth=ge,this.lineJoin=je;var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Oe===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Oe===1?0:Ze+(Oe-2)*ot;if(this.ctx.clip_path.length!==0){var Bt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(J,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),B.call(this,L,!0),this.path=Bt}if(te=JSON.parse(JSON.stringify(re)),this.path=_(te,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),W===!1||Oe===0){var Lt=(Oe>Xe||Oe<ye)&&v.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,ot,null).clip().discardPath()),B.call(this,L,W),Lt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=ge,B.call(this,L,W),this.lineWidth=ce;this.path=re},B=function(L,W){if((L!=="stroke"||W||!g.call(this))&&(L==="stroke"||W||!p.call(this))){for(var J,te,ie=[],Ae=this.path,oe=0;oe<Ae.length;oe++){var ce=Ae[oe];switch(ce.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:ce,deltas:[],abs:[]});break;case"lt":var ge=ie.length;if(Ae[oe-1]&&!isNaN(Ae[oe-1].x)&&(J=[ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],ge>0)){for(;ge>=0;ge--)if(ie[ge-1].close!==!0&&ie[ge-1].begin!==!0){ie[ge-1].deltas.push(J),ie[ge-1].abs.push(ce);break}}break;case"bct":J=[ce.x1-Ae[oe-1].x,ce.y1-Ae[oe-1].y,ce.x2-Ae[oe-1].x,ce.y2-Ae[oe-1].y,ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],ie[ie.length-1].deltas.push(J);break;case"qct":var je=Ae[oe-1].x+2/3*(ce.x1-Ae[oe-1].x),re=Ae[oe-1].y+2/3*(ce.y1-Ae[oe-1].y),Se=ce.x+2/3*(ce.x1-ce.x),De=ce.y+2/3*(ce.y1-ce.y),_e=ce.x,he=ce.y;J=[je-Ae[oe-1].x,re-Ae[oe-1].y,Se-Ae[oe-1].x,De-Ae[oe-1].y,_e-Ae[oe-1].x,he-Ae[oe-1].y],ie[ie.length-1].deltas.push(J);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(ce)}}te=W?null:L==="stroke"?"stroke":"fill";for(var Ie=!1,He=0;He<ie.length;He++)if(ie[He].arc)for(var Xe=ie[He].abs,ye=0;ye<Xe.length;ye++){var Oe=Xe[ye];Oe.type==="arc"?C.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,W,!Ie):U.call(this,Oe.x,Oe.y),Ie=!0}else if(ie[He].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(ie[He].begin!==!0){var Pe=ie[He].start.x,qe=ie[He].start.y;P.call(this,ie[He].deltas,Pe,qe),Ie=!0}te&&N.call(this,te),W&&R.call(this)}},F=function(L){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-J;case"top":return L+W-J;case"hanging":return L+W-2*J;case"middle":return L+W/2-J;case"ideographic":return L;case"alphabetic":default:return L}},w=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(W,J){this.colorStops.push([W,J])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(L,W,J,te,ie,Ae,oe,ce,ge){for(var je=K.call(this,J,te,ie,Ae),re=0;re<je.length;re++){var Se=je[re];re===0&&(ge?O.call(this,Se.x1+L,Se.y1+W):U.call(this,Se.x1+L,Se.y1+W)),X.call(this,L,W,Se.x2,Se.y2,Se.x3,Se.y3,Se.x4,Se.y4)}ce?R.call(this):N.call(this,oe)},N=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(L,W){this.pdf.internal.out(r(L)+" "+n(W)+" m")},j=function(L){var W;switch(L.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var J=this.pdf.getTextDimensions(L.text),te=F.call(this,L.y),ie=w.call(this,te)-J.h,Ae=this.ctx.transform.applyToPoint(new i(L.x,te)),oe=this.ctx.transform.decompose(),ce=new l;ce=(ce=(ce=ce.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var ge,je,re,Se=this.ctx.transform.applyToRectangle(new o(L.x,te,J.w,J.h)),De=ce.applyToRectangle(new o(L.x,ie,J.w,J.h)),_e=b.call(this,De),he=[],Ie=0;Ie<_e.length;Ie+=1)he.indexOf(_e[Ie])===-1&&he.push(_e[Ie]);if(S(he),this.autoPaging)for(var He=he[0],Xe=he[he.length-1],ye=He;ye<Xe+1;ye++){this.pdf.setPage(ye);var Oe=ye===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],Ze=qe-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],mt=ot-this.margin[3],Bt=ye===1?0:Pe+(ye-2)*Ze;if(this.ctx.clip_path.length!==0){var Lt=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ge,this.posX+this.margin[3],-1*Bt+Oe),B.call(this,"fill",!0),this.path=Lt}var Ot=_([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Bt+Oe+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*L.scale),re=this.lineWidth,this.lineWidth=re*L.scale);var Qt=this.autoPaging!=="text";if(Qt||Ot.y+Ot.h<=qe){if(Qt||Ot.y>=Oe&&Ot.x<=ot){var bt=Qt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||ot-Ot.x)[0],Nr=_([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-Bt+Oe+this.ctx.prevPageLastElemOffset)[0],tr=Qt&&(ye>He||ye<Xe)&&v.call(this);tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Ze,null).clip().discardPath()),this.pdf.text(bt,Nr.x,Nr.y,{angle:L.angle,align:W,renderingMode:L.renderingMode}),tr&&this.pdf.restoreGraphicsState()}}else Ot.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Ot.y);L.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=re)}else L.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*L.scale),re=this.lineWidth,this.lineWidth=re*L.scale),this.pdf.text(L.text,Ae.x+this.posX,Ae.y+this.posY,{angle:L.angle,align:W,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=re)},U=function(L,W,J,te){J=J||0,te=te||0,this.pdf.internal.out(r(L+J)+" "+n(W+te)+" l")},P=function(L,W,J){return this.pdf.lines(L,W,J,null,null)},X=function(L,W,J,te,ie,Ae,oe,ce){this.pdf.internal.out([t(a(J+L)),t(s(te+W)),t(a(ie+L)),t(s(Ae+W)),t(a(oe+L)),t(s(ce+W)),"c"].join(" "))},K=function(L,W,J,te){for(var ie=2*Math.PI,Ae=Math.PI/2;W>J;)W-=ie;var oe=Math.abs(J-W);oe<ie&&te&&(oe=ie-oe);for(var ce=[],ge=te?-1:1,je=W;oe>1e-5;){var re=je+ge*Math.min(oe,Ae);ce.push(Z.call(this,L,je,re)),oe-=Math.abs(re-je),je=re}return ce},Z=function(L,W,J){var te=(J-W)/2,ie=L*Math.cos(te),Ae=L*Math.sin(te),oe=ie,ce=-Ae,ge=oe*oe+ce*ce,je=ge+oe*ie+ce*Ae,re=4/3*(Math.sqrt(2*ge*je)-je)/(oe*Ae-ce*ie),Se=oe-re*ce,De=ce+re*oe,_e=Se,he=-De,Ie=te+W,He=Math.cos(Ie),Xe=Math.sin(Ie);return{x1:L*Math.cos(W),y1:L*Math.sin(W),x2:Se*He-De*Xe,y2:Se*Xe+De*He,x3:_e*He-he*Xe,y3:_e*Xe+he*He,x4:L*Math.cos(J),y4:L*Math.sin(J)}},H=function(L){return 180*L/Math.PI},V=function(L,W,J,te,ie,Ae){var oe=L+.5*(J-L),ce=W+.5*(te-W),ge=ie+.5*(J-ie),je=Ae+.5*(te-Ae),re=Math.min(L,ie,oe,ge),Se=Math.max(L,ie,oe,ge),De=Math.min(W,Ae,ce,je),_e=Math.max(W,Ae,ce,je);return new o(re,De,Se-re,_e-De)},q=function(L,W,J,te,ie,Ae,oe,ce){var ge,je,re,Se,De,_e,he,Ie,He,Xe,ye,Oe,Pe,qe,Ze=J-L,ot=te-W,mt=ie-J,Bt=Ae-te,Lt=oe-ie,Ot=ce-Ae;for(je=0;je<41;je++)He=(he=(re=L+(ge=je/40)*Ze)+ge*((De=J+ge*mt)-re))+ge*(De+ge*(ie+ge*Lt-De)-he),Xe=(Ie=(Se=W+ge*ot)+ge*((_e=te+ge*Bt)-Se))+ge*(_e+ge*(Ae+ge*Ot-_e)-Ie),je==0?(ye=He,Oe=Xe,Pe=He,qe=Xe):(ye=Math.min(ye,He),Oe=Math.min(Oe,Xe),Pe=Math.max(Pe,He),qe=Math.max(qe,Xe));return new o(Math.round(ye),Math.round(Oe),Math.round(Pe-ye),Math.round(qe-Oe))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,W,J=(L=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:W}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(mr.API),function(e){var t=function(s){var i,o,l,u,d,f,h,p,g,v;for(o=[],l=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(f=(d=((d=((d=((d=(d-(v=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,p+33,g+33,v+33)):o.push(122);return function(b,y){for(var _=y;_>0;_--)b.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,l,u,d,f=String,h="length",p=255,g="charCodeAt",v="slice",b="replace";for(s[v](-2),s=s[v](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],u=0,d=(s+=i="uuuuu"[v](s[h]%5||5))[h];d>u;u+=5)o=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,_){for(var S=_;S>0;S--)y.pop()}(l,i[h]),f.fromCharCode.apply(f,l)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=yj(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,l=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(mr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var f=new XMLHttpRequest,h=0,p=function(g){var v=g.length,b=[],y=String.fromCharCode;for(h=0;h<v;h+=1)b.push(y(255&g.charCodeAt(h)));return b.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(mr.API),function(e){function t(){return(Mr.html2canvas?Promise.resolve(Mr.html2canvas):K_(()=>Promise.resolve().then(()=>cLe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Mr.DOMPurify?Promise.resolve(Mr.DOMPurify):K_(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=pa(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:a("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(l(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],g=p.src.find(function(v){return v.format==="truetype"});g&&l.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var l=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||mr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,d).then(function(f){return l.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,mr.getPageSize=function(i,o,l){if(pa(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,g=0,v=0;if(h.hasOwnProperty(f))g=h[f][1]/d,v=h[f][0]/d;else try{g=l[1],v=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",v>g&&(p=v,v=g,g=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>v&&(p=v,v=g,g=p)}return{width:v,height:g,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Nj):null;var l=new s(o);return o.worker?l:l.from(i).doCallback()}}(mr.API),mr.API.addJS=function(e){return N9=e,this.internal.events.subscribe("postPutResources",function(){EE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(EE+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),S9=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+N9+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){EE!==void 0&&S9!==void 0&&this.internal.out("/Names <</JavaScript "+EE+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(mr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,v={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=p,t.indexOf(f.charCodeAt(b+1))!==-1){h=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),v={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:h,numcomponents:f.charCodeAt(b+9)};break}p=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(mr.API);var Ug,CE,k9,B9,T9,iwe=function(){var e,t,r;function n(s){var i,o,l,u,d,f,h,p,g,v,b,y,_,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var k,B;for(B=[],k=0;k<4;++k)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((v=l-this.transparency.indexed.length)>0)for(_=0;0<=v?_<v:_>v;0<=v?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,p,g){var v,b,y,_,S,k,B,F,w,C,N,R,O,j,U,P,X,K,Z,H,V,q=Math.ceil((u.width-f)/p),ne=Math.ceil((u.height-h)/g),L=u.width==q&&u.height==ne;for(j=i*q,R=L?o:new Uint8Array(j*ne),k=s.length,O=0,b=0;O<ne&&l<k;){switch(s[l++]){case 0:for(_=X=0;X<j;_=X+=1)R[b++]=s[l++];break;case 1:for(_=K=0;K<j;_=K+=1)v=s[l++],S=_<i?0:R[b-i],R[b++]=(v+S)%256;break;case 2:for(_=Z=0;Z<j;_=Z+=1)v=s[l++],y=(_-_%i)/i,U=O&&R[(O-1)*j+y*i+_%i],R[b++]=(U+v)%256;break;case 3:for(_=H=0;H<j;_=H+=1)v=s[l++],y=(_-_%i)/i,S=_<i?0:R[b-i],U=O&&R[(O-1)*j+y*i+_%i],R[b++]=(v+Math.floor((S+U)/2))%256;break;case 4:for(_=V=0;V<j;_=V+=1)v=s[l++],y=(_-_%i)/i,S=_<i?0:R[b-i],O===0?U=P=0:(U=R[(O-1)*j+y*i+_%i],P=y&&R[(O-1)*j+(y-1)*i+_%i]),B=S+U-P,F=Math.abs(B-S),C=Math.abs(B-U),N=Math.abs(B-P),w=F<=C&&F<=N?S:C<=N?U:P,R[b++]=(v+w)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!L){var W=((h+O*g)*u.width+f)*i,J=O*j;for(_=0;_<q;_+=1){for(var te=0;te<i;te+=1)o[W++]=R[J++];W+=(p-1)*i}}O++}}return s=Lye(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,l,u,d,f,h,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,s=0,i=f=0,h=o.length;f<h;i=f+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(p=d[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,i){var o,l,u,d,f,h,p,g,v,b,y;if(l=this.colors,v=null,o=this.hasAlphaChannel,this.palette.length&&(v=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,o=!0),g=(u=s.data||s).length,f=v||i,d=h=0,l===1)for(;d<g;)p=v?4*i[d/4]:h,b=f[p++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=o?f[p++]:255,h=p;else for(;d<g;)p=v?4*i[d/4]:h,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,h=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Mr)==="[object Window]"){try{t=Mr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,l,u,d,f,h,p;if(this.animation){for(p=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)i=h[o],l=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,p.push(i.image=e(l));return p}},n.prototype.renderFrame=function(s,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,l,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,l=f.frames,d=f.numPlays,(i=function(){var p,g;if(p=o++%u,g=l[p],h.renderFrame(s,p),u>1&&o/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function owe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var u=!0,d=[],f=0,h=null,p=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&v)==0&&(h=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,k=e[t++],B=k>>6&1,F=1<<(7&k)+1,w=o,C=l,N=!1;k>>7&&(N=!0,w=t,C=F,t+=3*F);var R=t;for(t++;;){var O;if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}d.push({x:b,y,width:_,height:S,has_local_palette:N,palette_offset:w,palette_size:C,data_offset:R,data_length:t-R,transparent_index:h,interlaced:!!B,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(j){if(j<0||j>=d.length)throw new Error("Frame index out of range.");return d[j]},this.decodeAndBlitFrameBGRA=function(j,U){var P=this.frameInfo(j),X=P.width*P.height,K=new Uint8Array(X);I9(e,P.data_offset,K,X);var Z=P.palette_offset,H=P.transparent_index;H===null&&(H=256);var V=P.width,q=r-V,ne=V,L=4*(P.y*r+P.x),W=4*((P.y+P.height)*r+P.x),J=L,te=4*q;P.interlaced===!0&&(te+=4*r*7);for(var ie=8,Ae=0,oe=K.length;Ae<oe;++Ae){var ce=K[Ae];if(ne===0&&(ne=V,(J+=te)>=W&&(te=4*q+4*r*(ie-1),J=L+(V+q)*(ie<<1),ie>>=1)),ce===H)J+=4;else{var ge=e[Z+3*ce],je=e[Z+3*ce+1],re=e[Z+3*ce+2];U[J++]=re,U[J++]=je,U[J++]=ge,U[J++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(j,U){var P=this.frameInfo(j),X=P.width*P.height,K=new Uint8Array(X);I9(e,P.data_offset,K,X);var Z=P.palette_offset,H=P.transparent_index;H===null&&(H=256);var V=P.width,q=r-V,ne=V,L=4*(P.y*r+P.x),W=4*((P.y+P.height)*r+P.x),J=L,te=4*q;P.interlaced===!0&&(te+=4*r*7);for(var ie=8,Ae=0,oe=K.length;Ae<oe;++Ae){var ce=K[Ae];if(ne===0&&(ne=V,(J+=te)>=W&&(te=4*q+4*r*(ie-1),J=L+(V+q)*(ie<<1),ie>>=1)),ce===H)J+=4;else{var ge=e[Z+3*ce],je=e[Z+3*ce+1],re=e[Z+3*ce+2];U[J++]=ge,U[J++]=je,U[J++]=re,U[J++]=255}--ne}}}function I9(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,l=a+1,u=(1<<l)-1,d=0,f=0,h=0,p=e[t++],g=new Int32Array(4096),v=null;;){for(;d<16&&p!==0;)f|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<l)break;var b=f&u;if(f>>=l,d-=l,b!==s){if(b===i)break;for(var y=b<o?b:v,_=0,S=y;S>s;)S=g[S]>>8,++_;var k=S;if(h+_+(y!==b?1:0)>n)return void Na.log("Warning, gif stream longer than expected.");r[h++]=k;var B=h+=_;for(y!==b&&(r[h++]=k),S=y;_--;)S=g[S],r[--B]=255&S,S>>=8;v!==null&&o<4096&&(g[o++]=v<<8|k,o>=u+1&&l<12&&(++l,u=u<<1|1)),v=b}else o=i+1,u=(1<<(l=a+1))-1,v=null}return h!==n&&Na.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function kB(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),g=new Array(64),v=[],b=0,y=7,_=new Array(64),S=new Array(64),k=new Array(64),B=new Array(256),F=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function K(L,W){for(var J=0,te=0,ie=new Array,Ae=1;Ae<=16;Ae++){for(var oe=1;oe<=L[Ae];oe++)ie[W[te]]=[],ie[W[te]][0]=J,ie[W[te]][1]=Ae,te++,J++;J*=2}return ie}function Z(L){for(var W=L[0],J=L[1]-1;J>=0;)W&1<<J&&(b|=1<<y),J--,--y<0&&(b==255?(H(255),H(0)):H(b),y=7,b=0)}function H(L){v.push(L)}function V(L){H(L>>8&255),H(255&L)}function q(L,W,J,te,ie){for(var Ae,oe=ie[0],ce=ie[240],ge=function(Xe,ye){var Oe,Pe,qe,Ze,ot,mt,Bt,Lt,Ot,Qt,bt=0;for(Ot=0;Ot<8;++Ot){Oe=Xe[bt],Pe=Xe[bt+1],qe=Xe[bt+2],Ze=Xe[bt+3],ot=Xe[bt+4],mt=Xe[bt+5],Bt=Xe[bt+6];var Nr=Oe+(Lt=Xe[bt+7]),tr=Oe-Lt,nn=Pe+Bt,Cr=Pe-Bt,Vr=qe+mt,In=qe-mt,jr=Ze+ot,vt=Ze-ot,pt=Nr+jr,Je=Nr-jr,gt=nn+Vr,dt=nn-Vr;Xe[bt]=pt+gt,Xe[bt+4]=pt-gt;var Dt=.707106781*(dt+Je);Xe[bt+2]=Je+Dt,Xe[bt+6]=Je-Dt;var zt=.382683433*((pt=vt+In)-(dt=Cr+tr)),Pr=.5411961*pt+zt,Xr=1.306562965*dt+zt,pn=.707106781*(gt=In+Cr),gn=tr+pn,$t=tr-pn;Xe[bt+5]=$t+Pr,Xe[bt+3]=$t-Pr,Xe[bt+1]=gn+Xr,Xe[bt+7]=gn-Xr,bt+=8}for(bt=0,Ot=0;Ot<8;++Ot){Oe=Xe[bt],Pe=Xe[bt+8],qe=Xe[bt+16],Ze=Xe[bt+24],ot=Xe[bt+32],mt=Xe[bt+40],Bt=Xe[bt+48];var tn=Oe+(Lt=Xe[bt+56]),en=Oe-Lt,cr=Pe+Bt,Yr=Pe-Bt,ta=qe+mt,fe=qe-mt,Be=Ze+ot,Ee=Ze-ot,Ce=tn+Be,Ne=tn-Be,Te=cr+ta,Ye=cr-ta;Xe[bt]=Ce+Te,Xe[bt+32]=Ce-Te;var ut=.707106781*(Ye+Ne);Xe[bt+16]=Ne+ut,Xe[bt+48]=Ne-ut;var $e=.382683433*((Ce=Ee+fe)-(Ye=Yr+en)),tt=.5411961*Ce+$e,at=1.306562965*Ye+$e,Tt=.707106781*(Te=fe+Yr),Vt=en+Tt,Yt=en-Tt;Xe[bt+40]=Yt+tt,Xe[bt+24]=Yt-tt,Xe[bt+8]=Vt+at,Xe[bt+56]=Vt-at,bt++}for(Ot=0;Ot<64;++Ot)Qt=Xe[Ot]*ye[Ot],p[Ot]=Qt>0?Qt+.5|0:Qt-.5|0;return p}(L,W),je=0;je<64;++je)g[w[je]]=ge[je];var re=g[0]-J;J=g[0],re==0?Z(te[0]):(Z(te[h[Ae=32767+re]]),Z(f[Ae]));for(var Se=63;Se>0&&g[Se]==0;)Se--;if(Se==0)return Z(oe),J;for(var De,_e=1;_e<=Se;){for(var he=_e;g[_e]==0&&_e<=Se;)++_e;var Ie=_e-he;if(Ie>=16){De=Ie>>4;for(var He=1;He<=De;++He)Z(ce);Ie&=15}Ae=32767+g[_e],Z(ie[(Ie<<4)+h[Ae]]),Z(f[Ae]),_e++}return Se!=63&&Z(oe),J}function ne(L){L=Math.min(Math.max(L,1),100),s!=L&&(function(W){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ie=i((J[te]*W+50)/100);ie=Math.min(Math.max(ie,1),255),o[w[te]]=ie}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var ce=i((Ae[oe]*W+50)/100);ce=Math.min(Math.max(ce,1),255),l[w[oe]]=ce}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],je=0,re=0;re<8;re++)for(var Se=0;Se<8;Se++)u[je]=1/(o[w[je]]*ge[re]*ge[Se]*8),d[je]=1/(l[w[je]]*ge[re]*ge[Se]*8),je++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),s=L)}this.encode=function(L,W){W&&ne(W),v=new Array,b=0,y=7,V(65496),V(65504),V(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),V(1),V(1),H(0),H(0),function(){V(65499),V(132),H(0);for(var Pe=0;Pe<64;Pe++)H(o[Pe]);H(1);for(var qe=0;qe<64;qe++)H(l[qe])}(),function(Pe,qe){V(65472),V(17),H(8),V(qe),V(Pe),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(L.width,L.height),function(){V(65476),V(418),H(0);for(var Pe=0;Pe<16;Pe++)H(C[Pe+1]);for(var qe=0;qe<=11;qe++)H(N[qe]);H(16);for(var Ze=0;Ze<16;Ze++)H(R[Ze+1]);for(var ot=0;ot<=161;ot++)H(O[ot]);H(1);for(var mt=0;mt<16;mt++)H(j[mt+1]);for(var Bt=0;Bt<=11;Bt++)H(U[Bt]);H(17);for(var Lt=0;Lt<16;Lt++)H(P[Lt+1]);for(var Ot=0;Ot<=161;Ot++)H(X[Ot])}(),V(65498),V(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var J=0,te=0,ie=0;b=0,y=7,this.encode.displayName="_encode_";for(var Ae,oe,ce,ge,je,re,Se,De,_e,he=L.data,Ie=L.width,He=L.height,Xe=4*Ie,ye=0;ye<He;){for(Ae=0;Ae<Xe;){for(je=Xe*ye+Ae,Se=-1,De=0,_e=0;_e<64;_e++)re=je+(De=_e>>3)*Xe+(Se=4*(7&_e)),ye+De>=He&&(re-=Xe*(ye+1+De-He)),Ae+Se>=Xe&&(re-=Ae+Se-Xe+4),oe=he[re++],ce=he[re++],ge=he[re++],_[_e]=(F[oe]+F[ce+256>>0]+F[ge+512>>0]>>16)-128,S[_e]=(F[oe+768>>0]+F[ce+1024>>0]+F[ge+1280>>0]>>16)-128,k[_e]=(F[oe+1280>>0]+F[ce+1536>>0]+F[ge+1792>>0]>>16)-128;J=q(_,u,J,t,n),te=q(S,d,te,r,a),ie=q(k,d,ie,r,a),Ae+=32}ye+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,Z(Oe)}return V(65497),new Uint8Array(v)},e=e||50,function(){for(var L=String.fromCharCode,W=0;W<256;W++)B[W]=L(W)}(),t=K(C,N),r=K(j,U),n=K(R,O),a=K(P,X),function(){for(var L=1,W=2,J=1;J<=15;J++){for(var te=L;te<W;te++)h[32767+te]=J,f[32767+te]=[],f[32767+te][1]=J,f[32767+te][0]=te;for(var ie=-(W-1);ie<=-L;ie++)h[32767+ie]=J,f[32767+ie]=[],f[32767+ie][1]=J,f[32767+ie][0]=W-1+ie;L<<=1,W<<=1}}(),function(){for(var L=0;L<256;L++)F[L]=19595*L,F[L+256>>0]=38470*L,F[L+512>>0]=7471*L+32768,F[L+768>>0]=-11059*L,F[L+1024>>0]=-21709*L,F[L+1280>>0]=32768*L+8421375,F[L+1536>>0]=-27439*L,F[L+1792>>0]=-5329*L}(),ne(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ld(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function j9(e){function t(C){if(!C)throw Error("assert :P")}function r(C,N,R){for(var O=0;4>O;O++)if(C[N+O]!=R.charCodeAt(O))return!0;return!1}function n(C,N,R,O,j){for(var U=0;U<j;U++)C[N+U]=R[O+U]}function a(C,N,R,O){for(var j=0;j<O;j++)C[N+j]=R}function s(C){return new Int32Array(C)}function i(C,N){for(var R=[],O=0;O<C;O++)R.push(new N);return R}function o(C,N){var R=[];return function O(j,U,P){for(var X=P[U],K=0;K<X&&(j.push(P.length>U+1?[]:new N),!(P.length<U+1));K++)O(j[K],U+1,P)}(R,0,C),R}var l=function(){var C=this;function N(T,Q){for(var Y=1<<Q-1>>>0;T&Y;)Y>>>=1;return Y?(T&Y-1)+Y:T}function R(T,Q,Y,ae,ue){t(!(ae%Y));do T[Q+(ae-=Y)]=ue;while(0<ae)}function O(T,Q,Y,ae,ue){if(t(2328>=ue),512>=ue)var me=s(512);else if((me=s(ue))==null)return 0;return function(pe,ve,we,ke,Me,nt){var et,Ge,Nt=ve,ht=1<<we,Ue=s(16),Ve=s(16);for(t(Me!=0),t(ke!=null),t(pe!=null),t(0<we),Ge=0;Ge<Me;++Ge){if(15<ke[Ge])return 0;++Ue[ke[Ge]]}if(Ue[0]==Me)return 0;for(Ve[1]=0,et=1;15>et;++et){if(Ue[et]>1<<et)return 0;Ve[et+1]=Ve[et]+Ue[et]}for(Ge=0;Ge<Me;++Ge)et=ke[Ge],0<ke[Ge]&&(nt[Ve[et]++]=Ge);if(Ve[15]==1)return(ke=new j).g=0,ke.value=nt[0],R(pe,Nt,1,ht,ke),ht;var Et,kt=-1,_t=ht-1,rr=0,Wt=1,hr=1,Zt=1<<we;for(Ge=0,et=1,Me=2;et<=we;++et,Me<<=1){if(Wt+=hr<<=1,0>(hr-=Ue[et]))return 0;for(;0<Ue[et];--Ue[et])(ke=new j).g=et,ke.value=nt[Ge++],R(pe,Nt+rr,Me,Zt,ke),rr=N(rr,et)}for(et=we+1,Me=2;15>=et;++et,Me<<=1){if(Wt+=hr<<=1,0>(hr-=Ue[et]))return 0;for(;0<Ue[et];--Ue[et]){if(ke=new j,(rr&_t)!=kt){for(Nt+=Zt,Et=1<<(kt=et)-we;15>kt&&!(0>=(Et-=Ue[kt]));)++kt,Et<<=1;ht+=Zt=1<<(Et=kt-we),pe[ve+(kt=rr&_t)].g=Et+we,pe[ve+kt].value=Nt-ve-kt}ke.g=et-we,ke.value=nt[Ge++],R(pe,Nt+(rr>>we),Me,Zt,ke),rr=N(rr,et)}}return Wt!=2*Ve[15]-1?0:ht}(T,Q,Y,ae,ue,me)}function j(){this.value=this.g=0}function U(){this.value=this.g=0}function P(){this.G=i(5,j),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Fs,U)}function X(T,Q,Y,ae){t(T!=null),t(Q!=null),t(2147483648>ae),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=Q,T.pa=Y,T.Jd=Q,T.Yc=Y+ae,T.Zc=4<=ae?Y+ae-4+1:Y,Ae(T)}function K(T,Q){for(var Y=0;0<Q--;)Y|=ce(T,128)<<Q;return Y}function Z(T,Q){var Y=K(T,Q);return oe(T)?-Y:Y}function H(T,Q,Y,ae){var ue,me=0;for(t(T!=null),t(Q!=null),t(4294967288>ae),T.Sb=ae,T.Ra=0,T.u=0,T.h=0,4<ae&&(ae=4),ue=0;ue<ae;++ue)me+=Q[Y+ue]<<8*ue;T.Ra=me,T.bb=ae,T.oa=Q,T.pa=Y}function V(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<rf-8>>>0,++T.bb,T.u-=8;J(T)&&(T.h=1,T.u=0)}function q(T,Q){if(t(0<=Q),!T.h&&Q<=tf){var Y=W(T)&Md[Q];return T.u+=Q,V(T),Y}return T.h=1,T.u=0}function ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(T){return T.Ra>>>(T.u&rf-1)>>>0}function J(T){return t(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>rf}function te(T,Q){T.u=Q,T.h=J(T)}function ie(T){T.u>=_h&&(t(T.u>=_h),V(T))}function Ae(T){t(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(t(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function oe(T){return K(T,1)}function ce(T,Q){var Y=T.Ca;0>T.b&&Ae(T);var ae=T.b,ue=Y*Q>>>8,me=(T.I>>>ae>ue)+0;for(me?(Y-=ue,T.I-=ue+1<<ae>>>0):Y=ue+1,ae=Y,ue=0;256<=ae;)ue+=8,ae>>=8;return ae=7^ue+So[ae],T.b-=ae,T.Ca=(Y<<ae)-1,me}function ge(T,Q,Y){T[Q+0]=Y>>24&255,T[Q+1]=Y>>16&255,T[Q+2]=Y>>8&255,T[Q+3]=Y>>0&255}function je(T,Q){return T[Q+0]<<0|T[Q+1]<<8}function re(T,Q){return je(T,Q)|T[Q+2]<<16}function Se(T,Q){return je(T,Q)|je(T,Q+2)<<16}function De(T,Q){var Y=1<<Q;return t(T!=null),t(0<Q),T.X=s(Y),T.X==null?0:(T.Mb=32-Q,T.Xa=Q,1)}function _e(T,Q){t(T!=null),t(Q!=null),t(T.Xa==Q.Xa),n(Q.X,0,T.X,0,1<<Q.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function Ie(T,Q,Y,ae){t(Y!=null),t(ae!=null);var ue=Y[0],me=ae[0];return ue==0&&(ue=(T*me+Q/2)/Q),me==0&&(me=(Q*ue+T/2)/T),0>=ue||0>=me?0:(Y[0]=ue,ae[0]=me,1)}function He(T,Q){return T+(1<<Q)-1>>>Q}function Xe(T,Q){return((4278255360&T)+(4278255360&Q)>>>0&4278255360)+((16711935&T)+(16711935&Q)>>>0&16711935)>>>0}function ye(T,Q){C[Q]=function(Y,ae,ue,me,pe,ve,we){var ke;for(ke=0;ke<pe;++ke){var Me=C[T](ve[we+ke-1],ue,me+ke);ve[we+ke]=Xe(Y[ae+ke],Me)}}}function Oe(){this.ud=this.hd=this.jd=0}function Pe(T,Q){return((4278124286&(T^Q))>>>1)+(T&Q)>>>0}function qe(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Ze(T,Q){return qe(T+(T-Q+.5>>1))}function ot(T,Q,Y){return Math.abs(Q-Y)-Math.abs(T-Y)}function mt(T,Q,Y,ae,ue,me,pe){for(ae=me[pe-1],Y=0;Y<ue;++Y)me[pe+Y]=ae=Xe(T[Q+Y],ae)}function Bt(T,Q,Y,ae,ue){var me;for(me=0;me<Y;++me){var pe=T[Q+me],ve=pe>>8&255,we=16711935&(we=(we=16711935&pe)+((ve<<16)+ve));ae[ue+me]=(4278255360&pe)+we>>>0}}function Lt(T,Q){Q.jd=T>>0&255,Q.hd=T>>8&255,Q.ud=T>>16&255}function Ot(T,Q,Y,ae,ue,me){var pe;for(pe=0;pe<ae;++pe){var ve=Q[Y+pe],we=ve>>>8,ke=ve,Me=255&(Me=(Me=ve>>>16)+((T.jd<<24>>24)*(we<<24>>24)>>>5));ke=255&(ke=(ke=ke+((T.hd<<24>>24)*(we<<24>>24)>>>5))+((T.ud<<24>>24)*(Me<<24>>24)>>>5)),ue[me+pe]=(4278255360&ve)+(Me<<16)+ke}}function Qt(T,Q,Y,ae,ue){C[Q]=function(me,pe,ve,we,ke,Me,nt,et,Ge){for(we=nt;we<et;++we)for(nt=0;nt<Ge;++nt)ke[Me++]=ue(ve[ae(me[pe++])])},C[T]=function(me,pe,ve,we,ke,Me,nt){var et=8>>me.b,Ge=me.Ea,Nt=me.K[0],ht=me.w;if(8>et)for(me=(1<<me.b)-1,ht=(1<<et)-1;pe<ve;++pe){var Ue,Ve=0;for(Ue=0;Ue<Ge;++Ue)Ue&me||(Ve=ae(we[ke++])),Me[nt++]=ue(Nt[Ve&ht]),Ve>>=et}else C["VP8LMapColor"+Y](we,ke,Nt,ht,Me,nt,pe,ve,Ge)}}function bt(T,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=T[Q++];ae[ue++]=me>>16&255,ae[ue++]=me>>8&255,ae[ue++]=me>>0&255}}function Nr(T,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=T[Q++];ae[ue++]=me>>16&255,ae[ue++]=me>>8&255,ae[ue++]=me>>0&255,ae[ue++]=me>>24&255}}function tr(T,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=(pe=T[Q++])>>16&240|pe>>12&15,pe=pe>>0&240|pe>>28&15;ae[ue++]=me,ae[ue++]=pe}}function nn(T,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=(pe=T[Q++])>>16&248|pe>>13&7,pe=pe>>5&224|pe>>3&31;ae[ue++]=me,ae[ue++]=pe}}function Cr(T,Q,Y,ae,ue){for(Y=Q+Y;Q<Y;){var me=T[Q++];ae[ue++]=me>>0&255,ae[ue++]=me>>8&255,ae[ue++]=me>>16&255}}function Vr(T,Q,Y,ae,ue,me){if(me==0)for(Y=Q+Y;Q<Y;)ge(ae,((me=T[Q++])[0]>>24|me[1]>>8&65280|me[2]<<8&16711680|me[3]<<24)>>>0),ue+=32;else n(ae,ue,T,Q,Y)}function In(T,Q){C[Q][0]=C[T+"0"],C[Q][1]=C[T+"1"],C[Q][2]=C[T+"2"],C[Q][3]=C[T+"3"],C[Q][4]=C[T+"4"],C[Q][5]=C[T+"5"],C[Q][6]=C[T+"6"],C[Q][7]=C[T+"7"],C[Q][8]=C[T+"8"],C[Q][9]=C[T+"9"],C[Q][10]=C[T+"10"],C[Q][11]=C[T+"11"],C[Q][12]=C[T+"12"],C[Q][13]=C[T+"13"],C[Q][14]=C[T+"0"],C[Q][15]=C[T+"0"]}function jr(T){return T==Em||T==Wd||T==Wu||T==Bh}function vt(){this.eb=[],this.size=this.A=this.fb=0}function pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Je(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vt,this.f.kb=new pt,this.sd=null}function gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dt(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function zt(T,Q){var Y=T.T,ae=Q.ba.f.RGBA,ue=ae.eb,me=ae.fb+T.ka*ae.A,pe=ai[Q.ba.S],ve=T.y,we=T.O,ke=T.f,Me=T.N,nt=T.ea,et=T.W,Ge=Q.cc,Nt=Q.dc,ht=Q.Mc,Ue=Q.Nc,Ve=T.ka,Et=T.ka+T.T,kt=T.U,_t=kt+1>>1;for(Ve==0?pe(ve,we,null,null,ke,Me,nt,et,ke,Me,nt,et,ue,me,null,null,kt):(pe(Q.ec,Q.fc,ve,we,Ge,Nt,ht,Ue,ke,Me,nt,et,ue,me-ae.A,ue,me,kt),++Y);Ve+2<Et;Ve+=2)Ge=ke,Nt=Me,ht=nt,Ue=et,Me+=T.Rc,et+=T.Rc,me+=2*ae.A,pe(ve,(we+=2*T.fa)-T.fa,ve,we,Ge,Nt,ht,Ue,ke,Me,nt,et,ue,me-ae.A,ue,me,kt);return we+=T.fa,T.j+Et<T.o?(n(Q.ec,Q.fc,ve,we,kt),n(Q.cc,Q.dc,ke,Me,_t),n(Q.Mc,Q.Nc,nt,et,_t),Y--):1&Et||pe(ve,we,null,null,ke,Me,nt,et,ke,Me,nt,et,ue,me+ae.A,null,null,kt),Y}function Pr(T,Q,Y){var ae=T.F,ue=[T.J];if(ae!=null){var me=T.U,pe=Q.ba.S,ve=pe==lf||pe==Wu;Q=Q.ba.f.RGBA;var we=[0],ke=T.ka;we[0]=T.T,T.Kb&&(ke==0?--we[0]:(--ke,ue[0]-=T.width),T.j+T.ka+T.T==T.o&&(we[0]=T.o-T.j-ke));var Me=Q.eb;ke=Q.fb+ke*Q.A,T=hn(ae,ue[0],T.width,me,we,Me,ke+(ve?0:3),Q.A),t(Y==we),T&&jr(pe)&&al(Me,ke,ve,me,we,Q.A)}return 0}function Xr(T){var Q=T.ma,Y=Q.ba.S,ae=11>Y,ue=Y==kh||Y==wm||Y==lf||Y==qu||Y==12||jr(Y);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!Ld(Q.Oa,T,ue?11:12))return 0;if(ue&&jr(Y)&&Pt(),T.da)alert("todo:use_scaling");else{if(ae){if(Q.Ib=Dt,T.Kb){if(Y=T.U+1>>1,Q.memory=s(T.U+2*Y),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+T.U,Q.Mc=Q.cc,Q.Nc=Q.dc+Y,Q.Ib=zt,Pt()}}else alert("todo:EmitYUV");ue&&(Q.Jb=Pr,ae&&Ke())}if(ae&&!h2){for(T=0;256>T;++T)H4[T]=89858*(T-128)+Ds>>au,Sm[T]=-22014*(T-128)+Ds,A1[T]=-45773*(T-128),Rs[T]=113618*(T-128)+Ds>>au;for(T=Jd;T<pg;++T)Q=76283*(T-16)+Ds>>au,Nm[T-Jd]=Vn(Q,255),f1[T-Jd]=Vn(Q+8>>4,15);h2=1}return 1}function pn(T){var Q=T.ma,Y=T.U,ae=T.T;return t(!(1&T.ka)),0>=Y||0>=ae?0:(Y=Q.Ib(T,Q),Q.Jb!=null&&Q.Jb(T,Q,Y),Q.Dc+=Y,1)}function gn(T){T.ma.memory=null}function $t(T,Q,Y,ae){return q(T,8)!=47?0:(Q[0]=q(T,14)+1,Y[0]=q(T,14)+1,ae[0]=q(T,1),q(T,3)!=0?0:!T.h)}function tn(T,Q){if(4>T)return T+1;var Y=T-2>>1;return(2+(1&T)<<Y)+q(Q,Y)+1}function en(T,Q){return 120<Q?Q-120:1<=(Y=((Y=Yu[Q-1])>>4)*T+(8-(15&Y)))?Y:1;var Y}function cr(T,Q,Y){var ae=W(Y),ue=T[Q+=255&ae].g-8;return 0<ue&&(te(Y,Y.u+8),ae=W(Y),Q+=T[Q].value,Q+=ae&(1<<ue)-1),te(Y,Y.u+T[Q].g),T[Q].value}function Yr(T,Q,Y){return Y.g+=T.g,Y.value+=T.value<<Q>>>0,t(8>=Y.g),T.g}function ta(T,Q,Y){var ae=T.xc;return t((Q=ae==0?0:T.vc[T.md*(Y>>ae)+(Q>>ae)])<T.Wb),T.Ya[Q]}function fe(T,Q,Y,ae){var ue=T.ab,me=T.c*Q,pe=T.C;Q=pe+Q;var ve=Y,we=ae;for(ae=T.Ta,Y=T.Ua;0<ue--;){var ke=T.gc[ue],Me=pe,nt=Q,et=ve,Ge=we,Nt=(we=ae,ve=Y,ke.Ea);switch(t(Me<nt),t(nt<=ke.nc),ke.hc){case 2:cg(et,Ge,(nt-Me)*Nt,we,ve);break;case 0:var ht=Me,Ue=nt,Ve=we,Et=ve,kt=(Zt=ke).Ea;ht==0&&(u1(et,Ge,null,null,1,Ve,Et),mt(et,Ge+1,0,0,kt-1,Ve,Et+1),Ge+=kt,Et+=kt,++ht);for(var _t=1<<Zt.b,rr=_t-1,Wt=He(kt,Zt.b),hr=Zt.K,Zt=Zt.w+(ht>>Zt.b)*Wt;ht<Ue;){var On=hr,zn=Zt,An=1;for(bm(et,Ge,Ve,Et-kt,1,Ve,Et);An<kt;){var on=(An&~rr)+_t;on>kt&&(on=kt),(0,$u[On[zn++]>>8&15])(et,Ge+ +An,Ve,Et+An-kt,on-An,Ve,Et+An),An=on}Ge+=kt,Et+=kt,++ht&rr||(Zt+=Wt)}nt!=ke.nc&&n(we,ve-Nt,we,ve+(nt-Me-1)*Nt,Nt);break;case 1:for(Nt=et,Ue=Ge,kt=(et=ke.Ea)-(Et=et&~(Ve=(Ge=1<<ke.b)-1)),ht=He(et,ke.b),_t=ke.K,ke=ke.w+(Me>>ke.b)*ht;Me<nt;){for(rr=_t,Wt=ke,hr=new Oe,Zt=Ue+Et,On=Ue+et;Ue<Zt;)Lt(rr[Wt++],hr),Qd(hr,Nt,Ue,Ge,we,ve),Ue+=Ge,ve+=Ge;Ue<On&&(Lt(rr[Wt++],hr),Qd(hr,Nt,Ue,kt,we,ve),Ue+=kt,ve+=kt),++Me&Ve||(ke+=ht)}break;case 3:if(et==we&&Ge==ve&&0<ke.b){for(Ue=we,et=Nt=ve+(nt-Me)*Nt-(Et=(nt-Me)*He(ke.Ea,ke.b)),Ge=we,Ve=ve,ht=[],Et=(kt=Et)-1;0<=Et;--Et)ht[Et]=Ge[Ve+Et];for(Et=kt-1;0<=Et;--Et)Ue[et+Et]=ht[Et];Tl(ke,Me,nt,we,Nt,we,ve)}else Tl(ke,Me,nt,et,Ge,we,ve)}ve=ae,we=Y}we!=Y&&n(ae,Y,ve,we,me)}function Be(T,Q){var Y=T.V,ae=T.Ba+T.c*T.C,ue=Q-T.C;if(t(Q<=T.l.o),t(16>=ue),0<ue){var me=T.l,pe=T.Ta,ve=T.Ua,we=me.width;if(fe(T,ue,Y,ae),ue=ve=[ve],t((Y=T.C)<(ae=Q)),t(me.v<me.va),ae>me.o&&(ae=me.o),Y<me.j){var ke=me.j-Y;Y=me.j,ue[0]+=ke*we}if(Y>=ae?Y=0:(ue[0]+=4*me.v,me.ka=Y-me.j,me.U=me.va-me.v,me.T=ae-Y,Y=1),Y){if(ve=ve[0],11>(Y=T.ca).S){var Me=Y.f.RGBA,nt=(ae=Y.S,ue=me.U,me=me.T,ke=Me.eb,Me.A),et=me;for(Me=Me.fb+T.Ma*Me.A;0<et--;){var Ge=pe,Nt=ve,ht=ue,Ue=ke,Ve=Me;switch(ae){case Pi:to(Ge,Nt,ht,Ue,Ve);break;case kh:wi(Ge,Nt,ht,Ue,Ve);break;case Em:wi(Ge,Nt,ht,Ue,Ve),al(Ue,Ve,0,ht,1,0);break;case eu:oc(Ge,Nt,ht,Ue,Ve);break;case wm:Vr(Ge,Nt,ht,Ue,Ve,1);break;case Wd:Vr(Ge,Nt,ht,Ue,Ve,1),al(Ue,Ve,0,ht,1,0);break;case lf:Vr(Ge,Nt,ht,Ue,Ve,0);break;case Wu:Vr(Ge,Nt,ht,Ue,Ve,0),al(Ue,Ve,1,ht,1,0);break;case qu:Hd(Ge,Nt,ht,Ue,Ve);break;case Bh:Hd(Ge,Nt,ht,Ue,Ve),fn(Ue,Ve,ht,1,0);break;case dg:No(Ge,Nt,ht,Ue,Ve);break;default:t(0)}ve+=we,Me+=nt}T.Ma+=me}else alert("todo:EmitRescaledRowsYUVA");t(T.Ma<=Y.height)}}T.C=Q,t(T.C<=T.i)}function Ee(T){var Q;if(0<T.ua)return 0;for(Q=0;Q<T.Wb;++Q){var Y=T.Ya[Q].G,ae=T.Ya[Q].H;if(0<Y[1][ae[1]+0].g||0<Y[2][ae[2]+0].g||0<Y[3][ae[3]+0].g)return 0}return 1}function Ce(T,Q,Y,ae,ue,me){if(T.Z!=0){var pe=T.qd,ve=T.rd;for(t(ru[T.Z]!=null);Q<Y;++Q)ru[T.Z](pe,ve,ae,ue,ae,ue,me),pe=ae,ve=ue,ue+=me;T.qd=pe,T.rd=ve}}function Ne(T,Q){var Y=T.l.ma,ae=Y.Z==0||Y.Z==1?T.l.j:T.C;if(ae=T.C<ae?ae:T.C,t(Q<=T.l.o),Q>ae){var ue=T.l.width,me=Y.ca,pe=Y.tb+ue*ae,ve=T.V,we=T.Ba+T.c*ae,ke=T.gc;t(T.ab==1),t(ke[0].hc==3),Ud(ke[0],ae,Q,ve,we,me,pe),Ce(Y,ae,Q,me,pe,ue)}T.C=T.Ma=Q}function Te(T,Q,Y,ae,ue,me,pe){var ve=T.$/ae,we=T.$%ae,ke=T.m,Me=T.s,nt=Y+T.$,et=nt;ue=Y+ae*ue;var Ge=Y+ae*me,Nt=280+Me.ua,ht=T.Pb?ve:16777216,Ue=0<Me.ua?Me.Wa:null,Ve=Me.wc,Et=nt<Ge?ta(Me,we,ve):null;t(T.C<me),t(Ge<=ue);var kt=!1;e:for(;;){for(;kt||nt<Ge;){var _t=0;if(ve>=ht){var rr=nt-Y;t((ht=T).Pb),ht.wd=ht.m,ht.xd=rr,0<ht.s.ua&&_e(ht.s.Wa,ht.s.vb),ht=ve+d2}if(we&Ve||(Et=ta(Me,we,ve)),t(Et!=null),Et.Qb&&(Q[nt]=Et.qb,kt=!0),!kt)if(ie(ke),Et.jc){_t=ke,rr=Q;var Wt=nt,hr=Et.pd[W(_t)&Fs-1];t(Et.jc),256>hr.g?(te(_t,_t.u+hr.g),rr[Wt]=hr.value,_t=0):(te(_t,_t.u+hr.g-256),t(256<=hr.value),_t=hr.value),_t==0&&(kt=!0)}else _t=cr(Et.G[0],Et.H[0],ke);if(ke.h)break;if(kt||256>_t){if(!kt)if(Et.nd)Q[nt]=(Et.qb|_t<<8)>>>0;else{if(ie(ke),kt=cr(Et.G[1],Et.H[1],ke),ie(ke),rr=cr(Et.G[2],Et.H[2],ke),Wt=cr(Et.G[3],Et.H[3],ke),ke.h)break;Q[nt]=(Wt<<24|kt<<16|_t<<8|rr)>>>0}if(kt=!1,++nt,++we>=ae&&(we=0,++ve,pe!=null&&ve<=me&&!(ve%16)&&pe(T,ve),Ue!=null))for(;et<nt;)_t=Q[et++],Ue.X[(506832829*_t&4294967295)>>>Ue.Mb]=_t}else if(280>_t){if(_t=tn(_t-256,ke),rr=cr(Et.G[4],Et.H[4],ke),ie(ke),rr=en(ae,rr=tn(rr,ke)),ke.h)break;if(nt-Y<rr||ue-nt<_t)break e;for(Wt=0;Wt<_t;++Wt)Q[nt+Wt]=Q[nt+Wt-rr];for(nt+=_t,we+=_t;we>=ae;)we-=ae,++ve,pe!=null&&ve<=me&&!(ve%16)&&pe(T,ve);if(t(nt<=ue),we&Ve&&(Et=ta(Me,we,ve)),Ue!=null)for(;et<nt;)_t=Q[et++],Ue.X[(506832829*_t&4294967295)>>>Ue.Mb]=_t}else{if(!(_t<Nt))break e;for(kt=_t-280,t(Ue!=null);et<nt;)_t=Q[et++],Ue.X[(506832829*_t&4294967295)>>>Ue.Mb]=_t;_t=nt,t(!(kt>>>(rr=Ue).Xa)),Q[_t]=rr.X[kt],kt=!0}kt||t(ke.h==J(ke))}if(T.Pb&&ke.h&&nt<ue)t(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&_e(T.s.vb,T.s.Wa);else{if(ke.h)break e;pe!=null&&pe(T,ve>me?me:ve),T.a=0,T.$=nt-Y}return 1}return T.a=3,0}function Ye(T){t(T!=null),T.vc=null,T.yc=null,T.Ya=null;var Q=T.Wa;Q!=null&&(Q.X=null),T.vb=null,t(T!=null)}function ut(){var T=new Eh;return T==null?null:(T.a=0,T.xb=Th,In("Predictor","VP8LPredictors"),In("Predictor","VP8LPredictors_C"),In("PredictorAdd","VP8LPredictorsAdd"),In("PredictorAdd","VP8LPredictorsAdd_C"),cg=Bt,Qd=Ot,to=bt,wi=Nr,Hd=tr,No=nn,oc=Cr,C.VP8LMapColor32b=ri,C.VP8LMapColor8b=ym,T)}function $e(T,Q,Y,ae,ue){var me=1,pe=[T],ve=[Q],we=ae.m,ke=ae.s,Me=null,nt=0;e:for(;;){if(Y)for(;me&&q(we,1);){var et=pe,Ge=ve,Nt=ae,ht=1,Ue=Nt.m,Ve=Nt.gc[Nt.ab],Et=q(Ue,2);if(Nt.Oc&1<<Et)me=0;else{switch(Nt.Oc|=1<<Et,Ve.hc=Et,Ve.Ea=et[0],Ve.nc=Ge[0],Ve.K=[null],++Nt.ab,t(4>=Nt.ab),Et){case 0:case 1:Ve.b=q(Ue,3)+2,ht=$e(He(Ve.Ea,Ve.b),He(Ve.nc,Ve.b),0,Nt,Ve.K),Ve.K=Ve.K[0];break;case 3:var kt,_t=q(Ue,8)+1,rr=16<_t?0:4<_t?1:2<_t?2:3;if(et[0]=He(Ve.Ea,rr),Ve.b=rr,kt=ht=$e(_t,1,0,Nt,Ve.K)){var Wt,hr=_t,Zt=Ve,On=1<<(8>>Zt.b),zn=s(On);if(zn==null)kt=0;else{var An=Zt.K[0],on=Zt.w;for(zn[0]=Zt.K[0][0],Wt=1;Wt<1*hr;++Wt)zn[Wt]=Xe(An[on+Wt],zn[Wt-1]);for(;Wt<4*On;++Wt)zn[Wt]=0;Zt.K[0]=null,Zt.K[0]=zn,kt=1}}ht=kt;break;case 2:break;default:t(0)}me=ht}}if(pe=pe[0],ve=ve[0],me&&q(we,1)&&!(me=1<=(nt=q(we,4))&&11>=nt)){ae.a=3;break e}var na;if(na=me)t:{var $n,qr,ua,Sr=ae,Lr=pe,Fn=ve,Dn=nt,si=Y,Ps=Sr.m,ts=Sr.s,rs=[null],ps=1,Ol=0,Kn=uf[Dn];r:for(;;){if(si&&q(Ps,1)){var gs=q(Ps,3)+2,uc=He(Lr,gs),Zd=He(Fn,gs),ff=uc*Zd;if(!$e(uc,Zd,0,Sr,rs))break r;for(rs=rs[0],ts.xc=gs,$n=0;$n<ff;++$n){var eA=rs[$n]>>8&65535;rs[$n]=eA,eA>=ps&&(ps=eA+1)}}if(Ps.h)break r;for(qr=0;5>qr;++qr){var Ia=sl[qr];!qr&&0<Dn&&(Ia+=1<<Dn),Ol<Ia&&(Ol=Ia)}var km=i(ps*Kn,j),gg=ps,no=i(gg,P);if(no==null)var Pa=null;else t(65536>=gg),Pa=no;var hf=s(Ol);if(Pa==null||hf==null||km==null){Sr.a=1;break r}var tA=km;for($n=ua=0;$n<ps;++$n){var Bo=Pa[$n],rA=Bo.G,To=Bo.H,Bm=0,jh=1,vg=0;for(qr=0;5>qr;++qr){Ia=sl[qr],rA[qr]=tA,To[qr]=ua,!qr&&0<Dn&&(Ia+=1<<Dn);a:{var Tm,xg=Ia,Im=Sr,Fh=hf,g2=tA,v2=ua,jm=0,td=Im.m,z4=q(td,1);if(a(Fh,0,0,xg),z4){var x2=q(td,1)+1,b2=q(td,1),h1=q(td,b2==0?1:8);Fh[h1]=1,x2==2&&(Fh[h1=q(td,8)]=1);var Oh=1}else{var m1=s(19),p1=q(td,4)+4;if(19<p1){Im.a=3;var Fm=0;break a}for(Tm=0;Tm<p1;++Tm)m1[Xu[Tm]]=q(td,3);var bg=void 0,Dh=void 0,y2=Im,w2=m1,rd=xg,Om=Fh,yg=0,dc=y2.m,Rh=8,g1=i(128,j);n:for(;O(g1,0,7,w2,19);){if(q(dc,1)){var E2=2+2*q(dc,3);if((bg=2+q(dc,E2))>rd)break n}else bg=rd;for(Dh=0;Dh<rd&&bg--;){ie(dc);var v1=g1[0+(127&W(dc))];te(dc,dc.u+v1.g);var mf=v1.value;if(16>mf)Om[Dh++]=mf,mf!=0&&(Rh=mf);else{var C2=mf==16,x1=mf-16,b1=Fl[x1],y1=q(dc,Ag[x1])+b1;if(Dh+y1>rd)break n;for(var _2=C2?Rh:0;0<y1--;)Om[Dh++]=_2}}yg=1;break n}yg||(y2.a=3),Oh=yg}(Oh=Oh&&!td.h)&&(jm=O(g2,v2,8,Fh,xg)),Oh&&jm!=0?Fm=jm:(Im.a=3,Fm=0)}if(Fm==0)break r;if(jh&&cf[qr]==1&&(jh=tA[ua].g==0),Bm+=tA[ua].g,ua+=Fm,3>=qr){var pf,wg=hf[0];for(pf=1;pf<Ia;++pf)hf[pf]>wg&&(wg=hf[pf]);vg+=wg}}if(Bo.nd=jh,Bo.Qb=0,jh&&(Bo.qb=(rA[3][To[3]+0].value<<24|rA[1][To[1]+0].value<<16|rA[2][To[2]+0].value)>>>0,Bm==0&&256>rA[0][To[0]+0].value&&(Bo.Qb=1,Bo.qb+=rA[0][To[0]+0].value<<8)),Bo.jc=!Bo.Qb&&6>vg,Bo.jc){var Dm,nd=Bo;for(Dm=0;Dm<Fs;++Dm){var su=Dm,ad=nd.pd[su],Rm=nd.G[0][nd.H[0]+su];256<=Rm.value?(ad.g=Rm.g+256,ad.value=Rm.value):(ad.g=0,ad.value=0,su>>=Yr(Rm,8,ad),su>>=Yr(nd.G[1][nd.H[1]+su],16,ad),su>>=Yr(nd.G[2][nd.H[2]+su],0,ad),Yr(nd.G[3][nd.H[3]+su],24,ad))}}}ts.vc=rs,ts.Wb=ps,ts.Ya=Pa,ts.yc=km,na=1;break t}na=0}if(!(me=na)){ae.a=3;break e}if(0<nt){if(ke.ua=1<<nt,!De(ke.Wa,nt)){ae.a=1,me=0;break e}}else ke.ua=0;var Pm=ae,w1=pe,S2=ve,E1=Pm.s,C1=E1.xc;if(Pm.c=w1,Pm.i=S2,E1.md=He(w1,C1),E1.wc=C1==0?-1:(1<<C1)-1,Y){ae.xb=f2;break e}if((Me=s(pe*ve))==null){ae.a=1,me=0;break e}me=(me=Te(ae,Me,0,pe,ve,ve,null))&&!we.h;break e}return me?(ue!=null?ue[0]=Me:(t(Me==null),t(Y)),ae.$=0,Y||Ye(ke)):Ye(ke),me}function tt(T,Q){var Y=T.c*T.i,ae=Y+Q+16*Q;return t(T.c<=Q),T.V=s(ae),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+Y+Q,1)}function at(T,Q){var Y=T.C,ae=Q-Y,ue=T.V,me=T.Ba+T.c*Y;for(t(Q<=T.l.o);0<ae;){var pe=16<ae?16:ae,ve=T.l.ma,we=T.l.width,ke=we*pe,Me=ve.ca,nt=ve.tb+we*Y,et=T.Ta,Ge=T.Ua;fe(T,pe,ue,me),ba(et,Ge,Me,nt,ke),Ce(ve,Y,Y+pe,Me,nt,we),ae-=pe,ue+=pe*T.c,Y+=pe}t(Y==Q),T.C=T.Ma=Q}function Tt(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Yt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var T=[];return function Q(Y,ae,ue){for(var me=ue[ae],pe=0;pe<me&&(Y.push(ue.length>ae+1?[]:0),!(ue.length<ae+1));pe++)Q(Y[pe],ae+1,ue)}(T,0,[3,11]),T}()}function Kt(){this.jb=s(3),this.Wc=o([4,8],Ht),this.Xc=o([4,17],Ht)}function _r(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function an(){this.ld=this.La=this.dd=this.tc=0}function sn(){this.Na=this.la=0}function dn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ds(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new an),this.Y=0,this.ya=Array(new ds),this.aa=0,this.l=new js}function As(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ei(){this.cb=this.a=0,this.sc="",this.m=new ne,this.Od=new Tt,this.Kc=new Vt,this.ed=new _r,this.Qa=new Yt,this.Ic=this.$c=this.Aa=0,this.D=new bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ne),this.ia=0,this.pb=i(4,dn),this.Pa=new Kt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new As),this.Hd=0,this.rb=Array(new sn),this.sb=0,this.wa=Array(new an),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ds),this.L=this.aa=0,this.gd=o([4,2],an),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function js(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function vi(){var T=new ei;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,Os||(Os=xh)),T}function xa(T,Q,Y){return T.a==0&&(T.a=Q,T.sc=Y,T.cb=0),0}function ti(T,Q,Y){return 3<=Y&&T[Q+0]==157&&T[Q+1]==1&&T[Q+2]==42}function Id(T,Q){if(T==null)return 0;if(T.a=0,T.sc="OK",Q==null)return xa(T,2,"null VP8Io passed to VP8GetHeaders()");var Y=Q.data,ae=Q.w,ue=Q.ha;if(4>ue)return xa(T,7,"Truncated header.");var me=Y[ae+0]|Y[ae+1]<<8|Y[ae+2]<<16,pe=T.Od;if(pe.Rb=!(1&me),pe.td=me>>1&7,pe.yd=me>>4&1,pe.ub=me>>5,3<pe.td)return xa(T,3,"Incorrect keyframe parameters.");if(!pe.yd)return xa(T,4,"Frame not displayable.");ae+=3,ue-=3;var ve=T.Kc;if(pe.Rb){if(7>ue)return xa(T,7,"cannot parse picture header");if(!ti(Y,ae,ue))return xa(T,3,"Bad code word");ve.c=16383&(Y[ae+4]<<8|Y[ae+3]),ve.Td=Y[ae+4]>>6,ve.i=16383&(Y[ae+6]<<8|Y[ae+5]),ve.Ud=Y[ae+6]>>6,ae+=7,ue-=7,T.za=ve.c+15>>4,T.Ub=ve.i+15>>4,Q.width=ve.c,Q.height=ve.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,a((me=T.Pa).jb,0,255,me.jb.length),t((me=T.Qa)!=null),me.Cb=0,me.Bb=0,me.Fb=1,a(me.Zb,0,0,me.Zb.length),a(me.Lb,0,0,me.Lb)}if(pe.ub>ue)return xa(T,7,"bad partition length");X(me=T.m,Y,ae,pe.ub),ae+=pe.ub,ue-=pe.ub,pe.Rb&&(ve.Ld=oe(me),ve.Kd=oe(me)),ve=T.Qa;var we,ke=T.Pa;if(t(me!=null),t(ve!=null),ve.Cb=oe(me),ve.Cb){if(ve.Bb=oe(me),oe(me)){for(ve.Fb=oe(me),we=0;4>we;++we)ve.Zb[we]=oe(me)?Z(me,7):0;for(we=0;4>we;++we)ve.Lb[we]=oe(me)?Z(me,6):0}if(ve.Bb)for(we=0;3>we;++we)ke.jb[we]=oe(me)?K(me,8):255}else ve.Bb=0;if(me.Ka)return xa(T,3,"cannot parse segment header");if((ve=T.ed).zd=oe(me),ve.Tb=K(me,6),ve.wb=K(me,3),ve.Pc=oe(me),ve.Pc&&oe(me)){for(ke=0;4>ke;++ke)oe(me)&&(ve.vd[ke]=Z(me,6));for(ke=0;4>ke;++ke)oe(me)&&(ve.od[ke]=Z(me,6))}if(T.L=ve.Tb==0?0:ve.zd?1:2,me.Ka)return xa(T,3,"cannot parse filter header");var Me=ue;if(ue=we=ae,ae=we+Me,ve=Me,T.Xb=(1<<K(T.m,2))-1,Me<3*(ke=T.Xb))Y=7;else{for(we+=3*ke,ve-=3*ke,Me=0;Me<ke;++Me){var nt=Y[ue+0]|Y[ue+1]<<8|Y[ue+2]<<16;nt>ve&&(nt=ve),X(T.Jc[+Me],Y,we,nt),we+=nt,ve-=nt,ue+=3}X(T.Jc[+ke],Y,we,ve),Y=we<ae?0:5}if(Y!=0)return xa(T,Y,"cannot parse partitions");for(Y=K(we=T.m,7),ue=oe(we)?Z(we,4):0,ae=oe(we)?Z(we,4):0,ve=oe(we)?Z(we,4):0,ke=oe(we)?Z(we,4):0,we=oe(we)?Z(we,4):0,Me=T.Qa,nt=0;4>nt;++nt){if(Me.Cb){var et=Me.Zb[nt];Me.Fb||(et+=Y)}else{if(0<nt){T.pb[nt]=T.pb[0];continue}et=Y}var Ge=T.pb[nt];Ge.Sc[0]=Cm[Vn(et+ue,127)],Ge.Sc[1]=_m[Vn(et+0,127)],Ge.Eb[0]=2*Cm[Vn(et+ae,127)],Ge.Eb[1]=101581*_m[Vn(et+ve,127)]>>16,8>Ge.Eb[1]&&(Ge.Eb[1]=8),Ge.Qc[0]=Cm[Vn(et+ke,117)],Ge.Qc[1]=_m[Vn(et+we,127)],Ge.lc=et+we}if(!pe.Rb)return xa(T,4,"Not a key frame.");for(oe(me),pe=T.Pa,Y=0;4>Y;++Y){for(ue=0;8>ue;++ue)for(ae=0;3>ae;++ae)for(ve=0;11>ve;++ve)ke=ce(me,df[Y][ue][ae][ve])?K(me,8):tu[Y][ue][ae][ve],pe.Wc[Y][ue].Yb[ae][ve]=ke;for(ue=0;17>ue;++ue)pe.Xc[Y][ue]=pe.Wc[Y][A2[ue]]}return T.kc=oe(me),T.kc&&(T.Bd=K(me,8)),T.cb=1}function xh(T,Q,Y,ae,ue,me,pe){var ve=Q[ue].Yb[Y];for(Y=0;16>ue;++ue){if(!ce(T,ve[Y+0]))return ue;for(;!ce(T,ve[Y+1]);)if(ve=Q[++ue].Yb[0],Y=0,ue==16)return 16;var we=Q[ue+1].Yb;if(ce(T,ve[Y+2])){var ke=T,Me=0;if(ce(ke,(et=ve)[(nt=Y)+3]))if(ce(ke,et[nt+6])){for(ve=0,nt=2*(Me=ce(ke,et[nt+8]))+(et=ce(ke,et[nt+9+Me])),Me=0,et=Ka[nt];et[ve];++ve)Me+=Me+ce(ke,et[ve]);Me+=3+(8<<nt)}else ce(ke,et[nt+7])?(Me=7+2*ce(ke,165),Me+=ce(ke,145)):Me=5+ce(ke,159);else Me=ce(ke,et[nt+4])?3+ce(ke,et[nt+5]):2;ve=we[2]}else Me=1,ve=we[1];we=pe+Mn[ue],0>(ke=T).b&&Ae(ke);var nt,et=ke.b,Ge=(nt=ke.Ca>>1)-(ke.I>>et)>>31;--ke.b,ke.Ca+=Ge,ke.Ca|=1,ke.I-=(nt+1&Ge)<<et,me[we]=((Me^Ge)-Ge)*ae[(0<ue)+0]}return 16}function Uc(T){var Q=T.rb[T.sb-1];Q.la=0,Q.Na=0,a(T.zc,0,0,T.zc.length),T.ja=0}function qA(T,Q){if(T==null)return 0;if(Q==null)return xa(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Id(T,Q))return 0;if(t(T.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(T.L=0);var Y=ed[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=Q.v-Y>>4,T.zb=Q.j-Y>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=Q.o+15+Y>>4,T.Hb=Q.va+15+Y>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var ae=T.ed;for(Y=0;4>Y;++Y){var ue;if(T.Qa.Cb){var me=T.Qa.Lb[Y];T.Qa.Fb||(me+=ae.Tb)}else me=ae.Tb;for(ue=0;1>=ue;++ue){var pe=T.gd[Y][ue],ve=me;if(ae.Pc&&(ve+=ae.vd[0],ue&&(ve+=ae.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var we=ve;0<ae.wb&&(we=4<ae.wb?we>>2:we>>1)>9-ae.wb&&(we=9-ae.wb),1>we&&(we=1),pe.dd=we,pe.tc=2*ve+we,pe.ld=40<=ve?2:15<=ve?1:0}else pe.tc=0;pe.La=ue}}}Y=0}else xa(T,6,"Frame setup failed"),Y=T.a;if(Y=Y==0){if(Y){T.$c=0,0<T.Aa||(T.Ic=m2);e:{Y=T.Ic,ae=4*(we=T.za);var ke=32*we,Me=we+1,nt=0<T.L?we*(0<T.Aa?2:1):0,et=(T.Aa==2?2:1)*we;if((pe=ae+832+(ue=3*(16*Y+ed[T.L])/2*ke)+(me=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=pe)Y=0;else{if(pe>T.Vb){if(T.Vb=0,T.Ec=s(pe),T.Fc=0,T.Ec==null){Y=xa(T,1,"no memory during frame initialization.");break e}T.Vb=pe}pe=T.Ec,ve=T.Fc,T.Ac=pe,T.Bc=ve,ve+=ae,T.Gd=i(ke,As),T.Hd=0,T.rb=i(Me+1,sn),T.sb=1,T.wa=nt?i(nt,an):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=we),t(!0),T.oc=pe,T.pc=ve,ve+=832,T.ya=i(et,ds),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=we),T.R=16*we,T.B=8*we,we=(ke=ed[T.L])*T.R,ke=ke/2*T.B,T.sa=pe,T.ta=ve+we,T.qa=T.sa,T.ra=T.ta+16*Y*T.R+ke,T.Ha=T.qa,T.Ia=T.ra+8*Y*T.B+ke,T.$c=0,ve+=ue,T.mb=me?pe:null,T.nb=me?ve:null,t(ve+me<=T.Fc+T.Vb),Uc(T),a(T.Ac,T.Bc,0,ae),Y=1}}if(Y){if(Q.ka=0,Q.y=T.sa,Q.O=T.ta,Q.f=T.qa,Q.N=T.ra,Q.ea=T.Ha,Q.Vd=T.Ia,Q.fa=T.R,Q.Rc=T.B,Q.F=null,Q.J=0,!Gu){for(Y=-255;255>=Y;++Y)es[255+Y]=0>Y?-Y:Y;for(Y=-1020;1020>=Y;++Y)Il[1020+Y]=-128>Y?-128:127<Y?127:Y;for(Y=-112;112>=Y;++Y)Gd[112+Y]=-16>Y?-16:15<Y?15:Y;for(Y=-255;510>=Y;++Y)qd[255+Y]=0>Y?0:255<Y?255:Y;Gu=1}Jc=yo,lc=Hc,cc=wl,ms=Hn,ko=Vc,za=Qc,nf=Gc,Zc=sc,Sh=Dd,Vd=ZA,zd=Od,$d=Uu,af=Qu,Nh=qc,Kd=nl,Ku=Di,sf=hs,$a=wh,ro[0]=Fi,ro[1]=bh,ro[2]=_l,ro[3]=yh,ro[4]=wo,ro[5]=Sl,ro[6]=eo,ro[7]=Eo,ro[8]=ac,ro[9]=zc,Ju[0]=El,Ju[1]=XA,Ju[2]=tc,Ju[3]=Fd,Ju[4]=ca,Ju[5]=nc,Ju[6]=Cl,il[0]=Nl,il[1]=WA,il[2]=YA,il[3]=Co,il[4]=vn,il[5]=fs,il[6]=$c,Y=1}else Y=0}Y&&(Y=function(Ge,Nt){for(Ge.M=0;Ge.M<Ge.Va;++Ge.M){var ht,Ue=Ge.Jc[Ge.M&Ge.Xb],Ve=Ge.m,Et=Ge;for(ht=0;ht<Et.za;++ht){var kt=Ve,_t=Et,rr=_t.Ac,Wt=_t.Bc+4*ht,hr=_t.zc,Zt=_t.ya[_t.aa+ht];if(_t.Qa.Bb?Zt.$b=ce(kt,_t.Pa.jb[0])?2+ce(kt,_t.Pa.jb[2]):ce(kt,_t.Pa.jb[1]):Zt.$b=0,_t.kc&&(Zt.Ad=ce(kt,_t.Bd)),Zt.Za=!ce(kt,145)+0,Zt.Za){var On=Zt.Ob,zn=0;for(_t=0;4>_t;++_t){var An,on=hr[0+_t];for(An=0;4>An;++An){on=d1[rr[Wt+An]][on];for(var na=Xd[ce(kt,on[0])];0<na;)na=Xd[2*na+ce(kt,on[na])];on=-na,rr[Wt+An]=on}n(On,zn,rr,Wt,4),zn+=4,hr[0+_t]=on}}else on=ce(kt,156)?ce(kt,128)?1:3:ce(kt,163)?2:0,Zt.Ob[0]=on,a(rr,Wt,on,4),a(hr,0,on,4);Zt.Dd=ce(kt,142)?ce(kt,114)?ce(kt,183)?1:3:2:0}if(Et.m.Ka)return xa(Ge,7,"Premature end-of-partition0 encountered.");for(;Ge.ja<Ge.za;++Ge.ja){if(Et=Ue,kt=(Ve=Ge).rb[Ve.sb-1],rr=Ve.rb[Ve.sb+Ve.ja],ht=Ve.ya[Ve.aa+Ve.ja],Wt=Ve.kc?ht.Ad:0)kt.la=rr.la=0,ht.Za||(kt.Na=rr.Na=0),ht.Hc=0,ht.Gc=0,ht.ia=0;else{var $n,qr;if(kt=rr,rr=Et,Wt=Ve.Pa.Xc,hr=Ve.ya[Ve.aa+Ve.ja],Zt=Ve.pb[hr.$b],_t=hr.ad,On=0,zn=Ve.rb[Ve.sb-1],on=An=0,a(_t,On,0,384),hr.Za)var ua=0,Sr=Wt[3];else{na=s(16);var Lr=kt.Na+zn.Na;if(Lr=Os(rr,Wt[1],Lr,Zt.Eb,0,na,0),kt.Na=zn.Na=(0<Lr)+0,1<Lr)Jc(na,0,_t,On);else{var Fn=na[0]+3>>3;for(na=0;256>na;na+=16)_t[On+na]=Fn}ua=1,Sr=Wt[0]}var Dn=15&kt.la,si=15&zn.la;for(na=0;4>na;++na){var Ps=1&si;for(Fn=qr=0;4>Fn;++Fn)Dn=Dn>>1|(Ps=(Lr=Os(rr,Sr,Lr=Ps+(1&Dn),Zt.Sc,ua,_t,On))>ua)<<7,qr=qr<<2|(3<Lr?3:1<Lr?2:_t[On+0]!=0),On+=16;Dn>>=4,si=si>>1|Ps<<7,An=(An<<8|qr)>>>0}for(Sr=Dn,ua=si>>4,$n=0;4>$n;$n+=2){for(qr=0,Dn=kt.la>>4+$n,si=zn.la>>4+$n,na=0;2>na;++na){for(Ps=1&si,Fn=0;2>Fn;++Fn)Lr=Ps+(1&Dn),Dn=Dn>>1|(Ps=0<(Lr=Os(rr,Wt[2],Lr,Zt.Qc,0,_t,On)))<<3,qr=qr<<2|(3<Lr?3:1<Lr?2:_t[On+0]!=0),On+=16;Dn>>=2,si=si>>1|Ps<<5}on|=qr<<4*$n,Sr|=Dn<<4<<$n,ua|=(240&si)<<$n}kt.la=Sr,zn.la=ua,hr.Hc=An,hr.Gc=on,hr.ia=43690&on?0:Zt.ia,Wt=!(An|on)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[ht.$b][ht.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Wt),Et.Ka)return xa(Ge,7,"Premature end-of-file encountered.")}if(Uc(Ge),Ve=Nt,Et=1,ht=(Ue=Ge).D,kt=0<Ue.L&&Ue.M>=Ue.zb&&Ue.M<=Ue.Va,Ue.Aa==0)e:{if(ht.M=Ue.M,ht.uc=kt,_o(Ue,ht),Et=1,ht=(qr=Ue.D).Nb,kt=(on=ed[Ue.L])*Ue.R,rr=on/2*Ue.B,na=16*ht*Ue.R,Fn=8*ht*Ue.B,Wt=Ue.sa,hr=Ue.ta-kt+na,Zt=Ue.qa,_t=Ue.ra-rr+Fn,On=Ue.Ha,zn=Ue.Ia-rr+Fn,si=(Dn=qr.M)==0,An=Dn>=Ue.Va-1,Ue.Aa==2&&_o(Ue,qr),qr.uc)for(Ps=(Lr=Ue).D.M,t(Lr.D.uc),qr=Lr.yb;qr<Lr.Hb;++qr){ua=qr,Sr=Ps;var ts=(rs=(Ia=Lr).D).Nb;$n=Ia.R;var rs=rs.wa[rs.Y+ua],ps=Ia.sa,Ol=Ia.ta+16*ts*$n+16*ua,Kn=rs.dd,gs=rs.tc;if(gs!=0)if(t(3<=gs),Ia.L==1)0<ua&&Ku(ps,Ol,$n,gs+4),rs.La&&$a(ps,Ol,$n,gs),0<Sr&&Kd(ps,Ol,$n,gs+4),rs.La&&sf(ps,Ol,$n,gs);else{var uc=Ia.B,Zd=Ia.qa,ff=Ia.ra+8*ts*uc+8*ua,eA=Ia.Ha,Ia=Ia.Ia+8*ts*uc+8*ua;ts=rs.ld,0<ua&&(Zc(ps,Ol,$n,gs+4,Kn,ts),Vd(Zd,ff,eA,Ia,uc,gs+4,Kn,ts)),rs.La&&($d(ps,Ol,$n,gs,Kn,ts),Nh(Zd,ff,eA,Ia,uc,gs,Kn,ts)),0<Sr&&(nf(ps,Ol,$n,gs+4,Kn,ts),Sh(Zd,ff,eA,Ia,uc,gs+4,Kn,ts)),rs.La&&(zd(ps,Ol,$n,gs,Kn,ts),af(Zd,ff,eA,Ia,uc,gs,Kn,ts))}}if(Ue.ia&&alert("todo:DitherRow"),Ve.put!=null){if(qr=16*Dn,Dn=16*(Dn+1),si?(Ve.y=Ue.sa,Ve.O=Ue.ta+na,Ve.f=Ue.qa,Ve.N=Ue.ra+Fn,Ve.ea=Ue.Ha,Ve.W=Ue.Ia+Fn):(qr-=on,Ve.y=Wt,Ve.O=hr,Ve.f=Zt,Ve.N=_t,Ve.ea=On,Ve.W=zn),An||(Dn-=on),Dn>Ve.o&&(Dn=Ve.o),Ve.F=null,Ve.J=null,Ue.Fa!=null&&0<Ue.Fa.length&&qr<Dn&&(Ve.J=Pd(Ue,Ve,qr,Dn-qr),Ve.F=Ue.mb,Ve.F==null&&Ve.F.length==0)){Et=xa(Ue,3,"Could not decode alpha data.");break e}qr<Ve.j&&(on=Ve.j-qr,qr=Ve.j,t(!(1&on)),Ve.O+=Ue.R*on,Ve.N+=Ue.B*(on>>1),Ve.W+=Ue.B*(on>>1),Ve.F!=null&&(Ve.J+=Ve.width*on)),qr<Dn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=qr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Dn-qr,Et=Ve.put(Ve))}ht+1!=Ue.Ic||An||(n(Ue.sa,Ue.ta-kt,Wt,hr+16*Ue.R,kt),n(Ue.qa,Ue.ra-rr,Zt,_t+8*Ue.B,rr),n(Ue.Ha,Ue.Ia-rr,On,zn+8*Ue.B,rr))}if(!Et)return xa(Ge,6,"Output aborted.")}return 1}(T,Q)),Q.bc!=null&&Q.bc(Q),Y&=1}return Y?(T.cb=0,Y):0}function xi(T,Q,Y,ae,ue){ue=T[Q+Y+32*ae]+(ue>>3),T[Q+Y+32*ae]=-256&ue?0>ue?0:255:ue}function jd(T,Q,Y,ae,ue,me){xi(T,Q,0,Y,ae+ue),xi(T,Q,1,Y,ae+me),xi(T,Q,2,Y,ae-me),xi(T,Q,3,Y,ae-ue)}function jn(T){return(20091*T>>16)+T}function bi(T,Q,Y,ae){var ue,me=0,pe=s(16);for(ue=0;4>ue;++ue){var ve=T[Q+0]+T[Q+8],we=T[Q+0]-T[Q+8],ke=(35468*T[Q+4]>>16)-jn(T[Q+12]),Me=jn(T[Q+4])+(35468*T[Q+12]>>16);pe[me+0]=ve+Me,pe[me+1]=we+ke,pe[me+2]=we-ke,pe[me+3]=ve-Me,me+=4,Q++}for(ue=me=0;4>ue;++ue)ve=(T=pe[me+0]+4)+pe[me+8],we=T-pe[me+8],ke=(35468*pe[me+4]>>16)-jn(pe[me+12]),xi(Y,ae,0,0,ve+(Me=jn(pe[me+4])+(35468*pe[me+12]>>16))),xi(Y,ae,1,0,we+ke),xi(Y,ae,2,0,we-ke),xi(Y,ae,3,0,ve-Me),me++,ae+=32}function Qc(T,Q,Y,ae){var ue=T[Q+0]+4,me=35468*T[Q+4]>>16,pe=jn(T[Q+4]),ve=35468*T[Q+1]>>16;jd(Y,ae,0,ue+pe,T=jn(T[Q+1]),ve),jd(Y,ae,1,ue+me,T,ve),jd(Y,ae,2,ue-me,T,ve),jd(Y,ae,3,ue-pe,T,ve)}function Hc(T,Q,Y,ae,ue){bi(T,Q,Y,ae),ue&&bi(T,Q+16,Y,ae+4)}function wl(T,Q,Y,ae){lc(T,Q+0,Y,ae,1),lc(T,Q+32,Y,ae+128,1)}function Hn(T,Q,Y,ae){var ue;for(T=T[Q+0]+4,ue=0;4>ue;++ue)for(Q=0;4>Q;++Q)xi(Y,ae,Q,ue,T)}function Vc(T,Q,Y,ae){T[Q+0]&&ms(T,Q+0,Y,ae),T[Q+16]&&ms(T,Q+16,Y,ae+4),T[Q+32]&&ms(T,Q+32,Y,ae+128),T[Q+48]&&ms(T,Q+48,Y,ae+128+4)}function yo(T,Q,Y,ae){var ue,me=s(16);for(ue=0;4>ue;++ue){var pe=T[Q+0+ue]+T[Q+12+ue],ve=T[Q+4+ue]+T[Q+8+ue],we=T[Q+4+ue]-T[Q+8+ue],ke=T[Q+0+ue]-T[Q+12+ue];me[0+ue]=pe+ve,me[8+ue]=pe-ve,me[4+ue]=ke+we,me[12+ue]=ke-we}for(ue=0;4>ue;++ue)pe=(T=me[0+4*ue]+3)+me[3+4*ue],ve=me[1+4*ue]+me[2+4*ue],we=me[1+4*ue]-me[2+4*ue],ke=T-me[3+4*ue],Y[ae+0]=pe+ve>>3,Y[ae+16]=ke+we>>3,Y[ae+32]=pe-ve>>3,Y[ae+48]=ke-we>>3,ae+=64}function ec(T,Q,Y){var ae,ue=Q-32,me=ni,pe=255-T[ue-1];for(ae=0;ae<Y;++ae){var ve,we=me,ke=pe+T[Q-1];for(ve=0;ve<Y;++ve)T[Q+ve]=we[ke+T[ue+ve]];Q+=32}}function bh(T,Q){ec(T,Q,4)}function WA(T,Q){ec(T,Q,8)}function XA(T,Q){ec(T,Q,16)}function tc(T,Q){var Y;for(Y=0;16>Y;++Y)n(T,Q+32*Y,T,Q-32,16)}function Fd(T,Q){var Y;for(Y=16;0<Y;--Y)a(T,Q,T[Q-1],16),Q+=32}function rc(T,Q,Y){var ae;for(ae=0;16>ae;++ae)a(Q,Y+32*ae,T,16)}function El(T,Q){var Y,ae=16;for(Y=0;16>Y;++Y)ae+=T[Q-1+32*Y]+T[Q+Y-32];rc(ae>>5,T,Q)}function ca(T,Q){var Y,ae=8;for(Y=0;16>Y;++Y)ae+=T[Q-1+32*Y];rc(ae>>4,T,Q)}function nc(T,Q){var Y,ae=8;for(Y=0;16>Y;++Y)ae+=T[Q+Y-32];rc(ae>>4,T,Q)}function Cl(T,Q){rc(128,T,Q)}function Br(T,Q,Y){return T+2*Q+Y+2>>2}function _l(T,Q){var Y,ae=Q-32;for(ae=new Uint8Array([Br(T[ae-1],T[ae+0],T[ae+1]),Br(T[ae+0],T[ae+1],T[ae+2]),Br(T[ae+1],T[ae+2],T[ae+3]),Br(T[ae+2],T[ae+3],T[ae+4])]),Y=0;4>Y;++Y)n(T,Q+32*Y,ae,0,ae.length)}function yh(T,Q){var Y=T[Q-1],ae=T[Q-1+32],ue=T[Q-1+64],me=T[Q-1+96];ge(T,Q+0,16843009*Br(T[Q-1-32],Y,ae)),ge(T,Q+32,16843009*Br(Y,ae,ue)),ge(T,Q+64,16843009*Br(ae,ue,me)),ge(T,Q+96,16843009*Br(ue,me,me))}function Fi(T,Q){var Y,ae=4;for(Y=0;4>Y;++Y)ae+=T[Q+Y-32]+T[Q-1+32*Y];for(ae>>=3,Y=0;4>Y;++Y)a(T,Q+32*Y,ae,4)}function wo(T,Q){var Y=T[Q-1+0],ae=T[Q-1+32],ue=T[Q-1+64],me=T[Q-1-32],pe=T[Q+0-32],ve=T[Q+1-32],we=T[Q+2-32],ke=T[Q+3-32];T[Q+0+96]=Br(ae,ue,T[Q-1+96]),T[Q+1+96]=T[Q+0+64]=Br(Y,ae,ue),T[Q+2+96]=T[Q+1+64]=T[Q+0+32]=Br(me,Y,ae),T[Q+3+96]=T[Q+2+64]=T[Q+1+32]=T[Q+0+0]=Br(pe,me,Y),T[Q+3+64]=T[Q+2+32]=T[Q+1+0]=Br(ve,pe,me),T[Q+3+32]=T[Q+2+0]=Br(we,ve,pe),T[Q+3+0]=Br(ke,we,ve)}function eo(T,Q){var Y=T[Q+1-32],ae=T[Q+2-32],ue=T[Q+3-32],me=T[Q+4-32],pe=T[Q+5-32],ve=T[Q+6-32],we=T[Q+7-32];T[Q+0+0]=Br(T[Q+0-32],Y,ae),T[Q+1+0]=T[Q+0+32]=Br(Y,ae,ue),T[Q+2+0]=T[Q+1+32]=T[Q+0+64]=Br(ae,ue,me),T[Q+3+0]=T[Q+2+32]=T[Q+1+64]=T[Q+0+96]=Br(ue,me,pe),T[Q+3+32]=T[Q+2+64]=T[Q+1+96]=Br(me,pe,ve),T[Q+3+64]=T[Q+2+96]=Br(pe,ve,we),T[Q+3+96]=Br(ve,we,we)}function Sl(T,Q){var Y=T[Q-1+0],ae=T[Q-1+32],ue=T[Q-1+64],me=T[Q-1-32],pe=T[Q+0-32],ve=T[Q+1-32],we=T[Q+2-32],ke=T[Q+3-32];T[Q+0+0]=T[Q+1+64]=me+pe+1>>1,T[Q+1+0]=T[Q+2+64]=pe+ve+1>>1,T[Q+2+0]=T[Q+3+64]=ve+we+1>>1,T[Q+3+0]=we+ke+1>>1,T[Q+0+96]=Br(ue,ae,Y),T[Q+0+64]=Br(ae,Y,me),T[Q+0+32]=T[Q+1+96]=Br(Y,me,pe),T[Q+1+32]=T[Q+2+96]=Br(me,pe,ve),T[Q+2+32]=T[Q+3+96]=Br(pe,ve,we),T[Q+3+32]=Br(ve,we,ke)}function Eo(T,Q){var Y=T[Q+0-32],ae=T[Q+1-32],ue=T[Q+2-32],me=T[Q+3-32],pe=T[Q+4-32],ve=T[Q+5-32],we=T[Q+6-32],ke=T[Q+7-32];T[Q+0+0]=Y+ae+1>>1,T[Q+1+0]=T[Q+0+64]=ae+ue+1>>1,T[Q+2+0]=T[Q+1+64]=ue+me+1>>1,T[Q+3+0]=T[Q+2+64]=me+pe+1>>1,T[Q+0+32]=Br(Y,ae,ue),T[Q+1+32]=T[Q+0+96]=Br(ae,ue,me),T[Q+2+32]=T[Q+1+96]=Br(ue,me,pe),T[Q+3+32]=T[Q+2+96]=Br(me,pe,ve),T[Q+3+64]=Br(pe,ve,we),T[Q+3+96]=Br(ve,we,ke)}function zc(T,Q){var Y=T[Q-1+0],ae=T[Q-1+32],ue=T[Q-1+64],me=T[Q-1+96];T[Q+0+0]=Y+ae+1>>1,T[Q+2+0]=T[Q+0+32]=ae+ue+1>>1,T[Q+2+32]=T[Q+0+64]=ue+me+1>>1,T[Q+1+0]=Br(Y,ae,ue),T[Q+3+0]=T[Q+1+32]=Br(ae,ue,me),T[Q+3+32]=T[Q+1+64]=Br(ue,me,me),T[Q+3+64]=T[Q+2+64]=T[Q+0+96]=T[Q+1+96]=T[Q+2+96]=T[Q+3+96]=me}function ac(T,Q){var Y=T[Q-1+0],ae=T[Q-1+32],ue=T[Q-1+64],me=T[Q-1+96],pe=T[Q-1-32],ve=T[Q+0-32],we=T[Q+1-32],ke=T[Q+2-32];T[Q+0+0]=T[Q+2+32]=Y+pe+1>>1,T[Q+0+32]=T[Q+2+64]=ae+Y+1>>1,T[Q+0+64]=T[Q+2+96]=ue+ae+1>>1,T[Q+0+96]=me+ue+1>>1,T[Q+3+0]=Br(ve,we,ke),T[Q+2+0]=Br(pe,ve,we),T[Q+1+0]=T[Q+3+32]=Br(Y,pe,ve),T[Q+1+32]=T[Q+3+64]=Br(ae,Y,pe),T[Q+1+64]=T[Q+3+96]=Br(ue,ae,Y),T[Q+1+96]=Br(me,ue,ae)}function YA(T,Q){var Y;for(Y=0;8>Y;++Y)n(T,Q+32*Y,T,Q-32,8)}function Co(T,Q){var Y;for(Y=0;8>Y;++Y)a(T,Q,T[Q-1],8),Q+=32}function Oi(T,Q,Y){var ae;for(ae=0;8>ae;++ae)a(Q,Y+32*ae,T,8)}function Nl(T,Q){var Y,ae=8;for(Y=0;8>Y;++Y)ae+=T[Q+Y-32]+T[Q-1+32*Y];Oi(ae>>4,T,Q)}function fs(T,Q){var Y,ae=4;for(Y=0;8>Y;++Y)ae+=T[Q+Y-32];Oi(ae>>3,T,Q)}function vn(T,Q){var Y,ae=4;for(Y=0;8>Y;++Y)ae+=T[Q-1+32*Y];Oi(ae>>3,T,Q)}function $c(T,Q){Oi(128,T,Q)}function kl(T,Q,Y){var ae=T[Q-Y],ue=T[Q+0],me=3*(ue-ae)+ug[1020+T[Q-2*Y]-T[Q+Y]],pe=of[112+(me+4>>3)];T[Q-Y]=ni[255+ae+of[112+(me+3>>3)]],T[Q+0]=ni[255+ue-pe]}function JA(T,Q,Y,ae){var ue=T[Q+0],me=T[Q+Y];return jl[255+T[Q-2*Y]-T[Q-Y]]>ae||jl[255+me-ue]>ae}function Lu(T,Q,Y,ae){return 4*jl[255+T[Q-Y]-T[Q+0]]+jl[255+T[Q-2*Y]-T[Q+Y]]<=ae}function Mu(T,Q,Y,ae,ue){var me=T[Q-3*Y],pe=T[Q-2*Y],ve=T[Q-Y],we=T[Q+0],ke=T[Q+Y],Me=T[Q+2*Y],nt=T[Q+3*Y];return 4*jl[255+ve-we]+jl[255+pe-ke]>ae?0:jl[255+T[Q-4*Y]-me]<=ue&&jl[255+me-pe]<=ue&&jl[255+pe-ve]<=ue&&jl[255+nt-Me]<=ue&&jl[255+Me-ke]<=ue&&jl[255+ke-we]<=ue}function nl(T,Q,Y,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)Lu(T,Q+ae,Y,ue)&&kl(T,Q+ae,Y)}function Di(T,Q,Y,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)Lu(T,Q+ae*Y,1,ue)&&kl(T,Q+ae*Y,1)}function hs(T,Q,Y,ae){var ue;for(ue=3;0<ue;--ue)nl(T,Q+=4*Y,Y,ae)}function wh(T,Q,Y,ae){var ue;for(ue=3;0<ue;--ue)Di(T,Q+=4,Y,ae)}function Kc(T,Q,Y,ae,ue,me,pe,ve){for(me=2*me+1;0<ue--;){if(Mu(T,Q,Y,me,pe))if(JA(T,Q,Y,ve))kl(T,Q,Y);else{var we=T,ke=Q,Me=Y,nt=we[ke-2*Me],et=we[ke-Me],Ge=we[ke+0],Nt=we[ke+Me],ht=we[ke+2*Me],Ue=27*(Et=ug[1020+3*(Ge-et)+ug[1020+nt-Nt]])+63>>7,Ve=18*Et+63>>7,Et=9*Et+63>>7;we[ke-3*Me]=ni[255+we[ke-3*Me]+Et],we[ke-2*Me]=ni[255+nt+Ve],we[ke-Me]=ni[255+et+Ue],we[ke+0]=ni[255+Ge-Ue],we[ke+Me]=ni[255+Nt-Ve],we[ke+2*Me]=ni[255+ht-Et]}Q+=ae}}function yi(T,Q,Y,ae,ue,me,pe,ve){for(me=2*me+1;0<ue--;){if(Mu(T,Q,Y,me,pe))if(JA(T,Q,Y,ve))kl(T,Q,Y);else{var we=T,ke=Q,Me=Y,nt=we[ke-Me],et=we[ke+0],Ge=we[ke+Me],Nt=of[112+((ht=3*(et-nt))+4>>3)],ht=of[112+(ht+3>>3)],Ue=Nt+1>>1;we[ke-2*Me]=ni[255+we[ke-2*Me]+Ue],we[ke-Me]=ni[255+nt+ht],we[ke+0]=ni[255+et-Nt],we[ke+Me]=ni[255+Ge-Ue]}Q+=ae}}function Gc(T,Q,Y,ae,ue,me){Kc(T,Q,Y,1,16,ae,ue,me)}function sc(T,Q,Y,ae,ue,me){Kc(T,Q,1,Y,16,ae,ue,me)}function Od(T,Q,Y,ae,ue,me){var pe;for(pe=3;0<pe;--pe)yi(T,Q+=4*Y,Y,1,16,ae,ue,me)}function Uu(T,Q,Y,ae,ue,me){var pe;for(pe=3;0<pe;--pe)yi(T,Q+=4,1,Y,16,ae,ue,me)}function Dd(T,Q,Y,ae,ue,me,pe,ve){Kc(T,Q,ue,1,8,me,pe,ve),Kc(Y,ae,ue,1,8,me,pe,ve)}function ZA(T,Q,Y,ae,ue,me,pe,ve){Kc(T,Q,1,ue,8,me,pe,ve),Kc(Y,ae,1,ue,8,me,pe,ve)}function Qu(T,Q,Y,ae,ue,me,pe,ve){yi(T,Q+4*ue,ue,1,8,me,pe,ve),yi(Y,ae+4*ue,ue,1,8,me,pe,ve)}function qc(T,Q,Y,ae,ue,me,pe,ve){yi(T,Q+4,1,ue,8,me,pe,ve),yi(Y,ae+4,1,ue,8,me,pe,ve)}function Hu(){this.ba=new Je,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Rd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wc(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new P,this.yc=new j}function Eh(){this.xb=this.a=0,this.l=new js,this.ca=new Je,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wc,this.ab=0,this.gc=i(4,Vu),this.Oc=0}function ic(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new js,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xc(T,Q,Y,ae,ue,me,pe){for(T=T==null?0:T[Q+0],Q=0;Q<pe;++Q)ue[me+Q]=T+Y[ae+Q]&255,T=ue[me+Q]}function zu(T,Q,Y,ae,ue,me,pe){var ve;if(T==null)Xc(null,null,Y,ae,ue,me,pe);else for(ve=0;ve<pe;++ve)ue[me+ve]=T[Q+ve]+Y[ae+ve]&255}function Ri(T,Q,Y,ae,ue,me,pe){if(T==null)Xc(null,null,Y,ae,ue,me,pe);else{var ve,we=T[Q+0],ke=we,Me=we;for(ve=0;ve<pe;++ve)ke=Me+(we=T[Q+ve])-ke,Me=Y[ae+ve]+(-256&ke?0>ke?0:255:ke)&255,ke=we,ue[me+ve]=Me}}function Pd(T,Q,Y,ae){var ue=Q.width,me=Q.o;if(t(T!=null&&Q!=null),0>Y||0>=ae||Y+ae>me)return null;if(!T.Cc){if(T.ga==null){var pe;if(T.ga=new ic,(pe=T.ga==null)||(pe=Q.width*Q.o,t(T.Gb.length==0),T.Gb=s(pe),T.Uc=0,T.Gb==null?pe=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,pe=1),pe=!pe),!pe){pe=T.ga;var ve=T.Fa,we=T.P,ke=T.qc,Me=T.mb,nt=T.nb,et=we+1,Ge=ke-1,Nt=pe.l;if(t(ve!=null&&Me!=null&&Q!=null),ru[0]=null,ru[1]=Xc,ru[2]=zu,ru[3]=Ri,pe.ca=Me,pe.tb=nt,pe.c=Q.width,pe.i=Q.height,t(0<pe.c&&0<pe.i),1>=ke)Q=0;else if(pe.$a=ve[we+0]>>0&3,pe.Z=ve[we+0]>>2&3,pe.Lc=ve[we+0]>>4&3,we=ve[we+0]>>6&3,0>pe.$a||1<pe.$a||4<=pe.Z||1<pe.Lc||we)Q=0;else if(Nt.put=pn,Nt.ac=Xr,Nt.bc=gn,Nt.ma=pe,Nt.width=Q.width,Nt.height=Q.height,Nt.Da=Q.Da,Nt.v=Q.v,Nt.va=Q.va,Nt.j=Q.j,Nt.o=Q.o,pe.$a)e:{t(pe.$a==1),Q=ut();t:for(;;){if(Q==null){Q=0;break e}if(t(pe!=null),pe.mc=Q,Q.c=pe.c,Q.i=pe.i,Q.l=pe.l,Q.l.ma=pe,Q.l.width=pe.c,Q.l.height=pe.i,Q.a=0,H(Q.m,ve,et,Ge),!$e(pe.c,pe.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Ee(Q.s)?(pe.ic=1,ve=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=s(ve),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(pe.ic=0,Q=tt(Q,pe.c)),!Q))break t;Q=1;break e}pe.mc=null,Q=0}else Q=Ge>=pe.c*pe.i;pe=!Q}if(pe)return null;T.ga.Lc!=1?T.Ga=0:ae=me-Y}t(T.ga!=null),t(Y+ae<=me);e:{if(Q=(ve=T.ga).c,me=ve.l.o,ve.$a==0){if(et=T.rc,Ge=T.Vc,Nt=T.Fa,we=T.P+1+Y*Q,ke=T.mb,Me=T.nb+Y*Q,t(we<=T.P+T.qc),ve.Z!=0)for(t(ru[ve.Z]!=null),pe=0;pe<ae;++pe)ru[ve.Z](et,Ge,Nt,we,ke,Me,Q),et=ke,Ge=Me,Me+=Q,we+=Q;else for(pe=0;pe<ae;++pe)n(ke,Me,Nt,we,Q),et=ke,Ge=Me,Me+=Q,we+=Q;T.rc=et,T.Vc=Ge}else{if(t(ve.mc!=null),Q=Y+ae,t((pe=ve.mc)!=null),t(Q<=pe.i),pe.C>=Q)Q=1;else if(ve.ic||Ke(),ve.ic){ve=pe.V,et=pe.Ba,Ge=pe.c;var ht=pe.i,Ue=(Nt=1,we=pe.$/Ge,ke=pe.$%Ge,Me=pe.m,nt=pe.s,pe.$),Ve=Ge*ht,Et=Ge*Q,kt=nt.wc,_t=Ue<Et?ta(nt,ke,we):null;t(Ue<=Ve),t(Q<=ht),t(Ee(nt));t:for(;;){for(;!Me.h&&Ue<Et;){if(ke&kt||(_t=ta(nt,ke,we)),t(_t!=null),ie(Me),256>(ht=cr(_t.G[0],_t.H[0],Me)))ve[et+Ue]=ht,++Ue,++ke>=Ge&&(ke=0,++we<=Q&&!(we%16)&&Ne(pe,we));else{if(!(280>ht)){Nt=0;break t}ht=tn(ht-256,Me);var rr,Wt=cr(_t.G[4],_t.H[4],Me);if(ie(Me),!(Ue>=(Wt=en(Ge,Wt=tn(Wt,Me)))&&Ve-Ue>=ht)){Nt=0;break t}for(rr=0;rr<ht;++rr)ve[et+Ue+rr]=ve[et+Ue+rr-Wt];for(Ue+=ht,ke+=ht;ke>=Ge;)ke-=Ge,++we<=Q&&!(we%16)&&Ne(pe,we);Ue<Et&&ke&kt&&(_t=ta(nt,ke,we))}t(Me.h==J(Me))}Ne(pe,we>Q?Q:we);break t}!Nt||Me.h&&Ue<Ve?(Nt=0,pe.a=Me.h?5:3):pe.$=Ue,Q=Nt}else Q=Te(pe,pe.V,pe.Ba,pe.c,pe.i,Q,at);if(!Q){ae=0;break e}}Y+ae>=me&&(T.Cc=1),ae=1}if(!ae)return null;if(T.Cc&&((ae=T.ga)!=null&&(ae.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+Y*ue}function G(T,Q,Y,ae,ue,me){for(;0<ue--;){var pe,ve=T,we=Q+(Y?1:0),ke=T,Me=Q+(Y?0:3);for(pe=0;pe<ae;++pe){var nt=ke[Me+4*pe];nt!=255&&(nt*=32897,ve[we+4*pe+0]=ve[we+4*pe+0]*nt>>23,ve[we+4*pe+1]=ve[we+4*pe+1]*nt>>23,ve[we+4*pe+2]=ve[we+4*pe+2]*nt>>23)}Q+=me}}function de(T,Q,Y,ae,ue){for(;0<ae--;){var me;for(me=0;me<Y;++me){var pe=T[Q+2*me+0],ve=15&(ke=T[Q+2*me+1]),we=4369*ve,ke=(240&ke|ke>>4)*we>>16;T[Q+2*me+0]=(240&pe|pe>>4)*we>>16&240|(15&pe|pe<<4)*we>>16>>4&15,T[Q+2*me+1]=240&ke|ve}Q+=ue}}function Fe(T,Q,Y,ae,ue,me,pe,ve){var we,ke,Me=255;for(ke=0;ke<ue;++ke){for(we=0;we<ae;++we){var nt=T[Q+we];me[pe+4*we]=nt,Me&=nt}Q+=Y,pe+=ve}return Me!=255}function Le(T,Q,Y,ae,ue){var me;for(me=0;me<ue;++me)Y[ae+me]=T[Q+me]>>8}function Ke(){al=G,fn=de,hn=Fe,ba=Le}function xt(T,Q,Y){C[T]=function(ae,ue,me,pe,ve,we,ke,Me,nt,et,Ge,Nt,ht,Ue,Ve,Et,kt){var _t,rr=kt-1>>1,Wt=ve[we+0]|ke[Me+0]<<16,hr=nt[et+0]|Ge[Nt+0]<<16;t(ae!=null);var Zt=3*Wt+hr+131074>>2;for(Q(ae[ue+0],255&Zt,Zt>>16,ht,Ue),me!=null&&(Zt=3*hr+Wt+131074>>2,Q(me[pe+0],255&Zt,Zt>>16,Ve,Et)),_t=1;_t<=rr;++_t){var On=ve[we+_t]|ke[Me+_t]<<16,zn=nt[et+_t]|Ge[Nt+_t]<<16,An=Wt+On+hr+zn+524296,on=An+2*(On+hr)>>3;Zt=on+Wt>>1,Wt=(An=An+2*(Wt+zn)>>3)+On>>1,Q(ae[ue+2*_t-1],255&Zt,Zt>>16,ht,Ue+(2*_t-1)*Y),Q(ae[ue+2*_t-0],255&Wt,Wt>>16,ht,Ue+(2*_t-0)*Y),me!=null&&(Zt=An+hr>>1,Wt=on+zn>>1,Q(me[pe+2*_t-1],255&Zt,Zt>>16,Ve,Et+(2*_t-1)*Y),Q(me[pe+2*_t+0],255&Wt,Wt>>16,Ve,Et+(2*_t+0)*Y)),Wt=On,hr=zn}1&kt||(Zt=3*Wt+hr+131074>>2,Q(ae[ue+kt-1],255&Zt,Zt>>16,ht,Ue+(kt-1)*Y),me!=null&&(Zt=3*hr+Wt+131074>>2,Q(me[pe+kt-1],255&Zt,Zt>>16,Ve,Et+(kt-1)*Y)))}}function Pt(){ai[Pi]=Zu,ai[kh]=nu,ai[eu]=Yd,ai[wm]=fg,ai[lf]=hg,ai[qu]=Ih,ai[dg]=mg,ai[Em]=nu,ai[Wd]=fg,ai[Wu]=hg,ai[Bh]=Ih}function Jt(T){return T&-16384?0>T?0:255:T>>Q4}function D(T,Q){return Jt((19077*T>>8)+(26149*Q>>8)-14234)}function ee(T,Q,Y){return Jt((19077*T>>8)-(6419*Q>>8)-(13320*Y>>8)+8708)}function se(T,Q){return Jt((19077*T>>8)+(33050*Q>>8)-17685)}function xe(T,Q,Y,ae,ue){ae[ue+0]=D(T,Y),ae[ue+1]=ee(T,Q,Y),ae[ue+2]=se(T,Q)}function ze(T,Q,Y,ae,ue){ae[ue+0]=se(T,Q),ae[ue+1]=ee(T,Q,Y),ae[ue+2]=D(T,Y)}function st(T,Q,Y,ae,ue){var me=ee(T,Q,Y);Q=me<<3&224|se(T,Q)>>3,ae[ue+0]=248&D(T,Y)|me>>5,ae[ue+1]=Q}function Mt(T,Q,Y,ae,ue){var me=240&se(T,Q)|15;ae[ue+0]=240&D(T,Y)|ee(T,Q,Y)>>4,ae[ue+1]=me}function Tr(T,Q,Y,ae,ue){ae[ue+0]=255,xe(T,Q,Y,ae,ue+1)}function xn(T,Q,Y,ae,ue){ze(T,Q,Y,ae,ue),ae[ue+3]=255}function Gr(T,Q,Y,ae,ue){xe(T,Q,Y,ae,ue),ae[ue+3]=255}function Vn(T,Q){return 0>T?0:T>Q?Q:T}function ra(T,Q,Y){C[T]=function(ae,ue,me,pe,ve,we,ke,Me,nt){for(var et=Me+(-2&nt)*Y;Me!=et;)Q(ae[ue+0],me[pe+0],ve[we+0],ke,Me),Q(ae[ue+1],me[pe+0],ve[we+0],ke,Me+Y),ue+=2,++pe,++we,Me+=2*Y;1&nt&&Q(ae[ue+0],me[pe+0],ve[we+0],ke,Me)}}function Bl(T,Q,Y){return Y==0?T==0?Q==0?6:5:Q==0?4:0:Y}function Za(T,Q,Y,ae,ue){switch(T>>>30){case 3:lc(Q,Y,ae,ue,0);break;case 2:za(Q,Y,ae,ue);break;case 1:ms(Q,Y,ae,ue)}}function _o(T,Q){var Y,ae,ue=Q.M,me=Q.Nb,pe=T.oc,ve=T.pc+40,we=T.oc,ke=T.pc+584,Me=T.oc,nt=T.pc+600;for(Y=0;16>Y;++Y)pe[ve+32*Y-1]=129;for(Y=0;8>Y;++Y)we[ke+32*Y-1]=129,Me[nt+32*Y-1]=129;for(0<ue?pe[ve-1-32]=we[ke-1-32]=Me[nt-1-32]=129:(a(pe,ve-32-1,127,21),a(we,ke-32-1,127,9),a(Me,nt-32-1,127,9)),ae=0;ae<T.za;++ae){var et=Q.ya[Q.aa+ae];if(0<ae){for(Y=-1;16>Y;++Y)n(pe,ve+32*Y-4,pe,ve+32*Y+12,4);for(Y=-1;8>Y;++Y)n(we,ke+32*Y-4,we,ke+32*Y+4,4),n(Me,nt+32*Y-4,Me,nt+32*Y+4,4)}var Ge=T.Gd,Nt=T.Hd+ae,ht=et.ad,Ue=et.Hc;if(0<ue&&(n(pe,ve-32,Ge[Nt].y,0,16),n(we,ke-32,Ge[Nt].f,0,8),n(Me,nt-32,Ge[Nt].ea,0,8)),et.Za){var Ve=pe,Et=ve-32+16;for(0<ue&&(ae>=T.za-1?a(Ve,Et,Ge[Nt].y[15],4):n(Ve,Et,Ge[Nt+1].y,0,4)),Y=0;4>Y;Y++)Ve[Et+128+Y]=Ve[Et+256+Y]=Ve[Et+384+Y]=Ve[Et+0+Y];for(Y=0;16>Y;++Y,Ue<<=2)Ve=pe,Et=ve+Af[Y],ro[et.Ob[Y]](Ve,Et),Za(Ue,ht,16*+Y,Ve,Et)}else if(Ve=Bl(ae,ue,et.Ob[0]),Ju[Ve](pe,ve),Ue!=0)for(Y=0;16>Y;++Y,Ue<<=2)Za(Ue,ht,16*+Y,pe,ve+Af[Y]);for(Y=et.Gc,Ve=Bl(ae,ue,et.Dd),il[Ve](we,ke),il[Ve](Me,nt),Ue=ht,Ve=we,Et=ke,255&(et=Y>>0)&&(170&et?cc(Ue,256,Ve,Et):ko(Ue,256,Ve,Et)),et=Me,Ue=nt,255&(Y>>=8)&&(170&Y?cc(ht,320,et,Ue):ko(ht,320,et,Ue)),ue<T.Ub-1&&(n(Ge[Nt].y,0,pe,ve+480,16),n(Ge[Nt].f,0,we,ke+224,8),n(Ge[Nt].ea,0,Me,nt+224,8)),Y=8*me*T.B,Ge=T.sa,Nt=T.ta+16*ae+16*me*T.R,ht=T.qa,et=T.ra+8*ae+Y,Ue=T.Ha,Ve=T.Ia+8*ae+Y,Y=0;16>Y;++Y)n(Ge,Nt+Y*T.R,pe,ve+32*Y,16);for(Y=0;8>Y;++Y)n(ht,et+Y*T.B,we,ke+32*Y,8),n(Ue,Ve+Y*T.B,Me,nt+32*Y,8)}}function Yc(T,Q,Y,ae,ue,me,pe,ve,we){var ke=[0],Me=[0],nt=0,et=we!=null?we.kd:0,Ge=we??new Rd;if(T==null||12>Y)return 7;Ge.data=T,Ge.w=Q,Ge.ha=Y,Q=[Q],Y=[Y],Ge.gb=[Ge.gb];e:{var Nt=Q,ht=Y,Ue=Ge.gb;if(t(T!=null),t(ht!=null),t(Ue!=null),Ue[0]=0,12<=ht[0]&&!r(T,Nt[0],"RIFF")){if(r(T,Nt[0]+8,"WEBP")){Ue=3;break e}var Ve=Se(T,Nt[0]+4);if(12>Ve||4294967286<Ve){Ue=3;break e}if(et&&Ve>ht[0]-8){Ue=7;break e}Ue[0]=Ve,Nt[0]+=12,ht[0]-=12}Ue=0}if(Ue!=0)return Ue;for(Ve=0<Ge.gb[0],Y=Y[0];;){e:{var Et=T;ht=Q,Ue=Y;var kt=ke,_t=Me,rr=Nt=[0];if((Zt=nt=[nt])[0]=0,8>Ue[0])Ue=7;else{if(!r(Et,ht[0],"VP8X")){if(Se(Et,ht[0]+4)!=10){Ue=3;break e}if(18>Ue[0]){Ue=7;break e}var Wt=Se(Et,ht[0]+8),hr=1+re(Et,ht[0]+12);if(2147483648<=hr*(Et=1+re(Et,ht[0]+15))){Ue=3;break e}rr!=null&&(rr[0]=Wt),kt!=null&&(kt[0]=hr),_t!=null&&(_t[0]=Et),ht[0]+=18,Ue[0]-=18,Zt[0]=1}Ue=0}}if(nt=nt[0],Nt=Nt[0],Ue!=0)return Ue;if(ht=!!(2&Nt),!Ve&&nt)return 3;if(me!=null&&(me[0]=!!(16&Nt)),pe!=null&&(pe[0]=ht),ve!=null&&(ve[0]=0),pe=ke[0],Nt=Me[0],nt&&ht&&we==null){Ue=0;break}if(4>Y){Ue=7;break}if(Ve&&nt||!Ve&&!nt&&!r(T,Q[0],"ALPH")){Y=[Y],Ge.na=[Ge.na],Ge.P=[Ge.P],Ge.Sa=[Ge.Sa];e:{Wt=T,Ue=Q,Ve=Y;var Zt=Ge.gb;kt=Ge.na,_t=Ge.P,rr=Ge.Sa,hr=22,t(Wt!=null),t(Ve!=null),Et=Ue[0];var On=Ve[0];for(t(kt!=null),t(rr!=null),kt[0]=null,_t[0]=null,rr[0]=0;;){if(Ue[0]=Et,Ve[0]=On,8>On){Ue=7;break e}var zn=Se(Wt,Et+4);if(4294967286<zn){Ue=3;break e}var An=8+zn+1&-2;if(hr+=An,0<Zt&&hr>Zt){Ue=3;break e}if(!r(Wt,Et,"VP8 ")||!r(Wt,Et,"VP8L")){Ue=0;break e}if(On[0]<An){Ue=7;break e}r(Wt,Et,"ALPH")||(kt[0]=Wt,_t[0]=Et+8,rr[0]=zn),Et+=An,On-=An}}if(Y=Y[0],Ge.na=Ge.na[0],Ge.P=Ge.P[0],Ge.Sa=Ge.Sa[0],Ue!=0)break}Y=[Y],Ge.Ja=[Ge.Ja],Ge.xa=[Ge.xa];e:if(Zt=T,Ue=Q,Ve=Y,kt=Ge.gb[0],_t=Ge.Ja,rr=Ge.xa,Wt=Ue[0],Et=!r(Zt,Wt,"VP8 "),hr=!r(Zt,Wt,"VP8L"),t(Zt!=null),t(Ve!=null),t(_t!=null),t(rr!=null),8>Ve[0])Ue=7;else{if(Et||hr){if(Zt=Se(Zt,Wt+4),12<=kt&&Zt>kt-12){Ue=3;break e}if(et&&Zt>Ve[0]-8){Ue=7;break e}_t[0]=Zt,Ue[0]+=8,Ve[0]-=8,rr[0]=hr}else rr[0]=5<=Ve[0]&&Zt[Wt+0]==47&&!(Zt[Wt+4]>>5),_t[0]=Ve[0];Ue=0}if(Y=Y[0],Ge.Ja=Ge.Ja[0],Ge.xa=Ge.xa[0],Q=Q[0],Ue!=0)break;if(4294967286<Ge.Ja)return 3;if(ve==null||ht||(ve[0]=Ge.xa?2:1),pe=[pe],Nt=[Nt],Ge.xa){if(5>Y){Ue=7;break}ve=pe,et=Nt,ht=me,T==null||5>Y?T=0:5<=Y&&T[Q+0]==47&&!(T[Q+4]>>5)?(Ve=[0],Zt=[0],kt=[0],H(_t=new L,T,Q,Y),$t(_t,Ve,Zt,kt)?(ve!=null&&(ve[0]=Ve[0]),et!=null&&(et[0]=Zt[0]),ht!=null&&(ht[0]=kt[0]),T=1):T=0):T=0}else{if(10>Y){Ue=7;break}ve=Nt,T==null||10>Y||!ti(T,Q+3,Y-3)?T=0:(et=T[Q+0]|T[Q+1]<<8|T[Q+2]<<16,ht=16383&(T[Q+7]<<8|T[Q+6]),T=16383&(T[Q+9]<<8|T[Q+8]),1&et||3<(et>>1&7)||!(et>>4&1)||et>>5>=Ge.Ja||!ht||!T?T=0:(pe&&(pe[0]=ht),ve&&(ve[0]=T),T=1))}if(!T||(pe=pe[0],Nt=Nt[0],nt&&(ke[0]!=pe||Me[0]!=Nt)))return 3;we!=null&&(we[0]=Ge,we.offset=Q-we.w,t(4294967286>Q-we.w),t(we.offset==we.ha-Y));break}return Ue==0||Ue==7&&nt&&we==null?(me!=null&&(me[0]|=Ge.na!=null&&0<Ge.na.length),ae!=null&&(ae[0]=pe),ue!=null&&(ue[0]=Nt),0):Ue}function Ld(T,Q,Y){var ae=Q.width,ue=Q.height,me=0,pe=0,ve=ae,we=ue;if(Q.Da=T!=null&&0<T.Da,Q.Da&&(ve=T.cd,we=T.bd,me=T.v,pe=T.j,11>Y||(me&=-2,pe&=-2),0>me||0>pe||0>=ve||0>=we||me+ve>ae||pe+we>ue))return 0;if(Q.v=me,Q.j=pe,Q.va=me+ve,Q.o=pe+we,Q.U=ve,Q.T=we,Q.da=T!=null&&0<T.da,Q.da){if(!Ie(ve,we,Y=[T.ib],me=[T.hb]))return 0;Q.ib=Y[0],Q.hb=me[0]}return Q.ob=T!=null&&T.ob,Q.Kb=T==null||!T.Sd,Q.da&&(Q.ob=Q.ib<3*ae/4&&Q.hb<3*ue/4,Q.Kb=0),1}function Ch(T){if(T==null)return 2;if(11>T.S){var Q=T.f.RGBA;Q.fb+=(T.height-1)*Q.A,Q.A=-Q.A}else Q=T.f.kb,T=T.height,Q.O+=(T-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(T-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(T-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(T-1)*Q.lb,Q.lb=-Q.lb);return 0}function ef(T,Q,Y,ae){if(ae==null||0>=T||0>=Q)return 2;if(Y!=null){if(Y.Da){var ue=Y.cd,me=Y.bd,pe=-2&Y.v,ve=-2&Y.j;if(0>pe||0>ve||0>=ue||0>=me||pe+ue>T||ve+me>Q)return 2;T=ue,Q=me}if(Y.da){if(!Ie(T,Q,ue=[Y.ib],me=[Y.hb]))return 2;T=ue[0],Q=me[0]}}ae.width=T,ae.height=Q;e:{var we=ae.width,ke=ae.height;if(T=ae.S,0>=we||0>=ke||!(T>=Pi&&13>T))T=2;else{if(0>=ae.Rd&&ae.sd==null){pe=me=ue=Q=0;var Me=(ve=we*p2[T])*ke;if(11>T||(me=(ke+1)/2*(Q=(we+1)/2),T==12&&(pe=(ue=we)*ke)),(ke=s(Me+2*me+pe))==null){T=1;break e}ae.sd=ke,11>T?((we=ae.f.RGBA).eb=ke,we.fb=0,we.A=ve,we.size=Me):((we=ae.f.kb).y=ke,we.O=0,we.fa=ve,we.Fd=Me,we.f=ke,we.N=0+Me,we.Ab=Q,we.Cd=me,we.ea=ke,we.W=0+Me+me,we.Db=Q,we.Ed=me,T==12&&(we.F=ke,we.J=0+Me+2*me),we.Tc=pe,we.lb=ue)}if(Q=1,ue=ae.S,me=ae.width,pe=ae.height,ue>=Pi&&13>ue)if(11>ue)T=ae.f.RGBA,Q&=(ve=Math.abs(T.A))*(pe-1)+me<=T.size,Q&=ve>=me*p2[ue],Q&=T.eb!=null;else{T=ae.f.kb,ve=(me+1)/2,Me=(pe+1)/2,we=Math.abs(T.fa),ke=Math.abs(T.Ab);var nt=Math.abs(T.Db),et=Math.abs(T.lb),Ge=et*(pe-1)+me;Q&=we*(pe-1)+me<=T.Fd,Q&=ke*(Me-1)+ve<=T.Cd,Q=(Q&=nt*(Me-1)+ve<=T.Ed)&we>=me&ke>=ve&nt>=ve,Q&=T.y!=null,Q&=T.f!=null,Q&=T.ea!=null,ue==12&&(Q&=et>=me,Q&=Ge<=T.Tc,Q&=T.F!=null)}else Q=0;T=Q?0:2}}return T!=0||Y!=null&&Y.fd&&(T=Ch(ae)),T}var Fs=64,Md=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],tf=24,rf=32,_h=8,So=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(T){return T},C.Predictor2=function(T,Q,Y){return Q[Y+0]},C.Predictor3=function(T,Q,Y){return Q[Y+1]},C.Predictor4=function(T,Q,Y){return Q[Y-1]},C.Predictor5=function(T,Q,Y){return Pe(Pe(T,Q[Y+1]),Q[Y+0])},C.Predictor6=function(T,Q,Y){return Pe(T,Q[Y-1])},C.Predictor7=function(T,Q,Y){return Pe(T,Q[Y+0])},C.Predictor8=function(T,Q,Y){return Pe(Q[Y-1],Q[Y+0])},C.Predictor9=function(T,Q,Y){return Pe(Q[Y+0],Q[Y+1])},C.Predictor10=function(T,Q,Y){return Pe(Pe(T,Q[Y-1]),Pe(Q[Y+0],Q[Y+1]))},C.Predictor11=function(T,Q,Y){var ae=Q[Y+0];return 0>=ot(ae>>24&255,T>>24&255,(Q=Q[Y-1])>>24&255)+ot(ae>>16&255,T>>16&255,Q>>16&255)+ot(ae>>8&255,T>>8&255,Q>>8&255)+ot(255&ae,255&T,255&Q)?ae:T},C.Predictor12=function(T,Q,Y){var ae=Q[Y+0];return(qe((T>>24&255)+(ae>>24&255)-((Q=Q[Y-1])>>24&255))<<24|qe((T>>16&255)+(ae>>16&255)-(Q>>16&255))<<16|qe((T>>8&255)+(ae>>8&255)-(Q>>8&255))<<8|qe((255&T)+(255&ae)-(255&Q)))>>>0},C.Predictor13=function(T,Q,Y){var ae=Q[Y-1];return(Ze((T=Pe(T,Q[Y+0]))>>24&255,ae>>24&255)<<24|Ze(T>>16&255,ae>>16&255)<<16|Ze(T>>8&255,ae>>8&255)<<8|Ze(T>>0&255,ae>>0&255))>>>0};var u1=C.PredictorAdd0;C.PredictorAdd1=mt,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var bm=C.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var cg,Tl=C.ColorIndexInverseTransform,ri=C.MapARGB,Ud=C.VP8LColorIndexInverseTransformAlpha,ym=C.MapAlpha,$u=C.VP8LPredictorsAdd=[];$u.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Qd,to,wi,Hd,No,oc,Jc,lc,za,cc,ms,ko,nf,Zc,Sh,Vd,zd,$d,af,Nh,Kd,Ku,sf,$a,al,fn,hn,ba,es=s(511),Il=s(2041),Gd=s(225),qd=s(767),Gu=0,ug=Il,of=Gd,ni=qd,jl=es,Pi=0,kh=1,eu=2,wm=3,lf=4,qu=5,dg=6,Em=7,Wd=8,Wu=9,Bh=10,Ag=[2,3,7],Fl=[3,3,11],sl=[280,256,256,256,40],cf=[0,1,1,1,0],Xu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yu=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],uf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],d2=8,Cm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],_m=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Os=null,Ka=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Xd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],tu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],d1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],df=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],A2=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ju=[],ro=[],il=[],f2=1,Th=2,ru=[],ai=[];xt("UpsampleRgbLinePair",xe,3),xt("UpsampleBgrLinePair",ze,3),xt("UpsampleRgbaLinePair",Gr,4),xt("UpsampleBgraLinePair",xn,4),xt("UpsampleArgbLinePair",Tr,4),xt("UpsampleRgba4444LinePair",Mt,2),xt("UpsampleRgb565LinePair",st,2);var Zu=C.UpsampleRgbLinePair,Yd=C.UpsampleBgrLinePair,nu=C.UpsampleRgbaLinePair,fg=C.UpsampleBgraLinePair,hg=C.UpsampleArgbLinePair,Ih=C.UpsampleRgba4444LinePair,mg=C.UpsampleRgb565LinePair,au=16,Ds=1<<au-1,Jd=-227,pg=482,Q4=6,h2=0,H4=s(256),Rs=s(256),A1=s(256),Sm=s(256),Nm=s(pg-Jd),f1=s(pg-Jd);ra("YuvToRgbRow",xe,3),ra("YuvToBgrRow",ze,3),ra("YuvToRgbaRow",Gr,4),ra("YuvToBgraRow",xn,4),ra("YuvToArgbRow",Tr,4),ra("YuvToRgba4444Row",Mt,2),ra("YuvToRgb565Row",st,2);var Af=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ed=[0,2,8],V4=[8,7,6,4,4,2,2,2,1,1,1,1],m2=1;this.WebPDecodeRGBA=function(T,Q,Y,ae,ue){var me=kh,pe=new Hu,ve=new Je;pe.ba=ve,ve.S=me,ve.width=[ve.width],ve.height=[ve.height];var we=ve.width,ke=ve.height,Me=new gt;if(Me==null||T==null)var nt=2;else t(Me!=null),nt=Yc(T,Q,Y,Me.width,Me.height,Me.Pd,Me.Qd,Me.format,null);if(nt!=0?we=0:(we!=null&&(we[0]=Me.width[0]),ke!=null&&(ke[0]=Me.height[0]),we=1),we){ve.width=ve.width[0],ve.height=ve.height[0],ae!=null&&(ae[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(ae=new js,(ue=new Rd).data=T,ue.w=Q,ue.ha=Y,ue.kd=1,Q=[0],t(ue!=null),((T=Yc(ue.data,ue.w,ue.ha,null,null,null,Q,null,ue))==0||T==7)&&Q[0]&&(T=4),(Q=T)==0){if(t(pe!=null),ae.data=ue.data,ae.w=ue.w+ue.offset,ae.ha=ue.ha-ue.offset,ae.put=pn,ae.ac=Xr,ae.bc=gn,ae.ma=pe,ue.xa){if((T=ut())==null){pe=1;break e}if(function(et,Ge){var Nt=[0],ht=[0],Ue=[0];t:for(;;){if(et==null)return 0;if(Ge==null)return et.a=2,0;if(et.l=Ge,et.a=0,H(et.m,Ge.data,Ge.w,Ge.ha),!$t(et.m,Nt,ht,Ue)){et.a=3;break t}if(et.xb=Th,Ge.width=Nt[0],Ge.height=ht[0],!$e(Nt[0],ht[0],1,et,null))break t;return 1}return t(et.a!=0),0}(T,ae)){if(ae=(Q=ef(ae.width,ae.height,pe.Oa,pe.ba))==0){t:{ae=T;r:for(;;){if(ae==null){ae=0;break t}if(t(ae.s.yc!=null),t(ae.s.Ya!=null),t(0<ae.s.Wb),t((Y=ae.l)!=null),t((ue=Y.ma)!=null),ae.xb!=0){if(ae.ca=ue.ba,ae.tb=ue.tb,t(ae.ca!=null),!Ld(ue.Oa,Y,wm)){ae.a=2;break r}if(!tt(ae,Y.width)||Y.da)break r;if((Y.da||jr(ae.ca.S))&&Ke(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Ke()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!De(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break r}ae.xb=0}if(!Te(ae,ae.V,ae.Ba,ae.c,ae.i,Y.o,Be))break r;ue.Dc=ae.Ma,ae=1;break t}t(ae.a!=0),ae=0}ae=!ae}ae&&(Q=T.a)}else Q=T.a}else{if((T=new vi)==null){pe=1;break e}if(T.Fa=ue.na,T.P=ue.P,T.qc=ue.Sa,Id(T,ae)){if((Q=ef(ae.width,ae.height,pe.Oa,pe.ba))==0){if(T.Aa=0,Y=pe.Oa,t((ue=T)!=null),Y!=null){if(0<(we=0>(we=Y.Md)?0:100<we?255:255*we/100)){for(ke=Me=0;4>ke;++ke)12>(nt=ue.pb[ke]).lc&&(nt.ia=we*V4[0>nt.lc?0:nt.lc]>>3),Me|=nt.ia;Me&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=Y.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}qA(T,ae)||(Q=T.a)}}else Q=T.a}Q==0&&pe.Oa!=null&&pe.Oa.fd&&(Q=Ch(pe.ba))}pe=Q}me=pe!=0?null:11>me?ve.f.RGBA.eb:ve.f.kb.y}else me=null;return me};var p2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(C,N){for(var R="",O=0;O<4;O++)R+=String.fromCharCode(C[N++]);return R}function d(C,N){return(C[N+0]<<0|C[N+1]<<8|C[N+2]<<16)>>>0}function f(C,N){return(C[N+0]<<0|C[N+1]<<8|C[N+2]<<16|C[N+3]<<24)>>>0}new l;var h=[0],p=[0],g=[],v=new l,b=e,y=function(C,N){var R={},O=0,j=!1,U=0,P=0;if(R.frames=[],!function(W,J,te,ie){for(var Ae=0;Ae<ie;Ae++)if(W[J+Ae]!=te.charCodeAt(Ae))return!0;return!1}(C,N,"RIFF",4)){var X,K;for(f(C,N+=4),N+=8;N<C.length;){var Z=u(C,N),H=f(C,N+=4);N+=4;var V=H+(1&H);switch(Z){case"VP8 ":case"VP8L":R.frames[O]===void 0&&(R.frames[O]={}),(L=R.frames[O]).src_off=j?P:N-8,L.src_size=U+H+8,O++,j&&(j=!1,U=0,P=0);break;case"VP8X":(L=R.header={}).feature_flags=C[N];var q=N+4;L.canvas_width=1+d(C,q),q+=3,L.canvas_height=1+d(C,q),q+=3;break;case"ALPH":j=!0,U=V+8,P=N-8;break;case"ANIM":(L=R.header).bgcolor=f(C,N),q=N+4,L.loop_count=(X=C)[(K=q)+0]<<0|X[K+1]<<8,q+=2;break;case"ANMF":var ne,L;(L=R.frames[O]={}).offset_x=2*d(C,N),N+=3,L.offset_y=2*d(C,N),N+=3,L.width=1+d(C,N),N+=3,L.height=1+d(C,N),N+=3,L.duration=d(C,N),N+=3,ne=C[N++],L.dispose=1&ne,L.blend=ne>>1&1}Z!="ANMF"&&(N+=V)}return R}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var _=y.header?y.header:null,S=y.frames?y.frames:null;if(_){_.loop_counter=_.loop_count,h=[_.canvas_height],p=[_.canvas_width];for(var k=0;k<S.length&&S[k].blend!=0;k++);}var B=S[0],F=v.WebPDecodeRGBA(b,B.src_off,B.src_size,p,h);B.rgba=F,B.imgwidth=p[0],B.imgheight=h[0];for(var w=0;w<p[0]*h[0]*4;w++)g[w]=F[w];return this.width=p,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof yj=="function"},r=function(h,p,g,v){var b=4,y=i;switch(v){case e.image_compression.FAST:b=1,y=s;break;case e.image_compression.MEDIUM:b=6,y=o;break;case e.image_compression.SLOW:b=9,y=l}h=n(h,p,g,y);var _=yj(h,{level:b});return e.__addimage__.arrayBufferToBinaryString(_)},n=function(h,p,g,v){for(var b,y,_,S=h.length/p,k=new Uint8Array(h.length+S),B=d(),F=0;F<S;F+=1){if(_=F*p,b=h.subarray(_,_+p),v)k.set(v(b,g,y),_+F);else{for(var w,C=B.length,N=[];w<C;w+=1)N[w]=B[w](b,g,y);var R=f(N.concat());k.set(N[R],_+F)}y=b}return k},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var g,v=[],b=h.length;v[0]=1;for(var y=0;y<b;y+=1)g=h[y-p]||0,v[y+1]=h[y]-g+256&255;return v},i=function(h,p,g){var v,b=[],y=h.length;b[0]=2;for(var _=0;_<y;_+=1)v=g&&g[_]||0,b[_+1]=h[_]-v+256&255;return b},o=function(h,p,g){var v,b,y=[],_=h.length;y[0]=3;for(var S=0;S<_;S+=1)v=h[S-p]||0,b=g&&g[S]||0,y[S+1]=h[S]+256-(v+b>>>1)&255;return y},l=function(h,p,g){var v,b,y,_,S=[],k=h.length;S[0]=4;for(var B=0;B<k;B+=1)v=h[B-p]||0,b=g&&g[B]||0,y=g&&g[B-p]||0,_=u(v,b,y),S[B+1]=h[B]-_+256&255;return S},u=function(h,p,g){if(h===p&&p===g)return h;var v=Math.abs(p-g),b=Math.abs(h-g),y=Math.abs(h+p-g-g);return v<=b&&v<=y?h:b<=y?p:g},d=function(){return[a,s,i,o,l]},f=function(h){var p=h.map(function(g){return g.reduce(function(v,b){return v+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(h,p,g,v){var b,y,_,S,k,B,F,w,C,N,R,O,j,U,P,X=this.decode.FLATE_DECODE,K="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(_=new iwe(h)).imgData,y=_.bits,b=_.colorSpace,k=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){C=(w=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,R=new Uint8Array(C*_.colors),N=new Uint8Array(C);var Z,H=_.pixelBitlength-_.bits;for(U=0,P=0;U<C;U++){for(j=w[U],Z=0;Z<H;)R[P++]=j>>>Z&255,Z+=_.bits;N[U]=j>>>Z&255}}if(_.bits===16){C=(w=new Uint32Array(_.decodePixels().buffer)).length,R=new Uint8Array(C*(32/_.pixelBitlength)*_.colors),N=new Uint8Array(C*(32/_.pixelBitlength)),O=_.colors>1,U=0,P=0;for(var V=0;U<C;)j=w[U++],R[P++]=j>>>0&255,O&&(R[P++]=j>>>16&255,j=w[U++],R[P++]=j>>>0&255),N[V++]=j>>>16&255;y=8}v!==e.image_compression.NONE&&t()?(h=r(R,_.width*_.colors,_.colors,v),F=r(N,_.width,1,v)):(h=R,F=N,X=void 0)}if(_.colorType===3&&(b=this.color_spaces.INDEXED,B=_.palette,_.transparency.indexed)){var q=_.transparency.indexed,ne=0;for(U=0,C=q.length;U<C;++U)ne+=q[U];if((ne/=255)===C-1&&q.indexOf(0)!==-1)S=[q.indexOf(0)];else if(ne!==C){for(w=_.decodePixels(),N=new Uint8Array(w.length),U=0,C=w.length;U<C;U++)N[U]=q[w[U]];F=r(N,_.width,1)}}var L=function(W){var J;switch(W){case e.image_compression.FAST:J=11;break;case e.image_compression.MEDIUM:J=13;break;case e.image_compression.SLOW:J=14;break;default:J=12}return J}(v);return X===this.decode.FLATE_DECODE&&(K="/Predictor "+L+" "),K+="/Colors "+k+" /BitsPerComponent "+y+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(F&&this.__addimage__.isArrayBuffer(F)||this.__addimage__.isArrayBufferView(F))&&(F=this.__addimage__.arrayBufferToBinaryString(F)),{alias:g,data:h,index:p,filter:X,decodeParameters:K,transparency:S,palette:B,sMask:F,predictor:L,width:_.width,height:_.height,bitsPerComponent:y,colorSpace:b}}}})(mr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new owe(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new kB(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(mr.API),ld.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ld.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Na.log("bit decode error:"+r)}},ld.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},ld.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},ld.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},ld.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},ld.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},ld.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},ld.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},ld.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new ld(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new kB(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}(mr.API),j9.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new j9(t),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new kB(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}(mr.API),mr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],p=n[u+3];s[o++]=d,s[o++]=f,s[o++]=h,i[l++]=p}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},mr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ug=mr.API,CE=Ug.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,p=e.length,g=0,v=o[0]||l,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&pa(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,b.push((o[n]||v)/l+h)),g=n;return b},k9=Ug.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Ug.processArabic&&(e=Ug.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:CE.apply(this,arguments).reduce(function(s,i){return s+i},0)},B9=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&a.push(e.slice(l,s)),a},T9=function(e,t,r){r||(r={});var n,a,s,i,o,l,u,d=[],f=[d],h=r.textIndent||0,p=0,g=0,v=e.split(" "),b=CE.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var y=Array(l).join(" "),_=[];v.map(function(k){(k=k.split(/\s*\n/)).length>1?_=_.concat(k.map(function(B,F){return(F&&B.length?`
`:"")+B})):_.push(k[0])}),v=_,l=k9.apply(this,[y,r])}for(s=0,i=v.length;s<i;s++){var S=0;if(n=v[s],l&&n[0]==`
`&&(n=n.substr(1),S=1),h+p+(g=(a=CE.apply(this,[n,r])).reduce(function(k,B){return k+B},0))>t||S){if(g>t){for(o=B9.apply(this,[n,a,t-(h+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(k,B){return k+B},0)}else d=[n];f.push(d),h=g+l,p=b}else d.push(n),h+=p+g,p=b}return u=l?function(k,B){return(B?y:"")+k.join(" ")}:function(k){return k.join(" ")},f.map(u)},Ug.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(T9.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,p,g,v,b=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=s(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),v="-"):(g=s(h).slice(2),v=""),g=v+g.slice(0,-1)+n[g.slice(-1)];else{if(pa(h)!=="object")throw new Error("Don't know what to do with value type "+pa(h)+".");g=i(h)}b.push(p+g)}return b.push("}"),b.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,v,b={},y=1,_=b,S=[],k="",B="",F=f.length-1,w=1;w<F;w+=1)(v=f[w])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(v):v=="{"?(S.push([_,g]),_={},g=void 0):v=="}"?((p=S.pop())[0][p[1]]=_,g=void 0,_=p[0]):v=="-"?y=-1:g===void 0?r.hasOwnProperty(v)?(k+=r[v],g=parseInt(k,16)*y,y=1,k=""):k+=v:r.hasOwnProperty(v)?(B+=r[v],_[g]=parseInt(B,16)*y,y=1,g=void 0,B=""):B+=v;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(mr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Zb(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(mr),function(e){function t(){return(Mr.canvg?Promise.resolve(Mr.canvg):K_(()=>import("./index.es-BFQeKoyW.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}mr.API.addSvgAsImage=function(r,n,a,s,i,o,l,u){if(isNaN(n)||isNaN(a))throw Na.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Na.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,l,u)})}}(),mr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},mr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,f=0;function h(g,v){var b,y=!1;for(b=0;b<g.length;b+=1)g[b]===v&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(pa(e)==="object"){for(a in e)if(s=e[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,v=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?v.push("/"+g+" /"+r[g].value):v.push("/"+g+" "+r[g].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(mr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,l,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,h=(o=Object.keys(s).sort(function(p,g){return p-g})).length;f<h;f++)i=o[f],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var v=u();d({data:p,addLength1:!0,objectId:v}),l("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+hv(o.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var _=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+hv(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+e.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+hv(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=u();d({data:h,addLength1:!0,objectId:g}),l("endobj");var v=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+hv(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+hv(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",l=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,p=f.activeFontKey,g=f.fonts,v=p,b="",y=0,_="",S=g[v].encoding;if(g[v].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:f};for(_=o,v=p,Array.isArray(o)&&(_=o[0]),y=0;y<_.length;y+=1)g[v].metadata.hasOwnProperty("cmap")&&(i=g[v].metadata.cmap.unicode.codeMap[_[y].charCodeAt(0)]),i||_[y].charCodeAt(0)<256&&g[v].metadata.hasOwnProperty("Unicode")?b+=_[y]:b+="";var k="";return parseInt(v.slice(1))<14||S==="WinAnsiEncoding"?k=h(b,v).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(k=r(b,g[v])),f.isHex=!0,{text:k,x:l,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],l={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},l,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},l,{text:i})).text}])}(mr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(mr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,l,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,S=0;this.__bidiEngine__={};var k=function(O){var j=O.charCodeAt(),U=j>>8,P=v[U];return P!==void 0?f[256*P+(255&j)]:U===252||U===253?"AL":y.test(U)?"L":U===8?"R":"N"},B=function(O){for(var j,U=0;U<O.length;U++){if((j=k(O.charAt(U)))==="L")return!1;if(j==="R")return!0}return!1},F=function(O,j,U,P){var X,K,Z,H,V=j[P];switch(V){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(V="AN");break;case"AL":_=!0,V="R";break;case"WS":V="N";break;case"CS":P<1||P+1>=j.length||(X=U[P-1])!=="EN"&&X!=="AN"||(K=j[P+1])!=="EN"&&K!=="AN"?V="N":_&&(K="AN"),V=K===X?K:"N";break;case"ES":V=(X=P>0?U[P-1]:"B")==="EN"&&P+1<j.length&&j[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&U[P-1]==="EN"){V="EN";break}if(_){V="N";break}for(Z=P+1,H=j.length;Z<H&&j[Z]==="ET";)Z++;V=Z<H&&j[Z]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(H=j.length,Z=P+1;Z<H&&j[Z]==="NSM";)Z++;if(Z<H){var q=O[P],ne=q>=1425&&q<=2303||q===64286;if(X=j[Z],ne&&(X==="R"||X==="AL")){V="R";break}}}V=P<1||(X=j[P-1])==="B"?"N":U[P-1];break;case"B":_=!1,a=!0,V=S;break;case"S":s=!0,V="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":V="N"}return V},w=function(O,j,U){var P=O.split("");return U&&C(P,U,{hiLevel:S}),P.reverse(),j&&j.reverse(),P.join("")},C=function(O,j,U){var P,X,K,Z,H,V=-1,q=O.length,ne=0,L=[],W=S?p:h,J=[];for(_=!1,a=!1,s=!1,X=0;X<q;X++)J[X]=k(O[X]);for(K=0;K<q;K++){if(H=ne,L[K]=F(O,J,L,K),P=240&(ne=W[H][g[L[K]]]),ne&=15,j[K]=Z=W[ne][5],P>0)if(P===16){for(X=V;X<K;X++)j[X]=1;V=-1}else V=-1;if(W[ne][6])V===-1&&(V=K);else if(V>-1){for(X=V;X<K;X++)j[X]=Z;V=-1}J[K]==="B"&&(j[K]=0),U.hiLevel|=Z}s&&function(te,ie,Ae){for(var oe=0;oe<Ae;oe++)if(te[oe]==="S"){ie[oe]=S;for(var ce=oe-1;ce>=0&&te[ce]==="WS";ce--)ie[ce]=S}}(J,j,q)},N=function(O,j,U,P,X){if(!(X.hiLevel<O)){if(O===1&&S===1&&!a)return j.reverse(),void(U&&U.reverse());for(var K,Z,H,V,q=j.length,ne=0;ne<q;){if(P[ne]>=O){for(H=ne+1;H<q&&P[H]>=O;)H++;for(V=ne,Z=H-1;V<Z;V++,Z--)K=j[V],j[V]=j[Z],j[Z]=K,U&&(K=U[V],U[V]=U[Z],U[Z]=K);ne=H}ne++}}},R=function(O,j,U){var P=O.split(""),X={hiLevel:S};return U||(U=[]),C(P,U,X),function(K,Z,H){if(H.hiLevel!==0&&d)for(var V,q=0;q<K.length;q++)Z[q]===1&&(V=b.indexOf(K[q]))>=0&&(K[q]=b[V+1])}(P,U,X),N(2,P,j,U,X),N(1,P,j,U,X),P.join("")};return this.__bidiEngine__.doBidiReorder=function(O,j,U){if(function(X,K){if(K)for(var Z=0;Z<X.length;Z++)K[Z]=Z;o===void 0&&(o=B(X)),u===void 0&&(u=B(X))}(O,j),i||!l||u)if(i&&l&&o^u)S=o?1:0,O=w(O,j,U);else if(!i&&l&&u)S=o?1:0,O=R(O,j,U),O=w(O,j);else if(!i||o||l||u){if(i&&!l&&o^u)O=w(O,j),o?(S=0,O=R(O,j,U)):(S=1,O=R(O,j,U),O=w(O,j));else if(i&&o&&!l&&u)S=1,O=R(O,j,U),O=w(O,j);else if(!i&&!l&&o^u){var P=d;o?(S=1,O=R(O,j,U),S=0,d=!1,O=R(O,j,U),d=P):(S=0,O=R(O,j,U),O=w(O,j),S=1,d=!1,O=R(O,j,U),d=P,O=w(O,j))}}else S=0,O=R(O,j,U);else S=o?1:0,O=R(O,j,U);return O},this.__bidiEngine__.setOptions=function(O){O&&(i=O.isInputVisual,l=O.isOutputVisual,o=O.isInputRtl,u=O.isOutputRtl,d=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(mr),mr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new J0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new wwe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new lwe(this.contents),this.head=new uwe(this),this.name=new mwe(this),this.cmap=new zJ(this),this.toUnicode={},this.hhea=new dwe(this),this.maxp=new pwe(this),this.hmtx=new gwe(this),this.post=new fwe(this),this.os2=new Awe(this),this.loca=new ywe(this),this.glyf=new vwe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)t=l[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Nd,J0=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,l;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+l},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),lwe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,l,u,d,f,h,p,g,v;for(v in p=Object.keys(r).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),i=Math.floor(f/l),d=16*p-f,(a=new J0).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*p,u=a.pos+s,o=null,g=[],r)for(h=r[v],a.writeString(v),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),v==="head"&&(o=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=$J.call(r);r.length%4;)r.push(0);for(s=new J0(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),cwe={}.hasOwnProperty,HA=function(e,t){for(var r in t)cwe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Nd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var uwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new J0).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),F9=function(){function e(t,r){var n,a,s,i,o,l,u,d,f,h,p,g,v,b,y,_,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,s=function(){var k,B;for(B=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)B.push(t.readUInt16());return B}(),t.pos+=2,v=function(){var k,B;for(B=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)B.push(t.readUInt16());return B}(),u=function(){var k,B;for(B=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)B.push(t.readUInt16());return B}(),d=function(){var k,B;for(B=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)B.push(t.readUInt16());return B}(),a=(this.length-t.pos+this.offset)/2,o=function(){var k,B;for(B=[],l=k=0;0<=a?k<a:k>a;l=0<=a?++k:--k)B.push(t.readUInt16());return B}(),l=y=0,S=s.length;y<S;l=++y)for(b=s[l],n=_=g=v[l];g<=b?_<=b:_>=b;n=g<=b?++_:--_)d[l]===0?i=n+u[l]:(i=o[d[l]/2+(n-g)-(h-l)]||0)!==0&&(i+=u[l]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,l,u,d,f,h,p,g,v,b,y,_,S,k,B,F,w,C,N,R,O,j,U,P,X,K,Z,H,V,q,ne,L,W,J,te,ie,Ae,oe,ce,ge,je,re;switch(P=new J0,i=Object.keys(t).sort(function(Se,De){return Se-De}),r){case"macroman":for(v=0,b=function(){var Se=[];for(g=0;g<256;++g)Se.push(0);return Se}(),_={0:0},s={},X=0,V=i.length;X<V;X++)_[ce=t[a=i[X]]]==null&&(_[ce]=++v),s[a]={old:t[a],new:_[t[a]]},b[a]=_[t[a]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(b),{charMap:s,subtable:P.data,maxGlyphID:v+1};case"unicode":for(j=[],f=[],S=0,_={},n={},y=u=null,K=0,q=i.length;K<q;K++)_[B=t[a=i[K]]]==null&&(_[B]=++S),n[a]={old:B,new:_[B]},o=_[B]-a,y!=null&&o===u||(y&&f.push(y),j.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),j.push(65535),R=2*(N=j.length),C=2*Math.pow(Math.log(N)/Math.LN2,2),h=Math.log(C/2)/Math.LN2,w=2*N-C,l=[],F=[],p=[],g=Z=0,ne=j.length;Z<ne;g=++Z){if(O=j[g],d=f[g],O===65535){l.push(0),F.push(0);break}if(O-(U=n[O].new)>=32768)for(l.push(0),F.push(2*(p.length+N-g)),a=H=O;O<=d?H<=d:H>=d;a=O<=d?++H:--H)p.push(n[a].new);else l.push(U-O),F.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*N+2*p.length),P.writeUInt16(0),P.writeUInt16(R),P.writeUInt16(C),P.writeUInt16(h),P.writeUInt16(w),Ae=0,L=f.length;Ae<L;Ae++)a=f[Ae],P.writeUInt16(a);for(P.writeUInt16(0),oe=0,W=j.length;oe<W;oe++)a=j[oe],P.writeUInt16(a);for(ge=0,J=l.length;ge<J;ge++)o=l[ge],P.writeUInt16(o);for(je=0,te=F.length;je<te;je++)k=F[je],P.writeUInt16(k);for(re=0,ie=p.length;re<ie;re++)v=p[re],P.writeUInt16(v);return{charMap:n,subtable:P.data,maxGlyphID:S+1}}},e}(),zJ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new F9(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=F9.encode(r,n),(s=new J0).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),dwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),Awe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),fwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),hwe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},mwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,l,u,d,f,h,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new hwe(d,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),pwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),gwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,p;for(p=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),$J=[].slice,vwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,l,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(l=new J0(n.read(s))).readShort(),d=l.readShort(),h=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[r]=o===-1?new bwe(l,d,h,u,f):new xwe(l,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,l,u;for(o=[],i=[],l=0,u=n.length;l<u;l++)s=r[n[l]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),xwe=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),bwe=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new J0($J.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),ywe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return HA(t,Nd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),wwe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,l;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,l,u,d,f,h,p,g,v,b,y;for(a in n=zJ.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},y=n.charMap)p[(l=y[a]).old]=l.new;for(g in h=n.maxGlyphID,i)g in p||(p[g]=h++);return d=function(_){var S,k;for(S in k={},_)k[_[S]]=S;return k}(p),f=Object.keys(d).sort(function(_,S){return _-S}),v=function(){var _,S,k;for(k=[],_=0,S=f.length;_<S;_++)o=f[_],k.push(d[o]);return k}(),s=this.font.glyf.encode(i,v,p),u=this.font.loca.encode(s.offsets,v),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();mr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function KJ(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,l=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*l,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*p,r),r+=u;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var O9={},Hv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:O9=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return O9||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),kj=function(e,t){return kj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},kj(e,t)};function GJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kj(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var qJ=function(e){GJ(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function Ewe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Cwe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function W_(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function WJ(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=XJ(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function XJ(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function fN(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function YJ(e,t){var r=fN(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function _we(e,t,r,n,a){var s={},i=1.3333333333333333,o=BB(t,function(S){return a.getComputedStyle(S).backgroundColor});o!=null&&(s.fillColor=o);var l=BB(t,function(S){return a.getComputedStyle(S).color});l!=null&&(s.textColor=l);var u=Nwe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var p=(parseFloat(h)||0)/f;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=BB(t,function(S){return a.getComputedStyle(S)[d]});g!=null&&(s.lineColor=g);var v=["left","right","center","justify"];v.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),v=["middle","bottom","top"],v.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/i);var y=Swe(n);y&&(s.fontStyle=y);var _=(n.fontFamily||"").toLowerCase();return e.indexOf(_)!==-1&&(s.font=_),s}function Swe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function BB(e,t){var r=JJ(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function JJ(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:JJ(e.parentElement,t):r}function Nwe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=fN(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function ZJ(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var l=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var p=0;p<o.rows.length;p++){var g=o.rows[p],v=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=kwe(l,u,r,g,n,a);b&&(v==="thead"?d.push(b):v==="tfoot"?h.push(b):f.push(b))}return{head:d,body:f,foot:h}}function kwe(e,t,r,n,a,s){for(var i=new qJ(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(a||u.display!=="none"){var d=void 0;s&&(d=_we(e,l,t,u,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Bwe(l)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function Bwe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Twe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Ff(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function eZ(e,t){var r=new Hv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Twe(a,n,t);var s=Ff({},a,n,t),i;typeof window<"u"&&(i=window);var o=Iwe(a,n,t),l=jwe(a,n,t),u=Fwe(r,s),d=Dwe(r,s,i);return{id:t.tableId,content:d,hooks:l,styles:o,settings:u}}function Iwe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var u=e[l],d=t[l],f=r[l];n.columnStyles=Ff({},u,d,f)}else{var h=[e,t,r],p=h.map(function(g){return g[l]||{}});n[l]=Ff({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function jwe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function Fwe(e,t){var r,n,a,s,i,o,l,u,d,f,h,p,g=fN(t.margin,40/e.scaleFactor()),v=(r=Owe(e,t.startY))!==null&&r!==void 0?r:g.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var _=(s=t.useCss)!==null&&s!==void 0?s:!1,S=t.theme||(_?"plain":"striped"),k=!!t.horizontalPageBreak,B=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:_,theme:S,startY:v,margin:g,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:k,horizontalPageBreakRepeat:B,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Owe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Dwe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=ZJ(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=t.columns||Rwe(n,a,s);return{columns:l,head:n,body:a,foot:s}}function Rwe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(l>0?"_".concat(l):"");var d={dataKey:u};a.push(d)}}),a}var Bj=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Pwe=function(e){GJ(t,e);function t(r,n,a,s,i,o){var l=e.call(this,r,n,o)||this;return l.cell=a,l.row=s,l.column=i,l.section=s.section,l}return t}(Bj),Lwe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,l=r;o<l.length;o++){var u=l[o],d=new Pwe(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Bj(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Bj(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),tZ=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof qJ&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>a?u:a},0)},e}(),rZ=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=fN(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Mwe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function Uwe(e,t){Qwe(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=Tj(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=Tj(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Vwe(t),zwe(t,e),Hwe(t)}function Qwe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=YJ(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,l,null);var f=u.padding("horizontal");u.contentWidth=W_(u.text,u.styles,e)+f;var h=W_(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/r;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function Tj(e,t,r){for(var n=t,a=e.reduce(function(p,g){return p+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,l=n*o,u=i.width+l,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(p){return t<0?p.width>r(p):!0});h.length&&(t=Tj(h,t,r))}return t}function Hwe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var l=o[i],u=t[l.index];if(r>1)r--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete t[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[l.index]={cell:d,left:h,row:s}}}}}function Vwe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=l.width,delete n.cells[l.index];else if(a){var u=a;delete n.cells[l.index],a=null,u.width=l.width+s}else{var u=n.cells[l.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=l.width;continue}u.width=l.width+s}}}function zwe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=D9(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=D9(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function D9(e,t,r,n,a){return e.map(function(s){return $we(s,t,r,n,a)})}function $we(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=W_(e,r,n))return e;for(;t<W_(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function nZ(e,t){var r=new Hv(e),n=Kwe(t,r.scaleFactor()),a=new Lwe(t,n);return Uwe(r,a),r.applyStyles(r.userStyles),a}function Kwe(e,t){var r=e.content,n=qwe(r.columns);if(r.head.length===0){var a=R9(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=R9(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:TB("head",r.head,n,i,s,t),body:TB("body",r.body,n,i,s,t),foot:TB("foot",r.foot,n,i,s,t)}}function TB(e,t,r,n,a,s){var i={},o=t.map(function(l,u){for(var d=0,f={},h=0,p=0,g=0,v=r;g<v.length;g++){var b=v[g];if(i[b.index]==null||i[b.index].left===0)if(p===0){var y=void 0;Array.isArray(l)?y=l[b.index-h-d]:y=l[b.dataKey];var _={};typeof y=="object"&&!Array.isArray(y)&&(_=(y==null?void 0:y.styles)||{});var S=Wwe(e,b,u,a,n,s,_),k=new rZ(y,S,e);f[b.dataKey]=k,f[b.index]=k,p=k.colSpan-1,i[b.index]={left:k.rowSpan-1,times:p}}else p--,h++;else i[b.index].left--,p=i[b.index].times,d++}return new tZ(l,u,e,f)});return o}function R9(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Gwe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Gwe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function qwe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Mwe(a,t,r)})}function Wwe(e,t,r,n,a,s,i){var o=Cwe(n),l;e==="head"?l=a.headStyles:e==="body"?l=a.bodyStyles:e==="foot"&&(l=a.footStyles);var u=Ff({},o.table,o[e],a.styles,l),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?Ff({},o.alternateRow,a.alternateRowStyles):{},p=Ewe(s),g=Ff({},p,u,h,f);return Ff(g,i)}function Xwe(e,t,r){var n;r===void 0&&(r={});var a=YJ(e,t),s=new Map,i=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(h){var p=t.columns.find(function(g){return g.dataKey===h||g.index===h});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function Ywe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=Xwe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function aZ(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var l=t.body,u=l.reduce(function(h,p){return h+p.height},0);o+=u}var d=new Hv(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(iZ(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=Ff({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Jwe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Yf(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,p){var g=p===t.body.length-1;X_(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Yf(d,t,h,s,t.columns)})),WJ(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function Jwe(e,t,r,n){var a=Ywe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?ey(e,t,r,n,u.columns,!0):P9(e,t,n,u.columns),Zwe(e,t,r,n,u.columns),IB(e,t,n,u.columns)});else for(var i=-1,o=a[0],l=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?ey(e,t,r,n,d,!0):P9(e,t,n,d),u=L9(e,t,i+1,n,d),IB(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),ey(e,t,r,n,h.columns,!0),L9(e,t,i+1,n,h.columns,f),IB(e,t,n,h.columns)}),i=u};i<t.body.length-1;)l()}function P9(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Yf(e,t,s,r,n)})}function Zwe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;X_(e,t,s,o,r,n,a)})}function L9(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(l,u){var d=r+u===t.body.length-1,f=sZ(e,t,d,n);l.canEntireRowFit(f,a)&&(Yf(e,t,l,n,a),o=r+u)}),o}function IB(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Yf(e,t,s,r,n)})}function e2e(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function t2e(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],u=e.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new rZ(u.raw,u.styles,u.section);d=Ff(d,u),d.text=[];var f=e2e(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,p),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,p),d.contentHeight>s&&(s=d.contentHeight),a[l.index]=d}}var g=new tZ(e.raw,-1,e.section,a,!0);g.height=s;for(var v=0,b=r.columns;v<b.length;v++){var l=b[v],d=g.cells[l.index];d&&(d.height=g.height);var u=e.cells[l.index];u&&(u.height=e.height)}return g}function r2e(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=t.getMinimumRowHeight(n.columns,e),u=l<r;if(l>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function X_(e,t,r,n,a,s,i){var o=sZ(e,t,n,s);if(r.canEntireRowFit(o,i))Yf(e,t,r,s,i);else if(r2e(e,r,o,t)){var l=t2e(r,o,t,e);Yf(e,t,r,s,i),ey(e,t,a,s,i),X_(e,t,l,n,a,s,i)}else ey(e,t,a,s,i),X_(e,t,r,n,a,s,i)}function Yf(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}e.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}n2e(e,l,n);var d=l.getTextPos();KJ(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function n2e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=XJ(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),a2e(e,t,r,n.lineWidth))}function a2e(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,s,i,o));function l(u,d,f,h,p){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,p,"S")}}function sZ(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function ey(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return Yf(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;WJ(e,t,r,n),iZ(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Yf(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function iZ(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function s2e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=eZ(this,n),s=nZ(this,a);return aZ(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){KJ(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Hv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Hv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Hv(this),s=ZJ(a,t,window,r,!1),i=s.head,o=s.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var jB;function gl(e,t){var r=eZ(e,t),n=nZ(e,r);aZ(e,n)}try{if(typeof window<"u"&&window){var M9=window,U9=M9.jsPDF||((jB=M9.jspdf)===null||jB===void 0?void 0:jB.jsPDF);U9&&s2e(U9)}}catch(e){console.error("Could not apply autoTable plugin",e)}const sD="evaluaciones_pruebas",iD="evaluaciones_rubricas_estaticas",oD="evaluaciones_rubricas_interactivas",i2e="usuarios",hN=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},o2e=e=>{const t=nr(Ut(Ft,sD),Kr("fechaCreacion","desc"));return wr(t,n=>{e(n.docs.map(a=>hN(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},l2e=async e=>{try{const{id:t,...r}=e,n=pr(Ft,sD,t);await xo(n,{...r,fechaCreacion:yr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},c2e=async e=>{try{await Ys(pr(Ft,sD,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},u2e=e=>{const t=nr(Ut(Ft,iD),Kr("fechaCreacion","desc"));return wr(t,n=>{e(n.docs.map(a=>hN(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},d2e=async e=>{try{const{id:t,...r}=e,n=pr(Ft,iD,t);await xo(n,{...r,fechaCreacion:yr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},A2e=async e=>{try{await Ys(pr(Ft,iD,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},f2e=e=>{const t=nr(Ut(Ft,oD));return wr(t,n=>{e(n.docs.map(a=>hN(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},h2e=async e=>{try{const{id:t,...r}=e,n=pr(Ft,oD,t);await xo(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},m2e=async e=>{try{return(await ea(Ut(Ft,oD),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},p2e=e=>{const t=nr(Ut(Ft,i2e));return wr(t,n=>{e(n.docs.map(a=>hN(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},g2e=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],Q9={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},ZC=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},v2e=({open:e})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),x2e=({item:e,index:t,showAnswers:r})=>{const n=I.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),r&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),c.jsx("div",{className:"space-y-2",children:n.map((a,s)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>c.jsxs("li",{children:[c.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=r&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},b2e=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(null),[a,s]=I.useState(!1),[i,o]=I.useState(!1),[l,u]=I.useState(null),[d,f]=I.useState(!1),h={nombre:"",asignatura:qi[0],nivel:xv[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,g]=I.useState(h);I.useEffect(()=>{const w=o2e(t);return()=>w()},[]);const v=w=>{const{name:C,value:N}=w.target;g(R=>({...R,[C]:N}))},b=w=>{g(C=>{const N={...C.tiposActividad};return N[w]?delete N[w]:N[w]=Q9[w][0],{...C,tiposActividad:N}})},y=(w,C)=>{g(N=>({...N,tiposActividad:{...N.tiposActividad,[w]:C}}))},_=w=>{g(C=>{const N=C.selectedNee.includes(w)?C.selectedNee.filter(R=>R!==w):[...C.selectedNee,w];return{...C,selectedNee:N}})},S=async w=>{if(w.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const C=Object.entries(p.tiposActividad).map(([O,j])=>`- ${j} ítem(s) de tipo '${O}'`).join(`
`),N=p.isNee&&p.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",R=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${C}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${N}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{X0("Evaluación - Pruebas");const O="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Z=(await(await new os(O).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(R)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(Z);let V=0;H.actividades.forEach(ne=>{ne.items.forEach(L=>{V+=L.puntaje||0,L.tipo==="Comprensión de lectura"&&L.preguntas&&L.preguntas.forEach(W=>{V+=W.puntaje||0})})});const q={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:H.objetivo,instruccionesGenerales:H.instruccionesGenerales,puntajeIdeal:V,actividades:H.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(q),f(!1)}catch(O){console.error(O),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},k=async()=>{if(r)try{await l2e(r),alert("Prueba guardada con éxito.")}catch(w){console.error(w),alert("No se pudo guardar la prueba.")}},B=async w=>{if(window.confirm("¿Eliminar esta prueba?"))try{await c2e(w),(r==null?void 0:r.id)===w&&n(null)}catch(C){console.error(C),alert("No se pudo eliminar la prueba.")}},F=async w=>{o(!0);const C=new mr("p","mm","a4"),N=20,R=C.internal.pageSize.getHeight(),O=C.internal.pageSize.getWidth(),j=O-N*2;let U=N;const P=Z=>{Z.setFillColor(230,230,230),Z.rect(0,0,O,25,"F"),Z.setFontSize(9),Z.setTextColor(0,0,0),Z.text("LICEO INDUSTRIAL DE RECOLETA",N,15,{align:"left"}),Z.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",O-N,15,{align:"right"})};P(C),U=30,C.setTextColor(0,0,0),C.setFont("helvetica","bold"),C.setFontSize(16),C.text(w.nombre,O/2,U,{align:"center"}),U+=10,gl(C,{startY:U,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},w.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},w.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},w.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:w.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:w.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:Z=>{P(C)}}),U=C.lastAutoTable.finalY+10;const X=Z=>{U+Z>R-N&&(C.addPage(),P(C),U=N+15,C.setTextColor(0,0,0))},K=(Z,H)=>{C.setFont("helvetica",H.isBold?"bold":"normal"),C.setFontSize(H.fontSize);const V=Array.isArray(Z)?Z.join(`
`):Z;return C.getTextDimensions(V,{maxWidth:H.width}).h};for(const Z of w.actividades){let H=K(Z.titulo,{fontSize:12,width:j,isBold:!0})+K(Z.instrucciones,{fontSize:10,width:j})+12;X(H),C.setFont("helvetica","bold"),C.setFontSize(12),C.setTextColor(0,0,0),C.text(Z.titulo,N,U),U+=8,C.setFont("helvetica","normal"),C.setFontSize(10);const V=C.splitTextToSize(Z.instrucciones,j);C.text(V,N,U),U+=V.length*(10*.35*1.15)+4;for(const[q,ne]of Z.items.entries()){let L=0;const W=`${q+1}. ${ne.pregunta} (${ne.puntaje} pts)`;switch(L+=K(W,{fontSize:10,width:j,isBold:!0}),ne.tipo){case"Selección múltiple":ne.opciones.forEach(ie=>{L+=K(ie,{fontSize:10,width:j-5})+3}),L+=7;break;case"Verdadero o Falso":L+=10;break;case"Desarrollo":L+=30;break;case"Términos pareados":L+=ne.pares.length*12+20;break;case"Comprensión de lectura":const te=ne;L+=K(te.texto,{fontSize:10,width:j-10})+10,te.preguntas.forEach(ie=>{const Ae=`${ie.pregunta} (${ie.puntaje} pts)`;L+=K(Ae,{fontSize:10,width:j-5,isBold:!0}),ie.tipo==="Selección múltiple"?(ie.opciones.forEach(oe=>{L+=K(oe,{fontSize:10,width:j-10})+3}),L+=7):ie.tipo==="Desarrollo"&&(L+=30),L+=5}),L+=15;break}X(L),C.setFont("helvetica","bold"),C.setFontSize(10),C.setTextColor(0,0,0);const J=C.splitTextToSize(W,j);if(C.text(J,N,U),U+=J.length*5+4,C.setFont("helvetica","normal"),ne.tipo==="Selección múltiple")ne.opciones.forEach((te,ie)=>{C.text(`${String.fromCharCode(65+ie)}) ${te}`,N+5,U),U+=7});else if(ne.tipo==="Verdadero o Falso")C.text("V ______    F ______",N+5,U),U+=10;else if(ne.tipo==="Desarrollo")C.setDrawColor(200,200,200),C.setFillColor(245,245,245),C.rect(N,U,j,25,"FD"),U+=30;else if(ne.tipo==="Términos pareados"){const te=[...ne.pares.map(Ae=>Ae.definicion)].sort(()=>Math.random()-.5),ie=ne.pares.map((Ae,oe)=>[`${oe+1}. ${Ae.concepto}`,`(   ) ${te[oe]}`]);gl(C,{startY:U,head:[["Columna A: Concepto","Columna B: Definición"]],body:ie,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:Ae=>P(C)}),U=C.lastAutoTable.finalY+10}else if(ne.tipo==="Comprensión de lectura"){const te=ne;C.setFillColor(240,240,240),C.setDrawColor(200,200,200);const ie=C.splitTextToSize(te.texto,j-10),Ae=ie.length*(10*.35*1.15)+8;C.rect(N,U,j,Ae,"FD"),U+=4,C.setFont("helvetica","normal"),C.setFontSize(10),C.setTextColor(0,0,0),C.text(ie,N+5,U),U+=Ae;for(const[oe,ce]of te.preguntas.entries()){const ge=`${oe+1}. ${ce.pregunta} (${ce.puntaje} pts)`;C.setFont("helvetica","bold");const je=C.splitTextToSize(ge,j-5);C.text(je,N+5,U),U+=je.length*5+4,C.setFont("helvetica","normal"),ce.tipo==="Selección múltiple"?ce.opciones.forEach((re,Se)=>{C.text(`${String.fromCharCode(65+Se)}) ${re}`,N+10,U),U+=7}):ce.tipo==="Desarrollo"&&(C.setDrawColor(200,200,200),C.setFillColor(245,245,245),C.rect(N+5,U,j-5,25,"FD"),U+=30)}}U+=5}}C.save(`${w.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(v2e,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:k,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>F(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(oJ,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(w=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:w.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:w.instrucciones}),c.jsx("div",{className:"space-y-6",children:w.items.map((C,N)=>c.jsx(x2e,{item:C,index:N,showAnswers:d},C.id))})]},w.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:v,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:p.asignatura,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:qi.map(w=>c.jsx("option",{children:w},w))}),c.jsx("select",{name:"nivel",value:p.nivel,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:xv.map(w=>c.jsx("option",{children:w},w))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((w,C)=>c.jsx("button",{type:"button",onClick:()=>g(N=>({...N,dificultad:w})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${C===0?"rounded-l-lg":""} ${C===2?"rounded-r-lg":""}
                                            ${p.dificultad===w?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:w},w))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.isNee,onChange:w=>g(C=>({...C,isNee:w.target.checked,selectedNee:w.target.checked?C.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:$_.map(w=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(w),onChange:()=>_(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:w})]},w))})]})]})]}),c.jsx("textarea",{name:"contenido",value:p.contenido,onChange:v,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:g2e.map(w=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[w],onChange:()=>b(w),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:w})]}),p.tiposActividad[w]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),Q9[w].map(C=>c.jsx("button",{type:"button",onClick:()=>y(w,C),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[w]===C?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:C},C))]})]},w))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:e.length>0?e.map(w=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[w.asignatura," - ",w.nivel," (",new Date(w.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n(w),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>B(w.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},w.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},y2e=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=I.useState(null),[i,o]=I.useState("list"),[l,u]=I.useState(!1),[d,f]=I.useState(""),h=async(B,F)=>{if(!B.trim()||!F.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const w=`Crea una rúbrica de evaluación detallada sobre "${B}" con el propósito de "${F}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,C={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{X0("Evaluación - Rúbricas");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",P=(await(await new os(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:C}})).response).text(),X=JSON.parse(P),K={id:crypto.randomUUID(),titulo:B,descripcion:F,fechaCreacion:new Date().toISOString(),dimensiones:X.map(Z=>({id:crypto.randomUUID(),nombre:Z.dimension,niveles:{insuficiente:Z.insuficiente,suficiente:Z.suficiente,competente:Z.competente,avanzado:Z.avanzado}}))};s(K)}catch(N){console.error(N),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!a)return;const B=crypto.randomUUID(),F={id:B,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(N=>N?{...N,dimensiones:[...N.dimensiones,F]}:null),f("");const w=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(N=>N.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,C={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{X0("Evaluación - Rúbricas (Añadir Dimensión)");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",P=(await(await new os(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:C}})).response).text(),X=JSON.parse(P);s(K=>K?{...K,dimensiones:K.dimensiones.map(Z=>Z.id===B?{...Z,niveles:X,isLoading:!1}:Z)}:null)}catch(N){console.error("Error generating dimension descriptors:",N),alert("No se pudieron generar los descriptores."),s(R=>R?{...R,dimensiones:R.dimensiones.filter(O=>O.id!==B)}:null)}},g=()=>{if(!a)return;e.some(F=>F.id===a.id)?t(a):n(a),o("list"),s(null)},v=B=>{s(B),o("form")},b=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(B,F,w)=>{a&&s(C=>C?{...C,dimensiones:C.dimensiones.map(N=>N.id!==B?N:F==="nombre"?{...N,nombre:w}:{...N,niveles:{...N.niveles,[F]:w}})}:null)},_=(B,F)=>{s(w=>w?{...w,[B]:F}:null)},S=B=>{a&&s(F=>F?{...F,dimensiones:F.dimensiones.filter(w=>w.id!==B)}:null)},k=()=>{if(!a)return null;const B="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",F=`${B} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),c.jsx("input",{value:a.titulo,onChange:w=>_("titulo",w.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${B} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),c.jsx("textarea",{value:a.descripcion,onChange:w=>_("descripcion",w.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${B} mt-1`})]})]}),a.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:l||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(w=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:w},w))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(w=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:w.nombre,onChange:C=>y(w.id,"nombre",C.target.value),rows:4,className:F})}),Object.keys(w.niveles).map(C=>c.jsx("td",{className:"p-2 w-1/5",children:w.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:w.niveles[C],onChange:N=>y(w.id,C,N.target.value),rows:4,className:F})},C)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>S(w.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},w.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),c.jsx("input",{value:d,onChange:w=>f(w.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${B} mt-1`})]}),c.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),c.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(B=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:B.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>v(B),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>r(B.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},B.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):k()},w2e=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=I.useState([]),[a,s]=I.useState(null),[i,o]=I.useState(null),[l,u]=I.useState({rubricaEstaticaId:"",curso:""}),[d,f]=I.useState(null);I.useEffect(()=>{const _=f2e(n);return()=>_()},[]);const h=async _=>{_.preventDefault();const S=t.find(B=>B.id===l.rubricaEstaticaId);if(!S||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const k={nombre:S.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:S.id,resultados:{}};try{await m2e(k),u({rubricaEstaticaId:"",curso:""})}catch(B){console.error(B),alert("No se pudo crear la evaluación con rúbrica.")}},p=_=>{s(_),o(JSON.parse(JSON.stringify(_)))},g=(_,S,k)=>{i&&o(B=>{if(!B)return null;const F=JSON.parse(JSON.stringify(B));return F.resultados[_]||(F.resultados[_]={puntajes:{},feedback:""}),F.resultados[_].puntajes[S]=k,F})},v=async()=>{if(i)try{await h2e(i),s(i),alert("Cambios guardados.")}catch(_){console.error(_),alert("No se pudieron guardar los cambios.")}},b=I.useCallback(_=>{const S=i,k=t.find(R=>R.id===(S==null?void 0:S.rubricaEstaticaId));if(!S||!k)return{score:0,maxScore:0,grade:"N/A"};const B=k.dimensiones.length*4,F=S.resultados[_];if(!F)return{score:0,maxScore:B,grade:"1.0"};const w=Object.values(F.puntajes).reduce((R,O)=>R+O,0),C=1+6*(w/B),N=B>0?C.toFixed(1):"1.0";return{score:w,maxScore:B,grade:N}},[i,t]),y=async _=>{if(!i)return;const S=t.find(w=>w.id===i.rubricaEstaticaId),k=i.resultados[_];if(!S||!k||Object.keys(k.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(_);const F=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${S.dimensiones.map(w=>`${w.nombre}: ${k.puntajes[w.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${S.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{X0("Evaluación - Rúbricas Interactivas (Feedback)");const w="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",j=(await(await new os(w).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(F)).response).text();o(U=>{if(!U)return null;const P=JSON.parse(JSON.stringify(U));return P.resultados[_].feedback=j.replace(/(\*\*|\*)/g,""),P})}catch(w){console.error(w),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const _=t.find(k=>k.id===a.rubricaEstaticaId),S=e.filter(k=>k.profile===er.ESTUDIANTE&&ZC(k.curso||"")===a.curso).map(k=>k.nombreCompleto).sort();return _?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),c.jsx("p",{className:"text-slate-500",children:a.curso})]}),c.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),_.dimensiones.map(k=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:k.nombre},k.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),c.jsx("tbody",{children:S.map(k=>{var C;const{score:B,maxScore:F,grade:w}=b(k);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:k}),_.dimensiones.map(N=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(R=>{var O;return c.jsx("button",{onClick:()=>g(k,N.id,R),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((O=i.resultados[k])==null?void 0:O.puntajes[N.id])===R?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:R},R)})})},N.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[B,"/",F]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:w}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((C=i.resultados[k])==null?void 0:C.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>y(k),disabled:d===k,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===k?"...":"Generar IA"})]})})]},k)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",c.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),c.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:_=>u({...l,rubricaEstaticaId:_.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(_=>c.jsx("option",{value:_.id,children:_.titulo},_.id))]}),c.jsxs("select",{value:l.curso,onChange:_=>u({...l,curso:_.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),_s.map(_=>c.jsx("option",{value:_,children:_},_))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:r.map(_=>c.jsxs("button",{onClick:()=>p(_),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:_.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:_.curso})]},_.id))})]})]})},E2e=({allUsers:e})=>{const[t,r]=I.useState(""),n=I.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===er.ESTUDIANTE&&s.curso).map(s=>ZC(s.curso)))).sort(),[e]),a=I.useMemo(()=>{const s=e.filter(i=>i.profile===er.ESTUDIANTE);return t?s.filter(i=>ZC(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",c.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>c.jsx("option",{value:s,children:s},s))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:ZC(s.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},C2e=()=>{const[e,t]=I.useState("pruebas"),[r,n]=I.useState([]),[a,s]=I.useState([]),[i,o]=I.useState(!0);I.useEffect(()=>{o(!0);const f=p2e(n),h=u2e(p=>{s(p),o(!1)});return()=>{f(),h()}},[]);const l=async f=>{try{await d2e(f)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async f=>{try{await A2e(f)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:f,label:h})=>c.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),c.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&c.jsx(b2e,{}),e==="rubricas"&&c.jsx(y2e,{rubricas:a,onSave:l,onDelete:u,onCreate:l}),e==="rubricasInteractivas"&&c.jsx(w2e,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&c.jsx(E2e,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Y_={};Y_.version="0.18.5";var oZ=1252,_2e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],lD={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},cD=function(e){_2e.indexOf(e)!=-1&&(oZ=lD[0]=e)};function S2e(){cD(1252)}var gd=function(e){cD(e)};function uD(){gd(1200),S2e()}function H9(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function N2e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function lZ(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Tb=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?N2e(e.slice(2)):t==254&&r==255?lZ(e.slice(2)):t==65279?e.slice(1):e},_E=function(t){return String.fromCharCode(t)},V9=function(t){return String.fromCharCode(t)},jy,C0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Fy(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=C0.charAt(s)+C0.charAt(i)+C0.charAt(o)+C0.charAt(l);return t}function Fc(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=C0.indexOf(e.charAt(u++)),i=C0.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=C0.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=C0.indexOf(e.charAt(u++)),a=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(a));return t}var mn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),dh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Z0(e){return mn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function z9(e){return mn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var _c=function(t){return mn?dh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function mN(e){if(typeof ArrayBuffer>"u")return _c(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function um(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function k2e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function dD(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return dD(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Gi=mn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:dh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function B2e(e){for(var t=[],r=0,n=e.length+250,a=Z0(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Z0(65535),n=65530)}return t.push(a.slice(0,r)),Gi(t)}var vl=/\u0000/g,Ib=/[\u0001-\u0006]/g;function Vv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function vd(e,t){var r=""+e;return r.length>=t?r:ws("0",t-r.length)+r}function AD(e,t){var r=""+e;return r.length>=t?r:ws(" ",t-r.length)+r}function J_(e,t){var r=""+e;return r.length>=t?r:r+ws(" ",t-r.length)}function T2e(e,t){var r=""+Math.round(e);return r.length>=t?r:ws("0",t-r.length)+r}function I2e(e,t){var r=""+e;return r.length>=t?r:ws("0",t-r.length)+r}var $9=Math.pow(2,32);function Qg(e,t){if(e>$9||e<-$9)return T2e(e,t);var r=Math.round(e);return I2e(r,t)}function Z_(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var K9=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],FB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function j2e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Dr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},G9={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},F2e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function eS(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,l=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+l,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,l=u,u=d;if(d>t&&(u>t?(d=l,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function rp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=M2e(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var cZ=new Date(1899,11,31,0,0,0),O2e=cZ.getTime(),D2e=new Date(1900,2,1,0,0,0);function uZ(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=D2e&&(r+=1440*60*1e3),(r-(O2e+(e.getTimezoneOffset()-cZ.getTimezoneOffset())*6e4))/(1440*60*1e3)}function fD(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function R2e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function P2e(e){var t=e<0?12:11,r=fD(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function L2e(e){var t=fD(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Oy(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=P2e(e):t===10?r=e.toFixed(10).substr(0,12):r=L2e(e),fD(R2e(r.toUpperCase()))}function Dp(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Oy(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ju(14,uZ(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function M2e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function U2e(e,t,r,n){var a="",s=0,i=0,o=r.y,l,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,u=t.length;break;case 3:return FB[r.m-1][1];case 5:return FB[r.m-1][0];default:return FB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,u=t.length;break;case 3:return K9[r.q][0];default:return K9[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?vd(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=vd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?vd(l,u):"";return d}function _0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var dZ=/%/g;function Q2e(e,t,r){var n=t.replace(dZ,""),a=t.length-n.length;return Mf(e,n,r*Math.pow(10,2*a))+ws("%",a)}function H2e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Mf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function AZ(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+AZ(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var fZ=/# (\?+)( ?)\/( ?)(\d+)/;function V2e(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?ws(" ",e[1].length+1+e[4].length):AD(i,e[1].length)+e[2]+"/"+e[3]+vd(o,e[4].length))}function z2e(e,t,r){return r+(t===0?"":""+t)+ws(" ",e[1].length+2+e[4].length)}var hZ=/^#*0*\.([0#]+)/,mZ=/\).*[0#]/,pZ=/\(###\) ###\\?-####/;function ul(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function q9(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function W9(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function $2e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function K2e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function fu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(mZ)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?fu("n",n,r):"("+fu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return H2e(e,t,r);if(t.indexOf("%")!==-1)return Q2e(e,t,r);if(t.indexOf("E")!==-1)return AZ(t,r);if(t.charCodeAt(0)===36)return"$"+fu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Qg(l,t.length);if(t.match(/^[#?]+$/))return a=Qg(r,0),a==="0"&&(a=""),a.length>t.length?a:ul(t.substr(0,t.length-a.length))+a;if(s=t.match(fZ))return V2e(s,l,u);if(t.match(/^#+0+$/))return u+Qg(l,t.length-t.indexOf("0"));if(s=t.match(hZ))return a=q9(r,s[1].length).replace(/^([^\.]+)$/,"$1."+ul(s[1])).replace(/\.$/,"."+ul(s[1])).replace(/\.(\d*)$/,function(g,v){return"."+v+ws("0",ul(s[1]).length-v.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+q9(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+_0(Qg(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+fu(e,t,-r):_0(""+(Math.floor(r)+$2e(r,s[1].length)))+"."+vd(W9(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return fu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Vv(fu(e,t.replace(/[\\-]/g,""),r)),i=0,Vv(Vv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(pZ))return a=fu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=eS(l,Math.pow(10,i)-1,!1),a=""+u,d=Mf("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=J_(o[2],i),d.length<s[4].length&&(d=ul(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=eS(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?AD(o[1],i)+s[2]+"/"+s[3]+J_(o[2],i):ws(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Qg(r,0),t.length<=a.length?a:ul(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return ul(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=W9(r,s[1].length),r<0?"-"+fu(e,t,-r):_0(K2e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?vd(0,3-g.length):"")+g})+"."+vd(i,s[1].length);switch(t){case"###,##0.00":return fu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=_0(Qg(l,0));return p!=="0"?u+p:"";case"###,###.00":return fu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return fu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function G2e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Mf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function q2e(e,t,r){var n=t.replace(dZ,""),a=t.length-n.length;return Mf(e,n,r*Math.pow(10,2*a))+ws("%",a)}function gZ(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+gZ(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function dA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(mZ)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?dA("n",n,r):"("+dA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return G2e(e,t,r);if(t.indexOf("%")!==-1)return q2e(e,t,r);if(t.indexOf("E")!==-1)return gZ(t,r);if(t.charCodeAt(0)===36)return"$"+dA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+vd(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:ul(t.substr(0,t.length-a.length))+a;if(s=t.match(fZ))return z2e(s,l,u);if(t.match(/^#+0+$/))return u+vd(l,t.length-t.indexOf("0"));if(s=t.match(hZ))return a=(""+r).replace(/^([^\.]+)$/,"$1."+ul(s[1])).replace(/\.$/,"."+ul(s[1])),a=a.replace(/\.(\d*)$/,function(g,v){return"."+v+ws("0",ul(s[1]).length-v.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+_0(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+dA(e,t,-r):_0(""+r)+"."+ws("0",s[1].length);if(s=t.match(/^#,#*,#0/))return dA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Vv(dA(e,t.replace(/[\\-]/g,""),r)),i=0,Vv(Vv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(pZ))return a=dA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=eS(l,Math.pow(10,i)-1,!1),a=""+u,d=Mf("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=J_(o[2],i),d.length<s[4].length&&(d=ul(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=eS(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?AD(o[1],i)+s[2]+"/"+s[3]+J_(o[2],i):ws(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:ul(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return ul(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+dA(e,t,-r):_0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?vd(0,3-g.length):"")+g})+"."+vd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=_0(""+l);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return dA(e,t.slice(0,t.lastIndexOf(".")),r)+ul(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Mf(e,t,r){return(r|0)===r?dA(e,t,r):fu(e,t,r)}function W2e(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var vZ=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Qx(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Z_(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(vZ))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function X2e(e,t,r,n){for(var a=[],s="",i=0,o="",l="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!Z_(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=rp(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=rp(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},l=o;break;case"A":case"a":case"上":var v={t:o,v:o};if(u==null&&(u=rp(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(v.v=u.H>=12?"下午":"上午"),v.t="T",i+=5,h="h"):(v.t="t",++i),u==null&&v.t==="T")return"";a[a.length]=v,l=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(vZ)){if(u==null&&(u=rp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Qx(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},l=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var b=0,y=0,_;for(i=a.length-1,l="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,l="h",b<1&&(b=1);break;case"s":(_=a[i].v.match(/\.0+$/))&&(y=Math.max(y,_[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=a[i].t;break;case"m":l==="s"&&(a[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[i].v.match(/[Hh]/)&&(b=1),b<2&&a[i].v.match(/[Mm]/)&&(b=2),b<3&&a[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var S="",k;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=U2e(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(k=i+1;a[k]!=null&&((o=a[k].t)==="?"||o==="D"||(o===" "||o==="t")&&a[k+1]!=null&&(a[k+1].t==="?"||a[k+1].t==="t"&&a[k+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[k].v==="/"||a[k].v===" "&&a[k+1]!=null&&a[k+1].t=="?"));)a[i].v+=a[k].v,a[k]={v:"",t:";"},++k;S+=a[i].v,i=k-1;break;case"G":a[i].t="t",a[i].v=Dp(t,r);break}var B="",F,w;if(S.length>0){S.charCodeAt(0)==40?(F=t<0&&S.charCodeAt(0)===45?-t:t,w=Mf("n",S,F)):(F=t<0&&n>1?-t:t,w=Mf("n",S,F),F<0&&a[0]&&a[0].t=="t"&&(w=w.substr(1),a[0].v="-"+a[0].v)),k=w.length-1;var C=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){C=i;break}var N=a.length;if(C===a.length&&w.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(k>=a[i].v.length-1?(k-=a[i].v.length,a[i].v=w.substr(k+1,a[i].v.length)):k<0?a[i].v="":(a[i].v=w.substr(0,k+1),k=-1),a[i].t="t",N=i);k>=0&&N<a.length&&(a[N].v=w.substr(0,k+1)+a[N].v)}else if(C!==a.length&&w.indexOf("E")===-1){for(k=w.indexOf(".")-1,i=C;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===C?a[i].v.indexOf(".")-1:a[i].v.length-1,B=a[i].v.substr(d+1);d>=0;--d)k>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(B=w.charAt(k--)+B);a[i].v=B,a[i].t="t",N=i}for(k>=0&&N<a.length&&(a[N].v=w.substr(0,k+1)+a[N].v),k=w.indexOf(".")+1,i=C;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==C)){for(d=a[i].v.indexOf(".")>-1&&i===C?a[i].v.indexOf(".")+1:0,B=a[i].v.substr(0,d);d<a[i].v.length;++d)k<w.length&&(B+=w.charAt(k++));a[i].v=B,a[i].t="t",N=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(F=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=Mf(a[i].t,a[i].v,F),a[i].t="t");var R="";for(i=0;i!==a.length;++i)a[i]!=null&&(R+=a[i].v);return R}var X9=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Y9(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Y2e(e,t){var r=W2e(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(X9),o=r[1].match(X9);return Y9(t,i)?[n,r[0]]:Y9(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function ju(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Dr)[e],n==null&&(n=r.table&&r.table[G9[e]]||Dr[G9[e]]),n==null&&(n=F2e[e]||"General");break}if(Z_(n,0))return Dp(t,r);t instanceof Date&&(t=uZ(t,r.date1904));var a=Y2e(n,t);if(Z_(a[1]))return Dp(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return X2e(a[1],t,r,a[0])}function Uf(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Dr[r]==null){t<0&&(t=r);continue}if(Dr[r]==e){t=r;break}}t<0&&(t=391)}return Dr[t]=e,t}function pN(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Uf(e[t],t)}function Hx(){Dr=j2e()}var J2e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},xZ=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Z2e(e){var t=typeof e=="number"?Dr[e]:e;return t=t.replace(xZ,"(\\d+)"),new RegExp("^"+t+"$")}function eEe(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(t.match(xZ)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":l=p;break;case"m":i>=0?o=p:a=p;break}}),l>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var tEe=function(){var e={};e.version="1.2.0";function t(){for(var w=0,C=new Array(256),N=0;N!=256;++N)w=N,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,C[N]=w;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function n(w){var C=0,N=0,R=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)O[R]=w[R];for(R=0;R!=256;++R)for(N=w[R],C=256+R;C<4096;C+=256)N=O[C]=N>>>8^w[N&255];var j=[];for(R=1;R!=16;++R)j[R-1]=typeof Int32Array<"u"?O.subarray(R*256,R*256+256):O.slice(R*256,R*256+256);return j}var a=n(r),s=a[0],i=a[1],o=a[2],l=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],g=a[9],v=a[10],b=a[11],y=a[12],_=a[13],S=a[14];function k(w,C){for(var N=C^-1,R=0,O=w.length;R<O;)N=N>>>8^r[(N^w.charCodeAt(R++))&255];return~N}function B(w,C){for(var N=C^-1,R=w.length-15,O=0;O<R;)N=S[w[O++]^N&255]^_[w[O++]^N>>8&255]^y[w[O++]^N>>16&255]^b[w[O++]^N>>>24]^v[w[O++]]^g[w[O++]]^p[w[O++]]^h[w[O++]]^f[w[O++]]^d[w[O++]]^u[w[O++]]^l[w[O++]]^o[w[O++]]^i[w[O++]]^s[w[O++]]^r[w[O++]];for(R+=15;O<R;)N=N>>>8^r[(N^w[O++])&255];return~N}function F(w,C){for(var N=C^-1,R=0,O=w.length,j=0,U=0;R<O;)j=w.charCodeAt(R++),j<128?N=N>>>8^r[(N^j)&255]:j<2048?(N=N>>>8^r[(N^(192|j>>6&31))&255],N=N>>>8^r[(N^(128|j&63))&255]):j>=55296&&j<57344?(j=(j&1023)+64,U=w.charCodeAt(R++)&1023,N=N>>>8^r[(N^(240|j>>8&7))&255],N=N>>>8^r[(N^(128|j>>2&63))&255],N=N>>>8^r[(N^(128|U>>6&15|(j&3)<<4))&255],N=N>>>8^r[(N^(128|U&63))&255]):(N=N>>>8^r[(N^(224|j>>12&15))&255],N=N>>>8^r[(N^(128|j>>6&63))&255],N=N>>>8^r[(N^(128|j&63))&255]);return~N}return e.table=r,e.bstr=k,e.buf=B,e.str=F,e}(),Er=function(){var t={};t.version="1.2.1";function r(fe,Be){for(var Ee=fe.split("/"),Ce=Be.split("/"),Ne=0,Te=0,Ye=Math.min(Ee.length,Ce.length);Ne<Ye;++Ne){if(Te=Ee[Ne].length-Ce[Ne].length)return Te;if(Ee[Ne]!=Ce[Ne])return Ee[Ne]<Ce[Ne]?-1:1}return Ee.length-Ce.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(0,Be+1)}function a(fe){if(fe.charAt(fe.length-1)=="/")return a(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(Be+1)}function s(fe,Be){typeof Be=="string"&&(Be=new Date(Be));var Ee=Be.getHours();Ee=Ee<<6|Be.getMinutes(),Ee=Ee<<5|Be.getSeconds()>>>1,fe.write_shift(2,Ee);var Ce=Be.getFullYear()-1980;Ce=Ce<<4|Be.getMonth()+1,Ce=Ce<<5|Be.getDate(),fe.write_shift(2,Ce)}function i(fe){var Be=fe.read_shift(2)&65535,Ee=fe.read_shift(2)&65535,Ce=new Date,Ne=Ee&31;Ee>>>=5;var Te=Ee&15;Ee>>>=4,Ce.setMilliseconds(0),Ce.setFullYear(Ee+1980),Ce.setMonth(Te-1),Ce.setDate(Ne);var Ye=Be&31;Be>>>=5;var ut=Be&63;return Be>>>=6,Ce.setHours(Be),Ce.setMinutes(ut),Ce.setSeconds(Ye<<1),Ce}function o(fe){ho(fe,0);for(var Be={},Ee=0;fe.l<=fe.length-4;){var Ce=fe.read_shift(2),Ne=fe.read_shift(2),Te=fe.l+Ne,Ye={};switch(Ce){case 21589:Ee=fe.read_shift(1),Ee&1&&(Ye.mtime=fe.read_shift(4)),Ne>5&&(Ee&2&&(Ye.atime=fe.read_shift(4)),Ee&4&&(Ye.ctime=fe.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}fe.l=Te,Be[Ce]=Ye}return Be}var l;function u(){return l||(l={})}function d(fe,Be){if(fe[0]==80&&fe[1]==75)return pt(fe,Be);if((fe[0]|32)==109&&(fe[1]|32)==105)return gn(fe,Be);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ee=3,Ce=512,Ne=0,Te=0,Ye=0,ut=0,$e=0,tt=[],at=fe.slice(0,512);ho(at,0);var Tt=f(at);switch(Ee=Tt[0],Ee){case 3:Ce=512;break;case 4:Ce=4096;break;case 0:if(Tt[1]==0)return pt(fe,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}Ce!==512&&(at=fe.slice(0,Ce),ho(at,28));var Vt=fe.slice(0,Ce);h(at,Ee);var Yt=at.read_shift(4,"i");if(Ee===3&&Yt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Yt);at.l+=4,Ye=at.read_shift(4,"i"),at.l+=4,at.chk("00100000","Mini Stream Cutoff Size: "),ut=at.read_shift(4,"i"),Ne=at.read_shift(4,"i"),$e=at.read_shift(4,"i"),Te=at.read_shift(4,"i");for(var Ht=-1,Kt=0;Kt<109&&(Ht=at.read_shift(4,"i"),!(Ht<0));++Kt)tt[Kt]=Ht;var _r=p(fe,Ce);b($e,Te,_r,Ce,tt);var an=_(_r,Ye,tt,Ce);an[Ye].name="!Directory",Ne>0&&ut!==U&&(an[ut].name="!MiniFAT"),an[tt[0]].name="!FAT",an.fat_addrs=tt,an.ssz=Ce;var sn={},dn=[],ds=[],bo=[];S(Ye,an,_r,dn,Ne,sn,ds,ut),g(ds,bo,dn),dn.shift();var As={FileIndex:ds,FullPaths:bo};return Be&&Be.raw&&(As.raw={header:Vt,sectors:_r}),As}function f(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(P,"Header Signature: "),fe.l+=16;var Be=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Be]}function h(fe,Be){var Ee=9;switch(fe.l+=2,Ee=fe.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function p(fe,Be){for(var Ee=Math.ceil(fe.length/Be)-1,Ce=[],Ne=1;Ne<Ee;++Ne)Ce[Ne-1]=fe.slice(Ne*Be,(Ne+1)*Be);return Ce[Ee-1]=fe.slice(Ee*Be),Ce}function g(fe,Be,Ee){for(var Ce=0,Ne=0,Te=0,Ye=0,ut=0,$e=Ee.length,tt=[],at=[];Ce<$e;++Ce)tt[Ce]=at[Ce]=Ce,Be[Ce]=Ee[Ce];for(;ut<at.length;++ut)Ce=at[ut],Ne=fe[Ce].L,Te=fe[Ce].R,Ye=fe[Ce].C,tt[Ce]===Ce&&(Ne!==-1&&tt[Ne]!==Ne&&(tt[Ce]=tt[Ne]),Te!==-1&&tt[Te]!==Te&&(tt[Ce]=tt[Te])),Ye!==-1&&(tt[Ye]=Ce),Ne!==-1&&Ce!=tt[Ce]&&(tt[Ne]=tt[Ce],at.lastIndexOf(Ne)<ut&&at.push(Ne)),Te!==-1&&Ce!=tt[Ce]&&(tt[Te]=tt[Ce],at.lastIndexOf(Te)<ut&&at.push(Te));for(Ce=1;Ce<$e;++Ce)tt[Ce]===Ce&&(Te!==-1&&tt[Te]!==Te?tt[Ce]=tt[Te]:Ne!==-1&&tt[Ne]!==Ne&&(tt[Ce]=tt[Ne]));for(Ce=1;Ce<$e;++Ce)if(fe[Ce].type!==0){if(ut=Ce,ut!=tt[ut])do ut=tt[ut],Be[Ce]=Be[ut]+"/"+Be[Ce];while(ut!==0&&tt[ut]!==-1&&ut!=tt[ut]);tt[Ce]=-1}for(Be[0]+="/",Ce=1;Ce<$e;++Ce)fe[Ce].type!==2&&(Be[Ce]+="/")}function v(fe,Be,Ee){for(var Ce=fe.start,Ne=fe.size,Te=[],Ye=Ce;Ee&&Ne>0&&Ye>=0;)Te.push(Be.slice(Ye*j,Ye*j+j)),Ne-=j,Ye=Jm(Ee,Ye*4);return Te.length===0?yt(0):Gi(Te).slice(0,fe.size)}function b(fe,Be,Ee,Ce,Ne){var Te=U;if(fe===U){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var Ye=Ee[fe],ut=(Ce>>>2)-1;if(!Ye)return;for(var $e=0;$e<ut&&(Te=Jm(Ye,$e*4))!==U;++$e)Ne.push(Te);b(Jm(Ye,Ce-4),Be-1,Ee,Ce,Ne)}}function y(fe,Be,Ee,Ce,Ne){var Te=[],Ye=[];Ne||(Ne=[]);var ut=Ce-1,$e=0,tt=0;for($e=Be;$e>=0;){Ne[$e]=!0,Te[Te.length]=$e,Ye.push(fe[$e]);var at=Ee[Math.floor($e*4/Ce)];if(tt=$e*4&ut,Ce<4+tt)throw new Error("FAT boundary crossed: "+$e+" 4 "+Ce);if(!fe[at])break;$e=Jm(fe[at],tt)}return{nodes:Te,data:cQ([Ye])}}function _(fe,Be,Ee,Ce){var Ne=fe.length,Te=[],Ye=[],ut=[],$e=[],tt=Ce-1,at=0,Tt=0,Vt=0,Yt=0;for(at=0;at<Ne;++at)if(ut=[],Vt=at+Be,Vt>=Ne&&(Vt-=Ne),!Ye[Vt]){$e=[];var Ht=[];for(Tt=Vt;Tt>=0;){Ht[Tt]=!0,Ye[Tt]=!0,ut[ut.length]=Tt,$e.push(fe[Tt]);var Kt=Ee[Math.floor(Tt*4/Ce)];if(Yt=Tt*4&tt,Ce<4+Yt)throw new Error("FAT boundary crossed: "+Tt+" 4 "+Ce);if(!fe[Kt]||(Tt=Jm(fe[Kt],Yt),Ht[Tt]))break}Te[Vt]={nodes:ut,data:cQ([$e])}}return Te}function S(fe,Be,Ee,Ce,Ne,Te,Ye,ut){for(var $e=0,tt=Ce.length?2:0,at=Be[fe].data,Tt=0,Vt=0,Yt;Tt<at.length;Tt+=128){var Ht=at.slice(Tt,Tt+128);ho(Ht,64),Vt=Ht.read_shift(2),Yt=bD(Ht,0,Vt-tt),Ce.push(Yt);var Kt={name:Yt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},_r=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);_r!==0&&(Kt.ct=k(Ht,Ht.l-8));var an=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);an!==0&&(Kt.mt=k(Ht,Ht.l-8)),Kt.start=Ht.read_shift(4,"i"),Kt.size=Ht.read_shift(4,"i"),Kt.size<0&&Kt.start<0&&(Kt.size=Kt.type=0,Kt.start=U,Kt.name=""),Kt.type===5?($e=Kt.start,Ne>0&&$e!==U&&(Be[$e].name="!StreamData")):Kt.size>=4096?(Kt.storage="fat",Be[Kt.start]===void 0&&(Be[Kt.start]=y(Ee,Kt.start,Be.fat_addrs,Be.ssz)),Be[Kt.start].name=Kt.name,Kt.content=Be[Kt.start].data.slice(0,Kt.size)):(Kt.storage="minifat",Kt.size<0?Kt.size=0:$e!==U&&Kt.start!==U&&Be[$e]&&(Kt.content=v(Kt,Be[$e].data,(Be[ut]||{}).data))),Kt.content&&ho(Kt.content,0),Te[Yt]=Kt,Ye.push(Kt)}}function k(fe,Be){return new Date((Ec(fe,Be+4)/1e7*Math.pow(2,32)+Ec(fe,Be)/1e7-11644473600)*1e3)}function B(fe,Be){return u(),d(l.readFileSync(fe),Be)}function F(fe,Be){var Ee=Be&&Be.type;switch(Ee||mn&&Buffer.isBuffer(fe)&&(Ee="buffer"),Ee||"base64"){case"file":return B(fe,Be);case"base64":return d(_c(Fc(fe)),Be);case"binary":return d(_c(fe),Be)}return d(fe,Be)}function w(fe,Be){var Ee=Be||{},Ce=Ee.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=Ce+"/",fe.FileIndex[0]={name:Ce,type:5}),Ee.CLSID&&(fe.FileIndex[0].clsid=Ee.CLSID),C(fe)}function C(fe){var Be="Sh33tJ5";if(!Er.find(fe,"/"+Be)){var Ee=yt(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,fe.FileIndex.push({name:Be,type:2,content:Ee,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Be),N(fe)}}function N(fe,Be){w(fe);for(var Ee=!1,Ce=!1,Ne=fe.FullPaths.length-1;Ne>=0;--Ne){var Te=fe.FileIndex[Ne];switch(Te.type){case 0:Ce?Ee=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:Ce=!0,isNaN(Te.R*Te.L*Te.C)&&(Ee=!0),Te.R>-1&&Te.L>-1&&Te.R==Te.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!Be)){var Ye=new Date(1987,1,19),ut=0,$e=Object.create?Object.create(null):{},tt=[];for(Ne=0;Ne<fe.FullPaths.length;++Ne)$e[fe.FullPaths[Ne]]=!0,fe.FileIndex[Ne].type!==0&&tt.push([fe.FullPaths[Ne],fe.FileIndex[Ne]]);for(Ne=0;Ne<tt.length;++Ne){var at=n(tt[Ne][0]);Ce=$e[at],Ce||(tt.push([at,{name:a(at).replace("/",""),type:1,clsid:K,ct:Ye,mt:Ye,content:null}]),$e[at]=!0)}for(tt.sort(function(Yt,Ht){return r(Yt[0],Ht[0])}),fe.FullPaths=[],fe.FileIndex=[],Ne=0;Ne<tt.length;++Ne)fe.FullPaths[Ne]=tt[Ne][0],fe.FileIndex[Ne]=tt[Ne][1];for(Ne=0;Ne<tt.length;++Ne){var Tt=fe.FileIndex[Ne],Vt=fe.FullPaths[Ne];if(Tt.name=a(Vt).replace("/",""),Tt.L=Tt.R=Tt.C=-(Tt.color=1),Tt.size=Tt.content?Tt.content.length:0,Tt.start=0,Tt.clsid=Tt.clsid||K,Ne===0)Tt.C=tt.length>1?1:-1,Tt.size=0,Tt.type=5;else if(Vt.slice(-1)=="/"){for(ut=Ne+1;ut<tt.length&&n(fe.FullPaths[ut])!=Vt;++ut);for(Tt.C=ut>=tt.length?-1:ut,ut=Ne+1;ut<tt.length&&n(fe.FullPaths[ut])!=n(Vt);++ut);Tt.R=ut>=tt.length?-1:ut,Tt.type=1}else n(fe.FullPaths[Ne+1]||"")==n(Vt)&&(Tt.R=Ne+1),Tt.type=2}}}function R(fe,Be){var Ee=Be||{};if(Ee.fileType=="mad")return $t(fe,Ee);switch(N(fe),Ee.fileType){case"zip":return gt(fe,Ee)}var Ce=function(Yt){for(var Ht=0,Kt=0,_r=0;_r<Yt.FileIndex.length;++_r){var an=Yt.FileIndex[_r];if(an.content){var sn=an.content.length;sn>0&&(sn<4096?Ht+=sn+63>>6:Kt+=sn+511>>9)}}for(var dn=Yt.FullPaths.length+3>>2,ds=Ht+7>>3,bo=Ht+127>>7,As=ds+Kt+dn+bo,ei=As+127>>7,js=ei<=109?0:Math.ceil((ei-109)/127);As+ei+js+127>>7>ei;)js=++ei<=109?0:Math.ceil((ei-109)/127);var vi=[1,js,ei,bo,dn,Kt,Ht,0];return Yt.FileIndex[0].size=Ht<<6,vi[7]=(Yt.FileIndex[0].start=vi[0]+vi[1]+vi[2]+vi[3]+vi[4]+vi[5])+(vi[6]+7>>3),vi}(fe),Ne=yt(Ce[7]<<9),Te=0,Ye=0;{for(Te=0;Te<8;++Te)Ne.write_shift(1,X[Te]);for(Te=0;Te<8;++Te)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Te=0;Te<3;++Te)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,Ce[2]),Ne.write_shift(4,Ce[0]+Ce[1]+Ce[2]+Ce[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,Ce[3]?Ce[0]+Ce[1]+Ce[2]-1:U),Ne.write_shift(4,Ce[3]),Ne.write_shift(-4,Ce[1]?Ce[0]-1:U),Ne.write_shift(4,Ce[1]),Te=0;Te<109;++Te)Ne.write_shift(-4,Te<Ce[2]?Ce[1]+Te:-1)}if(Ce[1])for(Ye=0;Ye<Ce[1];++Ye){for(;Te<236+Ye*127;++Te)Ne.write_shift(-4,Te<Ce[2]?Ce[1]+Te:-1);Ne.write_shift(-4,Ye===Ce[1]-1?U:Ye+1)}var ut=function(Yt){for(Ye+=Yt;Te<Ye-1;++Te)Ne.write_shift(-4,Te+1);Yt&&(++Te,Ne.write_shift(-4,U))};for(Ye=Te=0,Ye+=Ce[1];Te<Ye;++Te)Ne.write_shift(-4,Z.DIFSECT);for(Ye+=Ce[2];Te<Ye;++Te)Ne.write_shift(-4,Z.FATSECT);ut(Ce[3]),ut(Ce[4]);for(var $e=0,tt=0,at=fe.FileIndex[0];$e<fe.FileIndex.length;++$e)at=fe.FileIndex[$e],at.content&&(tt=at.content.length,!(tt<4096)&&(at.start=Ye,ut(tt+511>>9)));for(ut(Ce[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,Z.ENDOFCHAIN);for(Ye=Te=0,$e=0;$e<fe.FileIndex.length;++$e)at=fe.FileIndex[$e],at.content&&(tt=at.content.length,!(!tt||tt>=4096)&&(at.start=Ye,ut(tt+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,Z.ENDOFCHAIN);for(Te=0;Te<Ce[4]<<2;++Te){var Tt=fe.FullPaths[Te];if(!Tt||Tt.length===0){for($e=0;$e<17;++$e)Ne.write_shift(4,0);for($e=0;$e<3;++$e)Ne.write_shift(4,-1);for($e=0;$e<12;++$e)Ne.write_shift(4,0);continue}at=fe.FileIndex[Te],Te===0&&(at.start=at.size?at.start-1:U);var Vt=Te===0&&Ee.root||at.name;if(tt=2*(Vt.length+1),Ne.write_shift(64,Vt,"utf16le"),Ne.write_shift(2,tt),Ne.write_shift(1,at.type),Ne.write_shift(1,at.color),Ne.write_shift(-4,at.L),Ne.write_shift(-4,at.R),Ne.write_shift(-4,at.C),at.clsid)Ne.write_shift(16,at.clsid,"hex");else for($e=0;$e<4;++$e)Ne.write_shift(4,0);Ne.write_shift(4,at.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,at.start),Ne.write_shift(4,at.size),Ne.write_shift(4,0)}for(Te=1;Te<fe.FileIndex.length;++Te)if(at=fe.FileIndex[Te],at.size>=4096)if(Ne.l=at.start+1<<9,mn&&Buffer.isBuffer(at.content))at.content.copy(Ne,Ne.l,0,at.size),Ne.l+=at.size+511&-512;else{for($e=0;$e<at.size;++$e)Ne.write_shift(1,at.content[$e]);for(;$e&511;++$e)Ne.write_shift(1,0)}for(Te=1;Te<fe.FileIndex.length;++Te)if(at=fe.FileIndex[Te],at.size>0&&at.size<4096)if(mn&&Buffer.isBuffer(at.content))at.content.copy(Ne,Ne.l,0,at.size),Ne.l+=at.size+63&-64;else{for($e=0;$e<at.size;++$e)Ne.write_shift(1,at.content[$e]);for(;$e&63;++$e)Ne.write_shift(1,0)}if(mn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function O(fe,Be){var Ee=fe.FullPaths.map(function($e){return $e.toUpperCase()}),Ce=Ee.map(function($e){var tt=$e.split("/");return tt[tt.length-($e.slice(-1)=="/"?2:1)]}),Ne=!1;Be.charCodeAt(0)===47?(Ne=!0,Be=Ee[0].slice(0,-1)+Be):Ne=Be.indexOf("/")!==-1;var Te=Be.toUpperCase(),Ye=Ne===!0?Ee.indexOf(Te):Ce.indexOf(Te);if(Ye!==-1)return fe.FileIndex[Ye];var ut=!Te.match(Ib);for(Te=Te.replace(vl,""),ut&&(Te=Te.replace(Ib,"!")),Ye=0;Ye<Ee.length;++Ye)if((ut?Ee[Ye].replace(Ib,"!"):Ee[Ye]).replace(vl,"")==Te||(ut?Ce[Ye].replace(Ib,"!"):Ce[Ye]).replace(vl,"")==Te)return fe.FileIndex[Ye];return null}var j=64,U=-2,P="d0cf11e0a1b11ae1",X=[208,207,17,224,161,177,26,225],K="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:P,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:K,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(fe,Be,Ee){u();var Ce=R(fe,Ee);l.writeFileSync(Be,Ce)}function V(fe){for(var Be=new Array(fe.length),Ee=0;Ee<fe.length;++Ee)Be[Ee]=String.fromCharCode(fe[Ee]);return Be.join("")}function q(fe,Be){var Ee=R(fe,Be);switch(Be&&Be.type||"buffer"){case"file":return u(),l.writeFileSync(Be.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:V(Ee);case"base64":return Fy(typeof Ee=="string"?Ee:V(Ee));case"buffer":if(mn)return Buffer.isBuffer(Ee)?Ee:dh(Ee);case"array":return typeof Ee=="string"?_c(Ee):Ee}return Ee}var ne;function L(fe){try{var Be=fe.InflateRaw,Ee=new Be;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)ne=fe;else throw new Error("zlib does not expose bytesRead")}catch(Ce){console.error("cannot use native zlib: "+(Ce.message||Ce))}}function W(fe,Be){if(!ne)return jr(fe,Be);var Ee=ne.InflateRaw,Ce=new Ee,Ne=Ce._processChunk(fe.slice(fe.l),Ce._finishFlushFlag);return fe.l+=Ce.bytesRead,Ne}function J(fe){return ne?ne.deflateRawSync(fe):Qt(fe)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(fe){var Be=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var ce=typeof Uint8Array<"u",ge=ce?new Uint8Array(256):[],je=0;je<256;++je)ge[je]=oe(je);function re(fe,Be){var Ee=ge[fe&255];return Be<=8?Ee>>>8-Be:(Ee=Ee<<8|ge[fe>>8&255],Be<=16?Ee>>>16-Be:(Ee=Ee<<8|ge[fe>>16&255],Ee>>>24-Be))}function Se(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=6?0:fe[Ce+1]<<8))>>>Ee&3}function De(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=5?0:fe[Ce+1]<<8))>>>Ee&7}function _e(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=4?0:fe[Ce+1]<<8))>>>Ee&15}function he(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=3?0:fe[Ce+1]<<8))>>>Ee&31}function Ie(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=1?0:fe[Ce+1]<<8))>>>Ee&127}function He(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3,Te=(1<<Ee)-1,Ye=fe[Ne]>>>Ce;return Ee<8-Ce||(Ye|=fe[Ne+1]<<8-Ce,Ee<16-Ce)||(Ye|=fe[Ne+2]<<16-Ce,Ee<24-Ce)||(Ye|=fe[Ne+3]<<24-Ce),Ye&Te}function Xe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ce<=5?fe[Ne]|=(Ee&7)<<Ce:(fe[Ne]|=Ee<<Ce&255,fe[Ne+1]=(Ee&7)>>8-Ce),Be+3}function ye(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee=(Ee&1)<<Ce,fe[Ne]|=Ee,Be+1}function Oe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee<<=Ce,fe[Ne]|=Ee&255,Ee>>>=8,fe[Ne+1]=Ee,Be+8}function Pe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee<<=Ce,fe[Ne]|=Ee&255,Ee>>>=8,fe[Ne+1]=Ee&255,fe[Ne+2]=Ee>>>8,Be+16}function qe(fe,Be){var Ee=fe.length,Ce=2*Ee>Be?2*Ee:Be+5,Ne=0;if(Ee>=Be)return fe;if(mn){var Te=z9(Ce);if(fe.copy)fe.copy(Te);else for(;Ne<fe.length;++Ne)Te[Ne]=fe[Ne];return Te}else if(ce){var Ye=new Uint8Array(Ce);if(Ye.set)Ye.set(fe);else for(;Ne<Ee;++Ne)Ye[Ne]=fe[Ne];return Ye}return fe.length=Ce,fe}function Ze(fe){for(var Be=new Array(fe),Ee=0;Ee<fe;++Ee)Be[Ee]=0;return Be}function ot(fe,Be,Ee){var Ce=1,Ne=0,Te=0,Ye=0,ut=0,$e=fe.length,tt=ce?new Uint16Array(32):Ze(32);for(Te=0;Te<32;++Te)tt[Te]=0;for(Te=$e;Te<Ee;++Te)fe[Te]=0;$e=fe.length;var at=ce?new Uint16Array($e):Ze($e);for(Te=0;Te<$e;++Te)tt[Ne=fe[Te]]++,Ce<Ne&&(Ce=Ne),at[Te]=0;for(tt[0]=0,Te=1;Te<=Ce;++Te)tt[Te+16]=ut=ut+tt[Te-1]<<1;for(Te=0;Te<$e;++Te)ut=fe[Te],ut!=0&&(at[Te]=tt[ut+16]++);var Tt=0;for(Te=0;Te<$e;++Te)if(Tt=fe[Te],Tt!=0)for(ut=re(at[Te],Ce)>>Ce-Tt,Ye=(1<<Ce+4-Tt)-1;Ye>=0;--Ye)Be[ut|Ye<<Tt]=Tt&15|Te<<4;return Ce}var mt=ce?new Uint16Array(512):Ze(512),Bt=ce?new Uint16Array(32):Ze(32);if(!ce){for(var Lt=0;Lt<512;++Lt)mt[Lt]=0;for(Lt=0;Lt<32;++Lt)Bt[Lt]=0}(function(){for(var fe=[],Be=0;Be<32;Be++)fe.push(5);ot(fe,Bt,32);var Ee=[];for(Be=0;Be<=143;Be++)Ee.push(8);for(;Be<=255;Be++)Ee.push(9);for(;Be<=279;Be++)Ee.push(7);for(;Be<=287;Be++)Ee.push(8);ot(Ee,mt,288)})();var Ot=function(){for(var Be=ce?new Uint8Array(32768):[],Ee=0,Ce=0;Ee<Ae.length-1;++Ee)for(;Ce<Ae[Ee+1];++Ce)Be[Ce]=Ee;for(;Ce<32768;++Ce)Be[Ce]=29;var Ne=ce?new Uint8Array(259):[];for(Ee=0,Ce=0;Ee<ie.length-1;++Ee)for(;Ce<ie[Ee+1];++Ce)Ne[Ce]=Ee;function Te(ut,$e){for(var tt=0;tt<ut.length;){var at=Math.min(65535,ut.length-tt),Tt=tt+at==ut.length;for($e.write_shift(1,+Tt),$e.write_shift(2,at),$e.write_shift(2,~at&65535);at-- >0;)$e[$e.l++]=ut[tt++]}return $e.l}function Ye(ut,$e){for(var tt=0,at=0,Tt=ce?new Uint16Array(32768):[];at<ut.length;){var Vt=Math.min(65535,ut.length-at);if(Vt<10){for(tt=Xe($e,tt,+(at+Vt==ut.length)),tt&7&&(tt+=8-(tt&7)),$e.l=tt/8|0,$e.write_shift(2,Vt),$e.write_shift(2,~Vt&65535);Vt-- >0;)$e[$e.l++]=ut[at++];tt=$e.l*8;continue}tt=Xe($e,tt,+(at+Vt==ut.length)+2);for(var Yt=0;Vt-- >0;){var Ht=ut[at];Yt=(Yt<<5^Ht)&32767;var Kt=-1,_r=0;if((Kt=Tt[Yt])&&(Kt|=at&-32768,Kt>at&&(Kt-=32768),Kt<at))for(;ut[Kt+_r]==ut[at+_r]&&_r<250;)++_r;if(_r>2){Ht=Ne[_r],Ht<=22?tt=Oe($e,tt,ge[Ht+1]>>1)-1:(Oe($e,tt,3),tt+=5,Oe($e,tt,ge[Ht-23]>>5),tt+=3);var an=Ht<8?0:Ht-4>>2;an>0&&(Pe($e,tt,_r-ie[Ht]),tt+=an),Ht=Be[at-Kt],tt=Oe($e,tt,ge[Ht]>>3),tt-=3;var sn=Ht<4?0:Ht-2>>1;sn>0&&(Pe($e,tt,at-Kt-Ae[Ht]),tt+=sn);for(var dn=0;dn<_r;++dn)Tt[Yt]=at&32767,Yt=(Yt<<5^ut[at])&32767,++at;Vt-=_r-1}else Ht<=143?Ht=Ht+48:tt=ye($e,tt,1),tt=Oe($e,tt,ge[Ht]),Tt[Yt]=at&32767,++at}tt=Oe($e,tt,0)-1}return $e.l=(tt+7)/8|0,$e.l}return function($e,tt){return $e.length<8?Te($e,tt):Ye($e,tt)}}();function Qt(fe){var Be=yt(50+Math.floor(fe.length*1.1)),Ee=Ot(fe,Be);return Be.slice(0,Ee)}var bt=ce?new Uint16Array(32768):Ze(32768),Nr=ce?new Uint16Array(32768):Ze(32768),tr=ce?new Uint16Array(128):Ze(128),nn=1,Cr=1;function Vr(fe,Be){var Ee=he(fe,Be)+257;Be+=5;var Ce=he(fe,Be)+1;Be+=5;var Ne=_e(fe,Be)+4;Be+=4;for(var Te=0,Ye=ce?new Uint8Array(19):Ze(19),ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,tt=ce?new Uint8Array(8):Ze(8),at=ce?new Uint8Array(8):Ze(8),Tt=Ye.length,Vt=0;Vt<Ne;++Vt)Ye[te[Vt]]=Te=De(fe,Be),$e<Te&&($e=Te),tt[Te]++,Be+=3;var Yt=0;for(tt[0]=0,Vt=1;Vt<=$e;++Vt)at[Vt]=Yt=Yt+tt[Vt-1]<<1;for(Vt=0;Vt<Tt;++Vt)(Yt=Ye[Vt])!=0&&(ut[Vt]=at[Yt]++);var Ht=0;for(Vt=0;Vt<Tt;++Vt)if(Ht=Ye[Vt],Ht!=0){Yt=ge[ut[Vt]]>>8-Ht;for(var Kt=(1<<7-Ht)-1;Kt>=0;--Kt)tr[Yt|Kt<<Ht]=Ht&7|Vt<<3}var _r=[];for($e=1;_r.length<Ee+Ce;)switch(Yt=tr[Ie(fe,Be)],Be+=Yt&7,Yt>>>=3){case 16:for(Te=3+Se(fe,Be),Be+=2,Yt=_r[_r.length-1];Te-- >0;)_r.push(Yt);break;case 17:for(Te=3+De(fe,Be),Be+=3;Te-- >0;)_r.push(0);break;case 18:for(Te=11+Ie(fe,Be),Be+=7;Te-- >0;)_r.push(0);break;default:_r.push(Yt),$e<Yt&&($e=Yt);break}var an=_r.slice(0,Ee),sn=_r.slice(Ee);for(Vt=Ee;Vt<286;++Vt)an[Vt]=0;for(Vt=Ce;Vt<30;++Vt)sn[Vt]=0;return nn=ot(an,bt,286),Cr=ot(sn,Nr,30),Be}function In(fe,Be){if(fe[0]==3&&!(fe[1]&3))return[Z0(Be),2];for(var Ee=0,Ce=0,Ne=z9(Be||1<<18),Te=0,Ye=Ne.length>>>0,ut=0,$e=0;(Ce&1)==0;){if(Ce=De(fe,Ee),Ee+=3,Ce>>>1)Ce>>1==1?(ut=9,$e=5):(Ee=Vr(fe,Ee),ut=nn,$e=Cr);else{Ee&7&&(Ee+=8-(Ee&7));var tt=fe[Ee>>>3]|fe[(Ee>>>3)+1]<<8;if(Ee+=32,tt>0)for(!Be&&Ye<Te+tt&&(Ne=qe(Ne,Te+tt),Ye=Ne.length);tt-- >0;)Ne[Te++]=fe[Ee>>>3],Ee+=8;continue}for(;;){!Be&&Ye<Te+32767&&(Ne=qe(Ne,Te+32767),Ye=Ne.length);var at=He(fe,Ee,ut),Tt=Ce>>>1==1?mt[at]:bt[at];if(Ee+=Tt&15,Tt>>>=4,(Tt>>>8&255)===0)Ne[Te++]=Tt;else{if(Tt==256)break;Tt-=257;var Vt=Tt<8?0:Tt-4>>2;Vt>5&&(Vt=0);var Yt=Te+ie[Tt];Vt>0&&(Yt+=He(fe,Ee,Vt),Ee+=Vt),at=He(fe,Ee,$e),Tt=Ce>>>1==1?Bt[at]:Nr[at],Ee+=Tt&15,Tt>>>=4;var Ht=Tt<4?0:Tt-2>>1,Kt=Ae[Tt];for(Ht>0&&(Kt+=He(fe,Ee,Ht),Ee+=Ht),!Be&&Ye<Yt&&(Ne=qe(Ne,Yt+100),Ye=Ne.length);Te<Yt;)Ne[Te]=Ne[Te-Kt],++Te}}}return Be?[Ne,Ee+7>>>3]:[Ne.slice(0,Te),Ee+7>>>3]}function jr(fe,Be){var Ee=fe.slice(fe.l||0),Ce=In(Ee,Be);return fe.l+=Ce[1],Ce[0]}function vt(fe,Be){if(fe)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function pt(fe,Be){var Ee=fe;ho(Ee,0);var Ce=[],Ne=[],Te={FileIndex:Ce,FullPaths:Ne};w(Te,{root:Be.root});for(var Ye=Ee.length-4;(Ee[Ye]!=80||Ee[Ye+1]!=75||Ee[Ye+2]!=5||Ee[Ye+3]!=6)&&Ye>=0;)--Ye;Ee.l=Ye+4,Ee.l+=4;var ut=Ee.read_shift(2);Ee.l+=6;var $e=Ee.read_shift(4);for(Ee.l=$e,Ye=0;Ye<ut;++Ye){Ee.l+=20;var tt=Ee.read_shift(4),at=Ee.read_shift(4),Tt=Ee.read_shift(2),Vt=Ee.read_shift(2),Yt=Ee.read_shift(2);Ee.l+=8;var Ht=Ee.read_shift(4),Kt=o(Ee.slice(Ee.l+Tt,Ee.l+Tt+Vt));Ee.l+=Tt+Vt+Yt;var _r=Ee.l;Ee.l=Ht+4,Je(Ee,tt,at,Te,Kt),Ee.l=_r}return Te}function Je(fe,Be,Ee,Ce,Ne){fe.l+=2;var Te=fe.read_shift(2),Ye=fe.read_shift(2),ut=i(fe);if(Te&8257)throw new Error("Unsupported ZIP encryption");for(var $e=fe.read_shift(4),tt=fe.read_shift(4),at=fe.read_shift(4),Tt=fe.read_shift(2),Vt=fe.read_shift(2),Yt="",Ht=0;Ht<Tt;++Ht)Yt+=String.fromCharCode(fe[fe.l++]);if(Vt){var Kt=o(fe.slice(fe.l,fe.l+Vt));(Kt[21589]||{}).mt&&(ut=Kt[21589].mt),((Ne||{})[21589]||{}).mt&&(ut=Ne[21589].mt)}fe.l+=Vt;var _r=fe.slice(fe.l,fe.l+tt);switch(Ye){case 8:_r=W(fe,at);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var an=!1;Te&8&&($e=fe.read_shift(4),$e==134695760&&($e=fe.read_shift(4),an=!0),tt=fe.read_shift(4),at=fe.read_shift(4)),tt!=Be&&vt(an,"Bad compressed size: "+Be+" != "+tt),at!=Ee&&vt(an,"Bad uncompressed size: "+Ee+" != "+at),en(Ce,Yt,_r,{unsafe:!0,mt:ut})}function gt(fe,Be){var Ee=Be||{},Ce=[],Ne=[],Te=yt(1),Ye=Ee.compression?8:0,ut=0,$e=0,tt=0,at=0,Tt=0,Vt=fe.FullPaths[0],Yt=Vt,Ht=fe.FileIndex[0],Kt=[],_r=0;for($e=1;$e<fe.FullPaths.length;++$e)if(Yt=fe.FullPaths[$e].slice(Vt.length),Ht=fe.FileIndex[$e],!(!Ht.size||!Ht.content||Yt=="Sh33tJ5")){var an=at,sn=yt(Yt.length);for(tt=0;tt<Yt.length;++tt)sn.write_shift(1,Yt.charCodeAt(tt)&127);sn=sn.slice(0,sn.l),Kt[Tt]=tEe.buf(Ht.content,0);var dn=Ht.content;Ye==8&&(dn=J(dn)),Te=yt(30),Te.write_shift(4,67324752),Te.write_shift(2,20),Te.write_shift(2,ut),Te.write_shift(2,Ye),Ht.mt?s(Te,Ht.mt):Te.write_shift(4,0),Te.write_shift(-4,Kt[Tt]),Te.write_shift(4,dn.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,sn.length),Te.write_shift(2,0),at+=Te.length,Ce.push(Te),at+=sn.length,Ce.push(sn),at+=dn.length,Ce.push(dn),Te=yt(46),Te.write_shift(4,33639248),Te.write_shift(2,0),Te.write_shift(2,20),Te.write_shift(2,ut),Te.write_shift(2,Ye),Te.write_shift(4,0),Te.write_shift(-4,Kt[Tt]),Te.write_shift(4,dn.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,sn.length),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(4,0),Te.write_shift(4,an),_r+=Te.l,Ne.push(Te),_r+=sn.length,Ne.push(sn),++Tt}return Te=yt(22),Te.write_shift(4,101010256),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,Tt),Te.write_shift(2,Tt),Te.write_shift(4,_r),Te.write_shift(4,at),Te.write_shift(2,0),Gi([Gi(Ce),Gi(Ne),Te])}var dt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Dt(fe,Be){if(fe.ctype)return fe.ctype;var Ee=fe.name||"",Ce=Ee.match(/\.([^\.]+)$/);return Ce&&dt[Ce[1]]||Be&&(Ce=(Ee=Be).match(/[\.\\]([^\.\\])+$/),Ce&&dt[Ce[1]])?dt[Ce[1]]:"application/octet-stream"}function zt(fe){for(var Be=Fy(fe),Ee=[],Ce=0;Ce<Be.length;Ce+=76)Ee.push(Be.slice(Ce,Ce+76));return Ee.join(`\r
`)+`\r
`}function Pr(fe){var Be=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(tt){var at=tt.charCodeAt(0).toString(16).toUpperCase();return"="+(at.length==1?"0"+at:at)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],Ce=Be.split(`\r
`),Ne=0;Ne<Ce.length;++Ne){var Te=Ce[Ne];if(Te.length==0){Ee.push("");continue}for(var Ye=0;Ye<Te.length;){var ut=76,$e=Te.slice(Ye,Ye+ut);$e.charAt(ut-1)=="="?ut--:$e.charAt(ut-2)=="="?ut-=2:$e.charAt(ut-3)=="="&&(ut-=3),$e=Te.slice(Ye,Ye+ut),Ye+=ut,Ye<Te.length&&($e+="="),Ee.push($e)}}return Ee.join(`\r
`)}function Xr(fe){for(var Be=[],Ee=0;Ee<fe.length;++Ee){for(var Ce=fe[Ee];Ee<=fe.length&&Ce.charAt(Ce.length-1)=="=";)Ce=Ce.slice(0,Ce.length-1)+fe[++Ee];Be.push(Ce)}for(var Ne=0;Ne<Be.length;++Ne)Be[Ne]=Be[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Te){return String.fromCharCode(parseInt(Te.slice(1),16))});return _c(Be.join(`\r
`))}function pn(fe,Be,Ee){for(var Ce="",Ne="",Te="",Ye,ut=0;ut<10;++ut){var $e=Be[ut];if(!$e||$e.match(/^\s*$/))break;var tt=$e.match(/^(.*?):\s*([^\s].*)$/);if(tt)switch(tt[1].toLowerCase()){case"content-location":Ce=tt[2].trim();break;case"content-type":Te=tt[2].trim();break;case"content-transfer-encoding":Ne=tt[2].trim();break}}switch(++ut,Ne.toLowerCase()){case"base64":Ye=_c(Fc(Be.slice(ut).join("")));break;case"quoted-printable":Ye=Xr(Be.slice(ut));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var at=en(fe,Ce.slice(Ee.length),Ye,{unsafe:!0});Te&&(at.ctype=Te)}function gn(fe,Be){if(V(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=Be&&Be.root||"",Ce=(mn&&Buffer.isBuffer(fe)?fe.toString("binary"):V(fe)).split(`\r
`),Ne=0,Te="";for(Ne=0;Ne<Ce.length;++Ne)if(Te=Ce[Ne],!!/^Content-Location:/i.test(Te)&&(Te=Te.slice(Te.indexOf("file")),Ee||(Ee=Te.slice(0,Te.lastIndexOf("/")+1)),Te.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),Te.slice(0,Ee.length)!=Ee););var Ye=(Ce[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var ut="--"+(Ye[1]||""),$e=[],tt=[],at={FileIndex:$e,FullPaths:tt};w(at);var Tt,Vt=0;for(Ne=0;Ne<Ce.length;++Ne){var Yt=Ce[Ne];Yt!==ut&&Yt!==ut+"--"||(Vt++&&pn(at,Ce.slice(Tt,Ne),Ee),Tt=Ne)}return at}function $t(fe,Be){var Ee=Be||{},Ce=Ee.boundary||"SheetJS";Ce="------="+Ce;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ce.slice(2)+'"',"","",""],Te=fe.FullPaths[0],Ye=Te,ut=fe.FileIndex[0],$e=1;$e<fe.FullPaths.length;++$e)if(Ye=fe.FullPaths[$e].slice(Te.length),ut=fe.FileIndex[$e],!(!ut.size||!ut.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(_r){return"_x"+_r.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(_r){return"_u"+_r.charCodeAt(0).toString(16)+"_"});for(var tt=ut.content,at=mn&&Buffer.isBuffer(tt)?tt.toString("binary"):V(tt),Tt=0,Vt=Math.min(1024,at.length),Yt=0,Ht=0;Ht<=Vt;++Ht)(Yt=at.charCodeAt(Ht))>=32&&Yt<128&&++Tt;var Kt=Tt>=Vt*4/5;Ne.push(Ce),Ne.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+Ye),Ne.push("Content-Transfer-Encoding: "+(Kt?"quoted-printable":"base64")),Ne.push("Content-Type: "+Dt(ut,Ye)),Ne.push(""),Ne.push(Kt?Pr(at):zt(at))}return Ne.push(Ce+`--\r
`),Ne.join(`\r
`)}function tn(fe){var Be={};return w(Be,fe),Be}function en(fe,Be,Ee,Ce){var Ne=Ce&&Ce.unsafe;Ne||w(fe);var Te=!Ne&&Er.find(fe,Be);if(!Te){var Ye=fe.FullPaths[0];Be.slice(0,Ye.length)==Ye?Ye=Be:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+Be).replace("//","/")),Te={name:a(Be),type:2},fe.FileIndex.push(Te),fe.FullPaths.push(Ye),Ne||Er.utils.cfb_gc(fe)}return Te.content=Ee,Te.size=Ee?Ee.length:0,Ce&&(Ce.CLSID&&(Te.clsid=Ce.CLSID),Ce.mt&&(Te.mt=Ce.mt),Ce.ct&&(Te.ct=Ce.ct)),Te}function cr(fe,Be){w(fe);var Ee=Er.find(fe,Be);if(Ee){for(var Ce=0;Ce<fe.FileIndex.length;++Ce)if(fe.FileIndex[Ce]==Ee)return fe.FileIndex.splice(Ce,1),fe.FullPaths.splice(Ce,1),!0}return!1}function Yr(fe,Be,Ee){w(fe);var Ce=Er.find(fe,Be);if(Ce){for(var Ne=0;Ne<fe.FileIndex.length;++Ne)if(fe.FileIndex[Ne]==Ce)return fe.FileIndex[Ne].name=a(Ee),fe.FullPaths[Ne]=Ee,!0}return!1}function ta(fe){N(fe,!0)}return t.find=O,t.read=F,t.parse=d,t.write=q,t.writeFile=H,t.utils={cfb_new:tn,cfb_add:en,cfb_del:cr,cfb_mov:Yr,cfb_gc:ta,ReadShift:ty,CheckField:QZ,prep_blob:ho,bconcat:Gi,use_zlib:L,_deflateRaw:Qt,_inflateRaw:jr,consts:Z},t}();function rEe(e){return typeof e=="string"?mN(e):Array.isArray(e)?k2e(e):e}function Ow(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=mN(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?EA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([rEe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=um(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function nEe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ts(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function J9(e,t){for(var r=[],n=Ts(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function gN(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function vN(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function aEe(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var tS=new Date(1899,11,30,0,0,0);function ki(e,t){var r=e.getTime(),n=tS.getTime()+(e.getTimezoneOffset()-tS.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var bZ=new Date,sEe=tS.getTime()+(bZ.getTimezoneOffset()-tS.getTimezoneOffset())*6e4,Z9=bZ.getTimezoneOffset();function xN(e){var t=new Date;return t.setTime(e*24*60*60*1e3+sEe),t.getTimezoneOffset()!==Z9&&t.setTime(t.getTime()+(t.getTimezoneOffset()-Z9)*6e4),t}function iEe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var eQ=new Date("2017-02-19T19:06:09.000Z"),yZ=isNaN(eQ.getFullYear())?new Date("2/19/17"):eQ,oEe=yZ.getFullYear()==2017;function Ha(e,t){var r=new Date(e);if(oEe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(yZ.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Rp(e,t){if(mn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return EA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return EA(lZ(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return EA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return EA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Va(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Va(e[r]));return t}function ws(e,t){for(var r="";r.length<t;)r+=e;return r}function bd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var lEe=["january","february","march","april","may","june","july","august","september","october","november","december"];function ux(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&lEe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var cEe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function wZ(e){return e?e.content&&e.type?Rp(e.content,!0):e.data?Tb(e.data):e.asNodeBuffer&&mn?Tb(e.asNodeBuffer().toString("binary")):e.asBinary?Tb(e.asBinary()):e._data&&e._data.getContent?Tb(Rp(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function EZ(e){if(!e)return null;if(e.data)return H9(e.data);if(e.asNodeBuffer&&mn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?H9(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function uEe(e){return e&&e.name.slice(-4)===".bin"?EZ(e):wZ(e)}function gu(e,t){for(var r=e.FullPaths||Ts(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function hD(e,t){var r=gu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function ci(e,t,r){if(!r)return uEe(hD(e,t));if(!t)return null;try{return ci(e,t)}catch{return null}}function Sc(e,t,r){if(!r)return wZ(hD(e,t));if(!t)return null;try{return Sc(e,t)}catch{return null}}function dEe(e,t,r){return EZ(hD(e,t))}function tQ(e){for(var t=e.FullPaths||Ts(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function cn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return mn?n=dh(r):n=B2e(r),Er.utils.cfb_add(e,t,n)}Er.utils.cfb_add(e,t,r)}else e.file(t,r)}function mD(){return Er.utils.cfb_new()}function CZ(e,t){switch(t.type){case"base64":return Er.read(e,{type:"base64"});case"binary":return Er.read(e,{type:"binary"});case"buffer":case"array":return Er.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function jb(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Js=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,AEe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,rQ=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,fEe=/<[^>]*>/g,tl=Js.match(rQ)?rQ:fEe,hEe=/<\w*:/,mEe=/<(\/?)\w+:/;function $r(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(AEe),o=0,l="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,l=f.slice(s+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function VA(e){return e.replace(mEe,"<$1")}var _Z={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},pD=gN(_Z),Un=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,l){return _Z[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),gD=/[&<>'"]/g,pEe=/[\u0000-\u0008\u000b-\u001f]/g;function ga(e){var t=e+"";return t.replace(gD,function(r){return pD[r]}).replace(pEe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function nQ(e){return ga(e).replace(/ /g,"_x0020_")}var SZ=/[\u0000-\u001f]/g;function vD(e){var t=e+"";return t.replace(gD,function(r){return pD[r]}).replace(/\n/g,"<br/>").replace(SZ,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function gEe(e){var t=e+"";return t.replace(gD,function(r){return pD[r]}).replace(SZ,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var aQ=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function vEe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ua(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function OB(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function sQ(e){var t=Z0(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function iQ(e){return dh(e,"binary").toString("utf8")}var SE="foo bar bazâð£",_a=mn&&(iQ(SE)==OB(SE)&&iQ||sQ(SE)==OB(SE)&&sQ)||OB,EA=mn?function(e){return dh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Dy=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),NZ=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),xEe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),bEe=/<\/?(?:vt:)?variant>/g,yEe=/<(?:vt:)([^>]*)>([\s\S]*)</;function oQ(e,t){var r=$r(e),n=e.match(xEe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(bEe,"").match(yEe);i&&a.push({v:_a(i[2]),t:i[1]})}),a}var kZ=/(^\s|\s$|\n)/;function po(e,t){return"<"+e+(t.match(kZ)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Ry(e){return Ts(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Gt(e,t,r){return"<"+e+(r!=null?Ry(r):"")+(t!=null?(t.match(kZ)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Ij(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function wEe(e,t){switch(typeof e){case"string":var r=Gt("vt:lpwstr",ga(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Gt((e|0)==e?"vt:i4":"vt:r8",ga(String(e)));case"boolean":return Gt("vt:bool",e?"true":"false")}if(e instanceof Date)return Gt("vt:filetime",Ij(e));throw new Error("Unable to serialize "+e)}function xD(e){if(mn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return _a(um(dD(e)));throw new Error("Bad input format: expected Buffer or string")}var Py=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Si={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Zp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],wc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function EEe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function CEe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var lQ=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},cQ=mn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:dh(t)})):lQ(e)}:lQ,uQ=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Of(e,a)));return n.join("").replace(vl,"")},bD=mn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(vl,""):uQ(e,t,r)}:uQ,dQ=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},BZ=mn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):dQ(e,t,r)}:dQ,AQ=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(mv(e,a)));return n.join("")},Dw=mn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):AQ(t,r,n)}:AQ,TZ=function(e,t){var r=Ec(e,t);return r>0?Dw(e,t+4,t+4+r-1):""},IZ=TZ,jZ=function(e,t){var r=Ec(e,t);return r>0?Dw(e,t+4,t+4+r-1):""},FZ=jZ,OZ=function(e,t){var r=2*Ec(e,t);return r>0?Dw(e,t+4,t+4+r-1):""},DZ=OZ,RZ=function(t,r){var n=Ec(t,r);return n>0?bD(t,r+4,r+4+n):""},PZ=RZ,LZ=function(e,t){var r=Ec(e,t);return r>0?Dw(e,t+4,t+4+r):""},MZ=LZ,UZ=function(e,t){return EEe(e,t)},rS=UZ,yD=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};mn&&(IZ=function(t,r){if(!Buffer.isBuffer(t))return TZ(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},FZ=function(t,r){if(!Buffer.isBuffer(t))return jZ(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},DZ=function(t,r){if(!Buffer.isBuffer(t))return OZ(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},PZ=function(t,r){if(!Buffer.isBuffer(t))return RZ(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},MZ=function(t,r){if(!Buffer.isBuffer(t))return LZ(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},rS=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):UZ(t,r)},yD=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var mv=function(e,t){return e[t]},Of=function(e,t){return e[t+1]*256+e[t]},_Ee=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ec=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Jm=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},SEe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ty(e,t){var r="",n,a,s=[],i,o,l,u;switch(t){case"dbcs":if(u=this.l,mn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(Of(this,u)),u+=2;e*=2;break;case"utf8":r=Dw(this,this.l,this.l+e);break;case"utf16le":e*=2,r=bD(this,this.l,this.l+e);break;case"wstr":return ty.call(this,e,"dbcs");case"lpstr-ansi":r=IZ(this,this.l),e=4+Ec(this,this.l);break;case"lpstr-cp":r=FZ(this,this.l),e=4+Ec(this,this.l);break;case"lpwstr":r=DZ(this,this.l),e=4+2*Ec(this,this.l);break;case"lpp4":e=4+Ec(this,this.l),r=PZ(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ec(this,this.l),r=MZ(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=mv(this,this.l+e++))!==0;)s.push(_E(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=Of(this,this.l+e))!==0;)s.push(_E(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=mv(this,u),this.l=u+1,o=ty.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(_E(Of(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=mv(this,u),this.l=u+1,o=ty.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(_E(mv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=mv(this,this.l),this.l++,n;case 2:return n=(t==="i"?_Ee:Of)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Jm:SEe)(this,this.l),this.l+=4,n):(a=Ec(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=rS(this,this.l):a=rS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=BZ(this,this.l,e);break}}return this.l+=e,r}var NEe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},kEe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},BEe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function TEe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)BEe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,NEe(this,t,this.l);break;case 8:if(n=8,r==="f"){CEe(this,t,this.l);break}case 16:break;case-4:n=4,kEe(this,t,this.l);break}return this.l+=n,this}function QZ(e,t){var r=BZ(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function ho(e,t){e.l=t,e.read_shift=ty,e.chk=QZ,e.write_shift=TEe}function Zo(e,t){e.l+=t}function yt(e){var t=Z0(e);return ho(t,0),t}function Ah(e,t,r){if(e){var n,a,s;ho(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Vy[o]||Vy[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;l=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=l,t(d,u,o))return}}}function ql(){var e=[],t=mn?256:2048,r=function(u){var d=yt(u);return ho(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),Gi(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=Vy[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&yD(r)&&e.push(r)}}function ry(e,t,r){var n=Va(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function fQ(e,t,r){var n=Va(e);return n.s=ry(n.s,t.s,r),n.e=ry(n.e,t.s,r),n}function ny(e,t){if(e.cRel&&e.c<0)for(e=Va(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Va(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Ur(e);return!e.cRel&&e.cRel!=null&&(r=FEe(r)),!e.rRel&&e.rRel!=null&&(r=IEe(r)),r}function DB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+as(e.s.c)+":"+(e.e.cRel?"":"$")+as(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ws(e.s.r)+":"+(e.e.rRel?"":"$")+Ws(e.e.r):ny(e.s,t.biff)+":"+ny(e.e,t.biff)}function wD(e){return parseInt(jEe(e),10)-1}function Ws(e){return""+(e+1)}function IEe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function jEe(e){return e.replace(/\$(\d+)$/,"$1")}function ED(e){for(var t=OEe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function as(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function FEe(e){return e.replace(/^([A-Z])/,"$$$1")}function OEe(e){return e.replace(/^\$([A-Z])/,"$1")}function DEe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ss(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Ur(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Xl(e){var t=e.indexOf(":");return t==-1?{s:ss(e),e:ss(e)}:{s:ss(e.slice(0,t)),e:ss(e.slice(t+1))}}function rn(e,t){return typeof t>"u"||typeof t=="number"?rn(e.s,e.e):(typeof e!="string"&&(e=Ur(e)),typeof t!="string"&&(t=Ur(t)),e==t?e:e+":"+t)}function Qn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function hQ(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ju(e.z,r?ki(t):t)}catch{}try{return e.w=ju((e.XF||{}).numFmtId||(r?14:0),r?ki(t):t)}catch{return""+t}}function Jf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?fh[e.v]||e.v:t==null?hQ(e,e.v):hQ(e,t))}function dm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function HZ(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Qn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},g=i+f,v=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>v&&(u.s.c=v),u.e.r<g&&(u.e.r=g),u.e.c<v&&(u.e.c=v),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Dr[14],n.cellDates?(p.t="d",p.w=ju(p.z,ki(p.v))):(p.t="n",p.v=ki(p.v),p.w=ju(p.z,p.v))):p.t="s";if(a)s[g]||(s[g]=[]),s[g][v]&&s[g][v].z&&(p.z=s[g][v].z),s[g][v]=p;else{var b=Ur({c:v,r:g});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return u.s.c<1e7&&(s["!ref"]=rn(u)),s}function Vx(e,t){return HZ(null,e,t)}function REe(e){return e.read_shift(4,"i")}function yd(e,t){return t||(t=yt(4)),t.write_shift(4,e),t}function Yo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Wi(e,t){var r=!1;return t==null&&(r=!0,t=yt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function PEe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function LEe(e,t){return t||(t=yt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function CD(e,t){var r=e.l,n=e.read_shift(1),a=Yo(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(PEe(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function MEe(e,t){var r=!1;return t==null&&(r=!0,t=yt(15+4*e.t.length)),t.write_shift(1,0),Wi(e.t,t),r?t.slice(0,t.l):t}var UEe=CD;function QEe(e,t){var r=!1;return t==null&&(r=!0,t=yt(23+4*e.t.length)),t.write_shift(1,1),Wi(e.t,t),t.write_shift(4,1),LEe({},t),r?t.slice(0,t.l):t}function Du(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function eg(e,t){return t==null&&(t=yt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function tg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function rg(e,t){return t==null&&(t=yt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var HEe=Yo,VZ=Wi;function _D(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function nS(e,t){var r=!1;return t==null&&(r=!0,t=yt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var VEe=Yo,jj=_D,SD=nS;function ND(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?rS([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Jm(t,0)>>2;return r?a/100:a}function zZ(e,t){t==null&&(t=yt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function $Z(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function zEe(e,t){return t||(t=yt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var ng=$Z,zx=zEe;function Xo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Pp(e,t){return(t||yt(8)).write_shift(8,e,"f")}function $Ee(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=pp[a];u&&(t.rgb=My(u));break;case 2:t.rgb=My([i,o,l]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function aS(e,t){if(t||(t=yt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function KEe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function GEe(e,t){t||(t=yt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function KZ(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function qEe(e){return KZ(e,1)}function WEe(e){return KZ(e,2)}var kD=2,Ll=3,NE=11,mQ=12,sS=19,kE=64,XEe=65,YEe=71,JEe=4108,ZEe=4126,zi=80,GZ=81,eCe=[zi,GZ],Fj={1:{n:"CodePage",t:kD},2:{n:"Category",t:zi},3:{n:"PresentationFormat",t:zi},4:{n:"ByteCount",t:Ll},5:{n:"LineCount",t:Ll},6:{n:"ParagraphCount",t:Ll},7:{n:"SlideCount",t:Ll},8:{n:"NoteCount",t:Ll},9:{n:"HiddenCount",t:Ll},10:{n:"MultimediaClipCount",t:Ll},11:{n:"ScaleCrop",t:NE},12:{n:"HeadingPairs",t:JEe},13:{n:"TitlesOfParts",t:ZEe},14:{n:"Manager",t:zi},15:{n:"Company",t:zi},16:{n:"LinksUpToDate",t:NE},17:{n:"CharacterCount",t:Ll},19:{n:"SharedDoc",t:NE},22:{n:"HyperlinksChanged",t:NE},23:{n:"AppVersion",t:Ll,p:"version"},24:{n:"DigSig",t:XEe},26:{n:"ContentType",t:zi},27:{n:"ContentStatus",t:zi},28:{n:"Language",t:zi},29:{n:"Version",t:zi},255:{},2147483648:{n:"Locale",t:sS},2147483651:{n:"Behavior",t:sS},1919054434:{}},Oj={1:{n:"CodePage",t:kD},2:{n:"Title",t:zi},3:{n:"Subject",t:zi},4:{n:"Author",t:zi},5:{n:"Keywords",t:zi},6:{n:"Comments",t:zi},7:{n:"Template",t:zi},8:{n:"LastAuthor",t:zi},9:{n:"RevNumber",t:zi},10:{n:"EditTime",t:kE},11:{n:"LastPrinted",t:kE},12:{n:"CreatedDate",t:kE},13:{n:"ModifiedDate",t:kE},14:{n:"PageCount",t:Ll},15:{n:"WordCount",t:Ll},16:{n:"CharCount",t:Ll},17:{n:"Thumbnail",t:YEe},18:{n:"Application",t:zi},19:{n:"DocSecurity",t:Ll},255:{},2147483648:{n:"Locale",t:sS},2147483651:{n:"Behavior",t:sS},1919054434:{}},pQ={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},tCe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rCe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var nCe=rCe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),pp=Va(nCe),fh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},qZ={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Dj={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},BE={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function BD(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function aCe(e){var t=BD();if(!e||!e.match)return t;var r={};if((e.match(tl)||[]).forEach(function(n){var a=$r(n);switch(a[0].replace(hEe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[Dj[a.ContentType]]!==void 0&&t[Dj[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Si.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function WZ(e,t){var r=aEe(Dj),n=[],a;n[n.length]=Js,n[n.length]=Gt("Types",null,{xmlns:Si.CT,"xmlns:xsd":Si.xsd,"xmlns:xsi":Si.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Gt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){e[l]&&e[l].length>0&&(a=e[l][0],n[n.length]=Gt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:BE[l][t.bookType]||BE[l].xlsx}))},i=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Gt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:BE[l][t.bookType]||BE[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Gt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var wn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Ly(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ay(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(tl)||[]).forEach(function(a){var s=$r(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:jb(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function zv(e){var t=[Js,Gt("Relationships",null,{xmlns:Si.RELS})];return Ts(e["!id"]).forEach(function(r){t[t.length]=Gt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ha(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[wn.HLINK,wn.XPATH,wn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var sCe="application/vnd.oasis.opendocument.spreadsheet";function iCe(e,t){for(var r=xD(e),n,a;n=Py.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=$r(n[0],!1),a.path=="/"&&a.type!==sCe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function oCe(e){var t=[Js];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function gQ(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function lCe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function cCe(e){var t=[Js];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(gQ(e[r][0],e[r][1])),t.push(lCe("",e[r][0]));return t.push(gQ("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function XZ(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Y_.version+"</meta:generator></office:meta></office:document-meta>"}var Iu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],uCe=function(){for(var e=new Array(Iu.length),t=0;t<Iu.length;++t){var r=Iu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function YZ(e){var t={};e=_a(e);for(var r=0;r<Iu.length;++r){var n=Iu[r],a=e.match(uCe[r]);a!=null&&a.length>0&&(t[n[1]]=Un(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ha(t[n[1]]))}return t}function RB(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=ga(t),n[n.length]=r?Gt(e,t,r):po(e,t))}function JZ(e,t){var r=t||{},n=[Js,Gt("cp:coreProperties",null,{"xmlns:cp":Si.CORE_PROPS,"xmlns:dc":Si.dc,"xmlns:dcterms":Si.dcterms,"xmlns:dcmitype":Si.dcmitype,"xmlns:xsi":Si.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&RB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:Ij(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&RB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:Ij(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Iu.length;++s){var i=Iu[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&RB(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var gp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],ZZ=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function eee(e,t,r,n){var a=[];if(typeof e=="string")a=oQ(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?oQ(t,n).map(function(d){return d.v}):t,o=0,l=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(l=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function dCe(e,t,r){var n={};return t||(t={}),e=_a(e),gp.forEach(function(a){var s=(e.match(Dy(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Un(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&eee(n.HeadingPairs,n.TitlesOfParts,t,r),t}function tee(e){var t=[],r=Gt;return e||(e={}),e.Application="SheetJS",t[t.length]=Js,t[t.length]=Gt("Properties",null,{xmlns:Si.EXT_PROPS,"xmlns:vt":Si.vt}),gp.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ga(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ga(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ACe=/<[^>]+>[^<]*/g;function fCe(e,t){var r={},n="",a=e.match(ACe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=$r(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Un(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Un(d);break;case"bool":r[n]=Ua(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ha(d);break;case"cy":case"error":r[n]=Un(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function ree(e){var t=[Js,Gt("Properties",null,{xmlns:Si.CUST_PROPS,"xmlns:vt":Si.vt})];if(!e)return t.join("");var r=1;return Ts(e).forEach(function(a){++r,t[t.length]=Gt("property",wEe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ga(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Rj={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},PB;function hCe(e,t,r){PB||(PB=gN(Rj)),t=PB[t]||t,e[t]=r}function mCe(e,t){var r=[];return Ts(Rj).map(function(n){for(var a=0;a<Iu.length;++a)if(Iu[a][1]==n)return Iu[a];for(a=0;a<gp.length;++a)if(gp[a][1]==n)return gp[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(po(Rj[n[1]]||n[1],a))}}),Gt("DocumentProperties",r.join(""),{xmlns:wc.o})}function pCe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ts(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Iu.length;++i)if(s==Iu[i][1])return;for(i=0;i<gp.length;++i)if(s==gp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(Gt(nQ(s),o,{"dt:dt":l}))}}),t&&Ts(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Gt(nQ(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+wc.o+'">'+a.join("")+"</"+n+">"}function TD(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function gCe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=yt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function nee(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function aee(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function see(e,t,r){return t===31?aee(e):nee(e,t,r)}function Pj(e,t,r){return see(e,t,r===!1?0:4)}function vCe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return see(e,t,0)}function xCe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(vl,""),e.l-a&2&&(e.l+=2)}return r}function bCe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(vl,"");return r}function yCe(e){var t=e.l,r=iS(e,GZ);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=iS(e,Ll);return[r,n]}function wCe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(yCe(e));return r}function vQ(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(vl,"").replace(Ib,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function iee(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function ECe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function iS(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==mQ&&n!==t&&eCe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===mQ?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return nee(e,n,4).replace(vl,"");case 31:return aee(e);case 64:return TD(e);case 65:return iee(e);case 71:return ECe(e);case 80:return Pj(e,n,!s.raw).replace(vl,"");case 81:return vCe(e,n).replace(vl,"");case 4108:return wCe(e);case 4126:case 4127:return n==4127?xCe(e):bCe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function xQ(e,t){var r=yt(4),n=yt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=yt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=gCe(t);break;case 31:case 80:for(n=yt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Gi([r,n])}function bQ(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,l=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(_,S){return _[1]-S[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=iS(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:gd(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(o=h.CodePage=iS(e,kD),gd(o),l!==-1){var v=e.l;e.l=s[l][1],u=vQ(e,o),e.l=v}}else if(s[i][0]===0){if(o===0){l=i,e.l=s[i+1][1];continue}u=vQ(e,o)}else{var b=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=iee(e);break;case 30:e.l+=4,y=Pj(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=Pj(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Us(e,4);break;case 64:e.l+=4,y=Ha(TD(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[b]=y}}return e.l=r+n,h}var oee=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function CCe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function yQ(e,t,r){var n=yt(8),a=[],s=[],i=8,o=0,l=yt(8),u=yt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),a.push(u),i+=8+l.length,!t){u=yt(8),u.write_shift(4,0),a.unshift(u);var d=[yt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=yt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Gi(d),s.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(oee.indexOf(e[o][0])>-1||ZZ.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],p=0;if(t){p=+t[e[o][0]];var g=r[p];if(g.p=="version"&&typeof h=="string"){var v=h.split(".");h=(+v[0]<<16)+(+v[1]||0)}l=xQ(g.t,h)}else{var b=CCe(h);b==-1&&(b=31,h=String(h)),l=xQ(b,h)}s.push(l),u=yt(8),u.write_shift(4,t?p:2+o),a.push(u),i+=8+l.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Gi([n].concat(a).concat(s))}function wQ(e,t,r){var n=e.content;if(!n)return{};ho(n,0);var a,s,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Er.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),l=n.read_shift(4));var f=bQ(n,t),h={SystemIdentifier:u};for(var p in f)h[p]=f[p];if(h.FMTID=s,a===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var g;try{g=bQ(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[s,i],h}function EQ(e,t,r,n,a,s){var i=yt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Er.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var l=yQ(e,r,n);if(o.push(l),a){var u=yQ(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Gi(o)}function r0(e,t){return e.read_shift(t),null}function _Ce(e,t){t||(t=yt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function SCe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Us(e,t){return e.read_shift(t)===1}function dl(e,t){return t||(t=yt(2)),t.write_shift(2,+!!e),t}function ui(e){return e.read_shift(2,"u")}function xu(e,t){return t||(t=yt(2)),t.write_shift(2,e),t}function lee(e,t){return SCe(e,t,ui)}function NCe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function cee(e,t,r){return r||(r=yt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Rw(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function kCe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,l={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function BCe(e){var t=e.t||"",r=yt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=yt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Gi(a)}function Lp(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function Pw(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Lp(e,n,r)}function ag(e,t,r){if(r.biff>5)return Pw(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function uee(e,t,r){return r||(r=yt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function TCe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function ICe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(vl,"");return n&&(e.l+=24),a}function jCe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(vl,"");return r+i}function FCe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return ICe(e);case"0303000000000000c000000000000046":return jCe(e);default:throw new Error("Unsupported Moniker "+r)}}function TE(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(vl,""):"";return r}function CQ(e,t){t||(t=yt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function OCe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,l,u="",d,f;a&16&&(s=TE(e,r-e.l)),a&128&&(i=TE(e,r-e.l)),(a&257)===257&&(o=TE(e,r-e.l)),(a&257)===1&&(l=FCe(e,r-e.l)),a&8&&(u=TE(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=TD(e)),e.l=r;var h=i||o||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function DCe(e){var t=yt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),CQ(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&CQ(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function dee(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function Aee(e,t){var r=dee(e);return r[3]=0,r}function zA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Mp(e,t,r,n){return n||(n=yt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function RCe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function PCe(e,t,r){return t===0?"":ag(e,t,r)}function LCe(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function fee(e){var t=e.read_shift(2),r=ND(e);return[t,r]}function MCe(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=Rw(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function bN(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function hee(e,t){return t||(t=yt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function mee(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var UCe=mee;function pee(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function QCe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function HCe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Po(e){e.l+=2,e.l+=e.read_shift(2)}var VCe={0:Po,4:Po,5:Po,6:Po,7:HCe,8:Po,9:Po,10:Po,11:Po,12:Po,13:QCe,14:Po,15:Po,16:Po,17:Po,18:Po,19:Po,20:Po,21:pee};function zCe(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(VCe[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function IE(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function ID(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=yt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function $Ce(e,t){return t===0||e.read_shift(2),1200}function KCe(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=ag(e,0,r);return e.read_shift(t+n-e.l),a}function GCe(e,t){var r=!t||t.biff==8,n=yt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function qCe(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function WCe(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=Rw(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function XCe(e,t){var r=!t||t.biff>=8?2:1,n=yt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function YCe(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(kCe(e));return s.Count=n,s.Unique=a,s}function JCe(e,t){var r=yt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=BCe(e[a]);var s=Gi([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function ZCe(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function e_e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function t_e(e){var t=RCe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function r_e(e){return e.read_shift(2),e.read_shift(4)}function _Q(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function n_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function a_e(){var e=yt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function s_e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function i_e(e){var t=yt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function o_e(){}function l_e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Rw(e,0,r),n}function c_e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=yt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function u_e(e){var t=zA(e);return t.isst=e.read_shift(4),t}function d_e(e,t,r,n){var a=yt(10);return Mp(e,t,n,a),a.write_shift(4,r),a}function A_e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=zA(e);r.biff==2&&e.l++;var s=Pw(e,n-e.l,r);return a.val=s,a}function f_e(e,t,r,n,a){var s=!a||a.biff==8,i=yt(8+ +s+(1+s)*r.length);return Mp(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function h_e(e,t,r){var n=e.read_shift(2),a=ag(e,0,r);return[n,a]}function m_e(e,t,r,n){var a=r&&r.biff==5;n||(n=yt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var p_e=ag;function SQ(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c:l}}}function g_e(e,t){var r=t.biff==8||!t.biff?4:2,n=yt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function v_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=fee(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function x_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(fee(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function b_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function y_e(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return a.patternType=tCe[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function w_e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=y_e(e,t,n.fStyle,r),n}function NQ(e,t,r,n){var a=r&&r.biff==5;n||(n=yt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function E_e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function C_e(e){var t=yt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function kQ(e,t,r){var n=zA(e);(r.biff==2||t==9)&&++e.l;var a=NCe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function __e(e,t,r,n,a,s){var i=yt(8);return Mp(e,t,n,i),cee(r,s,i),i}function S_e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=zA(e),a=Xo(e);return n.val=a,n}function N_e(e,t,r,n){var a=yt(14);return Mp(e,t,n,a),Pp(r,a),a}var BQ=PCe;function k_e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Lp(e,s),o=[];n>e.l;)o.push(Pw(e));return[s,a,i,o]}function TQ(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=MCe(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var B_e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function IQ(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Lp(e,i,r);a&32&&(u=B_e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:z4e(e,d,r,o);return{chKey:s,Name:u,itab:l,rgce:f}}function gee(e,t,r){if(r.biff<8)return T_e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(LCe(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function T_e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Rw(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function I_e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=Lp(e,n,r),i=Lp(e,a,r);return[s,i]}function j_e(e,t,r){var n=mee(e);e.l++;var a=e.read_shift(1);return t-=8,[$4e(e,t,r),a,n]}function jQ(e,t,r){var n=UCe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,H4e(e,t,r)]}function F_e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function O_e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=ag(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function D_e(e,t,r){return O_e(e,t,r)}function R_e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(bN(e));return r}function P_e(e){var t=yt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)hee(e[r],t);return t}function L_e(e,t,r){if(r&&r.biff<8)return U_e(e,t,r);var n=pee(e),a=zCe(e,t-22,n[1]);return{cmo:n,ft:a}}var M_e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function U_e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((M_e[n]||Zo)(e,t,r)),{cmo:[a,n,s],ft:i}}function Q_e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=TCe(e,6,r);var o=e.read_shift(2);e.read_shift(2),ui(e,2);var l=e.read_shift(2);e.l+=l;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Lp(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function H_e(e,t){var r=bN(e);e.l+=16;var n=OCe(e,t-24);return[r,n]}function V_e(e){var t=yt(24),r=ss(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Gi([t,DCe(e[1])])}function z_e(e,t){e.read_shift(2);var r=bN(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(vl,""),[r,n]}function $_e(e){var t=e[1].Tooltip,r=yt(10+2*(t.length+1));r.write_shift(2,2048);var n=ss(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function K_e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=pQ[r]||r,r=e.read_shift(2),t[1]=pQ[r]||r,t}function G_e(e){return e||(e=yt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function q_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Aee(e));return r}function W_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Aee(e));return r}function X_e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function vee(e,t,r){if(!r.cellStyles)return Zo(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function Y_e(e,t){var r=yt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function J_e(e,t){var r={};return t<32||(e.l+=16,r.header=Xo(e),r.footer=Xo(e),e.l+=2),r}function Z_e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function eSe(e){for(var t=yt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var tSe=zA,rSe=lee,nSe=Pw;function aSe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function sSe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=zA(e);++e.l;var a=ag(e,t-7,r);return n.t="str",n.val=a,n}function iSe(e){var t=zA(e);++e.l;var r=Xo(e);return t.t="n",t.val=r,t}function oSe(e,t,r){var n=yt(15);return Qw(n,e,t),n.write_shift(8,r,"f"),n}function lSe(e){var t=zA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function cSe(e,t,r){var n=yt(9);return Qw(n,e,t),n.write_shift(2,r),n}function uSe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function dSe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function ASe(e,t,r){var n=e.l+t,a=zA(e),s=e.read_shift(2),i=Lp(e,s,r);return e.l=n,a.t="str",a.val=i,a}var fSe=[2,3,48,49,131,139,140,245],Lj=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=gN({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=Z0(1);switch(l.type){case"base64":d=_c(Fc(o));break;case"binary":d=_c(o);break;case"buffer":case"array":d=o;break}ho(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,b=521;f==2&&(v=d.read_shift(2)),d.l+=3,f!=2&&(v=d.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(b=d.read_shift(2));var y=d.read_shift(2),_=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(_=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var S=[],k={},B=Math.min(d.length,f==2?521:b-10-(p?264:0)),F=g?32:11;d.l<B&&d[d.l]!=13;)switch(k={},k.name=jy.utils.decode(_,d.slice(d.l,d.l+F)).replace(/[\u0000\r\n].*$/g,""),d.l+=F,k.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(k.offset=d.read_shift(4)),k.len=d.read_shift(1),f==2&&(k.offset=d.read_shift(2)),k.dec=d.read_shift(1),k.name.length&&S.push(k),f!=2&&(d.l+=g?13:14),k.type){case"B":(!p||k.len!=8)&&l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var w=0,C=0;for(u[0]=[],C=0;C!=S.length;++C)u[0][C]=S[C].name;for(;v-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++w]=[],C=0,C=0;C!=S.length;++C){var N=d.slice(d.l,d.l+S[C].len);d.l+=S[C].len,ho(N,0);var R=jy.utils.decode(_,N);switch(S[C].type){case"C":R.trim().length&&(u[w][C]=R.replace(/\s+$/,""));break;case"D":R.length===8?u[w][C]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):u[w][C]=R;break;case"F":u[w][C]=parseFloat(R.trim());break;case"+":case"I":u[w][C]=g?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":u[w][C]=!0;break;case"N":case"F":u[w][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[w][C]="##MEMO##"+(g?parseInt(R.trim(),10):N.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(u[w][C]=+R||0);break;case"@":u[w][C]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":u[w][C]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":u[w][C]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[w][C]=-N.read_shift(-8,"f");break;case"B":if(p&&S[C].len==8){u[w][C]=N.read_shift(8,"f");break}case"G":case"P":N.l+=S[C].len;break;case"0":if(S[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[C].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=S,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Vx(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,l){try{return dm(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&gd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=ql(),f=cS(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],v=0,b=0,y=0,_=1;for(v=0;v<h.length;++v){if(((g[v]||{}).DBF||{}).name){h[v]=g[v].DBF.name,++y;continue}if(h[v]!=null){if(++y,typeof h[v]=="number"&&(h[v]=h[v].toString(10)),typeof h[v]!="string")throw new Error("DBF Invalid column name "+h[v]+" |"+typeof h[v]+"|");if(h.indexOf(h[v])!==v){for(b=0;b<1024;++b)if(h.indexOf(h[v]+"_"+b)==-1){h[v]+="_"+b;break}}}}var S=Qn(o["!ref"]),k=[],B=[],F=[];for(v=0;v<=S.e.c-S.s.c;++v){var w="",C="",N=0,R=[];for(b=0;b<p.length;++b)p[b][v]!=null&&R.push(p[b][v]);if(R.length==0||h[v]==null){k[v]="?";continue}for(b=0;b<R.length;++b){switch(typeof R[b]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=R[b]instanceof Date?"D":"C";break;default:C="C"}N=Math.max(N,String(R[b]).length),w=w&&w!=C?"C":C}N>250&&(N=250),C=((g[v]||{}).DBF||{}).type,C=="C"&&g[v].DBF.len>N&&(N=g[v].DBF.len),w=="B"&&C=="N"&&(w="N",F[v]=g[v].DBF.dec,N=g[v].DBF.len),B[v]=w=="C"||C=="N"?N:s[w]||0,_+=B[v],k[v]=w}var O=d.next(32);for(O.write_shift(4,318902576),O.write_shift(4,p.length),O.write_shift(2,296+32*y),O.write_shift(2,_),v=0;v<4;++v)O.write_shift(4,0);for(O.write_shift(4,0|(+t[oZ]||3)<<8),v=0,b=0;v<h.length;++v)if(h[v]!=null){var j=d.next(32),U=(h[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);j.write_shift(1,U,"sbcs"),j.write_shift(1,k[v]=="?"?"C":k[v],"sbcs"),j.write_shift(4,b),j.write_shift(1,B[v]||s[k[v]]||0),j.write_shift(1,F[v]||0),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(1,0),j.write_shift(4,0),j.write_shift(4,0),b+=B[v]||s[k[v]]||0}var P=d.next(264);for(P.write_shift(4,13),v=0;v<65;++v)P.write_shift(4,0);for(v=0;v<p.length;++v){var X=d.next(_);for(X.write_shift(1,0),b=0;b<h.length;++b)if(h[b]!=null)switch(k[b]){case"L":X.write_shift(1,p[v][b]==null?63:p[v][b]?84:70);break;case"B":X.write_shift(8,p[v][b]||0,"f");break;case"N":var K="0";for(typeof p[v][b]=="number"&&(K=p[v][b].toFixed(F[b]||0)),y=0;y<B[b]-K.length;++y)X.write_shift(1,32);X.write_shift(1,K,"sbcs");break;case"D":p[v][b]?(X.write_shift(4,("0000"+p[v][b].getFullYear()).slice(-4),"sbcs"),X.write_shift(2,("00"+(p[v][b].getMonth()+1)).slice(-2),"sbcs"),X.write_shift(2,("00"+p[v][b].getDate()).slice(-2),"sbcs")):X.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(p[v][b]!=null?p[v][b]:"").slice(0,B[b]);for(X.write_shift(1,Z,"sbcs"),y=0;y<B[b]-Z.length;++y)X.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),xee=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ts(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=e[p];return typeof g=="number"?V9(g):g},n=function(h,p,g){var v=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return v==59?h:V9(v)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return s(Fc(h),p);case"binary":return s(h,p);case"buffer":return s(mn&&Buffer.isBuffer(h)?h.toString("binary"):um(h),p);case"array":return s(Rp(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var g=h.split(/[\n\r]+/),v=-1,b=-1,y=0,_=0,S=[],k=[],B=null,F={},w=[],C=[],N=[],R=0,O;for(+p.codepage>=0&&gd(+p.codepage);y!==g.length;++y){R=0;var j=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),U=j.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),P=U[0],X;if(j.length>0)switch(P){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&k.push(j.slice(3).replace(/;;/g,";"));break;case"C":var K=!1,Z=!1,H=!1,V=!1,q=-1,ne=-1;for(_=1;_<U.length;++_)switch(U[_].charAt(0)){case"A":break;case"X":b=parseInt(U[_].slice(1))-1,Z=!0;break;case"Y":for(v=parseInt(U[_].slice(1))-1,Z||(b=0),O=S.length;O<=v;++O)S[O]=[];break;case"K":X=U[_].slice(1),X.charAt(0)==='"'?X=X.slice(1,X.length-1):X==="TRUE"?X=!0:X==="FALSE"?X=!1:isNaN(bd(X))?isNaN(ux(X).getDate())||(X=Ha(X)):(X=bd(X),B!==null&&Qx(B)&&(X=xN(X))),K=!0;break;case"E":V=!0;var L=$v(U[_].slice(1),{r:v,c:b});S[v][b]=[S[v][b],L];break;case"S":H=!0,S[v][b]=[S[v][b],"S5S"];break;case"G":break;case"R":q=parseInt(U[_].slice(1))-1;break;case"C":ne=parseInt(U[_].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+j)}if(K&&(S[v][b]&&S[v][b].length==2?S[v][b][0]=X:S[v][b]=X,B=null),H){if(V)throw new Error("SYLK shared formula cannot have own formula");var W=q>-1&&S[q][ne];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");S[v][b][1]=Pee(W[1],{r:v-q,c:b-ne})}break;case"F":var J=0;for(_=1;_<U.length;++_)switch(U[_].charAt(0)){case"X":b=parseInt(U[_].slice(1))-1,++J;break;case"Y":for(v=parseInt(U[_].slice(1))-1,O=S.length;O<=v;++O)S[O]=[];break;case"M":R=parseInt(U[_].slice(1))/20;break;case"F":break;case"G":break;case"P":B=k[parseInt(U[_].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=U[_].slice(1).split(" "),O=parseInt(N[0],10);O<=parseInt(N[1],10);++O)R=parseInt(N[2],10),C[O-1]=R===0?{hidden:!0}:{wch:R},em(C[O-1]);break;case"C":b=parseInt(U[_].slice(1))-1,C[b]||(C[b]={});break;case"R":v=parseInt(U[_].slice(1))-1,w[v]||(w[v]={}),R>0?(w[v].hpt=R,w[v].hpx=Ax(R)):R===0&&(w[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+j)}J<1&&(B=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+j)}}return w.length>0&&(F["!rows"]=w),C.length>0&&(F["!cols"]=C),p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),[S,F]}function i(h,p){var g=a(h,p),v=g[0],b=g[1],y=Vx(v,p);return Ts(b).forEach(function(_){y[_]=b[_]}),y}function o(h,p){return dm(i(h,p),p)}function l(h,p,g,v){var b="C;Y"+(g+1)+";X"+(v+1)+";K";switch(h.t){case"n":b+=h.v||0,h.f&&!h.F&&(b+=";E"+PD(h.f,{r:g,c:v}));break;case"b":b+=h.v?"TRUE":"FALSE";break;case"e":b+=h.w||h.v;break;case"d":b+='"'+(h.w||h.v)+'"';break;case"s":b+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(h,p){p.forEach(function(g,v){var b="F;W"+(v+1)+" "+(v+1)+" ";g.hidden?b+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Uy(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=Qy(g.wpx)),typeof g.wch=="number"&&(b+=Math.round(g.wch))),b.charAt(b.length-1)!=" "&&h.push(b)})}function d(h,p){p.forEach(function(g,v){var b="F;";g.hidden?b+="M0;":g.hpt?b+="M"+20*g.hpt+";":g.hpx&&(b+="M"+20*Hy(g.hpx)+";"),b.length>2&&h.push(b+"R"+(v+1))})}function f(h,p){var g=["ID;PWXL;N;E"],v=[],b=Qn(h["!ref"]),y,_=Array.isArray(h),S=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var k=b.s.r;k<=b.e.r;++k)for(var B=b.s.c;B<=b.e.c;++B){var F=Ur({r:k,c:B});y=_?(h[k]||[])[B]:h[F],!(!y||y.v==null&&(!y.f||y.F))&&v.push(l(y,h,k,B))}return g.join(S)+S+v.join(S)+S+"E"+S}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),bee=function(){function e(s,i){switch(i.type){case"base64":return t(Fc(s),i);case"binary":return t(s,i);case"buffer":return t(mn&&Buffer.isBuffer(s)?s.toString("binary"):um(s),i);case"array":return t(Rp(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),l=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var h=o[d].trim().split(","),p=h[0],g=h[1];++d;for(var v=o[d]||"";(v.match(/["]/g)||[]).length&1&&d<o.length-1;)v+=`
`+o[++d];switch(v=v.trim(),+p){case-1:if(v==="BOT"){f[++l]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[l][u]=!0:v==="FALSE"?f[l][u]=!1:isNaN(bd(g))?isNaN(ux(g).getDate())?f[l][u]=g:f[l][u]=Ha(g):f[l][u]=bd(g),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[l][u++]=v!==""?v:null;break}if(v==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return Vx(e(s,i),i)}function n(s,i){return dm(r(s,i),i)}var a=function(){var s=function(l,u,d,f,h){l.push(u),l.push(d+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},i=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=Qn(l["!ref"]),f,h=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var v=Ur({r:p,c:g});if(f=h?(l[p]||[])[g]:l[v],!f){i(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=ju(f.z||Dr[14],ki(Ha(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,_=u.join(y);return _}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),yee=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,v=-1,b=0,y=[];b!==p.length;++b){var _=p[b].trim().split(":");if(_[0]==="cell"){var S=ss(_[1]);if(y.length<=S.r)for(g=y.length;g<=S.r;++g)y[g]||(y[g]=[]);switch(g=S.r,v=S.c,_[2]){case"t":y[g][v]=e(_[3]);break;case"v":y[g][v]=+_[3];break;case"vtf":var k=_[_.length-1];case"vtc":switch(_[3]){case"nl":y[g][v]=!!+_[4];break;default:y[g][v]=+_[4];break}_[2]=="vtf"&&(y[g][v]=[y[g][v],k])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return Vx(r(f,h),h)}function a(f,h){return dm(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,v="",b=Xl(f["!ref"]),y=Array.isArray(f),_=b.s.r;_<=b.e.r;++_)for(var S=b.s.c;S<=b.e.c;++S)if(v=Ur({r:_,c:S}),g=y?(f[_]||[])[S]:f[v],!(!g||g.v==null||g.t==="z")){switch(p=["cell",v,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var k=ki(Ha(g.v));p[2]="vtc",p[3]="nd",p[4]=""+k,p[5]=g.w||ju(g.z||Dr[14],k);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,o,i,u(f),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),dx=function(){function e(d,f,h,p,g){g.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(bd(d))?isNaN(ux(d).getDate())?f[h][p]=d:f[h][p]=Ha(d):f[h][p]=bd(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),v=g.length-1;v>=0&&g[v].length===0;)--v;for(var b=10,y=0,_=0;_<=v;++_)y=g[_].indexOf(" "),y==-1?y=g[_].length:y++,b=Math.max(b,y);for(_=0;_<=v;++_){p[_]=[];var S=0;for(e(g[_].slice(0,b).trim(),p,_,S,h),S=1;S<=(g[_].length-b)/10+1;++S)e(g[_].slice(b+(S-1)*10,b+S*10).trim(),p,_,S,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(v,b){return v[0]-b[0]||n[v[1]]-n[b[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},p="",g=h.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var b=0,y=0,_=0,S=0,k=0,B=p.charCodeAt(0),F=!1,w=0,C=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=h.dateNF!=null?Z2e(h.dateNF):null;function R(){var O=d.slice(S,k),j={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)j.t="z";else if(h.raw)j.t="s",j.v=O;else if(O.trim().length===0)j.t="s",j.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(j.t="s",j.v=O.slice(2,-1).replace(/""/g,'"')):kNe(O)?(j.t="n",j.f=O.slice(1)):(j.t="s",j.v=O);else if(O=="TRUE")j.t="b",j.v=!0;else if(O=="FALSE")j.t="b",j.v=!1;else if(!isNaN(_=bd(O)))j.t="n",h.cellText!==!1&&(j.w=O),j.v=_;else if(!isNaN(ux(O).getDate())||N&&O.match(N)){j.z=h.dateNF||Dr[14];var U=0;N&&O.match(N)&&(O=eEe(O,h.dateNF,O.match(N)||[]),U=1),h.cellDates?(j.t="d",j.v=Ha(O,U)):(j.t="n",j.v=ki(Ha(O,U))),h.cellText!==!1&&(j.w=ju(j.z,j.v instanceof Date?ki(j.v):j.v)),h.cellNF||delete j.z}else j.t="s",j.v=O;if(j.t=="z"||(h.dense?(g[b]||(g[b]=[]),g[b][y]=j):g[Ur({c:y,r:b})]=j),S=k+1,C=d.charCodeAt(S),v.e.c<y&&(v.e.c=y),v.e.r<b&&(v.e.r=b),w==B)++y;else if(y=0,++b,h.sheetRows&&h.sheetRows<=b)return!0}e:for(;k<d.length;++k)switch(w=d.charCodeAt(k)){case 34:C===34&&(F=!F);break;case B:case 10:case 13:if(!F&&R())break e;break}return k-S>0&&R(),g["!ref"]=rn(v),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):Vx(t(d,f),f)}function o(d,f){var h="",p=f.type=="string"?[0,0,0,0]:$D(d,f);switch(f.type){case"base64":h=Fc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof jy<"u"||(h=mn&&Buffer.isBuffer(d)?d.toString("binary"):um(d));break;case"array":h=Rp(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=_a(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=_a(h):f.type=="binary"&&typeof jy<"u",h.slice(0,19)=="socialcalc:version:"?yee.to_sheet(f.type=="string"?h:_a(h),f):i(h,f)}function l(d,f){return dm(o(d,f),f)}function u(d){for(var f=[],h=Qn(d["!ref"]),p,g=Array.isArray(d),v=h.s.r;v<=h.e.r;++v){for(var b=[],y=h.s.c;y<=h.e.c;++y){var _=Ur({r:v,c:y});if(p=g?(d[v]||[])[y]:d[_],!p||p.v==null){b.push("          ");continue}for(var S=(p.w||(Jf(p),p.w)||"").slice(0,10);S.length<10;)S+=" ";b.push(S+(y===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function hSe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=xee.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return dx.to_workbook(e,t)}}var vp=function(){function e(L,W,J){if(L){ho(L,L.l||0);for(var te=J.Enum||q;L.l<L.length;){var ie=L.read_shift(2),Ae=te[ie]||te[65535],oe=L.read_shift(2),ce=L.l+oe,ge=Ae.f&&Ae.f(L,oe,J);if(L.l=ce,W(ge,Ae,ie))return}}}function t(L,W){switch(W.type){case"base64":return r(_c(Fc(L)),W);case"binary":return r(_c(L),W);case"buffer":case"array":return r(L,W)}throw"Unsupported type "+W.type}function r(L,W){if(!L)return L;var J=W||{},te=J.dense?[]:{},ie="Sheet1",Ae="",oe=0,ce={},ge=[],je=[],re={s:{r:0,c:0},e:{r:0,c:0}},Se=J.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)J.Enum=q,e(L,function(Ie,He,Xe){switch(Xe){case 0:J.vers=Ie,Ie>=4096&&(J.qpro=!0);break;case 6:re=Ie;break;case 204:Ie&&(Ae=Ie);break;case 222:Ae=Ie;break;case 15:case 51:J.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:Xe==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=J.dateNF||Dr[14],J.cellDates&&(Ie[1].t="d",Ie[1].v=xN(Ie[1].v))),J.qpro&&Ie[3]>oe&&(te["!ref"]=rn(re),ce[ie]=te,ge.push(ie),te=J.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ie=Ae||"Sheet"+(oe+1),Ae="");var ye=J.dense?(te[Ie[0].r]||[])[Ie[0].c]:te[Ur(Ie[0])];if(ye){ye.t=Ie[1].t,ye.v=Ie[1].v,Ie[1].z!=null&&(ye.z=Ie[1].z),Ie[1].f!=null&&(ye.f=Ie[1].f);break}J.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Ur(Ie[0])]=Ie[1];break}},J);else if(L[2]==26||L[2]==14)J.Enum=ne,L[2]==14&&(J.qpro=!0,L.l=0),e(L,function(Ie,He,Xe){switch(Xe){case 204:ie=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>oe&&(te["!ref"]=rn(re),ce[ie]=te,ge.push(ie),te=J.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ie="Sheet"+(oe+1)),Se>0&&Ie[0].r>=Se)break;J.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Ur(Ie[0])]=Ie[1],re.e.c<Ie[0].c&&(re.e.c=Ie[0].c),re.e.r<Ie[0].r&&(re.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(je[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:je[Ie[0]]=Ie[1],Ie[0]==oe&&(ie=Ie[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(te["!ref"]=rn(re),ce[Ae||ie]=te,ge.push(Ae||ie),!je.length)return{SheetNames:ge,Sheets:ce};for(var De={},_e=[],he=0;he<je.length;++he)ce[ge[he]]?(_e.push(je[he]||ge[he]),De[je[he]]=ce[je[he]]||ce[ge[he]]):(_e.push(je[he]),De[je[he]]={"!ref":"A1"});return{SheetNames:_e,Sheets:De}}function n(L,W){var J=W||{};if(+J.codepage>=0&&gd(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var te=ql(),ie=Qn(L["!ref"]),Ae=Array.isArray(L),oe=[];qt(te,0,s(1030)),qt(te,6,l(ie));for(var ce=Math.min(ie.e.r,8191),ge=ie.s.r;ge<=ce;++ge)for(var je=Ws(ge),re=ie.s.c;re<=ie.e.c;++re){ge===ie.s.r&&(oe[re]=as(re));var Se=oe[re]+je,De=Ae?(L[ge]||[])[re]:L[Se];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?qt(te,13,p(ge,re,De.v)):qt(te,14,v(ge,re,De.v));else{var _e=Jf(De);qt(te,15,f(ge,re,_e.slice(0,239)))}}return qt(te,1),te.end()}function a(L,W){var J=W||{};if(+J.codepage>=0&&gd(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var te=ql();qt(te,0,i(L));for(var ie=0,Ae=0;ie<L.SheetNames.length;++ie)(L.Sheets[L.SheetNames[ie]]||{})["!ref"]&&qt(te,27,V(L.SheetNames[ie],Ae++));var oe=0;for(ie=0;ie<L.SheetNames.length;++ie){var ce=L.Sheets[L.SheetNames[ie]];if(!(!ce||!ce["!ref"])){for(var ge=Qn(ce["!ref"]),je=Array.isArray(ce),re=[],Se=Math.min(ge.e.r,8191),De=ge.s.r;De<=Se;++De)for(var _e=Ws(De),he=ge.s.c;he<=ge.e.c;++he){De===ge.s.r&&(re[he]=as(he));var Ie=re[he]+_e,He=je?(ce[De]||[])[he]:ce[Ie];if(!(!He||He.t=="z"))if(He.t=="n")qt(te,23,R(De,he,oe,He.v));else{var Xe=Jf(He);qt(te,22,w(De,he,oe,Xe.slice(0,239)))}}++oe}}return qt(te,1),te.end()}function s(L){var W=yt(2);return W.write_shift(2,L),W}function i(L){var W=yt(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var J=0,te=0,ie=0,Ae=0;Ae<L.SheetNames.length;++Ae){var oe=L.SheetNames[Ae],ce=L.Sheets[oe];if(!(!ce||!ce["!ref"])){++ie;var ge=Xl(ce["!ref"]);J<ge.e.r&&(J=ge.e.r),te<ge.e.c&&(te=ge.e.c)}}return J>8191&&(J=8191),W.write_shift(2,J),W.write_shift(1,ie),W.write_shift(1,te),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(L,W,J){var te={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&J.qpro?(te.s.c=L.read_shift(1),L.l++,te.s.r=L.read_shift(2),te.e.c=L.read_shift(1),L.l++,te.e.r=L.read_shift(2),te):(te.s.c=L.read_shift(2),te.s.r=L.read_shift(2),W==12&&J.qpro&&(L.l+=2),te.e.c=L.read_shift(2),te.e.r=L.read_shift(2),W==12&&J.qpro&&(L.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(L){var W=yt(8);return W.write_shift(2,L.s.c),W.write_shift(2,L.s.r),W.write_shift(2,L.e.c),W.write_shift(2,L.e.r),W}function u(L,W,J){var te=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(te[0].c=L.read_shift(1),te[3]=L.read_shift(1),te[0].r=L.read_shift(2),L.l+=2):(te[2]=L.read_shift(1),te[0].c=L.read_shift(2),te[0].r=L.read_shift(2)),te}function d(L,W,J){var te=L.l+W,ie=u(L,W,J);if(ie[1].t="s",J.vers==20768){L.l++;var Ae=L.read_shift(1);return ie[1].v=L.read_shift(Ae,"utf8"),ie}return J.qpro&&L.l++,ie[1].v=L.read_shift(te-L.l,"cstr"),ie}function f(L,W,J){var te=yt(7+J.length);te.write_shift(1,255),te.write_shift(2,W),te.write_shift(2,L),te.write_shift(1,39);for(var ie=0;ie<te.length;++ie){var Ae=J.charCodeAt(ie);te.write_shift(1,Ae>=128?95:Ae)}return te.write_shift(1,0),te}function h(L,W,J){var te=u(L,W,J);return te[1].v=L.read_shift(2,"i"),te}function p(L,W,J){var te=yt(7);return te.write_shift(1,255),te.write_shift(2,W),te.write_shift(2,L),te.write_shift(2,J,"i"),te}function g(L,W,J){var te=u(L,W,J);return te[1].v=L.read_shift(8,"f"),te}function v(L,W,J){var te=yt(13);return te.write_shift(1,255),te.write_shift(2,W),te.write_shift(2,L),te.write_shift(8,J,"f"),te}function b(L,W,J){var te=L.l+W,ie=u(L,W,J);if(ie[1].v=L.read_shift(8,"f"),J.qpro)L.l=te;else{var Ae=L.read_shift(2);k(L.slice(L.l,L.l+Ae),ie),L.l+=Ae}return ie}function y(L,W,J){var te=W&32768;return W&=-32769,W=(te?L:0)+(W>=8192?W-16384:W),(te?"":"$")+(J?as(W):Ws(W))}var _={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(L,W){ho(L,0);for(var J=[],te=0,ie="",Ae="",oe="",ce="";L.l<L.length;){var ge=L[L.l++];switch(ge){case 0:J.push(L.read_shift(8,"f"));break;case 1:Ae=y(W[0].c,L.read_shift(2),!0),ie=y(W[0].r,L.read_shift(2),!1),J.push(Ae+ie);break;case 2:{var je=y(W[0].c,L.read_shift(2),!0),re=y(W[0].r,L.read_shift(2),!1);Ae=y(W[0].c,L.read_shift(2),!0),ie=y(W[0].r,L.read_shift(2),!1),J.push(je+re+":"+Ae+ie)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(L.read_shift(2));break;case 6:{for(var Se="";ge=L[L.l++];)Se+=String.fromCharCode(ge);J.push('"'+Se.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:ce=J.pop(),oe=J.pop(),J.push(["AND","OR"][ge-20]+"("+oe+","+ce+")");break;default:if(ge<32&&S[ge])ce=J.pop(),oe=J.pop(),J.push(oe+S[ge]+ce);else if(_[ge]){if(te=_[ge][1],te==69&&(te=L[L.l++]),te>J.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+J.join("|")+"|");return}var De=J.slice(-te);J.length-=te,J.push(_[ge][0]+"("+De.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}J.length==1?W[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function B(L){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=L.read_shift(2),W[3]=L[L.l++],W[0].c=L[L.l++],W}function F(L,W){var J=B(L);return J[1].t="s",J[1].v=L.read_shift(W-4,"cstr"),J}function w(L,W,J,te){var ie=yt(6+te.length);ie.write_shift(2,L),ie.write_shift(1,J),ie.write_shift(1,W),ie.write_shift(1,39);for(var Ae=0;Ae<te.length;++Ae){var oe=te.charCodeAt(Ae);ie.write_shift(1,oe>=128?95:oe)}return ie.write_shift(1,0),ie}function C(L,W){var J=B(L);J[1].v=L.read_shift(2);var te=J[1].v>>1;if(J[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return J[1].v=te,J}function N(L,W){var J=B(L),te=L.read_shift(4),ie=L.read_shift(4),Ae=L.read_shift(2);if(Ae==65535)return te===0&&ie===3221225472?(J[1].t="e",J[1].v=15):te===0&&ie===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var oe=Ae&32768;return Ae=(Ae&32767)-16446,J[1].v=(1-oe*2)*(ie*Math.pow(2,Ae+32)+te*Math.pow(2,Ae)),J}function R(L,W,J,te){var ie=yt(14);if(ie.write_shift(2,L),ie.write_shift(1,J),ie.write_shift(1,W),te==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var Ae=0,oe=0,ce=0,ge=0;return te<0&&(Ae=1,te=-te),oe=Math.log2(te)|0,te/=Math.pow(2,oe-31),ge=te>>>0,(ge&2147483648)==0&&(te/=2,++oe,ge=te>>>0),te-=ge,ge|=2147483648,ge>>>=0,te*=Math.pow(2,32),ce=te>>>0,ie.write_shift(4,ce),ie.write_shift(4,ge),oe+=16383+(Ae?32768:0),ie.write_shift(2,oe),ie}function O(L,W){var J=N(L);return L.l+=W-14,J}function j(L,W){var J=B(L),te=L.read_shift(4);return J[1].v=te>>6,J}function U(L,W){var J=B(L),te=L.read_shift(8,"f");return J[1].v=te,J}function P(L,W){var J=U(L);return L.l+=W-10,J}function X(L,W){return L[L.l+W-1]==0?L.read_shift(W,"cstr"):""}function K(L,W){var J=L[L.l++];J>W-1&&(J=W-1);for(var te="";te.length<J;)te+=String.fromCharCode(L[L.l++]);return te}function Z(L,W,J){if(!(!J.qpro||W<21)){var te=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var ie=L.read_shift(W-21,"cstr");return[te,ie]}}function H(L,W){for(var J={},te=L.l+W;L.l<te;){var ie=L.read_shift(2);if(ie==14e3){for(J[ie]=[0,""],J[ie][0]=L.read_shift(2);L[L.l];)J[ie][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return J}function V(L,W){var J=yt(5+L.length);J.write_shift(2,14e3),J.write_shift(2,W);for(var te=0;te<L.length;++te){var ie=L.charCodeAt(te);J[J.l++]=ie>127?95:ie}return J[J.l++]=0,J}var q={0:{n:"BOF",f:ui},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:X},222:{n:"SHEETNAMELP",f:K},65535:{n:""}},ne={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:j},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:P},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:X},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function mSe(e){var t={},r=e.match(tl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=$r(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=lD[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var pSe=function(){var e=Dy("t"),t=Dy("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Un(i[1])},l=s.match(t);return l&&(o.s=mSe(l[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),gSe=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),vSe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,xSe=/<(?:\w+:)?r>/,bSe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function jD(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Un(_a(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=_a(e),r&&(n.h=vD(n.t))):e.match(xSe)&&(n.r=_a(e),n.t=Un(_a((e.replace(bSe,"").match(vSe)||[]).join("").replace(tl,""))),r&&(n.h=gSe(pSe(n.r)))),n):{t:""}}var ySe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,wSe=/<(?:\w+:)?(?:si|sstItem)>/g,ESe=/<\/(?:\w+:)?(?:si|sstItem)>/;function CSe(e,t){var r=[],n="";if(!e)return r;var a=e.match(ySe);if(a){n=a[2].replace(wSe,"").split(ESe);for(var s=0;s!=n.length;++s){var i=jD(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=$r(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var _Se=/^\s|\s$|[\t\n\r]/;function wee(e,t){if(!t.bookSST)return"";var r=[Js];r[r.length]=Gt("sst",null,{xmlns:Zp[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(_Se)&&(s+=' xml:space="preserve"'),s+=">"+ga(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function SSe(e){return[e.read_shift(4),e.read_shift(4)]}function NSe(e,t){var r=[],n=!1;return Ah(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function kSe(e,t){return t||(t=yt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var BSe=MEe;function TSe(e){var t=ql();Rt(t,159,kSe(e));for(var r=0;r<e.length;++r)Rt(t,19,BSe(e[r]));return Rt(t,160),t.end()}function Eee(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Qf(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function ISe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Qf(e,4),t.U=Qf(e,4),t.W=Qf(e,4),t}function jSe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function FSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(jSe(e));return t}function OSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function DSe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Qf(e,4),t.U=Qf(e,4),t.W=Qf(e,4),t}function RSe(e){var t=DSe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Cee(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function _ee(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function PSe(e){var t=Qf(e);switch(t.Minor){case 2:return[t.Minor,LSe(e)];case 3:return[t.Minor,MSe()];case 4:return[t.Minor,USe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function LSe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Cee(e,r),a=_ee(e,e.length-e.l);return{t:"Std",h:n,v:a}}function MSe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function USe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(tl,function(s){var i=$r(s);switch(VA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function QSe(e,t){var r={},n=r.EncryptionVersionInfo=Qf(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=Cee(e,a),t-=a,r.EncryptionVerifier=_ee(e,t),r}function HSe(e){var t={},r=t.EncryptionVersionInfo=Qf(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function FD(e){var t=0,r,n=Eee(e),a=n.length+1,s,i,o,l,u;for(r=Z0(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,l=t<<1&32767,u=o|l,t=u^i;return t^52811}var See=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=Eee(i),l=s(o),u=o.length,d=Z0(16),f=0;f!=16;++f)d[f]=0;var h,p,g;for((u&1)===1&&(h=l>>8,d[u]=a(e[0],h),--u,h=l&255,p=o[o.length-1],d[u]=a(p,h));u>0;)--u,h=l>>8,d[u]=a(o[u],h),--u,h=l&255,d[u]=a(o[u],h);for(u=15,g=15-o.length;g>0;)h=l>>8,d[u]=a(e[g],h),--u,--g,h=l&255,d[u]=a(o[u],h),--u,--g;return d}}(),VSe=function(e,t,r,n,a){a||(a=t),n||(n=See(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},zSe=function(e){var t=0,r=See(e);return function(n){var a=VSe("",n,t,r);return t=a[1],a[0]}};function $Se(e,t,r,n){var a={key:ui(e),verificationBytes:ui(e)};return r.password&&(a.verifier=FD(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=zSe(r.password)),a}function KSe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=HSe(e):n.Data=QSe(e,t),n}function GSe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?KSe(e,t-2,n):$Se(e,r.biff>=8?t:t-2,r,n),n}var Nee=function(){function e(a,s){switch(s.type){case"base64":return t(Fc(a),s);case"binary":return t(a,s);case"buffer":return t(mn&&Buffer.isBuffer(a)?a.toString("binary"):um(a),s);case"array":return t(Rp(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,v=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var b=d.slice(p,h.lastIndex-g[0].length);if(b[0]==" "&&(b=b.slice(1)),++v,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[f][v]=y:o[Ur({r:f,c:v})]=y}break}p=h.lastIndex}v>u.e.c&&(u.e.c=v)}),o["!ref"]=rn(u),o}function r(a,s){return dm(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Qn(a["!ref"]),o,l=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Ur({r:u,c:d});o=l?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Jf(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function qSe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function My(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function WSe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,l=0,u=a+s;switch(l=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,l,u/2]}function XSe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=a*o,i[0]+=a,i[1]+=l;break;case 1:l=a*(2-o),i[0]+=l,i[1]+=a;break;case 2:l=a*(o-2),i[1]+=a,i[2]+=l;break;case 3:l=a*(4-o),i[1]+=l,i[2]+=a;break;case 4:l=a*(o-4),i[2]+=a,i[0]+=l;break;case 5:l=a*(6-o),i[2]+=l,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function oS(e,t){if(t===0)return e;var r=WSe(qSe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),My(XSe(r))}var kee=6,YSe=15,JSe=1,$o=kee;function Uy(e){return Math.floor((e+Math.round(128/$o)/256)*$o)}function Qy(e){return Math.floor((e-5)/$o*100+.5)/100}function lS(e){return Math.round((e*$o+5)/$o*256)/256}function LB(e){return lS(Qy(Uy(e)))}function OD(e){var t=Math.abs(e-LB(e)),r=$o;if(t>.005)for($o=JSe;$o<YSe;++$o)Math.abs(e-LB(e))<=t&&(t=Math.abs(e-LB(e)),r=$o);$o=r}function em(e){e.width?(e.wpx=Uy(e.width),e.wch=Qy(e.wpx),e.MDW=$o):e.wpx?(e.wch=Qy(e.wpx),e.width=lS(e.wch),e.MDW=$o):typeof e.wch=="number"&&(e.width=lS(e.wch),e.wpx=Uy(e.width),e.MDW=$o),e.customWidth&&delete e.customWidth}var ZSe=96,Bee=ZSe;function Hy(e){return e*96/Bee}function Ax(e){return e*Bee/96}var e5e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function t5e(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(tl)||[]).forEach(function(i){var o=$r(i);switch(VA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ua(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ua(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function r5e(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(tl)||[]).forEach(function(i){var o=$r(i);switch(VA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function n5e(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(tl)||[]).forEach(function(i){var o=$r(i);switch(VA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=_a(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ua(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ua(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ua(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ua(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ua(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ua(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ua(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=lD[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ua(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var l=pp[a.color.index];a.color.index==81&&(l=pp[1]),l||(l=pp[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=oS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function a5e(e,t,r){t.NumberFmt=[];for(var n=Ts(Dr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Dr[n[a]];var s=e[0].match(tl);if(s)for(a=0;a<s.length;++a){var i=$r(s[a]);switch(VA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Un(_a(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}Uf(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function s5e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Gt("numFmt",null,{numFmtId:n,formatCode:ga(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Gt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var jE=["numFmtId","fillId","fontId","borderId","xfId"],FE=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function i5e(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(tl)||[]).forEach(function(s){var i=$r(s),o=0;switch(VA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<jE.length;++o)n[jE[o]]&&(n[jE[o]]=parseInt(n[jE[o]],10));for(o=0;o<FE.length;++o)n[FE[o]]&&(n[FE[o]]=Ua(n[FE[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Ua(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function o5e(e){var t=[];return t[t.length]=Gt("cellXfs",null),e.forEach(function(r){t[t.length]=Gt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Gt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var l5e=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&a5e(f,d,u),(f=o.match(a))&&n5e(f,d,l,u),(f=o.match(n))&&r5e(f,d,l,u),(f=o.match(s))&&t5e(f,d,l,u),(f=o.match(r))&&i5e(f,d,u),d}}();function Tee(e,t){var r=[Js,Gt("styleSheet",null,{xmlns:Zp[0],"xmlns:vt":Si.vt})],n;return e.SSF&&(n=s5e(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=o5e(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function c5e(e,t){var r=e.read_shift(2),n=Yo(e);return[r,n]}function u5e(e,t,r){r||(r=yt(6+4*t.length)),r.write_shift(2,e),Wi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function d5e(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=KEe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=$Ee(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Yo(e),n}function A5e(e,t){t||(t=yt(153)),t.write_shift(2,e.sz*20),GEe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),aS(e.color,t);var n=0;return n=2,t.write_shift(1,n),Wi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var f5e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],MB,h5e=Zo;function FQ(e,t){t||(t=yt(84)),MB||(MB=gN(f5e));var r=MB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(aS({auto:1},t),aS({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function m5e(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Iee(e,t,r){r||(r=yt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Z1(e,t){return t||(t=yt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var p5e=Zo;function g5e(e,t){return t||(t=yt(51)),t.write_shift(1,0),Z1(null,t),Z1(null,t),Z1(null,t),Z1(null,t),Z1(null,t),t.length>t.l?t.slice(0,t.l):t}function v5e(e,t){return t||(t=yt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),nS(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function x5e(e,t,r){var n=yt(2052);return n.write_shift(4,e),nS(t,n),nS(r,n),n.length>n.l?n.slice(0,n.l):n}function b5e(e,t,r){var n={};n.NumberFmt=[];for(var a in Dr)n.NumberFmt[a]=Dr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Ah(e,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Uf(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=oS(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function y5e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,yd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,u5e(a,t[a]))}),Rt(e,616))}}function w5e(e){var t=1;Rt(e,611,yd(t)),Rt(e,43,A5e({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function E5e(e){var t=2;Rt(e,603,yd(t)),Rt(e,45,FQ({patternType:"none"})),Rt(e,45,FQ({patternType:"gray125"})),Rt(e,604)}function C5e(e){var t=1;Rt(e,613,yd(t)),Rt(e,46,g5e()),Rt(e,614)}function _5e(e){var t=1;Rt(e,626,yd(t)),Rt(e,47,Iee({numFmtId:0},65535)),Rt(e,627)}function S5e(e,t){Rt(e,617,yd(t.length)),t.forEach(function(r){Rt(e,47,Iee(r,0))}),Rt(e,618)}function N5e(e){var t=1;Rt(e,619,yd(t)),Rt(e,48,v5e({xfId:0,name:"Normal"})),Rt(e,620)}function k5e(e){var t=0;Rt(e,505,yd(t)),Rt(e,506)}function B5e(e){var t=0;Rt(e,508,x5e(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function T5e(e,t){var r=ql();return Rt(r,278),y5e(r,e.SSF),w5e(r),E5e(r),C5e(r),_5e(r),S5e(r,t.cellXfs),N5e(r),k5e(r),B5e(r),Rt(r,279),r.end()}var I5e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function j5e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(tl)||[]).forEach(function(a){var s=$r(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[I5e.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function F5e(){}function O5e(){}var D5e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,R5e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,P5e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function L5e(e,t,r){t.themeElements={};var n;[["clrScheme",D5e,j5e],["fontScheme",R5e,F5e],["fmtScheme",P5e,O5e]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var M5e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function jee(e,t){(!e||e.length===0)&&(e=DD());var r,n={};if(!(r=e.match(M5e)))throw new Error("themeElements not found in theme");return L5e(r[0],n,t),n.raw=e,n}function DD(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Js];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function U5e(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=CZ(s,{type:"array"})}catch{return}var o=Sc(i,"theme/theme/theme1.xml",!0);if(o)return jee(o,r)}}function Q5e(e){return e.read_shift(4)}function H5e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=V5e(e,4);break;case 2:t.xclrValue=dee(e);break;case 3:t.xclrValue=Q5e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function V5e(e,t){return Zo(e,t)}function z5e(e,t){return Zo(e,t)}function $5e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=H5e(e);break;case 6:n[1]=z5e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function K5e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push($5e(e,r-e.l));return{ixfe:n,ext:s}}function G5e(e,t){t.forEach(function(r){r[0]})}function q5e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Yo(e)}}function W5e(e){var t=yt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Wi(e.name,t),t.slice(0,t.l)}function X5e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Y5e(e){var t=yt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function J5e(e,t){var r=yt(8+2*t.length);return r.write_shift(4,e),Wi(t,r),r.slice(0,r.l)}function Z5e(e){return e.l+=4,e.read_shift(4)!=0}function eNe(e,t){var r=yt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function tNe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return Ah(e,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function rNe(){var e=ql();return Rt(e,332),Rt(e,334,yd(1)),Rt(e,335,W5e({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,J5e(1,"XLDAPR")),Rt(e,52),Rt(e,35,yd(514)),Rt(e,4096,yd(0)),Rt(e,4097,xu(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,eNe(1)),Rt(e,51,Y5e([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function nNe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(tl,function(o){var l=$r(o);switch(VA(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function Fee(){var e=[Js];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function aNe(e){var t=[];if(!e)return t;var r=1;return(e.match(tl)||[]).forEach(function(n){var a=$r(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function sNe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Ur(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function iNe(e,t,r){var n=[];return Ah(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function oNe(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Ah(e,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function lNe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var yv=1024;function Oee(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Gt("xml",null,{"xmlns:v":wc.v,"xmlns:o":wc.o,"xmlns:x":wc.x,"xmlns:mv":wc.mv}).replace(/\/>/,">"),Gt("o:shapelayout",Gt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Gt("v:shapetype",[Gt("v:stroke",null,{joinstyle:"miter"}),Gt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];yv<e*1e3;)yv+=1e3;return t.forEach(function(s){var i=ss(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Gt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Gt("v:fill",l,o),d={on:"t",obscured:"t"};++yv,a=a.concat(["<v:shape"+Ry({id:"_x0000_s"+yv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Gt("v:shadow",null,d),Gt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",po("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),po("x:AutoFill","False"),po("x:Row",String(i.r)),po("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function OQ(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=ss(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var l=Qn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=rn(l);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function cNe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=$r(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=ss(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&jD(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Dee(e){var t=[Js,Gt("comments",null,{xmlns:Zp[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=ga(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(a=r.indexOf(ga(l.a))),s.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(po("t",ga(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(po("t",ga(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function uNe(e,t){var r=[],n=!1,a={},s=0;return e.replace(tl,function(o,l){var u=$r(o);switch(VA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":a.t=e.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function dNe(e,t,r){var n=[Js,Gt("ThreadedComments",null,{xmlns:Si.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Gt("threadedComment",po("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function ANe(e,t){var r=[],n=!1;return e.replace(tl,function(s){var i=$r(s);switch(VA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function fNe(e){var t=[Js,Gt("personList",null,{xmlns:Si.TCMNT,"xmlns:x":Zp[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Gt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function hNe(e){var t={};t.iauthor=e.read_shift(4);var r=ng(e);return t.rfx=r.s,t.ref=Ur(r.s),e.l+=16,t}function mNe(e,t){return t==null&&(t=yt(36)),t.write_shift(4,e[1].iauthor),zx(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var pNe=Yo;function gNe(e){return Wi(e.slice(0,54))}function vNe(e,t){var r=[],n=[],a={},s=!1;return Ah(e,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function xNe(e){var t=ql(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,gNe(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:ss(n[0]),e:ss(n[0])};Rt(t,635,mNe([s,a])),a.t&&a.t.length>0&&Rt(t,637,QEe(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var bNe="application/vnd.ms-office.vbaProject";function yNe(e){var t=Er.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Er.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Er.write(t)}function wNe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Er.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Ree=["xlsb","xlsm","xlam","biff8","xla"];function ENe(){return{"!type":"dialog"}}function CNe(){return{"!type":"dialog"}}function _Ne(){return{"!type":"macro"}}function SNe(){return{"!type":"macro"}}var $v=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,l?u+=t.r:--u,a+(o?"":"$")+as(d)+(l?"":"$")+Ws(u)}return function(a,s){return t=s,a.replace(e,r)}}(),RD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,PD=function(){return function(t,r){return t.replace(RD,function(n,a,s,i,o,l){var u=ED(i)-(s?0:r.c),d=wD(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Pee(e,t){return e.replace(RD,function(r,n,a,s,i,o){return n+(a=="$"?a+s:as(ED(s)+t.c))+(i=="$"?i+o:Ws(wD(o)+t.r))})}function NNe(e,t,r){var n=Xl(t),a=n.s,s=ss(r),i={r:s.r-a.r,c:s.c-a.c};return Pee(e,i)}function kNe(e){return e.length!=1}function DQ(e){return e.replace(/_xlfn\./g,"")}function ii(e){e.l+=1}function tm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Lee(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Mee(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=tm(e),o=tm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Mee(e){var t=tm(e),r=tm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function BNe(e,t,r){if(r.biff<8)return Mee(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=tm(e),i=tm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Uee(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return TNe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=tm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function TNe(e){var t=tm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function INe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function jNe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return FNe(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function FNe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function ONe(e,t,r){var n=(e[e.l++]&96)>>5,a=Lee(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function DNe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=Lee(e,s,r);return[n,a,i]}function RNe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function PNe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function LNe(e,t,r){var n=(e[e.l++]&96)>>5,a=BNe(e,t-1,r);return[n,a]}function MNe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function RQ(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function UNe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function QNe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function HNe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function VNe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function zNe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Qee(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function $Ne(e){return e.read_shift(2),Qee(e)}function KNe(e){return e.read_shift(2),Qee(e)}function GNe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Uee(e,0,r);return[n,a]}function qNe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=jNe(e,0,r);return[n,a]}function WNe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Uee(e,0,r);return[n,a,s]}function XNe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[Z4e[a],zee[a],n]}function YNe(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:JNe(e);return[a,(s[0]===0?zee:J4e)[s[1]]]}function JNe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function ZNe(e,t,r){e.l+=r&&r.biff==2?3:4}function e4e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function t4e(e){return e.l++,fh[e.read_shift(1)]}function r4e(e){return e.l++,e.read_shift(2)}function n4e(e){return e.l++,e.read_shift(1)!==0}function a4e(e){return e.l++,Xo(e)}function s4e(e,t,r){return e.l++,Rw(e,t-1,r)}function i4e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Us(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=fh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Xo(e);break;case 2:r[1]=ag(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function o4e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?ng:bN)(e));return a}function l4e(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=i4e(e,r.biff);return i}function c4e(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function u4e(e,t,r){if(r.biff==5)return d4e(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function d4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function A4e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function f4e(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function h4e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function m4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var p4e=Zo,g4e=Zo,v4e=Zo;function Lw(e,t,r){return e.l+=2,[INe(e)]}function LD(e){return e.l+=6,[]}var x4e=Lw,b4e=LD,y4e=LD,w4e=Lw;function Hee(e){return e.l+=2,[ui(e),e.read_shift(2)&1]}var E4e=Lw,C4e=Hee,_4e=LD,S4e=Lw,N4e=Lw,k4e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function B4e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=k4e[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function T4e(e){return e.l+=2,[e.read_shift(4)]}function I4e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function j4e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function F4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function O4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function D4e(e){return e.l+=4,[0,0]}var PQ={1:{n:"PtgExp",f:e4e},2:{n:"PtgTbl",f:v4e},3:{n:"PtgAdd",f:ii},4:{n:"PtgSub",f:ii},5:{n:"PtgMul",f:ii},6:{n:"PtgDiv",f:ii},7:{n:"PtgPower",f:ii},8:{n:"PtgConcat",f:ii},9:{n:"PtgLt",f:ii},10:{n:"PtgLe",f:ii},11:{n:"PtgEq",f:ii},12:{n:"PtgGe",f:ii},13:{n:"PtgGt",f:ii},14:{n:"PtgNe",f:ii},15:{n:"PtgIsect",f:ii},16:{n:"PtgUnion",f:ii},17:{n:"PtgRange",f:ii},18:{n:"PtgUplus",f:ii},19:{n:"PtgUminus",f:ii},20:{n:"PtgPercent",f:ii},21:{n:"PtgParen",f:ii},22:{n:"PtgMissArg",f:ii},23:{n:"PtgStr",f:s4e},26:{n:"PtgSheet",f:I4e},27:{n:"PtgEndSheet",f:j4e},28:{n:"PtgErr",f:t4e},29:{n:"PtgBool",f:n4e},30:{n:"PtgInt",f:r4e},31:{n:"PtgNum",f:a4e},32:{n:"PtgArray",f:MNe},33:{n:"PtgFunc",f:XNe},34:{n:"PtgFuncVar",f:YNe},35:{n:"PtgName",f:c4e},36:{n:"PtgRef",f:GNe},37:{n:"PtgArea",f:ONe},38:{n:"PtgMemArea",f:A4e},39:{n:"PtgMemErr",f:p4e},40:{n:"PtgMemNoMem",f:g4e},41:{n:"PtgMemFunc",f:f4e},42:{n:"PtgRefErr",f:h4e},43:{n:"PtgAreaErr",f:RNe},44:{n:"PtgRefN",f:qNe},45:{n:"PtgAreaN",f:LNe},46:{n:"PtgMemAreaN",f:F4e},47:{n:"PtgMemNoMemN",f:O4e},57:{n:"PtgNameX",f:u4e},58:{n:"PtgRef3d",f:WNe},59:{n:"PtgArea3d",f:DNe},60:{n:"PtgRefErr3d",f:m4e},61:{n:"PtgAreaErr3d",f:PNe},255:{}},R4e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},P4e={1:{n:"PtgElfLel",f:Hee},2:{n:"PtgElfRw",f:S4e},3:{n:"PtgElfCol",f:x4e},6:{n:"PtgElfRwV",f:N4e},7:{n:"PtgElfColV",f:w4e},10:{n:"PtgElfRadical",f:E4e},11:{n:"PtgElfRadicalS",f:_4e},13:{n:"PtgElfColS",f:b4e},15:{n:"PtgElfColSV",f:y4e},16:{n:"PtgElfRadicalLel",f:C4e},25:{n:"PtgList",f:B4e},29:{n:"PtgSxName",f:T4e},255:{}},L4e={0:{n:"PtgAttrNoop",f:D4e},1:{n:"PtgAttrSemi",f:zNe},2:{n:"PtgAttrIf",f:HNe},4:{n:"PtgAttrChoose",f:UNe},8:{n:"PtgAttrGoto",f:QNe},16:{n:"PtgAttrSum",f:ZNe},32:{n:"PtgAttrBaxcel",f:RQ},33:{n:"PtgAttrBaxcel",f:RQ},64:{n:"PtgAttrSpace",f:$Ne},65:{n:"PtgAttrSpaceSemi",f:KNe},128:{n:"PtgAttrIfError",f:VNe},255:{}};function Mw(e,t,r,n){if(n.biff<8)return Zo(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=l4e(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=o4e(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(Zo(e,t)),s}function Uw(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=PQ[s]||PQ[R4e[s]],(s===24||s===25)&&(a=(s===24?P4e:L4e)[e[e.l+1]]),!a||!a.f?Zo(e,t):i.push([a.n,a.f(e,t,r)]);return i}function M4e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var U4e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Q4e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Vee(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function LQ(e,t,r){var n=Vee(e,t,r);return n=="#REF"?n:Q4e(n,r)}function Ho(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,f=0,h=0,p,g="";if(!e[0]||!e[0][0])return"";for(var v=-1,b="",y=0,_=e[0].length;y<_;++y){var S=e[0][y];switch(S[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),v>=0){switch(e[0][v][1][0]){case 0:b=ws(" ",e[0][v][1][1]);break;case 1:b=ws("\r",e[0][v][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}u=u+b,v=-1}o.push(u+U4e[S[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=ry(S[1][1],i,a),o.push(ny(d,s));break;case"PtgRefN":d=r?ry(S[1][1],r,a):S[1][1],o.push(ny(d,s));break;case"PtgRef3d":f=S[1][1],d=ry(S[1][2],i,a),g=LQ(n,f,a),o.push(g+"!"+ny(d,s));break;case"PtgFunc":case"PtgFuncVar":var k=S[1][0],B=S[1][1];k||(k=0),k&=127;var F=k==0?[]:o.slice(-k);o.length-=k,B==="User"&&(B=F.shift()),o.push(B+"("+F.join(",")+")");break;case"PtgBool":o.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(S[1]);break;case"PtgNum":o.push(String(S[1]));break;case"PtgStr":o.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(S[1]);break;case"PtgAreaN":p=fQ(S[1][1],r?{s:r}:i,a),o.push(DB(p,a));break;case"PtgArea":p=fQ(S[1][1],i,a),o.push(DB(p,a));break;case"PtgArea3d":f=S[1][1],p=S[1][2],g=LQ(n,f,a),o.push(g+"!"+DB(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=S[1][2];var w=(n.names||[])[h-1]||(n[0]||[])[h],C=w?w.Name:"SH33TJSNAME"+String(h);C&&C.slice(0,6)=="_xlfn."&&!a.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var N=S[1][1];h=S[1][2];var R;if(a.biff<=5)N<0&&(N=-N),n[N]&&(R=n[N][h]);else{var O="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][h]&&n[N][h].itab>0&&(O=n.SheetNames[n[N][h].itab-1]+"!"):O=n.SheetNames[h-1]+"!"),n[N]&&n[N][h])O+=n[N][h].Name;else if(n[0]&&n[0][h])O+=n[0][h].Name;else{var j=(Vee(n,N,a)||"").split(";;");j[h-1]?O=j[h-1]:O+="SH33TJSERRX"}o.push(O);break}R||(R={Name:"SH33TJSERRY"}),o.push(R.Name);break;case"PtgParen":var U="(",P=")";if(v>=0){switch(b="",e[0][v][1][0]){case 2:U=ws(" ",e[0][v][1][1])+U;break;case 3:U=ws("\r",e[0][v][1][1])+U;break;case 4:P=ws(" ",e[0][v][1][1])+P;break;case 5:P=ws("\r",e[0][v][1][1])+P;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}o.push(U+o.pop()+P);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:S[1][1],r:S[1][0]};var X={c:r.c,r:r.r};if(n.sharedf[Ur(d)]){var K=n.sharedf[Ur(d)];o.push(Ho(K,i,X,n,a))}else{var Z=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Ho(u[1],i,X,n,a)),Z=!0;break}Z||o.push(S[1])}break;case"PtgArray":o.push("{"+M4e(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&v>=0&&H.indexOf(e[0][y][0])==-1){S=e[0][v];var V=!0;switch(S[1][0]){case 4:V=!1;case 0:b=ws(" ",S[1][1]);break;case 5:V=!1;case 1:b=ws("\r",S[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}o.push((V?b:"")+o.pop()+(V?"":b)),v=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function H4e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],Zo(e,t-2)];var o=Uw(e,i,r);return t!==i+a&&(s=Mw(e,t-i-a,o,r)),e.l=n,[o,s]}function V4e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],Zo(e,t-2)];var o=Uw(e,i,r);return t!==i+a&&(s=Mw(e,t-i-a,o,r)),e.l=n,[o,s]}function z4e(e,t,r,n){var a=e.l+t,s=Uw(e,n,r),i;return a!==e.l&&(i=Mw(e,a-e.l,s,r)),[s,i]}function $4e(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=Uw(e,s,r);return s==65535?[[],Zo(e,t-2)]:(t!==s+2&&(a=Mw(e,n-s-2,i,r)),[i,a])}function K4e(e){var t;if(Of(e,e.l+6)!==65535)return[Xo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function G4e(e){if(e==null){var t=yt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Pp(e);return Pp(0)}function UB(e,t,r){var n=e.l+t,a=zA(e);r.biff==2&&++e.l;var s=K4e(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=V4e(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function q4e(e,t,r,n,a){var s=Mp(t,r,a),i=G4e(e.v),o=yt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=yt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Gi([s,i,o,u]);return f}function yN(e,t,r){var n=e.read_shift(4),a=Uw(e,n,r),s=e.read_shift(4),i=s>0?Mw(e,s,a,r):null;return[a,i]}var W4e=yN,wN=yN,X4e=yN,Y4e=yN,J4e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},zee={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Z4e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function MQ(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function eke(e){var t="of:="+e.replace(RD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function QB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function tke(e){return e.replace(/\./,"!")}var sy={},Kv={},iy=typeof Map<"u";function MD(e,t,r){var n=0,a=e.length;if(r){if(iy?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=iy?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(iy?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function EN(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&($o=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Qy(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=lS(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function xp(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Am(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Uf(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function $ee(e,t,r,n,a,s){try{n.cellNF&&(e.z=Dr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ha(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Dr[t]==null&&Uf(J2e[t]||"General",t),e.t==="e")e.w=e.w||fh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Oy(e.v);else if(e.t==="d"){var i=ki(e.v);(i|0)===i?e.w=i.toString(10):e.w=Oy(i)}else{if(e.v===void 0)return"";e.w=Dp(e.v,Kv)}else e.t==="d"?e.w=ju(t,ki(e.v),Kv):e.w=ju(t,e.v,Kv)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=oS(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=oS(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function rke(e,t,r){if(e&&e["!ref"]){var n=Qn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function nke(e,t){var r=Qn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=rn(r))}var ake=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,ske=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,ike=/<(?:\w:)?hyperlink [^>]*>/mg,oke=/"(\w*:\w*)"/,lke=/<(?:\w:)?col\b[^>]*[\/]?>/g,cke=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,uke=/<(?:\w:)?pageMargins[^>]*\/>/g,Kee=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,dke=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Ake=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function fke(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(ske);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Kee);h?UD(h[0],o,a,r):(h=u.match(dke))&&mke(h[0],h[1]||"",o,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=u.slice(p,p+50).match(oke);g&&nke(o,g[1])}var v=u.match(Ake);v&&v[1]&&kke(v[1],a);var b=[];if(t.cellStyles){var y=u.match(lke);y&&Eke(b,y)}f&&Ike(f[1],o,t,l,s,i);var _=d.match(cke);_&&(o["!autofilter"]=_ke(_[0]));var S=[],k=d.match(ake);if(k)for(p=0;p!=k.length;++p)S[p]=Qn(k[p].slice(k[p].indexOf('"')+1));var B=d.match(ike);B&&bke(o,B,n);var F=d.match(uke);if(F&&(o["!margins"]=yke($r(F[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=rn(l)),t.sheetRows>0&&o["!ref"]){var w=Qn(o["!ref"]);t.sheetRows<=+w.e.r&&(w.e.r=t.sheetRows-1,w.e.r>l.e.r&&(w.e.r=l.e.r),w.e.r<w.s.r&&(w.s.r=w.e.r),w.e.c>l.e.c&&(w.e.c=l.e.c),w.e.c<w.s.c&&(w.s.c=w.e.c),o["!fullref"]=o["!ref"],o["!ref"]=rn(w))}return b.length>0&&(o["!cols"]=b),S.length>0&&(o["!merges"]=S),o}function hke(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+rn(e[r])+'"/>';return t+"</mergeCells>"}function UD(e,t,r,n){var a=$r(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Un(_a(a.codeName)))}function mke(e,t,r,n,a){UD(e.slice(0,e.indexOf(">")),r,n,a)}function pke(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,i.codeName=EA(ga(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Gt("outlinePr",null,u)}!s&&!o||(a[a.length]=Gt("sheetPr",o,i))}var gke=["objects","scenarios","selectLockedCells","selectUnlockedCells"],vke=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function xke(e){var t={sheet:1};return gke.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),vke.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=FD(e.password).toString(16).toUpperCase()),Gt("sheetProtection",null,t)}function bke(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=$r(_a(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Un(s.location))):(s.Target="#"+Un(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Qn(s.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Ur({c:u,r:l});n?(e[l]||(e[l]=[]),e[l][u]||(e[l][u]={t:"z",v:void 0}),e[l][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function yke(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function wke(e){return xp(e),Gt("pageMargins",null,e)}function Eke(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=$r(t[n],!0);a.hidden&&(a.hidden=Ua(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,OD(a.width)),em(a);s<=i;)e[s++]=Va(a)}}function Cke(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Gt("col",null,EN(a,n)));return r[r.length]="</cols>",r.join("")}function _ke(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Ske(e,t,r,n){var a=typeof e.ref=="string"?e.ref:rn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Xl(a);i.s.r==i.e.r&&(i.e.r=Xl(t["!ref"]).e.r,a=rn(i));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Gt("autoFilter",null,{ref:a})}var Nke=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function kke(e,t){t.Views||(t.Views=[{}]),(e.match(Nke)||[]).forEach(function(r,n){var a=$r(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ua(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function Bke(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Gt("sheetViews",Gt("sheetView",null,a),{})}function Tke(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=fh[e.v];break;case"d":n&&n.cellDates?a=Ha(e.v,-1).toISOString():(e=Va(e),e.t="n",a=""+(e.v=ki(Ha(e.v)))),typeof e.z>"u"&&(e.z=Dr[14]);break;default:a=e.v;break}var o=po("v",ga(a)),l={r:t},u=Am(n.cellXfs,e,n);switch(u!==0&&(l.s=u),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=po("v",""+MD(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Gt("f",ga(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Gt("c",o,l)}var Ike=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=Dy("v"),i=Dy("f");return function(l,u,d,f,h,p){for(var g=0,v="",b=[],y=[],_=0,S=0,k=0,B="",F,w,C=0,N=0,R,O,j=0,U=0,P=Array.isArray(p.CellXf),X,K=[],Z=[],H=Array.isArray(u),V=[],q={},ne=!1,L=!!d.sheetStubs,W=l.split(t),J=0,te=W.length;J!=te;++J){v=W[J].trim();var ie=v.length;if(ie!==0){var Ae=0;e:for(g=0;g<ie;++g)switch(v[g]){case">":if(v[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(w=$r(v.slice(Ae,g),!0),C=w.r!=null?parseInt(w.r,10):C+1,N=-1,d.sheetRows&&d.sheetRows<C)continue;q={},ne=!1,w.ht&&(ne=!0,q.hpt=parseFloat(w.ht),q.hpx=Ax(q.hpt)),w.hidden=="1"&&(ne=!0,q.hidden=!0),w.outlineLevel!=null&&(ne=!0,q.level=+w.outlineLevel),ne&&(V[C-1]=q)}break;case"<":Ae=g;break}if(Ae>=g)break;if(w=$r(v.slice(Ae,g),!0),C=w.r!=null?parseInt(w.r,10):C+1,N=-1,!(d.sheetRows&&d.sheetRows<C)){f.s.r>C-1&&(f.s.r=C-1),f.e.r<C-1&&(f.e.r=C-1),d&&d.cellStyles&&(q={},ne=!1,w.ht&&(ne=!0,q.hpt=parseFloat(w.ht),q.hpx=Ax(q.hpt)),w.hidden=="1"&&(ne=!0,q.hidden=!0),w.outlineLevel!=null&&(ne=!0,q.level=+w.outlineLevel),ne&&(V[C-1]=q)),b=v.slice(g).split(e);for(var oe=0;oe!=b.length&&b[oe].trim().charAt(0)=="<";++oe);for(b=b.slice(oe),g=0;g!=b.length;++g)if(v=b[g].trim(),v.length!==0){if(y=v.match(r),_=g,S=0,k=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,y!=null&&y.length===2){for(_=0,B=y[1],S=0;S!=B.length&&!((k=B.charCodeAt(S)-64)<1||k>26);++S)_=26*_+k;--_,N=_}else++N;for(S=0;S!=v.length&&v.charCodeAt(S)!==62;++S);if(++S,w=$r(v.slice(0,S),!0),w.r||(w.r=Ur({r:C-1,c:N})),B=v.slice(S),F={t:""},(y=B.match(s))!=null&&y[1]!==""&&(F.v=Un(y[1])),d.cellFormula){if((y=B.match(i))!=null&&y[1]!==""){if(F.f=Un(_a(y[1])).replace(/\r\n/g,`
`),d.xlfn||(F.f=DQ(F.f)),y[0].indexOf('t="array"')>-1)F.F=(B.match(a)||[])[1],F.F.indexOf(":")>-1&&K.push([Qn(F.F),F.F]);else if(y[0].indexOf('t="shared"')>-1){O=$r(y[0]);var ce=Un(_a(y[1]));d.xlfn||(ce=DQ(ce)),Z[parseInt(O.si,10)]=[O,ce,w.r]}}else(y=B.match(/<f[^>]*\/>/))&&(O=$r(y[0]),Z[O.si]&&(F.f=NNe(Z[O.si][1],Z[O.si][2],w.r)));var ge=ss(w.r);for(S=0;S<K.length;++S)ge.r>=K[S][0].s.r&&ge.r<=K[S][0].e.r&&ge.c>=K[S][0].s.c&&ge.c<=K[S][0].e.c&&(F.F=K[S][1])}if(w.t==null&&F.v===void 0)if(F.f||F.F)F.v=0,F.t="n";else if(L)F.t="z";else continue;else F.t=w.t||"n";switch(f.s.c>N&&(f.s.c=N),f.e.c<N&&(f.e.c=N),F.t){case"n":if(F.v==""||F.v==null){if(!L)continue;F.t="z"}else F.v=parseFloat(F.v);break;case"s":if(typeof F.v>"u"){if(!L)continue;F.t="z"}else R=sy[parseInt(F.v,10)],F.v=R.t,F.r=R.r,d.cellHTML&&(F.h=R.h);break;case"str":F.t="s",F.v=F.v!=null?_a(F.v):"",d.cellHTML&&(F.h=vD(F.v));break;case"inlineStr":y=B.match(n),F.t="s",y!=null&&(R=jD(y[1]))?(F.v=R.t,d.cellHTML&&(F.h=R.h)):F.v="";break;case"b":F.v=Ua(F.v);break;case"d":d.cellDates?F.v=Ha(F.v,1):(F.v=ki(Ha(F.v,1)),F.t="n");break;case"e":(!d||d.cellText!==!1)&&(F.w=F.v),F.v=qZ[F.v];break}if(j=U=0,X=null,P&&w.s!==void 0&&(X=p.CellXf[w.s],X!=null&&(X.numFmtId!=null&&(j=X.numFmtId),d.cellStyles&&X.fillId!=null&&(U=X.fillId))),$ee(F,j,U,d,h,p),d.cellDates&&P&&F.t=="n"&&Qx(Dr[j])&&(F.t="d",F.v=xN(F.v)),w.cm&&d.xlmeta){var je=(d.xlmeta.Cell||[])[+w.cm-1];je&&je.type=="XLDAPR"&&(F.D=!0)}if(H){var re=ss(w.r);u[re.r]||(u[re.r]=[]),u[re.r][re.c]=F}else u[w.r]=F}}}}V.length>0&&(u["!rows"]=V)}}();function jke(e,t,r,n){var a=[],s=[],i=Qn(e["!ref"]),o="",l,u="",d=[],f=0,h=0,p=e["!rows"],g=Array.isArray(e),v={r:u},b,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=as(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=Ws(f),h=i.s.c;h<=i.e.c;++h){l=d[h]+u;var _=g?(e[f]||[])[h]:e[l];_!==void 0&&(o=Tke(_,l,e,t))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(v={r:u},p&&p[f]&&(b=p[f],b.hidden&&(v.hidden=1),y=-1,b.hpx?y=Hy(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(v.ht=y,v.customHeight=1),b.level&&(v.outlineLevel=b.level)),a[a.length]=Gt("row",s.join(""),v))}if(p)for(;f<p.length;++f)p&&p[f]&&(v={r:f+1},b=p[f],b.hidden&&(v.hidden=1),y=-1,b.hpx?y=Hy(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(v.ht=y,v.customHeight=1),b.level&&(v.outlineLevel=b.level),a[a.length]=Gt("row","",v));return a.join("")}function Gee(e,t,r,n){var a=[Js,Gt("worksheet",null,{xmlns:Zp[0],"xmlns:r":Si.r})],s=r.SheetNames[e],i=0,o="",l=r.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",d=Qn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=rn(d)}n||(n={}),l["!comments"]=[];var f=[];pke(l,r,e,t,a),a[a.length]=Gt("dimension",null,{ref:u}),a[a.length]=Bke(l,t,e,r),t.sheetFormat&&(a[a.length]=Gt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=Cke(l,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=jke(l,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=xke(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=Ske(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=hke(l["!merges"]));var h=-1,p,g=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(g=ha(n,-1,ga(v[1].Target).replace(/#.*$/,""),wn.HLINK),p["r:id"]="rId"+g),(h=v[1].Target.indexOf("#"))>-1&&(p.location=ga(v[1].Target.slice(h+1))),v[1].Tooltip&&(p.tooltip=ga(v[1].Tooltip)),a[a.length]=Gt("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=wke(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=po("ignoredErrors",Gt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=ha(n,-1,"../drawings/drawing"+(e+1)+".xml",wn.DRAW),a[a.length]=Gt("drawing",null,{"r:id":"rId"+g}),l["!drawing"]=f),l["!comments"].length>0&&(g=ha(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",wn.VML),a[a.length]=Gt("legacyDrawing",null,{"r:id":"rId"+g}),l["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Fke(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function Oke(e,t,r){var n=yt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=Hy(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Ur(u)];g&&(f<0&&(f=p),h=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var v=n.l;return n.l=l,n.write_shift(4,o),n.l=v,n.length>n.l?n.slice(0,n.l):n}function Dke(e,t,r,n){var a=Oke(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var Rke=ng,Pke=zx;function Lke(){}function Mke(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=HEe(e),r}function Uke(e,t,r){r==null&&(r=yt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return aS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),VZ(e,r),r.slice(0,r.l)}function Qke(e){var t=Du(e);return[t]}function Hke(e,t,r){return r==null&&(r=yt(8)),eg(t,r)}function Vke(e){var t=tg(e);return[t]}function zke(e,t,r){return r==null&&(r=yt(4)),rg(t,r)}function $ke(e){var t=Du(e),r=e.read_shift(1);return[t,r,"b"]}function Kke(e,t,r){return r==null&&(r=yt(9)),eg(t,r),r.write_shift(1,e.v?1:0),r}function Gke(e){var t=tg(e),r=e.read_shift(1);return[t,r,"b"]}function qke(e,t,r){return r==null&&(r=yt(5)),rg(t,r),r.write_shift(1,e.v?1:0),r}function Wke(e){var t=Du(e),r=e.read_shift(1);return[t,r,"e"]}function Xke(e,t,r){return r==null&&(r=yt(9)),eg(t,r),r.write_shift(1,e.v),r}function Yke(e){var t=tg(e),r=e.read_shift(1);return[t,r,"e"]}function Jke(e,t,r){return r==null&&(r=yt(8)),rg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Zke(e){var t=Du(e),r=e.read_shift(4);return[t,r,"s"]}function eBe(e,t,r){return r==null&&(r=yt(12)),eg(t,r),r.write_shift(4,t.v),r}function tBe(e){var t=tg(e),r=e.read_shift(4);return[t,r,"s"]}function rBe(e,t,r){return r==null&&(r=yt(8)),rg(t,r),r.write_shift(4,t.v),r}function nBe(e){var t=Du(e),r=Xo(e);return[t,r,"n"]}function aBe(e,t,r){return r==null&&(r=yt(16)),eg(t,r),Pp(e.v,r),r}function qee(e){var t=tg(e),r=Xo(e);return[t,r,"n"]}function sBe(e,t,r){return r==null&&(r=yt(12)),rg(t,r),Pp(e.v,r),r}function iBe(e){var t=Du(e),r=ND(e);return[t,r,"n"]}function oBe(e,t,r){return r==null&&(r=yt(12)),eg(t,r),zZ(e.v,r),r}function lBe(e){var t=tg(e),r=ND(e);return[t,r,"n"]}function cBe(e,t,r){return r==null&&(r=yt(8)),rg(t,r),zZ(e.v,r),r}function uBe(e){var t=Du(e),r=CD(e);return[t,r,"is"]}function dBe(e){var t=Du(e),r=Yo(e);return[t,r,"str"]}function ABe(e,t,r){return r==null&&(r=yt(12+4*e.v.length)),eg(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function fBe(e){var t=tg(e),r=Yo(e);return[t,r,"str"]}function hBe(e,t,r){return r==null&&(r=yt(8+4*e.v.length)),rg(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function mBe(e,t,r){var n=e.l+t,a=Du(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=wN(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function pBe(e,t,r){var n=e.l+t,a=Du(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=wN(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function gBe(e,t,r){var n=e.l+t,a=Du(e);a.r=r["!row"];var s=Xo(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=wN(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function vBe(e,t,r){var n=e.l+t,a=Du(e);a.r=r["!row"];var s=Yo(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=wN(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}var xBe=ng,bBe=zx;function yBe(e,t){return t==null&&(t=yt(4)),t.write_shift(4,e),t}function wBe(e,t){var r=e.l+t,n=ng(e),a=_D(e),s=Yo(e),i=Yo(e),o=Yo(e);e.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}function EBe(e,t){var r=yt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));zx({s:ss(e[0]),e:ss(e[0])},r),SD("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Wi(a||"",r),Wi(e[1].Tooltip||"",r),Wi("",r),r.slice(0,r.l)}function CBe(){}function _Be(e,t,r){var n=e.l+t,a=$Z(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=W4e(e,n-e.l,r);i[1]=o}else e.l=n;return i}function SBe(e,t,r){var n=e.l+t,a=ng(e),s=[a];if(r.cellFormula){var i=Y4e(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function NBe(e,t,r){r==null&&(r=yt(18));var n=EN(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var Wee=["left","right","top","bottom","header","footer"];function kBe(e){var t={};return Wee.forEach(function(r){t[r]=Xo(e)}),t}function BBe(e,t){return t==null&&(t=yt(48)),xp(e),Wee.forEach(function(r){Pp(e[r],t)}),t}function TBe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function IBe(e,t,r){r==null&&(r=yt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function jBe(e){var t=yt(24);return t.write_shift(4,4),t.write_shift(4,1),zx(e,t),t}function FBe(e,t){return t==null&&(t=yt(66)),t.write_shift(2,e.password?FD(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function OBe(){}function DBe(){}function RBe(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,v,b,y,_,S,k,B,F=[];o.biff=12,o["!row"]=0;var w=0,C=!1,N=[],R={},O=o.supbooks||a.supbooks||[[]];if(O.sharedf=R,O.arrayf=N,O.SheetNames=a.SheetNames||a.Sheets.map(function(H){return H.name}),!o.supbooks&&(o.supbooks=O,a.Names))for(var j=0;j<a.Names.length;++j)O[0][j+1]=a.Names[j];var U=[],P=[],X=!1;Vy[16]={n:"BrtShortReal",f:qee};var K;if(Ah(e,function(V,q,ne){if(!h)switch(ne){case 148:u=V;break;case 0:p=V,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),k=Ws(b=p.r),o["!row"]=p.r,(V.hidden||V.hpt||V.level!=null)&&(V.hpt&&(V.hpx=Ax(V.hpt)),P[V.r]=V);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:V[2]},V[2]){case"n":g.v=V[1];break;case"s":S=sy[V[1]],g.v=S.t,g.r=S.r;break;case"b":g.v=!!V[1];break;case"e":g.v=V[1],o.cellText!==!1&&(g.w=fh[g.v]);break;case"str":g.t="s",g.v=V[1];break;case"is":g.t="s",g.v=V[1].t;break}if((v=i.CellXf[V[0].iStyleRef])&&$ee(g,v.numFmtId,null,o,s,i),y=V[0].c==-1?y+1:V[0].c,o.dense?(l[b]||(l[b]=[]),l[b][y]=g):l[as(y)+k]=g,o.cellFormula){for(C=!1,w=0;w<N.length;++w){var L=N[w];p.r>=L[0].s.r&&p.r<=L[0].e.r&&y>=L[0].s.c&&y<=L[0].e.c&&(g.F=rn(L[0]),C=!0)}!C&&V.length>3&&(g.f=V[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),o.cellDates&&v&&g.t=="n"&&Qx(Dr[v.numFmtId])){var W=rp(g.v);W&&(g.t="d",g.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}K&&(K.type=="XLDAPR"&&(g.D=!0),K=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=V[0].c==-1?y+1:V[0].c,o.dense?(l[b]||(l[b]=[]),l[b][y]=g):l[as(y)+k]=g,d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),K&&(K.type=="XLDAPR"&&(g.D=!0),K=void 0);break;case 176:F.push(V);break;case 49:K=((o.xlmeta||{}).Cell||[])[V-1];break;case 494:var J=n["!id"][V.relId];for(J?(V.Target=J.Target,V.loc&&(V.Target+="#"+V.loc),V.Rel=J):V.relId==""&&(V.Target="#"+V.loc),b=V.rfx.s.r;b<=V.rfx.e.r;++b)for(y=V.rfx.s.c;y<=V.rfx.e.c;++y)o.dense?(l[b]||(l[b]=[]),l[b][y]||(l[b][y]={t:"z",v:void 0}),l[b][y].l=V):(_=Ur({c:y,r:b}),l[_]||(l[_]={t:"z",v:void 0}),l[_].l=V);break;case 426:if(!o.cellFormula)break;N.push(V),B=o.dense?l[b][y]:l[as(y)+k],B.f=Ho(V[1],d,{r:p.r,c:y},O,o),B.F=rn(V[0]);break;case 427:if(!o.cellFormula)break;R[Ur(V[0].s)]=V[1],B=o.dense?l[b][y]:l[as(y)+k],B.f=Ho(V[1],d,{r:p.r,c:y},O,o);break;case 60:if(!o.cellStyles)break;for(;V.e>=V.s;)U[V.e--]={width:V.w/256,hidden:!!(V.flags&1),level:V.level},X||(X=!0,OD(V.w/256)),em(U[V.e+1]);break;case 161:l["!autofilter"]={ref:rn(V)};break;case 476:l["!margins"]=V;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),V.name&&(a.Sheets[r].CodeName=V.name),(V.above||V.left)&&(l["!outline"]={above:V.above,left:V.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),V.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!q.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+ne.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=rn(u||d)),o.sheetRows&&l["!ref"]){var Z=Qn(l["!ref"]);o.sheetRows<=+Z.e.r&&(Z.e.r=o.sheetRows-1,Z.e.r>d.e.r&&(Z.e.r=d.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>d.e.c&&(Z.e.c=d.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),l["!fullref"]=l["!ref"],l["!ref"]=rn(Z))}return F.length>0&&(l["!merges"]=F),U.length>0&&(l["!cols"]=U),P.length>0&&(l["!rows"]=P),l}function PBe(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Va(t),t.z=t.z||Dr[14],t.v=ki(Ha(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=Am(a.cellXfs,t,a),t.l&&s["!links"].push([Ur(l),t.l]),t.c&&s["!comments"].push([Ur(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=MD(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,i?Rt(e,18,rBe(t,l)):Rt(e,7,eBe(t,l))):(l.t="str",i?Rt(e,17,hBe(t,l)):Rt(e,6,ABe(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Rt(e,13,cBe(t,l)):Rt(e,2,oBe(t,l)):i?Rt(e,16,sBe(t,l)):Rt(e,5,aBe(t,l)),!0;case"b":return l.t="b",i?Rt(e,15,qke(t,l)):Rt(e,4,Kke(t,l)),!0;case"e":return l.t="e",i?Rt(e,14,Jke(t,l)):Rt(e,3,Xke(t,l)),!0}return i?Rt(e,12,zke(t,l)):Rt(e,1,Hke(t,l)),!0}function LBe(e,t,r,n){var a=Qn(t["!ref"]||"A1"),s,i="",o=[];Rt(e,145);var l=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=Ws(d),Dke(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=as(h)),s=o[h]+i;var p=l?(t[d]||[])[h]:t[s];if(!p){f=!1;continue}f=PBe(e,p,d,h,n,t,f)}}Rt(e,146)}function MBe(e,t){!t||!t["!merges"]||(Rt(e,177,yBe(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,bBe(r))}),Rt(e,178))}function UBe(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,NBe(n,r))}),Rt(e,391))}function QBe(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,jBe(Qn(t["!ref"]))),Rt(e,650))}function HBe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ha(r,-1,n[1].Target.replace(/#.*$/,""),wn.HLINK);Rt(e,494,EBe(n,a))}}),delete t["!links"]}function VBe(e,t,r,n){if(t["!comments"].length>0){var a=ha(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",wn.VML);Rt(e,551,SD("rId"+a)),t["!legacy"]=a}}function zBe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:rn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Xl(s);o.s.r==o.e.r&&(o.e.r=Xl(t["!ref"]).e.r,s=rn(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,zx(Qn(s))),Rt(e,162)}}function $Be(e,t,r){Rt(e,133),Rt(e,137,IBe(t,r)),Rt(e,138),Rt(e,134)}function KBe(e,t){t["!protect"]&&Rt(e,535,FBe(t["!protect"]))}function GBe(e,t,r,n){var a=ql(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=Qn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Rt(a,129),(r.vbaraw||i["!outline"])&&Rt(a,147,Uke(o,i["!outline"])),Rt(a,148,Pke(l)),$Be(a,i,r.Workbook),UBe(a,i),LBe(a,i,e,t),KBe(a,i),zBe(a,i,r,e),MBe(a,i),HBe(a,i,n),i["!margins"]&&Rt(a,476,BBe(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&QBe(a,i),VBe(a,i,e,n),Rt(a,130),a.end()}function qBe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Un((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function WBe(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=qBe(f);d.s.r=d.s.c=0,d.e.c=o,u=as(o),h[0].forEach(function(p,g){i[u+Ws(g)]={t:"n",v:p,z:h[1]},l=g}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=rn(d)),i}function XBe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(Kee);return o&&UD(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function YBe(e,t){e.l+=10;var r=Yo(e);return{name:r}}function JBe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Ah(e,function(l,u,d){switch(d){case 550:s["!rel"]=l;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),l.name&&(a.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var QD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],ZBe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],eTe=[],tTe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function UQ(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ua(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function QQ(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ua(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function Xee(e){QQ(e.WBProps,QD),QQ(e.CalcPr,tTe),UQ(e.WBView,ZBe),UQ(e.Sheets,eTe),Kv.date1904=Ua(e.WBProps.date1904)}function rTe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ua(e.Workbook.WBProps.date1904)?"true":"false"}var nTe="][*?/\\".split("");function Yee(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return nTe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function aTe(e,t,r){e.forEach(function(n,a){Yee(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function sTe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];aTe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)rke(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var iTe=/<\w+:workbook/;function oTe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(tl,function(l,u){var d=$r(l);switch(VA(d[0])){case"<?xml":break;case"<workbook":l.match(iTe)&&(a="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":QD.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ua(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=_a(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Un(_a(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=_a(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ua(d.hidden||"0")&&(s.Hidden=!0),i=u+l.length;break;case"</definedName>":s.Ref=Un(_a(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Zp.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Xee(r),r}function Jee(e){var t=[Js];t[t.length]=Gt("workbook",null,{xmlns:Zp[0],"xmlns:r":Si.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(QD.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Gt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:ga(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Gt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=Gt("definedName",ga(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function lTe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=jj(e),r.name=Yo(e),r}function cTe(e,t){return t||(t=yt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),SD(e.strRelID,t),Wi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function uTe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Yo(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function dTe(e,t){t||(t=yt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),VZ(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function ATe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function fTe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=VEe(e),i=X4e(e,0,r),o=_D(e);e.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}function hTe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],Vy[16]={n:"BrtFRTArchID$",f:ATe},Ah(e,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=Ho(l.Ptg,null,null,i,t),delete t.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Xee(r),r.Names=s,r.supbooks=i,r}function mTe(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,cTe(a))}Rt(e,144)}function pTe(e,t){t||(t=yt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Wi("SheetJS",t),Wi(Y_.version,t),Wi(Y_.version,t),Wi("7262",t),t.length>t.l?t.slice(0,t.l):t}function gTe(e,t){t||(t=yt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function vTe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,gTe(a)),Rt(e,136))}}function xTe(e,t){var r=ql();return Rt(r,131),Rt(r,128,pTe()),Rt(r,153,dTe(e.Workbook&&e.Workbook.WBProps||null)),vTe(r,e),mTe(r,e),Rt(r,132),r.end()}function bTe(e,t,r){return t.slice(-4)===".bin"?hTe(e,r):oTe(e,r)}function yTe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?RBe(e,n,r,a,s,i,o):fke(e,n,r,a,s,i,o)}function wTe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?JBe(e,n,r,a,s):XBe(e,n,r,a,s)}function ETe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?_Ne():SNe()}function CTe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?ENe():CNe()}function _Te(e,t,r,n){return t.slice(-4)===".bin"?b5e(e,r,n):l5e(e,r,n)}function STe(e,t,r){return jee(e,r)}function NTe(e,t,r){return t.slice(-4)===".bin"?NSe(e,r):CSe(e,r)}function kTe(e,t,r){return t.slice(-4)===".bin"?vNe(e,r):cNe(e,r)}function BTe(e,t,r){return t.slice(-4)===".bin"?iNe(e):aNe(e)}function TTe(e,t,r,n){return r.slice(-4)===".bin"?oNe(e,t,r,n):void 0}function ITe(e,t,r){return t.slice(-4)===".bin"?tNe(e,t,r):nNe(e,t,r)}function jTe(e,t,r){return(t.slice(-4)===".bin"?xTe:Jee)(e)}function FTe(e,t,r,n,a){return(t.slice(-4)===".bin"?GBe:Gee)(e,r,n,a)}function OTe(e,t,r){return(t.slice(-4)===".bin"?T5e:Tee)(e,r)}function DTe(e,t,r){return(t.slice(-4)===".bin"?TSe:wee)(e,r)}function RTe(e,t,r){return(t.slice(-4)===".bin"?xNe:Dee)(e)}function PTe(e){return(e.slice(-4)===".bin"?rNe:Fee)()}var Zee=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,ete=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function cd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(Zee),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(ete),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function LTe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Zee),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(ete),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var oy;function MTe(e,t){var r=oy[e]||Un(e);return r==="General"?Dp(t):ju(r,t)}function UTe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ua(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ha(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Un(t)]=a}function QTe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||fh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Oy(e.v):e.w=Dp(e.v):e.w=MTe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=oy[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Qx(n)){var a=rp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function HTe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=e5e[n.Pattern]||n.Pattern)}e[t.ID]=t}function VTe(e,t,r,n,a,s,i,o,l,u){var d="General",f=n.StyleID,h={};u=u||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ua(e);break;case"String":n.t="s",n.r=aQ(Un(e)),n.v=e.indexOf("<")>-1?Un(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ha(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Un(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=qZ[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=aQ(t||e));break}if(QTe(n,d,u),u.cellFormula!==!1)if(n.Formula){var v=Un(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=$v(v,a),delete n.Formula,n.ArrayRange=="RC"?n.F=$v("RC:RC",a):n.ArrayRange&&(n.F=$v(n.ArrayRange,a),l.push([Qn(n.F),n.F]))}else for(g=0;g<l.length;++g)a.r>=l[g][0].s.r&&a.r<=l[g][0].e.r&&a.c>=l[g][0].s.c&&a.c<=l[g][0].e.c&&(n.F=l[g][1]);u.cellStyles&&(p.forEach(function(b){!h.patternType&&b.patternType&&(h.patternType=b.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function zTe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function HB(e,t){var r=t||{};Hx();var n=Tb(xD(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=_a(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Va(r);return i.type="string",dx.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(He){a.indexOf("<"+He)>=0&&(s=!0)}),s)return B3e(n,r);oy={"General Number":"General","General Date":Dr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Dr[15],"Short Date":Dr[14],"Long Time":Dr[19],"Medium Time":Dr[18],"Short Time":Dr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Dr[2],Standard:Dr[4],Percent:Dr[10],Scientific:Dr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},f=[],h=r.dense?[]:{},p="",g={},v={},b=cd('<Data ss:Type="String">'),y=0,_=0,S=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},B={},F={},w="",C=0,N=[],R={},O={},j=0,U=[],P=[],X={},K=[],Z,H=!1,V=[],q=[],ne={},L=0,W=0,J={Sheets:[],WBProps:{date1904:!1}},te={};Py.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=Py.exec(n);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?VTe(n.slice(y,o.index),w,b,l[l.length-1][0]=="comment"?X:g,{c:_,r:S},B,K[_],v,V,r):(w="",b=cd(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(P.length>0&&(g.c=P),(!r.sheetRows||r.sheetRows>S)&&g.v!==void 0&&(r.dense?(h[S]||(h[S]=[]),h[S][_]=g):h[as(_)+Ws(S)]=g),g.HRef&&(g.l={Target:Un(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(L=_+(parseInt(g.MergeAcross,10)|0),W=S+(parseInt(g.MergeDown,10)|0),N.push({s:{c:_,r:S},e:{c:L,r:W}})),!r.sheetStubs)g.MergeAcross?_=L+1:++_;else if(g.MergeAcross||g.MergeDown){for(var Ae=_;Ae<=L;++Ae)for(var oe=S;oe<=W;++oe)(Ae>_||oe>S)&&(r.dense?(h[oe]||(h[oe]=[]),h[oe][Ae]={t:"z"}):h[as(Ae)+Ws(oe)]={t:"z"});_=L+1}else++_;else g=LTe(o[0]),g.Index&&(_=+g.Index-1),_<k.s.c&&(k.s.c=_),_>k.e.c&&(k.e.c=_),o[0].slice(-2)==="/>"&&++_,P=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(S<k.s.r&&(k.s.r=S),S>k.e.r&&(k.e.r=S),o[0].slice(-2)==="/>"&&(v=cd(o[0]),v.Index&&(S=+v.Index-1)),_=0,++S):(v=cd(o[0]),v.Index&&(S=+v.Index-1),ne={},(v.AutoFitHeight=="0"||v.Height)&&(ne.hpx=parseInt(v.Height,10),ne.hpt=Hy(ne.hpx),q[S]=ne),v.Hidden=="1"&&(ne.hidden=!0,q[S]=ne));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(h["!ref"]=rn(k),r.sheetRows&&r.sheetRows<=k.e.r&&(h["!fullref"]=h["!ref"],k.e.r=r.sheetRows-1,h["!ref"]=rn(k))),N.length&&(h["!merges"]=N),K.length>0&&(h["!cols"]=K),q.length>0&&(h["!rows"]=q),d[p]=h}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},S=_=0,l.push([o[3],!1]),u=cd(o[0]),p=Un(u.Name),h=r.dense?[]:{},N=[],V=[],q=[],te={name:p,Hidden:0},J.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),K=[],H=!1}break;case"style":o[1]==="/"?HTe(B,F,r):F=cd(o[0]);break;case"numberformat":F.nf=Un(cd(o[0]).Format||"General"),oy[F.nf]&&(F.nf=oy[F.nf]);for(var ce=0;ce!=392&&Dr[ce]!=F.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Dr[ce]==null){Uf(F.nf,ce);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(Z=cd(o[0]),Z.Hidden&&(Z.hidden=!0,delete Z.Hidden),Z.Width&&(Z.wpx=parseInt(Z.Width,10)),!H&&Z.wpx>10){H=!0,$o=kee;for(var ge=0;ge<K.length;++ge)K[ge]&&em(K[ge])}H&&em(Z),K[Z.Index-1||K.length]=Z;for(var je=0;je<+Z.Span;++je)K[K.length]=Va(Z);break;case"namedrange":if(o[1]==="/")break;J.Names||(J.Names=[]);var re=$r(o[0]),Se={Name:re.Name,Ref:$v(re.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(Se.Sheet=J.Sheets.length-1),J.Names.push(Se);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?w+=n.slice(C,o.index):C=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;F.Interior=cd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?hCe(R,ie,n.slice(j,o.index)):j=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));zTe(X),P.push(X)}else l.push([o[3],!1]),u=cd(o[0]),X={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var De=cd(o[0]);h["!autofilter"]={ref:$v(De.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return KQ(n,r);var _e=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:_e=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:_e=!1}break;case"excelworkbook":switch(o[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:_e=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:_e=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(j,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else j=o.index+o[0].length;break;case"header":h["!margins"]||xp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].header=+$r(o[0]).Margin);break;case"footer":h["!margins"]||xp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].footer=+$r(o[0]).Margin);break;case"pagemargins":var he=$r(o[0]);h["!margins"]||xp(h["!margins"]={},"xlml"),isNaN(+he.Top)||(h["!margins"].top=+he.Top),isNaN(+he.Left)||(h["!margins"].left=+he.Left),isNaN(+he.Right)||(h["!margins"].right=+he.Right),isNaN(+he.Bottom)||(h["!margins"].bottom=+he.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:_e=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:_e=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:_e=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:_e=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:_e=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:_e=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:_e=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:_e=!1}break;case"smarttags":break;default:_e=!1;break}if(_e||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?UTe(O,ie,U,n.slice(j,o.index)):(U=o,j=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Ie={};return!r.bookSheets&&!r.bookProps&&(Ie.Sheets=d),Ie.SheetNames=f,Ie.Workbook=J,Ie.SSF=Va(Dr),Ie.Props=R,Ie.Custprops=O,Ie}function Mj(e,t){switch(VD(t=t||{}),t.type||"base64"){case"base64":return HB(Fc(e),t);case"binary":case"buffer":case"file":return HB(e,t);case"array":return HB(um(e),t)}}function $Te(e,t){var r=[];return e.Props&&r.push(mCe(e.Props,t)),e.Custprops&&r.push(pCe(e.Props,e.Custprops)),r.join("")}function KTe(){return""}function GTe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Gt("NumberFormat",null,{"ss:Format":ga(Dr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Gt("Style",s.join(""),i))}),Gt("Styles",r.join(""))}function tte(e){return Gt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+PD(e.Ref,{r:0,c:0})})}function qTe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(tte(a)))}return Gt("Names",r.join(""))}function WTe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(tte(o)))}return s.join("")}function XTe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Gt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Gt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Gt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Gt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(po("ProtectContents","True")),e["!protect"].objects&&a.push(po("ProtectObjects","True")),e["!protect"].scenarios&&a.push(po("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(po("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(po("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Gt("WorksheetOptions",a.join(""),{xmlns:wc.x})}function YTe(e){return e.map(function(t){var r=vEe(t.t||""),n=Gt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Gt("Comment",n,{"ss:Author":t.a})}).join("")}function JTe(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ga(PD(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=ss(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ga(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ga(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=fh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Dr[14]);break;case"s":f="String",h=gEe(e.v||"");break}var p=Am(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var g=e.v!=null?h:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(v+=YTe(e.c)),Gt("Cell",v,o)}function ZTe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Ax(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function e3e(e,t,r,n){if(!e["!ref"])return"";var a=Qn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,y){em(b);var _=!!b.width,S=EN(y,b),k={"ss:Index":y+1};_&&(k["ss:Width"]=Uy(S.width)),b.hidden&&(k["ss:Hidden"]="1"),o.push(Gt("Column",null,k))});for(var l=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[ZTe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},g=Ur(p),v=l?(e[u]||[])[f]:e[g];d.push(JTe(v,g,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function t3e(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?WTe(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?e3e(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(XTe(s,t,e,r)),n.join("")}function r3e(e,t){t||(t={}),e.SSF||(e.SSF=Va(Dr)),e.SSF&&(Hx(),pN(e.SSF),t.revssf=vN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Am(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push($Te(e,t)),r.push(KTe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Gt("Worksheet",t3e(n,t,e),{"ss:Name":ga(e.SheetNames[n])}));return r[2]=GTe(e,t),r[3]=qTe(e),Js+Gt("Workbook",r.join(""),{xmlns:wc.ss,"xmlns:o":wc.o,"xmlns:x":wc.x,"xmlns:ss":wc.ss,"xmlns:dt":wc.dt,"xmlns:html":wc.html})}function n3e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=qEe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=WEe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var a3e=[60,1084,2066,2165,2175];function s3e(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var l=Of(r,r.l),u=Uj[l],d=0;u!=null&&a3e.indexOf(l)>-1;)s=Of(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=Uj[l=Of(r,r.l)];var f=Gi(i);ho(f,0);var h=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(h),h+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function lA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Dr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||fh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Oy(e.v):e.w=Dp(e.v):e.w=ju(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&Qx(Dr[n]||String(n))){var a=rp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function OE(e,t,r){return{v:e,ixfe:t,t:r}}function i3e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,l=[],u="",d={},f,h="",p,g,v,b,y={},_=[],S,k,B=[],F=[],w={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},N=function(Qt){return Qt<8?pp[Qt]:Qt<64&&F[Qt-8]||pp[Qt]},R=function(Qt,bt,Nr){var tr=bt.XF.data;if(!(!tr||!tr.patternType||!Nr||!Nr.cellStyles)){bt.s={},bt.s.patternType=tr.patternType;var nn;(nn=My(N(tr.icvFore)))&&(bt.s.fgColor={rgb:nn}),(nn=My(N(tr.icvBack)))&&(bt.s.bgColor={rgb:nn})}},O=function(Qt,bt,Nr){if(!(ne>1)&&!(Nr.sheetRows&&Qt.r>=Nr.sheetRows)){if(Nr.cellStyles&&bt.XF&&bt.XF.data&&R(Qt,bt,Nr),delete bt.ixfe,delete bt.XF,f=Qt,h=Ur(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),Nr.cellFormula&&bt.f){for(var tr=0;tr<_.length;++tr)if(!(_[tr][0].s.c>Qt.c||_[tr][0].s.r>Qt.r)&&!(_[tr][0].e.c<Qt.c||_[tr][0].e.r<Qt.r)){bt.F=rn(_[tr][0]),(_[tr][0].s.c!=Qt.c||_[tr][0].s.r!=Qt.r)&&delete bt.f,bt.f&&(bt.f=""+Ho(_[tr][1],i,Qt,V,j));break}}Nr.dense?(a[Qt.r]||(a[Qt.r]=[]),a[Qt.r][Qt.c]=bt):a[h]=bt}},j={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:_,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(j.password=t.password);var U,P=[],X=[],K=[],Z=[],H=!1,V=[];V.SheetNames=j.snames,V.sharedf=j.sharedf,V.arrayf=j.arrayf,V.names=[],V.XTI=[];var q=0,ne=0,L=0,W=[],J=[],te;j.codepage=1200,gd(1200);for(var ie=!1;e.l<e.length-1;){var Ae=e.l,oe=e.read_shift(2);if(oe===0&&q===10)break;var ce=e.l===e.length?0:e.read_shift(2),ge=Uj[oe];if(ge&&ge.f){if(t.bookSheets&&q===133&&oe!==133)break;if(q=oe,ge.r===2||ge.r==12){var je=e.read_shift(2);if(ce-=2,!j.enc&&je!==oe&&((je&255)<<8|je>>8)!==oe)throw new Error("rt mismatch: "+je+"!="+oe);ge.r==12&&(e.l+=10,ce-=10)}var re={};if(oe===10?re=ge.f(e,ce,j):re=s3e(oe,ge,e,ce,j),ne==0&&[9,521,1033,2057].indexOf(q)===-1)continue;switch(oe){case 34:r.opts.Date1904=w.WBProps.date1904=re;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(j.enc||(e.l=0),j.enc=re,!t.password)throw new Error("File is password-protected");if(re.valid==null)throw new Error("Encryption scheme unsupported");if(!re.valid)throw new Error("Password is incorrect");break;case 92:j.lastuser=re;break;case 66:var Se=Number(re);switch(Se){case 21010:Se=1200;break;case 32768:Se=1e4;break;case 32769:Se=1252;break}gd(j.codepage=Se),ie=!0;break;case 317:j.rrtabid=re;break;case 25:j.winlocked=re;break;case 439:r.opts.RefreshAll=re;break;case 12:r.opts.CalcCount=re;break;case 16:r.opts.CalcDelta=re;break;case 17:r.opts.CalcIter=re;break;case 13:r.opts.CalcMode=re;break;case 14:r.opts.CalcPrecision=re;break;case 95:r.opts.CalcSaveRecalc=re;break;case 15:j.CalcRefMode=re;break;case 2211:r.opts.FullCalc=re;break;case 129:re.fDialog&&(a["!type"]="dialog"),re.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),re.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:B.push(re);break;case 430:V.push([re]),V[V.length-1].XTI=[];break;case 35:case 547:V[V.length-1].push(re);break;case 24:case 536:te={Name:re.Name,Ref:Ho(re.rgce,i,null,V,j)},re.itab>0&&(te.Sheet=re.itab-1),V.names.push(te),V[0]||(V[0]=[],V[0].XTI=[]),V[V.length-1].push(re),re.Name=="_xlnm._FilterDatabase"&&re.itab>0&&re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"&&(J[re.itab-1]={ref:rn(re.rgce[0][0][1][2])});break;case 22:j.ExternCount=re;break;case 23:V.length==0&&(V[0]=[],V[0].XTI=[]),V[V.length-1].XTI=V[V.length-1].XTI.concat(re),V.XTI=V.XTI.concat(re);break;case 2196:if(j.biff<8)break;te!=null&&(te.Comment=re[1]);break;case 18:a["!protect"]=re;break;case 19:re!==0&&j.WTF&&console.error("Password verifier: "+re);break;case 133:s[re.pos]=re,j.snames.push(re.name);break;case 10:{if(--ne)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=rn(i),t.sheetRows&&t.sheetRows<=i.e.r){var De=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=rn(i),i.e.r=De}i.e.r++,i.e.c++}P.length>0&&(a["!merges"]=P),X.length>0&&(a["!objects"]=X),K.length>0&&(a["!cols"]=K),Z.length>0&&(a["!rows"]=Z),w.Sheets.push(C)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(j.biff===8&&(j.biff={9:2,521:3,1033:4}[oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8),j.biffguess=re.BIFFVer==0,re.BIFFVer==0&&re.dt==4096&&(j.biff=5,ie=!0,gd(j.codepage=28591)),j.biff==8&&re.BIFFVer==0&&re.dt==16&&(j.biff=2),ne++)break;if(a=t.dense?[]:{},j.biff<8&&!ie&&(ie=!0,gd(j.codepage=t.codepage||1252)),j.biff<5||re.BIFFVer==0&&re.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var _e={pos:e.l-ce,name:u};s[_e.pos]=_e,j.snames.push(u)}else u=(s[Ae]||{name:""}).name;re.dt==32&&(a["!type"]="chart"),re.dt==64&&(a["!type"]="macro"),P=[],X=[],j.arrayf=_=[],K=[],Z=[],H=!1,C={Hidden:(s[Ae]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[re.r]||[])[re.c]:a[Ur({c:re.c,r:re.r})])&&++re.c,S={ixfe:re.ixfe,XF:B[re.ixfe]||{},v:re.val,t:"n"},L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 5:case 517:S={ixfe:re.ixfe,XF:B[re.ixfe],v:re.val,t:re.t},L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 638:S={ixfe:re.ixfe,XF:B[re.ixfe],v:re.rknum,t:"n"},L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 189:for(var he=re.c;he<=re.C;++he){var Ie=re.rkrec[he-re.c][0];S={ixfe:Ie,XF:B[Ie],v:re.rkrec[he-re.c][1],t:"n"},L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O({c:he,r:re.r},S,t)}break;case 6:case 518:case 1030:{if(re.val=="String"){o=re;break}if(S=OE(re.val,re.cell.ixfe,re.tt),S.XF=B[S.ixfe],t.cellFormula){var He=re.formula;if(He&&He[0]&&He[0][0]&&He[0][0][0]=="PtgExp"){var Xe=He[0][0][1][0],ye=He[0][0][1][1],Oe=Ur({r:Xe,c:ye});y[Oe]?S.f=""+Ho(re.formula,i,re.cell,V,j):S.F=((t.dense?(a[Xe]||[])[ye]:a[Oe])||{}).F}else S.f=""+Ho(re.formula,i,re.cell,V,j)}L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O(re.cell,S,t),o=re}break;case 7:case 519:if(o)o.val=re,S=OE(re,o.cell.ixfe,"s"),S.XF=B[S.ixfe],t.cellFormula&&(S.f=""+Ho(o.formula,i,o.cell,V,j)),L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O(o.cell,S,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{_.push(re);var Pe=Ur(re[0].s);if(p=t.dense?(a[re[0].s.r]||[])[re[0].s.c]:a[Pe],t.cellFormula&&p){if(!o||!Pe||!p)break;p.f=""+Ho(re[1],i,re[0],V,j),p.F=rn(re[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;y[Ur(o.cell)]=re[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Ur(o.cell)],(p||{}).f=""+Ho(re[0],i,f,V,j)}}break;case 253:S=OE(l[re.isst].t,re.ixfe,"s"),l[re.isst].h&&(S.h=l[re.isst].h),S.XF=B[S.ixfe],L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 513:t.sheetStubs&&(S={ixfe:re.ixfe,XF:B[re.ixfe],t:"z"},L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t));break;case 190:if(t.sheetStubs)for(var qe=re.c;qe<=re.C;++qe){var Ze=re.ixfe[qe-re.c];S={ixfe:Ze,XF:B[Ze],t:"z"},L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O({c:qe,r:re.r},S,t)}break;case 214:case 516:case 4:S=OE(re.val,re.ixfe,"s"),S.XF=B[S.ixfe],L>0&&(S.z=W[S.ixfe>>8&63]),lA(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 0:case 512:ne===1&&(i=re);break;case 252:l=re;break;case 1054:if(j.biff==4){W[L++]=re[1];for(var ot=0;ot<L+163&&Dr[ot]!=re[1];++ot);ot>=163&&Uf(re[1],L+163)}else Uf(re[1],re[0]);break;case 30:{W[L++]=re;for(var mt=0;mt<L+163&&Dr[mt]!=re;++mt);mt>=163&&Uf(re,L+163)}break;case 229:P=P.concat(re);break;case 93:X[re.cmo[0]]=j.lastobj=re;break;case 438:j.lastobj.TxO=re;break;case 127:j.lastobj.ImData=re;break;case 440:for(b=re[0].s.r;b<=re[0].e.r;++b)for(v=re[0].s.c;v<=re[0].e.c;++v)p=t.dense?(a[b]||[])[v]:a[Ur({c:v,r:b})],p&&(p.l=re[1]);break;case 2048:for(b=re[0].s.r;b<=re[0].e.r;++b)for(v=re[0].s.c;v<=re[0].e.c;++v)p=t.dense?(a[b]||[])[v]:a[Ur({c:v,r:b})],p&&p.l&&(p.l.Tooltip=re[1]);break;case 28:{if(j.biff<=5&&j.biff>=2)break;p=t.dense?(a[re[0].r]||[])[re[0].c]:a[Ur(re[0])];var Bt=X[re[2]];p||(t.dense?(a[re[0].r]||(a[re[0].r]=[]),p=a[re[0].r][re[0].c]={t:"z"}):p=a[Ur(re[0])]={t:"z"},i.e.r=Math.max(i.e.r,re[0].r),i.s.r=Math.min(i.s.r,re[0].r),i.e.c=Math.max(i.e.c,re[0].c),i.s.c=Math.min(i.s.c,re[0].c)),p.c||(p.c=[]),g={a:re[1],t:Bt.TxO.t},p.c.push(g)}break;case 2173:G5e(B[re.ixfe],re.ext);break;case 125:{if(!j.cellStyles)break;for(;re.e>=re.s;)K[re.e--]={width:re.w/256,level:re.level||0,hidden:!!(re.flags&1)},H||(H=!0,OD(re.w/256)),em(K[re.e+1])}break;case 520:{var Lt={};re.level!=null&&(Z[re.r]=Lt,Lt.level=re.level),re.hidden&&(Z[re.r]=Lt,Lt.hidden=!0),re.hpt&&(Z[re.r]=Lt,Lt.hpt=re.hpt,Lt.hpx=Ax(re.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||xp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[oe]]=re;break;case 161:a["!margins"]||xp(a["!margins"]={}),a["!margins"].header=re.header,a["!margins"].footer=re.footer;break;case 574:re.RTL&&(w.Views[0].RTL=!0);break;case 146:F=re;break;case 2198:U=re;break;case 140:k=re;break;case 442:u?C.CodeName=re||C.name:w.WBProps.CodeName=re||"ThisWorkbook";break}}else ge||console.error("Missing Info for XLS Record 0x"+oe.toString(16)),e.l+=ce}return r.SheetNames=Ts(s).sort(function(Ot,Qt){return Number(Ot)-Number(Qt)}).map(function(Ot){return s[Ot].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&J.forEach(function(Ot,Qt){r.Sheets[r.SheetNames[Qt]]["!autofilter"]=Ot}),r.Strings=l,r.SSF=Va(Dr),j.enc&&(r.Encryption=j.enc),U&&(r.Themes=U),r.Metadata={},k!==void 0&&(r.Metadata.Country=k),V.names.length>0&&(w.Names=V.names),r.Workbook=w,r}var ly={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function o3e(e,t,r){var n=Er.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=wQ(n,Fj,ly.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Er.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=wQ(i,Oj,ly.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(eee(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function l3e(e,t){var r=[],n=[],a=[],s=0,i,o=J9(Fj,"n"),l=J9(Oj,"n");if(e.Props)for(i=Ts(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Ts(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)oee.indexOf(a[s][0])>-1||ZZ.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Er.utils.cfb_add(t,"/SummaryInformation",EQ(n,ly.SI,l,Oj)),(r.length||u.length)&&Er.utils.cfb_add(t,"/DocumentSummaryInformation",EQ(r,ly.DSI,o,Fj,u.length?u:null,ly.UDI))}function rte(e,t){t||(t={}),VD(t),uD(),t.codepage&&cD(t.codepage);var r,n;if(e.FullPaths){if(Er.find(e,"/encryption"))throw new Error("File is password-protected");r=Er.find(e,"!CompObj"),n=Er.find(e,"/Workbook")||Er.find(e,"/Book")}else{switch(t.type){case"base64":e=_c(Fc(e));break;case"binary":e=_c(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}ho(e,0),n={content:e}}var a,s;if(r&&n3e(r),t.bookProps&&!t.bookSheets)a={};else{var i=mn?"buffer":"array";if(n&&n.content)a=i3e(n.content,t);else if((s=Er.find(e,"PerfectOffice_MAIN"))&&s.content)a=vp.to_workbook(s.content,(t.type=i,t));else if((s=Er.find(e,"NativeContent_MAIN"))&&s.content)a=vp.to_workbook(s.content,(t.type=i,t));else throw(s=Er.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Er.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=yNe(e))}var o={};return e.FullPaths&&o3e(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function c3e(e,t){var r=t||{},n=Er.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Er.utils.cfb_add(n,a,nte(e,r)),r.biff==8&&(e.Props||e.Custprops)&&l3e(e,n),r.biff==8&&e.vbaraw&&wNe(n,Er.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Vy={0:{f:Fke},1:{f:Qke},2:{f:iBe},3:{f:Wke},4:{f:$ke},5:{f:nBe},6:{f:dBe},7:{f:Zke},8:{f:vBe},9:{f:gBe},10:{f:mBe},11:{f:pBe},12:{f:Vke},13:{f:lBe},14:{f:Yke},15:{f:Gke},16:{f:qee},17:{f:fBe},18:{f:tBe},19:{f:CD},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:fTe},40:{},42:{},43:{f:d5e},44:{f:c5e},45:{f:h5e},46:{f:p5e},47:{f:m5e},48:{},49:{f:REe},50:{},51:{f:X5e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:vee},62:{f:uBe},63:{f:sNe},64:{f:OBe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Zo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:TBe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Mke},148:{f:Rke,p:16},151:{f:CBe},152:{},153:{f:uTe},154:{},155:{},156:{f:lTe},157:{},158:{},159:{T:1,f:SSe},160:{T:-1},161:{T:1,f:ng},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:xBe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:q5e},336:{T:-1},337:{f:Z5e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:jj},357:{},358:{},359:{},360:{T:1},361:{},362:{f:gee},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:_Be},427:{f:SBe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:kBe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Lke},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:wBe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:jj},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:pNe},633:{T:1},634:{T:-1},635:{T:1,f:hNe},636:{T:-1},637:{f:UEe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:YBe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:DBe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Uj={6:{f:UB},10:{f:r0},12:{f:ui},13:{f:ui},14:{f:Us},15:{f:Us},16:{f:Xo},17:{f:Us},18:{f:Us},19:{f:ui},20:{f:BQ},21:{f:BQ},23:{f:gee},24:{f:IQ},25:{f:Us},26:{},27:{},28:{f:D_e},29:{},34:{f:Us},35:{f:TQ},38:{f:Xo},39:{f:Xo},40:{f:Xo},41:{f:Xo},42:{f:Us},43:{f:Us},47:{f:GSe},49:{f:l_e},51:{f:ui},60:{},61:{f:n_e},64:{f:Us},65:{f:o_e},66:{f:ui},77:{},80:{},81:{},82:{},85:{f:ui},89:{},90:{},91:{},92:{f:KCe},93:{f:L_e},94:{},95:{f:Us},96:{},97:{},99:{f:Us},125:{f:vee},128:{f:E_e},129:{f:qCe},130:{f:ui},131:{f:Us},132:{f:Us},133:{f:WCe},134:{},140:{f:K_e},141:{f:ui},144:{},146:{f:W_e},151:{},152:{},153:{},154:{},155:{},156:{f:ui},157:{},158:{},160:{f:rSe},161:{f:J_e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:x_e},190:{f:b_e},193:{f:r0},197:{},198:{},199:{},200:{},201:{},202:{f:Us},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ui},220:{},221:{f:Us},222:{},224:{f:w_e},225:{f:$Ce},226:{f:r0},227:{},229:{f:R_e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:YCe},253:{f:u_e},255:{f:ZCe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:lee},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Us},353:{f:r0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:k_e},431:{f:Us},432:{},433:{},434:{},437:{},438:{f:Q_e},439:{f:Us},440:{f:H_e},441:{},442:{f:Pw},443:{},444:{f:ui},445:{},446:{},448:{f:r0},449:{f:r_e,r:2},450:{f:r0},512:{f:SQ},513:{f:tSe},515:{f:S_e},516:{f:A_e},517:{f:kQ},519:{f:nSe},520:{f:e_e},523:{},545:{f:jQ},549:{f:_Q},566:{},574:{f:s_e},638:{f:v_e},659:{},1048:{},1054:{f:h_e},1084:{},1212:{f:j_e},2048:{f:z_e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:IE},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:r0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:X_e,r:12},2173:{f:K5e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Us,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:I_e,r:12},2197:{},2198:{f:U5e,r:12},2199:{},2200:{},2201:{},2202:{f:F_e,r:12},2203:{f:r0},2204:{},2205:{},2206:{},2207:{},2211:{f:t_e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ui},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Z_e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:q_e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:SQ},1:{},2:{f:lSe},3:{f:iSe},4:{f:sSe},5:{f:kQ},7:{f:uSe},8:{},9:{f:IE},11:{},22:{f:ui},30:{f:p_e},31:{},32:{},33:{f:jQ},36:{},37:{f:_Q},50:{f:dSe},62:{},52:{},67:{},68:{f:ui},69:{},86:{},126:{},127:{f:aSe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:ASe},223:{},234:{},354:{},421:{},518:{f:UB},521:{f:IE},536:{f:IQ},547:{f:TQ},561:{},579:{},1030:{f:UB},1033:{f:IE},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function qt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&yD(r)&&e.push(r)}}function u3e(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return qt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u;l<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u}}}function Qw(e,t,r){return e||(e=yt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function d3e(e,t,r,n){var a=yt(9);return Qw(a,e,t),cee(r,n||"b",a),a}function A3e(e,t,r){var n=yt(8+2*r.length);return Qw(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function f3e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?ki(Ha(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?qt(e,2,cSe(r,n,a)):qt(e,3,oSe(r,n,a));return;case"b":case"e":qt(e,5,d3e(r,n,t.v,t.t));return;case"s":case"str":qt(e,4,A3e(r,n,(t.v||"").slice(0,255)));return}qt(e,1,Qw(null,r,n))}function h3e(e,t,r,n){var a=Array.isArray(t),s=Qn(t["!ref"]||"A1"),i,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=rn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=Ws(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(l[d]=as(d)),i=l[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&f3e(e,f,u,d)}}}function m3e(e,t){for(var r=t||{},n=ql(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return qt(n,r.biff==4?1033:r.biff==3?521:9,ID(e,16,r)),h3e(n,e.Sheets[e.SheetNames[a]],a,r),qt(n,10),n.end()}function p3e(e,t,r){qt(e,49,c_e({sz:12,name:"Arial"},r))}function g3e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&qt(e,1054,m_e(a,t[a],r))})}function v3e(e,t){var r=yt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),qt(e,2151,r),r=yt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),hee(Qn(t["!ref"]||"A1"),r),r.write_shift(4,4),qt(e,2152,r)}function x3e(e,t){for(var r=0;r<16;++r)qt(e,224,NQ({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){qt(e,224,NQ(n,0,t))})}function b3e(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];qt(e,440,V_e(n)),n[1].Tooltip&&qt(e,2048,$_e(n))}delete t["!links"]}function y3e(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&qt(e,125,Y_e(EN(a,n),a))})}}function w3e(e,t,r,n,a){var s=16+Am(a.cellXfs,t,a);if(t.v==null&&!t.bf){qt(e,513,Mp(r,n,s));return}if(t.bf)qt(e,6,q4e(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?ki(Ha(t.v)):t.v;qt(e,515,N_e(r,n,i,s));break;case"b":case"e":qt(e,517,__e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=MD(a.Strings,t.v,a.revStrings);qt(e,253,d_e(r,n,o,s))}else qt(e,516,f_e(r,n,(t.v||"").slice(0,255),s,a));break;default:qt(e,513,Mp(r,n,s))}}function E3e(e,t,r){var n=ql(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},l=Array.isArray(s),u=t.biff==8,d,f="",h=[],p=Qn(s["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}qt(n,2057,ID(r,16,t)),qt(n,13,xu(1)),qt(n,12,xu(100)),qt(n,15,dl(!0)),qt(n,17,dl(!1)),qt(n,16,Pp(.001)),qt(n,95,dl(!0)),qt(n,42,dl(!1)),qt(n,43,dl(!1)),qt(n,130,xu(1)),qt(n,128,C_e()),qt(n,131,dl(!1)),qt(n,132,dl(!1)),u&&y3e(n,s["!cols"]),qt(n,512,g_e(p,t)),u&&(s["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){f=Ws(v);for(var b=p.s.c;b<=p.e.c;++b){v===p.s.r&&(h[b]=as(b)),d=h[b]+f;var y=l?(s[v]||[])[b]:s[d];y&&(w3e(n,y,v,b,t),u&&y.l&&s["!links"].push([d,y.l]))}}var _=o.CodeName||o.name||a;return u&&qt(n,574,i_e((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&qt(n,229,P_e(s["!merges"])),u&&b3e(n,s),qt(n,442,uee(_)),u&&v3e(n,s),qt(n,10),n.end()}function C3e(e,t,r){var n=ql(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,l=r.biff==5;if(qt(n,2057,ID(e,5,r)),r.bookType=="xla"&&qt(n,135),qt(n,225,o?xu(1200):null),qt(n,193,_Ce(2)),l&&qt(n,191),l&&qt(n,192),qt(n,226),qt(n,92,GCe("SheetJS",r)),qt(n,66,xu(o?1200:1252)),o&&qt(n,353,xu(0)),o&&qt(n,448),qt(n,317,eSe(e.SheetNames.length)),o&&e.vbaraw&&qt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";qt(n,442,uee(u))}qt(n,156,xu(17)),qt(n,25,dl(!1)),qt(n,18,dl(!1)),qt(n,19,xu(0)),o&&qt(n,431,dl(!1)),o&&qt(n,444,xu(0)),qt(n,61,a_e()),qt(n,64,dl(!1)),qt(n,141,xu(0)),qt(n,34,dl(rTe(e)=="true")),qt(n,14,dl(!0)),o&&qt(n,439,dl(!1)),qt(n,218,xu(0)),p3e(n,e,r),g3e(n,e.SSF,r),x3e(n,r),o&&qt(n,352,dl(!1));var d=n.end(),f=ql();o&&qt(f,140,G_e()),o&&r.Strings&&u3e(f,252,JCe(r.Strings)),qt(f,10);var h=f.end(),p=ql(),g=0,v=0;for(v=0;v<e.SheetNames.length;++v)g+=(o?12:11)+(o?2:1)*e.SheetNames[v].length;var b=d.length+g+h.length;for(v=0;v<e.SheetNames.length;++v){var y=s[v]||{};qt(p,133,XCe({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[v]},r)),b+=t[v].length}var _=p.end();if(g!=_.length)throw new Error("BS8 "+g+" != "+_.length);var S=[];return d.length&&S.push(d),_.length&&S.push(_),h.length&&S.push(h),Gi(S)}function _3e(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Va(Dr)),e&&e.SSF&&(Hx(),pN(e.SSF),r.revssf=vN(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,zD(r),r.cellXfs=[],Am(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=E3e(a,r,e);return n.unshift(C3e(e,n,r)),Gi(n)}function nte(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Xl(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return _3e(e,t);case 4:case 3:case 2:return m3e(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function HQ(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,l=cEe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<l.length;++i){var v=l[i].trim(),b=v.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=v.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var _=y[o].trim();if(_.match(/<t[dh]/i)){for(var S=_,k=0;S.charAt(0)=="<"&&(k=S.indexOf(">"))>-1;)S=S.slice(k+1);for(var B=0;B<g.length;++B){var F=g[B];F.s.c==d&&F.s.r<u&&u<=F.e.r&&(d=F.e.c+1,B=-1)}var w=$r(_.slice(0,_.indexOf(">")));h=w.colspan?+w.colspan:1,((f=+w.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var C=w.t||w["data-t"]||"";if(!S.length){d+=h;continue}if(S=NZ(S),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!S.length){d+=h;continue}var N={t:"s",v:S};r.raw||!S.trim().length||C=="s"||(S==="TRUE"?N={t:"b",v:!0}:S==="FALSE"?N={t:"b",v:!1}:isNaN(bd(S))?isNaN(ux(S).getDate())||(N={t:"d",v:Ha(S)},r.cellDates||(N={t:"n",v:ki(N.v)}),N.z=r.dateNF||Dr[14]):N={t:"n",v:bd(S)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=N):n[Ur({r:u,c:d})]=N,d+=h}}}}return n["!ref"]=rn(p),g.length&&(n["!merges"]=g),n}function S3e(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,l=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Ur({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||vD(f.w||(Jf(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(Gt("td",h,p))}}var g="<tr>";return g+s.join("")+"</tr>"}var N3e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',k3e="</body></html>";function B3e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return dm(HQ(r[0],t),t);var n=qD();return r.forEach(function(a,s){WD(n,HQ(a,t),"Sheet"+(s+1))}),n}function T3e(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function ate(e,t){var r=t||{},n=r.header!=null?r.header:N3e,a=r.footer!=null?r.footer:k3e,s=[n],i=Xl(e["!ref"]);r.dense=Array.isArray(e),s.push(T3e(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(S3e(e,i,o,r));return s.push("</table>"+a),s.join("")}function ste(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?ss(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Xl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),g=0,v=0,b=0,y=0,_=0,S=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&v<l;++g){var k=o[g];if(VQ(k)){if(n.display)continue;p[v]={hidden:!0}}var B=k.children;for(b=y=0;b<B.length;++b){var F=B[b];if(!(n.display&&VQ(F))){var w=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):NZ(F.innerHTML),C=F.getAttribute("data-z")||F.getAttribute("z");for(h=0;h<f.length;++h){var N=f[h];N.s.c==y+s&&N.s.r<v+a&&v+a<=N.e.r&&(y=N.e.c+1-s,h=-1)}S=+F.getAttribute("colspan")||1,((_=+F.getAttribute("rowspan")||1)>1||S>1)&&f.push({s:{r:v+a,c:y+s},e:{r:v+a+(_||1)-1,c:y+s+(S||1)-1}});var R={t:"s",v:w},O=F.getAttribute("data-t")||F.getAttribute("t")||"";w!=null&&(w.length==0?R.t=O||"z":n.raw||w.trim().length==0||O=="s"||(w==="TRUE"?R={t:"b",v:!0}:w==="FALSE"?R={t:"b",v:!1}:isNaN(bd(w))?isNaN(ux(w).getDate())||(R={t:"d",v:Ha(w)},n.cellDates||(R={t:"n",v:ki(R.v)}),R.z=n.dateNF||Dr[14]):R={t:"n",v:bd(w)})),R.z===void 0&&C!=null&&(R.z=C);var j="",U=F.getElementsByTagName("A");if(U&&U.length)for(var P=0;P<U.length&&!(U[P].hasAttribute("href")&&(j=U[P].getAttribute("href"),j.charAt(0)!="#"));++P);j&&j.charAt(0)!="#"&&(R.l={Target:j}),n.dense?(e[v+a]||(e[v+a]=[]),e[v+a][y+s]=R):e[Ur({c:y+s,r:v+a})]=R,u.e.c<y+s&&(u.e.c=y+s),y+=S}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,v-1+a),e["!ref"]=rn(u),v>=l&&(e["!fullref"]=rn((u.e.r=o.length-g+v-1+a,u))),e}function ite(e,t){var r=t||{},n=r.dense?[]:{};return ste(n,e,t)}function I3e(e,t){return dm(ite(e,t),t)}function VQ(e){var t="",r=j3e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function j3e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function F3e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Un(t.replace(/<[^>]*>/g,""));return[r]}var zQ={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function ote(e,t){var r=t||{},n=xD(e),a=[],s,i,o={name:""},l="",u=0,d,f,h={},p=[],g=r.dense?[]:{},v,b,y={value:""},_="",S=0,k=[],B=-1,F=-1,w={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,N={},R=[],O={},j=0,U=0,P=[],X=1,K=1,Z=[],H={Names:[]},V={},q=["",""],ne=[],L={},W="",J=0,te=!1,ie=!1,Ae=0;for(Py.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=Py.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"工作表":v[1]==="/"?(w.e.c>=w.s.c&&w.e.r>=w.s.r?g["!ref"]=rn(w):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=w.e.r&&(g["!fullref"]=g["!ref"],w.e.r=r.sheetRows-1,g["!ref"]=rn(w)),R.length&&(g["!merges"]=R),P.length&&(g["!rows"]=P),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),h[d.name]=g,ie=!1):v[0].charAt(v[0].length-2)!=="/"&&(d=$r(v[0],!1),B=F=-1,w.s.r=w.s.c=1e7,w.e.r=w.e.c=0,g=r.dense?[]:{},R=[],P=[],ie=!0);break;case"table-row-group":v[1]==="/"?--C:++C;break;case"table-row":case"行":if(v[1]==="/"){B+=X,X=1;break}if(f=$r(v[0],!1),f.行号?B=f.行号-1:B==-1&&(B=0),X=+f["number-rows-repeated"]||1,X<10)for(Ae=0;Ae<X;++Ae)C>0&&(P[B+Ae]={level:C});F=-1;break;case"covered-table-cell":v[1]!=="/"&&++F,r.sheetStubs&&(r.dense?(g[B]||(g[B]=[]),g[B][F]={t:"z"}):g[Ur({r:B,c:F})]={t:"z"}),_="",k=[];break;case"table-cell":case"数据":if(v[0].charAt(v[0].length-2)==="/")++F,y=$r(v[0],!1),K=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=MQ(Un(y.formula))),(y.数据类型||y["value-type"])=="string"&&(b.t="s",b.v=Un(y["string-value"]||""),r.dense?(g[B]||(g[B]=[]),g[B][F]=b):g[Ur({r:B,c:F})]=b),F+=K-1;else if(v[1]!=="/"){++F,_="",S=0,k=[],K=1;var oe=X?B+X-1:B;if(F>w.e.c&&(w.e.c=F),F<w.s.c&&(w.s.c=F),B<w.s.r&&(w.s.r=B),oe>w.e.r&&(w.e.r=oe),y=$r(v[0],!1),ne=[],L={},b={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Un(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(j=parseInt(y["number-matrix-rows-spanned"],10)||0,U=parseInt(y["number-matrix-columns-spanned"],10)||0,O={s:{r:B,c:F},e:{r:B+j-1,c:F+U-1}},b.F=rn(O),Z.push([O,b.F])),y.formula)b.f=MQ(y.formula);else for(Ae=0;Ae<Z.length;++Ae)B>=Z[Ae][0].s.r&&B<=Z[Ae][0].e.r&&F>=Z[Ae][0].s.c&&F<=Z[Ae][0].e.c&&(b.F=Z[Ae][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(j=parseInt(y["number-rows-spanned"],10)||0,U=parseInt(y["number-columns-spanned"],10)||0,O={s:{r:B,c:F},e:{r:B+j-1,c:F+U-1}},R.push(O)),y["number-columns-repeated"]&&(K=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ua(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Ha(y["date-value"]),r.cellDates||(b.t="n",b.v=ki(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=iEe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=xN(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.数据数值);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(_=Un(y["string-value"]),k=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(te=!1,b.t==="s"&&(b.v=_||"",k.length&&(b.R=k),te=S==0),V.Target&&(b.l=V),ne.length>0&&(b.c=ne,ne=[]),_&&r.cellText!==!1&&(b.w=_),te&&(b.t="z",delete b.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=B))for(var ce=0;ce<X;++ce){if(K=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[B+ce]||(g[B+ce]=[]),g[B+ce][F]=ce==0?b:Va(b);--K>0;)g[B+ce][F+K]=Va(b);else for(g[Ur({r:B+ce,c:F})]=b;--K>0;)g[Ur({r:B+ce,c:F+K})]=Va(b);w.e.c<=F&&(w.e.c=F)}K=parseInt(y["number-columns-repeated"]||"1",10),F+=K-1,K=0,b={},_="",k=[]}V={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s;L.t=_,k.length&&(L.R=k),L.a=W,ne.push(L)}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!1]);W="",J=0,_="",S=0,k=[];break;case"creator":v[1]==="/"?W=n.slice(J,v.index):J=v.index+v[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!1]);_="",S=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(N[o.name]=l,(s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&(l="",o=$r(v[0],!1),a.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(v[0],!1),l+=zQ[v[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(v[0],!1),l+=zQ[v[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,v.index);break}else u=v.index+v[0].length;break;case"named-range":i=$r(v[0],!1),q=QB(i["cell-range-address"]);var ge={Name:i.name,Ref:q[0]+"!"+q[1]};ie&&(ge.Sheet=p.length),H.Names.push(ge);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(v[1]==="/"&&(!y||!y["string-value"])){var je=F3e(n.slice(S,v.index));_=(_.length>0?_+`
`:"")+je[0]}else $r(v[0],!1),S=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{q=QB($r(v[0])["target-range-address"]),h[q[0]]["!autofilter"]={ref:q[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(V=$r(v[0],!1),!V.href)break;V.Target=Un(V.href),delete V.href,V.Target.charAt(0)=="#"&&V.Target.indexOf(".")>-1?(q=QB(V.Target.slice(1)),V.Target="#"+q[0]+"!"+q[1]):V.Target.match(/^\.\.[\\\/]/)&&(V.Target=V.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(v)}}var re={Sheets:h,SheetNames:p,Workbook:H};return r.bookSheets&&delete re.Sheets,re}function $Q(e,t){t=t||{},gu(e,"META-INF/manifest.xml")&&iCe(ci(e,"META-INF/manifest.xml"),t);var r=Sc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=ote(_a(r),t);return gu(e,"meta.xml")&&(n.Props=YZ(ci(e,"meta.xml"))),n}function KQ(e,t){return ote(e,t)}var O3e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Ry({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Js+t}}(),GQ=function(){var e=function(s){return ga(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var l=[];l.push('      <table:table table:name="'+ga(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Xl(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var v="",b=s["!rows"]||[];for(u=0;u<f.s.r;++u)v=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=f.e.r;++u){for(v=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+v+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var y=!1,_={},S="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(y=!0),_["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,_["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(y){l.push(r);continue}var k=Ur({r:u,c:d}),B=g?(s[u]||[])[d]:s[k];if(B&&B.f&&(_["table:formula"]=ga(eke(B.f)),B.F&&B.F.slice(0,k.length)==k)){var F=Xl(B.F);_["table:number-matrix-columns-spanned"]=F.e.c-F.s.c+1,_["table:number-matrix-rows-spanned"]=F.e.r-F.s.r+1}if(!B){l.push(t);continue}switch(B.t){case"b":S=B.v?"TRUE":"FALSE",_["office:value-type"]="boolean",_["office:boolean-value"]=B.v?"true":"false";break;case"n":S=B.w||String(B.v||0),_["office:value-type"]="float",_["office:value"]=B.v||0;break;case"s":case"str":S=B.v==null?"":B.v,_["office:value-type"]="string";break;case"d":S=B.w||Ha(B.v).toISOString(),_["office:value-type"]="date",_["office:date-value"]=Ha(B.v).toISOString(),_["table:style-name"]="ce1";break;default:l.push(t);continue}var w=e(S);if(B.l&&B.l.Target){var C=B.l.Target;C=C.charAt(0)=="#"?"#"+tke(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),w=Gt("text:a",w,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+Gt("table:table-cell",Gt("text:p",w,{}),_)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;em(f),f.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Js],u=Ry({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Ry({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(XZ().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),a(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)l.push(n(i.Sheets[i.SheetNames[f]],i,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function lte(e,t){if(t.bookType=="fods")return GQ(e,t);var r=mD(),n="",a=[],s=[];return n="mimetype",cn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",cn(r,n,GQ(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",cn(r,n,O3e(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",cn(r,n,Js+XZ()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",cn(r,n,cCe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",cn(r,n,oCe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Up(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Qj(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):_a(um(e))}function D3e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):_c(EA(e))}function R3e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function rm(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function qQ(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function P3e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function L3e(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function zy(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function fa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ns(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function qn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=zy(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=zy(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function oo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(fa(n*8+a.type)),a.type==2&&t.push(fa(a.data.length)),t.push(a.data))})}),rm(t)}function HD(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function hu(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=zy(e,n),s=qn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Ns(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=qn(o.data),u=Ns(l[3][0].data);i.messages.push({meta:l,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Ns(s[3][0].data)>>>0>0),r.push(i)}return r}function Hg(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:fa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:fa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:fa(i.data.length)}],n[2].push({data:oo(i.meta),type:2})});var s=oo(n);t.push(fa(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),rm(t)}function M3e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=zy(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[rm(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(a.push(a[0].slice(-l)),u-=l;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-l,-l+u))}}var d=rm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function mu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(M3e(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return rm(t)}function Vg(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=fa(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return rm(t)}function U3e(e,t,r,n){var a=Up(e),s=a.getUint32(4,!0),i=(n>1?12:8)+qQ(s&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=qQ(s&(n>1?12288:4096))*4,s&16&&(l=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Q3e(e,t,r){var n=Up(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(l=P3e(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function VB(e,t){var r=new Uint8Array(32),n=Up(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,L3e(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function zB(e,t){var r=new Uint8Array(32),n=Up(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function H3e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return U3e(e,t,r,e[0]);case 5:return Q3e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Qo(e){var t=qn(e);return zy(t[1][0].data)}function WQ(e,t){var r=qn(t.data),n=Ns(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=qn(i.data),l=Ns(o[1][0].data)>>>0;switch(n){case 1:s[l]=Qj(o[3][0].data);break;case 8:{var u=e[Qo(o[9][0].data)][0],d=qn(u.data),f=e[Qo(d[1][0].data)][0],h=Ns(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=qn(f.data);s[l]=p[3].map(function(g){return Qj(g.data)}).join("")}break}}),s}function V3e(e,t){var r,n,a,s,i,o,l,u,d,f,h,p,g,v,b=qn(e),y=Ns(b[1][0].data)>>>0,_=Ns(b[2][0].data)>>>0,S=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Ns(b[8][0].data)>0||!1,k,B;if((s=(a=b[7])==null?void 0:a[0])!=null&&s.data&&t!=0)k=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,B=(u=(l=b[6])==null?void 0:l[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)k=(p=(h=b[4])==null?void 0:h[0])==null?void 0:p.data,B=(v=(g=b[3])==null?void 0:g[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var F=S?4:1,w=Up(k),C=[],N=0;N<k.length/2;++N){var R=w.getUint16(N*2,!0);R<65535&&C.push([N,R])}if(C.length!=_)throw"Expected ".concat(_," cells, found ").concat(C.length);var O=[];for(N=0;N<C.length-1;++N)O[C[N][0]]=B.subarray(C[N][1]*F,C[N+1][1]*F);return C.length>=1&&(O[C[C.length-1][0]]=B.subarray(C[C.length-1][1]*F)),{R:y,cells:O}}function z3e(e,t){var r,n=qn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ns(n[7][0].data)>>>0>0?1:0:-1,s=HD(n[5],function(i){return V3e(i,a)});return{nrows:Ns(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function $3e(e,t,r){var n,a=qn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ns(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ns(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=rn(s);var i=qn(a[4][0].data),o=WQ(e,e[Qo(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?WQ(e,e[Qo(i[17][0].data)][0]):[],u=qn(i[3][0].data),d=0;u[1].forEach(function(f){var h=qn(f.data),p=e[Qo(h[2][0].data)][0],g=Ns(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var v=z3e(e,p);v.data.forEach(function(b,y){b.forEach(function(_,S){var k=Ur({r:d+y,c:S}),B=H3e(_,o,l);B&&(r[k]=B)})}),d+=v.nrows})}function K3e(e,t){var r=qn(t.data),n={"!ref":"A1"},a=e[Qo(r[2][0].data)],s=Ns(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return $3e(e,a[0],n),n}function G3e(e,t){var r,n=qn(t.data),a={name:(r=n[1])!=null&&r[0]?Qj(n[1][0].data):"",sheets:[]},s=HD(n[2],Qo);return s.forEach(function(i){e[i].forEach(function(o){var l=Ns(o.meta[1][0].data);l==6e3&&a.sheets.push(K3e(e,o))})}),a}function q3e(e,t){var r=qD(),n=qn(t.data),a=HD(n[1],Qo);if(a.forEach(function(s){e[s].forEach(function(i){var o=Ns(i.meta[1][0].data);if(o==2){var l=G3e(e,i);l.sheets.forEach(function(u,d){WD(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function $B(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=mu(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=hu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ns(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(l){s[l].forEach(function(u){var d=Ns(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return q3e(s,o)}function W3e(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Ns(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Up(e[7][0].data),d=0,f=[],h=Up(e[4][0].data),p=0,g=[],v=0;v<t.length;++v){if(t[v]==null){u.setUint16(v*2,65535,!0),h.setUint16(v*2,65535);continue}u.setUint16(v*2,d,!0),h.setUint16(v*2,p,!0);var b,y;switch(typeof t[v]){case"string":b=VB({t:"s",v:t[v]},r),y=zB({t:"s",v:t[v]},r);break;case"number":b=VB({t:"n",v:t[v]},r),y=zB({t:"n",v:t[v]},r);break;case"boolean":b=VB({t:"b",v:t[v]},r),y=zB({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(b),d+=b.length,g.push(y),p+=y.length,++l}for(e[2][0].data=fa(l);v<e[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),h.setUint16(v*2,65535,!0);return e[6][0].data=rm(f),e[3][0].data=rm(g),l}function X3e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Xl(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(rn(n)));var s=cS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(W){return W.forEach(function(J){typeof J=="string"&&i.push(J)})});var o={},l=[],u=Er.read(t.numbers,{type:"base64"});u.FileIndex.map(function(W,J){return[W,u.FullPaths[J]]}).forEach(function(W){var J=W[0],te=W[1];if(J.type==2&&J.name.match(/\.iwa/)){var ie=J.content,Ae=mu(ie),oe=hu(Ae);oe.forEach(function(ce){l.push(ce.id),o[ce.id]={deps:[],location:te,type:Ns(ce.messages[0].meta[1][0].data)}})}}),l.sort(function(W,J){return W-J});var d=l.filter(function(W){return W>1}).map(function(W){return[W,fa(W)]});u.FileIndex.map(function(W,J){return[W,u.FullPaths[J]]}).forEach(function(W){var J=W[0];if(W[1],!!J.name.match(/\.iwa/)){var te=hu(mu(J.content));te.forEach(function(ie){ie.messages.forEach(function(Ae){d.forEach(function(oe){ie.messages.some(function(ce){return Ns(ce.meta[1][0].data)!=11006&&R3e(ce.data,oe[1])})&&o[oe[0]].deps.push(ie.id)})})})}});for(var f=Er.find(u,o[1].location),h=hu(mu(f.content)),p,g=0;g<h.length;++g){var v=h[g];v.id==1&&(p=v)}var b=Qo(qn(p.messages[0].data)[1][0].data);for(f=Er.find(u,o[b].location),h=hu(mu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);for(b=Qo(qn(p.messages[0].data)[2][0].data),f=Er.find(u,o[b].location),h=hu(mu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);for(b=Qo(qn(p.messages[0].data)[2][0].data),f=Er.find(u,o[b].location),h=hu(mu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);var y=qn(p.messages[0].data);{y[6][0].data=fa(n.e.r+1),y[7][0].data=fa(n.e.c+1);var _=Qo(y[46][0].data),S=Er.find(u,o[_].location),k=hu(mu(S.content));{for(var B=0;B<k.length&&k[B].id!=_;++B);if(k[B].id!=_)throw"Bad ColumnRowUIDMapArchive";var F=qn(k[B].messages[0].data);F[1]=[],F[2]=[],F[3]=[];for(var w=0;w<=n.e.c;++w){var C=[];C[1]=C[2]=[{type:0,data:fa(w+420690)}],F[1].push({type:2,data:oo(C)}),F[2].push({type:0,data:fa(w)}),F[3].push({type:0,data:fa(w)})}F[4]=[],F[5]=[],F[6]=[];for(var N=0;N<=n.e.r;++N)C=[],C[1]=C[2]=[{type:0,data:fa(N+726270)}],F[4].push({type:2,data:oo(C)}),F[5].push({type:0,data:fa(N)}),F[6].push({type:0,data:fa(N)});k[B].messages[0].data=oo(F)}S.content=Vg(Hg(k)),S.size=S.content.length,delete y[46];var R=qn(y[4][0].data);{R[7][0].data=fa(n.e.r+1);var O=qn(R[1][0].data),j=Qo(O[2][0].data);S=Er.find(u,o[j].location),k=hu(mu(S.content));{if(k[0].id!=j)throw"Bad HeaderStorageBucket";var U=qn(k[0].messages[0].data);for(N=0;N<s.length;++N){var P=qn(U[2][0].data);P[1][0].data=fa(N),P[4][0].data=fa(s[N].length),U[2][N]={type:U[2][0].type,data:oo(P)}}k[0].messages[0].data=oo(U)}S.content=Vg(Hg(k)),S.size=S.content.length;var X=Qo(R[2][0].data);S=Er.find(u,o[X].location),k=hu(mu(S.content));{if(k[0].id!=X)throw"Bad HeaderStorageBucket";for(U=qn(k[0].messages[0].data),w=0;w<=n.e.c;++w)P=qn(U[2][0].data),P[1][0].data=fa(w),P[4][0].data=fa(n.e.r+1),U[2][w]={type:U[2][0].type,data:oo(P)};k[0].messages[0].data=oo(U)}S.content=Vg(Hg(k)),S.size=S.content.length;var K=Qo(R[4][0].data);(function(){for(var W=Er.find(u,o[K].location),J=hu(mu(W.content)),te,ie=0;ie<J.length;++ie){var Ae=J[ie];Ae.id==K&&(te=Ae)}var oe=qn(te.messages[0].data);{oe[3]=[];var ce=[];i.forEach(function(re,Se){ce[1]=[{type:0,data:fa(Se)}],ce[2]=[{type:0,data:fa(1)}],ce[3]=[{type:2,data:D3e(re)}],oe[3].push({type:2,data:oo(ce)})})}te.messages[0].data=oo(oe);var ge=Hg(J),je=Vg(ge);W.content=je,W.size=W.content.length})();var Z=qn(R[3][0].data);{var H=Z[1][0];delete Z[2];var V=qn(H.data);{var q=Qo(V[2][0].data);(function(){for(var W=Er.find(u,o[q].location),J=hu(mu(W.content)),te,ie=0;ie<J.length;++ie){var Ae=J[ie];Ae.id==q&&(te=Ae)}var oe=qn(te.messages[0].data);{delete oe[6],delete Z[7];var ce=new Uint8Array(oe[5][0].data);oe[5]=[];for(var ge=0,je=0;je<=n.e.r;++je){var re=qn(ce);ge+=W3e(re,s[je],i),re[1][0].data=fa(je),oe[5].push({data:oo(re),type:2})}oe[1]=[{type:0,data:fa(n.e.c+1)}],oe[2]=[{type:0,data:fa(n.e.r+1)}],oe[3]=[{type:0,data:fa(ge)}],oe[4]=[{type:0,data:fa(n.e.r+1)}]}te.messages[0].data=oo(oe);var Se=Hg(J),De=Vg(Se);W.content=De,W.size=W.content.length})()}H.data=oo(V)}R[3][0].data=oo(Z)}y[4][0].data=oo(R)}p.messages[0].data=oo(y);var ne=Hg(h),L=Vg(ne);return f.content=L,f.size=f.content.length,u}function cte(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function VD(e){cte([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function zD(e){cte([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Y3e(e){return wn.WS.indexOf(e)>-1?"sheet":e==wn.CS?"chart":e==wn.DS?"dialog":e==wn.MS?"macro":e&&e.length?e:"sheet"}function J3e(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,Y3e(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Z3e(e,t,r,n,a,s,i,o,l,u,d,f){try{s[n]=ay(Sc(e,r,!0),t);var h=ci(e,t),p;switch(o){case"sheet":p=yTe(h,t,a,l,s[n],u,d,f);break;case"chart":if(p=wTe(h,t,a,l,s[n],u,d,f),!p||!p["!drawel"])break;var g=jb(p["!drawel"].Target,t),v=Ly(g),b=lNe(Sc(e,g,!0),ay(Sc(e,v,!0),g)),y=jb(b,g),_=Ly(y);p=WBe(Sc(e,y,!0),y,l,ay(Sc(e,_,!0),y),u,p);break;case"macro":p=ETe(h,t,a,l,s[n],u,d,f);break;case"dialog":p=CTe(h,t,a,l,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var S=[];s&&s[n]&&Ts(s[n]).forEach(function(k){var B="";if(s[n][k].Type==wn.CMNT){B=jb(s[n][k].Target,t);var F=kTe(ci(e,B,!0),B,l);if(!F||!F.length)return;OQ(p,F,!1)}s[n][k].Type==wn.TCMNT&&(B=jb(s[n][k].Target,t),S=S.concat(uNe(ci(e,B,!0),l)))}),S&&S.length&&OQ(p,S,!0,l.people||[])}catch(k){if(l.WTF)throw k}}function cu(e){return e.charAt(0)=="/"?e.slice(1):e}function eIe(e,t){if(Hx(),t=t||{},VD(t),gu(e,"META-INF/manifest.xml")||gu(e,"objectdata.xml"))return $Q(e,t);if(gu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof $B<"u"){if(e.FileIndex)return $B(e);var r=Er.utils.cfb_new();return tQ(e).forEach(function(P){cn(r,P,dEe(e,P))}),$B(r)}throw new Error("Unsupported NUMBERS file")}if(!gu(e,"[Content_Types].xml"))throw gu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):gu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=tQ(e),a=aCe(Sc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",ci(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!ci(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},u={};if(!t.bookSheets&&!t.bookProps){if(sy=[],a.sst)try{sy=NTe(ci(e,cu(a.sst)),a.sst,t)}catch(P){if(t.WTF)throw P}t.cellStyles&&a.themes.length&&(l=STe(Sc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=_Te(ci(e,cu(a.style)),a.style,l,t))}a.links.map(function(P){try{var X=ay(Sc(e,Ly(cu(P))),P);return TTe(ci(e,cu(P)),X,P,t)}catch{}});var d=bTe(ci(e,cu(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=ci(e,cu(a.coreprops[0]),!0),h&&(f=YZ(h)),a.extprops.length!==0&&(h=ci(e,cu(a.extprops[0]),!0),h&&dCe(h,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Sc(e,cu(a.custprops[0]),!0),h&&(p=fCe(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(X){return X.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=p),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var v={};t.bookDeps&&a.calcchain&&(v=BTe(ci(e,cu(a.calcchain)),a.calcchain));var b=0,y={},_,S;{var k=d.Sheets;f.Worksheets=k.length,f.SheetNames=[];for(var B=0;B!=k.length;++B)f.SheetNames[B]=k[B].name}var F=s?"bin":"xml",w=a.workbooks[0].lastIndexOf("/"),C=(a.workbooks[0].slice(0,w+1)+"_rels/"+a.workbooks[0].slice(w+1)+".rels").replace(/^\//,"");gu(e,C)||(C="xl/_rels/workbook."+F+".rels");var N=ay(Sc(e,C,!0),C.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=ITe(ci(e,cu(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=ANe(ci(e,cu(a.people[0])),t)),N&&(N=J3e(N,d.Sheets));var R=ci(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var O="sheet";if(N&&N[b]?(_="xl/"+N[b][1].replace(/[\/]?xl\//,""),gu(e,_)||(_=N[b][1]),gu(e,_)||(_=C.replace(/_rels\/.*$/,"")+N[b][1]),O=N[b][2]):(_="xl/worksheets/sheet"+(b+1-R)+"."+F,_=_.replace(/sheet0\./,"sheet.")),S=_.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var j=!1,U=0;U!=t.sheets.length;++U)typeof t.sheets[U]=="number"&&t.sheets[U]==b&&(j=1),typeof t.sheets[U]=="string"&&t.sheets[U].toLowerCase()==f.SheetNames[b].toLowerCase()&&(j=1);if(!j)continue e}}Z3e(e,_,S,f.SheetNames[b],b,y,i,O,t,d,l,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:v,Sheets:i,SheetNames:f.SheetNames,Strings:sy,Styles:u,Themes:l,SSF:Va(Dr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(P,X){P=P.replace(/^Root Entry[\/]/,""),g.keys.push(P),g.files[P]=e.FileIndex[X]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=ci(e,cu(a.vba[0]),!0):a.defaults&&a.defaults.bin===bNe&&(g.vbaraw=ci(e,"xl/vbaProject.bin",!0))),g}function tIe(e,t){var r=t||{},n="Workbook",a=Er.find(e,n);try{if(n="/!DataSpaces/Version",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(ISe(a.content),n="/!DataSpaces/DataSpaceMap",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=FSe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=OSe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);RSe(a.content)}catch{}if(n="/EncryptionInfo",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=PSe(a.content);if(n="/EncryptedPackage",a=Er.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function rIe(e,t){return t.bookType=="ods"?lte(e,t):t.bookType=="numbers"?X3e(e,t):t.bookType=="xlsb"?nIe(e,t):aIe(e,t)}function nIe(e,t){yv=1024,e&&!e.SSF&&(e.SSF=Va(Dr)),e&&e.SSF&&(Hx(),pN(e.SSF),t.revssf=vN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,iy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Ree.indexOf(t.bookType)>-1,a=BD();zD(t=t||{});var s=mD(),i="",o=0;if(t.cellXfs=[],Am(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",cn(s,i,JZ(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,wn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,cn(s,i,tee(e.Props)),a.extprops.push(i),ha(t.rels,3,i,wn.EXT_PROPS),e.Custprops!==e.Props&&Ts(e.Custprops||{}).length>0&&(i="docProps/custom.xml",cn(s,i,ree(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,wn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,cn(s,i,FTe(o-1,i,t,e,d)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+o+"."+r,wn.WS[0])}if(f){var p=f["!comments"],g=!1,v="";p&&p.length>0&&(v="xl/comments"+o+"."+r,cn(s,v,RTe(p,v)),a.comments.push(v),ha(d,-1,"../comments"+o+"."+r,wn.CMNT),g=!0),f["!legacy"]&&g&&cn(s,"xl/drawings/vmlDrawing"+o+".vml",Oee(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&cn(s,Ly(i),zv(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,cn(s,i,DTe(t.Strings,i,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,wn.SST)),i="xl/workbook."+r,cn(s,i,jTe(e,i)),a.workbooks.push(i),ha(t.rels,1,i,wn.WB),i="xl/theme/theme1.xml",cn(s,i,DD(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",wn.THEME),i="xl/styles."+r,cn(s,i,OTe(e,i,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,wn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",cn(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",wn.VBA)),i="xl/metadata."+r,cn(s,i,PTe(i)),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,wn.XLMETA),cn(s,"[Content_Types].xml",WZ(a,t)),cn(s,"_rels/.rels",zv(t.rels)),cn(s,"xl/_rels/workbook."+r+".rels",zv(t.wbrels)),delete t.revssf,delete t.ssf,s}function aIe(e,t){yv=1024,e&&!e.SSF&&(e.SSF=Va(Dr)),e&&e.SSF&&(Hx(),pN(e.SSF),t.revssf=vN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,iy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Ree.indexOf(t.bookType)>-1,a=BD();zD(t=t||{});var s=mD(),i="",o=0;if(t.cellXfs=[],Am(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",cn(s,i,JZ(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,wn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,cn(s,i,tee(e.Props)),a.extprops.push(i),ha(t.rels,3,i,wn.EXT_PROPS),e.Custprops!==e.Props&&Ts(e.Custprops||{}).length>0&&(i="docProps/custom.xml",cn(s,i,ree(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,wn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,cn(s,i,Gee(o-1,t,e,f)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+o+"."+r,wn.WS[0])}if(h){var g=h["!comments"],v=!1,b="";if(g&&g.length>0){var y=!1;g.forEach(function(_){_[1].forEach(function(S){S.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,cn(s,b,dNe(g,d,t)),a.threadedcomments.push(b),ha(f,-1,"../threadedComments/threadedComment"+o+"."+r,wn.TCMNT)),b="xl/comments"+o+"."+r,cn(s,b,Dee(g)),a.comments.push(b),ha(f,-1,"../comments"+o+"."+r,wn.CMNT),v=!0}h["!legacy"]&&v&&cn(s,"xl/drawings/vmlDrawing"+o+".vml",Oee(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&cn(s,Ly(i),zv(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,cn(s,i,wee(t.Strings,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,wn.SST)),i="xl/workbook."+r,cn(s,i,Jee(e)),a.workbooks.push(i),ha(t.rels,1,i,wn.WB),i="xl/theme/theme1.xml",cn(s,i,DD(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",wn.THEME),i="xl/styles."+r,cn(s,i,Tee(e,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,wn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",cn(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",wn.VBA)),i="xl/metadata."+r,cn(s,i,Fee()),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,wn.XLMETA),d.length>1&&(i="xl/persons/person.xml",cn(s,i,fNe(d)),a.people.push(i),ha(t.wbrels,-1,"persons/person.xml",wn.PEOPLE)),cn(s,"[Content_Types].xml",WZ(a,t)),cn(s,"_rels/.rels",zv(t.rels)),cn(s,"xl/_rels/workbook."+r+".rels",zv(t.wbrels)),delete t.revssf,delete t.ssf,s}function $D(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Fc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function sIe(e,t){return Er.find(e,"EncryptedPackage")?tIe(e,t):rte(e,t)}function iIe(e,t){var r,n=e,a=t||{};return a.type||(a.type=mn&&Buffer.isBuffer(e)?"buffer":"base64"),r=CZ(n,a),eIe(r,a)}function ute(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Mj(e.slice(r),t);default:break e}return dx.to_workbook(e,t)}function oIe(e,t){var r="",n=$D(e,t);switch(t.type){case"base64":r=Fc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Rp(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=_a(r)),t.type="binary",ute(r,t)}function lIe(e,t){var r=e;return t.type=="base64"&&(r=Fc(r)),r=jy.utils.decode(1200,r.slice(2),"str"),t.type="binary",ute(r,t)}function cIe(e){return e.match(/[^\x00-\x7F]/)?EA(e):e}function KB(e,t,r,n){return n?(r.type="string",dx.to_workbook(e,r)):dx.to_workbook(t,r)}function $y(e,t){uD();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return $y(new Uint8Array(e),(r=Va(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Kv={},r.dateNF&&(Kv.dateNF=r.dateNF),r.type||(r.type=mn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=mn?"buffer":"binary",n=nEe(e),typeof Uint8Array<"u"&&!mn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=cIe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Va(r),r.type="array",$y(dD(n),r)}switch((a=$D(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return sIe(Er.read(n,r),r);break;case 9:if(a[1]<=8)return rte(n,r);break;case 60:return Mj(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return hSe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return bee.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?iIe(n,r):KB(e,n,r,s);case 239:return a[3]===60?Mj(n,r):KB(e,n,r,s);case 255:if(a[1]===254)return lIe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return vp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return vp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Lj.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Nee.to_workbook(n,r);break;case 10:case 13:case 32:return oIe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return fSe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?Lj.to_workbook(n,r):KB(e,n,r,s)}function dte(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Ow(t.file,Er.write(e,{type:mn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Er.write(e,t)}function uIe(e,t){var r=Va(t||{}),n=rIe(e,r);return dIe(n,r)}function dIe(e,t){var r={},n=mn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Er.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(mN(a))}return t.password&&typeof encrypt_agile<"u"?dte(encrypt_agile(a,t.password),t):t.type==="file"?Ow(t.file,a):t.type=="string"?_a(a):a}function AIe(e,t){var r=t||{},n=c3e(e,r);return dte(n,r)}function AA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Fy(EA(n));case"binary":return EA(n);case"string":return e;case"file":return Ow(t.file,n,"utf8");case"buffer":return mn?dh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):AA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function fIe(e,t){switch(t.type){case"base64":return Fy(e);case"binary":return e;case"string":return e;case"file":return Ow(t.file,e,"binary");case"buffer":return mn?dh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function DE(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Fy(r):t.type=="string"?_a(r):r;case"file":return Ow(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Ate(e,t){uD(),sTe(e);var r=Va(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Ate(e,r);return r.type="array",mN(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return AA(r3e(e,r),r);case"slk":case"sylk":return AA(xee.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return AA(ate(e.Sheets[e.SheetNames[a]],r),r);case"txt":return fIe(fte(e.Sheets[e.SheetNames[a]],r),r);case"csv":return AA(GD(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return AA(bee.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return DE(Lj.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return AA(dx.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return AA(Nee.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return AA(yee.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return AA(lte(e,r),r);case"wk1":return DE(vp.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return DE(vp.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),DE(nte(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),AIe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return uIe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function hIe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function KD(e,t,r){var n={};return n.type="file",n.file=t,hIe(n),Ate(e,n)}function mIe(e,t,r,n,a,s,i,o){var l=Ws(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=i?e[r][p]:e[n[p]+l];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[p]!=null&&(h[s[p]]=u);continue}var v=g.v;switch(g.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[p]!=null){if(v==null)if(g.t=="e"&&v===null)h[s[p]]=null;else if(u!==void 0)h[s[p]]=u;else if(d&&v===null)h[s[p]]=null;else continue;else h[s[p]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?v:Jf(g,v,o);v!=null&&(f=!1)}}return{row:h,isempty:f}}function cS(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=Qn(d);break;case"number":l=Qn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(a=0);var f=Ws(l.s.r),h=[],p=[],g=0,v=0,b=Array.isArray(e),y=l.s.r,_=0,S={};b&&!e[y]&&(e[y]=[]);var k=u.skipHidden&&e["!cols"]||[],B=u.skipHidden&&e["!rows"]||[];for(_=l.s.c;_<=l.e.c;++_)if(!(k[_]||{}).hidden)switch(h[_]=as(_),r=b?e[y][_]:e[h[_]+f],n){case 1:s[_]=_-l.s.c;break;case 2:s[_]=h[_];break;case 3:s[_]=u.header[_-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=Jf(r,null,u),v=S[i]||0,!v)S[i]=1;else{do o=i+"_"+v++;while(S[o]);S[i]=v,S[o]=1}s[_]=o}for(y=l.s.r+a;y<=l.e.r;++y)if(!(B[y]||{}).hidden){var F=mIe(e,l,y,h,n,s,b,u);(F.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=F.row)}return p.length=g,p}var XQ=/"/g;function pIe(e,t,r,n,a,s,i,o){for(var l=!0,u=[],d="",f=Ws(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=o.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){l=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:Jf(p,null,o));for(var g=0,v=0;g!==d.length;++g)if((v=d.charCodeAt(g))===a||v===s||v===34||o.forceQuotes){d='"'+d.replace(XQ,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(l=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(XQ,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function GD(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Qn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=as(g));for(var v=0,b=a.s.r;b<=a.e.r;++b)(p[b]||{}).hidden||(d=pIe(e,a,b,f,i,l,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((v++?o:"")+d)));return delete n.dense,r.join("")}function fte(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=GD(e,t);return r}function gIe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Qn(e["!ref"]),s="",i=[],o,l=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=as(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=Ws(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function hte(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=Qn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(v,b){Ts(v).forEach(function(y){(p=h.indexOf(y))==-1&&(h[p=h.length]=y);var _=v[y],S="z",k="",B=Ur({c:o+p,r:i+b+a});u=Ky(s,B),_&&typeof _=="object"&&!(_ instanceof Date)?s[B]=_:(typeof _=="number"?S="n":typeof _=="boolean"?S="b":typeof _=="string"?S="s":_ instanceof Date?(S="d",n.cellDates||(S="n",_=ki(_)),k=n.dateNF||Dr[14]):_===null&&n.nullError&&(S="e",_=0),u?(u.t=S,u.v=_,delete u.w,delete u.R,k&&(u.z=k)):s[B]=u={t:S,v:_},k&&(u.z=k))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=Ws(i);if(a)for(p=0;p<h.length;++p)s[as(p+o)+g]={t:"s",v:h[p]};return s["!ref"]=rn(d),s}function vIe(e,t){return hte(null,e,t)}function Ky(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ss(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Ky(e,Ur(t)):Ky(e,Ur({r:t,c:r||0}))}function xIe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function qD(){return{SheetNames:[],Sheets:{}}}function WD(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Yee(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function bIe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=xIe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function yIe(e,t){return e.z=t,e}function mte(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function wIe(e,t,r){return mte(e,"#"+t,r)}function EIe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function CIe(e,t,r,n){for(var a=typeof t!="string"?t:Qn(t),s=typeof t=="string"?t:rn(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=Ky(e,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return e}var _u={encode_col:as,encode_row:Ws,encode_cell:Ur,encode_range:rn,decode_col:ED,decode_row:wD,split_cell:DEe,decode_cell:ss,decode_range:Xl,format_cell:Jf,sheet_add_aoa:HZ,sheet_add_json:hte,sheet_add_dom:ste,aoa_to_sheet:Vx,json_to_sheet:vIe,table_to_sheet:ite,table_to_book:I3e,sheet_to_csv:GD,sheet_to_txt:fte,sheet_to_json:cS,sheet_to_html:ate,sheet_to_formulae:gIe,sheet_to_row_object_array:cS,sheet_get_cell:Ky,book_new:qD,book_append_sheet:WD,book_set_sheet_visibility:bIe,cell_set_number_format:yIe,cell_set_hyperlink:mte,cell_set_internal_link:wIe,cell_add_comment:EIe,sheet_set_array_formula:CIe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const _Ie=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const l of r)try{const u=Ut(Rr,l),d=await qs(u),f=d.size;n+=f,s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:f});let h=0;d.docs.forEach(p=>{const g=p.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${l}:`,u),s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Ut(Rr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=nr(l,Ln("timestamp",">=",u.toISOString()),Kr("timestamp","desc")),f=await qs(d),h={};f.docs.forEach(p=>{const g=p.data(),v=new Date(g.timestamp).toLocaleDateString("es-CL");h[v]=(h[v]||0)+1}),Object.entries(h).sort(([p],[g])=>new Date(p).getTime()-new Date(g).getTime()).forEach(([p,g])=>{i.push({label:p,value:g})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},YQ=500,zg=({title:e,value:t,description:r,alert:n})=>c.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),GB=({title:e,data:t,colorClass:r})=>{const n=I.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},SIe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(!0),[a,s]=I.useState(null),[i,o]=I.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});I.useEffect(()=>{n(!0);const f=gye(g=>{t(g),n(!1)}),h=async()=>{try{const g=await _Ie();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const p=setInterval(h,300*1e3);return()=>{f(),clearInterval(p)}},[]);const{stats:l,userStats:u,moduleStats:d}=I.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),v={today:0,week:0,month:0},b={},y={};e.forEach(k=>{const B=new Date(k.timestamp).getTime();B>=h&&v.today++,B>=p&&v.week++,B>=g&&v.month++;const F=k.userEmail||"Desconocido";b[F]||(b[F]={email:F,today:0,month:0,total:0}),b[F].total++,B>=h&&b[F].today++,B>=g&&b[F].month++,y[k.module]=(y[k.module]||0)+1});const _=Object.values(b).sort((k,B)=>B.total-k.total),S=Object.entries(y).map(([k,B])=>({label:k,value:B})).sort((k,B)=>B.value-k.value);return{stats:v,userStats:_,moduleStats:S}},[e]);return c.jsxs("div",{className:"space-y-8",children:[a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(zg,{title:"Llamadas Hoy",value:r?"--":l.today,description:`Límite recomendado: ${YQ}`,alert:l.today>YQ}),c.jsx(zg,{title:"Llamadas esta Semana",value:r?"--":l.week}),c.jsx(zg,{title:"Llamadas este Mes",value:r?"--":l.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(GB,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(zg,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(zg,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(zg,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(GB,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(GB,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NIe="type.googleapis.com/google.protobuf.Int64Value",kIe="type.googleapis.com/google.protobuf.UInt64Value";function pte(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function uS(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>uS(t));if(typeof e=="function"||typeof e=="object")return pte(e,t=>uS(t));throw new Error("Data cannot be encoded in JSON: "+e)}function fx(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case NIe:case kIe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>fx(t)):typeof e=="function"||typeof e=="object"?pte(e,t=>fx(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JQ={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $l extends _d{constructor(t,r,n){super(`${XD}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,$l.prototype)}}function BIe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function dS(e,t){let r=BIe(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!JQ[i])return new $l("internal","internal");r=JQ[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=fx(a))}}catch{}return r==="ok"?null:new $l(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TIe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Cc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="us-central1",IIe=/^data: (.*?)(?:\n|$)/;function jIe(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new $l("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class FIe{constructor(t,r,n,a,s=Hj,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new TIe(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Hj}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function OIe(e,t,r){const n=ch(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(I5(e.emulatorOrigin),j5("Functions",!0))}function DIe(e,t,r){const n=a=>PIe(e,t,a,{});return n.stream=(a,s)=>MIe(e,t,a,s),n}async function RIe(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function gte(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function PIe(e,t,r,n){const a=e._url(t);return LIe(e,a,r,n)}async function LIe(e,t,r,n){r=uS(r);const a={data:r},s=await gte(e,n),i=n.timeout||7e4,o=jIe(i),l=await Promise.race([RIe(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!l)throw new $l("cancelled","Firebase Functions instance was deleted.");const u=dS(l.status,l.json);if(u)throw u;if(!l.json)throw new $l("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new $l("internal","Response is missing data field.");return{data:fx(d)}}function MIe(e,t,r,n){const a=e._url(t);return UIe(e,a,r,n||{})}async function UIe(e,t,r,n){var h;r=uS(r);const a={data:r},s=await gte(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const v=new $l("cancelled","Request was cancelled.");return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}const g=dS(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let o,l;const u=new Promise((p,g)=>{o=p,l=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const p=new $l("cancelled","Request was cancelled.");l(p)});const d=i.body.getReader(),f=QIe(d,o,l,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:g,done:v}=await p.read();return{value:g,done:v}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function QIe(e,t,r,n){const a=(i,o)=>{const l=i.match(IIe);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){t(fx(d.result));return}if("message"in d){o.enqueue(fx(d.message));return}if("error"in d){const f=dS(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof $l){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(n!=null&&n.aborted){const u=new $l("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new $l("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return l()}catch(u){const d=u instanceof $l?u:dS(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const ZQ="@firebase/functions",eH="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HIe="auth-internal",VIe="app-check-internal",zIe="messaging-internal";function $Ie(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(HIe),i=r.getProvider(zIe),o=r.getProvider(VIe);return new FIe(a,s,i,o,n)};V0(new Kf(XD,t,"PUBLIC").setMultipleInstances(!0)),Tu(ZQ,eH,e),Tu(ZQ,eH,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(e=F5(),t=Hj){const n=pw(va(e),XD).getImmediate({identifier:t}),a=U6("functions");return a&&KIe(n,...a),n}function KIe(e,t,r){OIe(va(e),t,r)}function $g(e,t,r){return DIe(va(e),t)}$Ie();const tH=Ut(Rr,"usuarios");async function vte(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",tH);const e=await qs(tH);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const rH=Object.values(er),qB=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",GIe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(!1),[a,s]=I.useState("Usuarios"),[i,o]=I.useState({nombreCompleto:"",email:"",rut:"",profile:er.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=I.useState(null),[d,f]=I.useState(""),[h,p]=I.useState(""),[g,v]=I.useState(""),[b,y]=I.useState(null),[_,S]=I.useState(null),[k,B]=I.useState(null),F=I.useCallback(async()=>{n(!0);try{const H=await vte();t(H)}catch(H){console.error("Error al cargar usuarios",H),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);I.useEffect(()=>{F()},[F]);const w=I.useCallback(H=>{const{name:V,value:q}=H.target;o(ne=>({...ne,[V]:q,curso:V==="profile"&&q!==er.ESTUDIANTE?"":ne.curso,cursos:V==="profile"&&q!==er.PROFESORADO?[]:ne.cursos,asignaturas:V==="profile"&&q!==er.PROFESORADO?[]:ne.asignaturas}))},[]),C=I.useCallback((H,V)=>{o(q=>{const ne=q[H]||[],L=ne.includes(V)?ne.filter(W=>W!==V):[...ne,V];return{...q,[H]:L}})},[]),N=I.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:er.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),R=I.useCallback(async H=>{H.preventDefault(),y(null);const{nombreCompleto:V,email:q,profile:ne,curso:L,password:W}=i;if(!V.trim()||!q.trim()){y("Nombre Completo y Email son obligatorios.");return}if(ne===er.ESTUDIANTE&&!L){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(W!=null&&W.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const J=eb();try{if(l){const te=$g(J,"updateUser"),ie={...i,password:(W==null?void 0:W.trim())||void 0,curso:ne===er.ESTUDIANTE?qB(L||""):void 0};await te(ie)}else{const te=$g(J,"createUser"),ie={...i,curso:ne===er.ESTUDIANTE?qB(L||""):void 0};await te(ie)}await F(),N()}catch(te){console.error("Error al guardar usuario:",te),y(te.message||"Error al guardar el usuario.")}},[i,l,F,N]),O=I.useCallback(H=>{u(H.email),o({nombreCompleto:H.nombreCompleto,email:H.email,rut:H.rut||"",profile:H.profile,password:"",curso:H.curso||"",cursos:H.cursos||[],asignaturas:H.asignaturas||[]}),setTimeout(()=>{const V=document.querySelector("form");V&&V.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),j=I.useCallback(async H=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${H}? Esta acción es irreversible.`))try{const V=eb();await $g(V,"deleteUser")({email:H}),await F()}catch(V){console.error("Error al eliminar usuario:",V),y(V.message||"No se pudo borrar el usuario.")}},[F]),U=async H=>{var W;const V=(W=H.target.files)==null?void 0:W[0];if(!V)return;S({message:"Procesando archivo...",isError:!1});const q=eb(),ne=$g(q,"createUser"),L=new FileReader;L.onload=async J=>{var te;try{const ie=new Uint8Array((te=J.target)==null?void 0:te.result),Ae=$y(ie,{type:"array"}),oe=Ae.Sheets[Ae.SheetNames[0]],ce=_u.sheet_to_json(oe);if(ce.length===0){S({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ge=ce.map(_e=>{const he=_e.Nombre||_e.nombre,Ie=_e.Correo||_e.correo||_e.Email||_e.email,He=_e.Curso||_e.curso,Xe=_e.RUT||_e.rut;return!he||!Ie||!He?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ne({nombreCompleto:String(he).trim(),email:String(Ie).trim(),profile:er.ESTUDIANTE,curso:qB(String(He).trim()),rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),je=await Promise.all(ge),re=je.filter(_e=>!_e.error).length,Se=je.filter(_e=>_e.error);let De=`Carga completada. ${re} estudiantes agregados.`;Se.length>0&&(De+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),S({message:De,isError:Se.length>0}),await F()}catch(ie){S({message:`Error: ${ie.message}`,isError:!0})}},L.readAsArrayBuffer(V),H.target.value=""},P=async H=>{var W;const V=(W=H.target.files)==null?void 0:W[0];if(!V)return;B({message:"Procesando archivo...",isError:!1});const q=eb(),ne=$g(q,"createUser"),L=new FileReader;L.onload=async J=>{var te;try{const ie=new Uint8Array((te=J.target)==null?void 0:te.result),Ae=$y(ie,{type:"array"}),oe=Ae.Sheets[Ae.SheetNames[0]],ce=_u.sheet_to_json(oe);if(ce.length===0){B({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ge=ce.map(_e=>{const he=_e.Nombre||_e.nombre,Ie=_e.Correo||_e.correo||_e.Email||_e.email,He=_e.Perfil||_e.perfil||_e.Profile||_e.profile,Xe=_e.RUT||_e.rut;return!he||!Ie||!He?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ne({nombreCompleto:String(he).trim(),email:String(Ie).trim(),profile:He,rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),je=await Promise.all(ge),re=je.filter(_e=>!_e.error).length,Se=je.filter(_e=>_e.error);let De=`Carga completada. ${re} usuarios agregados.`;Se.length>0&&(De+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),B({message:De,isError:Se.length>0}),await F()}catch(ie){B({message:`Error: ${ie.message}`,isError:!0})}},L.readAsArrayBuffer(V),H.target.value=""},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=I.useMemo(()=>Array.from(new Set(e.filter(H=>H.profile===er.ESTUDIANTE&&H.curso).map(H=>H.curso))).sort(),[e]),Z=I.useMemo(()=>e.filter(H=>(d===""||H.nombreCompleto.toLowerCase().includes(d.toLowerCase())||H.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||H.profile===h)&&(g===""||H.curso===g)),[e,d,h,g]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),c.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:U,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),_&&c.jsx("p",{className:`text-sm mt-2 ${_.isError?"text-red-600":"text-green-600"}`,children:_.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:P,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),k&&c.jsx("p",{className:`text-sm mt-2 ${k.isError?"text-red-600":"text-green-600"}`,children:k.message})]})]})]}),c.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:R,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:w,className:X,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:w,className:X,required:!0,readOnly:!!l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:w,placeholder:l?"Dejar en blanco para no cambiar":"Contraseña temporal",className:X})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:w,placeholder:"12.345.678-9",className:X})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:w,className:X,required:!0,children:rH.map(H=>c.jsx("option",{value:H,children:H},H))})]}),i.profile===er.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:w,className:X,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),_s.map(H=>c.jsx("option",{value:H,children:H},H))]})]})]}),i.profile===er.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:_s.map(H=>{var V;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[c.jsx("input",{type:"checkbox",checked:((V=i.cursos)==null?void 0:V.includes(H))||!1,onChange:()=>C("cursos",H),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:H})]},H)})})]}),i.profile===er.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:qi.map(H=>{var V;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[c.jsx("input",{type:"checkbox",checked:((V=i.asignaturas)==null?void 0:V.includes(H))||!1,onChange:()=>C("asignaturas",H),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:H})]},H)})})]}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&c.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const H=eb(),q=await $g(H,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",q),y("✅ Custom claim agregado exitosamente")}catch(H){console.error("❌ Error al agregar custom claim:",H),y(`Error: ${H.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),c.jsx("button",{type:"button",onClick:async()=>{var H,V,q,ne,L;try{const{auth:W}=await K_(async()=>{const{auth:ie}=await Promise.resolve().then(()=>Vve);return{auth:ie}},void 0);console.log("🔍 Usuario actual:",(H=W.currentUser)==null?void 0:H.email);const J=await((V=W.currentUser)==null?void 0:V.getIdToken(!0));console.log("🔑 Token refreshed:",!!J);const te=await((q=W.currentUser)==null?void 0:q.getIdTokenResult());console.log("📋 Claims completos:",te==null?void 0:te.claims),console.log("👤 Profile claim:",(ne=te==null?void 0:te.claims)==null?void 0:ne.profile),((L=te==null?void 0:te.claims)==null?void 0:L.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(W){console.error("❌ Error verificando token:",W),y(`Error verificando token: ${W.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:H=>f(H.target.value),className:X})}),c.jsx("div",{children:c.jsxs("select",{value:h,onChange:H=>p(H.target.value),className:X,children:[c.jsx("option",{value:"",children:"Todos los perfiles"}),rH.map(H=>c.jsx("option",{value:H,children:H},H))]})}),c.jsx("div",{children:c.jsxs("select",{value:g,onChange:H=>v(H.target.value),className:X,children:[c.jsx("option",{value:"",children:"Todos los cursos"}),K.map(H=>c.jsx("option",{value:H,children:H},H))]})})]}),r?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(H=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:H.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:H.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${H.profile===er.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":H.profile===er.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:H.profile})}),c.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[H.profile===er.ESTUDIANTE&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:H.curso||"Sin curso"}),H.profile===er.PROFESORADO&&c.jsxs("div",{className:"space-y-1",children:[H.cursos&&H.cursos.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[H.cursos.slice(0,3).map(V=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:V},V)),H.cursos.length>3&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",H.cursos.length-3]})]})]}),H.asignaturas&&H.asignaturas.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[H.asignaturas.slice(0,2).map(V=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:V},V)),H.asignaturas.length>2&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",H.asignaturas.length-2]})]})]}),(!H.cursos||H.cursos.length===0)&&(!H.asignaturas||H.asignaturas.length===0)&&c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),H.profile!==er.ESTUDIANTE&&H.profile!==er.PROFESORADO&&c.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>O(H),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>j(H.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},H.email))})]}),Z.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&c.jsx(SIe,{})]})},hx="seguimiento_dual_records",qIe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},WIe=e=>{const t=nr(Ut(Ft,hx),Kr("nombreEstudiante","asc"));return wr(t,n=>{const a=n.docs.map(s=>qIe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},AS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=yr.fromDate(new Date(t[n]+"T00:00:00")))}),t},XIe=async e=>{try{const t=AS(e);return(await ea(Ut(Ft,hx),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},nH=async(e,t)=>{try{const r=pr(Ft,hx,e),n=AS(t);await xo(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},YIe=async e=>{try{const t=pr(Ft,hx,e);await Ys(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},JIe=async e=>{const t=MO(Ft),r=Ut(Ft,hx);let n=0,a=0;for(const s of e){const i=nr(r,Ln("rutEstudiante","==",s.rutEstudiante)),o=await qs(i);if(o.empty){const l=pr(r);t.set(l,AS(s)),a++}else{const l=o.docs[0].id,u=pr(Ft,hx,l);t.set(u,AS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},ZIe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},eje=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},tje=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},rje=({record:e,onSave:t,onClose:r})=>{const[n,a]=I.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:f,checked:h}=l.target;a(p=>({...p,[u]:f==="checkbox"?h:d}))},o=()=>{t(n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),c.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),c.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),c.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},nje=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(!0),a=I.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:hp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:xB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=I.useState(a),[o,l]=I.useState(null),[u,d]=I.useState(""),[f,h]=I.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,g]=I.useState(null),[v,b]=I.useState(null),[y,_]=I.useState(!1),[S,k]=I.useState(null);I.useEffect(()=>{n(!0);const H=WIe(V=>{t(V),n(!1)});return()=>H()},[]);const B=I.useCallback(H=>{const{name:V,value:q}=H.target;i(ne=>({...ne,[V]:q}))},[]),F=I.useCallback(H=>{const{name:V,value:q}=H.target;h(ne=>({...ne,[V]:q}))},[]),w=I.useCallback(()=>{i(a),l(null),g(null)},[a]),C=async H=>{H.preventDefault(),g(null);const q=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ne=>{var L;return!((L=s[ne])!=null&&L.trim())});if(q){g(`El campo '${q}' es obligatorio.`);return}try{o?await nH(o,s):await XIe(s),w()}catch(ne){console.error(ne),g("No se pudo guardar el registro.")}},N=I.useCallback(H=>{window.scrollTo({top:0,behavior:"smooth"}),l(H.id),i(H)},[]),R=async H=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await YIe(H)}catch(V){console.error(V),g("No se pudo eliminar el registro.")}},O=H=>{k(H),_(!0)},j=()=>{k(null),_(!1)},U=async H=>{try{await nH(H.id,H),j()}catch(V){console.error(V),alert("No se pudieron guardar los cambios de supervisión.")}},P=()=>{const H=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],V=_u.aoa_to_sheet([H]),q=_u.book_new();_u.book_append_sheet(q,V,"Plantilla"),KD(q,"Plantilla_Seguimiento_Dual.xlsx")},X=H=>{var ne;const V=(ne=H.target.files)==null?void 0:ne[0];if(!V)return;b({message:"Procesando archivo...",isError:!1});const q=new FileReader;q.onload=async L=>{var W;try{const J=new Uint8Array((W=L.target)==null?void 0:W.result),te=$y(J,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ie=te.SheetNames[0],Ae=te.Sheets[ie],oe=_u.sheet_to_json(Ae,{raw:!1,dateNF:"yyyy-mm-dd"});if(oe.length===0)throw new Error("El archivo está vacío.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ge=Object.keys(oe[0]).map(De=>De.trim().toLowerCase()),re=["nombre","rut","curso 2025","empresa","estado"].find(De=>!ge.includes(De));if(re)throw new Error(`Falta la columna requerida: '${re}'`);const Se=oe.map((De,_e)=>{try{const he={};for(const Ie in De){const He=ce[Ie.trim().toLowerCase()];if(He){let Xe=De[Ie];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(He)?(Xe=eje(Xe),Xe&&(he[He]=Xe)):He.includes("realizada")?he[He]=tje(Xe):Xe!=null&&Xe!==""&&(he[He]=String(Xe).trim())}}return!he.nombreEstudiante||!he.rutEstudiante?(console.warn(`Fila ${_e+2}: Faltan campos requeridos`),null):he}catch(he){return console.error(`Error procesando fila ${_e+2}:`,he),null}}).filter(De=>De!==null);if(console.log("Registros procesados:",Se),Se.length>0){const{updated:De,created:_e}=await JIe(Se);b({message:`Carga exitosa. ${_e} registros creados, ${De} actualizados.`,isError:!1})}else b({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(J){console.error("Error completo:",J),b({message:`Error al procesar el archivo: ${J.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},q.readAsArrayBuffer(V)},K="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Z=I.useMemo(()=>e.filter(H=>(u===""||H.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||H.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||H.rutEstudiante.includes(u))&&(f.curso===""||H.curso===f.curso)&&(f.empresa===""||H.nombreEmpresa===f.empresa)&&(f.estado===""||H.estado===f.estado)&&(f.comuna===""||H.comuna===f.comuna)&&(f.profesor===""||H.profesorTutorEmpresa===f.profesor)).sort((H,V)=>H.nombreEstudiante.localeCompare(V.nombreEstudiante)),[e,u,f]);return I.useMemo(()=>{const H=new Set,V=new Set;return e.forEach(q=>{q.nombreEmpresa&&H.add(q.nombreEmpresa),q.comuna&&V.add(q.comuna)}),{empresas:Array.from(H).sort(),comunas:Array.from(V).sort()}},[e]),r?c.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:B,className:K,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:B,className:K,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:s.curso,onChange:B,className:K,required:!0,children:hp.map(H=>c.jsx("option",{value:H,children:H},H))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:B,className:K,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),Aj.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:B,className:K,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:B,className:K})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:B,className:K})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:B,className:K})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:s.estado,onChange:B,className:K,children:xB.map(H=>c.jsx("option",{value:H,children:H},H))})]})]}),s.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:B,className:`${K} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:B,className:`${K} border-red-300`})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&c.jsx("button",{type:"button",onClick:w,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:P,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:X,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),v&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${v.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:v.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:H=>d(H.target.value),className:`${K} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:f.curso,onChange:F,className:K,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),hp.map(H=>c.jsx("option",{children:H},H))]}),c.jsxs("select",{name:"estado",value:f.estado,onChange:F,className:K,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),xB.map(H=>c.jsx("option",{children:H},H))]}),c.jsxs("select",{name:"profesor",value:f.profesor,onChange:F,className:K,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),Aj.map(H=>c.jsx("option",{children:H},H))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(H=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:H.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:H.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:H.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:H.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ZIe[H.estado]}`,children:H.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>O(H),className:"text-blue-600 hover:underline",children:"Supervisión"}),c.jsx("button",{onClick:()=>N(H),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>R(H.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},H.id))})]})})]}),y&&S&&c.jsx(rje,{record:S,onClose:j,onSave:U})]})},xte="actividades_remotas",bte="respuestas_actividades",yte="pruebas_estandarizadas",aje="usuarios",wte=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},YD=e=>{const t=wte(e);return t?t.toISOString():void 0},fS=e=>{const t=wte(e);return t?t.toISOString().split("T")[0]:void 0},Ete=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:yr.fromDate(t)},Cte=e=>yr.fromDate(new Date(e||new Date().toISOString())),sje=e=>!!e&&/^data:/.test(e),Gy=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(Gy);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=Gy(n))}),t},ije=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const o=typeof Buffer<"u"?Buffer:null;if(o)a=o.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=a.charCodeAt(o);return{bytes:i,contentType:r}},oje=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:YD(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:fS(t.plazoEntrega)||fS(new Date)}},lje=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:YD(t.fechaCompletado)||new Date().toISOString()}},cje=e=>{const t=e.data()||{};return{id:e.id,...t}},uje=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:YD(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:fS(t.plazoEntrega)||fS(new Date)}},dje=e=>{const t=nr(Ut(Ft,xte),Kr("fechaCreacion","desc"));return wr(t,r=>e(r.docs.map(oje)),r=>{console.error("subscribeToActividades error:",r),e([])})},Aje=(e,t)=>{const r=Ut(Ft,bte),n=nr(r,Kr("fechaCompletado","desc"));return wr(n,a=>e(a.docs.map(lje)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},fje=e=>{const t=nr(Ut(Ft,aje),Kr("nombreCompleto","asc"));return wr(t,r=>e(r.docs.map(cje)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},hje=e=>{const t=nr(Ut(Ft,yte),Kr("fechaCreacion","desc"));return wr(t,r=>e(r.docs.map(uje)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},mje=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Gy({...a,fechaCreacion:Cte(r),plazoEntrega:Ete(n)});return(await ea(Ut(Ft,xte),s)).id},pje=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Gy({...a,fechaCreacion:Cte(r),plazoEntrega:Ete(n)});return(await ea(Ut(Ft,yte),s)).id},gje=async(e,t)=>{const r=Gy(t);await cm(pr(Ft,bte,e),r)},vje=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},xje=async(e,t,r)=>{const{bytes:n,contentType:a}=ije(e),s=Date.now(),i=t.replace(/\s+/g,"_"),o=`recursos/${r}/${s}/${i}`,l=GO(R1e,o);await $O(l,n,{contentType:a});const u=await KO(l);return{nombre:t,url:u}},bje=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,o)=>{if(sje(i==null?void 0:i.url)){const l=(i==null?void 0:i.nombre)||`archivo_${o}.bin`;return xje(i.url,l,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${o}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return mje(a)},WB=e=>e?new Date(e).toLocaleDateString("es-CL"):"",yje=e=>e?new Date(e).toLocaleString("es-CL"):"",wje=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),Wa=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},li=(e,t)=>{if(t&&Wa(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>li(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Pl=(e,t,...r)=>{if(Wa(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=li(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},La=({content:e,context:t="unknown"})=>{try{const r=li(e,`UltraSafeRenderer-${t}`);return c.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),c.jsx("span",{children:"[Error al mostrar contenido]"})}},XB={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},YB=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],Eje=()=>{const[e,t]=I.useState([]),[r,n]=I.useState([]),[a,s]=I.useState([]),[i,o]=I.useState([]),[l,u]=I.useState(null),[d,f]=I.useState(null),[h,p]=I.useState(!1),[g,v]=I.useState(!1),[b,y]=I.useState(!1),[_,S]=I.useState(!1),[k,B]=I.useState(!1),[F,w]=I.useState(!0),[C,N]=I.useState(null),[R,O]=I.useState(""),[j,U]=I.useState(null),[P,X]=I.useState(null),[K,Z]=I.useState([]),[H,V]=I.useState("actividades"),[q,ne]=I.useState(null),[L,W]=I.useState([]),[J,te]=I.useState(""),ie={asignatura:qi[0],nivel:xv[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[Ae,oe]=I.useState(ie),ce={asignatura:qi[0],nivel:xv[0],contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ge,je]=I.useState(ce);I.useEffect(()=>{w(!0);const vt=dje(t),pt=hje(n),Je=Aje(s),gt=fje(dt=>{o(dt),w(!1)});return()=>{vt(),pt(),Je(),gt()}},[]);const re=vt=>{oe(pt=>({...pt,[vt.target.name]:vt.target.value}))},Se=vt=>{je(pt=>({...pt,[vt.target.name]:vt.target.value}))},De=vt=>{oe(pt=>({...pt,recursos:{...pt.recursos,[vt.target.name]:vt.target.value}}))},_e=vt=>{vt.target.files&&Z(Array.from(vt.target.files))},he=vt=>{oe(pt=>{const Je=pt.tipos.includes(vt)?pt.tipos.filter(dt=>dt!==vt):[...pt.tipos,vt],gt={...pt.cantidadPreguntas};return Je.includes(vt)?gt[vt]||(gt[vt]=XB[vt][0]):delete gt[vt],{...pt,tipos:Je,cantidadPreguntas:gt}})},Ie=(vt,pt)=>{oe(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[vt]:pt}}))},He=(vt,pt=!1)=>{(pt?je:oe)(gt=>{const dt=gt.cursosDestino||[],Dt=dt.includes(vt)?dt.filter(zt=>zt!==vt):[...dt,vt];return{...gt,cursosDestino:Dt}})},Xe=(vt,pt=!1)=>{(pt?je:oe)(gt=>{const dt=gt.estudiantesDestino||[],Dt=dt.includes(vt)?dt.filter(zt=>zt!==vt):[...dt,vt];return{...gt,estudiantesDestino:Dt}})},ye=()=>{const{tipos:vt,contenido:pt,asignatura:Je,nivel:gt,cantidadPreguntas:dt}=Ae;let Dt=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${pt}"
Asignatura: ${Je}
Nivel: ${gt}

Genera los siguientes elementos:
- introduccion: breve y motivadora
- actividades: objeto con propiedades por tipo:
`;return vt.forEach(zt=>{const Pr=dt[zt]||XB[zt][0];switch(zt){case"Quiz":Dt+=`- "Quiz": Array de ${Pr} objetos { pregunta, opciones[4], respuestaCorrecta, puntaje(1) }
`;break;case"Comprensión de Lectura":Dt+=`- "Comprensión de Lectura": Objeto { texto(150-200 palabras), preguntas: Array de ${Pr} { pregunta, opciones[4], respuestaCorrecta, puntaje } }
`;break;case"Términos Pareados":Dt+=`- "Términos Pareados": Array de ${Pr} { concepto, definicion }
`;break;case"Desarrollo":Dt+=`- "Desarrollo": Array de ${Pr} { pregunta, rubrica }
`;break}}),Dt},Oe=()=>{const{contenido:vt,objetivosAprendizaje:pt,asignatura:Je,nivel:gt}=ge;return`Eres experto en evaluación educativa y diseño de pruebas SIMCE.
Responde SOLO con JSON válido.

INFORMACIÓN:
- Asignatura: ${Je}
- Nivel: ${gt}
- Contenido: ${vt}
- Objetivos: ${pt}

{
  "titulo": "Título",
  "instrucciones": "Instrucciones",
  "textos": [
    {
      "id": 1,
      "titulo": "Título del texto",
      "contenido": "200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado",
      "opciones": ["Opción A", "Opción B", "Opción C", "Opción D"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar información",
      "justificacion": "Breve explicación",
      "textoId": 1
    }
  ]
}

Reglas:
- ${Je==="Lenguaje y Comunicación"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas 1..30
- 4 opciones por pregunta (A-D)
- Habilidades válidas: ${YB.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios fuera del JSON`};function Pe(vt,pt){if(console.log(`🔍 Adaptando contenido para ${vt}:`,pt),Wa(pt,`autoAdaptContent-${vt}`),vt==="Desarrollo"&&Array.isArray(pt))return pt.map((Je,gt)=>{if(Wa(Je,`desarrollo-item-${gt}`),typeof Je=="string"){const dt=Je.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return dt?{pregunta:Pl(dt[1],`desarrollo-pregunta-${gt}`),rubrica:Pl(dt[2],`desarrollo-rubrica-${gt}`)}:{pregunta:Pl(Je,`desarrollo-pregunta-simple-${gt}`),rubrica:""}}if(Je&&typeof Je=="object"){const dt=Pl(Je,`desarrollo-obj-pregunta-${gt}`,"pregunta","Pregunta","texto");let Dt="";if(Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica){const zt=Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica;Dt=li(zt,`desarrollo-rubrica-${gt}`)}return{pregunta:dt,rubrica:Dt}}return{pregunta:li(Je,`desarrollo-fallback-${gt}`),rubrica:""}});if(vt==="Términos Pareados"&&Array.isArray(pt))return pt.map((Je,gt)=>{if(Wa(Je,`pareados-item-${gt}`),typeof Je=="string"){const dt=Je.match(/^(.+?)[\s:-–]+(.+)$/);return dt?{id:gt,concepto:Pl(dt[1],`pareados-concepto-${gt}`),definicion:Pl(dt[2],`pareados-definicion-${gt}`)}:{id:gt,concepto:Pl(Je,`pareados-concepto-simple-${gt}`),definicion:""}}return Je&&typeof Je=="object"?{id:gt,concepto:Pl(Je,`pareados-obj-concepto-${gt}`,"concepto","termino"),definicion:Pl(Je,`pareados-obj-definicion-${gt}`,"definicion","significado")}:{id:gt,concepto:li(Je,`pareados-fallback-${gt}`),definicion:""}});if(vt==="Comprensión de Lectura"){if(Wa(pt,"comprension-lectura-input"),pt&&typeof pt=="object"&&!Array.isArray(pt)&&Array.isArray(pt.preguntas))return{texto:Pl(pt,"comprension-texto","texto"),preguntas:pt.preguntas.map((Je,gt)=>(Wa(Je,`comprension-pregunta-${gt}`),{pregunta:Pl(Je,`comprension-pregunta-${gt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map((dt,Dt)=>li(dt,`comprension-opcion-${gt}-${Dt}`)):[],respuestaCorrecta:li(Je.respuestaCorrecta,`comprension-respuesta-${gt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(pt)){const Je=pt.map((dt,Dt)=>Pl(dt,`comprension-bloque-${Dt}`,"texto")).join(`

---

`),gt=pt.flatMap((dt,Dt)=>(Wa(dt,`comprension-bloque-preguntas-${Dt}`),Array.isArray(dt.preguntas)?dt.preguntas:[]));return{texto:Je,preguntas:gt.map((dt,Dt)=>(Wa(dt,`comprension-combined-pregunta-${Dt}`),{pregunta:Pl(dt,`comprension-combined-pregunta-${Dt}`,"pregunta"),opciones:Array.isArray(dt.opciones)?dt.opciones.map((zt,Pr)=>li(zt,`comprension-combined-opcion-${Dt}-${Pr}`)):[],respuestaCorrecta:li(dt.respuestaCorrecta,`comprension-combined-respuesta-${Dt}`),puntaje:typeof dt.puntaje=="number"?dt.puntaje:1}))}}}return vt==="Quiz"&&Array.isArray(pt)?pt.map((Je,gt)=>(Wa(Je,`quiz-item-${gt}`),{pregunta:Pl(Je,`quiz-pregunta-${gt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map((dt,Dt)=>li(dt,`quiz-opcion-${gt}-${Dt}`)):[],respuestaCorrecta:li(Je.respuestaCorrecta,`quiz-respuesta-${gt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):pt}const qe=async vt=>{var pt;if(vt.preventDefault(),!Ae.contenido.trim()||Ae.tipos.length===0){N("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),N(null);try{const Je=await Promise.all(K.map(async cr=>({nombre:cr.name,url:await wje(cr)}))),gt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Dt=new os(gt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),zt=ye();let pn=await(await(await Dt.generateContent(zt)).response).text();pn=pn.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const gn=pn.match(/\{[\s\S]*\}/);if(!gn)throw new Error("La IA no devolvió JSON válido.");const $t=JSON.parse(gn[0]);console.log("🔍 Datos generados por IA:",$t),Wa($t,"generated-data");const tn={};for(const cr of Ae.tipos){const Yr=(pt=$t.actividades)==null?void 0:pt[cr];console.log(`🔍 Contenido crudo para ${cr}:`,Yr),Wa(Yr,`raw-content-${cr}`),tn[cr]=Pe(cr,Yr),console.log(`🔍 Contenido adaptado para ${cr}:`,tn[cr]),Wa(tn[cr],`adapted-content-${cr}`)}const en={id:"",fechaCreacion:new Date().toISOString(),...Ae,recursos:{...Ae.recursos,archivos:Je},introduccion:li($t.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",generatedContent:tn};console.log("🔍 Actividad final:",en),Wa(en,"new-actividad"),U(en)}catch(Je){N(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},Ze=async vt=>{if(vt.preventDefault(),!ge.contenido.trim()||!ge.objetivosAprendizaje.trim()){N("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),N(null);try{const pt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",gt=new os(pt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),dt=Oe();let Pr=await(await(await gt.generateContent(dt)).response).text();Pr=Pr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Xr=Pr.match(/\{[\s\S]*\}/);if(!Xr)throw new Error("No se encontró JSON válido en la respuesta.");const pn=Xr[0].replace(/,(\s*[}\]])/g,"$1"),gn=JSON.parse(pn);if(!gn.preguntas||!Array.isArray(gn.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const $t=(gn.textos||[]).map((cr,Yr)=>({id:cr.id||Yr+1,titulo:li(cr.titulo,`texto-titulo-${Yr}`)||`Texto ${Yr+1}`,contenido:li(cr.contenido,`texto-contenido-${Yr}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(cr.tipo)?cr.tipo:"informativo",palabras:cr.palabras||(cr.contenido?String(cr.contenido).split(" ").length:0)})),tn=gn.preguntas.slice(0,30).map((cr,Yr)=>({numero:cr.numero||Yr+1,pregunta:li(cr.pregunta,`pregunta-${Yr}`)||`Pregunta ${Yr+1}`,opciones:Array.isArray(cr.opciones)&&cr.opciones.length>=4?cr.opciones.slice(0,4).map((ta,fe)=>li(ta,`pregunta-opcion-${Yr}-${fe}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(cr.respuestaCorrecta)?cr.respuestaCorrecta:"A",habilidad:YB.includes(cr.habilidad)?cr.habilidad:YB[0],justificacion:li(cr.justificacion,`justificacion-${Yr}`)||"Justificación no disponible",...cr.textoId&&typeof cr.textoId=="number"?{textoId:cr.textoId}:{}})),en={id:"",fechaCreacion:new Date().toISOString(),...ge,titulo:li(gn.titulo,"prueba-titulo")||`Prueba ${ge.asignatura}`,instrucciones:li(gn.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:$t,preguntas:tn};X(en)}catch(pt){N(`Error al generar la prueba: ${(pt==null?void 0:pt.message)||pt}`)}finally{y(!1)}},ot=async()=>{if(j)try{S(!0),await bje(j),oe(ie),Z([]),p(!1),U(null)}catch(vt){console.error("Error al guardar la actividad con archivos:",vt),N("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{S(!1)}},mt=async()=>{if(P)try{S(!0);const vt={...P,cursosDestino:P.cursosDestino||[],estudiantesDestino:P.estudiantesDestino||[],textos:P.textos||[],preguntas:P.preguntas.map(pt=>({...pt,textoId:pt.textoId||null}))};await pje(vt),je(ce),v(!1),X(null)}catch(vt){console.error("Error al guardar la prueba:",vt),N("No se pudo guardar la prueba.")}finally{S(!1)}},Bt=I.useMemo(()=>{var Je,gt,dt,Dt;const vt=l||d;if(!vt||!i.length)return[];const pt=new Map;if(!((Je=vt.cursosDestino)!=null&&Je.length)&&!((gt=vt.estudiantesDestino)!=null&&gt.length)){const zt=vt.nivel.charAt(0);i.filter(Pr=>{var Xr;return Pr.profile===er.ESTUDIANTE&&((Xr=Pr.curso)==null?void 0:Xr.startsWith(zt))}).forEach(Pr=>pt.set(Pr.id,Pr))}else(dt=vt.cursosDestino)!=null&&dt.length&&i.filter(zt=>zt.profile===er.ESTUDIANTE&&vt.cursosDestino.includes(zt.curso||"")).forEach(zt=>pt.set(zt.id,zt)),(Dt=vt.estudiantesDestino)!=null&&Dt.length&&i.filter(zt=>zt.profile===er.ESTUDIANTE&&vt.estudiantesDestino.includes(zt.nombreCompleto)).forEach(zt=>pt.set(zt.id,zt));return Array.from(pt.values()).sort((zt,Pr)=>zt.nombreCompleto.localeCompare(Pr.nombreCompleto))},[l,d,i]),Lt=I.useMemo(()=>{const vt=(l==null?void 0:l.id)||(d==null?void 0:d.id);return a.filter(pt=>pt.actividadId===vt)},[a,l,d]),Ot=I.useMemo(()=>i.filter(vt=>vt.profile===er.ESTUDIANTE).sort((vt,pt)=>vt.nombreCompleto.localeCompare(pt.nombreCompleto)),[i]),Qt=I.useMemo(()=>R.trim()?Ot.filter(vt=>vt.nombreCompleto.toLowerCase().includes(R.toLowerCase())):Ot,[Ot,R]),bt=()=>c.jsxs("div",{className:"flex space-x-1 mb-6",children:[c.jsx("button",{onClick:()=>V("actividades"),className:`px-4 py-2 rounded-lg font-semibold ${H==="actividades"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>V("pruebas"),className:`px-4 py-2 rounded-lg font-semibold ${H==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Pruebas Estandarizadas"})]}),Nr=()=>{var vt,pt,Je;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l?c.jsxs(c.Fragment,{children:[c.jsx(La,{content:l.asignatura,context:"actividad-asignatura"})," - ",l.tipos.join(", ")]}):c.jsx(La,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",(l==null?void 0:l.nivel)||(d==null?void 0:d.nivel)," | Plazo:"," ",WB((l==null?void 0:l.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),c.jsx("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((vt=l==null?void 0:l.tipos)==null?void 0:vt.includes("Desarrollo"))&&c.jsx("th",{className:"px-4 py-3"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Bt.map(gt=>{var Dt;const dt=Lt.find(zt=>zt.estudianteId===gt.id);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:gt.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:dt?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:dt?`${dt.puntaje}/${dt.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:dt?c.jsx("span",{className:parseFloat(dt.nota)>=4?"text-green-600":"text-red-600",children:dt.nota}):"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:dt?yje(dt.fechaCompletado):"-"}),((Dt=l==null?void 0:l.tipos)==null?void 0:Dt.includes("Desarrollo"))&&c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:dt?c.jsx("button",{onClick:()=>{var Pr,Xr,pn;ne(dt);const zt=Array.from({length:((Xr=(Pr=l.generatedContent)==null?void 0:Pr.Desarrollo)==null?void 0:Xr.length)||0},(gn,$t)=>({index:$t,puntaje:0,observacion:""}));W(zt),te(((pn=dt==null?void 0:dt.revisionDocente)==null?void 0:pn.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):c.jsx("span",{className:"text-slate-400",children:"-"})})]},gt.id)})})]})})]}),q&&((pt=l==null?void 0:l.tipos)==null?void 0:pt.includes("Desarrollo"))&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(q==null?void 0:q.estudianteNombre)||""]}),c.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=l.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((gt,dt)=>{var Dt,zt;return console.log(`🔍 Renderizando item desarrollo ${dt}:`,gt),Wa(gt,`revision-item-${dt}`),c.jsxs("div",{className:"p-3 border rounded-lg",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(La,{content:gt.pregunta,context:`revision-pregunta-${dt}`})]}),gt.rubrica&&c.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[c.jsx("strong",{children:"Rúbrica:"})," ",c.jsx(La,{content:gt.rubrica,context:`revision-rubrica-${dt}`})]}),c.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[c.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),c.jsx("input",{type:"number",min:0,step:.5,value:((Dt=L[dt])==null?void 0:Dt.puntaje)??0,onChange:Pr=>{const Xr=Number(Pr.target.value)||0;W(pn=>{const gn=[...pn];return gn[dt]={...gn[dt]||{index:dt,puntaje:0},puntaje:Xr},gn})},className:"w-24 border-slate-300 rounded-md"}),c.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((zt=L[dt])==null?void 0:zt.observacion)||"",onChange:Pr=>{const Xr=Pr.target.value;W(pn=>{const gn=[...pn];return gn[dt]={...gn[dt]||{index:dt,puntaje:0},observacion:Xr},gn})},className:"flex-1 border-slate-300 rounded-md"})]})]},dt)})}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{rows:3,value:J,onChange:gt=>te(gt.target.value),className:"w-full border-slate-300 rounded-md"})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>{ne(null),W([]),te("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:async()=>{if(q)try{B(!0);const gt=Number(q.puntaje)||0,dt=Number(q.puntajeMaximo)||0,Dt=(L||[]).reduce((Xr,pn)=>Xr+(Number(pn.puntaje)||0),0),zt=gt+Dt,Pr=vje(zt,dt);await gje(q.id,{puntaje:zt,puntajeMaximo:dt,nota:Pr,revisionDocente:{completada:!0,observacionesGenerales:J||"",detalle:L||[],puntajeDocente:Dt}}),ne(null),W([]),te("")}catch(gt){console.error("Error guardando revisión:",gt),N("No se pudo guardar la revisión del docente.")}finally{B(!1)}},disabled:k,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:k?"Guardando...":"Guardar Revisión"})]})]})})]})},tr=()=>{var vt,pt;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),c.jsxs("form",{onSubmit:qe,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:Ae.asignatura,onChange:re,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(Je=>c.jsx("option",{value:Je,children:Je},Je))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:Ae.nivel,onChange:re,className:"w-full border-slate-300 rounded-md shadow-sm",children:xv.map(Je=>c.jsx("option",{value:Je,children:Je},Je))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),c.jsx("textarea",{name:"instrucciones",value:(vt=Ae.recursos)==null?void 0:vt.instrucciones,onChange:De,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),c.jsx("textarea",{name:"enlaces",value:(pt=Ae.recursos)==null?void 0:pt.enlaces,onChange:De,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),c.jsx("input",{type:"file",multiple:!0,onChange:_e,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Si no seleccionas nada, será visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:_s.map(Je=>{var gt;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(gt=Ae.cursosDestino)==null?void 0:gt.includes(Je),onChange:()=>He(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:Je})]},Je)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:R,onChange:Je=>O(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Qt.map(Je=>{var gt;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(gt=Ae.estudiantesDestino)==null?void 0:gt.includes(Je.nombreCompleto),onChange:()=>Xe(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:Axe.map(Je=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Ae.tipos.includes(Je),onChange:()=>he(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),Ae.tipos.includes(Je)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),XB[Je].map(gt=>c.jsx("button",{type:"button",onClick:()=>Ie(Je,gt),className:`px-3 py-1 rounded-full font-semibold text-xs ${Ae.cantidadPreguntas[Je]===gt?"bg-amber-500 text-white":"bg-slate-200"}`,children:gt},gt))]})]},Je))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:Ae.contenido,onChange:re,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:Ae.plazoEntrega,onChange:re,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),C&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:C}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:b?"Generando...":"Generar y Previsualizar"})})]})]})},nn=()=>{var vt;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(La,{content:j==null?void 0:j.introduccion,context:"preview-introduccion"})})]}),(j==null?void 0:j.recursos)&&(j.recursos.instrucciones||j.recursos.enlaces||((vt=j.recursos.archivos)==null?void 0:vt.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[j.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(La,{content:j.recursos.instrucciones,context:"preview-instrucciones"})}),j.recursos.enlaces&&c.jsx("div",{children:j.recursos.enlaces.split(`
`).map((pt,Je)=>pt.trim()&&c.jsx("a",{href:pt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:pt},Je))}),j.recursos.archivos&&j.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:j.recursos.archivos.map(pt=>c.jsx("li",{className:"text-slate-700",children:pt.nombre},pt.nombre))})]})]}),j==null?void 0:j.tipos.map(pt=>{const Je=j.generatedContent[pt];return console.log(`🔍 Renderizando preview para ${pt}:`,Je),Wa(Je,`preview-${pt}`),Je?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:pt}),c.jsxs("div",{className:"space-y-4 text-sm",children:[pt==="Quiz"&&Array.isArray(Je)&&Je.map((gt,dt)=>(Wa(gt,`preview-quiz-${dt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(La,{content:gt.pregunta,context:`preview-quiz-pregunta-${dt}`})]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:gt.opciones.map((Dt,zt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",c.jsx(La,{content:Dt,context:`preview-quiz-opcion-${dt}-${zt}`})]},zt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",c.jsx(La,{content:gt.respuestaCorrecta,context:`preview-quiz-respuesta-${dt}`})]})]},dt))),pt==="Comprensión de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:c.jsx(La,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((gt,dt)=>(Wa(gt,`preview-lectura-pregunta-${dt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(La,{content:gt.pregunta,context:`preview-lectura-pregunta-${dt}`})]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:gt.opciones.map((Dt,zt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",c.jsx(La,{content:Dt,context:`preview-lectura-opcion-${dt}-${zt}`})]},zt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",c.jsx(La,{content:gt.respuestaCorrecta,context:`preview-lectura-respuesta-${dt}`})]})]},dt)))]}),pt==="Términos Pareados"&&Array.isArray(Je)&&c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border border-slate-200",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),c.jsx("tbody",{children:Je.map((gt,dt)=>(Wa(gt,`preview-pareado-${dt}`),c.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[c.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:c.jsx(La,{content:gt.concepto,context:`preview-pareado-concepto-${dt}`})}),c.jsx("td",{className:"p-2 align-top text-slate-700",children:c.jsx(La,{content:gt.definicion,context:`preview-pareado-definicion-${dt}`})})]},gt.id)))})]})}),pt==="Desarrollo"&&Array.isArray(Je)&&Je.map((gt,dt)=>(console.log(`🔍 Renderizando desarrollo ${dt}:`,gt),Wa(gt,`preview-desarrollo-${dt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[dt+1,". ",c.jsx(La,{content:gt.pregunta,context:`preview-desarrollo-pregunta-${dt}`})]}),c.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[c.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",c.jsx(La,{content:gt.rubrica,context:`preview-desarrollo-rubrica-${dt}`})]})]},dt))),(pt==="Quiz"||pt==="Términos Pareados"||pt==="Desarrollo")&&!Array.isArray(Je)&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:["El contenido para ",c.jsx("strong",{children:pt})," no tiene el formato esperado."]}),pt==="Comprensión de Lectura"&&(!Je||typeof Je!="object"||!Array.isArray(Je.preguntas))&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:["El contenido de ",c.jsx("strong",{children:"Comprensión de Lectura"})," no tiene el formato esperado."]})]})]},pt):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>U(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:ot,disabled:_,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:_?"Guardando...":"Confirmar y Asignar"})]})]})},Cr=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>p(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(vt=>{var gt,dt;Wa(vt,`lista-actividad-${vt.id}`);const pt=[];(gt=vt.cursosDestino)!=null&&gt.length&&pt.push(`Cursos: ${vt.cursosDestino.join(", ")}`),(dt=vt.estudiantesDestino)!=null&&dt.length&&pt.push(`Estudiantes: ${vt.estudiantesDestino.length}`);const Je=pt.length?pt.join(" | "):`Todo ${vt.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[c.jsx(La,{content:vt.asignatura,context:`lista-asignatura-${vt.id}`})," — ",vt.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",WB(vt.fechaCreacion)]})]}),c.jsx("button",{onClick:()=>u(vt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},vt.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),Vr=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),c.jsx("button",{onClick:()=>v(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:Ze,className:"space-y-6 mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:ge.asignatura,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(vt=>c.jsx("option",{value:vt,children:vt},vt))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:ge.nivel,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:xv.map(vt=>c.jsx("option",{value:vt,children:vt},vt))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),c.jsx("textarea",{name:"objetivosAprendizaje",value:ge.objetivosAprendizaje,onChange:Se,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),c.jsx("textarea",{name:"contenido",value:ge.contenido,onChange:Se,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:ge.plazoEntrega,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),C&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:C}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400",children:b?"Generando...":"Generar y Previsualizar"})})]})]}),In=()=>{var vt,pt;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),c.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:c.jsx(La,{content:P==null?void 0:P.titulo,context:"preview-prueba-titulo"})}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(La,{content:P==null?void 0:P.instrucciones,context:"preview-prueba-instrucciones"})})]}),(vt=P==null?void 0:P.textos)!=null&&vt.length?c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),c.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:P.textos.map((Je,gt)=>(Wa(Je,`preview-texto-${gt}`),c.jsxs("li",{children:[c.jsxs("p",{className:"font-semibold",children:[c.jsx(La,{content:Je.titulo,context:`preview-texto-titulo-${gt}`}),c.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),c.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:c.jsx(La,{content:Je.contenido,context:`preview-texto-contenido-${gt}`})})]},Je.id)))})]}):null,(pt=P==null?void 0:P.preguntas)!=null&&pt.length?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),P.preguntas.slice(0,10).map((Je,gt)=>(Wa(Je,`preview-pregunta-${gt}`),c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",c.jsx(La,{content:Je.pregunta,context:`preview-pregunta-texto-${gt}`})]}),c.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((dt,Dt)=>c.jsx("li",{children:c.jsx(La,{content:dt,context:`preview-pregunta-opcion-${gt}-${Dt}`})},Dt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero)))]}):null]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>X(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:mt,disabled:_,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:_?"Guardando...":"Confirmar y Asignar"})]})]})},jr=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),c.jsx("button",{onClick:()=>v(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:r.length>0?r.map(vt=>(Wa(vt,`lista-prueba-${vt.id}`),c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800",children:c.jsx(La,{content:vt.titulo,context:`lista-prueba-titulo-${vt.id}`})}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Nivel: ",vt.nivel," | Creado: ",WB(vt.fechaCreacion)]})]}),c.jsx("button",{onClick:()=>f(vt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},vt.id))):c.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return F?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"animate-fade-in",children:[bt(),P?In():j?nn():l||d?Nr():H==="pruebas"?g?Vr():jr():h?tr():Cr()]})},Cje="actividades_remotas",_te="respuestas_actividades",Ste=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},aH=e=>{const t=Ste(e);return t?t.toISOString():void 0},_je=e=>{const t=Ste(e);return t?t.toISOString().split("T")[0]:void 0},Nte=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:aH(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:_je(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:aH(t.fechaCompletado)||t.fechaCompletado}},Sje=(e,t)=>{const r=nr(Ut(Ft,Cje),Kr("fechaCreacion","desc"));return wr(r,a=>{const i=a.docs.map(o=>Nte(o)).filter(o=>{var l,u,d,f,h;if(!((l=o.cursosDestino)!=null&&l.length)&&!((u=o.estudiantesDestino)!=null&&u.length)){const p=o.nivel.charAt(0);return(d=e.curso)==null?void 0:d.startsWith(p)}return!!((f=o.cursosDestino)!=null&&f.includes(e.curso||"")||(h=o.estudiantesDestino)!=null&&h.includes(e.nombreCompleto))});t(i)},a=>{console.error("Error al suscribirse a las actividades disponibles:",a),t([])})},Nje=(e,t)=>{const r=nr(Ut(Ft,_te),Ln("estudianteId","==",e),Kr("fechaCompletado","desc"));return wr(r,a=>{const s=a.docs.map(i=>Nte(i));t(s)},a=>{console.error("Error al suscribirse a las respuestas del estudiante:",a),t([])})},sH=async e=>{try{const t={...e,fechaCompletado:yr.fromDate(new Date(e.fechaCompletado))};return(await ea(Ut(Ft,_te),t)).id}catch(t){throw console.error("Error al guardar la respuesta de actividad:",t),new Error("No se pudo guardar la respuesta de la actividad.")}},kje=.6,Bje=(e,t,r=kje,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},Vj=({className:e="w-5 h-5"})=>c.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ea=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},zs=(e,t)=>{if(t&&Ea(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>zs(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},xd=(e,t,...r)=>{if(Ea(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=zs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=zs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},di=({content:e,context:t="unknown"})=>{try{const r=zs(e,`UltraSafeRenderer-${t}`);return c.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),c.jsx("span",{children:"[Error al mostrar contenido]"})}};function iH(e){if(console.log("🔍 Normalizando lectura:",e),Ea(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{Ea(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>zs(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:xd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:zs(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:xd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>xd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(Ea(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function oH(e){return console.log("🔍 Normalizando pareados:",e),Ea(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(Ea(t,`pareado-${r}`),{izquierda:xd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:xd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(Ea(t,`pareado-array-${r}`),{izquierda:xd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:xd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function lH(e){return console.log("🔍 Normalizando desarrollo:",e),Ea(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(Ea(t,`desarrollo-pregunta-${r}`),{enunciado:xd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(Ea(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:xd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const Tje=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=I.useState({}),[s,i]=I.useState(!1),o=`progress-${r.id}-${e.id}`;I.useEffect(()=>{try{const d=localStorage.getItem(o);d&&a(JSON.parse(d))}catch(d){console.error("Error loading saved progress:",d)}},[o]);const l=(d,f)=>{const h={...n,[d]:f};a(h);try{localStorage.setItem(o,JSON.stringify(h))}catch(p){console.error("Error saving progress:",p)}},u=async()=>{i(!0);let d=0,f=0;const h={items:[]};e.tipos.forEach(g=>{const v=e.generatedContent[g],b=n[g];if(console.log(`🔍 Procesando tipo: ${g}`,v),Ea(v,`handleSubmit-${g}`),!!v){if((g==="Quiz"||g==="Comprensión de Lectura")&&(g==="Quiz"?Array.isArray(v)?v.map((_,S)=>(Ea(_,`quiz-question-${S}`),{pregunta:xd(_,`quiz-pregunta-${S}`,"pregunta"),opciones:Array.isArray(_==null?void 0:_.opciones)?_.opciones.map((k,B)=>zs(k,`quiz-opcion-${S}-${B}`)):[],respuestaCorrecta:zs(_==null?void 0:_.respuestaCorrecta,`quiz-respuesta-${S}`),puntaje:typeof(_==null?void 0:_.puntaje)=="number"?_.puntaje:1})):[]:iH(v).preguntas).forEach((_,S)=>{const k=b==null?void 0:b[S],B=k===_.respuestaCorrecta,F=_.puntaje??1;B&&(d+=F),f+=F,h.items.push({pregunta:_.pregunta,respuestaUsuario:zs(k,`feedback-respuesta-${S}`)||"No respondida",respuestaCorrecta:_.respuestaCorrecta,esCorrecta:B,puntajeObtenido:B?F:0,tipo:g})}),g==="Términos Pareados"){const y=oH(v),_=b||{};y.forEach((S,k)=>{const B=_[k],F=B===S.derecha,w=S.puntaje??1;F&&(d+=w),f+=w,h.items.push({pregunta:`${S.izquierda} → ¿?`,respuestaUsuario:zs(B,`pareado-feedback-${k}`)||"No respondida",respuestaCorrecta:S.derecha,esCorrecta:F,puntajeObtenido:F?w:0,tipo:g})})}if(g==="Desarrollo"){const y=lH(v),_=b||{};y.forEach((S,k)=>{const B=zs(_[k],`desarrollo-feedback-${k}`).trim();h.items.push({pregunta:S.enunciado,respuestaUsuario:B||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:g})})}}});const p={puntaje:d,puntajeMaximo:f,respuestas:n,nota:Bje(d,f),requiereRevisionDocente:e.tipos.includes("Desarrollo")};try{localStorage.removeItem(o)}catch(g){console.error("Error removing progress:",g)}t(p,h)};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:c.jsx(di,{content:e.asignatura,context:"actividad-asignatura"})}),c.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:c.jsx(di,{content:e.introduccion,context:"actividad-introduccion"})})]}),e.tipos.map(d=>{const f=e.generatedContent[d];if(console.log(`🔍 Renderizando tipo: ${d}`,f),Ea(f,`render-${d}`),!f)return null;switch(d){case"Quiz":{const h=Array.isArray(f)?f.map((p,g)=>(Ea(p,`render-quiz-question-${g}`),{pregunta:xd(p,`render-quiz-pregunta-${g}`,"pregunta"),opciones:Array.isArray(p==null?void 0:p.opciones)?p.opciones.map((v,b)=>zs(v,`render-quiz-opcion-${g}-${b}`)):[],respuestaCorrecta:zs(p==null?void 0:p.respuestaCorrecta,`render-quiz-respuesta-${g}`),puntaje:typeof(p==null?void 0:p.puntaje)=="number"?p.puntaje:1})):[];return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),c.jsx("div",{className:"space-y-6",children:h.map((p,g)=>c.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",c.jsx(di,{content:p.pregunta,context:`quiz-pregunta-${g}`})]}),c.jsx("div",{className:"mt-2 space-y-2",children:p.opciones.map((v,b)=>{var y;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[c.jsx("input",{type:"radio",name:`q-${d}-${g}`,value:v,checked:((y=n[d])==null?void 0:y[g])===v,onChange:()=>l(d,{...n[d]||{},[g]:v}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{children:c.jsx(di,{content:v,context:`quiz-opcion-${g}-${b}`})})]},b)})})]},g))})]},d)}case"Comprensión de Lectura":{const h=iH(f);return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),c.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:c.jsx(di,{content:h.texto,context:"lectura-texto"})}),c.jsx("div",{className:"space-y-6",children:h.preguntas.map((p,g)=>c.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",c.jsx(di,{content:p.pregunta,context:`lectura-pregunta-${g}`})]}),c.jsx("div",{className:"mt-2 space-y-2",children:p.opciones.map((v,b)=>{var y;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[c.jsx("input",{type:"radio",name:`q-${d}-${g}`,value:v,checked:((y=n[d])==null?void 0:y[g])===v,onChange:()=>l(d,{...n[d]||{},[g]:v}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{children:c.jsx(di,{content:v,context:`lectura-opcion-${g}-${b}`})})]},b)})})]},g))})]},d)}case"Términos Pareados":{const h=oH(f),p=n[d]||{},g=[...new Set(h.map(v=>v.derecha))];for(let v=g.length-1;v>0;v--){const b=Math.floor(Math.random()*(v+1));[g[v],g[b]]=[g[b],g[v]]}return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:h.map((v,b)=>c.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[c.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[b+1,". ",c.jsx(di,{content:v.izquierda,context:`pareado-izq-${b}`})]}),c.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:p[b]??"",onChange:y=>l(d,{...p,[b]:y.target.value}),children:[c.jsx("option",{value:"",children:"— Selecciona la pareja —"}),g.map((y,_)=>c.jsx("option",{value:y,children:zs(y,`pareado-opcion-${b}-${_}`)},_))]})]},`${v.izquierda}-${b}`))})]},d)}case"Desarrollo":{const h=lH(f),p=n[d]||{};return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),c.jsx("div",{className:"space-y-6",children:h.map((g,v)=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[v+1,". ",c.jsx(di,{content:g.enunciado,context:`desarrollo-enunciado-${v}`})]}),c.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:p[v]??"",onChange:b=>l(d,{...p,[v]:b.target.value})})]},v))}),c.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},d)}default:return null}}),c.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:c.jsxs("button",{onClick:u,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?c.jsx(Vj,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},Ije=({currentUser:e})=>{var C,N;const[t,r]=I.useState(!0),[n,a]=I.useState("list"),[s,i]=I.useState(!1),[o,l]=I.useState([]),[u,d]=I.useState([]),[f,h]=I.useState(null),[p,g]=I.useState(null),[v,b]=I.useState(null);I.useEffect(()=>{let R=!1,O=!1;const j=()=>{R&&O&&r(!1)},U=Sje(e,X=>{console.log("🔍 Actividades cargadas:",X),X.forEach((K,Z)=>Ea(K,`actividad-${Z}`)),l(X),R=!0,j()}),P=Nje(e.id,X=>{console.log("🔍 Respuestas cargadas:",X),X.forEach((K,Z)=>Ea(K,`respuesta-${Z}`)),d(X),O=!0,j()});return()=>{U(),P()}},[e]);const y=R=>{console.log("🔍 Iniciando actividad:",R),Ea(R,"handleStartActivity"),h(R),a("activity")},_=R=>{console.log("🔍 Viendo resultado:",R),Ea(R,"handleViewResult");const O=o.find(j=>j.id===R.actividadId);O?(h(O),g(R),a("result")):b("No se pudieron cargar los detalles de esta actividad completada.")},S=(R,O)=>{const j=O.items.filter(K=>K.esCorrecta===!1),U=O.items.filter(K=>K.tipo==="Desarrollo"),P=j.map(K=>`- Pregunta: "${zs(K.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${zs(K.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${zs(K.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),X=U.map(K=>`- Pregunta abierta: "${zs(K.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${zs(K.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${zs(R.asignatura,"feedback-prompt-asignatura")}" sobre "${zs(R.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${P||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${X||"- Sin preguntas de desarrollo."}
`.trim()},k=I.useCallback(async(R,O)=>{if(!f)return;console.log("🔍 Completando actividad:",R,O),Ea(R,"handleCompleteActivity-submission"),Ea(O,"handleCompleteActivity-feedback"),a("result"),i(!0);const j={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...R,retroalimentacionDetallada:O};g({id:"",...j});try{const U="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",X=new os(U).getGenerativeModel({model:"gemini-1.5-flash-latest"}),K=S(f,O);let V=(await(await X.generateContent(K)).response).text().trim();V=V.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const q=V.match(/\{[\s\S]*\}$/);let ne;try{ne=JSON.parse(q?q[0]:V),console.log("🔍 Feedback AI generado:",ne),Ea(ne,"handleCompleteActivity-feedbackAI")}catch{ne={logros:"¡Buen trabajo! Recibimos tus respuestas y pronto tendrás retroalimentación detallada.",desafios:[],comentariosDesarrollo:[]}}const L={...j,retroalimentacionAI:ne};await sH(L),g({id:"",...L})}catch(U){console.error("Error al generar feedback con IA o guardar:",U),await sH(j),b("No se pudo generar el resumen de la IA, pero tus resultados fueron guardados.")}finally{i(!1)}},[f,e.id]),B=I.useMemo(()=>new Set(u.map(R=>R.actividadId)),[u]),F=I.useMemo(()=>o.filter(R=>!B.has(R.id)),[o,B]),w=I.useMemo(()=>u.map(R=>{const O=o.find(j=>j.id===R.actividadId);return{...R,asignatura:(O==null?void 0:O.asignatura)||"Desconocida",tipos:(O==null?void 0:O.tipos)||[]}}).sort((R,O)=>new Date(O.fechaCompletado).getTime()-new Date(R.fechaCompletado).getTime()),[u,o]);return t?c.jsxs("div",{className:"flex justify-center items-center h-64",children:[c.jsx(Vj,{className:"w-8 h-8 text-slate-500"}),c.jsx("span",{className:"ml-3 text-slate-500",children:"Cargando actividades..."})]}):n==="activity"&&f?c.jsx(Tje,{actividad:f,onComplete:k,currentUser:e}):n==="result"&&p?(console.log("🔍 Renderizando resultado:",p),Ea(p,"render-result"),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),c.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",c.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[p.puntaje," / ",p.puntajeMaximo]})]}),c.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",c.jsx("span",{className:`font-bold text-2xl ${parseFloat(p.nota)>=4?"text-green-600":"text-red-600"}`,children:p.nota})]})]}),s&&c.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center",children:[c.jsx(Vj,{className:"w-8 h-8 text-blue-500"}),c.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Analizando tus respuestas para darte un resumen..."})]}),p.retroalimentacionAI&&!s&&c.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4",children:[c.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),c.jsx("p",{className:"text-slate-700 mt-1",children:c.jsx(di,{content:p.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((C=p.retroalimentacionAI.desafios)==null?void 0:C.length)>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Principales Desafíos"}),c.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.desafios.map((R,O)=>(Ea(R,`feedback-desafio-${O}`),c.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:['En la pregunta: "',c.jsx(di,{content:R.pregunta,context:`feedback-desafio-pregunta-${O}`}),'"']}),c.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:c.jsx(di,{content:R.explicacionDelError,context:`feedback-desafio-explicacion-${O}`})})]},O)))})]}),((N=p.retroalimentacionAI.comentariosDesarrollo)==null?void 0:N.length)>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Comentarios sobre tus respuestas de desarrollo"}),c.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.comentariosDesarrollo.map((R,O)=>(Ea(R,`feedback-desarrollo-${O}`),c.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:['"',c.jsx(di,{content:R.pregunta,context:`feedback-desarrollo-pregunta-${O}`}),'"']}),c.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:c.jsx(di,{content:R.retroalimentacionBreve,context:`feedback-desarrollo-retro-${O}`})})]},O)))})]})]}),p.retroalimentacionDetallada&&c.jsxs("div",{className:"space-y-4 mt-6",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-700 mb-4",children:"Revisión Detallada"}),p.retroalimentacionDetallada.items.map((R,O)=>{Ea(R,`feedback-item-${O}`);const j=R.esCorrecta===null,U=j?"border-slate-400 bg-slate-50":R.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",P=j?"🕓":R.esCorrecta?"✅":"❌";return c.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${U}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[O+1,". ",c.jsx(di,{content:R.pregunta,context:`feedback-item-pregunta-${O}`})]}),c.jsx("span",{className:"font-bold text-lg",children:P})]}),c.jsxs("div",{className:"mt-2 text-sm pl-4",children:[c.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",c.jsx("span",{className:"font-medium",children:c.jsx(di,{content:R.respuestaUsuario,context:`feedback-item-respuesta-${O}`})})]}),!j&&!R.esCorrecta&&c.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",c.jsx("span",{className:"font-medium text-green-700",children:c.jsx(di,{content:R.respuestaCorrecta,context:`feedback-item-correcta-${O}`})})]}),j&&c.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},O)})]}),c.jsx("button",{onClick:()=>{a("list"),h(null),g(null)},className:"mt-8 w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a la Lista de Actividades"})]})):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),v&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:v}),c.jsx("div",{className:"space-y-4",children:F.length>0?F.map(R=>(Ea(R,`render-actividad-pendiente-${R.id}`),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[c.jsx(di,{content:R.asignatura,context:`actividad-asignatura-${R.id}`})," - ",R.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",c.jsx(di,{content:typeof R.plazoEntrega=="string"?R.plazoEntrega:"",context:`actividad-plazo-${R.id}`})]})]}),c.jsx("button",{onClick:()=>y(R),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto",children:"Comenzar"})]},R.id))):c.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),c.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades que ya completaste."}),c.jsx("div",{className:"space-y-4",children:u.length>0?w.map(R=>(Ea(R,`render-actividad-completada-${R.id}`),c.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[c.jsx(di,{content:R.asignatura,context:`completada-asignatura-${R.id}`})," - ",R.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(R.fechaCompletado).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",c.jsx("span",{className:`font-bold text-lg ${parseFloat(R.nota)>=4?"text-green-600":"text-red-600"}`,children:R.nota})]}),c.jsx("button",{onClick:()=>_(R),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto",children:"Ver Resultados"})]})]},R.id))):c.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📚"}),c.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),c.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},CN="estudiantes_inclusion",jje="usuarios",kte=e=>{const t=e.data();return{id:e.id,...t}},Fje=e=>{const t=nr(Ut(Ft,CN));return wr(t,n=>{const a=n.docs.map(s=>kte(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},Oje=e=>{const t=nr(Ut(Ft,jje));return wr(t,n=>{const a=n.docs.map(s=>kte(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},Dje=async e=>{try{return(await ea(Ut(Ft,CN),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},Rje=async(e,t)=>{try{const{id:r,...n}=t,a=pr(Ft,CN,e);await xo(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},Pje=async e=>{try{const t=pr(Ft,CN,e);await Ys(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},Lje=({estudiantes:e})=>{const t=I.useMemo(()=>{const o=e.reduce((l,u)=>(l[u.curso]=(l[u.curso]||0)+1,l),{});return Object.entries(o).map(([l,u])=>({curso:l,cantidad:u})).sort((l,u)=>l.curso.localeCompare(u.curso))},[e]),r=I.useMemo(()=>{const o=e.reduce((l,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return l[d]=(l[d]||0)+1,l},{});return Object.entries(o).map(([l,u])=>({nivel:l,cantidad:u})).sort((l,u)=>l.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(l.nivel)-parseInt(u.nivel))},[e]),n=I.useMemo(()=>{const o=e.reduce((l,u)=>(l[u.dificultad]=(l[u.dificultad]||0)+1,l),{});return Object.entries(o).map(([l,u])=>({diagnostico:l,cantidad:u})).sort((l,u)=>u.cantidad-l.cantidad)},[e]),a=I.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),l=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:l}},[e]),s=I.useMemo(()=>e.reduce((o,l)=>o+(l.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),c.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),c.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),c.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),c.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),c.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),c.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,"°"]}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),c.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]})]})]})},cH=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=I.useState(""),[a,s]=I.useState(""),[i,o]=I.useState(!1),l=I.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),p=a===""||f.curso===a;return h&&p}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=I.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),c.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),c.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>c.jsx("option",{value:f,children:f},f))]})]})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),c.jsxs("span",{children:["Resultados filtrados: ",l.length]})]}),c.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${l.length} estudiantes disponibles`}),i&&c.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:l.length===0?c.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):c.jsx("div",{className:"divide-y dark:divide-slate-600",children:l.map(f=>c.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),c.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&l.length===1&&c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[c.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),c.jsxs("button",{onClick:()=>d(l[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",l[0].nombreCompleto]})]})]})]})},Mje=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=I.useState($_[0]),s=()=>r(e,n);return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:$_.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},Uje=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=I.useState("intervenciones"),[o,l]=I.useState(e);I.useEffect(()=>l(e),[e]);const[u,d]=I.useState(null),f={responsable:"",accion:"",observaciones:""},[h,p]=I.useState(f),[g,v]=I.useState({trimestre:"T1",meta:""}),[b,y]=I.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[_,S]=I.useState(null),[k,B]=I.useState(!1),F={motivo:"",acuerdos:"",asistentes:""},[w,C]=I.useState(F),N=()=>{r(o),t()},R=async()=>{var _e;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let re,Se=!1;u?re=(o.intervenciones||[]).map(he=>he.id===u.id?{...he,...h}:he):(Se=!0,re=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...o.intervenciones||[]]);const De=re.sort((he,Ie)=>new Date(Ie.fecha).getTime()-new Date(he.fecha).getTime());if(l(he=>({...he,intervenciones:De})),Se)try{await k1e({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(_e=a?a(h.responsable):void 0)==null?void 0:_e.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${o.nombre}. Acción: ${h.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(he){console.error("Error al crear notificación:",he),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}p(f),d(null)},O=re=>{d(re),p({responsable:re.responsable,accion:re.accion,observaciones:re.observaciones})},j=re=>{window.confirm("¿Eliminar esta intervención?")&&l(Se=>({...Se,intervenciones:(Se.intervenciones||[]).filter(De=>De.id!==re)}))},U=re=>{const{name:Se,value:De}=re.target;l(_e=>({..._e,[Se]:De,fechaActualizacionApoyos:new Date().toISOString()}))},P=()=>{if(!g.meta.trim())return;const re={...g,id:crypto.randomUUID(),cumplida:!1};l(Se=>({...Se,metasProgreso:[...Se.metasProgreso||[],re]})),v({trimestre:"T1",meta:""})},X=re=>{l(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).map(De=>De.id===re?{...De,cumplida:!De.cumplida}:De)}))},K=re=>{l(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).filter(De=>De.id!==re)}))},Z=I.useMemo(()=>{const re=o.metasProgreso||[];if(re.length===0)return{percent:0,color:"bg-slate-300"};const Se=re.filter(he=>he.cumplida).length,De=Math.round(Se/re.length*100),_e=De<40?"bg-red-500":De<75?"bg-yellow-500":"bg-green-500";return{percent:De,color:_e}},[o.metasProgreso]),H=I.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const re=new Date(o.fechaActualizacionApoyos),Se=new Date;return Se.setMonth(Se.getMonth()-3),re<Se},[o.fechaActualizacionApoyos]),V=()=>{if(!b.titulo.trim()||!b.fecha)return;const re={...b,id:crypto.randomUUID(),resuelta:!1};l(Se=>({...Se,alertas:[...Se.alertas||[],re].sort((De,_e)=>new Date(De.fecha).getTime()-new Date(_e.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},q=re=>{l(Se=>({...Se,alertas:(Se.alertas||[]).map(De=>De.id===re?{...De,resuelta:!De.resuelta}:De)}))},ne=re=>{l(Se=>({...Se,alertas:(Se.alertas||[]).filter(De=>De.id!==re)}))},L=re=>{re.target.files&&re.target.files[0]&&S(re.target.files[0])},W=()=>{if(!_)return;B(!0);const re=new FileReader;re.readAsDataURL(_),re.onloadend=()=>{const Se={id:crypto.randomUUID(),nombre:_.name,url:re.result,fechaSubida:new Date().toISOString()};l(De=>({...De,archivos:[Se,...De.archivos||[]]})),S(null),B(!1)},re.onerror=()=>{alert("Error al leer el archivo."),B(!1)}},J=re=>{window.confirm("¿Eliminar este archivo?")&&l(Se=>({...Se,archivos:(Se.archivos||[]).filter(De=>De.id!==re)}))},te=()=>{if(!w.motivo.trim()||!w.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const re={...w,id:crypto.randomUUID(),fecha:new Date().toISOString()};l(Se=>({...Se,reuniones:[re,...Se.reuniones||[]].sort((De,_e)=>new Date(_e.fecha).getTime()-new Date(De.fecha).getTime())})),C(F)},ie=re=>{window.confirm("¿Eliminar este registro de reunión?")&&l(Se=>({...Se,reuniones:(Se.reuniones||[]).filter(De=>De.id!==re)}))},Ae=()=>{var ye,Oe,Pe;const re=new mr("p","mm","a4"),Se=20,De=re.internal.pageSize.getWidth(),_e=re.internal.pageSize.getHeight();let he=Se;const Ie=qe=>{qe.setFontSize(10),qe.setTextColor(100),qe.text("Ficha de Seguimiento - Módulo Inclusión",Se,15)};Ie(re),re.setFontSize(18),re.setFont("helvetica","bold"),re.setTextColor(40),re.text(o.nombre,Se,he+10),he+=15,re.setFontSize(11),re.setFont("helvetica","normal"),re.setTextColor(80),re.text(`Curso: ${o.curso}`,Se,he),re.text(`Dificultad: ${o.dificultad}`,Se,he+6),he+=15;const He=qe=>{he+qe>_e-Se&&(re.addPage(),Ie(re),he=Se)},Xe=qe=>{He(15),re.setFontSize(14),re.setFont("helvetica","bold"),re.text(qe,Se,he),he+=10};if((ye=o.intervenciones)!=null&&ye.length&&(Xe("Historial de Intervenciones"),gl(re,{startY:he,head:[["Fecha","Responsable","Acción","Observaciones"]],body:o.intervenciones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.responsable,qe.accion,qe.observaciones||""]),theme:"grid",didDrawPage:()=>Ie(re)}),he=re.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){He(30),Xe("Seguimiento y Apoyos"),re.setFontSize(11),re.setFont("helvetica","normal");const qe=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,Ze=re.splitTextToSize(qe,De-Se*2);re.text(Ze,Se,he),he+=Ze.length*5+10}(Oe=o.metasProgreso)!=null&&Oe.length&&(He(30),Xe("Metas de Progreso"),gl(re,{startY:he,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(qe=>[qe.trimestre,qe.meta,qe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Ie(re)}),he=re.lastAutoTable.finalY+10),(Pe=o.reuniones)!=null&&Pe.length&&(Xe("Reuniones con Apoderados"),gl(re,{startY:he,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.motivo,qe.acuerdos||"",qe.asistentes]),theme:"grid",didDrawPage:()=>Ie(re)})),re.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},oe=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),c.jsxs("select",{value:h.responsable,onChange:re=>p(Se=>({...Se,responsable:re.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(re=>c.jsx("option",{value:re,children:re},re))]}),h.responsable&&!u&&c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),c.jsx("textarea",{value:h.accion,onChange:re=>p(Se=>({...Se,accion:re.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:h.observaciones,onChange:re=>p(Se=>({...Se,observaciones:re.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[u&&c.jsx("button",{onClick:()=>{d(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),c.jsx("button",{onClick:R,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(re=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:re.accion}),re.observaciones&&c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:re.observaciones}),c.jsxs("div",{className:"flex items-center justify-between mt-2",children:[c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(re.fecha).toLocaleString("es-CL")," - ",re.responsable]}),c.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>O(re),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),c.jsx("button",{onClick:()=>j(re.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},re.id)),(!o.intervenciones||o.intervenciones.length===0)&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:"📋"}),c.jsx("p",{children:"No hay intervenciones registradas"}),c.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),ce=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),H&&c.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Z.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${Z.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Z.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:g.trimestre,onChange:re=>v(Se=>({...Se,trimestre:re.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:g.meta,onChange:re=>v(Se=>({...Se,meta:re.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:P,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),c.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(re=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:re.cumplida,onChange:()=>X(re.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${re.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[re.trimestre,":"]})," ",re.meta]}),c.jsx("button",{onClick:()=>K(re.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},re.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),c.jsx("p",{children:"No hay metas definidas"}),c.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),ge=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:b.titulo,onChange:re=>y(Se=>({...Se,titulo:re.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:new Date(b.fecha).toISOString().slice(0,10),onChange:re=>y(Se=>({...Se,fecha:re.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:V,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!b.titulo.trim()||!b.fecha,children:"Agendar"})]}),c.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(re=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:re.resuelta,onChange:()=>q(re.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${re.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[re.titulo," (",new Date(re.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),c.jsx("button",{onClick:()=>ne(re.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},re.id)),(!o.alertas||o.alertas.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),c.jsx("p",{children:"No hay alertas programadas"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:L,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),c.jsx("button",{onClick:W,disabled:!_||k,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:k?"Subiendo...":"Subir"}),_&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",_.name]})]}),c.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(re=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsxs("a",{href:re.url,download:re.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:re.nombre,children:["📎 ",re.nombre]}),c.jsx("button",{onClick:()=>J(re.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},re.id)),(!o.archivos||o.archivos.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:"📁"}),c.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),je=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),c.jsx("input",{value:w.motivo,onChange:re=>C(Se=>({...Se,motivo:re.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:w.acuerdos,onChange:re=>C(Se=>({...Se,acuerdos:re.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:w.asistentes,onChange:re=>C(Se=>({...Se,asistentes:re.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:te,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!w.motivo.trim()||!w.asistentes.trim(),children:"Guardar Reunión"})})]}),c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(re=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:re.motivo}),re.acuerdos&&c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[c.jsx("strong",{children:"Acuerdos:"})," ",re.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(re.fecha).toLocaleString("es-CL")," - Asistentes: ",re.asistentes]})]}),c.jsx("button",{onClick:()=>ie(re.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},re.id)),(!o.reuniones||o.reuniones.length===0)&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:"👥"}),c.jsx("p",{children:"No hay reuniones registradas"}),c.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:re=>re.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:Ae,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),c.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(re=>c.jsx("button",{onClick:()=>i(re),className:`${s===re?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:re==="alertas"?"Alertas y Archivos":re==="seguimiento"?"Seguimiento y Metas":re},re))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&oe(),s==="seguimiento"&&ce(),s==="reuniones"&&je(),s==="alertas"&&ge()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),c.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},uH=({currentUser:e})=>{const[t,r]=I.useState([]),[n,a]=I.useState([]),[s,i]=I.useState(!0),[o,l]=I.useState(null),[u,d]=I.useState(null),[f,h]=I.useState(""),[p,g]=I.useState(""),[v,b]=I.useState(""),[y,_]=I.useState("dashboard");I.useEffect(()=>{i(!0);const R=Fje(j=>{r(j),i(!1)}),O=Oje(j=>a(j));return()=>{R(),O()}},[]);const S=async(R,O)=>{if(t.some(U=>U.nombre===R.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const j={nombre:R.nombreCompleto,curso:R.curso||"",dificultad:O,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await Dje(j),alert(`✅ ${R.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(U){console.error("Error al agregar estudiante:",U),alert("Hubo un error al agregar al estudiante al programa.")}},k=async R=>{try{await Rje(R.id,R)}catch(O){console.error("Error al actualizar la ficha:",O),alert("Hubo un error al guardar los cambios en la ficha.")}},B=async R=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await Pje(R),(o==null?void 0:o.id)===R&&l(null),alert("✅ Estudiante eliminado del programa PIE")}catch(O){console.error("Error al eliminar estudiante:",O),alert("Hubo un error al eliminar al estudiante.")}},F=R=>{const O=C;if(O.length===0){alert("No hay datos para exportar.");return}const j=O.map(U=>{var P;return{Nombre:U.nombre,Curso:U.curso,Dificultad:U.dificultad,"N° Intervenciones":((P=U.intervenciones)==null?void 0:P.length)||0,"Alertas Pendientes":(U.alertas||[]).filter(X=>!X.resuelta).length,"Metas Cumplidas":(U.metasProgreso||[]).filter(X=>X.cumplida).length,"Total Metas":(U.metasProgreso||[]).length,"Última Actualización":U.fechaActualizacionApoyos?new Date(U.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(R==="xlsx"){const U=_u.json_to_sheet(j),P=_u.book_new();_u.book_append_sheet(P,U,"Estudiantes_Inclusion"),KD(P,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const U=new mr;U.text("Listado de Estudiantes - Programa de Inclusión",14,15),gl(U,{startY:20,head:[Object.keys(j[0])],body:j.map(Object.values)}),U.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},w=I.useMemo(()=>n.filter(R=>{var O;return R.profile===er.ESTUDIANTE&&(((O=e.cursos)==null?void 0:O.includes(R.curso||""))||e.profile===er.SUBDIRECCION)}).filter(R=>!t.some(O=>O.nombre===R.nombreCompleto)),[n,t,e]),C=I.useMemo(()=>t.filter(R=>R.nombre.toLowerCase().includes(f.toLowerCase())&&(p===""||R.curso===p)&&(v===""||R.dificultad===v)).sort((R,O)=>R.nombre.localeCompare(O.nombre)),[t,f,p,v]),N=I.useMemo(()=>n.filter(R=>R.profile===er.PROFESORADO).map(R=>R.nombreCompleto).sort(),[n]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),c.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>_("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),c.jsx("button",{onClick:()=>_("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?c.jsxs("div",{className:"text-center py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),c.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):c.jsxs(c.Fragment,{children:[y==="dashboard"&&c.jsxs("div",{className:"space-y-8",children:[c.jsx(Lje,{estudiantes:t}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),c.jsx("button",{onClick:()=>_("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),c.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(R=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:R.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[R.curso," - ",R.dificultad]})]}),c.jsx("button",{onClick:()=>l(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},R.id)),t.length===0&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📚"}),c.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),c.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),c.jsx(cH,{estudiantesDisponibles:w,onSelect:R=>d(R)})]})]}),y==="lista"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",C.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>F("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),c.jsx("button",{onClick:()=>F("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),c.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:R=>h(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),c.jsxs("select",{value:p,onChange:R=>g(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),_s.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),c.jsxs("select",{value:v,onChange:R=>b(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),$_.map(R=>c.jsx("option",{value:R,children:R},R))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-blue-600",children:C.length}),c.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-green-600",children:t.length}),c.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((R,O)=>R+(O.alertas||[]).filter(j=>!j.resuelta).length,0)}),c.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(R=>R.curso)).size}),c.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),c.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[C.map(R=>{var O;return c.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:R.nombre}),(R.alertas||[]).filter(j=>!j.resuelta).length>0&&c.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(R.alertas||[]).filter(j=>!j.resuelta).length," alertas"]})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[R.curso," - ",R.dificultad]}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[c.jsxs("span",{children:[((O=R.intervenciones)==null?void 0:O.length)||0," intervenciones"]}),c.jsxs("span",{children:[(R.metasProgreso||[]).filter(j=>j.cumplida).length," metas cumplidas"]}),R.fechaActualizacionApoyos&&c.jsxs("span",{children:["Últ. actualización: ",new Date(R.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>l(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>B(R.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},R.id)}),C.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),c.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||p||v?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||p||v)&&c.jsx("button",{onClick:()=>{h(""),g(""),b("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),c.jsx(cH,{estudiantesDisponibles:w,onSelect:R=>d(R)})]})]}),u&&c.jsx(Mje,{student:u,onClose:()=>d(null),onConfirm:(R,O)=>{S(R,O),d(null)}}),o&&c.jsx(Uje,{student:o,onClose:()=>l(null),onSave:k,profesores:N})]})},Bte="asistencia_dual",Qje=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},Hje=(e,t)=>{const r=nr(Ut(Ft,Bte),Ln("emailEstudiante","==",e),Kr("fechaHora","desc"));return wr(r,a=>{const s=a.docs.map(i=>Qje(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},Vje=async e=>{try{const t={...e,fechaHora:yr.fromDate(new Date(e.fechaHora))};await ea(Ut(Ft,Bte),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},zje=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),$je=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),Kje=({currentUser:e})=>{const[t,r]=I.useState(e.curso||""),[n,a]=I.useState([]),[s,i]=I.useState(!1),[o,l]=I.useState(!0),[u,d]=I.useState(null);I.useEffect(()=>{if(!e.email){l(!1);return}l(!0);const h=Hje(e.email,p=>{a(p),l(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await Vje(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(v){console.error("Error saving record to Firestore:",v),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let g="No se pudo obtener la ubicación.";switch(p.code){case p.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case p.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${p.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),hp.map(h=>c.jsx("option",{value:h,children:h},h))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?c.jsx(zje,{}):c.jsx($je,{}),h.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},Gje=async()=>{try{console.log("🔍 Debugging users collection...");const e=Ut(Rr,"users"),t=nr(e,FA(10)),r=await qs(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),l={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},qje=async(e,t)=>{var l,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=yr.fromDate(r),s=yr.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const h=Ut(Rr,f);try{const p=nr(h,Ln("fechaHora",">=",a),Ln("fechaHora","<=",s)),g=await qs(p);o[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((l=g.docs[0])==null?void 0:l.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let v=!1;for(const b of g)try{const y=nr(h,Ln(b,">=",a),Ln(b,"<=",s)),_=await qs(y);o[f]={exists:!0,hasDateField:b,count:_.size,sampleDoc:((u=_.docs[0])==null?void 0:u.data())||null},v=!0;break}catch{continue}if(!v){const b=nr(h,Kr("__name__"),FA(5)),y=await qs(b);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){o[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},Wje=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=yr.fromDate(a),o=yr.fromDate(s),l=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((p,g)=>{let v;g.fechaHora instanceof Date?v=g.fechaHora:typeof g.fechaHora=="string"?v=new Date(g.fechaHora):v=new Date;const b=v.getDate();return p[b]=(p[b]||0)+1,p},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const p=Ut(Rr,h),g=nr(p,Ln("fechaHora",">=",i),Ln("fechaHora","<=",o),Kr("fechaHora","desc")),v=wr(g,b=>{console.log(`📋 ${h}: ${b.size} documentos encontrados con filtro`),b.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(_=>_.startsWith(`${h}_`)).forEach(_=>u.delete(_)),b.docs.forEach((_,S)=>{var k;if(S<5){const B=_.data();let F;(k=B.fechaHora)!=null&&k.toDate?F=B.fechaHora.toDate():typeof B.fechaHora=="string"?F=new Date(B.fechaHora):F=new Date,console.log(`   ${S+1}. ${B.emailEstudiante} - ${F.toLocaleString()} - ${B.tipo}`),console.log(`      📅 Fecha original: ${B.fechaHora} (tipo: ${typeof B.fechaHora})`)}}),b.forEach(_=>{var w;const S=_.data();let k;(w=S.fechaHora)!=null&&w.toDate?k=S.fechaHora.toDate():typeof S.fechaHora=="string"?k=new Date(S.fechaHora):S.fechaHora instanceof Date?k=S.fechaHora:S.fechaHora?k=new Date(S.fechaHora):k=new Date;const B={id:_.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:k,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},F=`${h}_${_.id}`;u.set(F,B)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},b=>{console.warn(`⚠️ Error con filtro en ${h}:`,b),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=nr(p,FA(200)),_=wr(y,k=>{if(console.log(`📋 ${h} (sin filtro): ${k.size} documentos`),k.size>0){const F=k.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(F)),console.log("📄 Primer documento:",F)}const B=k.docs.filter(F=>{var N;const w=F.data();if(!w.fechaHora)return!1;let C;return(N=w.fechaHora)!=null&&N.toDate?C=w.fechaHora.toDate():typeof w.fechaHora=="string"?C=new Date(w.fechaHora):w.fechaHora instanceof Date?C=w.fechaHora:C=new Date(w.fechaHora),C>=a&&C<=s});console.log(`📅 ${h}: ${B.length} registros después de filtro manual`),B.length>0&&(Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),B.forEach(w=>{var j;const C=w.data();let N;(j=C.fechaHora)!=null&&j.toDate?N=C.fechaHora.toDate():typeof C.fechaHora=="string"?N=new Date(C.fechaHora):C.fechaHora instanceof Date?N=C.fechaHora:N=new Date(C.fechaHora);const R={id:w.id,emailEstudiante:C.emailEstudiante||C.email||"",nombreEstudiante:C.nombreEstudiante||C.nombre||"",curso:C.curso||"",fechaHora:N,tipo:C.tipo,ubicacion:C.ubicacion||null,observaciones:C.observaciones||"",...C},O=`${h}_${w.id}`;u.set(O,R)}),d())}),S=l.findIndex(k=>k===v);S>=0?l[S]=_:l.push(_)});l.push(v)}catch(p){console.warn(`❌ Error configurando ${h}:`,p)}}),()=>{l.forEach(h=>{try{h()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},Xje=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",l);const u=o.filter(d=>d.profile===er.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const l=Ut(Rr,o),u=nr(l),d=wr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),f.forEach(p=>{var g,v,b,y;try{const _=p.data(),S=_.email||_.userEmail||_.mail||_.correo||"",k=_.nombreCompleto||_.displayName||_.name||_.nombre||_.fullName||"",B=_.curso||_.course||_.class||_.grade||"";let F=_.profile||_.role||_.tipo||_.userType||er.ESTUDIANTE;if(typeof F=="string"){const N=F.toLowerCase();N.includes("estudiante")||N.includes("student")||N.includes("alumno")?F=er.ESTUDIANTE:N.includes("coordinador")||N.includes("coordinator")?F=er.COORDINADOR_TP:N.includes("profesor")||N.includes("teacher")||N.includes("docente")?F=er.PROFESOR:(N.includes("subdireccion")||N.includes("subdir"))&&(F=er.COORDINADOR_TP)}const w={id:p.id,email:S,nombreCompleto:k,curso:B,profile:F,activo:_.activo!==!1,fechaCreacion:((v=(g=_.fechaCreacion)==null?void 0:g.toDate)==null?void 0:v.call(g))||new Date(_.fechaCreacion)||new Date,ultimaActividad:((y=(b=_.ultimaActividad)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(_.ultimaActividad)||new Date,..._},C=`${o}_${p.id}`;a.set(C,w)}catch(_){console.warn(`Error procesando documento ${p.id} en ${o}:`,_)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${o}:`,f)});n.push(d)}catch(l){console.warn(`❌ Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},Yje=(e,t)=>{try{console.log("Setting up users subscription...");const r=Ut(Rr,"users"),n=nr(r);return wr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,p,g;try{const v=d.data();console.log(`Processing user doc ${d.id}:`,v);const b=v.email||v.userEmail||v.mail||"",y=v.nombreCompleto||v.displayName||v.name||v.nombre||"",_=v.curso||v.course||v.class||"";let S=v.profile||v.role||v.tipo||er.ESTUDIANTE;if(typeof S=="string"){const B=S.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?S=er.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?S=er.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?S=er.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(S=er.COORDINADOR_TP)}const k={id:d.id,email:b,nombreCompleto:y,curso:_,profile:S,activo:v.activo!==!1,fechaCreacion:((h=(f=v.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(v.fechaCreacion)||new Date,ultimaActividad:((g=(p=v.ultimaActividad)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date(v.ultimaActividad)||new Date,...v};i.push(k)}catch(v){console.warn(`Error processing user document ${d.id}:`,v)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===er.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},RE=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Jje=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Zje=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),eFe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState([]),[a,s]=I.useState(!0),[i,o]=I.useState(null),[l,u]=I.useState(new Date),[d,f]=I.useState("todos"),[h,p]=I.useState("");I.useEffect(()=>{s(!0),o(null);const F=l.getFullYear(),w=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",F,"Mes:",w);let C=!1,N=!1;const R=()=>{C&&N&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const j=Ut(Rr,"asistencia_dual"),U=nr(j,FA(5)),P=await qs(U);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${P.size}`),P.size>0)P.docs.forEach((X,K)=>{const Z=X.data();console.log(`   ${K+1}. ${X.id.slice(0,8)} - ${Z.emailEstudiante} - ${Z.tipo}`),console.log("      Fecha original:",Z.fechaHora),console.log("      Todos los campos:",Object.keys(Z))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const X=["asistenciaEmpresa","asistencia_empresa"];for(const K of X)try{const Z=Ut(Rr,K),H=nr(Z,FA(3)),V=await qs(H);if(console.log(`📋 ${K}: ${V.size} documentos`),V.size>0){const q=V.docs[0].data();console.log("   Estructura:",Object.keys(q)),console.log("   Email:",q.emailEstudiante||q.email),console.log("   Fecha:",q.fechaHora||q.fecha)}}catch(Z){console.log(`❌ ${K}: ${Z instanceof Error?Z.message:"Error"}`)}}}catch(j){console.error("❌ Error en prueba directa:",j),j.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):j.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),qje(F,w).then(j=>{console.log("🔍 Debug info for collections:",j),Object.entries(j).forEach(([U,P])=>{if(P.exists&&P.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${U.toUpperCase()}:`),console.log(`   📊 Total documentos: ${P.totalDocs}`),console.log(`   📅 Documentos del período: ${P.count}`),console.log(`   🔑 Campo de fecha: ${P.hasDateField}`),P.sampleDoc){console.log("   📄 Documento ejemplo:",P.sampleDoc);const X=P.sampleDoc,K=X.emailEstudiante||X.email||X.userEmail||X.correo||"NO ENCONTRADO",Z=X.tipo||X.type||X.action||X.tipoRegistro||"NO ENCONTRADO",H=X.fechaHora||X.fecha||X.timestamp||X.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${K}`),console.log(`   📝 Tipo registro: ${Z}`),console.log(`   📅 Fecha: ${H}`),console.log("   🗂️ Todos los campos:",Object.keys(X))}P.filteredDocs&&P.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",P.filteredDocs.length),P.filteredDocs.forEach((X,K)=>{K<3&&console.log(`      ${K+1}. ID: ${X.id}`,X.data)}))}else P.exists?console.log(`⚪ Colección ${U}: vacía`):console.log(`❌ Colección ${U}: no existe`)})}).catch(j=>{console.error("Debug error:",j)}),Gje().then(j=>{console.log("🔍 Debug info for users:",j),(!j.exists||j.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async P=>{var X;try{const K=Ut(Rr,P),Z=nr(K,FA(5)),H=await qs(Z);H.size>0?(console.log(`✅ Encontrada colección alternativa: ${P} con ${H.size} documentos`),console.log("Documento muestra:",(X=H.docs[0])==null?void 0:X.data())):console.log(`❌ Colección ${P}: vacía`)}catch{console.log(`❌ Colección ${P}: no existe`)}}))}).catch(j=>{console.error("Users debug error:",j)});try{console.log("Configurando suscripción a asistencia...");const j=Wje(F,w,P=>{if(console.log("✅ Received registros:",P.length),P.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",P[0]);const X=[...new Set(P.map(ne=>ne.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",X);const K=[...new Set(P.map(ne=>ne.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",K);const Z=P.reduce((ne,L)=>{const W=new Date(L.fechaHora).getDate();return ne[W]||(ne[W]=[]),ne[W].push(L),ne},{});console.log("📅 Registros por día del mes:",Object.keys(Z).map(ne=>({dia:parseInt(ne),cantidad:Z[parseInt(ne)].length})));const H=r.map(ne=>ne.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",H);const V=X.filter(ne=>H.includes(ne)),q=X.filter(ne=>!H.includes(ne));console.log("✅ Emails que coinciden:",V),console.log("❌ Emails que NO coinciden:",q)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(P),C=!0,R()},P=>{console.error("❌ Error fetching asistencia:",P),o("Error al cargar datos de asistencia: "+P.message),C=!0,R()});console.log("Configurando suscripción a usuarios...");const U=Xje(P=>{if(console.log("✅ Received users (multi-collection):",P.length),P.length>0){console.log("Sample user:",P[0]);const X=P.filter(K=>K.profile===er.ESTUDIANTE&&K.curso);console.log("Dual students found:",X.length),X.forEach(K=>{console.log(`- ${K.nombreCompleto} (${K.curso}) - ${K.email}`)})}n(P),N=!0,R()},P=>{console.error("❌ Error fetching users (multi-collection):",P),console.log("🔄 Intentando con función original de usuarios...");const X=Yje(K=>{console.log("✅ Received users (fallback):",K.length),n(K),N=!0,R()},K=>{console.error("❌ Error en fallback también:",K),o("Error al cargar estudiantes: "+P.message),N=!0,R()})});return()=>{console.log("Limpiando suscripciones..."),j&&j(),U&&U()}}catch(j){console.error("❌ Error setting up subscriptions:",j),o("Error al inicializar conexiones: "+(j instanceof Error?j.message:"Error desconocido")),s(!1)}},[l]);const{monthDays:g,monthName:v,year:b}=I.useMemo(()=>{const F=l.getFullYear(),w=l.getMonth();return{monthDays:new Date(F,w+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:F}},[l]),y=I.useMemo(()=>{let F=r.filter(w=>w.profile===er.ESTUDIANTE&&w.curso&&hp.includes(RE(w.curso)));if(d!=="todos"&&(F=F.filter(w=>RE(w.curso||"")===d)),h&&(F=F.filter(w=>w.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const w=[...new Set(e.map(R=>R.emailEstudiante).filter(Boolean))],C=F.map(R=>R.email),N=w.filter(R=>!C.includes(R));if(N.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",N);const O=N.map(j=>{const U=e.find(P=>P.emailEstudiante===j);return{id:j,email:j,nombreCompleto:(U==null?void 0:U.nombreEstudiante)||j.split("@")[0],curso:(U==null?void 0:U.curso)||"3ºC",profile:er.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(j=>{const U=d==="todos"||RE(j.curso)===d,P=!h||j.nombreCompleto.toLowerCase().includes(h.toLowerCase());return U&&P&&hp.includes(RE(j.curso))});F=[...F,...O]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${F.length}`),F.forEach(w=>{console.log(`   - ${w.nombreCompleto} (${w.curso}) - ${w.email}`)}),F.sort((w,C)=>w.nombreCompleto.localeCompare(C.nombreCompleto))},[r,d,h,e]),_=I.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const F=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),F):(e.forEach((w,C)=>{const N=w.emailEstudiante;if(!N)return;let R;if(w.fechaHora instanceof Date)R=w.fechaHora;else if(w.fechaHora&&typeof w.fechaHora=="object"&&"toDate"in w.fechaHora)R=w.fechaHora.toDate();else if(typeof w.fechaHora=="string")R=new Date(w.fechaHora);else{console.warn("Fecha no válida en registro:",w);return}const O=R.getDate(),j=R.getMonth(),U=R.getFullYear();C<3&&console.log(`📅 Registro ${C+1}:`,{email:N,tipo:w.tipo,fechaOriginal:w.fechaHora,fechaProcesada:R.toLocaleString(),año:U,mes:j,día:O}),F.has(N)||F.set(N,new Map);const P=F.get(N);P.has(O)||P.set(O,{});const X=P.get(O);w.tipo==="Entrada"?(!X.entrada||R<new Date(X.entrada.fechaHora))&&(X.entrada=w):w.tipo==="Salida"&&(!X.salida||R>new Date(X.salida.fechaHora))&&(X.salida=w)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:F.size,estudiantes:Array.from(F.keys()),registrosPorEstudiante:Array.from(F.entries()).map(([w,C])=>({email:w,dias:Array.from(C.keys()),totalRegistros:Array.from(C.values()).reduce((N,R)=>N+(R.entrada?1:0)+(R.salida?1:0),0)}))}),F)},[e]),S=F=>{u(w=>{const C=new Date(w);return C.setMonth(C.getMonth()+F),C})},k=F=>{F!=null&&F.latitud&&(F!=null&&F.longitud)&&window.open(`https://www.google.com/maps?q=${F.latitud},${F.longitud}`,"_blank")},B=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>S(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${v} ${b}`}),c.jsx("button",{onClick:()=>S(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),c.jsxs("select",{value:d,onChange:F=>f(F.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),hp.map(F=>c.jsx("option",{value:F,children:F},F))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:F=>p(F.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(F,w)=>{const N=new Date(b,l.getMonth(),w+1).getDay(),R=N===0||N===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${R?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:B[N]}),c.jsx("div",{children:w+1})]},w)})]})}),c.jsx("tbody",{children:y.length>0?y.map(F=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:F.nombreCompleto}),Array.from({length:g},(w,C)=>{var U;const N=C+1,R=(U=_.get(F.email))==null?void 0:U.get(N),O=new Date(b,l.getMonth(),C+1),j=O.getDay()===0||O.getDay()===6;return F.email==="alexis.robles@industrialderecoleta.cl"&&N===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:F.email,day:N,hasDataForStudent:_.has(F.email),studentDayRecords:R,allAttendanceKeys:Array.from(_.keys()),daysForStudent:_.get(F.email)?Array.from(_.get(F.email).keys()):[]}),c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${j?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(R==null?void 0:R.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var P;return k((P=R.entrada)==null?void 0:P.ubicacion)},children:[c.jsx(Jje,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(R==null?void 0:R.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var P;return k((P=R.salida)==null?void 0:P.ubicacion)},children:[c.jsx(Zje,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},N)})]},F.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},_N="evaluaciones_formativas",SN="calificaciones_formativas",JD="trabajos_grupales_formativos",tFe="usuarios",ZD=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},rFe=(e,t,r)=>{const n=nr(Ut(Ft,_N),Ln("curso","==",e),Ln("asignatura","==",t),Kr("fecha","asc"));return wr(n,a=>{r(a.docs.map(s=>ZD(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},nFe=async(e,t)=>{const r=MO(Ft),n=pr(Ut(Ft,_N));r.set(n,{...e,fecha:yr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=pr(Ft,SN,n.id);return r.set(a,t),await r.commit(),n.id},aFe=async(e,t)=>{const r=pr(Ft,_N,e);await xo(r,t,{merge:!0})},sFe=async e=>{const t=MO(Ft);t.delete(pr(Ft,_N,e)),t.delete(pr(Ft,SN,e)),await t.commit()},iFe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=pr(Ft,SN,n);return wr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},oFe=async(e,t)=>{const r=pr(Ft,SN,e);await xo(r,t,{merge:!0})},lFe=(e,t,r)=>{const n=nr(Ut(Ft,JD),Ln("curso","==",e),Ln("asignatura","==",t),Kr("fechaPresentacion","desc"));return wr(n,a=>{r(a.docs.map(s=>ZD(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},cFe=async e=>{const t={...e,fechaPresentacion:yr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await ea(Ut(Ft,JD),t)},uFe=async(e,t)=>{const r=pr(Ft,JD,e);await xo(r,t,{merge:!0})},dFe=e=>{const t=nr(Ut(Ft,tFe));return wr(t,r=>{e(r.docs.map(n=>ZD(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},Tte=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},wv={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},Ite=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},AFe=({cursos:e,onSelect:t})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Ite(r);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),fFe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Ite(e);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>c.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:wv[s]||wv.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},hFe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=I.useState([]),[i,o]=I.useState({}),[l,u]=I.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=I.useState(null),[h,p]=I.useState(null),[g,v]=I.useState(!0),b=I.useMemo(()=>r.filter(C=>C.profile===er.ESTUDIANTE&&Tte(C.curso||"")===e).map(C=>C.nombreCompleto).sort((C,N)=>C.localeCompare(N)),[r,e]);I.useEffect(()=>{v(!0);const C=rFe(e,t,N=>{s(N);const R=N.map(j=>j.id),O=iFe(R,j=>{o(U=>({...U,...j}))});return v(!1),()=>O()});return()=>C()},[e,t]);const y=C=>{const{name:N,value:R}=C.target;d?f(O=>O?{...O,[N]:R}:null):u(O=>({...O,[N]:R}))},_=async C=>{if(C.preventDefault(),p(null),!l.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const N={asignatura:t,curso:e,...l},R=b.reduce((O,j)=>(O[j]="trabajado",O),{});try{await nFe(N,R),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(O){console.error(O),p("No se pudo crear la evaluación.")}},S=(C,N)=>{var U;const R=((U=i[C])==null?void 0:U[N])||"trabajado";let O;R==="trabajado"?O="no trabajado":R==="no trabajado"?O="ausente":O="trabajado";const j={...i,[C]:{...i[C]||{},[N]:O}};o(j),oFe(C,{[N]:O}).catch(P=>{console.error("Error updating grade:",P)})},k=C=>f(C),B=async()=>{if(d)try{await aFe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(C){console.error(C),p("No se pudo guardar la edición.")}},F=async C=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await sFe(C)}catch(N){console.error(N),p("No se pudo eliminar la evaluación.")}},w=I.useCallback(C=>{if(a.length===0)return"-";let N=0,R=0;return a.forEach(O=>{var U;const j=(U=i[O.id])==null?void 0:U[C];j==="trabajado"?(N+=7,R++):j==="no trabajado"&&(N+=2,R++)}),R===0?"-":(N/R).toFixed(1)},[i,a]);return g?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),c.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(C=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===C.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:B,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:C.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:C.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>k(C),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),c.jsx("button",{onClick:()=>F(C.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},C.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:b.map(C=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:C}),a.map(N=>{var j;const R=(j=i[N.id])==null?void 0:j[C];let O;return R==="trabajado"?O=wv[t]||wv.Default:R==="no trabajado"?O="❌":R==="ausente"?O="A":O=wv[t]||wv.Default,c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>S(N.id,C),className:`text-3xl transition-opacity duration-200 ${R==="trabajado"?"opacity-100":R==="no trabajado"?"opacity-40":R==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:O})},N.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:w(C)})]},C))})]})})]})},mFe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=I.useState([]),[i,o]=I.useState(null),[l,u]=I.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=I.useState({}),[h,p]=I.useState(2),g=I.useMemo(()=>r.filter(k=>k.profile===er.ESTUDIANTE&&Tte(k.curso||"")===e).sort((k,B)=>k.nombreCompleto.localeCompare(B.nombreCompleto)),[r,e]);I.useEffect(()=>{const k=lFe(e,t,s);return()=>k()},[e,t]),I.useEffect(()=>{if(i){const k={};i.grupos.forEach(B=>{B.integrantes.forEach(F=>{k[F.nombre]={groupNumber:String(B.numero),role:F.rol||""}})}),f(k)}else f({})},[i]);const v=async k=>{if(k.preventDefault(),!l.nombre.trim())return;const B={curso:e,asignatura:t,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await cFe(B),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(F){console.error(F),alert("No se pudo crear la actividad grupal.")}},b=async()=>{if(!i)return;const k=new Map;for(const F of g){const w=d[F.nombreCompleto];if(w&&w.groupNumber){const C=parseInt(w.groupNumber,10);isNaN(C)||(k.has(C)||k.set(C,[]),k.get(C).push({nombre:F.nombreCompleto,rol:w.role||""}))}}const B=Array.from(k.entries()).map(([F,w])=>({numero:F,integrantes:w})).sort((F,w)=>F.numero-w.numero);try{await uFe(i.id,{grupos:B}),alert("Grupos guardados con éxito.")}catch(F){console.error(F),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const k=[...g].sort(()=>Math.random()-.5),B={};k.forEach((F,w)=>{var C;B[F.nombreCompleto]={groupNumber:String(w%h+1),role:((C=d[F.nombreCompleto])==null?void 0:C.role)||""}}),f(B)},_=(k,B,F)=>{f(w=>({...w,[k]:{...w[k]||{groupNumber:"",role:""},[B]:F}}))},S=I.useMemo(()=>{const k=new Map;return Object.entries(d).forEach(([B,F])=>{F.groupNumber&&(k.has(F.groupNumber)||k.set(F.groupNumber,[]),k.get(F.groupNumber).push({nombre:B,rol:F.role}))}),Array.from(k.entries()).sort((B,F)=>parseInt(B[0])-parseInt(F[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:h,onChange:k=>p(parseInt(k.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:g.map(k=>{var B;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:k.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((B=d[k.nombreCompleto])==null?void 0:B.groupNumber)||"",onChange:F=>_(k.nombreCompleto,"groupNumber",F.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},k.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:S.map(([k,B])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",k]}),c.jsx("ul",{className:"space-y-2",children:B.map(F=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:F.nombre}),c.jsxs("select",{value:F.rol||"",onChange:w=>_(F.nombre,"role",w.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),lJ.map(w=>c.jsx("option",{value:w,children:w},w))]})]},F.nombre))})]},k))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:k=>u({...l,nombre:k.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:k=>u({...l,fecha:k.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(k=>c.jsxs("button",{onClick:()=>o(k),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:k.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",k.fechaPresentacion]})]},k.id))]})]})},pFe=({currentUser:e})=>{const[t,r]=I.useState("calificaciones"),[n,a]=I.useState(null),[s,i]=I.useState(null),[o,l]=I.useState([]),[u,d]=I.useState(!0);I.useEffect(()=>{d(!0);const v=dFe(b=>{l(b),d(!1)});return()=>v()},[]);const f=I.useMemo(()=>e.cursos||[],[e.cursos]),h=I.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:v,label:b})=>c.jsx("button",{onClick:()=>r(v),className:`${t===v?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),g=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return c.jsx(AFe,{cursos:f,onSelect:a});if(!s)return c.jsx(fFe,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return c.jsx(hFe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return c.jsx(mFe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:g()})]})},$x="acompanamientos",gFe="ciclosOPR",vFe="configuracion",xFe=async()=>{try{const e=nr(Ut(Rr,$x),Kr("fecha","desc"));return(await qs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompañamientos:",e),new Error("No se pudieron cargar los registros de acompañamiento")}},bFe=async e=>{try{return{id:(await ea(Ut(Rr,$x),{...e,fecha:e.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acompañamiento:",t),new Error("No se pudo crear el registro de acompañamiento")}},yFe=async(e,t)=>{try{const r=pr(Rr,$x,e);await cm(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",e),new Error("No se pudo actualizar el registro de acompañamiento")}},wFe=async e=>{try{const t=pr(Rr,$x,e);await Ys(t)}catch(t){throw console.error("Error al eliminar acompañamiento:",t,"ID:",e),new Error("No se pudo eliminar el registro de acompañamiento")}},EFe=async(e,t)=>{try{const r=Ut(Rr,$x,e,gFe);return{id:(await ea(r,{...t,createdAt:new Date().toISOString()})).id,...t}}catch(r){throw console.error(`Error al crear ciclo OPR para ${e}:`,r),new Error("No se pudo crear el ciclo OPR")}},CFe=async(e,t)=>{try{const r=qO(),n=GO(r,t),a=await $O(n,e);return await KO(a.ref)}catch(r){throw console.error(`Error al subir archivo a ${t}:`,r),new Error("No se pudo subir el archivo")}},_Fe=async e=>{try{const t=nr(Ut(Rr,$x),Ln("docente","==",e),Kr("fecha","desc"));return(await qs(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompañamientos por docente:",t),new Error("No se pudieron cargar los acompañamientos del docente")}},SFe=async()=>{try{const e=pr(Rr,vFe,"rubricaAcompanamiento"),t=await kw(e);return t.exists()?t.data().rubrica:null}catch(e){return console.error("Error al obtener rúbrica personalizada:",e),null}},NFe=async()=>await vte(),kFe=({label:e,onFileChange:t,uploadedUrl:r,onRemove:n,isUploading:a,accept:s="video/mp4,video/quicktime"})=>{const i=`file-upload-${e.replace(/\s+/g,"-")}`;return c.jsxs("div",{className:"w-full",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),r?c.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[c.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline truncate",children:"Ver video cargado"}),c.jsx("button",{type:"button",onClick:n,className:"text-red-500 hover:text-red-700 ml-auto",children:c.jsx(Iw,{className:"w-4 h-4"})})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{id:i,type:"file",onChange:o=>o.target.files&&t(o.target.files[0]),className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100",disabled:a,accept:s}),a&&c.jsx("div",{className:"text-sm text-amber-600",children:"Cargando..."})]})]})},BFe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=I.useState(!1),[o,l]=I.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),u=I.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",modelo:"",videoModeloUrl:"",foco:"",elementosIdentificar:"",brecha:{videoUrl:"",minutoInicial:"",minutoFinal:"",preguntas:"",indicadores:""}},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:o.curso||"",profesor:o.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,o]),[d,f]=I.useState(t||u),[h,p]=I.useState({}),g=C=>{const{name:N,value:R}=C.target,O=N.split(".");O.length>1?f(j=>{const U=JSON.parse(JSON.stringify(j));let P=U;for(let X=0;X<O.length-1;X++)P=P[O[X]];return P[O[O.length-1]]=R,U}):f(j=>({...j,[N]:R}))},v=(C,N,R)=>{f(O=>({...O,detallesObservacion:O.detallesObservacion.map(j=>j.id===C?{...j,[N]:R}:j)}))},b=()=>{const C=d.detallesObservacion[d.detallesObservacion.length-1],N=C&&parseInt(C.minuto.split("-")[1],10)||0,R=`${N+1}-${N+5}`;f(O=>({...O,detallesObservacion:[...O.detallesObservacion,{id:`row_${Date.now()}`,minuto:R,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},y=C=>{f(N=>({...N,detallesObservacion:N.detallesObservacion.filter(R=>R.id!==C)}))},_=async(C,N)=>{p(R=>({...R,[C]:!0}));try{const R=`${Date.now()}-${N.name}`,O=e.id||"independent",j=d.id||"temp",U=`videos_opr/${O}/${j}/${R}`,P=await CFe(N,U),X=C.split(".");X.length>1?f(K=>{const Z=JSON.parse(JSON.stringify(K));let H=Z;for(let V=0;V<X.length-1;V++)H=H[X[V]];return H[X[X.length-1]]=P,Z}):f(K=>({...K,[C]:P}))}catch(R){console.error("Error al subir archivo:",R),alert("No se pudo subir el archivo. Revise los permisos de Storage.")}finally{p(R=>({...R,[C]:!1}))}},S=C=>{const N=C.split(".");N.length>1?f(R=>{const O=JSON.parse(JSON.stringify(R));let j=O;for(let U=0;U<N.length-1;U++)j=j[N[U]];return j[N[N.length-1]]="",O}):f(R=>({...R,[C]:""}))},k=async(C,N,R)=>{if(!R||!R.trim())return R;const O=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${N}):

"""${R}"""`;try{return(await C.generateContent(O)).response.text()}catch(j){return console.error(`Error improving text for ${N}:`,j),R}},B=async()=>{var C,N;i(!0);try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await X0("Acompañamiento - Mejorar Ciclo OPR");const j=new os(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),U=d.retroalimentacion,P=d.planificacion,X=await Promise.all([k(j,"Éxito",U.exito),k(j,"Modelo",U.modelo),k(j,"Foco",U.foco),k(j,"Elementos a identificar",U.elementosIdentificar),k(j,"Brecha - Preguntas",((C=U.brecha)==null?void 0:C.preguntas)||""),k(j,"Brecha - Indicadores",((N=U.brecha)==null?void 0:N.indicadores)||""),k(j,"Planificación - Preparación",P.preparacion),k(j,"Planificación - Objetivo",P.objetivo),k(j,"Planificación - Actividad",P.actividad),k(j,"Planificación - Tiempo",P.tiempo)]);f(K=>({...K,retroalimentacion:{...K.retroalimentacion,exito:X[0],modelo:X[1],foco:X[2],elementosIdentificar:X[3],brecha:{...K.retroalimentacion.brecha,preguntas:X[4],indicadores:X[5]}},planificacion:{...K.planificacion,preparacion:X[6],objetivo:X[7],actividad:X[8],tiempo:X[9]}}))}catch(R){console.error(R),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{i(!1)}},F=()=>{const C=new mr,N=C.internal.pageSize.getWidth(),R=15,O=N-R*2;let j=20;const U=Z=>{j>260&&(C.addPage(),j=20),C.setFontSize(14),C.setFont("helvetica","bold"),C.text(Z,R,j),j+=10},P=(Z,H="")=>{if(!Z)return;j>270&&(C.addPage(),j=20),C.setFontSize(10),C.setFont("helvetica","bold"),C.text(H,R,j),C.setFont("helvetica","normal");const V=C.splitTextToSize(Z,O-(H?15:0));C.text(V,R+(H?15:0),j),j+=V.length*5+4};C.setFontSize(18),C.setFont("helvetica","bold"),C.text("Informe de Ciclo OPR",N/2,j,{align:"center"}),j+=15,U("1. Datos Generales");const X=[["Docente:",o.docente],["Curso:",o.curso],["Asignatura:",o.asignatura],["Fecha:",new Date(d.fecha).toLocaleDateString("es-CL")],["Hora:",`${d.horaInicio} - ${d.horaTermino}`],["Ciclo:",d.nombreCiclo]];gl(C,{body:X,startY:j,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),j=C.lastAutoTable.finalY+10,U("2. Registro Detallado de Observación");const K=d.detallesObservacion.map(Z=>[Z.minuto,Z.accionesDocente,Z.accionesEstudiantes,Z.actividades]);gl(C,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:K,startY:j,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:Z=>{var H;j=((H=Z.cursor)==null?void 0:H.y)||20}}),j=C.lastAutoTable.finalY+10,U("3. Retroalimentación Docente"),P(d.retroalimentacion.exito,"Éxito:"),P(d.retroalimentacion.modelo,"Modelo:"),P(d.retroalimentacion.foco,"Foco:"),P(d.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),j+=5,C.setFontSize(11),C.setFont("helvetica","bold"),C.text("Análisis de Brecha",R,j),j+=7,P(`${d.retroalimentacion.brecha.minutoInicial} a ${d.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),P(d.retroalimentacion.brecha.preguntas,"Preguntas:"),P(d.retroalimentacion.brecha.indicadores,"Indicadores:"),U("4. Planificación de Práctica"),P(d.planificacion.preparacion,"Preparación:"),P(d.planificacion.objetivo,"Objetivo:"),P(d.planificacion.actividad,"Actividad:"),P(d.planificacion.tiempo,"Tiempo:"),U("5. Seguimiento"),P(new Date(d.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),P(d.seguimiento.firma,"Firma (Registrado por):"),C.save(`Informe_OPR_${o.docente}_${d.fecha}.pdf`)},w=async C=>{C.preventDefault();const N={...d,docenteInfo:o.docente,cursoInfo:o.curso,asignaturaInfo:o.asignatura,seguimiento:{...d.seguimiento,profesor:o.docente,curso:o.curso}};await r(N)};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{value:o.docente,onChange:C=>l(N=>({...N,docente:C.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(C=>c.jsx("option",{value:C,children:C},C))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{value:o.curso,onChange:C=>l(N=>({...N,curso:C.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),_s.map(C=>c.jsx("option",{value:C,children:C},C))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{value:o.asignatura,onChange:C=>l(N=>({...N,asignatura:C.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(C=>c.jsx("option",{value:C,children:C},C))]})]})]})]}),c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[c.jsxs("button",{type:"button",onClick:B,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md flex items-center gap-2",disabled:s,children:[c.jsx(dJ,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),c.jsxs("button",{type:"button",onClick:F,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2",children:[c.jsx(uJ,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),c.jsxs("form",{onSubmit:w,className:"space-y-8",children:[c.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(S1e,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx("input",{type:"text",name:"nombreCiclo",value:d.nombreCiclo,onChange:g,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"number",name:"registroN",value:d.registroN,onChange:g,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"time",name:"horaInicio",value:d.horaInicio,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"time",name:"horaTermino",value:d.horaTermino,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx(kFe,{label:"Subir video de observación de clase",onFileChange:C=>_("videoObservacionUrl",C),uploadedUrl:d.videoObservacionUrl,onRemove:()=>S("videoObservacionUrl"),isUploading:!!h.videoObservacionUrl})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(Hxe,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b dark:border-slate-600",children:[c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),c.jsx("th",{className:"p-2"})]})}),c.jsx("tbody",{children:d.detallesObservacion.map(C=>c.jsxs("tr",{className:"border-b dark:border-slate-700",children:[c.jsx("td",{children:c.jsx("input",{type:"text",value:C.minuto,onChange:N=>v(C.id,"minuto",N.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:c.jsx("textarea",{value:C.accionesDocente,onChange:N=>v(C.id,"accionesDocente",N.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:c.jsx("textarea",{value:C.accionesEstudiantes,onChange:N=>v(C.id,"accionesEstudiantes",N.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:c.jsx("textarea",{value:C.actividades,onChange:N=>v(C.id,"actividades",N.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:d.detallesObservacion.length>1&&c.jsx("button",{type:"button",onClick:()=>y(C.id),className:"text-red-500 p-1",children:c.jsx(Iw,{className:"w-4 h-4"})})})]},C.id))})]})}),c.jsxs("button",{type:"button",onClick:b,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1",children:[c.jsx(mj,{className:"w-4 h-4"})," Agregar Fila"]})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(i1e,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),c.jsx("textarea",{name:"retroalimentacion.exito",value:d.retroalimentacion.exito,onChange:g,placeholder:"Éxito",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.modelo",value:d.retroalimentacion.modelo,onChange:g,placeholder:"Modelo",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.foco",value:d.retroalimentacion.foco,onChange:g,placeholder:"Foco",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:d.retroalimentacion.elementosIdentificar,onChange:g,placeholder:"Elementos a Identificar",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"p-3 border rounded-md dark:border-slate-600 space-y-3",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Brecha"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoInicial",value:d.retroalimentacion.brecha.minutoInicial,onChange:g,placeholder:"Minuto inicial",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoFinal",value:d.retroalimentacion.brecha.minutoFinal,onChange:g,placeholder:"Minuto final",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("textarea",{name:"retroalimentacion.brecha.preguntas",value:d.retroalimentacion.brecha.preguntas,onChange:g,placeholder:"Preguntas",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.brecha.indicadores",value:d.retroalimentacion.brecha.indicadores,onChange:g,placeholder:"Indicadores",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(Oxe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),c.jsx("textarea",{name:"planificacion.preparacion",value:d.planificacion.preparacion,onChange:g,placeholder:"Preparación",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"planificacion.objetivo",value:d.planificacion.objetivo,onChange:g,placeholder:"Objetivo",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"planificacion.actividad",value:d.planificacion.actividad,onChange:g,placeholder:"Actividad",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"text",name:"planificacion.tiempo",value:d.planificacion.tiempo,onChange:g,placeholder:"Tiempo",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"p-3 border rounded-md dark:border-slate-600 space-y-3",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Seguimiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("input",{type:"date",name:"seguimiento.fecha",value:d.seguimiento.fecha,onChange:g,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"text",name:"seguimiento.firma",value:d.seguimiento.firma,onChange:g,placeholder:"Firma (Nombre de quien registra)",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[c.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Ciclo OPR"})]})]})]})},TFe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState([]),[a,s]=I.useState(!0),[i,o]=I.useState(!0),[l,u]=I.useState(null),[d,f]=I.useState("list"),[h,p]=I.useState(null),[g,v]=I.useState("general"),[b,y]=I.useState(!1),_=Yb,S=I.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[k,B]=I.useState(S),F=I.useCallback(async()=>{s(!0);try{const H=await xFe();t(H)}catch(H){u("No se pudieron cargar los registros."),console.error(H)}finally{s(!1)}},[]),w=I.useCallback(async()=>{o(!0);try{const V=(await NFe()).filter(q=>q.profile==="PROFESORADO").map(q=>q.nombreCompleto).sort();n(V)}catch(H){u("No se pudo cargar la lista de profesores."),console.error(H)}finally{o(!1)}},[]);I.useEffect(()=>{F(),w()},[F,w]);const C=async()=>{if(!("docente"in k)||!k.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}y(!0),u(null);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await X0("Acompañamiento - Feedback General");const q=new os(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ne=Object.entries(k.rubricaResultados||{}).map(([te,ie])=>`- ${te}: Nivel ${ie}`).join(`
`),L=`
            Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
            Contexto de la observación:
            - Docente: ${k.docente}
            - Asignatura: ${k.asignatura}
            - Curso: ${k.curso}
            - Resultados de la pauta de observación (rúbrica):
            ${ne||"No se completó la pauta."}
            - Observaciones adicionales del evaluador:
            ${k.observacionesGenerales||"Sin observaciones adicionales."}

            Basado en esta información, tu texto debe:
            1. Iniciar con un reconocimiento positivo.
            2. Mencionar 1 o 2 fortalezas clave observadas.
            3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
            4. Concluir con una frase motivadora.
            La respuesta debe ser solo el texto de la retroalimentación.
        `,J=(await q.generateContent(L)).response.text();B(te=>({...te,retroalimentacionConsolidada:J})),alert("Retroalimentación generada con éxito.")}catch(H){console.error("Error al generar retroalimentación:",H),u("No se pudo generar la retroalimentación. Revisa la consola para más detalles.")}finally{y(!1)}},N=async H=>{if(H.preventDefault(),!("docente"in k)||!k.docente||!k.curso||!k.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{if(h)await yFe(h,k),alert("¡Actualizado correctamente!");else{const V=await bFe(k);p(V.id),B(V),alert("¡Guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await F()}catch(V){u("Error al guardar el registro."),console.error(V)}},R=()=>{B(S),p(null),f("form"),v("general"),u(null)},O=H=>{B(H),p(H.id),f("form"),v("general"),u(null)},j=async H=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await wFe(H),await F()}catch(V){u("No se pudo eliminar el registro."),console.error(V)}},U=(H,V)=>{B(q=>({...q,rubricaResultados:{...q.rubricaResultados,[H]:V}}))},P=()=>{if(!("docente"in k)||!k.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}const H=new mr,V=H.internal.pageSize.getWidth(),q=15,ne=V-q*2;let L=20;H.setFontSize(18),H.setFont("helvetica","bold"),H.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",V/2,L,{align:"center"}),L+=5,H.setLineWidth(.5),H.line(q,L,V-q,L),L+=10;const W=[["Docente:",k.docente],["Curso:",k.curso],["Asignatura:",k.asignatura],["Fecha:",new Date(k.fecha).toLocaleDateString("es-CL")],["Bloques horarios:",k.bloques||"No especificado"]];if(gl(H,{body:W,startY:L,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),L=H.lastAutoTable.finalY+10,Object.keys(k.rubricaResultados||{}).length>0){H.setFontSize(12),H.setFont("helvetica","bold"),H.text("RESULTADOS DE EVALUACIÓN",q,L),L+=8;const ie=Object.entries(k.rubricaResultados).map(([Ae,oe])=>[Ae,`Nivel ${oe}`,oe===1?"Débil":oe===2?"Incipiente":oe===3?"Satisfactorio":"Avanzado"]);gl(H,{startY:L,head:[["Criterio","Nivel","Descripción"]],body:ie,theme:"grid",headStyles:{fillColor:[245,158,11],textColor:255},margin:{left:q,right:q},styles:{fontSize:9}}),L=H.lastAutoTable.finalY+10}const J=(ie,Ae)=>{if(!Ae||Ae.trim()==="")return;L>250&&(H.addPage(),L=20),H.setFontSize(12),H.setFont("helvetica","bold"),H.text(ie,q,L),L+=8,H.setFontSize(10),H.setFont("helvetica","normal");const oe=H.splitTextToSize(Ae,ne);H.text(oe,q,L),L+=oe.length*5+10};J("OBSERVACIONES GENERALES",k.observacionesGenerales),J("RETROALIMENTACIÓN PEDAGÓGICA",k.retroalimentacionConsolidada);const te=H.getNumberOfPages();for(let ie=1;ie<=te;ie++)H.setPage(ie),H.setFontSize(8),H.setFont("helvetica","italic"),H.text(`Generado el ${new Date().toLocaleDateString("es-CL")} - Página ${ie} de ${te}`,V/2,H.internal.pageSize.getHeight()-10,{align:"center"});H.save(`Informe_Acompañamiento_${k.docente}_${k.curso}_${new Date().toISOString().split("T")[0]}.pdf`)},X=H=>{B(V=>({...V,[H.target.name]:H.target.value}))},K=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>{R(),v("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2",children:[c.jsx(mj,{className:"w-5 h-5"})," Acompañamiento"]}),c.jsxs("button",{onClick:()=>{B(S),p(null),f("form"),v("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2",children:[c.jsx(mj,{className:"w-5 h-5"})," Ciclo OPR"]})]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-3",children:[c.jsx(Rxe,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),c.jsxs("div",{className:"space-y-3",children:[a&&c.jsx("p",{children:"Cargando..."}),!a&&e.filter(H=>H.id).length>0?e.filter(H=>H.id).map(H=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:H.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[H.curso," - ",H.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(H.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>{O(H),v("general")},className:"text-green-600 hover:text-green-800 font-semibold text-sm",children:"Ver/Editar"}),c.jsx("button",{onClick:()=>{O(H),v("opr")},className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Agregar OPR"}),c.jsx("button",{onClick:()=>j(H.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1",children:c.jsx(Iw,{className:"w-4 h-4"})})]})]},H.id)):!a&&c.jsx("p",{className:"text-slate-500 italic p-4 bg-slate-100 dark:bg-slate-800 rounded-md",children:"No hay acompañamientos registrados."})]})]})]}),Z=()=>{const H=h?e.find(q=>q.id===h):null,V={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in k&&k.docente||"",curso:"curso"in k&&k.curso||"",asignatura:"asignatura"in k&&k.asignatura||"",bloques:"bloques"in k&&k.bloques||"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:g==="general"?h?"Editando Acompañamiento":"Nuevo Acompañamiento":"Gestión de Ciclo OPR"}),c.jsx("button",{type:"button",onClick:()=>f("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>v("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${g==="general"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Acompañamiento General"}),c.jsx("button",{onClick:()=>v("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${g==="opr"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Ciclo OPR"})]})}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),g==="general"&&c.jsxs("form",{onSubmit:N,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-2 text-green-700 dark:text-green-300",children:"Asistente IA - Informe General"}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[c.jsxs("button",{type:"button",onClick:C,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md flex items-center gap-2",disabled:b,children:[c.jsx(dJ,{className:"w-4 h-4"}),b?"Generando...":"Generar Retroalimentación con IA"]}),c.jsxs("button",{type:"button",onClick:()=>P(),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2",children:[c.jsx(uJ,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Genera automáticamente la retroalimentación. Luego, crea el informe en PDF."}),"retroalimentacionConsolidada"in k&&k.retroalimentacionConsolidada&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-slate-800 rounded-md shadow",children:[c.jsx("h5",{className:"font-semibold text-sm mb-2",children:"Retroalimentación Consolidada (guardada):"}),c.jsx("textarea",{readOnly:!0,rows:8,value:k.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap bg-transparent border-none p-0 focus:ring-0"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:"docente"in k?k.docente:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:"curso"in k?k.curso:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),_s.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:"asignatura"in k?k.asignatura:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),qi.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:"bloques"in k?k.bloques:"",onChange:X,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in k?k.observacionesGenerales:"",onChange:X,rows:4,placeholder:"Ingrese sus observaciones sobre la clase...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:_.map(q=>c.jsx(lt.Fragment,{children:q.criteria.map((ne,L)=>c.jsxs("tr",{children:[L===0&&c.jsx("td",{rowSpan:q.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:q.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ne.name}),ne.levels.map((W,J)=>{const te=J+1,ie="rubricaResultados"in k&&k.rubricaResultados[ne.name]===te;return c.jsx("td",{onClick:()=>U(ne.name,te),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${ie?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:W},te)})]},ne.name))},q.domain))})]})}),c.jsx("div",{className:"flex justify-end gap-4",children:c.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:[h?"Actualizar":"Guardar"," Acompañamiento"]})})]}),g==="opr"&&c.jsx(BFe,{acompanamiento:H||V,cicloToEdit:null,profesores:r,onSave:async q=>{try{const ne={...q,acompanamientoId:(H==null?void 0:H.id)||null};await EFe(ne),alert("Ciclo OPR guardado exitosamente"),f("list")}catch(ne){console.error("Error al guardar ciclo OPR:",ne),alert("Error al guardar el ciclo OPR")}},onCancel:()=>f("list")})]})};return a||i?c.jsx("div",{className:"text-center p-8",children:"Cargando..."}):c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?K():Z()})})},eR="mensajes_internos",IFe="usuarios",jte="mensajes_read_status",Fte=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},jFe=(e,t)=>{const r=nr(Ut(Ft,eR),Ln("participants","array-contains",e),Kr("fecha","desc"));return wr(r,a=>{const s=a.docs.map(i=>Fte(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},FFe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:yr.fromDate(new Date)};await ea(Ut(Ft,eR),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},OFe=async e=>{try{const t=pr(Ft,eR,e);await Ys(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},DFe=(e,t)=>{const r=pr(Ft,jte,e);return wr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},RFe=async(e,t)=>{try{const r=pr(Ft,jte,e);await xo(r,{messages:Ige(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},PFe=e=>{const t=nr(Ut(Ft,IFe),Kr("nombreCompleto","asc"));return wr(t,n=>{const a=n.docs.map(s=>Fte(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},LFe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=I.useState("inbox"),[a,s]=I.useState([]),[i,o]=I.useState([]),[l,u]=I.useState(null),[d,f]=I.useState({announcements:[],messages:[]}),[h,p]=I.useState(!0),g={para:"",asunto:"",cuerpo:""},[v,b]=I.useState(g);I.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const w=jFe(e.email,R=>{s(R),p(!1)}),C=PFe(o),N=DFe(e.id,R=>{f(R),t()});return()=>{w(),C(),N()}},[e.id,e.email,t]);const y=w=>{u(w),r==="inbox"&&!d.messages.includes(w.id)&&RFe(e.id,w.id).catch(C=>{console.error("Failed to mark message as read:",C)})},_=async w=>{if(w.preventDefault(),!v.para||!v.asunto.trim()||!v.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const C={de:e.email,para:v.para,asunto:v.asunto,cuerpo:v.cuerpo};try{await FFe(C),b(g),n("sent")}catch(N){console.error("Error sending message:",N),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},S=async w=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await OFe(w),u(null)}catch(C){console.error("Error deleting message:",C),alert("No se pudo eliminar el mensaje.")}},k=w=>{b({para:w.de,asunto:`Re: ${w.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${w.de}
Fecha: ${new Date(w.fecha).toLocaleString("es-CL")}

${w.cuerpo}`}),n("compose")},B=I.useMemo(()=>a.filter(w=>w.para===e.email),[a,e.email]),F=I.useMemo(()=>a.filter(w=>w.de===e.email),[a,e.email]);return h?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{n("compose"),u(null),b(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?B:F).map(w=>{const C=r==="inbox"&&!d.messages.includes(w.id);return c.jsxs("div",{onClick:()=>y(w),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===w.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${C?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?w.de:`Para: ${w.para}`}),C&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${C?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:w.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(w.fecha).toLocaleString("es-CL")})]},w.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:v.para,onChange:w=>b({...v,para:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(w=>w.email!==e.email).map(w=>c.jsxs("option",{value:w.email,children:[w.nombreCompleto," (",w.email,")"]},w.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:v.asunto,onChange:w=>b({...v,asunto:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:v.cuerpo,onChange:w=>b({...v,cuerpo:w.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&c.jsx("button",{onClick:()=>k(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>S(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zj=function(e,t){return zj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},zj(e,t)};function kd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");zj(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var $j=function(){return $j=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},$j.apply(this,arguments)};function ll(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,l)}u((n=n.apply(e,[])).next())})}function Lo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function PE(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var Zf=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),NN=function(e,t){return Zf.fromClientRect(e,t.getBoundingClientRect())},MFe=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Zf(0,0,n,a)},kN=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Hs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},dH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UFe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var LE=0;LE<dH.length;LE++)UFe[dH.charCodeAt(LE)]=LE;var AH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ME=0;ME<AH.length;ME++)Fb[AH.charCodeAt(ME)]=ME;var QFe=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Fb[e.charCodeAt(n)],i=Fb[e.charCodeAt(n+1)],o=Fb[e.charCodeAt(n+2)],l=Fb[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},HFe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},VFe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},bp=5,tR=11,JB=2,zFe=tR-bp,Ote=65536>>bp,$Fe=1<<bp,ZB=$Fe-1,KFe=1024>>bp,GFe=Ote+KFe,qFe=GFe,WFe=32,XFe=qFe+WFe,YFe=65536>>tR,JFe=1<<zFe,ZFe=JFe-1,fH=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},e6e=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},t6e=function(e,t){var r=QFe(e),n=Array.isArray(r)?VFe(r):new Uint32Array(r),a=Array.isArray(r)?HFe(r):new Uint16Array(r),s=24,i=fH(a,s/2,n[4]/2),o=n[5]===2?fH(a,(s+n[4])/2):e6e(n,Math.ceil((s+n[4])/4));return new r6e(n[0],n[1],n[2],n[3],i,o)},r6e=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>bp],r=(r<<JB)+(t&ZB),this.data[r];if(t<=65535)return r=this.index[Ote+(t-55296>>bp)],r=(r<<JB)+(t&ZB),this.data[r];if(t<this.highStart)return r=XFe-YFe+(t>>tR),r=this.index[r],r+=t>>bp&ZFe,r=this.index[r],r=(r<<JB)+(t&ZB),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),hH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n6e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var UE=0;UE<hH.length;UE++)n6e[hH.charCodeAt(UE)]=UE;var a6e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",mH=50,s6e=1,Dte=2,Rte=3,i6e=4,o6e=5,pH=7,Pte=8,gH=9,S0=10,Kj=11,vH=12,Gj=13,l6e=14,Ob=15,qj=16,QE=17,tb=18,c6e=19,xH=20,Wj=21,rb=22,eT=23,Kg=24,vc=25,Db=26,Rb=27,Gg=28,u6e=29,Zm=30,d6e=31,HE=32,VE=33,Xj=34,Yj=35,Jj=36,qy=37,Zj=38,e_=39,t_=40,tT=41,Lte=42,A6e=43,f6e=[9001,65288],Mte="!",Sn="×",zE="÷",eF=t6e(a6e),_f=[Zm,Jj],tF=[s6e,Dte,Rte,o6e],Ute=[S0,Pte],bH=[Rb,Db],h6e=tF.concat(Ute),yH=[Zj,e_,t_,Xj,Yj],m6e=[Ob,Gj],p6e=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=eF.get(s);if(o>mH?(a.push(!0),o-=mH):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(qj);if(o===i6e||o===Kj){if(i===0)return n.push(i),r.push(Zm);var l=r[i-1];return h6e.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(Zm))}if(n.push(i),o===d6e)return r.push(t==="strict"?Wj:qy);if(o===Lte||o===u6e)return r.push(Zm);if(o===A6e)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(qy):r.push(Zm);r.push(o)}),[n,r,a]},rT=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==S0)break}if(a===S0)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===t)return!0;if(i!==S0)break}if(o!==S0)break}return!1},wH=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===S0)r--;else return n}return 0},g6e=function(e,t,r,n,a){if(r[n]===0)return Sn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Sn;var i=s-1,o=s+1,l=t[s],u=i>=0?t[i]:0,d=t[o];if(l===Dte&&d===Rte)return Sn;if(tF.indexOf(l)!==-1)return Mte;if(tF.indexOf(d)!==-1||Ute.indexOf(d)!==-1)return Sn;if(wH(s,t)===Pte)return zE;if(eF.get(e[s])===Kj||(l===HE||l===VE)&&eF.get(e[o])===Kj||l===pH||d===pH||l===gH||[S0,Gj,Ob].indexOf(l)===-1&&d===gH||[QE,tb,c6e,Kg,Gg].indexOf(d)!==-1||wH(s,t)===rb||rT(eT,rb,s,t)||rT([QE,tb],Wj,s,t)||rT(vH,vH,s,t))return Sn;if(l===S0)return zE;if(l===eT||d===eT)return Sn;if(d===qj||l===qj)return zE;if([Gj,Ob,Wj].indexOf(d)!==-1||l===l6e||u===Jj&&m6e.indexOf(l)!==-1||l===Gg&&d===Jj||d===xH||_f.indexOf(d)!==-1&&l===vc||_f.indexOf(l)!==-1&&d===vc||l===Rb&&[qy,HE,VE].indexOf(d)!==-1||[qy,HE,VE].indexOf(l)!==-1&&d===Db||_f.indexOf(l)!==-1&&bH.indexOf(d)!==-1||bH.indexOf(l)!==-1&&_f.indexOf(d)!==-1||[Rb,Db].indexOf(l)!==-1&&(d===vc||[rb,Ob].indexOf(d)!==-1&&t[o+1]===vc)||[rb,Ob].indexOf(l)!==-1&&d===vc||l===vc&&[vc,Gg,Kg].indexOf(d)!==-1)return Sn;if([vc,Gg,Kg,QE,tb].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===vc)return Sn;if([Gg,Kg].indexOf(h)!==-1)f--;else break}if([Rb,Db].indexOf(d)!==-1)for(var f=[QE,tb].indexOf(l)!==-1?i:s;f>=0;){var h=t[f];if(h===vc)return Sn;if([Gg,Kg].indexOf(h)!==-1)f--;else break}if(Zj===l&&[Zj,e_,Xj,Yj].indexOf(d)!==-1||[e_,Xj].indexOf(l)!==-1&&[e_,t_].indexOf(d)!==-1||[t_,Yj].indexOf(l)!==-1&&d===t_||yH.indexOf(l)!==-1&&[xH,Db].indexOf(d)!==-1||yH.indexOf(d)!==-1&&l===Rb||_f.indexOf(l)!==-1&&_f.indexOf(d)!==-1||l===Kg&&_f.indexOf(d)!==-1||_f.concat(vc).indexOf(l)!==-1&&d===rb&&f6e.indexOf(e[o])===-1||_f.concat(vc).indexOf(d)!==-1&&l===tb)return Sn;if(l===tT&&d===tT){for(var p=r[s],g=1;p>0&&(p--,t[p]===tT);)g++;if(g%2!==0)return Sn}return l===HE&&d===VE?Sn:zE},v6e=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=p6e(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[vc,Zm,Lte].indexOf(o)!==-1?qy:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,l){return o&&e[l]>=19968&&e[l]<=40959}):void 0;return[n,a,i]},x6e=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===Mte,this.start=n,this.end=a}return e.prototype.slice=function(){return Hs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),b6e=function(e,t){var r=kN(e),n=v6e(r,t),a=n[0],s=n[1],i=n[2],o=r.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=Sn;u<o&&(d=g6e(r,s,a,++u,i))===Sn;);if(d!==Sn||u===o){var f=new x6e(r,d,l,u);return l=u,{value:f,done:!1}}return{done:!0,value:null}}}},y6e=1,w6e=2,Hw=4,EH=8,hS=10,CH=47,cy=92,E6e=9,C6e=32,$E=34,nb=61,_6e=35,S6e=36,N6e=37,KE=39,GE=40,ab=41,k6e=95,Ql=45,B6e=33,T6e=60,I6e=62,j6e=64,F6e=91,O6e=93,D6e=61,R6e=123,qE=63,P6e=125,_H=124,L6e=126,M6e=128,SH=65533,nT=42,np=43,U6e=44,Q6e=58,H6e=59,Wy=46,V6e=0,z6e=8,$6e=11,K6e=14,G6e=31,q6e=127,cA=-1,Qte=48,Hte=97,Vte=101,W6e=102,X6e=117,Y6e=122,zte=65,$te=69,Kte=70,J6e=85,Z6e=90,Vo=function(e){return e>=Qte&&e<=57},eOe=function(e){return e>=55296&&e<=57343},qg=function(e){return Vo(e)||e>=zte&&e<=Kte||e>=Hte&&e<=W6e},tOe=function(e){return e>=Hte&&e<=Y6e},rOe=function(e){return e>=zte&&e<=Z6e},nOe=function(e){return tOe(e)||rOe(e)},aOe=function(e){return e>=M6e},WE=function(e){return e===hS||e===E6e||e===C6e},mS=function(e){return nOe(e)||aOe(e)||e===k6e},NH=function(e){return mS(e)||Vo(e)||e===Ql},sOe=function(e){return e>=V6e&&e<=z6e||e===$6e||e>=K6e&&e<=G6e||e===q6e},d0=function(e,t){return e!==cy?!1:t!==hS},XE=function(e,t,r){return e===Ql?mS(t)||d0(t,r):mS(e)?!0:!!(e===cy&&d0(e,t))},aT=function(e,t,r){return e===np||e===Ql?Vo(t)?!0:t===Wy&&Vo(r):Vo(e===Wy?t:e)},iOe=function(e){var t=0,r=1;(e[t]===np||e[t]===Ql)&&(e[t]===Ql&&(r=-1),t++);for(var n=[];Vo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Hs.apply(void 0,n),10):0;e[t]===Wy&&t++;for(var s=[];Vo(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(Hs.apply(void 0,s),10):0;(e[t]===$te||e[t]===Vte)&&t++;var l=1;(e[t]===np||e[t]===Ql)&&(e[t]===Ql&&(l=-1),t++);for(var u=[];Vo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Hs.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,l*d)},oOe={type:2},lOe={type:3},cOe={type:4},uOe={type:13},dOe={type:8},AOe={type:21},fOe={type:9},hOe={type:10},mOe={type:11},pOe={type:12},gOe={type:14},YE={type:23},vOe={type:1},xOe={type:25},bOe={type:24},yOe={type:26},wOe={type:27},EOe={type:28},COe={type:29},_Oe={type:31},rF={type:32},Gte=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(kN(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==rF;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case $E:return this.consumeStringToken($E);case _6e:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(NH(r)||d0(n,a)){var s=XE(r,n,a)?w6e:y6e,i=this.consumeName();return{type:5,value:i,flags:s}}break;case S6e:if(this.peekCodePoint(0)===nb)return this.consumeCodePoint(),uOe;break;case KE:return this.consumeStringToken(KE);case GE:return oOe;case ab:return lOe;case nT:if(this.peekCodePoint(0)===nb)return this.consumeCodePoint(),gOe;break;case np:if(aT(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case U6e:return cOe;case Ql:var o=t,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(aT(o,l,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(XE(o,l,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(l===Ql&&u===I6e)return this.consumeCodePoint(),this.consumeCodePoint(),bOe;break;case Wy:if(aT(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case CH:if(this.peekCodePoint(0)===nT)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===nT&&(d=this.consumeCodePoint(),d===CH))return this.consumeToken();if(d===cA)return this.consumeToken()}break;case Q6e:return yOe;case H6e:return wOe;case T6e:if(this.peekCodePoint(0)===B6e&&this.peekCodePoint(1)===Ql&&this.peekCodePoint(2)===Ql)return this.consumeCodePoint(),this.consumeCodePoint(),xOe;break;case j6e:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(XE(f,h,p)){var i=this.consumeName();return{type:7,value:i}}break;case F6e:return EOe;case cy:if(d0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case O6e:return COe;case D6e:if(this.peekCodePoint(0)===nb)return this.consumeCodePoint(),dOe;break;case R6e:return mOe;case P6e:return pOe;case X6e:case J6e:var g=this.peekCodePoint(0),v=this.peekCodePoint(1);return g===np&&(qg(v)||v===qE)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case _H:if(this.peekCodePoint(0)===nb)return this.consumeCodePoint(),fOe;if(this.peekCodePoint(0)===_H)return this.consumeCodePoint(),AOe;break;case L6e:if(this.peekCodePoint(0)===nb)return this.consumeCodePoint(),hOe;break;case cA:return rF}return WE(t)?(this.consumeWhiteSpace(),_Oe):Vo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):mS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Hs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();qg(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===qE&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Hs.apply(void 0,t.map(function(l){return l===qE?Qte:l})),16),s=parseInt(Hs.apply(void 0,t.map(function(l){return l===qE?Kte:l})),16);return{type:30,start:a,end:s}}var i=parseInt(Hs.apply(void 0,t),16);if(this.peekCodePoint(0)===Ql&&qg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];qg(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Hs.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===GE?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===GE?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===cA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===KE||r===$E){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===cA||this.peekCodePoint(0)===ab)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),YE)}for(;;){var a=this.consumeCodePoint();if(a===cA||a===ab)return{type:22,value:Hs.apply(void 0,t)};if(WE(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===cA||this.peekCodePoint(0)===ab?(this.consumeCodePoint(),{type:22,value:Hs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),YE);if(a===$E||a===KE||a===GE||sOe(a))return this.consumeBadUrlRemnants(),YE;if(a===cy)if(d0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),YE;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;WE(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===ab||t===cA)return;d0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Hs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===cA||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===hS)return this._value.splice(0,n),vOe;if(a===cy){var s=this._value[n+1];s!==cA&&s!==void 0&&(s===hS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):d0(a,s)&&(r+=this.consumeStringSlice(n),r+=Hs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=Hw,n=this.peekCodePoint(0);for((n===np||n===Ql)&&t.push(this.consumeCodePoint());Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===Wy&&Vo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=EH;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===$te||n===Vte)&&((a===np||a===Ql)&&Vo(s)||Vo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=EH;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[iOe(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(XE(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===N6e?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(qg(t)){for(var r=Hs(t);qg(this.peekCodePoint(0))&&r.length<6;)r+=Hs(this.consumeCodePoint());WE(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||eOe(n)||n>1114111?SH:n}return t===cA?SH:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(NH(r))t+=Hs(r);else if(d0(r,this.peekCodePoint(0)))t+=Hs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),qte=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new Gte;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||NOe(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?rF:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),Vw=function(e){return e.type===15},Kx=function(e){return e.type===17},Ca=function(e){return e.type===20},SOe=function(e){return e.type===0},nF=function(e,t){return Ca(e)&&e.value===t},Wte=function(e){return e.type!==31},mx=function(e){return e.type!==31&&e.type!==4},$A=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},NOe=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},nm=function(e){return e.type===17||e.type===15},Ai=function(e){return e.type===16||nm(e)},Xte=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},go={type:17,number:0,flags:Hw},rR={type:16,number:50,flags:Hw},N0={type:16,number:100,flags:Hw},Pb=function(e,t,r){var n=e[0],a=e[1];return[Da(n,t),Da(typeof a<"u"?a:n,r)]},Da=function(e,t){if(e.type===16)return e.number/100*t;if(Vw(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Yte="deg",Jte="grad",Zte="rad",ere="turn",BN={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Yte:return Math.PI*t.number/180;case Jte:return Math.PI/200*t.number;case Zte:return t.number;case ere:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},tre=function(e){return e.type===15&&(e.unit===Yte||e.unit===Jte||e.unit===Zte||e.unit===ere)},rre=function(e){var t=e.filter(Ca).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[go,go];case"to top":case"bottom":return Su(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[go,N0];case"to right":case"left":return Su(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[N0,N0];case"to bottom":case"top":return Su(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[N0,go];case"to left":case"right":return Su(270)}return 0},Su=function(e){return Math.PI*e/180},D0={name:"color",parse:function(e,t){if(t.type===18){var r=kOe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return k0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return k0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return k0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return k0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=Hf[t.value.toUpperCase()];if(typeof o<"u")return o}return Hf.TRANSPARENT}},R0=function(e){return(255&e)===0},Qi=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},k0=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},kH=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},BH=function(e,t){var r=t.filter(mx);if(r.length===3){var n=r.map(kH),a=n[0],s=n[1],i=n[2];return k0(a,s,i,1)}if(r.length===4){var o=r.map(kH),a=o[0],s=o[1],i=o[2],l=o[3];return k0(a,s,i,l)}return 0};function sT(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var TH=function(e,t){var r=t.filter(mx),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Su(n.number):BN.parse(e,n))/(Math.PI*2),l=Ai(a)?a.number/100:0,u=Ai(s)?s.number/100:0,d=typeof i<"u"&&Ai(i)?Da(i,1):1;if(l===0)return k0(u*255,u*255,u*255,1);var f=u<=.5?u*(l+1):u+l-u*l,h=u*2-f,p=sT(h,f,o+1/3),g=sT(h,f,o),v=sT(h,f,o-1/3);return k0(p*255,g*255,v*255,d)},kOe={hsl:TH,hsla:TH,rgb:BH,rgba:BH},uy=function(e,t){return D0.parse(e,qte.create(t).parseComponentValue())},Hf={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},BOe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ca(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},TOe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},TN=function(e,t){var r=D0.parse(e,t[0]),n=t[1];return n&&Ai(n)?{color:r,stop:n}:{color:r,stop:null}},IH=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=go),n.stop===null&&(n.stop=N0);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var l=Da(o,t);l>s?a.push(l):a.push(s),s=l}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],p=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=p*g;u=null}}return e.map(function(v,b){var y=v.color;return{color:y,stop:Math.max(Math.min(1,a[b]/t),0)}})},IOe=function(e,t,r){var n=t/2,a=r/2,s=Da(e[0],t)-n,i=a-Da(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},jOe=function(e,t,r){var n=typeof e=="number"?e:IOe(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-l,i+l]},ud=function(e,t){return Math.sqrt(e*e+t*t)},jH=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var l=o[0],u=o[1],d=ud(r-l,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},FOe=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(ud(t,r),ud(t,r-a),ud(t-n,r),ud(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),l=jH(n,a,t,r,!0),u=l[0],d=l[1];s=ud(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(ud(t,r),ud(t,r-a),ud(t-n,r),ud(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=jH(n,a,t,r,!1),u=f[0],d=f[1];s=ud(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=Da(e.size[0],n),i=e.size.length===2?Da(e.size[1],a):s),[s,i]},OOe=function(e,t){var r=Su(180),n=[];return $A(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=rre(a);return}else if(tre(i)){r=BN.parse(e,i);return}}var o=TN(e,a);n.push(o)}),{angle:r,stops:n,type:1}},JE=function(e,t){var r=Su(180),n=[];return $A(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=rre(a);return}else if(tre(i)){r=(BN.parse(e,i)+Su(270))%Su(360);return}}var o=TN(e,a);n.push(o)}),{angle:r,stops:n,type:1}},DOe=function(e,t){var r=Su(180),n=[],a=1,s=0,i=3,o=[];return $A(t).forEach(function(l,u){var d=l[0];if(u===0){if(Ca(d)&&d.value==="linear"){a=1;return}else if(Ca(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=D0.parse(e,d.values[0]);n.push({stop:go,color:f})}else if(d.name==="to"){var f=D0.parse(e,d.values[0]);n.push({stop:N0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(mx);if(h.length===2){var f=D0.parse(e,h[1]),p=h[0];Kx(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),a===1?{angle:(r+Su(180))%Su(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},nre="closest-side",are="farthest-side",sre="closest-corner",ire="farthest-corner",ore="circle",lre="ellipse",cre="cover",ure="contain",ROe=function(e,t){var r=0,n=3,a=[],s=[];return $A(t).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(f,h){if(u)if(Ca(h))switch(h.value){case"center":return s.push(rR),f;case"top":case"left":return s.push(go),f;case"right":case"bottom":return s.push(N0),f}else(Ai(h)||nm(h))&&s.push(h);else if(Ca(h))switch(h.value){case ore:return r=0,!1;case lre:return r=1,!1;case"at":return u=!0,!1;case nre:return n=0,!1;case cre:case are:return n=1,!1;case ure:case sre:return n=2,!1;case ire:return n=3,!1}else if(nm(h)||Ai(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},l)}if(l){var d=TN(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},ZE=function(e,t){var r=0,n=3,a=[],s=[];return $A(t).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,f){if(Ca(f))switch(f.value){case"center":return s.push(rR),!1;case"top":case"left":return s.push(go),!1;case"right":case"bottom":return s.push(N0),!1}else if(Ai(f)||nm(f))return s.push(f),!1;return d},l):o===1&&(l=i.reduce(function(d,f){if(Ca(f))switch(f.value){case ore:return r=0,!1;case lre:return r=1,!1;case ure:case nre:return n=0,!1;case are:return n=1,!1;case sre:return n=2,!1;case cre:case ire:return n=3,!1}else if(nm(f)||Ai(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},l)),l){var u=TN(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},POe=function(e){return e.type===1},LOe=function(e){return e.type===2},nR={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=dre[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function MOe(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!dre[e.name])}var dre={"linear-gradient":OOe,"-moz-linear-gradient":JE,"-ms-linear-gradient":JE,"-o-linear-gradient":JE,"-webkit-linear-gradient":JE,"radial-gradient":ROe,"-moz-radial-gradient":ZE,"-ms-radial-gradient":ZE,"-o-radial-gradient":ZE,"-webkit-radial-gradient":ZE,"-webkit-gradient":DOe},UOe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return mx(n)&&MOe(n)}).map(function(n){return nR.parse(e,n)})}},QOe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ca(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},HOe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return $A(t).map(function(r){return r.filter(Ai)}).map(Xte)}},VOe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return $A(t).map(function(r){return r.filter(Ca).map(function(n){return n.value}).join(" ")}).map(zOe)}},zOe=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Gv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Gv||(Gv={}));var $Oe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return $A(t).map(function(r){return r.filter(KOe)})}},KOe=function(e){return Ca(e)||Ai(e)},IN=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},GOe=IN("top"),qOe=IN("right"),WOe=IN("bottom"),XOe=IN("left"),jN=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Xte(r.filter(Ai))}}},YOe=jN("top-left"),JOe=jN("top-right"),ZOe=jN("bottom-right"),eDe=jN("bottom-left"),FN=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},tDe=FN("top"),rDe=FN("right"),nDe=FN("bottom"),aDe=FN("left"),ON=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return Vw(r)?r.number:0}}},sDe=ON("top"),iDe=ON("right"),oDe=ON("bottom"),lDe=ON("left"),cDe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},uDe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},dDe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ca).reduce(function(r,n){return r|ADe(n.value)},0)}},ADe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},fDe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},hDe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},pS;(function(e){e.NORMAL="normal",e.STRICT="strict"})(pS||(pS={}));var mDe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return pS.STRICT;case"normal":default:return pS.NORMAL}}},pDe={name:"line-height",initialValue:"normal",prefix:!1,type:4},FH=function(e,t){return Ca(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ai(e)?Da(e,t):t},gDe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:nR.parse(e,t)}},vDe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},aF={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},DN=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},xDe=DN("top"),bDe=DN("right"),yDe=DN("bottom"),wDe=DN("left"),EDe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ca).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},CDe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},RN=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},_De=RN("top"),SDe=RN("right"),NDe=RN("bottom"),kDe=RN("left"),BDe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},TDe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},IDe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&nF(t[0],"none")?[]:$A(t).map(function(r){for(var n={color:Hf.TRANSPARENT,offsetX:go,offsetY:go,blur:go},a=0,s=0;s<r.length;s++){var i=r[s];nm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=D0.parse(e,i)}return n})}},jDe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},FDe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=RDe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},ODe=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},DDe=function(e){var t=e.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},RDe={matrix:ODe,matrix3d:DDe},OH={type:16,number:50,flags:Hw},PDe=[OH,OH],LDe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Ai);return r.length!==2?PDe:[r[0],r[1]]}},MDe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},dy;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(dy||(dy={}));var UDe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return dy.BREAK_ALL;case"keep-all":return dy.KEEP_ALL;case"normal":default:return dy.NORMAL}}},QDe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Kx(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Are={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},HDe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Kx(t)?t.number:1}},VDe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zDe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ca).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},$De={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},KDe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},GDe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Kx(t))return t.number;if(Ca(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},qDe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ca).map(function(r){return r.value})}},WDe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},_i=function(e,t){return(e&t)!==0},XDe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},YDe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Wte),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var l=o&&Kx(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},JDe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Wte),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Ca(s)&&s.value!=="none"){var o=i&&Kx(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},ZDe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Vw).map(function(r){return Are.parse(e,r)})}},eRe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(SOe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},DH=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},tRe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&nF(t[0],"none")?[]:$A(t).map(function(r){for(var n={color:255,offsetX:go,offsetY:go,blur:go,spread:go,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];nF(i,"inset")?n.inset=!0:nm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=D0.parse(e,i)}return n})}},rRe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(Ca).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},nRe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},aRe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Vw(t)?t.number:0}},sRe=function(){function e(t,r){var n,a;this.animationDuration=sr(t,ZDe,r.animationDuration),this.backgroundClip=sr(t,BOe,r.backgroundClip),this.backgroundColor=sr(t,TOe,r.backgroundColor),this.backgroundImage=sr(t,UOe,r.backgroundImage),this.backgroundOrigin=sr(t,QOe,r.backgroundOrigin),this.backgroundPosition=sr(t,HOe,r.backgroundPosition),this.backgroundRepeat=sr(t,VOe,r.backgroundRepeat),this.backgroundSize=sr(t,$Oe,r.backgroundSize),this.borderTopColor=sr(t,GOe,r.borderTopColor),this.borderRightColor=sr(t,qOe,r.borderRightColor),this.borderBottomColor=sr(t,WOe,r.borderBottomColor),this.borderLeftColor=sr(t,XOe,r.borderLeftColor),this.borderTopLeftRadius=sr(t,YOe,r.borderTopLeftRadius),this.borderTopRightRadius=sr(t,JOe,r.borderTopRightRadius),this.borderBottomRightRadius=sr(t,ZOe,r.borderBottomRightRadius),this.borderBottomLeftRadius=sr(t,eDe,r.borderBottomLeftRadius),this.borderTopStyle=sr(t,tDe,r.borderTopStyle),this.borderRightStyle=sr(t,rDe,r.borderRightStyle),this.borderBottomStyle=sr(t,nDe,r.borderBottomStyle),this.borderLeftStyle=sr(t,aDe,r.borderLeftStyle),this.borderTopWidth=sr(t,sDe,r.borderTopWidth),this.borderRightWidth=sr(t,iDe,r.borderRightWidth),this.borderBottomWidth=sr(t,oDe,r.borderBottomWidth),this.borderLeftWidth=sr(t,lDe,r.borderLeftWidth),this.boxShadow=sr(t,tRe,r.boxShadow),this.color=sr(t,cDe,r.color),this.direction=sr(t,uDe,r.direction),this.display=sr(t,dDe,r.display),this.float=sr(t,fDe,r.cssFloat),this.fontFamily=sr(t,$De,r.fontFamily),this.fontSize=sr(t,KDe,r.fontSize),this.fontStyle=sr(t,WDe,r.fontStyle),this.fontVariant=sr(t,qDe,r.fontVariant),this.fontWeight=sr(t,GDe,r.fontWeight),this.letterSpacing=sr(t,hDe,r.letterSpacing),this.lineBreak=sr(t,mDe,r.lineBreak),this.lineHeight=sr(t,pDe,r.lineHeight),this.listStyleImage=sr(t,gDe,r.listStyleImage),this.listStylePosition=sr(t,vDe,r.listStylePosition),this.listStyleType=sr(t,aF,r.listStyleType),this.marginTop=sr(t,xDe,r.marginTop),this.marginRight=sr(t,bDe,r.marginRight),this.marginBottom=sr(t,yDe,r.marginBottom),this.marginLeft=sr(t,wDe,r.marginLeft),this.opacity=sr(t,HDe,r.opacity);var s=sr(t,EDe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=sr(t,CDe,r.overflowWrap),this.paddingTop=sr(t,_De,r.paddingTop),this.paddingRight=sr(t,SDe,r.paddingRight),this.paddingBottom=sr(t,NDe,r.paddingBottom),this.paddingLeft=sr(t,kDe,r.paddingLeft),this.paintOrder=sr(t,rRe,r.paintOrder),this.position=sr(t,TDe,r.position),this.textAlign=sr(t,BDe,r.textAlign),this.textDecorationColor=sr(t,VDe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=sr(t,zDe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=sr(t,IDe,r.textShadow),this.textTransform=sr(t,jDe,r.textTransform),this.transform=sr(t,FDe,r.transform),this.transformOrigin=sr(t,LDe,r.transformOrigin),this.visibility=sr(t,MDe,r.visibility),this.webkitTextStrokeColor=sr(t,nRe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=sr(t,aRe,r.webkitTextStrokeWidth),this.wordBreak=sr(t,UDe,r.wordBreak),this.zIndex=sr(t,QDe,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return R0(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return _i(this.display,4)||_i(this.display,33554432)||_i(this.display,268435456)||_i(this.display,536870912)||_i(this.display,67108864)||_i(this.display,134217728)},e}(),iRe=function(){function e(t,r){this.content=sr(t,XDe,r.content),this.quotes=sr(t,eRe,r.quotes)}return e}(),RH=function(){function e(t,r){this.counterIncrement=sr(t,YDe,r.counterIncrement),this.counterReset=sr(t,JDe,r.counterReset)}return e}(),sr=function(e,t,r){var n=new Gte,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new qte(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,Ca(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return BN.parse(e,s.parseComponentValue());case"color":return D0.parse(e,s.parseComponentValue());case"image":return nR.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return nm(o)?o:go;case"length-percentage":var l=s.parseComponentValue();return Ai(l)?l:go;case"time":return Are.parse(e,s.parseComponentValue())}break}},oRe="data-html2canvas-debug",lRe=function(e){var t=e.getAttribute(oRe);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},sF=function(e,t){var r=lRe(e);return r===1||t===r},KA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,sF(r,3))debugger;this.styles=new sRe(t,window.getComputedStyle(r,null)),lF(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=NN(this.context,r),sF(r,4)&&(this.flags|=16)}return e}(),cRe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",PH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var eC=0;eC<PH.length;eC++)Lb[PH.charCodeAt(eC)]=eC;var uRe=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Lb[e.charCodeAt(n)],i=Lb[e.charCodeAt(n+1)],o=Lb[e.charCodeAt(n+2)],l=Lb[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},dRe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},ARe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},yp=5,aR=11,iT=2,fRe=aR-yp,fre=65536>>yp,hRe=1<<yp,oT=hRe-1,mRe=1024>>yp,pRe=fre+mRe,gRe=pRe,vRe=32,xRe=gRe+vRe,bRe=65536>>aR,yRe=1<<fRe,wRe=yRe-1,LH=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},ERe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},CRe=function(e,t){var r=uRe(e),n=Array.isArray(r)?ARe(r):new Uint32Array(r),a=Array.isArray(r)?dRe(r):new Uint16Array(r),s=24,i=LH(a,s/2,n[4]/2),o=n[5]===2?LH(a,(s+n[4])/2):ERe(n,Math.ceil((s+n[4])/4));return new _Re(n[0],n[1],n[2],n[3],i,o)},_Re=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>yp],r=(r<<iT)+(t&oT),this.data[r];if(t<=65535)return r=this.index[fre+(t-55296>>yp)],r=(r<<iT)+(t&oT),this.data[r];if(t<this.highStart)return r=xRe-bRe+(t>>aR),r=this.index[r],r+=t>>yp&wRe,r=this.index[r],r=(r<<iT)+(t&oT),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),MH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",SRe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tC=0;tC<MH.length;tC++)SRe[MH.charCodeAt(tC)]=tC;var NRe=1,lT=2,cT=3,UH=4,QH=5,kRe=7,HH=8,uT=9,dT=10,VH=11,zH=12,$H=13,KH=14,AT=15,BRe=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},TRe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},IRe=CRe(cRe),vu="×",fT="÷",jRe=function(e){return IRe.get(e)},FRe=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===lT&&i===cT)return vu;if(s===lT||s===cT||s===UH||i===lT||i===cT||i===UH)return fT;if(s===HH&&[HH,uT,VH,zH].indexOf(i)!==-1||(s===VH||s===uT)&&(i===uT||i===dT)||(s===zH||s===dT)&&i===dT||i===$H||i===QH||i===kRe||s===NRe)return vu;if(s===$H&&i===KH){for(;a===QH;)a=t[--n];if(a===KH)return vu}if(s===AT&&i===AT){for(var o=0;a===AT;)o++,a=t[--n];if(o%2===0)return vu}return fT},ORe=function(e){var t=BRe(e),r=t.length,n=0,a=0,s=t.map(jRe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=vu;n<r&&(i=FRe(t,s,++n))===vu;);if(i!==vu||n===r){var o=TRe.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},DRe=function(e){for(var t=ORe(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},RRe=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},PRe=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=kN(n.data).map(function(l){return Hs(l)}),s=0,i={},o=a.every(function(l,u){r.setStart(n,s),r.setEnd(n,s+l.length);var d=r.getBoundingClientRect();s+=l.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},LRe=function(){return typeof new Image().crossOrigin<"u"},MRe=function(){return typeof new XMLHttpRequest().responseType=="string"},URe=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},GH=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},QRe=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=iF(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),qH(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",GH(l)?qH(iF(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),GH(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},iF=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},qH=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},uo={get SUPPORT_RANGE_BOUNDS(){var e=RRe(document);return Object.defineProperty(uo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=uo.SUPPORT_RANGE_BOUNDS&&PRe(document);return Object.defineProperty(uo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=URe(document);return Object.defineProperty(uo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?QRe(document):Promise.resolve(!1);return Object.defineProperty(uo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=LRe();return Object.defineProperty(uo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=MRe();return Object.defineProperty(uo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(uo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(uo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ay=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),HRe=function(e,t,r,n){var a=$Re(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(uo.SUPPORT_RANGE_BOUNDS){var l=WH(n,i,o.length).getClientRects();if(l.length>1){var u=sR(o),d=0;u.forEach(function(h){s.push(new Ay(h,Zf.fromDOMRectList(e,WH(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Ay(o,Zf.fromDOMRectList(e,l)))}else{var f=n.splitText(o.length);s.push(new Ay(o,VRe(e,n))),n=f}else uo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},VRe=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=NN(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return Zf.EMPTY},WH=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},sR=function(e){if(uo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return DRe(e)},zRe=function(e,t){if(uo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return GRe(e,t)},$Re=function(e,t){return t.letterSpacing!==0?sR(e):zRe(e,t)},KRe=[32,160,4961,65792,65793,4153,4241],GRe=function(e,t){for(var r=b6e(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=kN(i),l="";o.forEach(function(u){KRe.indexOf(u)===-1?l+=Hs(u):(l.length&&n.push(l),n.push(Hs(u)),l="")}),l.length&&n.push(l)}};!(a=r.next()).done;)s();return n},qRe=function(){function e(t,r,n){this.text=WRe(r.data,n.textTransform),this.textBounds=HRe(t,this.text,n,r)}return e}(),WRe=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(XRe,YRe);case 2:return e.toUpperCase();default:return e}},XRe=/(^|\s|:|-|\(|\))([a-z])/g,YRe=function(e,t,r){return e.length>0?t+r.toUpperCase():e},hre=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(KA),mre=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(KA),pre=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=NN(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(KA),gre=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(KA),oF=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(KA),JRe=[{type:15,flags:0,unit:"px",number:3}],ZRe=[{type:16,flags:0,number:50}],ePe=function(e){return e.width>e.height?new Zf(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Zf(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},tPe=function(e){var t=e.type===rPe?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},gS="checkbox",vS="radio",rPe="password",XH=707406591,iR=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=tPe(n),(a.type===gS||a.type===vS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=ePe(a.bounds)),a.type){case gS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=JRe;break;case vS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=ZRe;break}return a}return t}(KA),vre=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(KA),xre=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(KA),bre=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=wre(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?uy(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Hf.TRANSPARENT,i=n.contentWindow.document.body?uy(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Hf.TRANSPARENT;a.backgroundColor=R0(s)?R0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(KA),nPe=["OL","UL","MENU"],r_=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Ere(a)&&a.data.trim().length>0)r.textNodes.push(new qRe(e,a,r.styles));else if(Ev(a))if(Nre(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return r_(e,o,r,n)});else{var i=yre(e,a);i.styles.isVisible()&&(aPe(a,i,n)?i.flags|=4:sPe(i.styles)&&(i.flags|=2),nPe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?r_(e,a.shadowRoot,i,n):!xS(a)&&!Cre(a)&&!bS(a)&&r_(e,a,i,n))}},yre=function(e,t){return cF(t)?new hre(e,t):_re(t)?new mre(e,t):Cre(t)?new pre(e,t):iPe(t)?new gre(e,t):oPe(t)?new oF(e,t):lPe(t)?new iR(e,t):bS(t)?new vre(e,t):xS(t)?new xre(e,t):Sre(t)?new bre(e,t):new KA(e,t)},wre=function(e,t){var r=yre(e,t);return r.flags|=4,r_(e,t,r,r),r},aPe=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||oR(e)&&r.styles.isTransparent()},sPe=function(e){return e.isPositioned()||e.isFloating()},Ere=function(e){return e.nodeType===Node.TEXT_NODE},Ev=function(e){return e.nodeType===Node.ELEMENT_NODE},lF=function(e){return Ev(e)&&typeof e.style<"u"&&!n_(e)},n_=function(e){return typeof e.className=="object"},iPe=function(e){return e.tagName==="LI"},oPe=function(e){return e.tagName==="OL"},lPe=function(e){return e.tagName==="INPUT"},cPe=function(e){return e.tagName==="HTML"},Cre=function(e){return e.tagName==="svg"},oR=function(e){return e.tagName==="BODY"},_re=function(e){return e.tagName==="CANVAS"},YH=function(e){return e.tagName==="VIDEO"},cF=function(e){return e.tagName==="IMG"},Sre=function(e){return e.tagName==="IFRAME"},JH=function(e){return e.tagName==="STYLE"},uPe=function(e){return e.tagName==="SCRIPT"},xS=function(e){return e.tagName==="TEXTAREA"},bS=function(e){return e.tagName==="SELECT"},Nre=function(e){return e.tagName==="SLOT"},ZH=function(e){return e.tagName.indexOf("-")>0},dPe=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},e}(),eV={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},tV={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},APe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},fPe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Wg=function(e,t,r,n,a,s){return e<t||e>r?Xy(e,a,s.length>0):n.integers.reduce(function(i,o,l){for(;e>=o;)e-=o,i+=n.values[l];return i},"")+s},kre=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Ms=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(kre(Math.abs(e),s,n,function(i){return Hs(Math.floor(i%s)+t)})+a)},Vm=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return kre(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},pv=1,l0=2,c0=4,Mb=8,Sf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return Xy(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&_i(s,pv)&&o!==""?o=t[u]+o:u>1||u===1&&l===0||u===1&&l===1&&_i(s,l0)||u===1&&l===1&&_i(s,c0)&&e>100||u===1&&l>1&&_i(s,Mb)?o=t[u]+(l>0?r[l-1]:"")+o:u===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},rV="十百千萬",nV="拾佰仟萬",aV="マイナス",hT="마이너스",Xy=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Ms(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Vm(e,"〇一二三四五六七八九",a);case 6:return Wg(e,1,3999,eV,3,n).toLowerCase();case 7:return Wg(e,1,3999,eV,3,n);case 8:return Ms(e,945,969,!1,n);case 9:return Ms(e,97,122,!1,n);case 10:return Ms(e,65,90,!1,n);case 11:return Ms(e,1632,1641,!0,n);case 12:case 49:return Wg(e,1,9999,tV,3,n);case 35:return Wg(e,1,9999,tV,3,n).toLowerCase();case 13:return Ms(e,2534,2543,!0,n);case 14:case 30:return Ms(e,6112,6121,!0,n);case 15:return Vm(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Vm(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return Sf(e,"零一二三四五六七八九",rV,"負",a,l0|c0|Mb);case 47:return Sf(e,"零壹貳參肆伍陸柒捌玖",nV,"負",a,pv|l0|c0|Mb);case 42:return Sf(e,"零一二三四五六七八九",rV,"负",a,l0|c0|Mb);case 41:return Sf(e,"零壹贰叁肆伍陆柒捌玖",nV,"负",a,pv|l0|c0|Mb);case 26:return Sf(e,"〇一二三四五六七八九","十百千万",aV,a,0);case 25:return Sf(e,"零壱弐参四伍六七八九","拾百千万",aV,a,pv|l0|c0);case 31:return Sf(e,"영일이삼사오육칠팔구","십백천만",hT,s,pv|l0|c0);case 33:return Sf(e,"零一二三四五六七八九","十百千萬",hT,s,0);case 32:return Sf(e,"零壹貳參四五六七八九","拾百千",hT,s,pv|l0|c0);case 18:return Ms(e,2406,2415,!0,n);case 20:return Wg(e,1,19999,fPe,3,n);case 21:return Ms(e,2790,2799,!0,n);case 22:return Ms(e,2662,2671,!0,n);case 22:return Wg(e,1,10999,APe,3,n);case 23:return Vm(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Vm(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ms(e,3302,3311,!0,n);case 28:return Vm(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Vm(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Ms(e,3792,3801,!0,n);case 37:return Ms(e,6160,6169,!0,n);case 38:return Ms(e,4160,4169,!0,n);case 39:return Ms(e,2918,2927,!0,n);case 40:return Ms(e,1776,1785,!0,n);case 43:return Ms(e,3046,3055,!0,n);case 44:return Ms(e,3174,3183,!0,n);case 45:return Ms(e,3664,3673,!0,n);case 46:return Ms(e,3872,3881,!0,n);case 3:default:return Ms(e,48,57,!0,n)}},Bre="data-html2canvas-ignore",sV=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new dPe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=hPe(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,l=o.document,u=gPe(a).then(function(){return ll(n,void 0,void 0,function(){var d,f;return Lo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(yPe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,pPe(l)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,f)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(xPe(document.doctype)+"<html></html>"),bPe(this.referenceElement.ownerDocument,s,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},e.prototype.createElementClone=function(t){if(sF(t,2))debugger;if(_re(t))return this.createCanvasClone(t);if(YH(t))return this.createVideoClone(t);if(JH(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return cF(r)&&(cF(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),ZH(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return mT(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Ev(r)||!uPe(r)&&!r.hasAttribute(Bre)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Ev(r)||!JH(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Ev(s)&&Nre(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(Ere(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Ev(t)&&(lF(t)||n_(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&lF(a)&&(this.clonedReferenceElement=a),oR(a)&&CPe(a);var l=this.counters.parse(new RH(this.context,s)),u=this.resolvePseudoContent(t,a,i,fy.BEFORE);ZH(t)&&(r=!0),YH(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,fy.AFTER);return d&&a.appendChild(d),this.counters.pop(l),(s&&(this.options.copyStyles||n_(t))&&!Sre(t)||r)&&mT(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(xS(t)||bS(t))&&(xS(a)||bS(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new RH(this.context,n));var l=new iRe(this.context,n),u=o.createElement("html2canvaspseudoelement");mT(n,u),l.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var h=o.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(Ca);p.length&&u.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(mx),v=g[0],b=g[1];if(v&&Ca(v)){var y=s.counters.getCounterValue(v.value),_=b&&Ca(b)?aF.parse(s.context,b.value):3;u.appendChild(o.createTextNode(Xy(y,_,!1)))}}else if(f.name==="counters"){var S=f.values.filter(mx),v=S[0],k=S[1],b=S[2];if(v&&Ca(v)){var B=s.counters.getCounterValues(v.value),F=b&&Ca(b)?aF.parse(s.context,b.value):3,w=k&&k.type===0?k.value:"",C=B.map(function(O){return Xy(O,F,!1)}).join(w);u.appendChild(o.createTextNode(C))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(DH(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(DH(l.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=uF+" "+dF;var d=a===fy.BEFORE?" "+uF:" "+dF;return n_(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),fy;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(fy||(fy={}));var hPe=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(Bre,"true"),e.body.appendChild(r),r},mPe=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},pPe=function(e){return Promise.all([].slice.call(e.images,0).map(mPe))},gPe=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},vPe=["all","d","content"],mT=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);vPe.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},xPe=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},bPe=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},yPe=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},wPe=":before",EPe=":after",uF="___html2canvas___pseudoelement_before",dF="___html2canvas___pseudoelement_after",iV=`{
    content: "" !important;
    display: none !important;
}`,CPe=function(e){_Pe(e,"."+uF+wPe+iV+`
         .`+dF+EPe+iV)},_Pe=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},Tre=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),SPe=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(gT(t)||TPe(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return ll(this,void 0,void 0,function(){var r,n,a,s,i=this;return Lo(this,function(o){switch(o.label){case 0:return r=Tre.isSameOrigin(t),n=!pT(t)&&this._options.useCORS===!0&&uo.SUPPORT_CORS_IMAGES&&!r,a=!pT(t)&&!r&&!gT(t)&&typeof this._options.proxy=="string"&&uo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!pT(t)&&!gT(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(IPe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=uo.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(l.response)}else i("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}l.send()})},e}(),NPe=/^data:image\/svg\+xml/i,kPe=/^data:image\/.*;base64,/i,BPe=/^data:image\/.*/i,TPe=function(e){return uo.SUPPORT_SVG_DRAWING||!jPe(e)},pT=function(e){return BPe.test(e)},IPe=function(e){return kPe.test(e)},gT=function(e){return e.substr(0,4)==="blob"},jPe=function(e){return e.substr(-3).toLowerCase()==="svg"||NPe.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Xg=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},rC=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Xg(this.start,this.startControl,t),a=Xg(this.startControl,this.endControl,t),s=Xg(this.endControl,this.end,t),i=Xg(n,a,t),o=Xg(a,s,t),l=Xg(i,o,t);return r?new e(this.start,n,i,l):new e(l,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),bu=function(e){return e.type===1},FPe=function(){function e(t){var r=t.styles,n=t.bounds,a=Pb(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=Pb(r.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],d=Pb(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],p=Pb(r.borderBottomLeftRadius,n.width,n.height),g=p[0],v=p[1],b=[];b.push((s+l)/n.width),b.push((g+f)/n.width),b.push((i+v)/n.height),b.push((u+h)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,i/=y,l/=y,u/=y,f/=y,h/=y,g/=y,v/=y);var _=n.width-l,S=n.height-h,k=n.width-f,B=n.height-v,F=r.borderTopWidth,w=r.borderRightWidth,C=r.borderBottomWidth,N=r.borderLeftWidth,R=Da(r.paddingTop,t.bounds.width),O=Da(r.paddingRight,t.bounds.width),j=Da(r.paddingBottom,t.bounds.width),U=Da(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?qa(n.left+N/3,n.top+F/3,s-N/3,i-F/3,sa.TOP_LEFT):new ar(n.left+N/3,n.top+F/3),this.topRightBorderDoubleOuterBox=s>0||i>0?qa(n.left+_,n.top+F/3,l-w/3,u-F/3,sa.TOP_RIGHT):new ar(n.left+n.width-w/3,n.top+F/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?qa(n.left+k,n.top+S,f-w/3,h-C/3,sa.BOTTOM_RIGHT):new ar(n.left+n.width-w/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=g>0||v>0?qa(n.left+N/3,n.top+B,g-N/3,v-C/3,sa.BOTTOM_LEFT):new ar(n.left+N/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?qa(n.left+N*2/3,n.top+F*2/3,s-N*2/3,i-F*2/3,sa.TOP_LEFT):new ar(n.left+N*2/3,n.top+F*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?qa(n.left+_,n.top+F*2/3,l-w*2/3,u-F*2/3,sa.TOP_RIGHT):new ar(n.left+n.width-w*2/3,n.top+F*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?qa(n.left+k,n.top+S,f-w*2/3,h-C*2/3,sa.BOTTOM_RIGHT):new ar(n.left+n.width-w*2/3,n.top+n.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||v>0?qa(n.left+N*2/3,n.top+B,g-N*2/3,v-C*2/3,sa.BOTTOM_LEFT):new ar(n.left+N*2/3,n.top+n.height-C*2/3),this.topLeftBorderStroke=s>0||i>0?qa(n.left+N/2,n.top+F/2,s-N/2,i-F/2,sa.TOP_LEFT):new ar(n.left+N/2,n.top+F/2),this.topRightBorderStroke=s>0||i>0?qa(n.left+_,n.top+F/2,l-w/2,u-F/2,sa.TOP_RIGHT):new ar(n.left+n.width-w/2,n.top+F/2),this.bottomRightBorderStroke=f>0||h>0?qa(n.left+k,n.top+S,f-w/2,h-C/2,sa.BOTTOM_RIGHT):new ar(n.left+n.width-w/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=g>0||v>0?qa(n.left+N/2,n.top+B,g-N/2,v-C/2,sa.BOTTOM_LEFT):new ar(n.left+N/2,n.top+n.height-C/2),this.topLeftBorderBox=s>0||i>0?qa(n.left,n.top,s,i,sa.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=l>0||u>0?qa(n.left+_,n.top,l,u,sa.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?qa(n.left+k,n.top+S,f,h,sa.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||v>0?qa(n.left,n.top+B,g,v,sa.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?qa(n.left+N,n.top+F,Math.max(0,s-N),Math.max(0,i-F),sa.TOP_LEFT):new ar(n.left+N,n.top+F),this.topRightPaddingBox=l>0||u>0?qa(n.left+Math.min(_,n.width-w),n.top+F,_>n.width+w?0:Math.max(0,l-w),Math.max(0,u-F),sa.TOP_RIGHT):new ar(n.left+n.width-w,n.top+F),this.bottomRightPaddingBox=f>0||h>0?qa(n.left+Math.min(k,n.width-N),n.top+Math.min(S,n.height-C),Math.max(0,f-w),Math.max(0,h-C),sa.BOTTOM_RIGHT):new ar(n.left+n.width-w,n.top+n.height-C),this.bottomLeftPaddingBox=g>0||v>0?qa(n.left+N,n.top+Math.min(B,n.height-C),Math.max(0,g-N),Math.max(0,v-C),sa.BOTTOM_LEFT):new ar(n.left+N,n.top+n.height-C),this.topLeftContentBox=s>0||i>0?qa(n.left+N+U,n.top+F+R,Math.max(0,s-(N+U)),Math.max(0,i-(F+R)),sa.TOP_LEFT):new ar(n.left+N+U,n.top+F+R),this.topRightContentBox=l>0||u>0?qa(n.left+Math.min(_,n.width+N+U),n.top+F+R,_>n.width+N+U?0:l-N+U,u-(F+R),sa.TOP_RIGHT):new ar(n.left+n.width-(w+O),n.top+F+R),this.bottomRightContentBox=f>0||h>0?qa(n.left+Math.min(k,n.width-(N+U)),n.top+Math.min(S,n.height+F+R),Math.max(0,f-(w+O)),h-(C+j),sa.BOTTOM_RIGHT):new ar(n.left+n.width-(w+O),n.top+n.height-(C+j)),this.bottomLeftContentBox=g>0||v>0?qa(n.left+N+U,n.top+B,Math.max(0,g-(N+U)),v-(C+j),sa.BOTTOM_LEFT):new ar(n.left+N+U,n.top+n.height-(C+j))}return e}(),sa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(sa||(sa={}));var qa=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,l=e+r,u=t+n;switch(a){case sa.TOP_LEFT:return new rC(new ar(e,u),new ar(e,u-o),new ar(l-i,t),new ar(l,t));case sa.TOP_RIGHT:return new rC(new ar(e,t),new ar(e+i,t),new ar(l,u-o),new ar(l,u));case sa.BOTTOM_RIGHT:return new rC(new ar(l,t),new ar(l,t+o),new ar(e+i,u),new ar(e,u));case sa.BOTTOM_LEFT:default:return new rC(new ar(l,u),new ar(l-i,u),new ar(e,t+o),new ar(e,t))}},yS=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},OPe=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},wS=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},DPe=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),nC=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),RPe=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),PPe=function(e){return e.type===0},Ire=function(e){return e.type===1},LPe=function(e){return e.type===2},oV=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},MPe=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},jre=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Fre=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new FPe(this.container),this.container.styles.opacity<1&&this.effects.push(new RPe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new DPe(n,a,s))}if(this.container.styles.overflowX!==0){var i=yS(this.curves),o=wS(this.curves);oV(i,o)?this.effects.push(new nC(i,6)):(this.effects.push(new nC(i,2)),this.effects.push(new nC(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!Ire(l)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=yS(n.curves),o=wS(n.curves);oV(i,o)||a.unshift(new nC(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(l){return _i(l.target,t)})},e}(),AF=function(e,t,r,n){e.container.elements.forEach(function(a){var s=_i(a.flags,4),i=_i(a.flags,2),o=new Fre(a,e);_i(a.styles.display,2048)&&n.push(o);var l=_i(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new jre(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,v){return f>g.element.container.styles.zIndex.order?(h=v,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var p=0;u.positiveZIndex.some(function(g,v){return f>=g.element.container.styles.zIndex.order?(p=v+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);AF(o,d,s?d:r,l)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),AF(o,t,r,l);_i(a.flags,8)&&Ore(a,l)})},Ore=function(e,t){for(var r=e instanceof oF?e.start:1,n=e instanceof oF?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof gre&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Xy(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},UPe=function(e){var t=new Fre(e,null),r=new jre(t),n=[];return AF(t,r,r,n),Ore(t.container,n),r},lV=function(e,t){switch(t){case 0:return Nu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Nu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Nu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Nu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},QPe=function(e,t){switch(t){case 0:return Nu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Nu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Nu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Nu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},HPe=function(e,t){switch(t){case 0:return Nu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Nu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Nu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Nu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},VPe=function(e,t){switch(t){case 0:return aC(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return aC(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return aC(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return aC(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},aC=function(e,t){var r=[];return bu(e)?r.push(e.subdivide(.5,!1)):r.push(e),bu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Nu=function(e,t,r,n){var a=[];return bu(e)?a.push(e.subdivide(.5,!1)):a.push(e),bu(r)?a.push(r.subdivide(.5,!0)):a.push(r),bu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),bu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Dre=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},ES=function(e){var t=e.styles,r=e.bounds,n=Da(t.paddingLeft,r.width),a=Da(t.paddingRight,r.width),s=Da(t.paddingTop,r.width),i=Da(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},zPe=function(e,t){return e===0?t.bounds:e===2?ES(t):Dre(t)},$Pe=function(e,t){return e===0?t.bounds:e===2?ES(t):Dre(t)},vT=function(e,t,r){var n=zPe(gv(e.styles.backgroundOrigin,t),e),a=$Pe(gv(e.styles.backgroundClip,t),e),s=KPe(gv(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],l=Pb(gv(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=GPe(gv(e.styles.backgroundRepeat,t),l,s,n,a),d=Math.round(n.left+l[0]),f=Math.round(n.top+l[1]);return[u,d,f,i,o]},Yg=function(e){return Ca(e)&&e.value===Gv.AUTO},sC=function(e){return typeof e=="number"},KPe=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(Ai(i)&&o&&Ai(o))return[Da(i,r.width),Da(o,r.height)];var l=sC(s);if(Ca(i)&&(i.value===Gv.CONTAIN||i.value===Gv.COVER)){if(sC(s)){var u=r.width/r.height;return u<s!=(i.value===Gv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=sC(n),f=sC(a),h=d||f;if(Yg(i)&&(!o||Yg(o))){if(d&&f)return[n,a];if(!l&&!h)return[r.width,r.height];if(h&&l){var p=d?n:a*s,g=f?a:n/s;return[p,g]}var v=d?n:r.width,b=f?a:r.height;return[v,b]}if(l){var y=0,_=0;return Ai(i)?y=Da(i,r.width):Ai(o)&&(_=Da(o,r.height)),Yg(i)?y=_*s:(!o||Yg(o))&&(_=y/s),[y,_]}var S=null,k=null;if(Ai(i)?S=Da(i,r.width):o&&Ai(o)&&(k=Da(o,r.height)),S!==null&&(!o||Yg(o))&&(k=d&&f?S/n*a:r.height),k!==null&&Yg(i)&&(S=d&&f?k/a*n:r.width),S!==null&&k!==null)return[S,k];throw new Error("Unable to calculate background-size for element")},gv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},GPe=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],l=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(l+n.top+i)),new ar(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i+l)),new ar(Math.round(n.left+s),Math.round(n.top+i+l))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},qPe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",cV="Hidden Text",WPe=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=qPe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(cV)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(cV)),n.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),Rre=function(){function e(t,r){this.context=t,this.options=r}return e}(),XPe=1e4,YPe=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new WPe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),LPe(r)&&(this.ctx.globalAlpha=r.opacity),PPe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Ire(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return ll(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return ll(this,void 0,void 0,function(){return Lo(this,function(n){switch(n.label){case 0:if(_i(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=sR(r.text);i.reduce(function(o,l){return s.ctx.fillText(l,o,r.bounds.top+a),o+s.ctx.measureText(l).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=rLe(r.fontFamily).join(", "),s=Vw(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return ll(this,void 0,void 0,function(){var a,s,i,o,l,u,d,f,h=this;return Lo(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(v){switch(v){case 0:h.ctx.fillStyle=Qi(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var b=n.textShadow;b.length&&g.text.trim().length&&(b.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Qi(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Qi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Qi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=ES(r),i=wS(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return ll(this,void 0,void 0,function(){var n,a,s,i,o,l,_,_,u,d,f,h,k,p,g,B,v,b,y,_,S,k,B;return Lo(this,function(F){switch(F.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,F.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,s)]):[3,4];case 2:F.sent(),F.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof hre))return[3,8];F.label=5;case 5:return F.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return _=F.sent(),this.renderReplacedElement(n,a,_),[3,8];case 7:return F.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof mre&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof pre))return[3,12];F.label=9;case 9:return F.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return _=F.sent(),this.renderReplacedElement(n,a,_),[3,12];case 11:return F.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof bre&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=F.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),F.label=14;case 14:if(n instanceof iR&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===gS?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ar(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ar(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ar(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ar(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ar(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Qi(XH),this.ctx.fill(),this.ctx.restore()):n.type===vS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Qi(XH),this.ctx.fill(),this.ctx.restore())),JPe(n)&&n.value.length){switch(h=this.createFontStyle(s),k=h[0],p=h[1],g=this.fontMetrics.getMetrics(k,p).baseline,this.ctx.font=k,this.ctx.fillStyle=Qi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=eLe(n.styles.textAlign),B=ES(n),v=0,n.styles.textAlign){case 1:v+=B.width/2;break;case 2:v+=B.width;break}b=B.add(v,0,0,-B.height/2+1),this.ctx.save(),this.path([new ar(B.left,B.top),new ar(B.left+B.width,B.top),new ar(B.left+B.width,B.top+B.height),new ar(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ay(n.value,b),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!_i(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];_=void 0,S=y.url,F.label=15;case 15:return F.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return _=F.sent(),this.ctx.drawImage(_,n.bounds.left-(_.width+10),n.bounds.top),[3,18];case 17:return F.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(k=this.createFontStyle(s)[0],this.ctx.font=k,this.ctx.fillStyle=Qi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new Zf(n.bounds.left,n.bounds.top+Da(n.styles.paddingTop,n.bounds.width),n.bounds.width,FH(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ay(r.listValue,B),s.letterSpacing,FH(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),F.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return ll(this,void 0,void 0,function(){var n,a,y,s,i,y,o,l,y,u,d,y,f,h,y,p,g,y,v,b,y;return Lo(this,function(_){switch(_.label){case 0:if(_i(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:_.sent(),n=0,a=r.negativeZIndex,_.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:_.sent(),_.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:_.sent(),s=0,i=r.nonInlineLevel,_.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:_.sent(),_.label=9;case 9:return s++,[3,7];case 10:o=0,l=r.nonPositionedFloats,_.label=11;case 11:return o<l.length?(y=l[o],[4,this.renderStack(y)]):[3,14];case 12:_.sent(),_.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,_.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:_.sent(),_.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,_.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:_.sent(),_.label=21;case 21:return f++,[3,19];case 22:p=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,_.label=23;case 23:return p<g.length?(y=g[p],[4,this.renderStack(y)]):[3,26];case 24:_.sent(),_.label=25;case 25:return p++,[3,23];case 26:v=0,b=r.positiveZIndex,_.label=27;case 27:return v<b.length?(y=b[v],[4,this.renderStack(y)]):[3,30];case 28:_.sent(),_.label=29;case 29:return v++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=bu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),bu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return ll(this,void 0,void 0,function(){var n,a,s,i,o,l;return Lo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,p,R,K,Z,U,P,C,g,R,K,Z,U,P,v,b,y,_,S,k,B,F,w,C,N,R,O,j,U,P,X,K,Z,H,V,q,ne,L,W,J,te;return Lo(this,function(ie){switch(ie.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ie.sent(),[3,4];case 3:return ie.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(p=vT(r,n,[f.width,f.height,f.width/f.height]),R=p[0],K=p[1],Z=p[2],U=p[3],P=p[4],C=s.ctx.createPattern(s.resizeImage(f,U,P),"repeat"),s.renderRepeat(R,C,K,Z)),[3,6];case 5:POe(d)?(g=vT(r,n,[null,null,null]),R=g[0],K=g[1],Z=g[2],U=g[3],P=g[4],v=jOe(d.angle,U,P),b=v[0],y=v[1],_=v[2],S=v[3],k=v[4],B=document.createElement("canvas"),B.width=U,B.height=P,F=B.getContext("2d"),w=F.createLinearGradient(y,S,_,k),IH(d.stops,b).forEach(function(Ae){return w.addColorStop(Ae.stop,Qi(Ae.color))}),F.fillStyle=w,F.fillRect(0,0,U,P),U>0&&P>0&&(C=s.ctx.createPattern(B,"repeat"),s.renderRepeat(R,C,K,Z))):LOe(d)&&(N=vT(r,n,[null,null,null]),R=N[0],O=N[1],j=N[2],U=N[3],P=N[4],X=d.position.length===0?[rR]:d.position,K=Da(X[0],U),Z=Da(X[X.length-1],P),H=FOe(d,K,Z,U,P),V=H[0],q=H[1],V>0&&q>0&&(ne=s.ctx.createRadialGradient(O+K,j+Z,0,O+K,j+Z,V),IH(d.stops,V*2).forEach(function(Ae){return ne.addColorStop(Ae.stop,Qi(Ae.color))}),s.path(R),s.ctx.fillStyle=ne,V!==q?(L=r.bounds.left+.5*r.bounds.width,W=r.bounds.top+.5*r.bounds.height,J=q/V,te=1/J,s.ctx.save(),s.ctx.translate(L,W),s.ctx.transform(1,0,0,J,0,0),s.ctx.translate(-L,-W),s.ctx.fillRect(O,te*(j-W)+W,U,P*te),s.ctx.restore()):s.ctx.fill())),ie.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,a(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return ll(this,void 0,void 0,function(){return Lo(this,function(s){return this.path(lV(a,n)),this.ctx.fillStyle=Qi(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return ll(this,void 0,void 0,function(){var i,o;return Lo(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return l.sent(),[2];case 2:return i=QPe(s,a),this.path(i),this.ctx.fillStyle=Qi(r),this.ctx.fill(),o=HPe(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return ll(this,void 0,void 0,function(){var n,a,s,i,o,l,u,d,f=this;return Lo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!R0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=ZPe(gv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),R0(n.backgroundColor)||(this.ctx.fillStyle=Qi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var g=yS(r.curves),v=p.inset?0:XPe,b=MPe(g,-v+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(g),f.ctx.clip(),f.mask(b)):(f.mask(g),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=p.offsetX.number+v,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=Qi(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?Qi(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:o=0,l=0,u=s,h.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!R0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return ll(this,void 0,void 0,function(){var o,l,u,d,f,h,p,g,v,b,y,_,S,k,B,F,B,F;return Lo(this,function(w){return this.ctx.save(),o=VPe(s,a),l=lV(s,a),i===2&&(this.path(l),this.ctx.clip()),bu(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),bu(l[1])?(f=l[1].end.x,h=l[1].end.y):(f=l[1].x,h=l[1].y),a===0||a===2?p=Math.abs(u-f):p=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),g=n<3?n*3:n*2,v=n<3?n*2:n,i===3&&(g=n,v=n),b=!0,p<=g*2?b=!1:p<=g*2+v?(y=p/(2*g+v),g*=y,v*=y):(_=Math.floor((p+v)/(g+v)),S=(p-_*g)/(_-1),k=(p-(_+1)*g)/_,v=k<=0||Math.abs(v-S)<Math.abs(v-k)?S:k),b&&(i===3?this.ctx.setLineDash([0,g+v]):this.ctx.setLineDash([g,v])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Qi(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(bu(l[0])&&(B=l[3],F=l[0],this.ctx.beginPath(),this.formatPath([new ar(B.end.x,B.end.y),new ar(F.start.x,F.start.y)]),this.ctx.stroke()),bu(l[1])&&(B=l[1],F=l[2],this.ctx.beginPath(),this.formatPath([new ar(B.end.x,B.end.y),new ar(F.start.x,F.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return ll(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Qi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=UPe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Rre),JPe=function(e){return e instanceof xre||e instanceof vre?!0:e instanceof iR&&e.type!==vS&&e.type!==gS},ZPe=function(e,t){switch(e){case 0:return yS(t);case 2:return OPe(t);case 1:default:return wS(t)}},eLe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},tLe=["-apple-system","system-ui"],rLe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return tLe.indexOf(t)===-1}):e},nLe=function(e){kd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return ll(this,void 0,void 0,function(){var n,a;return Lo(this,function(s){switch(s.label){case 0:return n=iF(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,aLe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Qi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Rre),aLe=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},sLe=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,PE([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,PE([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,PE([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,PE([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),iLe=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new sLe({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new SPe(this,t)}return e.instanceCount=1,e}(),CS=function(e,t){return t===void 0&&(t={}),oLe(e,t)};typeof window<"u"&&Tre.setContext(window);var oLe=function(e,t){return ll(void 0,void 0,void 0,function(){var r,n,a,s,i,o,l,u,d,f,h,p,g,v,b,y,_,S,k,B,w,F,w,C,N,R,O,j,U,P,X,K,Z,H,V,q,ne,L,W,J;return Lo(this,function(te){switch(te.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(C=t.allowTaint)!==null&&C!==void 0?C:!1,imageTimeout:(N=t.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:t.proxy,useCORS:(R=t.useCORS)!==null&&R!==void 0?R:!1},s=$j({logging:(O=t.logging)!==null&&O!==void 0?O:!0,cache:t.cache},a),i={windowWidth:(j=t.windowWidth)!==null&&j!==void 0?j:n.innerWidth,windowHeight:(U=t.windowHeight)!==null&&U!==void 0?U:n.innerHeight,scrollX:(P=t.scrollX)!==null&&P!==void 0?P:n.pageXOffset,scrollY:(X=t.scrollY)!==null&&X!==void 0?X:n.pageYOffset},o=new Zf(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new iLe(s,o),u=(K=t.foreignObjectRendering)!==null&&K!==void 0?K:!1,d={allowTaint:(Z=t.allowTaint)!==null&&Z!==void 0?Z:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new sV(l,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=te.sent(),g=oR(h)||cPe(h)?MFe(h.ownerDocument):NN(l,h),v=g.width,b=g.height,y=g.left,_=g.top,S=lLe(l,h,t.backgroundColor),k={canvas:t.canvas,backgroundColor:S,scale:(V=(H=t.scale)!==null&&H!==void 0?H:n.devicePixelRatio)!==null&&V!==void 0?V:1,x:((q=t.x)!==null&&q!==void 0?q:0)+y,y:((ne=t.y)!==null&&ne!==void 0?ne:0)+_,width:(L=t.width)!==null&&L!==void 0?L:Math.ceil(v),height:(W=t.height)!==null&&W!==void 0?W:Math.ceil(b)},u?(l.logger.debug("Document cloned, using foreign object rendering"),w=new nLe(l,k),[4,w.render(h)]):[3,3];case 2:return B=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+y+","+_+" with size "+v+"x"+b+" using computed rendering"),l.logger.debug("Starting DOM parsing"),F=wre(l,h),S===F.styles.backgroundColor&&(F.styles.backgroundColor=Hf.TRANSPARENT),l.logger.debug("Starting renderer for element at "+k.x+","+k.y+" with size "+k.width+"x"+k.height),w=new YPe(l,k),[4,w.render(F)];case 4:B=te.sent(),te.label=5;case 5:return(!((J=t.removeContainer)!==null&&J!==void 0)||J)&&(sV.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,B]}})})},lLe=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?uy(e,getComputedStyle(n.documentElement).backgroundColor):Hf.TRANSPARENT,s=n.body?uy(e,getComputedStyle(n.body).backgroundColor):Hf.TRANSPARENT,i=typeof r=="string"?uy(e,r):r===null?Hf.TRANSPARENT:4294967295;return t===n.documentElement?R0(a)?R0(s)?i:s:a:i};const cLe=Object.freeze(Object.defineProperty({__proto__:null,default:CS},Symbol.toStringTag,{value:"Module"})),PN="proyectos_interdisciplinarios",Pre="entregas_interdisciplinarias",uLe="usuarios",lR=e=>{const t=e.data();return{id:e.id,...t}},dLe=e=>{const t=nr(Ut(Ft,PN),Kr("nombreProyecto","asc"));return wr(t,n=>{const a=n.docs.map(s=>lR(s));e(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},ALe=async e=>{try{return(await ea(Ut(Ft,PN),e)).id}catch(t){throw console.error("Error al crear la planificación:",t),new Error("No se pudo crear la planificación.")}},uV=async(e,t)=>{try{const{id:r,...n}=t,a=pr(Ft,PN,e);await xo(a,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},fLe=async e=>{try{const t=pr(Ft,PN,e);await Ys(t)}catch(t){throw console.error("Error al eliminar la planificación:",t),new Error("No se pudo eliminar la planificación.")}},hLe=(e,t)=>{const r=nr(Ut(Ft,Pre),Ln("planificacionId","==",e));return wr(r,a=>{const s=a.docs.map(i=>lR(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},dV=async(e,t)=>{try{const r=pr(Ft,Pre,e);await xo(r,{feedbackProfesor:t,fechaFeedback:yr.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},mLe=e=>{const t=nr(Ut(Ft,uLe));return wr(t,n=>{const a=n.docs.map(s=>lR(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},pLe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=I.useState(null),a=I.useMemo(()=>{const l=[];return e.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[e]),s=I.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),f=new Date(`${l.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(p=>p[0]).join("").toUpperCase(),d=p=>{let g=0;for(let v=0;v<p.length;v++)g=p.charCodeAt(v)+((g<<5)-g);return g},f=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],h=Math.abs(d(l))%f.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${f[h]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[f,h]=I.useState(l.activity),p=v=>{h({...f,[v.target.name]:v.target.value})},g=()=>{d(l.planId,f),u()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:f.nombre,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:f.responsables,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:g,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(l=>{const u=s(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&c.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},gLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),vLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),xLe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),bLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),yLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),wLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),ELe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),CLe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),fF=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),n0=({icon:e,label:t,children:r,aiButton:n})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[e,c.jsx("span",{children:t})]}),n]}),r]}),_Le=({initialPlan:e,onSave:t,onCancel:r})=>{const[n,a]=I.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,i]=I.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=I.useState({nombre:"",fecha:""}),[u,d]=I.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[f,h]=I.useState(!1),[p,g]=I.useState(!1),[v,b]=I.useState(!1);I.useEffect(()=>{a(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const y=async C=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}C==="objetivos"?h(!0):g(!0);const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let R="";C==="objetivos"?R=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:R=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const X=(await(await new os(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(R)).response).text();a(K=>({...K,[C]:X.replace(/(\*\*|\*)/g,"")}))}catch(O){console.error(`Error al generar ${C}`,O),alert(`Hubo un error al generar los ${C}. Inténtelo de nuevo.`)}finally{C==="objetivos"?h(!1):g(!1)}},_=async()=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}b(!0);const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${n.descripcionProyecto}"
            Docentes responsables: "${n.docentesResponsables}"
            Asignaturas involucradas: "${n.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const X=(await(await new os(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(X);a(Z=>{var H,V,q;return{...Z,actividades:((H=K.actividades)==null?void 0:H.map(ne=>({...ne,id:crypto.randomUUID()})))||Z.actividades,fechasClave:((V=K.fechasClave)==null?void 0:V.map(ne=>({...ne,id:crypto.randomUUID()})))||Z.fechasClave,tareas:((q=K.tareas)==null?void 0:q.map((ne,L)=>({...ne,id:crypto.randomUUID(),numero:L+1})))||Z.tareas}})}catch(R){console.error("Error al generar la estructura del proyecto:",R),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{b(!1)}},S=C=>{a(N=>({...N,[C.target.name]:C.target.value}))},k=(C,N)=>{a(R=>{const O=R[C],j=O.includes(N)?O.filter(U=>U!==N):[...O,N];return{...R,[C]:j}})},B=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}a(C=>({...C,actividades:[...C.actividades||[],{...s,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},F=()=>{!o.nombre||!o.fecha||(a(C=>({...C,fechasClave:[...C.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},w=()=>{var N;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const C={id:crypto.randomUUID(),numero:(((N=n.tareas)==null?void 0:N.length)||0)+1,...u};a(R=>({...R,tareas:[...R.tareas||[],C]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(n0,{icon:c.jsx(gLe,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:S,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(n0,{icon:c.jsx(vLe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:S,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(n0,{icon:c.jsx(xLe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:_s.map(C=>c.jsx("button",{type:"button",onClick:()=>k("cursos",C),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(C)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:C},C))})}),c.jsx(n0,{icon:c.jsx(bLe,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:qi.map(C=>c.jsx("button",{type:"button",onClick:()=>k("asignaturas",C),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(C)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:C},C))})}),c.jsx(n0,{icon:c.jsx(yLe,{}),label:"Descripción del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:S,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(n0,{icon:c.jsx(wLe,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>y("objetivos"),disabled:!n.descripcionProyecto.trim()||f,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(fF,{})}),children:f?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:S,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(n0,{icon:c.jsx(ELe,{}),label:"Indicadores de Éxito",aiButton:c.jsx("button",{type:"button",onClick:()=>y("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||p,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(fF,{})}),children:p?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:S,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(n0,{icon:c.jsx(CLe,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:c.jsx("button",{type:"button",onClick:_,disabled:v||!n.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:v?"Generando...":"✨ Sugerir Estructura con IA"})}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:s.nombre,onChange:C=>i({...s,nombre:C.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:s.fechaInicio,onChange:C=>i({...s,fechaInicio:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:s.fechaFin,onChange:C=>i({...s,fechaFin:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:B,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.actividades.map(C=>c.jsx("li",{children:C.nombre},C.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:C=>l({...o,nombre:C.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:C=>l({...o,fecha:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:F,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.fechasClave.map(C=>c.jsxs("li",{children:[C.nombre," (",C.fecha,")"]},C.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:u.instrucciones,onChange:C=>d({...u,instrucciones:C.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:u.fechaEntrega,onChange:C=>d({...u,fechaEntrega:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:w,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(C=>c.jsxs("li",{children:[C.numero,". ",C.instrucciones]},C.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>t(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:e?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},AV=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(!0),[a,s]=I.useState("list"),[i,o]=I.useState(null),[l,u]=I.useState(null),[d,f]=I.useState(null);I.useEffect(()=>{n(!0);const S=dLe(k=>{t(k),n(!1)});return()=>S()},[]);const h=I.useCallback(async(S,k)=>{const B=e.find(F=>F.id===S);if(B){const F={...B,actividades:(B.actividades||[]).map(w=>w.id===k.id?k:w)};await uV(S,F)}},[e]),p=async S=>{try{"id"in S&&S.id?await uV(S.id,S):await ALe(S),s("list"),o(null)}catch(k){console.error("Error al guardar la planificación:",k),alert("No se pudo guardar la planificación.")}},g=S=>{o(S),s("form")},v=async S=>{if(console.log("ID recibido por handleDelete:",S),!S){console.error("handleDelete fue llamado con un ID inválido:",S),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await fLe(S)}catch(k){console.error("Error al eliminar la planificación:",k),alert("No se pudo eliminar la planificación.")}},b=()=>{o(null),s("form")},y=async S=>{u(S.id);const k=new mr("p","mm","a4"),B=15,F=k.internal.pageSize.getWidth(),w=k.internal.pageSize.getHeight(),C=F-B*2;let N=B;const R=22,O=14,j=11,U=()=>{k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text("Proyecto Interdisciplinario",B,12),k.text("Liceo Industrial de Recoleta",F-B,12,{align:"right"}),k.setDrawColor(220),k.line(B,15,F-B,15)},P=V=>{N+V>w-B&&(k.addPage(),U(),N=B+15)},X=(V,q)=>{if(!q||Array.isArray(q)&&q.length===0||typeof q=="string"&&!q.trim())return;const ne=10;k.setFontSize(j);const L=Array.isArray(q)?q.join(", "):String(q),W=k.splitTextToSize(L,C),J=W.length*(j*.35*1.15);P(ne+J+12),k.setFont("helvetica","bold"),k.setFontSize(O),k.setTextColor(40),k.text(V,B,N),N+=6,k.setDrawColor(200),k.line(B,N,B+30,N),N+=8,k.setFont("helvetica","normal"),k.setFontSize(j),k.setTextColor(80),k.text(W,B,N),N+=J+12};U(),N=B+20,k.setFont("helvetica","bold"),k.setFontSize(R),k.setTextColor(0);const K=k.splitTextToSize(S.nombreProyecto,C);if(k.text(K,B,N),N+=K.length*(R*.4)+10,gl(k,{startY:N,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},S.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},S.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},S.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:j,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),N=k.lastAutoTable.finalY+15,X("Descripción del Proyecto",S.descripcionProyecto),X("Objetivos de Aprendizaje",S.objetivos),X("Indicadores de Logro",S.indicadoresLogro),S.tareas&&S.tareas.length>0){const V=S.tareas.map(ne=>[ne.numero.toString(),ne.instrucciones,ne.fechaEntrega]),q=(V.length+1)*10+15;P(q+15),k.setFont("helvetica","bold"),k.setFontSize(O),k.setTextColor(40),k.text("Tareas para Estudiantes",B,N),N+=10,gl(k,{startY:N,head:[["#","Instrucciones","Fecha de Entrega"]],body:V,theme:"striped",headStyles:{fillColor:[52,73,94]}}),N=k.lastAutoTable.finalY+15}const Z=document.getElementById("gantt-container-vertical");if(Z)try{const q=(await CS(Z,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");k.addPage(),U(),N=B+15,k.setFont("helvetica","bold"),k.setFontSize(O),k.setTextColor(40),k.text("Cronograma del Proyecto",B,N),N+=10;const ne=k.getImageProperties(q),L=C,W=ne.height*L/ne.width;k.addImage(q,"PNG",B,N,L,W)}catch(V){console.error("Error generating timeline image:",V)}const H=k.internal.pages.length-1;for(let V=1;V<=H;V++)k.setPage(V),k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text(`Página ${V} de ${H}`,F-B,k.internal.pageSize.getHeight()-10,{align:"right"});k.save(`Proyecto_${S.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},_=({plan:S,onBack:k})=>{var X,K;const[B,F]=I.useState([]),[w,C]=I.useState([]),[N,R]=I.useState(((X=S.tareas)==null?void 0:X[0])||null),[O,j]=I.useState(null);I.useEffect(()=>{const Z=mLe(F),H=hLe(S.id,C);return()=>{Z(),H()}},[S.id]);const U=I.useMemo(()=>B.filter(Z=>Z.profile===er.ESTUDIANTE&&S.cursos.includes(Z.curso||"")).sort((Z,H)=>Z.nombreCompleto.localeCompare(H.nombreCompleto)),[B,S.cursos]),P=async Z=>{var q;j(Z.id);const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${N==null?void 0:N.instrucciones}"
                - Comentario del estudiante: "${Z.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${Z.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((q=Z.archivoAdjunto)==null?void 0:q.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const te=(await(await new os(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(V)).response).text().replace(/(\*\*|\*)/g,"");await dV(Z.id,te)}catch(ne){console.error("Error al generar feedback con IA:",ne),alert("No se pudo generar la retroalimentación.")}finally{j(null)}};return N?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",S.nombreProyecto]}),c.jsx("button",{onClick:k,className:"font-semibold",children:"← Volver a Proyectos"})]}),c.jsx("select",{value:N.id,onChange:Z=>{var H;return R(((H=S.tareas)==null?void 0:H.find(V=>V.id===Z.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(K=S.tareas)==null?void 0:K.map(Z=>c.jsxs("option",{value:Z.id,children:["Tarea ",Z.numero,": ",Z.instrucciones]},Z.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:U.map(Z=>{const H=w.find(V=>V.tareaId===N.id&&V.estudianteId===Z.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[Z.nombreCompleto," - ",H!=null&&H.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),H?c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[H.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",H.observacionesEstudiante]}),H.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:H.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:H.enlaceUrl})]}),H.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:H.archivoAdjunto.url,download:H.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:H.archivoAdjunto.nombre})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:H.feedbackProfesor||"",onBlur:V=>dV(H.id,V.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},H.id),c.jsx("button",{onClick:()=>P(H),disabled:O===H.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:O===H.id?"...":c.jsx(fF,{})})]})]}):c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},Z.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(_,{plan:d,onBack:()=>f(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:e.map(S=>(console.log("Inspeccionando objeto plan:",S),c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:S.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(S.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>f(S),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>y(S),disabled:l===S.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===S.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>g(S),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>v(S.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},S.id)))})]}):c.jsx(_Le,{initialPlan:i,onSave:p,onCancel:()=>{s("list"),o(null)}}),e.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(pLe,{planificaciones:e,onActivityUpdate:h})})]})},xT="pañolMaquinas",fV="pañolRegistros",SLe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=I.useState(a),[o,l]=I.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=I.useState(u),[h,p]=I.useState(null),[g,v]=I.useState({maquinaId:"",curso:"",profesor:"",fecha:""});I.useEffect(()=>{try{const j=localStorage.getItem(xT);if(j&&JSON.parse(j).length>0)t(JSON.parse(j));else{const P=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];t(P),localStorage.setItem(xT,JSON.stringify(P))}const U=localStorage.getItem(fV);U&&n(JSON.parse(U))}catch(j){console.error("Error al cargar datos de Pañol desde localStorage",j)}},[]);const b=I.useCallback(j=>{t(j),localStorage.setItem(xT,JSON.stringify(j))},[]),y=I.useCallback(j=>{n(j),localStorage.setItem(fV,JSON.stringify(j))},[]),_=j=>{j.preventDefault(),d.nombre.trim()&&(b(h?e.map(U=>U.id===h.id?{...h,...d}:U):[{...d,id:crypto.randomUUID()},...e]),f(u),p(null))},S=I.useCallback(j=>{if(r.some(U=>U.maquinaId===j)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&b(e.filter(U=>U.id!==j))},[e,r,b]),k=j=>{j.preventDefault();const U=o||s;if(!U.curso||!U.profesorResponsable.trim()||!U.maquinaId||U.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}y(o?r.map(P=>P.id===o.id?o:P):[{...s,id:crypto.randomUUID()},...r]),i(a),l(null)},B=I.useCallback(j=>{window.confirm("¿Eliminar este registro de uso?")&&y(r.filter(U=>U.id!==j))},[r,y]),F=I.useMemo(()=>r.filter(j=>(g.maquinaId===""||j.maquinaId===g.maquinaId)&&(g.curso===""||j.curso===g.curso)&&(g.profesor===""||j.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||j.fecha===g.fecha)).sort((j,U)=>new Date(U.fecha).getTime()-new Date(j.fecha).getTime()),[r,g]),w=I.useMemo(()=>new Map(e.map(j=>[j.id,j])),[e]),C=()=>{const j=F.map(X=>{var K,Z;return{Fecha:X.fecha,Curso:X.curso,Profesor:X.profesorResponsable,Máquina:((K=w.get(X.maquinaId))==null?void 0:K.nombre)||"N/A",Especialidad:((Z=w.get(X.maquinaId))==null?void 0:Z.especialidad)||"N/A","Total Horas":X.totalHoras,Observaciones:X.observaciones}}),U=_u.json_to_sheet(j),P=_u.book_new();_u.book_append_sheet(P,U,"RegistrosPañol"),KD(P,"Registros_Pañol.xlsx")},N=()=>{const j=new mr;gl(j,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:F.map(U=>{var P,X;return[U.fecha,U.curso,U.profesorResponsable,((P=w.get(U.maquinaId))==null?void 0:P.nombre)||"N/A",((X=w.get(U.maquinaId))==null?void 0:X.especialidad)||"N/A",U.totalHoras,U.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:U=>{j.setFontSize(10),j.setFont("helvetica","bold"),j.text("LICEO INDUSTRIAL DE RECOLETA",U.settings.margin.left,15)}}),j.save("Registros_Pañol.pdf")},R="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",O=()=>{const j=o||s,U=o?l:i;return c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:j.fecha,onChange:P=>U({...j,fecha:P.target.value}),className:R,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:j.curso,onChange:P=>U({...j,curso:P.target.value}),className:R,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),_s.map(P=>c.jsx("option",{children:P},P))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:j.profesorResponsable,onChange:P=>U({...j,profesorResponsable:P.target.value}),className:R,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),Aj.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),c.jsxs("select",{name:"maquinaId",value:j.maquinaId,onChange:P=>U({...j,maquinaId:P.target.value}),className:R,required:!0,children:[c.jsx("option",{value:"",children:"Máquina"}),e.map(P=>c.jsx("option",{value:P.id,children:P.nombre},P.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:j.totalHoras,onChange:P=>U({...j,totalHoras:Number(P.target.value)}),className:R,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:j.observaciones,onChange:P=>U({...j,observaciones:P.target.value}),placeholder:"Observaciones...",className:`${R}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),O()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),c.jsxs("form",{onSubmit:_,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:j=>f({...d,nombre:j.target.value}),placeholder:"Nombre máquina",className:R}),c.jsxs("select",{value:d.especialidad,onChange:j=>f({...d,especialidad:j.target.value}),className:R,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:h?"✓":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.map(j=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[j.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",j.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{p(j),f(j)},className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>S(j.id),className:"text-red-500",children:"🗑️"})]})]},j.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:C,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:N,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:g.fecha,onChange:j=>v({...g,fecha:j.target.value}),className:R}),c.jsxs("select",{value:g.curso,onChange:j=>v({...g,curso:j.target.value}),className:R,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),_s.map(j=>c.jsx("option",{children:j},j))]}),c.jsxs("select",{value:g.maquinaId,onChange:j=>v({...g,maquinaId:j.target.value}),className:R,children:[c.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(j=>c.jsx("option",{value:j.id,children:j.nombre},j.id))]}),c.jsx("input",{value:g.profesor,onChange:j=>v({...g,profesor:j.target.value}),placeholder:"Buscar profesor...",className:R})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:F.map(j=>{var U;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:j.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((U=w.get(j.maquinaId))==null?void 0:U.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[j.profesorResponsable," (",j.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:j.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(j),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>B(j.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},j.id)})})]})})]})]})]})};function yl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=yl(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var bT={exports:{}},yT={},wT={exports:{}},ET={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hV;function NLe(){if(hV)return ET;hV=1;var e=Fx();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var p=h(),g=n({inst:{value:p,getSnapshot:h}}),v=g[0].inst,b=g[1];return s(function(){v.value=p,v.getSnapshot=h,l(v)&&b({inst:v})},[f,p,h]),a(function(){return l(v)&&b({inst:v}),f(function(){l(v)&&b({inst:v})})},[f]),i(p),p}function l(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!r(f,p)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return ET.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,ET}var mV;function kLe(){return mV||(mV=1,wT.exports=NLe()),wT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pV;function BLe(){if(pV)return yT;pV=1;var e=Fx(),t=kLe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return yT.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var g=s(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=o(function(){function y(F){if(!_){if(_=!0,S=F,F=h(F),p!==void 0&&v.hasValue){var w=v.value;if(p(w,F))return k=w}return k=F}if(w=k,n(S,F))return w;var C=h(F);return p!==void 0&&p(w,C)?(S=F,w):(S=F,k=C)}var _=!1,S,k,B=f===void 0?null:f;return[function(){return y(d())},B===null?void 0:function(){return y(B())}]},[d,f,h,p]);var b=a(u,g[0],g[1]);return i(function(){v.hasValue=!0,v.value=b},[b]),l(b),b},yT}var gV;function TLe(){return gV||(gV=1,bT.exports=BLe()),bT.exports}var Lre=TLe();const ILe=bl(Lre),jLe={},vV=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,p))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(jLe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,l);return l},FLe=e=>e?vV(e):vV,{useDebugValue:OLe}=lt,{useSyncExternalStoreWithSelector:DLe}=ILe,RLe=e=>e;function Mre(e,t=RLe,r){const n=DLe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return OLe(n),n}const xV=(e,t)=>{const r=FLe(e),n=(a,s=t)=>Mre(r,a,s);return Object.assign(n,r),n},PLe=(e,t)=>e?xV(e,t):xV;function el(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var LLe={value:()=>{}};function LN(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new a_(r)}function a_(e){this._=e}function MLe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}a_.prototype=LN.prototype={constructor:a_,on:function(e,t){var r=this._,n=MLe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=ULe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=bV(r[a],e.name,t);else if(t==null)for(a in r)r[a]=bV(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new a_(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function ULe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function bV(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=LLe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var hF="http://www.w3.org/1999/xhtml";const yV={svg:"http://www.w3.org/2000/svg",xhtml:hF,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function MN(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),yV.hasOwnProperty(t)?{space:yV[t],local:e}:e}function QLe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===hF&&t.documentElement.namespaceURI===hF?t.createElement(e):t.createElementNS(r,e)}}function HLe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ure(e){var t=MN(e);return(t.local?HLe:QLe)(t)}function VLe(){}function cR(e){return e==null?VLe:function(){return this.querySelector(e)}}function zLe(e){typeof e!="function"&&(e=cR(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),l,u,d=0;d<i;++d)(l=s[d])&&(u=e.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new Oc(n,this._parents)}function $Le(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function KLe(){return[]}function Qre(e){return e==null?KLe:function(){return this.querySelectorAll(e)}}function GLe(e){return function(){return $Le(e.apply(this,arguments))}}function qLe(e){typeof e=="function"?e=GLe(e):e=Qre(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(n.push(e.call(l,l.__data__,u,i)),a.push(l));return new Oc(n,a)}function Hre(e){return function(){return this.matches(e)}}function Vre(e){return function(t){return t.matches(e)}}var WLe=Array.prototype.find;function XLe(e){return function(){return WLe.call(this.children,e)}}function YLe(){return this.firstElementChild}function JLe(e){return this.select(e==null?YLe:XLe(typeof e=="function"?e:Vre(e)))}var ZLe=Array.prototype.filter;function e8e(){return Array.from(this.children)}function t8e(e){return function(){return ZLe.call(this.children,e)}}function r8e(e){return this.selectAll(e==null?e8e:t8e(typeof e=="function"?e:Vre(e)))}function n8e(e){typeof e!="function"&&(e=Hre(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new Oc(n,this._parents)}function zre(e){return new Array(e.length)}function a8e(){return new Oc(this._enter||this._groups.map(zre),this._parents)}function _S(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_S.prototype={constructor:_S,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function s8e(e){return function(){return e}}function i8e(e,t,r,n,a,s){for(var i=0,o,l=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new _S(e,s[i]);for(;i<l;++i)(o=t[i])&&(a[i]=o)}function o8e(e,t,r,n,a,s,i){var o,l,u=new Map,d=t.length,f=s.length,h=new Array(d),p;for(o=0;o<d;++o)(l=t[o])&&(h[o]=p=i.call(l,l.__data__,o,t)+"",u.has(p)?a[o]=l:u.set(p,l));for(o=0;o<f;++o)p=i.call(e,s[o],o,s)+"",(l=u.get(p))?(n[o]=l,l.__data__=s[o],u.delete(p)):r[o]=new _S(e,s[o]);for(o=0;o<d;++o)(l=t[o])&&u.get(h[o])===l&&(a[o]=l)}function l8e(e){return e.__data__}function c8e(e,t){if(!arguments.length)return Array.from(this,l8e);var r=t?o8e:i8e,n=this._parents,a=this._groups;typeof e!="function"&&(e=s8e(e));for(var s=a.length,i=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,p=u8e(e.call(d,d&&d.__data__,u,n)),g=p.length,v=o[u]=new Array(g),b=i[u]=new Array(g),y=l[u]=new Array(h);r(d,f,v,b,y,p,t);for(var _=0,S=0,k,B;_<g;++_)if(k=v[_]){for(_>=S&&(S=_+1);!(B=b[S])&&++S<g;);k._next=B||null}}return i=new Oc(i,n),i._enter=o,i._exit=l,i}function u8e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function d8e(){return new Oc(this._exit||this._groups.map(zre),this._parents)}function A8e(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function f8e(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),l=0;l<i;++l)for(var u=r[l],d=n[l],f=u.length,h=o[l]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;l<a;++l)o[l]=r[l];return new Oc(o,this._parents)}function h8e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function m8e(e){e||(e=p8e);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,l=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(t)}return new Oc(a,this._parents).order()}function p8e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function g8e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function v8e(){return Array.from(this)}function x8e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function b8e(){let e=0;for(const t of this)++e;return e}function y8e(){return!this.node()}function w8e(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function E8e(e){return function(){this.removeAttribute(e)}}function C8e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _8e(e,t){return function(){this.setAttribute(e,t)}}function S8e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function N8e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function k8e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function B8e(e,t){var r=MN(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?C8e:E8e:typeof t=="function"?r.local?k8e:N8e:r.local?S8e:_8e)(r,t))}function $re(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function T8e(e){return function(){this.style.removeProperty(e)}}function I8e(e,t,r){return function(){this.style.setProperty(e,t,r)}}function j8e(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function F8e(e,t,r){return arguments.length>1?this.each((t==null?T8e:typeof t=="function"?j8e:I8e)(e,t,r??"")):px(this.node(),e)}function px(e,t){return e.style.getPropertyValue(t)||$re(e).getComputedStyle(e,null).getPropertyValue(t)}function O8e(e){return function(){delete this[e]}}function D8e(e,t){return function(){this[e]=t}}function R8e(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function P8e(e,t){return arguments.length>1?this.each((t==null?O8e:typeof t=="function"?R8e:D8e)(e,t)):this.node()[e]}function Kre(e){return e.trim().split(/^|\s+/)}function uR(e){return e.classList||new Gre(e)}function Gre(e){this._node=e,this._names=Kre(e.getAttribute("class")||"")}Gre.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function qre(e,t){for(var r=uR(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function Wre(e,t){for(var r=uR(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function L8e(e){return function(){qre(this,e)}}function M8e(e){return function(){Wre(this,e)}}function U8e(e,t){return function(){(t.apply(this,arguments)?qre:Wre)(this,e)}}function Q8e(e,t){var r=Kre(e+"");if(arguments.length<2){for(var n=uR(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?U8e:t?L8e:M8e)(r,t))}function H8e(){this.textContent=""}function V8e(e){return function(){this.textContent=e}}function z8e(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $8e(e){return arguments.length?this.each(e==null?H8e:(typeof e=="function"?z8e:V8e)(e)):this.node().textContent}function K8e(){this.innerHTML=""}function G8e(e){return function(){this.innerHTML=e}}function q8e(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function W8e(e){return arguments.length?this.each(e==null?K8e:(typeof e=="function"?q8e:G8e)(e)):this.node().innerHTML}function X8e(){this.nextSibling&&this.parentNode.appendChild(this)}function Y8e(){return this.each(X8e)}function J8e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z8e(){return this.each(J8e)}function eMe(e){var t=typeof e=="function"?e:Ure(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function tMe(){return null}function rMe(e,t){var r=typeof e=="function"?e:Ure(e),n=t==null?tMe:typeof t=="function"?t:cR(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function nMe(){var e=this.parentNode;e&&e.removeChild(this)}function aMe(){return this.each(nMe)}function sMe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function iMe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oMe(e){return this.select(e?iMe:sMe)}function lMe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cMe(e){return function(t){e.call(this,t,this.__data__)}}function uMe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function dMe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function AMe(e,t,r){return function(){var n=this.__on,a,s=cMe(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function fMe(e,t,r){var n=uMe(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(a=0,d=o[l];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?AMe:dMe,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function Xre(e,t,r){var n=$re(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function hMe(e,t){return function(){return Xre(this,e,t)}}function mMe(e,t){return function(){return Xre(this,e,t.apply(this,arguments))}}function pMe(e,t){return this.each((typeof t=="function"?mMe:hMe)(e,t))}function*gMe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var Yre=[null];function Oc(e,t){this._groups=e,this._parents=t}function zw(){return new Oc([[document.documentElement]],Yre)}function vMe(){return this}Oc.prototype=zw.prototype={constructor:Oc,select:zLe,selectAll:qLe,selectChild:JLe,selectChildren:r8e,filter:n8e,data:c8e,enter:a8e,exit:d8e,join:A8e,merge:f8e,selection:vMe,order:h8e,sort:m8e,call:g8e,nodes:v8e,node:x8e,size:b8e,empty:y8e,each:w8e,attr:B8e,style:F8e,property:P8e,classed:Q8e,text:$8e,html:W8e,raise:Y8e,lower:Z8e,append:eMe,insert:rMe,remove:aMe,clone:oMe,datum:lMe,on:fMe,dispatch:pMe,[Symbol.iterator]:gMe};function Eu(e){return typeof e=="string"?new Oc([[document.querySelector(e)]],[document.documentElement]):new Oc([[e]],Yre)}function xMe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function hA(e,t){if(e=xMe(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const bMe={passive:!1},Yy={capture:!0,passive:!1};function CT(e){e.stopImmediatePropagation()}function qv(e){e.preventDefault(),e.stopImmediatePropagation()}function Jre(e){var t=e.document.documentElement,r=Eu(e).on("dragstart.drag",qv,Yy);"onselectstart"in t?r.on("selectstart.drag",qv,Yy):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zre(e,t){var r=e.document.documentElement,n=Eu(e).on("dragstart.drag",null);t&&(n.on("click.drag",qv,Yy),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const iC=e=>()=>e;function mF(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}mF.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function yMe(e){return!e.ctrlKey&&!e.button}function wMe(){return this.parentNode}function EMe(e,t){return t??{x:e.x,y:e.y}}function CMe(){return navigator.maxTouchPoints||"ontouchstart"in this}function _Me(){var e=yMe,t=wMe,r=EMe,n=CMe,a={},s=LN("start","drag","end"),i=0,o,l,u,d,f=0;function h(k){k.on("mousedown.drag",p).filter(n).on("touchstart.drag",b).on("touchmove.drag",y,bMe).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(k,B){if(!(d||!e.call(this,k,B))){var F=S(this,t.call(this,k,B),k,B,"mouse");F&&(Eu(k.view).on("mousemove.drag",g,Yy).on("mouseup.drag",v,Yy),Jre(k.view),CT(k),u=!1,o=k.clientX,l=k.clientY,F("start",k))}}function g(k){if(qv(k),!u){var B=k.clientX-o,F=k.clientY-l;u=B*B+F*F>f}a.mouse("drag",k)}function v(k){Eu(k.view).on("mousemove.drag mouseup.drag",null),Zre(k.view,u),qv(k),a.mouse("end",k)}function b(k,B){if(e.call(this,k,B)){var F=k.changedTouches,w=t.call(this,k,B),C=F.length,N,R;for(N=0;N<C;++N)(R=S(this,w,k,B,F[N].identifier,F[N]))&&(CT(k),R("start",k,F[N]))}}function y(k){var B=k.changedTouches,F=B.length,w,C;for(w=0;w<F;++w)(C=a[B[w].identifier])&&(qv(k),C("drag",k,B[w]))}function _(k){var B=k.changedTouches,F=B.length,w,C;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),w=0;w<F;++w)(C=a[B[w].identifier])&&(CT(k),C("end",k,B[w]))}function S(k,B,F,w,C,N){var R=s.copy(),O=hA(N||F,B),j,U,P;if((P=r.call(k,new mF("beforestart",{sourceEvent:F,target:h,identifier:C,active:i,x:O[0],y:O[1],dx:0,dy:0,dispatch:R}),w))!=null)return j=P.x-O[0]||0,U=P.y-O[1]||0,function X(K,Z,H){var V=O,q;switch(K){case"start":a[C]=X,q=i++;break;case"end":delete a[C],--i;case"drag":O=hA(H||Z,B),q=i;break}R.call(K,k,new mF(K,{sourceEvent:Z,subject:P,target:h,identifier:C,active:q,x:O[0]+j,y:O[1]+U,dx:O[0]-V[0],dy:O[1]-V[1],dispatch:R}),w)}}return h.filter=function(k){return arguments.length?(e=typeof k=="function"?k:iC(!!k),h):e},h.container=function(k){return arguments.length?(t=typeof k=="function"?k:iC(k),h):t},h.subject=function(k){return arguments.length?(r=typeof k=="function"?k:iC(k),h):r},h.touchable=function(k){return arguments.length?(n=typeof k=="function"?k:iC(!!k),h):n},h.on=function(){var k=s.on.apply(s,arguments);return k===s?h:k},h.clickDistance=function(k){return arguments.length?(f=(k=+k)*k,h):Math.sqrt(f)},h}function dR(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ene(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function $w(){}var Jy=.7,SS=1/Jy,Wv="\\s*([+-]?\\d+)\\s*",Zy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",DA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",SMe=/^#([0-9a-f]{3,8})$/,NMe=new RegExp(`^rgb\\(${Wv},${Wv},${Wv}\\)$`),kMe=new RegExp(`^rgb\\(${DA},${DA},${DA}\\)$`),BMe=new RegExp(`^rgba\\(${Wv},${Wv},${Wv},${Zy}\\)$`),TMe=new RegExp(`^rgba\\(${DA},${DA},${DA},${Zy}\\)$`),IMe=new RegExp(`^hsl\\(${Zy},${DA},${DA}\\)$`),jMe=new RegExp(`^hsla\\(${Zy},${DA},${DA},${Zy}\\)$`),wV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dR($w,Qp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:EV,formatHex:EV,formatHex8:FMe,formatHsl:OMe,formatRgb:CV,toString:CV});function EV(){return this.rgb().formatHex()}function FMe(){return this.rgb().formatHex8()}function OMe(){return tne(this).formatHsl()}function CV(){return this.rgb().formatRgb()}function Qp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=SMe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?_V(t):r===3?new Kl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?oC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?oC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=NMe.exec(e))?new Kl(t[1],t[2],t[3],1):(t=kMe.exec(e))?new Kl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=BMe.exec(e))?oC(t[1],t[2],t[3],t[4]):(t=TMe.exec(e))?oC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=IMe.exec(e))?kV(t[1],t[2]/100,t[3]/100,1):(t=jMe.exec(e))?kV(t[1],t[2]/100,t[3]/100,t[4]):wV.hasOwnProperty(e)?_V(wV[e]):e==="transparent"?new Kl(NaN,NaN,NaN,0):null}function _V(e){return new Kl(e>>16&255,e>>8&255,e&255,1)}function oC(e,t,r,n){return n<=0&&(e=t=r=NaN),new Kl(e,t,r,n)}function DMe(e){return e instanceof $w||(e=Qp(e)),e?(e=e.rgb(),new Kl(e.r,e.g,e.b,e.opacity)):new Kl}function pF(e,t,r,n){return arguments.length===1?DMe(e):new Kl(e,t,r,n??1)}function Kl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}dR(Kl,pF,ene($w,{brighter(e){return e=e==null?SS:Math.pow(SS,e),new Kl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jy:Math.pow(Jy,e),new Kl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kl(wp(this.r),wp(this.g),wp(this.b),NS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SV,formatHex:SV,formatHex8:RMe,formatRgb:NV,toString:NV}));function SV(){return`#${ap(this.r)}${ap(this.g)}${ap(this.b)}`}function RMe(){return`#${ap(this.r)}${ap(this.g)}${ap(this.b)}${ap((isNaN(this.opacity)?1:this.opacity)*255)}`}function NV(){const e=NS(this.opacity);return`${e===1?"rgb(":"rgba("}${wp(this.r)}, ${wp(this.g)}, ${wp(this.b)}${e===1?")":`, ${e})`}`}function NS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ap(e){return e=wp(e),(e<16?"0":"")+e.toString(16)}function kV(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new fd(e,t,r,n)}function tne(e){if(e instanceof fd)return new fd(e.h,e.s,e.l,e.opacity);if(e instanceof $w||(e=Qp(e)),!e)return new fd;if(e instanceof fd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new fd(i,o,l,e.opacity)}function PMe(e,t,r,n){return arguments.length===1?tne(e):new fd(e,t,r,n??1)}function fd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}dR(fd,PMe,ene($w,{brighter(e){return e=e==null?SS:Math.pow(SS,e),new fd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jy:Math.pow(Jy,e),new fd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Kl(_T(e>=240?e-240:e+120,a,n),_T(e,a,n),_T(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new fd(BV(this.h),lC(this.s),lC(this.l),NS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=NS(this.opacity);return`${e===1?"hsl(":"hsla("}${BV(this.h)}, ${lC(this.s)*100}%, ${lC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function BV(e){return e=(e||0)%360,e<0?e+360:e}function lC(e){return Math.max(0,Math.min(1,e||0))}function _T(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const AR=e=>()=>e;function LMe(e,t){return function(r){return e+r*t}}function MMe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function UMe(e){return(e=+e)==1?rne:function(t,r){return r-t?MMe(t,r,e):AR(isNaN(t)?r:t)}}function rne(e,t){var r=t-e;return r?LMe(e,r):AR(isNaN(e)?t:e)}const kS=function e(t){var r=UMe(t);function n(a,s){var i=r((a=pF(a)).r,(s=pF(s)).r),o=r(a.g,s.g),l=r(a.b,s.b),u=rne(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=l(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function QMe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function HMe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VMe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=Gx(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function zMe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ad(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function $Me(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Gx(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var gF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ST=new RegExp(gF.source,"g");function KMe(e){return function(){return e}}function GMe(e){return function(t){return e(t)+""}}function nne(e,t){var r=gF.lastIndex=ST.lastIndex=0,n,a,s,i=-1,o=[],l=[];for(e=e+"",t=t+"";(n=gF.exec(e))&&(a=ST.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i,x:Ad(n,a)})),r=ST.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?l[0]?GMe(l[0].x):KMe(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function Gx(e,t){var r=typeof t,n;return t==null||r==="boolean"?AR(t):(r==="number"?Ad:r==="string"?(n=Qp(t))?(t=n,kS):nne:t instanceof Qp?kS:t instanceof Date?zMe:HMe(t)?QMe:Array.isArray(t)?VMe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$Me:Ad)(e,t)}function fR(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var TV=180/Math.PI,vF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ane(e,t,r,n,a,s){var i,o,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),e*n<t*r&&(e=-e,t=-t,l=-l,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*TV,skewX:Math.atan(l)*TV,scaleX:i,scaleY:o}}var cC;function qMe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vF:ane(t.a,t.b,t.c,t.d,t.e,t.f)}function WMe(e){return e==null||(cC||(cC=document.createElementNS("http://www.w3.org/2000/svg","g")),cC.setAttribute("transform",e),!(e=cC.transform.baseVal.consolidate()))?vF:(e=e.matrix,ane(e.a,e.b,e.c,e.d,e.e,e.f))}function sne(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var v=p.push("translate(",null,t,null,r);g.push({i:v-4,x:Ad(u,f)},{i:v-2,x:Ad(d,h)})}else(f||h)&&p.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:Ad(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:Ad(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function l(u,d,f,h,p,g){if(u!==f||d!==h){var v=p.push(a(p)+"scale(",null,",",null,")");g.push({i:v-4,x:Ad(u,f)},{i:v-2,x:Ad(d,h)})}else(f!==1||h!==1)&&p.push(a(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,v=h.length,b;++g<v;)f[(b=h[g]).i]=b.x(p);return f.join("")}}}var XMe=sne(qMe,"px, ","px)","deg)"),YMe=sne(WMe,", ",")",")"),JMe=1e-12;function IV(e){return((e=Math.exp(e))+1/e)/2}function ZMe(e){return((e=Math.exp(e))-1/e)/2}function eUe(e){return((e=Math.exp(2*e))-1)/(e+1)}const tUe=function e(t,r,n){function a(s,i){var o=s[0],l=s[1],u=s[2],d=i[0],f=i[1],h=i[2],p=d-o,g=f-l,v=p*p+g*g,b,y;if(v<JMe)y=Math.log(h/u)/t,b=function(w){return[o+w*p,l+w*g,u*Math.exp(t*w*y)]};else{var _=Math.sqrt(v),S=(h*h-u*u+n*v)/(2*u*r*_),k=(h*h-u*u-n*v)/(2*h*r*_),B=Math.log(Math.sqrt(S*S+1)-S),F=Math.log(Math.sqrt(k*k+1)-k);y=(F-B)/t,b=function(w){var C=w*y,N=IV(B),R=u/(r*_)*(N*eUe(t*C+B)-ZMe(B));return[o+R*p,l+R*g,u*N/IV(t*C+B)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,l=o*o;return e(i,o,l)},a}(Math.SQRT2,2,4);function rUe(e,t){t===void 0&&(t=e,e=Gx);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}var gx=0,Ub=0,sb=0,ine=1e3,BS,Qb,TS=0,Hp=0,UN=0,ew=typeof performance=="object"&&performance.now?performance:Date,one=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function hR(){return Hp||(one(nUe),Hp=ew.now()+UN)}function nUe(){Hp=0}function IS(){this._call=this._time=this._next=null}IS.prototype=lne.prototype={constructor:IS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?hR():+r)+(t==null?0:+t),!this._next&&Qb!==this&&(Qb?Qb._next=this:BS=this,Qb=this),this._call=e,this._time=r,xF()},stop:function(){this._call&&(this._call=null,this._time=1/0,xF())}};function lne(e,t,r){var n=new IS;return n.restart(e,t,r),n}function aUe(){hR(),++gx;for(var e=BS,t;e;)(t=Hp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gx}function jV(){Hp=(TS=ew.now())+UN,gx=Ub=0;try{aUe()}finally{gx=0,iUe(),Hp=0}}function sUe(){var e=ew.now(),t=e-TS;t>ine&&(UN-=t,TS=e)}function iUe(){for(var e,t=BS,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:BS=r);Qb=e,xF(n)}function xF(e){if(!gx){Ub&&(Ub=clearTimeout(Ub));var t=e-Hp;t>24?(e<1/0&&(Ub=setTimeout(jV,e-ew.now()-UN)),sb&&(sb=clearInterval(sb))):(sb||(TS=ew.now(),sb=setInterval(sUe,ine)),gx=1,one(jV))}}function FV(e,t,r){var n=new IS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var oUe=LN("start","end","cancel","interrupt"),lUe=[],cne=0,OV=1,bF=2,s_=3,DV=4,yF=5,i_=6;function QN(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;cUe(e,r,{name:t,index:n,group:a,on:oUe,tween:lUe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:cne})}function mR(e,t){var r=Bd(e,t);if(r.state>cne)throw new Error("too late; already scheduled");return r}function GA(e,t){var r=Bd(e,t);if(r.state>s_)throw new Error("too late; already running");return r}function Bd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function cUe(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=lne(s,0,r.time);function s(u){r.state=OV,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,p;if(r.state!==OV)return l();for(d in n)if(p=n[d],p.name===r.name){if(p.state===s_)return FV(i);p.state===DV?(p.state=i_,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=i_,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(FV(function(){r.state===s_&&(r.state=DV,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=bF,r.on.call("start",e,e.__data__,r.index,r.group),r.state===bF){for(r.state=s_,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=p);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=yF,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===yF&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=i_,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function o_(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>bF&&n.state<yF,n.state=i_,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function uUe(e){return this.each(function(){o_(this,e)})}function dUe(e,t){var r,n;return function(){var a=GA(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function AUe(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=GA(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=o;break}l===u&&a.push(o)}s.tween=a}}function fUe(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Bd(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?dUe:AUe)(r,e,t))}function pR(e,t,r){var n=e._id;return e.each(function(){var a=GA(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Bd(a,n).value[t]}}function une(e,t){var r;return(typeof t=="number"?Ad:t instanceof Qp?kS:(r=Qp(t))?(t=r,kS):nne)(e,t)}function hUe(e){return function(){this.removeAttribute(e)}}function mUe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pUe(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function gUe(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function vUe(e,t,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o)))}}function xUe(e,t,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o)))}}function bUe(e,t){var r=MN(e),n=r==="transform"?YMe:une;return this.attrTween(e,typeof t=="function"?(r.local?xUe:vUe)(r,n,pR(this,"attr."+e,t)):t==null?(r.local?mUe:hUe)(r):(r.local?gUe:pUe)(r,n,t))}function yUe(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function wUe(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function EUe(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&wUe(e,s)),r}return a._value=t,a}function CUe(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&yUe(e,s)),r}return a._value=t,a}function _Ue(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=MN(e);return this.tween(r,(n.local?EUe:CUe)(n,t))}function SUe(e,t){return function(){mR(this,e).delay=+t.apply(this,arguments)}}function NUe(e,t){return t=+t,function(){mR(this,e).delay=t}}function kUe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SUe:NUe)(t,e)):Bd(this.node(),t).delay}function BUe(e,t){return function(){GA(this,e).duration=+t.apply(this,arguments)}}function TUe(e,t){return t=+t,function(){GA(this,e).duration=t}}function IUe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?BUe:TUe)(t,e)):Bd(this.node(),t).duration}function jUe(e,t){if(typeof t!="function")throw new Error;return function(){GA(this,e).ease=t}}function FUe(e){var t=this._id;return arguments.length?this.each(jUe(t,e)):Bd(this.node(),t).ease}function OUe(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;GA(this,e).ease=r}}function DUe(e){if(typeof e!="function")throw new Error;return this.each(OUe(this._id,e))}function RUe(e){typeof e!="function"&&(e=Hre(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new eh(n,this._parents,this._name,this._id)}function PUe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var l=t[o],u=r[o],d=l.length,f=i[o]=new Array(d),h,p=0;p<d;++p)(h=l[p]||u[p])&&(f[p]=h);for(;o<n;++o)i[o]=t[o];return new eh(i,this._parents,this._name,this._id)}function LUe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function MUe(e,t,r){var n,a,s=LUe(t)?mR:GA;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function UUe(e,t){var r=this._id;return arguments.length<2?Bd(this.node(),r).on.on(e):this.each(MUe(r,e,t))}function QUe(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function HUe(){return this.on("end.remove",QUe(this._id))}function VUe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=cR(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],l=o.length,u=s[i]=new Array(l),d,f,h=0;h<l;++h)(d=o[h])&&(f=e.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,QN(u[h],t,r,h,u,Bd(d,r)));return new eh(s,this._parents,t,r)}function zUe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Qre(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var l=n[o],u=l.length,d,f=0;f<u;++f)if(d=l[f]){for(var h=e.call(d,d.__data__,f,l),p,g=Bd(d,r),v=0,b=h.length;v<b;++v)(p=h[v])&&QN(p,t,r,v,h,g);s.push(h),i.push(d)}return new eh(s,i,t,r)}var $Ue=zw.prototype.constructor;function KUe(){return new $Ue(this._groups,this._parents)}function GUe(e,t){var r,n,a;return function(){var s=px(this,e),i=(this.style.removeProperty(e),px(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function dne(e){return function(){this.style.removeProperty(e)}}function qUe(e,t,r){var n,a=r+"",s;return function(){var i=px(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function WUe(e,t,r){var n,a,s;return function(){var i=px(this,e),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),px(this,e))),i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o))}}function XUe(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var l=GA(this,e),u=l.on,d=l.value[s]==null?o||(o=dne(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),l.on=n}}function YUe(e,t,r){var n=(e+="")=="transform"?XMe:une;return t==null?this.styleTween(e,GUe(e,n)).on("end.style."+e,dne(e)):typeof t=="function"?this.styleTween(e,WUe(e,n,pR(this,"style."+e,t))).each(XUe(this._id,e)):this.styleTween(e,qUe(e,n,t),r).on("end.style."+e,null)}function JUe(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function ZUe(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&JUe(e,i,r)),n}return s._value=t,s}function e7e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,ZUe(e,t,r??""))}function t7e(e){return function(){this.textContent=e}}function r7e(e){return function(){var t=e(this);this.textContent=t??""}}function n7e(e){return this.tween("text",typeof e=="function"?r7e(pR(this,"text",e)):t7e(e==null?"":e+""))}function a7e(e){return function(t){this.textContent=e.call(this,t)}}function s7e(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&a7e(a)),t}return n._value=e,n}function i7e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,s7e(e))}function o7e(){for(var e=this._name,t=this._id,r=Ane(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Bd(l,t);QN(l,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new eh(n,this._parents,e,r)}function l7e(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},l={value:function(){--a===0&&s()}};r.each(function(){var u=GA(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),u.on=t}),a===0&&s()})}var c7e=0;function eh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Ane(){return++c7e}var Nf=zw.prototype;eh.prototype={constructor:eh,select:VUe,selectAll:zUe,selectChild:Nf.selectChild,selectChildren:Nf.selectChildren,filter:RUe,merge:PUe,selection:KUe,transition:o7e,call:Nf.call,nodes:Nf.nodes,node:Nf.node,size:Nf.size,empty:Nf.empty,each:Nf.each,on:UUe,attr:bUe,attrTween:_Ue,style:YUe,styleTween:e7e,text:n7e,textTween:i7e,remove:HUe,tween:fUe,delay:kUe,duration:IUe,ease:FUe,easeVarying:DUe,end:l7e,[Symbol.iterator]:Nf[Symbol.iterator]};function u7e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var d7e={time:null,delay:0,duration:250,ease:u7e};function A7e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function f7e(e){var t,r;e instanceof eh?(t=e._id,e=e._name):(t=Ane(),(r=d7e).time=hR(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&QN(l,e,t,u,i,r||A7e(l,t));return new eh(n,this._parents,e,t)}zw.prototype.interrupt=uUe;zw.prototype.transition=f7e;const uC=e=>()=>e;function h7e(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Df(e,t,r){this.k=e,this.x=t,this.y=r}Df.prototype={constructor:Df,scale:function(e){return e===1?this:new Df(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Df(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var P0=new Df(1,0,0);Df.prototype;function NT(e){e.stopImmediatePropagation()}function ib(e){e.preventDefault(),e.stopImmediatePropagation()}function m7e(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function p7e(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function RV(){return this.__zoom||P0}function g7e(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function v7e(){return navigator.maxTouchPoints||"ontouchstart"in this}function x7e(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function b7e(){var e=m7e,t=p7e,r=x7e,n=g7e,a=v7e,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=tUe,u=LN("start","zoom","end"),d,f,h,p=500,g=150,v=0,b=10;function y(P){P.property("__zoom",RV).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",O).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(P,X,K,Z){var H=P.selection?P.selection():P;H.property("__zoom",RV),P!==H?B(P,X,K,Z):H.interrupt().each(function(){F(this,arguments).event(Z).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},y.scaleBy=function(P,X,K,Z){y.scaleTo(P,function(){var H=this.__zoom.k,V=typeof X=="function"?X.apply(this,arguments):X;return H*V},K,Z)},y.scaleTo=function(P,X,K,Z){y.transform(P,function(){var H=t.apply(this,arguments),V=this.__zoom,q=K==null?k(H):typeof K=="function"?K.apply(this,arguments):K,ne=V.invert(q),L=typeof X=="function"?X.apply(this,arguments):X;return r(S(_(V,L),q,ne),H,i)},K,Z)},y.translateBy=function(P,X,K,Z){y.transform(P,function(){return r(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof K=="function"?K.apply(this,arguments):K),t.apply(this,arguments),i)},null,Z)},y.translateTo=function(P,X,K,Z,H){y.transform(P,function(){var V=t.apply(this,arguments),q=this.__zoom,ne=Z==null?k(V):typeof Z=="function"?Z.apply(this,arguments):Z;return r(P0.translate(ne[0],ne[1]).scale(q.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof K=="function"?-K.apply(this,arguments):-K),V,i)},Z,H)};function _(P,X){return X=Math.max(s[0],Math.min(s[1],X)),X===P.k?P:new Df(X,P.x,P.y)}function S(P,X,K){var Z=X[0]-K[0]*P.k,H=X[1]-K[1]*P.k;return Z===P.x&&H===P.y?P:new Df(P.k,Z,H)}function k(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function B(P,X,K,Z){P.on("start.zoom",function(){F(this,arguments).event(Z).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(Z).end()}).tween("zoom",function(){var H=this,V=arguments,q=F(H,V).event(Z),ne=t.apply(H,V),L=K==null?k(ne):typeof K=="function"?K.apply(H,V):K,W=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),J=H.__zoom,te=typeof X=="function"?X.apply(H,V):X,ie=l(J.invert(L).concat(W/J.k),te.invert(L).concat(W/te.k));return function(Ae){if(Ae===1)Ae=te;else{var oe=ie(Ae),ce=W/oe[2];Ae=new Df(ce,L[0]-oe[0]*ce,L[1]-oe[1]*ce)}q.zoom(null,Ae)}})}function F(P,X,K){return!K&&P.__zooming||new w(P,X)}function w(P,X){this.that=P,this.args=X,this.active=0,this.sourceEvent=null,this.extent=t.apply(P,X),this.taps=0}w.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,X){return this.mouse&&P!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var X=Eu(this.that).datum();u.call(P,this.that,new h7e(P,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),X)}};function C(P,...X){if(!e.apply(this,arguments))return;var K=F(this,X).event(P),Z=this.__zoom,H=Math.max(s[0],Math.min(s[1],Z.k*Math.pow(2,n.apply(this,arguments)))),V=hA(P);if(K.wheel)(K.mouse[0][0]!==V[0]||K.mouse[0][1]!==V[1])&&(K.mouse[1]=Z.invert(K.mouse[0]=V)),clearTimeout(K.wheel);else{if(Z.k===H)return;K.mouse=[V,Z.invert(V)],o_(this),K.start()}ib(P),K.wheel=setTimeout(q,g),K.zoom("mouse",r(S(_(Z,H),K.mouse[0],K.mouse[1]),K.extent,i));function q(){K.wheel=null,K.end()}}function N(P,...X){if(h||!e.apply(this,arguments))return;var K=P.currentTarget,Z=F(this,X,!0).event(P),H=Eu(P.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",W,!0),V=hA(P,K),q=P.clientX,ne=P.clientY;Jre(P.view),NT(P),Z.mouse=[V,this.__zoom.invert(V)],o_(this),Z.start();function L(J){if(ib(J),!Z.moved){var te=J.clientX-q,ie=J.clientY-ne;Z.moved=te*te+ie*ie>v}Z.event(J).zoom("mouse",r(S(Z.that.__zoom,Z.mouse[0]=hA(J,K),Z.mouse[1]),Z.extent,i))}function W(J){H.on("mousemove.zoom mouseup.zoom",null),Zre(J.view,Z.moved),ib(J),Z.event(J).end()}}function R(P,...X){if(e.apply(this,arguments)){var K=this.__zoom,Z=hA(P.changedTouches?P.changedTouches[0]:P,this),H=K.invert(Z),V=K.k*(P.shiftKey?.5:2),q=r(S(_(K,V),Z,H),t.apply(this,X),i);ib(P),o>0?Eu(this).transition().duration(o).call(B,q,Z,P):Eu(this).call(y.transform,q,Z,P)}}function O(P,...X){if(e.apply(this,arguments)){var K=P.touches,Z=K.length,H=F(this,X,P.changedTouches.length===Z).event(P),V,q,ne,L;for(NT(P),q=0;q<Z;++q)ne=K[q],L=hA(ne,this),L=[L,this.__zoom.invert(L),ne.identifier],H.touch0?!H.touch1&&H.touch0[2]!==L[2]&&(H.touch1=L,H.taps=0):(H.touch0=L,V=!0,H.taps=1+!!d);d&&(d=clearTimeout(d)),V&&(H.taps<2&&(f=L[0],d=setTimeout(function(){d=null},p)),o_(this),H.start())}}function j(P,...X){if(this.__zooming){var K=F(this,X).event(P),Z=P.changedTouches,H=Z.length,V,q,ne,L;for(ib(P),V=0;V<H;++V)q=Z[V],ne=hA(q,this),K.touch0&&K.touch0[2]===q.identifier?K.touch0[0]=ne:K.touch1&&K.touch1[2]===q.identifier&&(K.touch1[0]=ne);if(q=K.that.__zoom,K.touch1){var W=K.touch0[0],J=K.touch0[1],te=K.touch1[0],ie=K.touch1[1],Ae=(Ae=te[0]-W[0])*Ae+(Ae=te[1]-W[1])*Ae,oe=(oe=ie[0]-J[0])*oe+(oe=ie[1]-J[1])*oe;q=_(q,Math.sqrt(Ae/oe)),ne=[(W[0]+te[0])/2,(W[1]+te[1])/2],L=[(J[0]+ie[0])/2,(J[1]+ie[1])/2]}else if(K.touch0)ne=K.touch0[0],L=K.touch0[1];else return;K.zoom("touch",r(S(q,ne,L),K.extent,i))}}function U(P,...X){if(this.__zooming){var K=F(this,X).event(P),Z=P.changedTouches,H=Z.length,V,q;for(NT(P),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),V=0;V<H;++V)q=Z[V],K.touch0&&K.touch0[2]===q.identifier?delete K.touch0:K.touch1&&K.touch1[2]===q.identifier&&delete K.touch1;if(K.touch1&&!K.touch0&&(K.touch0=K.touch1,delete K.touch1),K.touch0)K.touch0[1]=this.__zoom.invert(K.touch0[0]);else if(K.end(),K.taps===2&&(q=hA(q,this),Math.hypot(f[0]-q[0],f[1]-q[1])<b)){var ne=Eu(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return y.wheelDelta=function(P){return arguments.length?(n=typeof P=="function"?P:uC(+P),y):n},y.filter=function(P){return arguments.length?(e=typeof P=="function"?P:uC(!!P),y):e},y.touchable=function(P){return arguments.length?(a=typeof P=="function"?P:uC(!!P),y):a},y.extent=function(P){return arguments.length?(t=typeof P=="function"?P:uC([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),y):t},y.scaleExtent=function(P){return arguments.length?(s[0]=+P[0],s[1]=+P[1],y):[s[0],s[1]]},y.translateExtent=function(P){return arguments.length?(i[0][0]=+P[0][0],i[1][0]=+P[1][0],i[0][1]=+P[0][1],i[1][1]=+P[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(P){return arguments.length?(r=P,y):r},y.duration=function(P){return arguments.length?(o=+P,y):o},y.interpolate=function(P){return arguments.length?(l=P,y):l},y.on=function(){var P=u.on.apply(u,arguments);return P===u?y:P},y.clickDistance=function(P){return arguments.length?(v=(P=+P)*P,y):Math.sqrt(v)},y.tapDistance=function(P){return arguments.length?(b=+P,y):b},y}var fne=xW();const HN=I.createContext(null),y7e=HN.Provider,th={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},hne=th.error001();function ls(e,t){const r=I.useContext(HN);if(r===null)throw new Error(hne);return Mre(r,e,t)}const Yi=()=>{const e=I.useContext(HN);if(e===null)throw new Error(hne);return I.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},w7e=e=>e.userSelectionActive?"none":"all";function mne({position:e,children:t,className:r,style:n,...a}){const s=ls(w7e),i=`${e}`.split("-");return lt.createElement("div",{className:yl(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function E7e({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:lt.createElement(mne,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const C7e=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const f=I.useRef(null),[h,p]=I.useState({x:0,y:0,width:0,height:0}),g=yl(["react-flow__edge-textwrapper",u]);return I.useEffect(()=>{if(f.current){const v=f.current.getBBox();p({x:v.x,y:v.y,width:v.width,height:v.height})}},[r]),typeof r>"u"||!r?null:lt.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&lt.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),lt.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),l)};var _7e=I.memo(C7e);const gR=e=>({width:e.offsetWidth,height:e.offsetHeight}),vx=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),vR=(e={x:0,y:0},t)=>({x:vx(e.x,t[0][0],t[1][0]),y:vx(e.y,t[0][1],t[1][1])}),PV=(e,t,r)=>e<t?vx(Math.abs(e-t),1,50)/50:e>r?-vx(Math.abs(e-r),1,50)/50:0,pne=(e,t)=>{const r=PV(e.x,35,t.width-35)*20,n=PV(e.y,35,t.height-35)*20;return[r,n]},gne=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},S7e=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),xR=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),N7e=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),LV=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),wF=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},k7e=e=>ku(e.width)&&ku(e.height)&&ku(e.x)&&ku(e.y),ku=e=>!isNaN(e)&&isFinite(e),Ss=Symbol.for("internals"),vne=["Enter"," ","Escape"],B7e=(e,t)=>{},T7e=e=>"nativeEvent"in e;function EF(e){var a,s;const t=T7e(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const xne=e=>"clientX"in e,L0=(e,t)=>{var s,i;const r=xne(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},jS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Kw=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&ku(r)&&ku(n)?lt.createElement(_7e,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);Kw.displayName="BaseEdge";function ob(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function bne({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function yne({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const l=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(l-e),f=Math.abs(u-t);return[l,u,d,f]}var Vp;(function(e){e.Strict="strict",e.Loose="loose"})(Vp||(Vp={}));var sp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(sp||(sp={}));var tw;(function(e){e.Partial="partial",e.Full="full"})(tw||(tw={}));var x0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(x0||(x0={}));var FS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(FS||(FS={}));var br;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(br||(br={}));function MV({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===br.Left||e===br.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function wne({sourceX:e,sourceY:t,sourcePosition:r=br.Bottom,targetX:n,targetY:a,targetPosition:s=br.Top}){const[i,o]=MV({pos:r,x1:e,y1:t,x2:n,y2:a}),[l,u]=MV({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,p]=yne({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${e},${t} C${i},${o} ${l},${u} ${n},${a}`,d,f,h,p]}const bR=I.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=br.Bottom,targetPosition:s=br.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})=>{const[b,y,_]=wne({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return lt.createElement(Kw,{path:b,labelX:y,labelY:_,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})});bR.displayName="SimpleBezierEdge";const UV={[br.Left]:{x:-1,y:0},[br.Right]:{x:1,y:0},[br.Top]:{x:0,y:-1},[br.Bottom]:{x:0,y:1}},I7e=({source:e,sourcePosition:t=br.Bottom,target:r})=>t===br.Left||t===br.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},QV=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function j7e({source:e,sourcePosition:t=br.Bottom,target:r,targetPosition:n=br.Top,center:a,offset:s}){const i=UV[t],o=UV[n],l={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=I7e({source:l,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],g,v;const b={x:0,y:0},y={x:0,y:0},[_,S,k,B]=bne({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){g=a.x??_,v=a.y??S;const w=[{x:g,y:l.y},{x:g,y:u.y}],C=[{x:l.x,y:v},{x:u.x,y:v}];i[f]===h?p=f==="x"?w:C:p=f==="x"?C:w}else{const w=[{x:l.x,y:u.y}],C=[{x:u.x,y:l.y}];if(f==="x"?p=i.x===h?C:w:p=i.y===h?w:C,t===n){const U=Math.abs(e[f]-r[f]);if(U<=s){const P=Math.min(s-1,s-U);i[f]===h?b[f]=(l[f]>e[f]?-1:1)*P:y[f]=(u[f]>r[f]?-1:1)*P}}if(t!==n){const U=f==="x"?"y":"x",P=i[f]===o[U],X=l[U]>u[U],K=l[U]<u[U];(i[f]===1&&(!P&&X||P&&K)||i[f]!==1&&(!P&&K||P&&X))&&(p=f==="x"?w:C)}const N={x:l.x+b.x,y:l.y+b.y},R={x:u.x+y.x,y:u.y+y.y},O=Math.max(Math.abs(N.x-p[0].x),Math.abs(R.x-p[0].x)),j=Math.max(Math.abs(N.y-p[0].y),Math.abs(R.y-p[0].y));O>=j?(g=(N.x+R.x)/2,v=p[0].y):(g=p[0].x,v=(N.y+R.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},r],g,v,k,B]}function F7e(e,t,r,n){const a=Math.min(QV(e,t)/2,QV(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,l=e.y<r.y?-1:1;return`L ${s},${i+a*l}Q ${s},${i} ${s+a*o},${i}`}function CF({sourceX:e,sourceY:t,sourcePosition:r=br.Bottom,targetX:n,targetY:a,targetPosition:s=br.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,f,h,p,g]=j7e({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:l},offset:u});return[d.reduce((b,y,_)=>{let S="";return _>0&&_<d.length-1?S=F7e(d[_-1],y,d[_+1],i):S=`${_===0?"M":"L"}${y.x} ${y.y}`,b+=S,b},""),f,h,p,g]}const VN=I.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:f=br.Bottom,targetPosition:h=br.Top,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:b})=>{const[y,_,S]=CF({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return lt.createElement(Kw,{path:y,labelX:_,labelY:S,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:g,interactionWidth:b})});VN.displayName="SmoothStepEdge";const yR=I.memo(e=>{var t;return lt.createElement(VN,{...e,pathOptions:I.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});yR.displayName="StepEdge";function O7e({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=bne({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const wR=I.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[g,v,b]=O7e({sourceX:e,sourceY:t,targetX:r,targetY:n});return lt.createElement(Kw,{path:g,labelX:v,labelY:b,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});wR.displayName="StraightEdge";function dC(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function HV({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case br.Left:return[t-dC(t-n,s),r];case br.Right:return[t+dC(n-t,s),r];case br.Top:return[t,r-dC(r-a,s)];case br.Bottom:return[t,r+dC(a-r,s)]}}function Ene({sourceX:e,sourceY:t,sourcePosition:r=br.Bottom,targetX:n,targetY:a,targetPosition:s=br.Top,curvature:i=.25}){const[o,l]=HV({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=HV({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,p,g]=yne({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${n},${a}`,f,h,p,g]}const OS=I.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=br.Bottom,targetPosition:s=br.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:b})=>{const[y,_,S]=Ene({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:v==null?void 0:v.curvature});return lt.createElement(Kw,{path:y,labelX:_,labelY:S,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:b})});OS.displayName="BezierEdge";const ER=I.createContext(null),D7e=ER.Provider;ER.Consumer;const R7e=()=>I.useContext(ER),P7e=e=>"id"in e&&"source"in e&&"target"in e,L7e=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,_F=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,M7e=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),U7e=(e,t)=>{if(!e.source||!e.target)return t;let r;return P7e(e)?r={...e}:r={...e,id:L7e(e)},M7e(r,t)?t:t.concat(r)},SF=({x:e,y:t},[r,n,a],s,[i,o])=>{const l={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},Cne=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Xv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},CR=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Xv(a,t).positionAbsolute;return S7e(n,xR({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return N7e(r)},_ne=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const l={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:g=!1}=d;if(i&&!p||g)return!1;const{positionAbsolute:v}=Xv(d,o),b={x:v.x,y:v.y,width:f||0,height:h||0},y=wF(l,b),_=typeof f>"u"||typeof h>"u"||f===null||h===null,S=s&&y>0,k=(f||0)*(h||0);(_||S||y>=k||d.dragging)&&u.push(d)}),u},Sne=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Nne=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),l=Math.min(i,o),u=vx(l,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=r/2-f*u;return{x:h,y:p,zoom:u}},Km=(e,t=0)=>e.transition().duration(t);function VV(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function Q7e(e,t,r,n,a,s){const{x:i,y:o}=L0(e),u=t.elementsFromPoint(i,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const v=_R(void 0,u),b=u.getAttribute("data-handleid"),y=s({nodeId:g,id:b,type:v});if(y){const _=a.find(S=>S.nodeId===g&&S.type===v&&S.id===b);return{handle:{id:b,type:v,nodeId:g,x:(_==null?void 0:_.x)||r.x,y:(_==null?void 0:_.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const v=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(v<=n){const b=s(g);v<=f&&(v<f?d=[{handle:g,validHandleResult:b}]:v===f&&d.push({handle:g,validHandleResult:b}),f=v)}}),!d.length)return{handle:null,validHandleResult:kne()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),p=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:v})=>p?g.type==="target":h?v.isValid:!0)||d[0]}const H7e={source:null,target:null,sourceHandle:null,targetHandle:null},kne=()=>({handleDomNode:null,isValid:!1,connection:H7e,endHandle:null});function Bne(e,t,r,n,a,s,i){const o=a==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...kne(),handleDomNode:l};if(l){const d=_R(void 0,l),f=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),p=l.classList.contains("connectable"),g=l.classList.contains("connectableend"),v={source:o?f:r,sourceHandle:o?h:n,target:o?r:f,targetHandle:o?n:h};u.connection=v,p&&g&&(t===Vp.Strict?o&&d==="source"||!o&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(v))}return u}function V7e({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Ss]){const{handleBounds:i}=s[Ss];let o=[],l=[];i&&(o=VV(s,i,"source",`${t}-${r}-${n}`),l=VV(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...l)}return a},[])}function _R(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function kT(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function z7e(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Tne({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=gne(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:g,onConnectStart:v,panBy:b,getNodes:y,cancelConnection:_}=s();let S=0,k;const{x:B,y:F}=L0(e),w=d==null?void 0:d.elementFromPoint(B,F),C=_R(l,w),N=h==null?void 0:h.getBoundingClientRect();if(!N||!C)return;let R,O=L0(e,N),j=!1,U=null,P=!1,X=null;const K=V7e({nodes:y(),nodeId:r,handleId:t,handleType:C}),Z=()=>{if(!p)return;const[q,ne]=pne(O,N);b({x:q,y:ne}),S=requestAnimationFrame(Z)};i({connectionPosition:O,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:C,connectionStartHandle:{nodeId:r,handleId:t,type:C},connectionEndHandle:null}),v==null||v(e,{nodeId:r,handleId:t,handleType:C});function H(q){const{transform:ne}=s();O=L0(q,N);const{handle:L,validHandleResult:W}=Q7e(q,d,SF(O,ne,!1,[1,1]),g,K,J=>Bne(J,f,r,t,a?"target":"source",o,d));if(k=L,j||(Z(),j=!0),X=W.handleDomNode,U=W.connection,P=W.isValid,i({connectionPosition:k&&P?Cne({x:k.x,y:k.y},ne):O,connectionStatus:z7e(!!k,P),connectionEndHandle:W.endHandle}),!k&&!P&&!X)return kT(R);U.source!==U.target&&X&&(kT(R),R=X,X.classList.add("connecting","react-flow__handle-connecting"),X.classList.toggle("valid",P),X.classList.toggle("react-flow__handle-valid",P))}function V(q){var ne,L;(k||X)&&U&&P&&(n==null||n(U)),(L=(ne=s()).onConnectEnd)==null||L.call(ne,q),l&&(u==null||u(q)),kT(R),_(),cancelAnimationFrame(S),j=!1,P=!1,U=null,X=null,d.removeEventListener("mousemove",H),d.removeEventListener("mouseup",V),d.removeEventListener("touchmove",H),d.removeEventListener("touchend",V)}d.addEventListener("mousemove",H),d.addEventListener("mouseup",V),d.addEventListener("touchmove",H),d.addEventListener("touchend",V)}const zV=()=>!0,$7e=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),K7e=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},Ine=I.forwardRef(({type:e="source",position:t=br.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var N,R;const g=i||null,v=e==="target",b=Yi(),y=R7e(),{connectOnClick:_,noPanClassName:S}=ls($7e,el),{connecting:k,clickConnecting:B}=ls(K7e(y,g,e),el);y||(R=(N=b.getState()).onError)==null||R.call(N,"010",th.error010());const F=O=>{const{defaultEdgeOptions:j,onConnect:U,hasDefaultEdges:P}=b.getState(),X={...j,...O};if(P){const{edges:K,setEdges:Z}=b.getState();Z(U7e(X,K))}U==null||U(X),o==null||o(X)},w=O=>{if(!y)return;const j=xne(O);a&&(j&&O.button===0||!j)&&Tne({event:O,handleId:g,nodeId:y,onConnect:F,isTarget:v,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||zV}),j?d==null||d(O):f==null||f(O)},C=O=>{const{onClickConnectStart:j,onClickConnectEnd:U,connectionClickStartHandle:P,connectionMode:X,isValidConnection:K}=b.getState();if(!y||!P&&!a)return;if(!P){j==null||j(O,{nodeId:y,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const Z=gne(O.target),H=r||K||zV,{connection:V,isValid:q}=Bne({nodeId:y,id:g,type:e},X,P.nodeId,P.handleId||null,P.type,H,Z);q&&F(V),U==null||U(O),b.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:yl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,u,{source:!v,target:v,connectable:n,connectablestart:a,connectableend:s,connecting:B,connectionindicator:n&&(a&&!k||s&&k)}]),onMouseDown:w,onTouchStart:w,onClick:_?C:void 0,ref:p,...h},l)});Ine.displayName="Handle";var xx=I.memo(Ine);const jne=({data:e,isConnectable:t,targetPosition:r=br.Top,sourcePosition:n=br.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(xx,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,lt.createElement(xx,{type:"source",position:n,isConnectable:t}));jne.displayName="DefaultNode";var NF=I.memo(jne);const Fne=({data:e,isConnectable:t,sourcePosition:r=br.Bottom})=>lt.createElement(lt.Fragment,null,e==null?void 0:e.label,lt.createElement(xx,{type:"source",position:r,isConnectable:t}));Fne.displayName="InputNode";var One=I.memo(Fne);const Dne=({data:e,isConnectable:t,targetPosition:r=br.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(xx,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);Dne.displayName="OutputNode";var Rne=I.memo(Dne);const SR=()=>null;SR.displayName="GroupNode";const G7e=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),AC=e=>e.id;function q7e(e,t){return el(e.selectedNodes.map(AC),t.selectedNodes.map(AC))&&el(e.selectedEdges.map(AC),t.selectedEdges.map(AC))}const Pne=I.memo(({onSelectionChange:e})=>{const t=Yi(),{selectedNodes:r,selectedEdges:n}=ls(G7e,q7e);return I.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});Pne.displayName="SelectionListener";const W7e=e=>!!e.onSelectionChange;function X7e({onSelectionChange:e}){const t=ls(W7e);return e||t?lt.createElement(Pne,{onSelectionChange:e}):null}const Y7e=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Jg(e,t){I.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function yn(e,t,r){I.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const J7e=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:g,minZoom:v,maxZoom:b,nodeExtent:y,onNodesChange:_,onEdgesChange:S,elementsSelectable:k,connectionMode:B,snapGrid:F,snapToGrid:w,translateExtent:C,connectOnClick:N,defaultEdgeOptions:R,fitView:O,fitViewOptions:j,onNodesDelete:U,onEdgesDelete:P,onNodeDrag:X,onNodeDragStart:K,onNodeDragStop:Z,onSelectionDrag:H,onSelectionDragStart:V,onSelectionDragStop:q,noPanClassName:ne,nodeOrigin:L,rfId:W,autoPanOnConnect:J,autoPanOnNodeDrag:te,onError:ie,connectionRadius:Ae,isValidConnection:oe,nodeDragThreshold:ce})=>{const{setNodes:ge,setEdges:je,setDefaultNodesAndEdges:re,setMinZoom:Se,setMaxZoom:De,setTranslateExtent:_e,setNodeExtent:he,reset:Ie}=ls(Y7e,el),He=Yi();return I.useEffect(()=>{const Xe=n==null?void 0:n.map(ye=>({...ye,...R}));return re(r,Xe),()=>{Ie()}},[]),yn("defaultEdgeOptions",R,He.setState),yn("connectionMode",B,He.setState),yn("onConnect",a,He.setState),yn("onConnectStart",s,He.setState),yn("onConnectEnd",i,He.setState),yn("onClickConnectStart",o,He.setState),yn("onClickConnectEnd",l,He.setState),yn("nodesDraggable",u,He.setState),yn("nodesConnectable",d,He.setState),yn("nodesFocusable",f,He.setState),yn("edgesFocusable",h,He.setState),yn("edgesUpdatable",p,He.setState),yn("elementsSelectable",k,He.setState),yn("elevateNodesOnSelect",g,He.setState),yn("snapToGrid",w,He.setState),yn("snapGrid",F,He.setState),yn("onNodesChange",_,He.setState),yn("onEdgesChange",S,He.setState),yn("connectOnClick",N,He.setState),yn("fitViewOnInit",O,He.setState),yn("fitViewOnInitOptions",j,He.setState),yn("onNodesDelete",U,He.setState),yn("onEdgesDelete",P,He.setState),yn("onNodeDrag",X,He.setState),yn("onNodeDragStart",K,He.setState),yn("onNodeDragStop",Z,He.setState),yn("onSelectionDrag",H,He.setState),yn("onSelectionDragStart",V,He.setState),yn("onSelectionDragStop",q,He.setState),yn("noPanClassName",ne,He.setState),yn("nodeOrigin",L,He.setState),yn("rfId",W,He.setState),yn("autoPanOnConnect",J,He.setState),yn("autoPanOnNodeDrag",te,He.setState),yn("onError",ie,He.setState),yn("connectionRadius",Ae,He.setState),yn("isValidConnection",oe,He.setState),yn("nodeDragThreshold",ce,He.setState),Jg(e,ge),Jg(t,je),Jg(v,Se),Jg(b,De),Jg(C,_e),Jg(y,he),null},$V={display:"none"},Z7e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Lne="react-flow__node-desc",Mne="react-flow__edge-desc",e9e="react-flow__aria-live",t9e=e=>e.ariaLiveMessage;function r9e({rfId:e}){const t=ls(t9e);return lt.createElement("div",{id:`${e9e}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Z7e},t)}function n9e({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${Lne}-${e}`,style:$V},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${Mne}-${e}`,style:$V},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(r9e,{rfId:e}))}var rw=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=I.useState(!1),a=I.useRef(!1),s=I.useRef(new Set([])),[i,o]=I.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return I.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&EF(p))return!1;const v=GV(p.code,o);s.current.add(p[v]),KV(i,s.current,!1)&&(p.preventDefault(),n(!0))},f=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&EF(p))return!1;const v=GV(p.code,o);KV(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[v]),p.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function KV(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function GV(e,t){return t.includes(e)?"code":"key"}function Une(e,t,r,n){var o,l;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Xv(s,n);return Une(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Ss])==null?void 0:o.z)??0)>(r.z??0)?((l=s[Ss])==null?void 0:l.z)??0:r.z??0},n)}function Qne(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:l}=Une(n,e,{...n.position,z:((s=n[Ss])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[Ss].z=l,r!=null&&r[n.id]&&(n[Ss].isParent=!0)}})}function BT(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const l=(ku(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Ss,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[Ss])==null?void 0:p.handleBounds,z:l}}),a.set(o.id,d)}),Qne(a,r,s),a}function Hne(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(o&&l&&(h||!t.initial)){const g=r().filter(b=>{var _;const y=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(_=t.nodes)!=null&&_.length?y&&t.nodes.some(S=>S.id===b.id):y}),v=g.every(b=>b.width&&b.height);if(g.length>0&&v){const b=CR(g,f),{x:y,y:_,zoom:S}=Nne(b,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),k=P0.translate(y,_).scale(S);return typeof t.duration=="number"&&t.duration>0?o.transform(Km(l,t.duration),k):o.transform(l,k),!0}}return!1}function a9e(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Ss]:n[Ss],selected:r.selected})}),new Map(t)}function s9e(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function fC({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=r();e!=null&&e.length&&(l&&n({nodeInternals:a9e(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:s9e(t,s)}),o==null||o(t))}const Zg=()=>{},i9e={zoomIn:Zg,zoomOut:Zg,zoomTo:Zg,getZoom:()=>1,setViewport:Zg,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Zg,fitBounds:Zg,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},o9e=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),l9e=()=>{const e=Yi(),{d3Zoom:t,d3Selection:r}=ls(o9e,el);return I.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Km(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Km(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Km(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,l]=e.getState().transform,u=P0.translate(a.x??i,a.y??o).scale(a.zoom??l);t.transform(Km(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>Hne(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:l,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,h=l/2-s*d,p=P0.translate(f,h).scale(d);t.transform(Km(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Nne(a,i,o,l,u,(s==null?void 0:s.padding)??.1),p=P0.translate(d,f).scale(h);t.transform(Km(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),SF(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:l}=e.getState();if(!l)return a;const{x:u,y:d}=l.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return SF(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:l}=i.getBoundingClientRect(),u=Cne(a,s);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:i9e,[t,r])};function zN(){const e=l9e(),t=Yi(),r=I.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),n=I.useCallback(v=>t.getState().nodeInternals.get(v),[]),a=I.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(b=>({...b}))},[]),s=I.useCallback(v=>{const{edges:b=[]}=t.getState();return b.find(y=>y.id===v)},[]),i=I.useCallback(v=>{const{getNodes:b,setNodes:y,hasDefaultNodes:_,onNodesChange:S}=t.getState(),k=b(),B=typeof v=="function"?v(k):v;if(_)y(B);else if(S){const F=B.length===0?k.map(w=>({type:"remove",id:w.id})):B.map(w=>({item:w,type:"reset"}));S(F)}},[]),o=I.useCallback(v=>{const{edges:b=[],setEdges:y,hasDefaultEdges:_,onEdgesChange:S}=t.getState(),k=typeof v=="function"?v(b):v;if(_)y(k);else if(S){const B=k.length===0?b.map(F=>({type:"remove",id:F.id})):k.map(F=>({item:F,type:"reset"}));S(B)}},[]),l=I.useCallback(v=>{const b=Array.isArray(v)?v:[v],{getNodes:y,setNodes:_,hasDefaultNodes:S,onNodesChange:k}=t.getState();if(S){const F=[...y(),...b];_(F)}else if(k){const B=b.map(F=>({item:F,type:"add"}));k(B)}},[]),u=I.useCallback(v=>{const b=Array.isArray(v)?v:[v],{edges:y=[],setEdges:_,hasDefaultEdges:S,onEdgesChange:k}=t.getState();if(S)_([...y,...b]);else if(k){const B=b.map(F=>({item:F,type:"add"}));k(B)}},[]),d=I.useCallback(()=>{const{getNodes:v,edges:b=[],transform:y}=t.getState(),[_,S,k]=y;return{nodes:v().map(B=>({...B})),edges:b.map(B=>({...B})),viewport:{x:_,y:S,zoom:k}}},[]),f=I.useCallback(({nodes:v,edges:b})=>{const{nodeInternals:y,getNodes:_,edges:S,hasDefaultNodes:k,hasDefaultEdges:B,onNodesDelete:F,onEdgesDelete:w,onNodesChange:C,onEdgesChange:N}=t.getState(),R=(v||[]).map(X=>X.id),O=(b||[]).map(X=>X.id),j=_().reduce((X,K)=>{const Z=K.parentNode||K.parentId,H=!R.includes(K.id)&&Z&&X.find(q=>q.id===Z);return(typeof K.deletable=="boolean"?K.deletable:!0)&&(R.includes(K.id)||H)&&X.push(K),X},[]),U=S.filter(X=>typeof X.deletable=="boolean"?X.deletable:!0),P=U.filter(X=>O.includes(X.id));if(j||P){const X=Sne(j,U),K=[...P,...X],Z=K.reduce((H,V)=>(H.includes(V.id)||H.push(V.id),H),[]);if((B||k)&&(B&&t.setState({edges:S.filter(H=>!Z.includes(H.id))}),k&&(j.forEach(H=>{y.delete(H.id)}),t.setState({nodeInternals:new Map(y)}))),Z.length>0&&(w==null||w(K),N&&N(Z.map(H=>({id:H,type:"remove"})))),j.length>0&&(F==null||F(j),C)){const H=j.map(V=>({id:V.id,type:"remove"}));C(H)}}},[]),h=I.useCallback(v=>{const b=k7e(v),y=b?null:t.getState().nodeInternals.get(v.id);return!b&&!y?[null,null,b]:[b?v:LV(y),y,b]},[]),p=I.useCallback((v,b=!0,y)=>{const[_,S,k]=h(v);return _?(y||t.getState().getNodes()).filter(B=>{if(!k&&(B.id===S.id||!B.positionAbsolute))return!1;const F=LV(B),w=wF(F,_);return b&&w>0||w>=_.width*_.height}):[]},[]),g=I.useCallback((v,b,y=!0)=>{const[_]=h(v);if(!_)return!1;const S=wF(_,b);return y&&S>0||S>=_.width*_.height},[]);return I.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:g}),[e,r,n,a,s,i,o,l,u,d,f,p,g])}const c9e={actInsideInputWithModifier:!1};var u9e=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=Yi(),{deleteElements:n}=zN(),a=rw(e,c9e),s=rw(t);I.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:l,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),I.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function d9e(e){const t=Yi();I.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=gR(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",th.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const NR={position:"absolute",width:"100%",height:"100%",top:0,left:0},A9e=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,hC=e=>({x:e.x,y:e.y,zoom:e.k}),ev=(e,t)=>e.target.closest(`.${t}`),qV=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),WV=e=>{const t=e.ctrlKey&&jS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},f9e=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),h9e=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=sp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:g,maxZoom:v,zoomActivationKeyCode:b,preventScrolling:y=!0,children:_,noWheelClassName:S,noPanClassName:k})=>{const B=I.useRef(),F=Yi(),w=I.useRef(!1),C=I.useRef(!1),N=I.useRef(null),R=I.useRef({x:0,y:0,zoom:0}),{d3Zoom:O,d3Selection:j,d3ZoomHandler:U,userSelectionActive:P}=ls(f9e,el),X=rw(b),K=I.useRef(0),Z=I.useRef(!1),H=I.useRef();return d9e(N),I.useEffect(()=>{if(N.current){const V=N.current.getBoundingClientRect(),q=b7e().scaleExtent([g,v]).translateExtent(p),ne=Eu(N.current).call(q),L=P0.translate(h.x,h.y).scale(vx(h.zoom,g,v)),W=[[0,0],[V.width,V.height]],J=q.constrain()(L,W,p);q.transform(ne,J),q.wheelDelta(WV),F.setState({d3Zoom:q,d3Selection:ne,d3ZoomHandler:ne.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:N.current.closest(".react-flow")})}},[]),I.useEffect(()=>{j&&O&&(i&&!X&&!P?j.on("wheel.zoom",V=>{if(ev(V,S))return!1;V.preventDefault(),V.stopImmediatePropagation();const q=j.property("__zoom").k||1;if(V.ctrlKey&&s){const oe=hA(V),ce=WV(V),ge=q*Math.pow(2,ce);O.scaleTo(j,ge,oe,V);return}const ne=V.deltaMode===1?20:1;let L=l===sp.Vertical?0:V.deltaX*ne,W=l===sp.Horizontal?0:V.deltaY*ne;!jS()&&V.shiftKey&&l!==sp.Vertical&&(L=V.deltaY*ne,W=0),O.translateBy(j,-(L/q)*o,-(W/q)*o,{internal:!0});const J=hC(j.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ie,onViewportChangeEnd:Ae}=F.getState();clearTimeout(H.current),Z.current||(Z.current=!0,t==null||t(V,J),te==null||te(J)),Z.current&&(e==null||e(V,J),ie==null||ie(J),H.current=setTimeout(()=>{r==null||r(V,J),Ae==null||Ae(J),Z.current=!1},150))},{passive:!1}):typeof U<"u"&&j.on("wheel.zoom",function(V,q){if(!y&&V.type==="wheel"&&!V.ctrlKey||ev(V,S))return null;V.preventDefault(),U.call(this,V,q)},{passive:!1}))},[P,i,l,j,O,U,X,s,y,S,t,e,r]),I.useEffect(()=>{O&&O.on("start",V=>{var L,W;if(!V.sourceEvent||V.sourceEvent.internal)return null;K.current=(L=V.sourceEvent)==null?void 0:L.button;const{onViewportChangeStart:q}=F.getState(),ne=hC(V.transform);w.current=!0,R.current=ne,((W=V.sourceEvent)==null?void 0:W.type)==="mousedown"&&F.setState({paneDragging:!0}),q==null||q(ne),t==null||t(V.sourceEvent,ne)})},[O,t]),I.useEffect(()=>{O&&(P&&!w.current?O.on("zoom",null):P||O.on("zoom",V=>{var ne;const{onViewportChange:q}=F.getState();if(F.setState({transform:[V.transform.x,V.transform.y,V.transform.k]}),C.current=!!(n&&qV(f,K.current??0)),(e||q)&&!((ne=V.sourceEvent)!=null&&ne.internal)){const L=hC(V.transform);q==null||q(L),e==null||e(V.sourceEvent,L)}}))},[P,O,e,f,n]),I.useEffect(()=>{O&&O.on("end",V=>{if(!V.sourceEvent||V.sourceEvent.internal)return null;const{onViewportChangeEnd:q}=F.getState();if(w.current=!1,F.setState({paneDragging:!1}),n&&qV(f,K.current??0)&&!C.current&&n(V.sourceEvent),C.current=!1,(r||q)&&A9e(R.current,V.transform)){const ne=hC(V.transform);R.current=ne,clearTimeout(B.current),B.current=setTimeout(()=>{q==null||q(ne),r==null||r(V.sourceEvent,ne)},i?150:0)}})},[O,i,f,r,n]),I.useEffect(()=>{O&&O.filter(V=>{const q=X||a,ne=s&&V.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&V.button===1&&V.type==="mousedown"&&(ev(V,"react-flow__node")||ev(V,"react-flow__edge")))return!0;if(!f&&!q&&!i&&!u&&!s||P||!u&&V.type==="dblclick"||ev(V,S)&&V.type==="wheel"||ev(V,k)&&(V.type!=="wheel"||i&&V.type==="wheel"&&!X)||!s&&V.ctrlKey&&V.type==="wheel"||!q&&!i&&!ne&&V.type==="wheel"||!f&&(V.type==="mousedown"||V.type==="touchstart")||Array.isArray(f)&&!f.includes(V.button)&&V.type==="mousedown")return!1;const L=Array.isArray(f)&&f.includes(V.button)||!V.button||V.button<=1;return(!V.ctrlKey||V.type==="wheel")&&L})},[P,O,a,s,i,u,f,d,X]),lt.createElement("div",{className:"react-flow__renderer",ref:N,style:NR},_)},m9e=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function p9e(){const{userSelectionActive:e,userSelectionRect:t}=ls(m9e,el);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function XV(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Vne(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&XV(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&XV(n,i);break}case"remove":return n}return n.push(i),n},r)}function zne(e,t){return Vne(e,t)}function g9e(e,t){return Vne(e,t)}const A0=(e,t)=>({id:e,type:"select",selected:t});function Cv(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(A0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(A0(n.id,!1))),r},[])}const TT=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},v9e=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),$ne=I.memo(({isSelecting:e,selectionMode:t=tw.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=I.useRef(null),p=Yi(),g=I.useRef(0),v=I.useRef(0),b=I.useRef(),{userSelectionActive:y,elementsSelectable:_,dragging:S}=ls(v9e,el),k=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},B=U=>{s==null||s(U),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},F=U=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){U.preventDefault();return}i==null||i(U)},w=o?U=>o(U):void 0,C=U=>{const{resetSelectedElements:P,domNode:X}=p.getState();if(b.current=X==null?void 0:X.getBoundingClientRect(),!_||!e||U.button!==0||U.target!==h.current||!b.current)return;const{x:K,y:Z}=L0(U,b.current);P(),p.setState({userSelectionRect:{width:0,height:0,startX:K,startY:Z,x:K,y:Z}}),n==null||n(U)},N=U=>{const{userSelectionRect:P,nodeInternals:X,edges:K,transform:Z,onNodesChange:H,onEdgesChange:V,nodeOrigin:q,getNodes:ne}=p.getState();if(!e||!b.current||!P)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const L=L0(U,b.current),W=P.startX??0,J=P.startY??0,te={...P,x:L.x<W?L.x:W,y:L.y<J?L.y:J,width:Math.abs(L.x-W),height:Math.abs(L.y-J)},ie=ne(),Ae=_ne(X,te,Z,t===tw.Partial,!0,q),oe=Sne(Ae,K).map(ge=>ge.id),ce=Ae.map(ge=>ge.id);if(g.current!==ce.length){g.current=ce.length;const ge=Cv(ie,ce);ge.length&&(H==null||H(ge))}if(v.current!==oe.length){v.current=oe.length;const ge=Cv(K,oe);ge.length&&(V==null||V(ge))}p.setState({userSelectionRect:te})},R=U=>{if(U.button!==0)return;const{userSelectionRect:P}=p.getState();!y&&P&&U.target===h.current&&(B==null||B(U)),p.setState({nodesSelectionActive:g.current>0}),k(),a==null||a(U)},O=U=>{y&&(p.setState({nodesSelectionActive:g.current>0}),a==null||a(U)),k()},j=_&&(e||y);return lt.createElement("div",{className:yl(["react-flow__pane",{dragging:S,selection:e}]),onClick:j?void 0:TT(B,h),onContextMenu:TT(F,h),onWheel:TT(w,h),onMouseEnter:j?void 0:l,onMouseDown:j?C:void 0,onMouseMove:j?N:u,onMouseUp:j?R:void 0,onMouseLeave:j?O:d,ref:h,style:NR},f,lt.createElement(p9e,null))});$ne.displayName="Pane";function Kne(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:Kne(n,t):!1}function YV(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function x9e(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!Kne(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function b9e(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Gne(e,t,r,n,a=[0,0],s){const i=b9e(e,e.extent||n);let o=i;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const f=r.get(l),{x:h,y:p}=Xv(f,a).positionAbsolute;o=f&&ku(h)&&ku(p)&&ku(f.width)&&ku(f.height)?[[h+e.width*a[0],p+e.height*a[1]],[h+f.width-e.width+e.width*a[0],p+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",th.error005()),o=i;else if(e.extent&&l&&e.extent!=="parent"){const f=r.get(l),{x:h,y:p}=Xv(f,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(l){const f=r.get(l);u=Xv(f,a).positionAbsolute}const d=o&&o!=="parent"?vR(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function IT({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const JV=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...gR(l)}})};function lb(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function kF({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:l}=t.getState(),u=o.get(e);if(!u){l==null||l("012",th.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function y9e(){const e=Yi();return I.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(l.x/a[0]):l.x,ySnapped:s?a[1]*Math.round(l.y/a[1]):l.y,...l}},[])}function jT(e){return(t,r,n)=>e==null?void 0:e(t,n)}function qne({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=Yi(),[l,u]=I.useState(!1),d=I.useRef([]),f=I.useRef({x:null,y:null}),h=I.useRef(0),p=I.useRef(null),g=I.useRef({x:0,y:0}),v=I.useRef(null),b=I.useRef(!1),y=I.useRef(!1),_=I.useRef(!1),S=y9e();return I.useEffect(()=>{if(e!=null&&e.current){const k=Eu(e.current),B=({x:C,y:N})=>{const{nodeInternals:R,onNodeDrag:O,onSelectionDrag:j,updateNodePositions:U,nodeExtent:P,snapGrid:X,snapToGrid:K,nodeOrigin:Z,onError:H}=o.getState();f.current={x:C,y:N};let V=!1,q={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&P){const L=CR(d.current,Z);q=xR(L)}if(d.current=d.current.map(L=>{const W={x:C-L.distance.x,y:N-L.distance.y};K&&(W.x=X[0]*Math.round(W.x/X[0]),W.y=X[1]*Math.round(W.y/X[1]));const J=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];d.current.length>1&&P&&!L.extent&&(J[0][0]=L.positionAbsolute.x-q.x+P[0][0],J[1][0]=L.positionAbsolute.x+(L.width??0)-q.x2+P[1][0],J[0][1]=L.positionAbsolute.y-q.y+P[0][1],J[1][1]=L.positionAbsolute.y+(L.height??0)-q.y2+P[1][1]);const te=Gne(L,W,R,J,Z,H);return V=V||L.position.x!==te.position.x||L.position.y!==te.position.y,L.position=te.position,L.positionAbsolute=te.positionAbsolute,L}),!V)return;U(d.current,!0,!0),u(!0);const ne=a?O:jT(j);if(ne&&v.current){const[L,W]=IT({nodeId:a,dragItems:d.current,nodeInternals:R});ne(v.current,L,W)}},F=()=>{if(!p.current)return;const[C,N]=pne(g.current,p.current);if(C!==0||N!==0){const{transform:R,panBy:O}=o.getState();f.current.x=(f.current.x??0)-C/R[2],f.current.y=(f.current.y??0)-N/R[2],O({x:C,y:N})&&B(f.current)}h.current=requestAnimationFrame(F)},w=C=>{var Z;const{nodeInternals:N,multiSelectionActive:R,nodesDraggable:O,unselectNodesAndEdges:j,onNodeDragStart:U,onSelectionDragStart:P}=o.getState();y.current=!0;const X=a?U:jT(P);(!i||!s)&&!R&&a&&((Z=N.get(a))!=null&&Z.selected||j()),a&&s&&i&&kF({id:a,store:o,nodeRef:e});const K=S(C);if(f.current=K,d.current=x9e(N,O,K,a),X&&d.current){const[H,V]=IT({nodeId:a,dragItems:d.current,nodeInternals:N});X(C.sourceEvent,H,V)}};if(t)k.on(".drag",null);else{const C=_Me().on("start",N=>{const{domNode:R,nodeDragThreshold:O}=o.getState();O===0&&w(N),_.current=!1;const j=S(N);f.current=j,p.current=(R==null?void 0:R.getBoundingClientRect())||null,g.current=L0(N.sourceEvent,p.current)}).on("drag",N=>{var U,P;const R=S(N),{autoPanOnNodeDrag:O,nodeDragThreshold:j}=o.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(_.current=!0),!_.current){if(!b.current&&y.current&&O&&(b.current=!0,F()),!y.current){const X=R.xSnapped-(((U=f==null?void 0:f.current)==null?void 0:U.x)??0),K=R.ySnapped-(((P=f==null?void 0:f.current)==null?void 0:P.y)??0);Math.sqrt(X*X+K*K)>j&&w(N)}(f.current.x!==R.xSnapped||f.current.y!==R.ySnapped)&&d.current&&y.current&&(v.current=N.sourceEvent,g.current=L0(N.sourceEvent,p.current),B(R))}}).on("end",N=>{if(!(!y.current||_.current)&&(u(!1),b.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:R,nodeInternals:O,onNodeDragStop:j,onSelectionDragStop:U}=o.getState(),P=a?j:jT(U);if(R(d.current,!1,!1),P){const[X,K]=IT({nodeId:a,dragItems:d.current,nodeInternals:O});P(N.sourceEvent,X,K)}}}).filter(N=>{const R=N.target;return!N.button&&(!r||!YV(R,`.${r}`,e))&&(!n||YV(R,n,e))});return k.call(C),()=>{k.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,S]),l}function Wne(){const e=Yi();return I.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(_=>_.selected&&(_.draggable||d&&typeof _.draggable>"u")),h=o?l[0]:5,p=o?l[1]:5,g=r.isShiftPressed?4:1,v=r.x*h*g,b=r.y*p*g,y=f.map(_=>{if(_.positionAbsolute){const S={x:_.positionAbsolute.x+v,y:_.positionAbsolute.y+b};o&&(S.x=l[0]*Math.round(S.x/l[0]),S.y=l[1]*Math.round(S.y/l[1]));const{positionAbsolute:k,position:B}=Gne(_,S,n,a,void 0,u);_.position=B,_.positionAbsolute=k}return _});s(y,!0,!1)},[])}const Yv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var cb=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:g,onDoubleClick:v,style:b,className:y,isDraggable:_,isSelectable:S,isConnectable:k,isFocusable:B,selectNodesOnDrag:F,sourcePosition:w,targetPosition:C,hidden:N,resizeObserver:R,dragHandle:O,zIndex:j,isParent:U,noDragClassName:P,noPanClassName:X,initialized:K,disableKeyboardA11y:Z,ariaLabel:H,rfId:V,hasHandleBounds:q})=>{const ne=Yi(),L=I.useRef(null),W=I.useRef(null),J=I.useRef(w),te=I.useRef(C),ie=I.useRef(n),Ae=S||_||d||f||h||p,oe=Wne(),ce=lb(r,ne.getState,f),ge=lb(r,ne.getState,h),je=lb(r,ne.getState,p),re=lb(r,ne.getState,g),Se=lb(r,ne.getState,v),De=Ie=>{const{nodeDragThreshold:He}=ne.getState();if(S&&(!F||!_||He>0)&&kF({id:r,store:ne,nodeRef:L}),d){const Xe=ne.getState().nodeInternals.get(r);Xe&&d(Ie,{...Xe})}},_e=Ie=>{if(!EF(Ie)&&!Z)if(vne.includes(Ie.key)&&S){const He=Ie.key==="Escape";kF({id:r,store:ne,unselect:He,nodeRef:L})}else _&&u&&Object.prototype.hasOwnProperty.call(Yv,Ie.key)&&(ne.setState({ariaLiveMessage:`Moved selected node ${Ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),oe({x:Yv[Ie.key].x,y:Yv[Ie.key].y,isShiftPressed:Ie.shiftKey}))};I.useEffect(()=>()=>{W.current&&(R==null||R.unobserve(W.current),W.current=null)},[]),I.useEffect(()=>{if(L.current&&!N){const Ie=L.current;(!K||!q||W.current!==Ie)&&(W.current&&(R==null||R.unobserve(W.current)),R==null||R.observe(Ie),W.current=Ie)}},[N,K,q]),I.useEffect(()=>{const Ie=ie.current!==n,He=J.current!==w,Xe=te.current!==C;L.current&&(Ie||He||Xe)&&(Ie&&(ie.current=n),He&&(J.current=w),Xe&&(te.current=C),ne.getState().updateNodeDimensions([{id:r,nodeElement:L.current,forceUpdate:!0}]))},[r,n,w,C]);const he=qne({nodeRef:L,disabled:N||!_,noDragClassName:P,handleSelector:O,nodeId:r,isSelectable:S,selectNodesOnDrag:F});return N?null:lt.createElement("div",{className:yl(["react-flow__node",`react-flow__node-${n}`,{[X]:_},y,{selected:u,selectable:S,parent:U,dragging:he}]),ref:L,style:{zIndex:j,transform:`translate(${o}px,${l}px)`,pointerEvents:Ae?"all":"none",visibility:K?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:ge,onMouseLeave:je,onContextMenu:re,onClick:De,onDoubleClick:Se,onKeyDown:B?_e:void 0,tabIndex:B?0:void 0,role:B?"button":void 0,"aria-describedby":Z?void 0:`${Lne}-${V}`,"aria-label":H},lt.createElement(D7e,{value:r},lt.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:k,sourcePosition:w,targetPosition:C,dragging:he,dragHandle:O,zIndex:j})))};return t.displayName="NodeWrapper",I.memo(t)};const w9e=e=>{const t=e.getNodes().filter(r=>r.selected);return{...CR(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function E9e({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=Yi(),{width:a,height:s,x:i,y:o,transformString:l,userSelectionActive:u}=ls(w9e,el),d=Wne(),f=I.useRef(null);if(I.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),qne({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const v=n.getState().getNodes().filter(b=>b.selected);e(g,v)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Yv,g.key)&&d({x:Yv[g.key].x,y:Yv[g.key].y,isShiftPressed:g.shiftKey})};return lt.createElement("div",{className:yl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},lt.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var C9e=I.memo(E9e);const _9e=e=>e.nodesSelectionActive,Xne=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:_,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:B,panOnScroll:F,panOnScrollSpeed:w,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:R,defaultViewport:O,translateExtent:j,minZoom:U,maxZoom:P,preventScrolling:X,onSelectionContextMenu:K,noWheelClassName:Z,noPanClassName:H,disableKeyboardA11y:V})=>{const q=ls(_9e),ne=rw(f),L=rw(y),W=L||R,J=L||F,te=ne||h&&W!==!0;return u9e({deleteKeyCode:o,multiSelectionKeyCode:b}),lt.createElement(h9e,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:S,zoomOnScroll:k,zoomOnPinch:B,panOnScroll:J,panOnScrollSpeed:w,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:!ne&&W,defaultViewport:O,translateExtent:j,minZoom:U,maxZoom:P,zoomActivationKeyCode:_,preventScrolling:X,noWheelClassName:Z,noPanClassName:H},lt.createElement($ne,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:W,isSelecting:!!te,selectionMode:p},e,q&&lt.createElement(C9e,{onSelectionContextMenu:K,noPanClassName:H,disableKeyboardA11y:V})))};Xne.displayName="FlowRenderer";var S9e=I.memo(Xne);function N9e(e){return ls(I.useCallback(r=>e?_ne(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function k9e(e){const t={input:cb(e.input||One),default:cb(e.default||NF),output:cb(e.output||Rne),group:cb(e.group||SR)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=cb(e[s]||NF),a),r);return{...t,...n}}const B9e=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},T9e=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Yne=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=ls(T9e,el),o=N9e(e.onlyRenderVisibleElements),l=I.useRef(),u=I.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return l.current=d,d},[]);return I.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:NR},o.map(d=>{var B,F,w;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",th.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),v=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?vR(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,_=(y==null?void 0:y.x)??0,S=(y==null?void 0:y.y)??0,k=B9e({x:_,y:S,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return lt.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||br.Bottom,targetPosition:d.targetPosition||br.Top,hidden:d.hidden,xPos:_,yPos:S,xPosOrigin:k.x,yPosOrigin:k.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:g,isConnectable:v,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((B=d[Ss])==null?void 0:B.z)??0,isParent:!!((F=d[Ss])!=null&&F.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((w=d[Ss])!=null&&w.handleBounds)})}))};Yne.displayName="NodeRenderer";var I9e=I.memo(Yne);const j9e=(e,t,r)=>r===br.Left?e-t:r===br.Right?e+t:e,F9e=(e,t,r)=>r===br.Top?e-t:r===br.Bottom?e+t:e,ZV="react-flow__edgeupdater",ez=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>lt.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:yl([ZV,`${ZV}-${o}`]),cx:j9e(t,n,e),cy:F9e(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),O9e=()=>!0;var tv=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:b,source:y,target:_,sourceX:S,sourceY:k,targetX:B,targetY:F,sourcePosition:w,targetPosition:C,elementsSelectable:N,hidden:R,sourceHandleId:O,targetHandleId:j,onContextMenu:U,onMouseEnter:P,onMouseMove:X,onMouseLeave:K,reconnectRadius:Z,onReconnect:H,onReconnectStart:V,onReconnectEnd:q,markerEnd:ne,markerStart:L,rfId:W,ariaLabel:J,isFocusable:te,isReconnectable:ie,pathOptions:Ae,interactionWidth:oe,disableKeyboardA11y:ce})=>{const ge=I.useRef(null),[je,re]=I.useState(!1),[Se,De]=I.useState(!1),_e=Yi(),he=I.useMemo(()=>`url('#${_F(L,W)}')`,[L,W]),Ie=I.useMemo(()=>`url('#${_F(ne,W)}')`,[ne,W]);if(R)return null;const He=bt=>{var In;const{edges:Nr,addSelectedEdges:tr,unselectNodesAndEdges:nn,multiSelectionActive:Cr}=_e.getState(),Vr=Nr.find(jr=>jr.id===r);Vr&&(N&&(_e.setState({nodesSelectionActive:!1}),Vr.selected&&Cr?(nn({nodes:[],edges:[Vr]}),(In=ge.current)==null||In.blur()):tr([r])),i&&i(bt,Vr))},Xe=ob(r,_e.getState,o),ye=ob(r,_e.getState,U),Oe=ob(r,_e.getState,P),Pe=ob(r,_e.getState,X),qe=ob(r,_e.getState,K),Ze=(bt,Nr)=>{if(bt.button!==0)return;const{edges:tr,isValidConnection:nn}=_e.getState(),Cr=Nr?_:y,Vr=(Nr?j:O)||null,In=Nr?"target":"source",jr=nn||O9e,vt=Nr,pt=tr.find(dt=>dt.id===r);De(!0),V==null||V(bt,pt,In);const Je=dt=>{De(!1),q==null||q(dt,pt,In)};Tne({event:bt,handleId:Vr,nodeId:Cr,onConnect:dt=>H==null?void 0:H(pt,dt),isTarget:vt,getState:_e.getState,setState:_e.setState,isValidConnection:jr,edgeUpdaterType:In,onReconnectEnd:Je})},ot=bt=>Ze(bt,!0),mt=bt=>Ze(bt,!1),Bt=()=>re(!0),Lt=()=>re(!1),Ot=!N&&!i,Qt=bt=>{var Nr;if(!ce&&vne.includes(bt.key)&&N){const{unselectNodesAndEdges:tr,addSelectedEdges:nn,edges:Cr}=_e.getState();bt.key==="Escape"?((Nr=ge.current)==null||Nr.blur(),tr({edges:[Cr.find(In=>In.id===r)]})):nn([r])}};return lt.createElement("g",{className:yl(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:l,animated:u,inactive:Ot,updating:je}]),onClick:He,onDoubleClick:Xe,onContextMenu:ye,onMouseEnter:Oe,onMouseMove:Pe,onMouseLeave:qe,onKeyDown:te?Qt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":J===null?void 0:J||`Edge from ${y} to ${_}`,"aria-describedby":te?`${Mne}-${W}`:void 0,ref:ge},!Se&&lt.createElement(e,{id:r,source:y,target:_,selected:l,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,data:s,style:b,sourceX:S,sourceY:k,targetX:B,targetY:F,sourcePosition:w,targetPosition:C,sourceHandleId:O,targetHandleId:j,markerStart:he,markerEnd:Ie,pathOptions:Ae,interactionWidth:oe}),ie&&lt.createElement(lt.Fragment,null,(ie==="source"||ie===!0)&&lt.createElement(ez,{position:w,centerX:S,centerY:k,radius:Z,onMouseDown:ot,onMouseEnter:Bt,onMouseOut:Lt,type:"source"}),(ie==="target"||ie===!0)&&lt.createElement(ez,{position:C,centerX:B,centerY:F,radius:Z,onMouseDown:mt,onMouseEnter:Bt,onMouseOut:Lt,type:"target"})))};return t.displayName="EdgeWrapper",I.memo(t)};function D9e(e){const t={default:tv(e.default||OS),straight:tv(e.bezier||wR),step:tv(e.step||yR),smoothstep:tv(e.step||VN),simplebezier:tv(e.simplebezier||bR)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=tv(e[s]||OS),a),r);return{...t,...n}}function tz(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case br.Top:return{x:n+s/2,y:a};case br.Right:return{x:n+s,y:a+i/2};case br.Bottom:return{x:n+s/2,y:a+i};case br.Left:return{x:n,y:a+i/2}}}function rz(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const R9e=(e,t,r,n,a,s)=>{const i=tz(r,e,t),o=tz(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function P9e({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=xR({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function nz(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[Ss])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const L9e=[{level:0,isMaxLevel:!0,edges:[]}];function M9e(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const l=ku(o.zIndex);let u=l?o.zIndex:0;if(r){const h=t.get(o.target),p=t.get(o.source),g=o.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),v=Math.max(((d=p==null?void 0:p[Ss])==null?void 0:d.z)||0,((f=h==null?void 0:h[Ss])==null?void 0:f.z)||0,1e3);u=(l?o.zIndex:0)+(g?v:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return s.length===0?L9e:s}function U9e(e,t,r){const n=ls(I.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&P9e({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return M9e(n,t,r)}const Q9e=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),H9e=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),az={[FS.Arrow]:Q9e,[FS.ArrowClosed]:H9e};function V9e(e){const t=Yi();return I.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(az,e)?az[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",th.error009(e)),null)},[e])}const z9e=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=V9e(t);return l?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},lt.createElement(l,{color:r,strokeWidth:i})):null},$9e=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=_F(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},Jne=({defaultColor:e,rfId:t})=>{const r=ls(I.useCallback($9e({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return lt.createElement("defs",null,r.map(n=>lt.createElement(z9e,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};Jne.displayName="MarkerDefinitions";var K9e=I.memo(Jne);const G9e=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Zne=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:v,children:b,disableKeyboardA11y:y})=>{const{edgesFocusable:_,edgesUpdatable:S,elementsSelectable:k,width:B,height:F,connectionMode:w,nodeInternals:C,onError:N}=ls(G9e,el),R=U9e(t,C,r);return B?lt.createElement(lt.Fragment,null,R.map(({level:O,edges:j,isMaxLevel:U})=>lt.createElement("svg",{key:O,style:{zIndex:O},width:B,height:F,className:"react-flow__edges react-flow__container"},U&&lt.createElement(K9e,{defaultColor:e,rfId:n}),lt.createElement("g",null,j.map(P=>{const[X,K,Z]=nz(C.get(P.source)),[H,V,q]=nz(C.get(P.target));if(!Z||!q)return null;let ne=P.type||"default";a[ne]||(N==null||N("011",th.error011(ne)),ne="default");const L=a[ne]||a.default,W=w===Vp.Strict?V.target:(V.target??[]).concat(V.source??[]),J=rz(K.source,P.sourceHandle),te=rz(W,P.targetHandle),ie=(J==null?void 0:J.position)||br.Bottom,Ae=(te==null?void 0:te.position)||br.Top,oe=!!(P.focusable||_&&typeof P.focusable>"u"),ce=P.reconnectable||P.updatable,ge=typeof h<"u"&&(ce||S&&typeof ce>"u");if(!J||!te)return N==null||N("008",th.error008(J,P)),null;const{sourceX:je,sourceY:re,targetX:Se,targetY:De}=R9e(X,J,ie,H,te,Ae);return lt.createElement(L,{key:P.id,id:P.id,className:yl([P.className,s]),type:ne,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:je,sourceY:re,targetX:Se,targetY:De,sourcePosition:ie,targetPosition:Ae,elementsSelectable:k,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:v,rfId:n,ariaLabel:P.ariaLabel,isFocusable:oe,isReconnectable:ge,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:y})})))),b):null};Zne.displayName="EdgeRenderer";var q9e=I.memo(Zne);const W9e=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function X9e({children:e}){const t=ls(W9e);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Y9e(e){const t=zN(),r=I.useRef(!1);I.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const J9e={[br.Left]:br.Right,[br.Right]:br.Left,[br.Top]:br.Bottom,[br.Bottom]:br.Top},eae=({nodeId:e,handleType:t,style:r,type:n=x0.Bezier,CustomComponent:a,connectionStatus:s})=>{var F,w,C;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=ls(I.useCallback(N=>({fromNode:N.nodeInternals.get(e),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[e]),el),f=(F=i==null?void 0:i[Ss])==null?void 0:F.handleBounds;let h=f==null?void 0:f[t];if(d===Vp.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const p=o?h.find(N=>N.id===o):h[0],g=p?p.x+p.width/2:(i.width??0)/2,v=p?p.y+p.height/2:i.height??0,b=(((w=i.positionAbsolute)==null?void 0:w.x)??0)+g,y=(((C=i.positionAbsolute)==null?void 0:C.y)??0)+v,_=p==null?void 0:p.position,S=_?J9e[_]:null;if(!_||!S)return null;if(a)return lt.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:b,fromY:y,toX:l,toY:u,fromPosition:_,toPosition:S,connectionStatus:s});let k="";const B={sourceX:b,sourceY:y,sourcePosition:_,targetX:l,targetY:u,targetPosition:S};return n===x0.Bezier?[k]=Ene(B):n===x0.Step?[k]=CF({...B,borderRadius:0}):n===x0.SmoothStep?[k]=CF(B):n===x0.SimpleBezier?[k]=wne(B):k=`M${b},${y} ${l},${u}`,lt.createElement("path",{d:k,fill:"none",className:"react-flow__connection-path",style:r})};eae.displayName="ConnectionLine";const Z9e=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function eQe({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:l,connectionStatus:u}=ls(Z9e,el);return!(a&&s&&o&&i)?null:lt.createElement("svg",{style:e,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:yl(["react-flow__connection",u])},lt.createElement(eae,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function sz(e,t){return I.useRef(null),Yi(),I.useMemo(()=>t(e),[e])}const tae=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:_,connectionLineComponent:S,connectionLineContainerStyle:k,selectionKeyCode:B,selectionOnDrag:F,selectionMode:w,multiSelectionKeyCode:C,panActivationKeyCode:N,zoomActivationKeyCode:R,deleteKeyCode:O,onlyRenderVisibleElements:j,elementsSelectable:U,selectNodesOnDrag:P,defaultViewport:X,translateExtent:K,minZoom:Z,maxZoom:H,preventScrolling:V,defaultMarkerColor:q,zoomOnScroll:ne,zoomOnPinch:L,panOnScroll:W,panOnScrollSpeed:J,panOnScrollMode:te,zoomOnDoubleClick:ie,panOnDrag:Ae,onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:ge,onPaneMouseLeave:je,onPaneScroll:re,onPaneContextMenu:Se,onEdgeContextMenu:De,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:Ie,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Oe,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:Ze,elevateEdgesOnSelect:ot,disableKeyboardA11y:mt,nodeOrigin:Bt,nodeExtent:Lt,rfId:Ot})=>{const Qt=sz(e,k9e),bt=sz(t,D9e);return Y9e(s),lt.createElement(S9e,{onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:ge,onPaneMouseLeave:je,onPaneContextMenu:Se,onPaneScroll:re,deleteKeyCode:O,selectionKeyCode:B,selectionOnDrag:F,selectionMode:w,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:C,panActivationKeyCode:N,zoomActivationKeyCode:R,elementsSelectable:U,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:ne,zoomOnPinch:L,zoomOnDoubleClick:ie,panOnScroll:W,panOnScrollSpeed:J,panOnScrollMode:te,panOnDrag:Ae,defaultViewport:X,translateExtent:K,minZoom:Z,maxZoom:H,onSelectionContextMenu:g,preventScrolling:V,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:Ze,disableKeyboardA11y:mt},lt.createElement(X9e,null,lt.createElement(q9e,{edgeTypes:bt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:j,onEdgeContextMenu:De,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:Ie,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Oe,defaultMarkerColor:q,noPanClassName:Ze,elevateEdgesOnSelect:!!ot,disableKeyboardA11y:mt,rfId:Ot},lt.createElement(eQe,{style:_,type:y,component:S,containerStyle:k})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(I9e,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:P,onlyRenderVisibleElements:j,noPanClassName:Ze,noDragClassName:Pe,disableKeyboardA11y:mt,nodeOrigin:Bt,nodeExtent:Lt,rfId:Ot})))};tae.displayName="GraphView";var tQe=I.memo(tae);const BF=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],a0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:BF,nodeExtent:BF,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Vp.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:B7e,isValidConnection:void 0},rQe=()=>PLe((e,t)=>({...a0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:BT(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?BT(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=t(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=r.reduce((v,b)=>{const y=a.get(b.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:void 0}});else if(y){const _=gR(b.nodeElement);!!(_.width&&_.height&&(y.width!==_.width||y.height!==_.height||b.forceUpdate))&&(a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:{source:JV(".source",b.nodeElement,h,u),target:JV(".target",b.nodeElement,h,u)}},..._}),v.push({id:y.id,type:"dimensions",dimensions:_}))}return v},[]);Qne(a,u);const g=i||s&&!i&&Hne(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:a};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=t();if(r!=null&&r.length){if(s){const u=zne(r,o()),d=BT(u,a,i,l);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(l=>A0(l,!0)):(i=Cv(s(),r),o=Cv(a,[])),fC({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(l=>A0(l,!0)):(i=Cv(a,r),o=Cv(s(),[])),fC({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,l=i.map(d=>(d.selected=!1,A0(d.id,!1))),u=o.map(d=>A0(d.id,!1));fC({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>A0(o.id,!1)),i=r.filter(o=>o.selected).map(o=>A0(o.id,!1));fC({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=vR(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:l}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=P0.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:a0.connectionNodeId,connectionHandleId:a0.connectionHandleId,connectionHandleType:a0.connectionHandleType,connectionStatus:a0.connectionStatus,connectionStartHandle:a0.connectionStartHandle,connectionEndHandle:a0.connectionEndHandle}),reset:()=>e({...a0})}),Object.is),kR=({children:e})=>{const t=I.useRef(null);return t.current||(t.current=rQe()),lt.createElement(y7e,{value:t.current},e)};kR.displayName="ReactFlowProvider";const rae=({children:e})=>I.useContext(HN)?lt.createElement(lt.Fragment,null,e):lt.createElement(kR,null,e);rae.displayName="ReactFlowWrapper";const nQe={input:One,default:NF,output:Rne,group:SR},aQe={default:OS,straight:wR,step:yR,smoothstep:VN,simplebezier:bR},sQe=[0,0],iQe=[15,15],oQe={x:0,y:0,zoom:1},lQe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},nae=I.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=nQe,edgeTypes:i=aQe,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:g,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:k,onNodeContextMenu:B,onNodeDoubleClick:F,onNodeDragStart:w,onNodeDrag:C,onNodeDragStop:N,onNodesDelete:R,onEdgesDelete:O,onSelectionChange:j,onSelectionDragStart:U,onSelectionDrag:P,onSelectionDragStop:X,onSelectionContextMenu:K,onSelectionStart:Z,onSelectionEnd:H,connectionMode:V=Vp.Strict,connectionLineType:q=x0.Bezier,connectionLineStyle:ne,connectionLineComponent:L,connectionLineContainerStyle:W,deleteKeyCode:J="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ie=!1,selectionMode:Ae=tw.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ce=jS()?"Meta":"Control",zoomActivationKeyCode:ge=jS()?"Meta":"Control",snapToGrid:je=!1,snapGrid:re=iQe,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:De=!0,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:Ie,nodeOrigin:He=sQe,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Oe,defaultViewport:Pe=oQe,minZoom:qe=.5,maxZoom:Ze=2,translateExtent:ot=BF,preventScrolling:mt=!0,nodeExtent:Bt,defaultMarkerColor:Lt="#b1b1b7",zoomOnScroll:Ot=!0,zoomOnPinch:Qt=!0,panOnScroll:bt=!1,panOnScrollSpeed:Nr=.5,panOnScrollMode:tr=sp.Free,zoomOnDoubleClick:nn=!0,panOnDrag:Cr=!0,onPaneClick:Vr,onPaneMouseEnter:In,onPaneMouseMove:jr,onPaneMouseLeave:vt,onPaneScroll:pt,onPaneContextMenu:Je,children:gt,onEdgeContextMenu:dt,onEdgeDoubleClick:Dt,onEdgeMouseEnter:zt,onEdgeMouseMove:Pr,onEdgeMouseLeave:Xr,onEdgeUpdate:pn,onEdgeUpdateStart:gn,onEdgeUpdateEnd:$t,onReconnect:tn,onReconnectStart:en,onReconnectEnd:cr,reconnectRadius:Yr=10,edgeUpdaterRadius:ta=10,onNodesChange:fe,onEdgesChange:Be,noDragClassName:Ee="nodrag",noWheelClassName:Ce="nowheel",noPanClassName:Ne="nopan",fitView:Te=!1,fitViewOptions:Ye,connectOnClick:ut=!0,attributionPosition:$e,proOptions:tt,defaultEdgeOptions:at,elevateNodesOnSelect:Tt=!0,elevateEdgesOnSelect:Vt=!1,disableKeyboardA11y:Yt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:Kt=!0,connectionRadius:_r=20,isValidConnection:an,onError:sn,style:dn,id:ds,nodeDragThreshold:bo,...As},ei)=>{const js=ds||"1";return lt.createElement("div",{...As,style:{...dn,...lQe},ref:ei,className:yl(["react-flow",a]),"data-testid":"rf__wrapper",id:ds},lt.createElement(rae,null,lt.createElement(tQe,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:k,onNodeContextMenu:B,onNodeDoubleClick:F,nodeTypes:s,edgeTypes:i,connectionLineType:q,connectionLineStyle:ne,connectionLineComponent:L,connectionLineContainerStyle:W,selectionKeyCode:te,selectionOnDrag:ie,selectionMode:Ae,deleteKeyCode:J,multiSelectionKeyCode:ce,panActivationKeyCode:oe,zoomActivationKeyCode:ge,onlyRenderVisibleElements:Se,selectNodesOnDrag:De,defaultViewport:Pe,translateExtent:ot,minZoom:qe,maxZoom:Ze,preventScrolling:mt,zoomOnScroll:Ot,zoomOnPinch:Qt,zoomOnDoubleClick:nn,panOnScroll:bt,panOnScrollSpeed:Nr,panOnScrollMode:tr,panOnDrag:Cr,onPaneClick:Vr,onPaneMouseEnter:In,onPaneMouseMove:jr,onPaneMouseLeave:vt,onPaneScroll:pt,onPaneContextMenu:Je,onSelectionContextMenu:K,onSelectionStart:Z,onSelectionEnd:H,onEdgeContextMenu:dt,onEdgeDoubleClick:Dt,onEdgeMouseEnter:zt,onEdgeMouseMove:Pr,onEdgeMouseLeave:Xr,onReconnect:tn??pn,onReconnectStart:en??gn,onReconnectEnd:cr??$t,reconnectRadius:Yr??ta,defaultMarkerColor:Lt,noDragClassName:Ee,noWheelClassName:Ce,noPanClassName:Ne,elevateEdgesOnSelect:Vt,rfId:js,disableKeyboardA11y:Yt,nodeOrigin:He,nodeExtent:Bt}),lt.createElement(J7e,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:g,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:Ie,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Oe,elevateNodesOnSelect:Tt,minZoom:qe,maxZoom:Ze,nodeExtent:Bt,onNodesChange:fe,onEdgesChange:Be,snapToGrid:je,snapGrid:re,connectionMode:V,translateExtent:ot,connectOnClick:ut,defaultEdgeOptions:at,fitView:Te,fitViewOptions:Ye,onNodesDelete:R,onEdgesDelete:O,onNodeDragStart:w,onNodeDrag:C,onNodeDragStop:N,onSelectionDrag:P,onSelectionDragStart:U,onSelectionDragStop:X,noPanClassName:Ne,nodeOrigin:He,rfId:js,autoPanOnConnect:Ht,autoPanOnNodeDrag:Kt,onError:sn,connectionRadius:_r,isValidConnection:an,nodeDragThreshold:bo}),lt.createElement(X7e,{onSelectionChange:j}),gt,lt.createElement(E7e,{proOptions:tt,position:$e}),lt.createElement(n9e,{rfId:js,disableKeyboardA11y:Yt})))});nae.displayName="ReactFlow";function aae(e){return t=>{const[r,n]=I.useState(t),a=I.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const cQe=aae(zne),uQe=aae(g9e);function dQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function AQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function fQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function hQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function mQe(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Hb=({children:e,className:t,...r})=>lt.createElement("button",{type:"button",className:yl(["react-flow__controls-button",t]),...r},e);Hb.displayName="ControlButton";const pQe=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),sae=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:f="bottom-left"})=>{const h=Yi(),[p,g]=I.useState(!1),{isInteractive:v,minZoomReached:b,maxZoomReached:y}=ls(pQe,el),{zoomIn:_,zoomOut:S,fitView:k}=zN();if(I.useEffect(()=>{g(!0)},[]),!p)return null;const B=()=>{_(),s==null||s()},F=()=>{S(),i==null||i()},w=()=>{k(a),o==null||o()},C=()=>{h.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),l==null||l(!v)};return lt.createElement(mne,{className:yl(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(Hb,{onClick:B,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},lt.createElement(dQe,null)),lt.createElement(Hb,{onClick:F,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},lt.createElement(AQe,null))),r&&lt.createElement(Hb,{className:"react-flow__controls-fitview",onClick:w,title:"fit view","aria-label":"fit view"},lt.createElement(fQe,null)),n&&lt.createElement(Hb,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity"},v?lt.createElement(mQe,null):lt.createElement(hQe,null)),d)};sae.displayName="Controls";var gQe=I.memo(sae),wd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(wd||(wd={}));function vQe({color:e,dimensions:t,lineWidth:r}){return lt.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function xQe({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const bQe={[wd.Dots]:"#91919a",[wd.Lines]:"#eee",[wd.Cross]:"#e2e2e2"},yQe={[wd.Dots]:1,[wd.Lines]:1,[wd.Cross]:6},wQe=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function iae({id:e,variant:t=wd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:l}){const u=I.useRef(null),{transform:d,patternId:f}=ls(wQe,el),h=i||bQe[t],p=n||yQe[t],g=t===wd.Dots,v=t===wd.Cross,b=Array.isArray(r)?r:[r,r],y=[b[0]*d[2]||1,b[1]*d[2]||1],_=p*d[2],S=v?[_,_]:y,k=g?[_/s,_/s]:[S[0]/s,S[1]/s];return lt.createElement("svg",{className:yl(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},lt.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`},g?lt.createElement(xQe,{color:h,radius:_/s}):lt.createElement(vQe,{dimensions:S,color:h,lineWidth:a})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}iae.displayName="Background";var EQe=I.memo(iae);function CQe(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const _Qe=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function M0(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let rv=null;function oae(e={}){return rv||(e.includeStyleProperties?(rv=e.includeStyleProperties,rv):(rv=M0(window.getComputedStyle(document.documentElement)),rv))}function DS(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function SQe(e){const t=DS(e,"border-left-width"),r=DS(e,"border-right-width");return e.clientWidth+t+r}function NQe(e){const t=DS(e,"border-top-width"),r=DS(e,"border-bottom-width");return e.clientHeight+t+r}function lae(e,t={}){const r=t.width||SQe(e),n=t.height||NQe(e);return{width:r,height:n}}function kQe(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const gc=16384;function BQe(e){(e.width>gc||e.height>gc)&&(e.width>gc&&e.height>gc?e.width>e.height?(e.height*=gc/e.width,e.width=gc):(e.width*=gc/e.height,e.height=gc):e.width>gc?(e.height*=gc/e.width,e.width=gc):(e.width*=gc/e.height,e.height=gc))}function RS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function TQe(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function IQe(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),TQe(a)}const Wl=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Wl(r,t)};function jQe(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function FQe(e,t){return oae(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function OQe(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?jQe(r):FQe(r,n);return document.createTextNode(`${a}{${s}}`)}function iz(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=_Qe();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(OQe(i,r,a,n)),t.appendChild(o)}function DQe(e,t,r){iz(e,t,":before",r),iz(e,t,":after",r)}const oz="application/font-woff",lz="image/jpeg",RQe={woff:oz,woff2:oz,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:lz,jpeg:lz,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function PQe(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function BR(e){const t=PQe(e).toLowerCase();return RQe[t]||""}function LQe(e){return e.split(/,/)[1]}function TF(e){return e.search(/^(data:)/)!==-1}function MQe(e,t){return`data:${t};base64,${e}`}async function cae(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(a)})}const FT={};function UQe(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function TR(e,t,r){const n=UQe(e,t,r.includeQueryParams);if(FT[n]!=null)return FT[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await cae(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),LQe(o)));a=MQe(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return FT[n]=a,a}async function QQe(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):RS(t)}async function HQe(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return RS(o)}const r=e.poster,n=BR(r),a=await TR(r,n,t);return RS(a)}async function VQe(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await $N(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function zQe(e,t){return Wl(e,HTMLCanvasElement)?QQe(e):Wl(e,HTMLVideoElement)?HQe(e,t):Wl(e,HTMLIFrameElement)?VQe(e,t):e.cloneNode(uae(e))}const $Qe=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",uae=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function KQe(e,t,r){var n,a;if(uae(t))return t;let s=[];return $Qe(e)&&e.assignedNodes?s=M0(e.assignedNodes()):Wl(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=M0(e.contentDocument.body.childNodes):s=M0(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||Wl(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>$N(o,r)).then(l=>{l&&t.appendChild(l)}),Promise.resolve()),t}function GQe(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):oae(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Wl(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function qQe(e,t){Wl(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Wl(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function WQe(e,t){if(Wl(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function XQe(e,t,r){return Wl(t,Element)&&(GQe(e,t,r),DQe(e,t,r),qQe(e,t),WQe(e,t)),t}async function YQe(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const l=e.querySelector(o),u=document.querySelector(o);!l&&u&&!n[o]&&(n[o]=await $N(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let l=0;l<a.length;l++)o.appendChild(a[l]);e.appendChild(i)}return e}async function $N(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>zQe(n,t)).then(n=>KQe(e,n,t)).then(n=>XQe(e,n,t)).then(n=>YQe(n,t))}const dae=/url\((['"]?)([^'"]+?)\1\)/g,JQe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ZQe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function eHe(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function tHe(e){const t=[];return e.replace(dae,(r,n,a)=>(t.push(a),r)),t.filter(r=>!TF(r))}async function rHe(e,t,r,n,a){try{const s=r?CQe(t,r):t,i=BR(t);let o;return a||(o=await TR(s,i,n)),e.replace(eHe(t),`$1${o}$3`)}catch{}return e}function nHe(e,{preferredFontFormat:t}){return t?e.replace(ZQe,r=>{for(;;){const[n,,a]=JQe.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Aae(e){return e.search(dae)!==-1}async function fae(e,t,r){if(!Aae(e))return e;const n=nHe(e,r);return tHe(n).reduce((s,i)=>s.then(o=>rHe(o,i,t,r)),Promise.resolve(n))}async function nv(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await fae(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function aHe(e,t){await nv("background",e,t)||await nv("background-image",e,t),await nv("mask",e,t)||await nv("-webkit-mask",e,t)||await nv("mask-image",e,t)||await nv("-webkit-mask-image",e,t)}async function sHe(e,t){const r=Wl(e,HTMLImageElement);if(!(r&&!TF(e.src))&&!(Wl(e,SVGImageElement)&&!TF(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await TR(n,BR(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...l)=>{try{s(t.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function iHe(e,t){const n=M0(e.childNodes).map(a=>hae(a,t));await Promise.all(n).then(()=>e)}async function hae(e,t){Wl(e,Element)&&(await aHe(e,t),await sHe(e,t),await iHe(e,t))}function oHe(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const cz={};async function uz(e){let t=cz[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},cz[e]=t,t}async function dz(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),cae(o,t.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(s).then(()=>r)}function Az(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(n);if(l===null)break;t.push(l[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=s.exec(n);if(l===null){if(l=o.exec(n),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(l[0])}return t}async function lHe(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{M0(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const l=s.href,u=uz(l).then(d=>dz(d,t)).then(d=>Az(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(uz(a.href).then(o=>dz(o,t)).then(o=>Az(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{M0(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function cHe(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Aae(t.style.getPropertyValue("src")))}async function uHe(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=M0(e.ownerDocument.styleSheets),n=await lHe(r,t);return cHe(n)}function mae(e){return e.trim().replace(/["']/g,"")}function dHe(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(mae(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function AHe(e,t){const r=await uHe(e,t),n=dHe(e);return(await Promise.all(r.filter(s=>n.has(mae(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return fae(s.cssText,i,t)}))).join(`
`)}async function fHe(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await AHe(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function hHe(e,t={}){const{width:r,height:n}=lae(e,t),a=await $N(e,t,!0);return await fHe(a,t),await hae(a,t),oHe(a,t),await IQe(a,r,n)}async function mHe(e,t={}){const{width:r,height:n}=lae(e,t),a=await hHe(e,t),s=await RS(a),i=document.createElement("canvas"),o=i.getContext("2d"),l=t.pixelRatio||kQe(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*l,i.height=d*l,t.skipAutoScale||BQe(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function KN(e,t={}){return(await mHe(e,t)).toDataURL()}const pae="recursos_crucigramas",GN="recursos_lineas_de_tiempo",qN="recursos_mapas_mentales",gae="recursos_sopas_de_letras",WN=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},pHe=e=>{const t=nr(Ut(Ft,pae),Kr("fechaCreacion","desc"));return wr(t,r=>{const n=r.docs.map(a=>WN(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},gHe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:yr.fromDate(new Date)};return(await ea(Ut(Ft,pae),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},vHe=e=>{const t=nr(Ut(Ft,GN),Kr("createdAt","desc"));return wr(t,r=>{const n=r.docs.map(a=>WN(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},xHe=async(e,t)=>{try{const{id:r,...n}=e,a=pr(Ft,GN,r);await xo(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:yr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},bHe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:yr.fromDate(new Date)};return(await ea(Ut(Ft,GN),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},yHe=async e=>{try{const t=pr(Ft,GN,e);await Ys(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},wHe=e=>{const t=nr(Ut(Ft,qN),Kr("createdAt","desc"));return wr(t,r=>{const n=r.docs.map(a=>WN(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},EHe=async(e,t)=>{try{const{id:r,...n}=e,a=pr(Ft,qN,r);await xo(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:yr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},CHe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:yr.fromDate(new Date)};return(await ea(Ut(Ft,qN),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},_He=async e=>{try{const t=pr(Ft,qN,e);await Ys(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},SHe=e=>{const t=nr(Ut(Ft,gae),Kr("createdAt","desc"));return wr(t,r=>{const n=r.docs.map(a=>WN(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},NHe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:yr.fromDate(new Date)};return(await ea(Ut(Ft,gae),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},kHe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),BHe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),THe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),IHe=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return c.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[c.jsx(xx,{type:"target",position:br.Left,className:"w-2 h-2 !bg-slate-400"}),c.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),c.jsx(xx,{type:"source",position:br.Right,className:"w-2 h-2 !bg-slate-400"})]})},IF=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+IF(n,t),0),jF=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,l,u)=>{r.push({id:o.id,position:{x:l*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=IF(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(h=>{const p=IF(h,100),g=f+p/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),i(h,l+1,g),f+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((l,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),n.push({id:`e-${e.id}-${l.id}`,source:e.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((f,h)=>{const p=d+(h-(l.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${l.id}-${f.id}`,source:l.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},vae=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&c.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(o=>c.jsx(vae,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},jHe={custom:IHe},FHe=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=I.useState(e.treeData),[s,i]=I.useState("tree"),[o,l]=I.useState(!1),[u,d,f]=cQe([]),[h,p,g]=uQe([]),{fitView:v}=zN();I.useEffect(()=>{const{nodes:B,edges:F}=jF(n,s);d(B),p(F),setTimeout(()=>v({duration:300}),50)},[n,s,d,p,v]);const b=(B,F)=>{const w=JSON.parse(JSON.stringify(n)),C=N=>N.id===B?(N.label=F,!0):(N.children||[]).some(C);C(w),a(w)},y=B=>{const F=JSON.parse(JSON.stringify(n)),w=C=>C.id===B?(C.children||(C.children=[]),C.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(C.children||[]).some(w);w(F),a(F)},_=B=>{const F=JSON.parse(JSON.stringify(n)),w=C=>{const N=(C.children||[]).findIndex(R=>R.id===B);return N!==-1?(C.children.splice(N,1),!0):(C.children||[]).some(w)};w(F),a(F)},S=()=>{l(!0);const{nodes:B,edges:F}=jF(n,s);r({...e,treeData:n,nodes:B,edges:F}),setTimeout(()=>l(!1),1e3)},k=async B=>{const F=document.querySelector(".react-flow");F&&KN(F,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(w=>{{const C=document.createElement("a");C.download=`${e.tema}.png`,C.href=w,C.click()}}).catch(w=>console.error("oops, something went wrong!",w))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),c.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:c.jsxs(nae,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:jHe,children:[c.jsx(gQe,{}),c.jsx(EQe,{})]})}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(BHe,{})," Vista en árbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(THe,{})," Vista central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(vae,{node:n,onUpdate:b,onAddChild:y,onDelete:_})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>k(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},OHe=({onBack:e,currentUser:t})=>{const[r,n]=I.useState("list"),[a,s]=I.useState([]),[i,o]=I.useState(null),[l,u]=I.useState(!1),[d,f]=I.useState(!0),[h,p]=I.useState(""),[g,v]=I.useState(""),[b,y]=I.useState("");I.useEffect(()=>{f(!0);const w=wHe(C=>{s(C),f(!1)});return()=>w()},[]);const _=async w=>{if(w.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${b}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const X=(await(await new os(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(X),Z=W=>({id:crypto.randomUUID(),label:W.label||"Sin etiqueta",icon:W.icon||"🧠",type:W.type||"default",children:(W.children||[]).map(Z)}),H=Z(K),{nodes:V,edges:q}=jF(H),ne={tema:h,nivel:g,treeData:H,nodes:V,edges:q},L=await CHe(ne,t);o({...ne,id:L,createdAt:new Date().toISOString()}),n("editor")}catch(R){console.error("AI Generation Error:",R),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},S=async w=>{try{await EHe(w,t)}catch(C){console.error("Error saving mind map:",C),alert("No se pudo guardar el mapa mental.")}},k=w=>{o(w),n("editor")},B=async w=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await _He(w)}catch(C){console.error("Error deleting mind map:",C),alert("No se pudo eliminar el mapa mental.")}},F=()=>{switch(r){case"editor":return i?c.jsx(kR,{children:c.jsx(FHe,{mapData:i,onBack:()=>n("list"),onSave:S})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:h,onChange:w=>p(w.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:b,onChange:w=>y(w.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?c.jsx(kHe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(w=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:w.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(w.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>k(w),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>B(w.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},w.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?c.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:"🧠"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),F()]})},DHe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),RHe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),PHe=({onBack:e,currentUser:t})=>{const[r,n]=I.useState([]),[a,s]=I.useState("Media"),[i,o]=I.useState(10),[l,u]=I.useState(!1),[d,f]=I.useState(Array(10).fill("")),[h,p]=I.useState(""),[g,v]=I.useState(null),[b,y]=I.useState({ai:!1,puzzle:!1,data:!0}),_=I.useRef(null);I.useEffect(()=>{y(O=>({...O,data:!0}));const R=SHe(O=>{n(O),y(j=>({...j,data:!1}))});return()=>R()},[]),I.useEffect(()=>{f(R=>{const O=Array(i).fill("");for(let j=0;j<Math.min(R.length,i);j++)O[j]=R[j];return O})},[i]);const S=(R,O)=>{const j=[...d];j[R]=O,f(j)},k=async()=>{if(h.trim()){y(R=>({...R,ai:!0}));try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",j=new os(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),U=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,Z=(await(await j.generateContent(U)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(Z);if(!H.palabras||!Array.isArray(H.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const q=[...H.palabras.map(ne=>ne.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;q.length<i;)q.push("");f(q)}catch(R){console.error("Error generating words with AI:",R),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(R=>({...R,ai:!1}))}}},B=(R,O,j,U,P,X)=>{for(let K=0;K<R.length;K++){const Z=j+K*P.y,H=U+K*P.x;if(Z<0||Z>=X||H<0||H>=X||O[Z][H]&&O[Z][H]!==R[K])return!1}return!0},F=(R,O,j,U,P)=>{for(let X=0;X<R.length;X++)O[j+X*P.y][U+X*P.x]=R[X]},w=async()=>{y(Z=>({...Z,puzzle:!0})),v(null),await new Promise(Z=>setTimeout(Z,100));const R=d.map(Z=>Z.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(R.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(Z=>({...Z,puzzle:!1}));return}const O=Math.max(...R.map(Z=>Z.length));let j=Math.max(O,R.length)+2;a==="Media"&&(j+=3),a==="Difícil"&&(j+=5),j=Math.min(Math.max(j,10),25);const U=Array(j).fill(null).map(()=>Array(j).fill(null)),P=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&P.push({x:1,y:-1}),a==="Difícil"&&P.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const Z of R.sort((H,V)=>V.length-H.length)){let H=!1;for(let V=0;V<100;V++){const q=P[Math.floor(Math.random()*P.length)],ne=Math.floor(Math.random()*j),L=Math.floor(Math.random()*j);if(B(Z,U,ne,L,q,j)){F(Z,U,ne,L,q),H=!0;break}}H||console.warn(`No se pudo colocar la palabra: ${Z}`)}const X=U.map(Z=>Z.map(H=>H||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),K={tema:h||"Personalizado",grid:X.map(Z=>Z.join("")),words:R.sort()};try{const Z=await NHe(K,t);v({...K,id:Z,createdAt:new Date().toISOString()})}catch(Z){console.error("Error saving puzzle:",Z),alert("No se pudo guardar la sopa de letras.")}finally{y(Z=>({...Z,puzzle:!1}))}},C=()=>{_.current&&KN(_.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(R=>{const O=document.createElement("a");O.download="sopa-de-letras.png",O.href=R,O.click()}).catch(R=>{console.error("oops, something went wrong!",R),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},N=()=>{var j;if(!g)return null;const R=((j=g.grid[0])==null?void 0:j.length)||1,O=g.grid.join("").split("");return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:_,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${R}, minmax(0, 1fr))`},children:O.map((U,P)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:U},P))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(U=>c.jsx("li",{children:U},U))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>v(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return b.data?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🅰️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:a,onChange:R=>s(R.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fácil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difícil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(R=>c.jsx("button",{onClick:()=>{o(R),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===R?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:R},R)),c.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&c.jsx("input",{type:"number",value:i,onChange:R=>o(parseInt(R.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:R=>p(R.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:k,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?c.jsx(DHe,{}):c.jsxs(c.Fragment,{children:[c.jsx(RHe,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((R,O)=>c.jsx("input",{type:"text",value:R,onChange:j=>S(O,j.target.value),placeholder:`Palabra ${O+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},O))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:w,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&N()]})},LHe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),MHe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),UHe=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=I.useState(e),[s,i]=I.useState(null),o=I.useRef(null),l=(p,g,v)=>{a(b=>({...b,events:b.events.map(y=>y.id===p?{...y,[g]:v}:y)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,p].sort((v,b)=>parseInt(v.date)-parseInt(b.date));a(v=>({...v,events:g}))},d=p=>{a(g=>({...g,events:g.events.filter(v=>v.id!==p)}))},f=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(p.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",v=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const B=(await(await new os(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(v)).response).text().replace(/^```json\s*|```\s*$/g,""),F=JSON.parse(B);a(w=>({...w,events:w.events.map(C=>C.id===p.id?{...C,date:F.date,description:F.description,icon:F.icon}:C).sort((C,N)=>parseInt(C.date)-parseInt(N.date))}))}catch(b){console.error("Error al generar descripción del hito:",b),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{o.current&&KN(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=p,g.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),c.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:o,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:n.events.sort((p,g)=>parseInt(p.date)-parseInt(g.date)).map((p,g)=>{const v=g%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:v&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!v&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:p.date,onChange:g=>l(p.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("textarea",{value:p.description,onChange:g=>l(p.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>f(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):c.jsx(MHe,{})})]}),c.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},QHe=({onBack:e,currentUser:t})=>{const[r,n]=I.useState("list"),[a,s]=I.useState([]),[i,o]=I.useState(null),[l,u]=I.useState(!1),[d,f]=I.useState(!0),[h,p]=I.useState(""),[g,v]=I.useState(""),[b,y]=I.useState("");I.useEffect(()=>{f(!0);const B=vHe(F=>{s(F),f(!1)});return()=>B()},[]);const _=async B=>{if(B.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const F="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=g&&b?`entre ${g} y ${b}`:g?`a partir de ${g}`:b?`hasta ${b}`:"",C=`
            Genera una línea de tiempo sobre el tema "${h}" ${w}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const P=(await(await new os(F).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(C)).response).text().replace(/^```json\s*|```\s*$/g,""),X=JSON.parse(P);if(!X.events||!Array.isArray(X.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const K={tema:h,fechaInicio:g,fechaFin:b,events:X.events.map(H=>({id:crypto.randomUUID(),date:H.date||"Sin fecha",description:H.description||"Sin descripción",icon:H.icon||"🗓️"}))},Z=await bHe(K,t);o({...K,id:Z,createdAt:new Date().toISOString()}),n("editor")}catch(N){console.error("AI Generation Error:",N),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},S=async B=>{try{await xHe(B,t),n("list"),o(null)}catch(F){console.error("Error saving timeline:",F),alert("No se pudo guardar la línea de tiempo.")}},k=async B=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await yHe(B)}catch(F){console.error("Error deleting timeline:",F),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?c.jsx(UHe,{timeline:i,onSave:S,onBack:()=>n("list")}):d?c.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🕒"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:h,onChange:B=>p(B.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:B=>v(B.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:b,onChange:B=>y(B.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?c.jsx(LHe,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(B=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(B.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(B),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>k(B.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},B.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},HHe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),fz=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),VHe=({onBack:e,currentUser:t})=>{const[r,n]=I.useState([]),[a,s]=I.useState(10),[i,o]=I.useState(!1),[l,u]=I.useState(Array(10).fill("")),[d,f]=I.useState(Array(10).fill("")),[h,p]=I.useState(""),[g,v]=I.useState(null),[b,y]=I.useState(!1),[_,S]=I.useState({ai:!1,puzzle:!1,data:!0}),[k,B]=I.useState(null),F=I.useRef(null);I.useEffect(()=>{S(X=>({...X,data:!0}));const P=pHe(X=>{const K=X.map(Z=>{const{grid_flat:H,grid_width:V,...q}=Z,ne=[];if(H&&V>0)for(let L=0;L<H.length;L+=V)ne.push(H.slice(L,L+V));return{...q,grid:ne}});n(K),S(Z=>({...Z,data:!1}))});return()=>P()},[]),I.useEffect(()=>{const P=a;u(X=>Array.from({length:P},(K,Z)=>X[Z]||"")),f(X=>Array.from({length:P},(K,Z)=>X[Z]||""))},[a]);const w=(P,X)=>{const K=[...l];K[P]=X,u(K)},C=(P,X)=>{const K=[...d];K[P]=X,f(K)},N=async()=>{if(h.trim()){S(P=>({...P,ai:!0}));try{const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new os(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ne=(await(await K.generateContent(Z)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const L=ne.indexOf("{"),W=ne.lastIndexOf("}");L!==-1&&W!==-1&&(ne=ne.substring(L,W+1)),ne=ne.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ne.includes("__SPLIT__")&&(ne=ne.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(Ae,oe,ce,ge)=>{const je=ce.split("__SPLIT__").map(re=>re.trim().replace(/,$/,""));return oe+je.join(",")+ge})),ne=ne.replace(/,\s*]/g,"]");let J;try{J=JSON.parse(ne)}catch{console.error("Respuesta IA no es JSON válido:",ne),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),S(oe=>({...oe,ai:!1}));return}if(!J.items||!Array.isArray(J.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const te=J.items.map(Ae=>(Ae.word||"").toUpperCase().replace(/\s/g,"")),ie=J.items.map(Ae=>Ae.clue||"");u(Array.from({length:a},(Ae,oe)=>te[oe]||"")),f(Array.from({length:a},(Ae,oe)=>ie[oe]||""))}catch(P){console.error("Error generating words/clues with AI:",P),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{S(P=>({...P,ai:!1}))}}},R=async P=>{const X=l[P];if(!X||!X.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}B(P);try{const K="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new os(K).getGenerativeModel({model:"gemini-1.5-flash-latest"}),V=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${X}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,W=(await(await H.generateContent(V)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(W);J.clue&&C(P,J.clue)}catch(K){console.error("Error generating clue with AI:",K),alert("No se pudo generar la pista.")}finally{B(null)}},O=I.useCallback(()=>{try{const P=l.map((Ie,He)=>({word:Ie.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[He]})).filter(Ie=>Ie.word.length>0);if(P.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;P.sort((Ie,He)=>He.word.length-Ie.word.length);const X=P[0].word.length,K=Math.max(X,P.length)*2;let Z=Array.from({length:K},()=>Array(K).fill(null));const H=[],V=P.shift(),q=Math.floor(K/2),ne=Math.floor((K-V.word.length)/2);for(let Ie=0;Ie<V.word.length;Ie++)Z[q][ne+Ie]=V.word[Ie];H.push({word:V.word,clue:V.clue,direction:"across",row:q,col:ne});for(const Ie of P){let He={score:-1,row:-1,col:-1,direction:"across"};for(const Xe of H)for(let ye=0;ye<Xe.word.length;ye++)for(let Oe=0;Oe<Ie.word.length;Oe++)if(Xe.word[ye]===Ie.word[Oe]){let Pe=0,qe,Ze,ot;Xe.direction==="across"?(ot="down",qe=Xe.row-Oe,Ze=Xe.col+ye):(ot="across",qe=Xe.row+ye,Ze=Xe.col-Oe);let mt=!0;for(let Bt=0;Bt<Ie.word.length;Bt++){const Lt=qe+(ot==="down"?Bt:0),Ot=Ze+(ot==="across"?Bt:0);if(Lt<0||Lt>=K||Ot<0||Ot>=K){mt=!1;break}const Qt=Z[Lt][Ot],bt=Lt===Xe.row+(Xe.direction==="down"?ye:0)&&Ot===Xe.col+(Xe.direction==="across"?ye:0);if(Qt&&!bt){mt=!1;break}if(Qt&&bt&&Qt!==Ie.word[Oe]){mt=!1;break}if(!bt){if(ot==="across"&&(Lt>0&&Z[Lt-1][Ot]||Lt<K-1&&Z[Lt+1][Ot])){mt=!1;break}if(ot==="down"&&(Ot>0&&Z[Lt][Ot-1]||Ot<K-1&&Z[Lt][Ot+1])){mt=!1;break}}Qt&&Pe++}mt&&Pe>He.score&&(He={score:Pe,row:qe,col:Ze,direction:ot})}if(He.score>-1){for(let Xe=0;Xe<Ie.word.length;Xe++){const ye=He.row+(He.direction==="down"?Xe:0),Oe=He.col+(He.direction==="across"?Xe:0);Z[ye][Oe]=Ie.word[Xe]}H.push({word:Ie.word,clue:Ie.clue,direction:He.direction,row:He.row,col:He.col})}}let L=K,W=-1,J=K,te=-1;H.forEach(Ie=>{L=Math.min(L,Ie.row),W=Math.max(W,Ie.row+(Ie.direction==="down"?Ie.word.length-1:0)),J=Math.min(J,Ie.col),te=Math.max(te,Ie.col+(Ie.direction==="across"?Ie.word.length-1:0))}),W===-1&&(L=H[0].row,W=H[0].row,J=H[0].col,te=H[0].col+H[0].word.length-1);const ie=1,Ae=Math.max(0,L-ie),oe=Math.min(K,W+1+ie),ce=Math.max(0,J-ie),ge=Math.min(K,te+1+ie),je=Z.slice(Ae,oe).map(Ie=>Ie.slice(ce,ge)),re=H.map(Ie=>({...Ie,row:Ie.row-Ae,col:Ie.col-ce})).sort((Ie,He)=>Ie.row-He.row||Ie.col-He.col);let Se=1;const De=[],_e=new Map;re.forEach(Ie=>{const He=`${Ie.row},${Ie.col}`;_e.has(He)||_e.set(He,Se++),De.push({...Ie,number:_e.get(He)})});const he=je.map(Ie=>Ie.map(He=>({char:He,number:null})));return De.forEach(Ie=>{const He=`${Ie.row},${Ie.col}`;he[Ie.row]&&he[Ie.row][Ie.col]!==void 0&&(he[Ie.row][Ie.col].number=_e.get(He))}),{grid:he,clues:{across:De.filter(Ie=>Ie.direction==="across").sort((Ie,He)=>Ie.number-He.number),down:De.filter(Ie=>Ie.direction==="down").sort((Ie,He)=>Ie.number-He.number)}}}catch(P){return console.error("Error generating crossword grid:",P),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),j=async()=>{var X;S(K=>({...K,puzzle:!0})),v(null),await new Promise(K=>setTimeout(K,100));const P=O();if(P){const K={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:P.grid,clues:P.clues},{grid:Z,...H}=K,V={...H,grid_flat:Z.flat().map(q=>q.char||""),grid_width:((X=Z[0])==null?void 0:X.length)||0};try{const q=await gHe(V,t);v({...K,id:q,fechaCreacion:new Date().toISOString()})}catch(q){console.error("Error saving puzzle:",q),alert("No se pudo guardar el crucigrama en la base de datos.")}}S(K=>({...K,puzzle:!1}))},U=()=>{F.current&&(y(!1),setTimeout(()=>{KN(F.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(P=>{const X=document.createElement("a");X.download="crucigrama.png",X.href=P,X.click()}).catch(P=>console.error("Error generating image",P))},100))};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"✏️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:F,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((P,X)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:P.char?"white":"black"},children:[P.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:P.number}),b&&P.char&&c.jsx("span",{children:P.char})]},X))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:g.clues.across.map(P=>c.jsxs("li",{children:[c.jsxs("strong",{children:[P.number,"."]})," ",P.clue]},`${P.word}-${P.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:g.clues.down.map(P=>c.jsxs("li",{children:[c.jsxs("strong",{children:[P.number,"."]})," ",P.clue]},`${P.word}-${P.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(!b),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solución"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>v(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:U,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(P=>c.jsx("button",{onClick:()=>{s(P),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===P?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:P},P)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:a,onChange:P=>s(parseInt(P.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:P=>p(P.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:N,disabled:_.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:_.ai?c.jsx(HHe,{}):c.jsxs(c.Fragment,{children:[c.jsx(fz,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((P,X)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[X],onChange:K=>w(X,K.target.value),placeholder:`Palabra ${X+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[c.jsx("textarea",{value:d[X],onChange:K=>C(X,K.target.value),placeholder:`Pista ${X+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:()=>R(X),disabled:k===X,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:k===X?c.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):c.jsx(fz,{})})]})]},X))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:j,disabled:_.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:_.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},zHe=()=>{const[e,t]=I.useState(null),[r,n]=I.useState(!0);return I.useEffect(()=>{const a=eX(D1e,async s=>{if(s&&s.email)try{const i=await iJ(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},$He=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],KHe=({recurso:e,onClick:t})=>c.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:e.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),GHe=()=>{const[e,t]=I.useState("menu"),{currentUser:r}=zHe(),n=()=>e!=="menu"&&!r?c.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?c.jsx(OHe,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?c.jsx(PHe,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?c.jsx(QHe,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?c.jsx(VHe,{onBack:()=>t("menu"),currentUser:r}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:$He.map(a=>c.jsx(KHe,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},qHe="evaluaciones_formativas",WHe="calificaciones_formativas",xae="trabajos_grupales_formativos",bae=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},XHe=(e,t)=>{const r=nr(Ut(Ft,qHe),Ln("curso","==",e));return wr(r,n=>{t(n.docs.map(a=>bae(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},YHe=e=>{const t=nr(Ut(Ft,WHe));return wr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},JHe=(e,t)=>{const r=nr(Ut(Ft,xae),Ln("curso","==",e));return wr(r,n=>{t(n.docs.map(a=>bae(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},ZHe=async e=>{try{const{id:t,...r}=e,n=pr(Ft,xae,t);await xo(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},eVe=({currentUser:e})=>{const[t,r]=I.useState([]),[n,a]=I.useState({}),[s,i]=I.useState([]),[o,l]=I.useState(!0),[u,d]=I.useState(null),[f,h]=I.useState(!1),[p,g]=I.useState(null),v=I.useRef(null);I.useEffect(()=>{if(!e.curso){l(!1);return}l(!0);const k=XHe(e.curso,r),B=YHe(a),F=JHe(e.curso,w=>{i(w),l(!1)});return()=>{k(),B(),F()}},[e.curso]);const b=I.useMemo(()=>{if(!e.curso)return[];const B=t.filter(F=>F.curso===e.curso).reduce((F,w)=>((F[w.asignatura]=F[w.asignatura]||[]).push(w),F),{});return Object.entries(B).map(([F,w])=>{let C=0,N=0;const R=w.map(j=>{var X;const U=(X=n[j.id])==null?void 0:X[e.nombreCompleto];let P="No Trabajado";return U==="trabajado"?(C+=7,N++,P="Trabajado"):U==="no trabajado"&&(C+=2,N++,P="No Trabajado"),{id:j.id,nombreActividad:j.nombreActividad,fecha:j.fecha,estado:P}}).filter(j=>{var U;return(U=n[j.id])==null?void 0:U[e.nombreCompleto]}),O=N>0?(C/N).toFixed(1):"N/A";return{asignatura:F,promedio:O,actividades:R.sort((j,U)=>new Date(U.fecha).getTime()-new Date(j.fecha).getTime())}}).filter(F=>F.actividades.length>0).sort((F,w)=>F.asignatura.localeCompare(w.asignatura))},[t,n,e]);I.useEffect(()=>{if(b.reduce((N,R)=>N+R.actividades.length,0)===0){d(null);return}const B=b.reduce((N,R)=>{const O=parseFloat(R.promedio);return isNaN(O)?N:N+O},0),F=b.length>0?B/b.length:0,w=xE.find(N=>F>=N.promedioMin&&F<=N.promedioMax)||null,C=xE.filter(N=>F>=N.promedioMin);if(d({puntajeTotal:0,promedio:F,rangoActual:w,insigniasGanadas:C}),v.current!==null){const N=xE.find(R=>v.current>=R.promedioMin&&v.current<=R.promedioMax)||null;w&&(!N||w.nombre!==N.nombre)&&g(w)}v.current=F},[b]);const y=I.useMemo(()=>e.curso?s.filter(k=>k.curso===e.curso).map(k=>{const B=k.grupos.find(F=>F.integrantes.some(w=>w.nombre===e.nombreCompleto));return B?{...k,miGrupo:B}:null}).filter(k=>k!==null).sort((k,B)=>new Date(B.fechaPresentacion).getTime()-new Date(k.fechaPresentacion).getTime()):[],[s,e]),_=async(k,B)=>{const F=s.find(C=>C.id===k);if(!F)return;const w={...F,grupos:F.grupos.map(C=>C.integrantes.some(R=>R.nombre===e.nombreCompleto)?{...C,integrantes:C.integrantes.map(R=>R.nombre===e.nombreCompleto?{...R,rol:B||void 0}:R)}:C)};try{await ZHe(w)}catch(C){console.error("Error updating role:",C),alert("No se pudo actualizar el rol.")}},S=k=>{const B=parseFloat(k);return isNaN(B)?"bg-slate-400":B<4?"bg-red-500":B<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:k=>k.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),c.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:k=>k.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:xE.map(k=>{const B=u==null?void 0:u.insigniasGanadas.some(F=>F.nombre===k.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${B?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:k.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${B?"text-amber-700":"text-slate-600"}`,children:k.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",k.promedioMin," y ",k.promedioMax]})]})]},k.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(k=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:k.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${S(k.promedio)}`,children:k.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),k.actividades.map(B=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:B.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(B.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${B.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:B.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},B.id))]})]},k.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"📊"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:y.map(k=>{const B=k.miGrupo.integrantes.filter(w=>w.nombre!==e.nombreCompleto&&w.rol).map(w=>w.rol),F=lJ.filter(w=>!B.includes(w));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:k.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[k.asignatura," - Presentación: ",new Date(k.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",k.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:k.miGrupo.integrantes.map(w=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:w.nombre===e.nombreCompleto?"font-bold":"",children:w.nombre}),w.nombre===e.nombreCompleto?c.jsxs("select",{value:w.rol||"",onChange:C=>_(k.id,C.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),w.rol&&!F.includes(w.rol)&&c.jsx("option",{value:w.rol,children:w.rol}),F.map(C=>c.jsx("option",{value:C,children:C},C))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:w.rol||"Sin rol"})]},w.nombre))})]})]},k.id)})})]})]})},tVe="proyectos_interdisciplinarios",yae="entregas_interdisciplinarias",wae=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},rVe=(e,t)=>{const r=nr(Ut(Ft,tVe),Ln("cursos","array-contains",e));return wr(r,n=>{const a=n.docs.map(s=>wae(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},nVe=(e,t)=>{const r=nr(Ut(Ft,yae),Ln("estudianteId","==",e));return wr(r,n=>{const a=n.docs.map(s=>wae(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},aVe=async e=>{try{const{id:t,...r}=e,n=pr(Ft,yae,t),a={...r,fechaCompletado:yr.fromDate(new Date(r.fechaCompletado||Date.now()))};await xo(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},sVe=({currentUser:e})=>{const[t,r]=I.useState([]),[n,a]=I.useState([]),[s,i]=I.useState(null),[o,l]=I.useState(!0);I.useEffect(()=>{if(!e.curso||!e.id){l(!1);return}l(!0);const f=rVe(e.curso,r),h=nVe(e.id,p=>{a(p),l(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await aVe(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const p=I.useMemo(()=>{const B=n.find(F=>F.planificacionId===f.id&&F.tareaId===h.id);return B||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,v]=I.useState(!1),[b,y]=I.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),_=B=>{var w;const F=(w=B.target.files)==null?void 0:w[0];F&&(alert(`Simulación: Archivo "${F.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:F.name,url:`simulated/path/${F.name}`},fechaCompletado:new Date().toISOString()}))},S=()=>{u({...p,observacionesEstudiante:b.observaciones,enlaceUrl:b.enlace,fechaCompletado:new Date().toISOString()})},k=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:p.completada,onChange:k,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&c.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>v(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:b.observaciones,onChange:B=>y({...b,observaciones:B.target.value}),onBlur:S,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:b.enlace,onChange:B=>y({...b,enlace:B.target.value}),onBlur:S,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:_,className:"text-sm"}),p.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(b=>b.planificacionId===f.id).filter(b=>b.completada).length,v=h.length>0?g/h.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(v),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${v}%`}})})]})]}),s===f.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(b=>c.jsx(d,{plan:f,tarea:b},b.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:"🎉"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},iVe=({data:e})=>c.jsx("div",{className:"space-y-4",children:e.map((r,n)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),oVe=({currentUser:e})=>{const[t,r]=I.useState([]),[n,a]=I.useState(!1),[s,i]=I.useState(null),[o,l]=I.useState(null),[u,d]=I.useState(Yb),f=I.useCallback(async()=>{a(!0);try{const b=(await _Fe(e.nombreCompleto)).sort((y,_)=>new Date(_.fecha).getTime()-new Date(y.fecha).getTime());r(b),i(null)}catch(v){console.error("Error al cargar acompañamientos desde Firestore",v),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=I.useCallback(async()=>{try{const v=await SFe();v&&d(v)}catch(v){console.error("Error al cargar rúbrica personalizada",v)}},[]);I.useEffect(()=>{f(),h()},[f,h]);const p=I.useMemo(()=>{if(!o)return[];const v={};return u.forEach(b=>{v[b.domain]={total:0,count:0},b.criteria.forEach(y=>{const _=o.rubricaResultados[y.name];_&&(v[b.domain].total+=_,v[b.domain].count++)})}),Object.entries(v).map(([b,y])=>({label:b,value:y.count>0?y.total/y.count:0}))},[o,u]),g=v=>{const b=new mr;b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),b.setFont("helvetica","bold"),b.setFontSize(16),b.setTextColor(40),b.text("Informe de Acompañamiento Docente",b.internal.pageSize.getWidth()/2,25,{align:"center"}),b.setFontSize(12),b.setFont("helvetica","normal"),gl(b,{startY:35,body:[["Docente:",v.docente],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Asignatura:",v.asignatura],["Curso:",v.curso],["Bloques:",v.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=b.lastAutoTable.finalY+15;if(Object.keys(v.rubricaResultados).length>0){const k=[],B=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(F=>{k.push([{content:F.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),F.criteria.forEach(w=>{const C=v.rubricaResultados[w.name],N=C?B[C-1]:"No evaluado";k.push([w.name,N])})}),gl(b,{startY:y,head:[["Indicador","Nivel de Logro"]],body:k,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=b.lastAutoTable.finalY+15}const _=(k,B)=>{if(!B)return;y>250&&(b.addPage(),y=20,b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(40),b.text(k,14,y),y+=8,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(60);const F=b.splitTextToSize(B.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);b.text(F,14,y),y+=F.length*5+10};_("Observaciones Generales",v.observacionesGenerales),_("Retroalimentación Consolidada",v.retroalimentacionConsolidada);const S=b.getNumberOfPages();for(let k=1;k<=S;k++)b.setPage(k),b.setFontSize(8),b.setTextColor(128),b.text(`Página ${k} de ${S}`,b.internal.pageSize.getWidth()/2,b.internal.pageSize.getHeight()-10,{align:"center"});b.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(v.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>g(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(oJ,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(iVe,{data:p})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(v=>c.jsx("button",{onClick:()=>l(v),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[v.curso," - ",v.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(v.fecha).toLocaleDateString("es-CL"),v.bloques&&` | Bloques: ${v.bloques}`]}),Object.keys(v.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(v.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},v.id)):!n&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"👍"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},lVe=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=Ut(Rr,"planificaciones"),r=nr(t,Kr("fechaCreacion","desc"));return wr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},cVe=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Ut(Rr,"planificaciones"),n=nr(r,Ln("userId","==",e),Kr("fechaCreacion","desc"));return wr(n,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function U0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uVe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function IR(e){let t,r,n;e.length!==2?(t=U0,r=(o,l)=>U0(e(o),l),n=(o,l)=>e(o)-l):(t=e===U0||e===uVe?e:dVe,r=e,n=e);function a(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,l,u=0,d=o.length){const f=a(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:a,center:i,right:s}}function dVe(){return 0}function Eae(e){return e===null?NaN:+e}function*AVe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const fVe=IR(U0),Gw=fVe.right;IR(Eae).center;class hz extends Map{constructor(t,r=pVe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(mz(this,t))}has(t){return super.has(mz(this,t))}set(t,r){return super.set(hVe(this,t),r)}delete(t){return super.delete(mVe(this,t))}}function mz({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function hVe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function mVe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function pVe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gVe(e=U0){if(e===U0)return Cae;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Cae(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const vVe=Math.sqrt(50),xVe=Math.sqrt(10),bVe=Math.sqrt(2);function PS(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=vVe?10:s>=xVe?5:s>=bVe?2:1;let o,l,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?PS(e,t,r*2):[o,l,u]}function FF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?PS(t,e,r):PS(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)l[u]=(s-u)/-i;else for(let u=0;u<o;++u)l[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)l[u]=(a+u)/-i;else for(let u=0;u<o;++u)l[u]=(a+u)*i;return l}function OF(e,t,r){return t=+t,e=+e,r=+r,PS(e,t,r)[2]}function DF(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?OF(t,e,r):OF(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function pz(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function gz(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function _ae(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Cae:gVe(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/l+h)),g=Math.min(n,Math.floor(t+(l-u)*f/l+h));_ae(e,t,p,g,a)}const s=e[t];let i=r,o=n;for(ub(e,r,t),a(e[n],s)>0&&ub(e,r,n);i<o;){for(ub(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?ub(e,r,o):(++o,ub(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function ub(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function yVe(e,t,r){if(e=Float64Array.from(AVe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return gz(e);if(t>=1)return pz(e);var n,a=(n-1)*t,s=Math.floor(a),i=pz(_ae(e,s).subarray(0,s+1)),o=gz(e.subarray(s+1));return i+(o-i)*(a-s)}}function wVe(e,t,r=Eae){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function EVe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}const RF=Math.PI,PF=2*RF,Gm=1e-6,CVe=PF-Gm;function Sae(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function _Ve(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Sae;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class SVe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Sae:_Ve(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,l=n-t,u=a-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Gm)if(!(Math.abs(f*l-u*d)>Gm)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,g=a-o,v=l*l+u*u,b=p*p+g*g,y=Math.sqrt(v),_=Math.sqrt(h),S=s*Math.tan((RF-Math.acos((v+h-b)/(2*y*_)))/2),k=S/_,B=S/y;Math.abs(k-1)>Gm&&this._append`L${t+k*d},${r+k*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=t+B*l},${this._y1=r+B*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),l=n*Math.sin(a),u=t+o,d=r+l,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Gm||Math.abs(this._y1-d)>Gm)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%PF+PF),h>CVe?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Gm&&this._append`A${n},${n},0,${+(h>=RF)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function NVe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function LS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function bx(e){return e=LS(Math.abs(e)),e?e[1]:NaN}function kVe(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(r.substring(a-=o,a+o)),!((l+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function BVe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var TVe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nw(e){if(!(t=TVe.exec(e)))throw new Error("invalid format: "+e);var t;return new jR({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nw.prototype=jR.prototype;function jR(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}jR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function IVe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Nae;function jVe(e,t){var r=LS(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(Nae=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+LS(e,Math.max(0,t+s-1))[0]}function vz(e,t){var r=LS(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const xz={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:NVe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vz(e*100,t),r:vz,s:jVe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bz(e){return e}var yz=Array.prototype.map,wz=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function FVe(e){var t=e.grouping===void 0||e.thousands===void 0?bz:kVe(yz.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?bz:BVe(yz.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=nw(f);var h=f.fill,p=f.align,g=f.sign,v=f.symbol,b=f.zero,y=f.width,_=f.comma,S=f.precision,k=f.trim,B=f.type;B==="n"?(_=!0,B="g"):xz[B]||(S===void 0&&(S=12),k=!0,B="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var F=v==="$"?r:v==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",w=v==="$"?n:/[%p]/.test(B)?i:"",C=xz[B],N=/[defgprs%]/.test(B);S=S===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function R(O){var j=F,U=w,P,X,K;if(B==="c")U=C(O)+U,O="";else{O=+O;var Z=O<0||1/O<0;if(O=isNaN(O)?l:C(Math.abs(O),S),k&&(O=IVe(O)),Z&&+O==0&&g!=="+"&&(Z=!1),j=(Z?g==="("?g:o:g==="-"||g==="("?"":g)+j,U=(B==="s"?wz[8+Nae/3]:"")+U+(Z&&g==="("?")":""),N){for(P=-1,X=O.length;++P<X;)if(K=O.charCodeAt(P),48>K||K>57){U=(K===46?a+O.slice(P+1):O.slice(P))+U,O=O.slice(0,P);break}}}_&&!b&&(O=t(O,1/0));var H=j.length+O.length+U.length,V=H<y?new Array(y-H+1).join(h):"";switch(_&&b&&(O=t(V+O,V.length?y-U.length:1/0),V=""),p){case"<":O=j+O+U+V;break;case"=":O=j+V+O+U;break;case"^":O=V.slice(0,H=V.length>>1)+j+O+U+V.slice(H);break;default:O=V+j+O+U;break}return s(O)}return R.toString=function(){return f+""},R}function d(f,h){var p=u((f=nw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(bx(h)/3)))*3,v=Math.pow(10,-g),b=wz[8+g/3];return function(y){return p(v*y)+b}}return{format:u,formatPrefix:d}}var mC,FR,kae;OVe({thousands:",",grouping:[3],currency:["$",""]});function OVe(e){return mC=FVe(e),FR=mC.format,kae=mC.formatPrefix,mC}function DVe(e){return Math.max(0,-bx(Math.abs(e)))}function RVe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bx(t)/3)))*3-bx(Math.abs(e)))}function PVe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bx(t)-bx(e))+1}function Ru(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function hh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const LF=Symbol("implicit");function XN(){var e=new hz,t=[],r=[],n=LF;function a(s){let i=e.get(s);if(i===void 0){if(n!==LF)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new hz;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return XN(t,r).unknown(n)},Ru.apply(a,arguments),a}function OR(){var e=XN().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,v=p?n:a;s=(v-g)/Math.max(1,h-l+u*2),o&&(s=Math.floor(s)),g+=(v-g-s*(h-l))*d,i=s*(1-l),o&&(g=Math.round(g),i=Math.round(i));var b=EVe(h).map(function(y){return g+s*y});return r(p?b.reverse():b)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return OR(t(),[n,a]).round(o).paddingInner(l).paddingOuter(u).align(d)},Ru.apply(f(),arguments)}function Bae(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Bae(t())},e}function LVe(){return Bae(OR.apply(null,arguments).paddingInner(1))}function MVe(e){return function(){return e}}function MS(e){return+e}var Ez=[0,1];function fl(e){return e}function MF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:MVe(isNaN(t)?NaN:.5)}function UVe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function QVe(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=MF(a,n),s=r(i,s)):(n=MF(n,a),s=r(s,i)),function(o){return s(n(o))}}function HVe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=MF(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var l=Gw(e,o,1,n)-1;return s[l](a[l](o))}}function qw(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function YN(){var e=Ez,t=Ez,r=Gx,n,a,s,i=fl,o,l,u;function d(){var h=Math.min(e.length,t.length);return i!==fl&&(i=UVe(e[0],e[h-1])),o=h>2?HVe:QVe,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=o(t,e.map(n),Ad)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,MS),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=fR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:fl,d()):i!==fl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,a=p,d()}}function DR(){return YN()(fl,fl)}function Tae(e,t,r,n){var a=DF(e,t,r),s;switch(n=nw(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=RVe(a,i))&&(n.precision=s),kae(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=PVe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=DVe(a))&&(n.precision=s-(n.type==="%")*2);break}}return FR(n)}function fm(e){var t=e.domain;return e.ticks=function(r){var n=t();return FF(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Tae(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],l,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=OF(i,o,r),u===l)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function Iae(){var e=DR();return e.copy=function(){return qw(e,Iae())},Ru.apply(e,arguments),fm(e)}function jae(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,MS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return jae(e).unknown(t)},e=arguments.length?Array.from(e,MS):[0,1],fm(r)}function Fae(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function Cz(e){return Math.log(e)}function _z(e){return Math.exp(e)}function VVe(e){return-Math.log(-e)}function zVe(e){return-Math.exp(-e)}function $Ve(e){return isFinite(e)?+("1e"+e):e<0?0:e}function KVe(e){return e===10?$Ve:e===Math.E?Math.exp:t=>Math.pow(e,t)}function GVe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Sz(e){return(t,r)=>-e(-t,r)}function RR(e){const t=e(Cz,_z),r=t.domain;let n=10,a,s;function i(){return a=GVe(n),s=KVe(n),r()[0]<0?(a=Sz(a),s=Sz(s),e(VVe,zVe)):e(Cz,_z),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,v;const b=o==null?10:+o;let y=[];if(!(n%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}y.length*2<b&&(y=FF(u,d,b))}else y=FF(h,p,Math.min(p-h,b)).map(s);return f?y.reverse():y},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=nw(l)).precision==null&&(l.trim=!0),l=FR(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(Fae(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function Oae(){const e=RR(YN()).domain([1,10]);return e.copy=()=>qw(e,Oae()).base(e.base()),Ru.apply(e,arguments),e}function Nz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function kz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function PR(e){var t=1,r=e(Nz(t),kz(t));return r.constant=function(n){return arguments.length?e(Nz(t=+n),kz(t)):t},fm(r)}function Dae(){var e=PR(YN());return e.copy=function(){return qw(e,Dae()).constant(e.constant())},Ru.apply(e,arguments)}function Bz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qVe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function WVe(e){return e<0?-e*e:e*e}function LR(e){var t=e(fl,fl),r=1;function n(){return r===1?e(fl,fl):r===.5?e(qVe,WVe):e(Bz(r),Bz(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},fm(t)}function MR(){var e=LR(YN());return e.copy=function(){return qw(e,MR()).exponent(e.exponent())},Ru.apply(e,arguments),e}function XVe(){return MR.apply(null,arguments).exponent(.5)}function Tz(e){return Math.sign(e)*e*e}function YVe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Rae(){var e=DR(),t=[0,1],r=!1,n;function a(s){var i=YVe(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(Tz(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,MS)).map(Tz)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Rae(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ru.apply(a,arguments),fm(a)}function Pae(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=wVe(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[Gw(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(U0),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Pae().domain(e).range(t).unknown(n)},Ru.apply(s,arguments)}function Lae(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(l){return l!=null&&l<=l?a[Gw(n,l,0,r)]:s}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},i.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,o()):a.slice()},i.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(l){return arguments.length&&(s=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return Lae().domain([e,t]).range(a).unknown(s)},Ru.apply(fm(i),arguments)}function Mae(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[Gw(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Mae().domain(e).range(t).unknown(r)},Ru.apply(a,arguments)}const OT=new Date,DT=new Date;function Bi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const l=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return l;let u;do l.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return l},a.filter=s=>Bi(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(OT.setTime(+s),DT.setTime(+i),e(OT),e(DT),Math.floor(r(OT,DT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const US=Bi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);US.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):US);US.range;const Rf=1e3,Bu=Rf*60,Pf=Bu*60,rh=Pf*24,UR=rh*7,Iz=rh*30,RT=rh*365,ip=Bi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Rf)},(e,t)=>(t-e)/Rf,e=>e.getUTCSeconds());ip.range;const QR=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rf)},(e,t)=>{e.setTime(+e+t*Bu)},(e,t)=>(t-e)/Bu,e=>e.getMinutes());QR.range;const HR=Bi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bu)},(e,t)=>(t-e)/Bu,e=>e.getUTCMinutes());HR.range;const VR=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rf-e.getMinutes()*Bu)},(e,t)=>{e.setTime(+e+t*Pf)},(e,t)=>(t-e)/Pf,e=>e.getHours());VR.range;const zR=Bi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pf)},(e,t)=>(t-e)/Pf,e=>e.getUTCHours());zR.range;const Ww=Bi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bu)/rh,e=>e.getDate()-1);Ww.range;const JN=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rh,e=>e.getUTCDate()-1);JN.range;const Uae=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rh,e=>Math.floor(e/rh));Uae.range;function sg(e){return Bi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Bu)/UR)}const ZN=sg(0),QS=sg(1),JVe=sg(2),ZVe=sg(3),yx=sg(4),eze=sg(5),tze=sg(6);ZN.range;QS.range;JVe.range;ZVe.range;yx.range;eze.range;tze.range;function ig(e){return Bi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/UR)}const e4=ig(0),HS=ig(1),rze=ig(2),nze=ig(3),wx=ig(4),aze=ig(5),sze=ig(6);e4.range;HS.range;rze.range;nze.range;wx.range;aze.range;sze.range;const $R=Bi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$R.range;const KR=Bi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());KR.range;const nh=Bi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());nh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});nh.range;const ah=Bi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ah.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ah.range;function Qae(e,t,r,n,a,s){const i=[[ip,1,Rf],[ip,5,5*Rf],[ip,15,15*Rf],[ip,30,30*Rf],[s,1,Bu],[s,5,5*Bu],[s,15,15*Bu],[s,30,30*Bu],[a,1,Pf],[a,3,3*Pf],[a,6,6*Pf],[a,12,12*Pf],[n,1,rh],[n,2,2*rh],[r,1,UR],[t,1,Iz],[t,3,3*Iz],[e,1,RT]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:l(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function l(u,d,f){const h=Math.abs(d-u)/f,p=IR(([,,b])=>b).right(i,h);if(p===i.length)return e.every(DF(u/RT,d/RT,f));if(p===0)return US.every(Math.max(DF(u,d,f),1));const[g,v]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return g.every(v)}return[o,l]}const[ize,oze]=Qae(ah,KR,e4,Uae,zR,HR),[lze,cze]=Qae(nh,$R,ZN,Ww,VR,QR);function PT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function LT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function db(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function uze(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,u=Ab(a),d=fb(a),f=Ab(s),h=fb(s),p=Ab(i),g=fb(i),v=Ab(o),b=fb(o),y=Ab(l),_=fb(l),S={a:Z,A:H,b:V,B:q,c:null,d:Pz,e:Pz,f:Fze,g:Vze,G:$ze,H:Tze,I:Ize,j:jze,L:Hae,m:Oze,M:Dze,p:ne,q:L,Q:Uz,s:Qz,S:Rze,u:Pze,U:Lze,V:Mze,w:Uze,W:Qze,x:null,X:null,y:Hze,Y:zze,Z:Kze,"%":Mz},k={a:W,A:J,b:te,B:ie,c:null,d:Lz,e:Lz,f:Xze,g:i$e,G:l$e,H:Gze,I:qze,j:Wze,L:zae,m:Yze,M:Jze,p:Ae,q:oe,Q:Uz,s:Qz,S:Zze,u:e$e,U:t$e,V:r$e,w:n$e,W:a$e,x:null,X:null,y:s$e,Y:o$e,Z:c$e,"%":Mz},B={a:R,A:O,b:j,B:U,c:P,d:Dz,e:Dz,f:Sze,g:Oz,G:Fz,H:Rz,I:Rz,j:wze,L:_ze,m:yze,M:Eze,p:N,q:bze,Q:kze,s:Bze,S:Cze,u:mze,U:pze,V:gze,w:hze,W:vze,x:X,X:K,y:Oz,Y:Fz,Z:xze,"%":Nze};S.x=F(r,S),S.X=F(n,S),S.c=F(t,S),k.x=F(r,k),k.X=F(n,k),k.c=F(t,k);function F(ce,ge){return function(je){var re=[],Se=-1,De=0,_e=ce.length,he,Ie,He;for(je instanceof Date||(je=new Date(+je));++Se<_e;)ce.charCodeAt(Se)===37&&(re.push(ce.slice(De,Se)),(Ie=jz[he=ce.charAt(++Se)])!=null?he=ce.charAt(++Se):Ie=he==="e"?" ":"0",(He=ge[he])&&(he=He(je,Ie)),re.push(he),De=Se+1);return re.push(ce.slice(De,Se)),re.join("")}}function w(ce,ge){return function(je){var re=db(1900,void 0,1),Se=C(re,ce,je+="",0),De,_e;if(Se!=je.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(ge&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(De=LT(db(re.y,0,1)),_e=De.getUTCDay(),De=_e>4||_e===0?HS.ceil(De):HS(De),De=JN.offset(De,(re.V-1)*7),re.y=De.getUTCFullYear(),re.m=De.getUTCMonth(),re.d=De.getUTCDate()+(re.w+6)%7):(De=PT(db(re.y,0,1)),_e=De.getDay(),De=_e>4||_e===0?QS.ceil(De):QS(De),De=Ww.offset(De,(re.V-1)*7),re.y=De.getFullYear(),re.m=De.getMonth(),re.d=De.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),_e="Z"in re?LT(db(re.y,0,1)).getUTCDay():PT(db(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(_e+5)%7:re.w+re.U*7-(_e+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,LT(re)):PT(re)}}function C(ce,ge,je,re){for(var Se=0,De=ge.length,_e=je.length,he,Ie;Se<De;){if(re>=_e)return-1;if(he=ge.charCodeAt(Se++),he===37){if(he=ge.charAt(Se++),Ie=B[he in jz?ge.charAt(Se++):he],!Ie||(re=Ie(ce,je,re))<0)return-1}else if(he!=je.charCodeAt(re++))return-1}return re}function N(ce,ge,je){var re=u.exec(ge.slice(je));return re?(ce.p=d.get(re[0].toLowerCase()),je+re[0].length):-1}function R(ce,ge,je){var re=p.exec(ge.slice(je));return re?(ce.w=g.get(re[0].toLowerCase()),je+re[0].length):-1}function O(ce,ge,je){var re=f.exec(ge.slice(je));return re?(ce.w=h.get(re[0].toLowerCase()),je+re[0].length):-1}function j(ce,ge,je){var re=y.exec(ge.slice(je));return re?(ce.m=_.get(re[0].toLowerCase()),je+re[0].length):-1}function U(ce,ge,je){var re=v.exec(ge.slice(je));return re?(ce.m=b.get(re[0].toLowerCase()),je+re[0].length):-1}function P(ce,ge,je){return C(ce,t,ge,je)}function X(ce,ge,je){return C(ce,r,ge,je)}function K(ce,ge,je){return C(ce,n,ge,je)}function Z(ce){return i[ce.getDay()]}function H(ce){return s[ce.getDay()]}function V(ce){return l[ce.getMonth()]}function q(ce){return o[ce.getMonth()]}function ne(ce){return a[+(ce.getHours()>=12)]}function L(ce){return 1+~~(ce.getMonth()/3)}function W(ce){return i[ce.getUTCDay()]}function J(ce){return s[ce.getUTCDay()]}function te(ce){return l[ce.getUTCMonth()]}function ie(ce){return o[ce.getUTCMonth()]}function Ae(ce){return a[+(ce.getUTCHours()>=12)]}function oe(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var ge=F(ce+="",S);return ge.toString=function(){return ce},ge},parse:function(ce){var ge=w(ce+="",!1);return ge.toString=function(){return ce},ge},utcFormat:function(ce){var ge=F(ce+="",k);return ge.toString=function(){return ce},ge},utcParse:function(ce){var ge=w(ce+="",!0);return ge.toString=function(){return ce},ge}}}var jz={"-":"",_:" ",0:"0"},Ji=/^\s*\d+/,dze=/^%/,Aze=/[\\^$*+?|[\]().{}]/g;function Xn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function fze(e){return e.replace(Aze,"\\$&")}function Ab(e){return new RegExp("^(?:"+e.map(fze).join("|")+")","i")}function fb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function hze(e,t,r){var n=Ji.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function mze(e,t,r){var n=Ji.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function pze(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function gze(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function vze(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Fz(e,t,r){var n=Ji.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Oz(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function xze(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function bze(e,t,r){var n=Ji.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function yze(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Dz(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function wze(e,t,r){var n=Ji.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Rz(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Eze(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Cze(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function _ze(e,t,r){var n=Ji.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Sze(e,t,r){var n=Ji.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Nze(e,t,r){var n=dze.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function kze(e,t,r){var n=Ji.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Bze(e,t,r){var n=Ji.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Pz(e,t){return Xn(e.getDate(),t,2)}function Tze(e,t){return Xn(e.getHours(),t,2)}function Ize(e,t){return Xn(e.getHours()%12||12,t,2)}function jze(e,t){return Xn(1+Ww.count(nh(e),e),t,3)}function Hae(e,t){return Xn(e.getMilliseconds(),t,3)}function Fze(e,t){return Hae(e,t)+"000"}function Oze(e,t){return Xn(e.getMonth()+1,t,2)}function Dze(e,t){return Xn(e.getMinutes(),t,2)}function Rze(e,t){return Xn(e.getSeconds(),t,2)}function Pze(e){var t=e.getDay();return t===0?7:t}function Lze(e,t){return Xn(ZN.count(nh(e)-1,e),t,2)}function Vae(e){var t=e.getDay();return t>=4||t===0?yx(e):yx.ceil(e)}function Mze(e,t){return e=Vae(e),Xn(yx.count(nh(e),e)+(nh(e).getDay()===4),t,2)}function Uze(e){return e.getDay()}function Qze(e,t){return Xn(QS.count(nh(e)-1,e),t,2)}function Hze(e,t){return Xn(e.getFullYear()%100,t,2)}function Vze(e,t){return e=Vae(e),Xn(e.getFullYear()%100,t,2)}function zze(e,t){return Xn(e.getFullYear()%1e4,t,4)}function $ze(e,t){var r=e.getDay();return e=r>=4||r===0?yx(e):yx.ceil(e),Xn(e.getFullYear()%1e4,t,4)}function Kze(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Xn(t/60|0,"0",2)+Xn(t%60,"0",2)}function Lz(e,t){return Xn(e.getUTCDate(),t,2)}function Gze(e,t){return Xn(e.getUTCHours(),t,2)}function qze(e,t){return Xn(e.getUTCHours()%12||12,t,2)}function Wze(e,t){return Xn(1+JN.count(ah(e),e),t,3)}function zae(e,t){return Xn(e.getUTCMilliseconds(),t,3)}function Xze(e,t){return zae(e,t)+"000"}function Yze(e,t){return Xn(e.getUTCMonth()+1,t,2)}function Jze(e,t){return Xn(e.getUTCMinutes(),t,2)}function Zze(e,t){return Xn(e.getUTCSeconds(),t,2)}function e$e(e){var t=e.getUTCDay();return t===0?7:t}function t$e(e,t){return Xn(e4.count(ah(e)-1,e),t,2)}function $ae(e){var t=e.getUTCDay();return t>=4||t===0?wx(e):wx.ceil(e)}function r$e(e,t){return e=$ae(e),Xn(wx.count(ah(e),e)+(ah(e).getUTCDay()===4),t,2)}function n$e(e){return e.getUTCDay()}function a$e(e,t){return Xn(HS.count(ah(e)-1,e),t,2)}function s$e(e,t){return Xn(e.getUTCFullYear()%100,t,2)}function i$e(e,t){return e=$ae(e),Xn(e.getUTCFullYear()%100,t,2)}function o$e(e,t){return Xn(e.getUTCFullYear()%1e4,t,4)}function l$e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?wx(e):wx.ceil(e),Xn(e.getUTCFullYear()%1e4,t,4)}function c$e(){return"+0000"}function Mz(){return"%"}function Uz(e){return+e}function Qz(e){return Math.floor(+e/1e3)}var av,Kae,Gae;u$e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function u$e(e){return av=uze(e),Kae=av.format,av.parse,Gae=av.utcFormat,av.utcParse,av}function d$e(e){return new Date(e)}function A$e(e){return e instanceof Date?+e:+new Date(+e)}function GR(e,t,r,n,a,s,i,o,l,u){var d=DR(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),v=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),_=u("%b %d"),S=u("%B"),k=u("%Y");function B(F){return(l(F)<F?p:o(F)<F?g:i(F)<F?v:s(F)<F?b:n(F)<F?a(F)<F?y:_:r(F)<F?S:k)(F)}return d.invert=function(F){return new Date(f(F))},d.domain=function(F){return arguments.length?h(Array.from(F,A$e)):h().map(d$e)},d.ticks=function(F){var w=h();return e(w[0],w[w.length-1],F??10)},d.tickFormat=function(F,w){return w==null?B:u(w)},d.nice=function(F){var w=h();return(!F||typeof F.range!="function")&&(F=t(w[0],w[w.length-1],F??10)),F?h(Fae(w,F)):d},d.copy=function(){return qw(d,GR(e,t,r,n,a,s,i,o,l,u))},d}function f$e(){return Ru.apply(GR(lze,cze,nh,$R,ZN,Ww,VR,QR,ip,Kae).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function h$e(){return Ru.apply(GR(ize,oze,ah,KR,e4,JN,zR,HR,ip,Gae).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function t4(){var e=0,t=1,r,n,a,s,i=fl,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,i=f(p,g),u):[i(0),i(1)]}}return u.range=d(Gx),u.rangeRound=d(fR),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function hm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qae(){var e=fm(t4()(fl));return e.copy=function(){return hm(e,qae())},hh.apply(e,arguments)}function Wae(){var e=RR(t4()).domain([1,10]);return e.copy=function(){return hm(e,Wae()).base(e.base())},hh.apply(e,arguments)}function Xae(){var e=PR(t4());return e.copy=function(){return hm(e,Xae()).constant(e.constant())},hh.apply(e,arguments)}function qR(){var e=LR(t4());return e.copy=function(){return hm(e,qR()).exponent(e.exponent())},hh.apply(e,arguments)}function m$e(){return qR.apply(null,arguments).exponent(.5)}function Yae(){var e=[],t=fl;function r(n){if(n!=null&&!isNaN(n=+n))return t((Gw(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(U0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>yVe(e,s/n))},r.copy=function(){return Yae(t).domain(e)},hh.apply(r,arguments)}function r4(){var e=0,t=.5,r=1,n=1,a,s,i,o,l,u=fl,d,f=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+d(v))-s)*(n*v<n*s?o:l),u(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),l=s===i?0:.5/(i-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(u=v,p):u};function g(v){return function(b){var y,_,S;return arguments.length?([y,_,S]=b,u=rUe(v,[y,_,S]),p):[u(0),u(.5),u(1)]}}return p.range=g(Gx),p.rangeRound=g(fR),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return d=v,a=v(e),s=v(t),i=v(r),o=a===s?0:.5/(s-a),l=s===i?0:.5/(i-s),n=s<a?-1:1,p}}function Jae(){var e=fm(r4()(fl));return e.copy=function(){return hm(e,Jae())},hh.apply(e,arguments)}function Zae(){var e=RR(r4()).domain([.1,1,10]);return e.copy=function(){return hm(e,Zae()).base(e.base())},hh.apply(e,arguments)}function ese(){var e=PR(r4());return e.copy=function(){return hm(e,ese()).constant(e.constant())},hh.apply(e,arguments)}function WR(){var e=LR(r4());return e.copy=function(){return hm(e,WR()).exponent(e.exponent())},hh.apply(e,arguments)}function p$e(){return WR.apply(null,arguments).exponent(.5)}function g$e(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const v$e=g$e("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Oa(e){return function(){return e}}const tse=Math.cos,VS=Math.sin,Td=Math.sqrt,zS=Math.PI,n4=2*zS;function XR(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new SVe(t)}function YR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rse(e){this._context=e}rse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function a4(e){return new rse(e)}function nse(e){return e[0]}function ase(e){return e[1]}function sse(e,t){var r=Oa(!0),n=null,a=a4,s=null,i=XR(o);e=typeof e=="function"?e:e===void 0?nse:Oa(e),t=typeof t=="function"?t:t===void 0?ase:Oa(t);function o(l){var u,d=(l=YR(l)).length,f,h=!1,p;for(n==null&&(s=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,l),+t(f,u,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:Oa(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:Oa(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Oa(!!l),o):r},o.curve=function(l){return arguments.length?(a=l,n!=null&&(s=a(n)),o):a},o.context=function(l){return arguments.length?(l==null?n=s=null:s=a(n=l),o):n},o}function pC(e,t,r){var n=null,a=Oa(!0),s=null,i=a4,o=null,l=XR(u);e=typeof e=="function"?e:e===void 0?nse:Oa(+e),t=typeof t=="function"?t:Oa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ase:Oa(+r);function u(f){var h,p,g,v=(f=YR(f)).length,b,y=!1,_,S=new Array(v),k=new Array(v);for(s==null&&(o=i(_=l())),h=0;h<=v;++h){if(!(h<v&&a(b=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(S[g],k[g]);o.lineEnd(),o.areaEnd()}y&&(S[h]=+e(b,h,f),k[h]=+t(b,h,f),o.point(n?+n(b,h,f):S[h],r?+r(b,h,f):k[h]))}if(_)return o=null,_+""||null}function d(){return sse().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Oa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Oa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Oa(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class ise{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function x$e(e){return new ise(e,!0)}function b$e(e){return new ise(e,!1)}const JR={draw(e,t){const r=Td(t/zS);e.moveTo(r,0),e.arc(0,0,r,0,n4)}},y$e={draw(e,t){const r=Td(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},ose=Td(1/3),w$e=ose*2,E$e={draw(e,t){const r=Td(t/w$e),n=r*ose;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},C$e={draw(e,t){const r=Td(t),n=-r/2;e.rect(n,n,r,r)}},_$e=.8908130915292852,lse=VS(zS/10)/VS(7*zS/10),S$e=VS(n4/10)*lse,N$e=-tse(n4/10)*lse,k$e={draw(e,t){const r=Td(t*_$e),n=S$e*r,a=N$e*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=n4*s/5,o=tse(i),l=VS(i);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*a,l*n+o*a)}e.closePath()}},MT=Td(3),B$e={draw(e,t){const r=-Td(t/(MT*3));e.moveTo(0,r*2),e.lineTo(-MT*r,-r),e.lineTo(MT*r,-r),e.closePath()}},uu=-.5,du=Td(3)/2,UF=1/Td(12),T$e=(UF/2+1)*3,I$e={draw(e,t){const r=Td(t/T$e),n=r/2,a=r*UF,s=n,i=r*UF+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(uu*n-du*a,du*n+uu*a),e.lineTo(uu*s-du*i,du*s+uu*i),e.lineTo(uu*o-du*l,du*o+uu*l),e.lineTo(uu*n+du*a,uu*a-du*n),e.lineTo(uu*s+du*i,uu*i-du*s),e.lineTo(uu*o+du*l,uu*l-du*o),e.closePath()}};function j$e(e,t){let r=null,n=XR(a);e=typeof e=="function"?e:Oa(e||JR),t=typeof t=="function"?t:Oa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Oa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function $S(){}function KS(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function cse(e){this._context=e}cse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:KS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:KS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function F$e(e){return new cse(e)}function use(e){this._context=e}use.prototype={areaStart:$S,areaEnd:$S,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:KS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function O$e(e){return new use(e)}function dse(e){this._context=e}dse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:KS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function D$e(e){return new dse(e)}function Ase(e){this._context=e}Ase.prototype={areaStart:$S,areaEnd:$S,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function R$e(e){return new Ase(e)}function Hz(e){return e<0?-1:1}function Vz(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(Hz(s)+Hz(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function zz(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function UT(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function GS(e){this._context=e}GS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:UT(this,this._t0,zz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,UT(this,zz(this,r=Vz(this,e,t)),r);break;default:UT(this,this._t0,r=Vz(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function fse(e){this._context=new hse(e)}(fse.prototype=Object.create(GS.prototype)).point=function(e,t){GS.prototype.point.call(this,t,e)};function hse(e){this._context=e}hse.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function P$e(e){return new GS(e)}function L$e(e){return new fse(e)}function mse(e){this._context=e}mse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=$z(e),a=$z(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function $z(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function M$e(e){return new mse(e)}function s4(e,t){this._context=e,this._t=t}s4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function U$e(e){return new s4(e,.5)}function Q$e(e){return new s4(e,0)}function H$e(e){return new s4(e,1)}function Ex(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function QF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function V$e(e,t){return e[t]}function z$e(e){const t=[];return t.key=e,t}function $$e(){var e=Oa([]),t=QF,r=Ex,n=V$e;function a(s){var i=Array.from(e.apply(this,arguments),z$e),o,l=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<l;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=YR(t(i));o<l;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Oa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?QF:typeof s=="function"?s:Oa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??Ex,a):r},a}function K$e(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}Ex(e,t)}}function G$e(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Ex(e,t)}}function q$e(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,l=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var v=e[t[g]],b=v[n][1]||0,y=v[n-1][1]||0;p+=b-y}l+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,Ex(e,t)}}var W$e={value:function(){}};function pse(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new l_(r)}function l_(e){this._=e}function X$e(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}l_.prototype=pse.prototype={constructor:l_,on:function(e,t){var r=this._,n=X$e(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=Y$e(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=Kz(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Kz(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new l_(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Y$e(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function Kz(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=W$e,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const J$e=Object.freeze(Object.defineProperty({__proto__:null,dispatch:pse},Symbol.toStringTag,{value:"Module"})),Z$e=Ade(J$e);var QT,Gz;function eKe(){if(Gz)return QT;Gz=1;const e=Z$e.dispatch,t=Math.PI/180,r={archimedean:v,rectangular:b},n=64,a=2048;QT=function(){var k=[256,256],B=s,F=i,w=l,C=o,N=o,R=u,O=d,j=v,U=[],P=1/0,X=e("word","end"),K=null,Z=Math.random,H={},V=_;H.canvas=function(L){return arguments.length?(V=S(L),H):V},H.start=function(){var L=q(V()),W=y((k[0]>>5)*k[1]),J=null,te=U.length,ie=-1,Ae=[],oe=U.map(function(ge,je){return ge.text=B.call(this,ge,je),ge.font=F.call(this,ge,je),ge.style=C.call(this,ge,je),ge.weight=N.call(this,ge,je),ge.rotate=R.call(this,ge,je),ge.size=~~w.call(this,ge,je),ge.padding=O.call(this,ge,je),ge}).sort(function(ge,je){return je.size-ge.size});return K&&clearInterval(K),K=setInterval(ce,0),ce(),H;function ce(){for(var ge=Date.now();Date.now()-ge<P&&++ie<te&&K;){var je=oe[ie];je.x=k[0]*(Z()+.5)>>1,je.y=k[1]*(Z()+.5)>>1,f(L,je,oe,ie),je.hasText&&ne(W,je,J)&&(Ae.push(je),X.call("word",H,je),J?p(J,je):J=[{x:je.x+je.x0,y:je.y+je.y0},{x:je.x+je.x1,y:je.y+je.y1}],je.x-=k[0]>>1,je.y-=k[1]>>1)}ie>=te&&(H.stop(),X.call("end",H,Ae,J))}},H.stop=function(){K&&(clearInterval(K),K=null);for(const L of U)delete L.sprite;return H};function q(L){const W=L.getContext("2d",{willReadFrequently:!0});L.width=L.height=1;const J=Math.sqrt(W.getImageData(0,0,1,1).data.length>>2);return L.width=(n<<5)/J,L.height=a/J,W.fillStyle=W.strokeStyle="red",{context:W,ratio:J}}function ne(L,W,J){k[0],k[1];for(var te=W.x,ie=W.y,Ae=Math.sqrt(k[0]*k[0]+k[1]*k[1]),oe=j(k),ce=Z()<.5?1:-1,ge=-ce,je,re,Se;(je=oe(ge+=ce))&&(re=~~je[0],Se=~~je[1],!(Math.min(Math.abs(re),Math.abs(Se))>=Ae));)if(W.x=te+re,W.y=ie+Se,!(W.x+W.x0<0||W.y+W.y0<0||W.x+W.x1>k[0]||W.y+W.y1>k[1])&&(!J||g(W,J))&&!h(W,L,k[0])){for(var De=W.sprite,_e=W.width>>5,he=k[0]>>5,Ie=W.x-(_e<<4),He=Ie&127,Xe=32-He,ye=W.y1-W.y0,Oe=(W.y+W.y0)*he+(Ie>>5),Pe,qe=0;qe<ye;qe++){Pe=0;for(var Ze=0;Ze<=_e;Ze++)L[Oe+Ze]|=Pe<<Xe|(Ze<_e?(Pe=De[qe*_e+Ze])>>>He:0);Oe+=he}return!0}return!1}return H.timeInterval=function(L){return arguments.length?(P=L??1/0,H):P},H.words=function(L){return arguments.length?(U=L,H):U},H.size=function(L){return arguments.length?(k=[+L[0],+L[1]],H):k},H.font=function(L){return arguments.length?(F=S(L),H):F},H.fontStyle=function(L){return arguments.length?(C=S(L),H):C},H.fontWeight=function(L){return arguments.length?(N=S(L),H):N},H.rotate=function(L){return arguments.length?(R=S(L),H):R},H.text=function(L){return arguments.length?(B=S(L),H):B},H.spiral=function(L){return arguments.length?(j=r[L]||L,H):j},H.fontSize=function(L){return arguments.length?(w=S(L),H):w},H.padding=function(L){return arguments.length?(O=S(L),H):O},H.random=function(L){return arguments.length?(Z=L,H):Z},H.on=function(){var L=X.on.apply(X,arguments);return L===X?H:L},H};function s(k){return k.text}function i(){return"serif"}function o(){return"normal"}function l(k){return Math.sqrt(k.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(k,B,F,w){if(!B.sprite){var C=k.context,N=k.ratio;C.clearRect(0,0,(n<<5)/N,a/N);var R=0,O=0,j=0,U=F.length;for(--w;++w<U;){B=F[w],C.save(),C.font=B.style+" "+B.weight+" "+~~((B.size+1)/N)+"px "+B.font;const je=C.measureText(B.text),re=-Math.floor(je.width/2);let Se=(je.width+1)*N,De=B.size<<1;if(B.rotate){var P=Math.sin(B.rotate*t),X=Math.cos(B.rotate*t),K=Se*X,Z=Se*P,H=De*X,V=De*P;Se=Math.max(Math.abs(K+V),Math.abs(K-V))+31>>5<<5,De=~~Math.max(Math.abs(Z+H),Math.abs(Z-H))}else Se=Se+31>>5<<5;if(De>j&&(j=De),R+Se>=n<<5&&(R=0,O+=j,j=0),O+De>=a)break;C.translate((R+(Se>>1))/N,(O+(De>>1))/N),B.rotate&&C.rotate(B.rotate*t),C.fillText(B.text,re,0),B.padding&&(C.lineWidth=2*B.padding,C.strokeText(B.text,re,0)),C.restore(),B.width=Se,B.height=De,B.xoff=R,B.yoff=O,B.x1=Se>>1,B.y1=De>>1,B.x0=-B.x1,B.y0=-B.y1,B.hasText=!0,R+=Se}for(var q=C.getImageData(0,0,(n<<5)/N,a/N).data,ne=[];--w>=0;)if(B=F[w],!!B.hasText){for(var L=B.width,W=L>>5,J=B.y1-B.y0,te=0;te<J*W;te++)ne[te]=0;if(R=B.xoff,R==null)return;O=B.yoff;for(var ie=0,Ae=-1,oe=0;oe<J;oe++){for(var te=0;te<L;te++){var ce=W*oe+(te>>5),ge=q[(O+oe)*(n<<5)+(R+te)<<2]?1<<31-te%32:0;ne[ce]|=ge,ie|=ge}ie?Ae=oe:(B.y0++,J--,oe--,O++)}B.y1=B.y0+Ae,B.sprite=ne.slice(0,(B.y1-B.y0)*W)}}}function h(k,B,F){F>>=5;for(var w=k.sprite,C=k.width>>5,N=k.x-(C<<4),R=N&127,O=32-R,j=k.y1-k.y0,U=(k.y+k.y0)*F+(N>>5),P,X=0;X<j;X++){P=0;for(var K=0;K<=C;K++)if((P<<O|(K<C?(P=w[X*C+K])>>>R:0))&B[U+K])return!0;U+=F}return!1}function p(k,B){var F=k[0],w=k[1];B.x+B.x0<F.x&&(F.x=B.x+B.x0),B.y+B.y0<F.y&&(F.y=B.y+B.y0),B.x+B.x1>w.x&&(w.x=B.x+B.x1),B.y+B.y1>w.y&&(w.y=B.y+B.y1)}function g(k,B){return k.x+k.x1>B[0].x&&k.x+k.x0<B[1].x&&k.y+k.y1>B[0].y&&k.y+k.y0<B[1].y}function v(k){var B=k[0]/k[1];return function(F){return[B*(F*=.1)*Math.cos(F),F*Math.sin(F)]}}function b(k){var B=4,F=B*k[0]/k[1],w=0,C=0;return function(N){var R=N<0?-1:1;switch(Math.sqrt(1+4*R*N)-R&3){case 0:w+=F;break;case 1:C+=B;break;case 2:w-=F;break;default:C-=B;break}return[w,C]}}function y(k){for(var B=[],F=-1;++F<k;)B[F]=0;return B}function _(){return document.createElement("canvas")}function S(k){return typeof k=="function"?k:function(){return k}}return QT}var tKe=eKe();const rKe=bl(tKe),nKe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),aKe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),sKe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),iKe=e=>{const[t,r]=I.useState([]),[n,a]=I.useState(!0),[s,i]=I.useState(null),o=I.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return I.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let l;const u=d=>{r(d),a(!1),i(null)};if(o)l=lVe(u);else{const d=e.email||e.id||"";l=cVe(u,d)}return l}catch(l){i(l instanceof Error?l.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},oKe=({plan:e,onClose:t})=>c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),c.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(aKe,{})})]}),c.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),c.jsx("div",{className:"mt-3",children:c.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),c.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>c.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?c.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>c.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[c.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),qz=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],lKe=["1º Medio","2º Medio","3º Medio","4º Medio"],cKe=({words:e})=>{const t=I.useRef(null);return I.useEffect(()=>{if(!e.length||!t.current)return;const r=Eu(t.current);r.selectAll("*").remove();const n=rKe().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>XN(v$e)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),c.jsx("svg",{ref:t})},uKe=({planificaciones:e})=>{const[t,r]=I.useState("todos"),[n,a]=I.useState("todos"),s=I.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=I.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=I.useMemo(()=>{const d=qz.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,p;return(p=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:p.forEach((g,v)=>{d[g]!==void 0&&(d[g]+=qz.length-v)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),l=I.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(p=>{var g,v;return`${((g=p.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((v=p.reflexionUnidad)==null?void 0:v.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,g)=>(d.has(g)||(p[g]=(p[g]||0)+1),p),{});return Object.entries(h).map(([p,g])=>({text:p,value:g})).sort((p,g)=>g.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[c.jsx("option",{value:"todos",children:"Todos los Niveles"}),lKe.map(d=>c.jsx("option",{value:d,children:d},d))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>c.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):c.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),c.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:c.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),l.length>0?c.jsx(cKe,{words:l}):c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},dKe=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=iKe(e),[s,i]=I.useState("seguimiento"),[o,l]=I.useState("1º"),[u,d]=I.useState(null),[f,h]=I.useState(null),p=I.useMemo(()=>{const b={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===b[o]&&y.tipo==="Unidad")},[t,o]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{children:"Usuario no autenticado."})});if(r)return c.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[c.jsx(sKe,{}),c.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return c.jsx("div",{className:"text-center py-8",children:c.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const v=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>c.jsx("button",{onClick:()=>l(b.key),className:`${o===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:b.label},b.key))})}),p.length===0?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):c.jsx("div",{className:"space-y-4",children:qi.map(b=>{const y=p.filter(S=>S.asignatura===b);if(y.length===0)return null;const _=u===b;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>d(_?null:b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform ${_?"rotate-180":""}`,children:c.jsx(nKe,{})})]}),_&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:c.jsx("ul",{className:"space-y-3",children:y.map(S=>c.jsx("li",{children:c.jsxs("button",{onClick:()=>h(S),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:S.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",S.autor||"N/A"]})]})},S.id))})})]},b)})})]});return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&c.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),c.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&v(),s==="analisis"&&c.jsx(uKe,{planificaciones:t.filter(b=>b.tipo==="Unidad")})]}),f&&c.jsx(oKe,{plan:f,onClose:()=>h(null)})]})},i4="analisisTaxonomicos",AKe=async()=>{try{const e=nr(Ut(Rr,i4),Kr("uploadDate","desc"));return(await qs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},fKe=async e=>{if(!e)return[];try{const t=nr(Ut(Rr,i4),Ln("userId","==",e),Kr("uploadDate","desc"));return(await qs(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},hKe=async e=>{try{return{id:(await ea(Ut(Rr,i4),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},mKe=async e=>{try{const t=pr(Rr,i4,e);await Ys(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},Wz=["1º Medio","2º Medio","3º Medio","4º Medio"],kf=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],sv={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},pKe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Xz=({currentUser:e})=>{const[t,r]=I.useState([]),[n,a]=I.useState(!1),[s,i]=I.useState(null),[o,l]=I.useState(null),[u,d]=I.useState(""),[f,h]=I.useState(!1),[p,g]=I.useState(null),[v,b]=I.useState(null),[y,_]=I.useState(""),[S,k]=I.useState(""),[B,F]=I.useState(""),[w,C]=I.useState(""),[N,R]=I.useState("resumen"),O=I.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const V=e.profile==="SUBDIRECCION"?await AKe():await fKe(e.id);r(V),i(null)}catch(V){console.error("Error al cargar análisis:",V),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);I.useEffect(()=>{O()},[O]);const j=async V=>{var ne;const q=(ne=V.target.files)==null?void 0:ne[0];if(q){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(q.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}g(q),d(q.name),i(null);const W=new FileReader;W.onloadend=()=>{var te;const J=(te=W.result)==null?void 0:te.split(",")[1];if(!J){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),b(null);return}b({mimeType:q.type,data:J})},W.onerror=()=>i("Error al leer el archivo."),W.readAsDataURL(q)}},U=async()=>{if(!u.trim()||!v){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!S){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const V=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,q={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:kf}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:kf.reduce((ne,L)=>({...ne,[L]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{X0("Análisis Taxonómico",e);const ne="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new os(ne).getGenerativeModel({model:"gemini-1.5-flash-latest",generationConfig:{responseMimeType:"application/json",responseSchema:q}}),J={inlineData:{mimeType:v.mimeType,data:v.data}},ie=(await W.generateContent([V,J])).response.text();let Ae;try{Ae=JSON.parse(ie)}catch(ge){throw console.error("Error al parsear JSON:",ge),console.error("Respuesta recibida (no es JSON válido):",ie),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const oe={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:Ae.analysisResults,summary:Ae.summary,nivel:y,asignatura:S},ce=await hKe(oe);await O(),l(ce),d(""),g(null),b(null),_(""),k("")}catch(ne){console.error(ne);const L=ne instanceof Error?ne.message:"Hubo un error al analizar el documento.";i(L)}finally{h(!1)}},P=async V=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await mKe(V),await O(),(o==null?void 0:o.id)===V&&l(null)}catch{i("No se pudo eliminar el análisis.")}},X=I.useMemo(()=>t.filter(V=>{const q=B?V.nivel===B:!0,ne=w?V.asignatura===w:!0;return q&&ne}),[t,B,w]),K=I.useMemo(()=>{const V={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};X.forEach(ne=>{kf.forEach(L=>{var J;const W=((J=ne.summary)==null?void 0:J[L])||0;V[L]+=W})});const q=Object.values(V).reduce((ne,L)=>ne+L,0);return{acc:V,total:q}},[X]),Z=I.useMemo(()=>{const V=new Map;X.forEach(ne=>{const L=ne.asignatura||"Sin asignatura";V.has(L)||V.set(L,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const W=V.get(L);kf.forEach(J=>{var te;W[J]+=((te=ne.summary)==null?void 0:te[J])||0})});const q=Array.from(V.entries()).map(([ne,L])=>({asignatura:ne,counts:L,total:Object.values(L).reduce((W,J)=>W+J,0)}));return q.sort((ne,L)=>L.total-ne.total),q},[X]),H=I.useMemo(()=>o?Object.values(o.summary).reduce((V,q)=>V+(q||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:j,accept:".pdf,.doc,.docx"}),c.jsx("span",{children:"Cargue un archivo"})]}),c.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),c.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:y,onChange:V=>_(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),Wz.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{value:S,onChange:V=>k(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),qi.map(V=>c.jsx("option",{value:V,children:V},V))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:V=>d(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:U,disabled:f||!v,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?c.jsx(pKe,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?c.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(V=>c.jsxs("button",{onClick:()=>l(V),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===V.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:V.documentName}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(V.uploadDate).toLocaleString("es-CL")}),(V.nivel||V.asignatura)&&c.jsxs("p",{className:"text-xs text-slate-500",children:[V.nivel||"Nivel s/i"," • ",V.asignatura||"Asignatura s/i"]})]},V.id))})]})]}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:c.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),c.jsxs("select",{value:B,onChange:V=>F(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos"}),Wz.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),c.jsxs("select",{value:w,onChange:V=>C(V.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas"}),qi.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsx("button",{type:"button",onClick:()=>{F(""),C("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>R("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${N==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),c.jsx("button",{onClick:()=>R("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${N==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),N==="resumen"?c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),c.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[X.length," análisis considerados"]})]}),c.jsx("div",{className:"space-y-3",children:kf.map(V=>{const q=K.acc[V],ne=K.total>0?q/K.total*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:V}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[q," (",ne.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${sv[V]} h-4 rounded-full`,style:{width:`${ne}%`}})})]},V)})}),c.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:kf.map(V=>c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[c.jsx("span",{className:"text-sm",children:V}),c.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${sv[V]}`,children:K.acc[V]})]},V))})]}):c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),c.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," asignaturas comparadas"]})]}),Z.length===0?c.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):c.jsx("div",{className:"space-y-5",children:Z.map(V=>{const q=V.total||1;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:V.asignatura}),c.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[V.total," ítems"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:kf.map(ne=>{const L=V.counts[ne]||0,W=L/q*100;return c.jsx("div",{className:`${sv[ne]} h-5`,style:{width:`${W}%`},title:`${ne}: ${L} (${W.toFixed(0)}%)`},ne)})}),c.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:kf.map(ne=>c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[c.jsx("span",{className:`inline-block w-3 h-3 rounded ${sv[ne]}`}),c.jsx("span",{children:ne})]},ne))})]},V.asignatura)})})]})]}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&c.jsxs(c.Fragment,{children:[" ","• ",o.nivel||"Nivel s/i"," • ",o.asignatura||"Asignatura s/i"]})]})]}),c.jsx("button",{onClick:()=>P(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",H," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:kf.map(V=>{const q=o.summary[V]||0,ne=H>0?q/H*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:V}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[q," (",ne.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${sv[V]} h-4 rounded-full`,style:{width:`${ne}%`}})})]},V)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((V,q)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:V.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${sv[V.habilidadBloom]}`,children:V.habilidadBloom})})]},q))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},qS="empresas_practicas",gKe="usuarios",ZR="rutas_supervision",eP=e=>{const t=e.data();return{id:e.id,...t}};async function vKe(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const xKe=e=>{const t=nr(Ut(Ft,qS),Kr("nombre","asc"));return wr(t,r=>{const n=r.docs.map(a=>eP(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},bKe=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await vKe(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=pr(Ft,qS,n);return await xo(s,a,{merge:!0}),n}else return(await ea(Ut(Ft,qS),{...r,createdAt:jp()})).id},yKe=async e=>{const t=pr(Ft,qS,e);await Ys(t)},wKe=e=>{const t=nr(Ut(Ft,gKe),Ln("profile","==","PROFESORADO"),Kr("nombreCompleto","asc"));return wr(t,r=>{const n=r.docs.map(a=>eP(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},EKe=async e=>(await ea(Ut(Ft,ZR),{...e,createdAt:jp()})).id,CKe=e=>{const t=nr(Ut(Ft,ZR),Kr("createdAt","desc"));return wr(t,r=>{const n=r.docs.map(a=>eP(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},_Ke=async e=>{const t=pr(Ft,ZR,e);await Ys(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ep=function(){return Ep=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ep.apply(this,arguments)};function SKe(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{l(n.next(u))}catch(d){s(d)}}function o(u){try{l(n.throw(u))}catch(d){s(d)}}function l(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}l((n=n.apply(e,[])).next())})}function NKe(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,u])}}}function Or(){return Or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Or.apply(this,arguments)}function Cp(e){return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function gse(e){var t=function(r,n){if(Cp(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Cp(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Cp(t)==="symbol"?t:String(t)}function _v(e,t,r){return(t=gse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(r),!0).forEach(function(n){_v(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gse(n.key),n)}}function HF(e,t){return HF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},HF(e,t)}function WS(e){return WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},WS(e)}function kKe(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function BKe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=WS(e);if(t){var a=WS(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return kKe(this,r)}}function VF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vse(e,t){if(e){if(typeof e=="string")return VF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?VF(e,t):void 0}}function tP(e){return function(t){if(Array.isArray(t))return VF(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||vse(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var TKe=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Au="-ms-",Zz="-moz-",Jn="-webkit-",rP="decl",xse="@keyframes",IKe=Math.abs,o4=String.fromCharCode,jKe=Object.assign;function bse(e){return e.trim()}function ia(e,t,r){return e.replace(t,r)}function zF(e,t){return e.indexOf(t)}function co(e,t){return 0|e.charCodeAt(t)}function aw(e,t,r){return e.slice(t,r)}function pA(e){return e.length}function nP(e){return e.length}function gC(e,t){return t.push(e),e}var l4=1,Cx=1,yse=0,Yl=0,fi=0,qx="";function c4(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:l4,column:Cx,length:i,return:""}}function hb(e,t){return jKe(c4("",null,null,"",null,null,0),e,{length:-e.length},t)}function Ic(){return fi=Yl<yse?co(qx,Yl++):0,Cx++,fi===10&&(Cx=1,l4++),fi}function RA(){return co(qx,Yl)}function c_(){return Yl}function Xw(e,t){return aw(qx,e,t)}function sw(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function wse(e){return l4=Cx=1,yse=pA(qx=e),Yl=0,[]}function Ese(e){return qx="",e}function u_(e){return bse(Xw(Yl-1,$F(e===91?e+2:e===40?e+1:e)))}function FKe(e){for(;(fi=RA())&&fi<33;)Ic();return sw(e)>2||sw(fi)>3?"":" "}function OKe(e,t){for(;--t&&Ic()&&!(fi<48||fi>102||fi>57&&fi<65||fi>70&&fi<97););return Xw(e,c_()+(t<6&&RA()==32&&Ic()==32))}function $F(e){for(;Ic();)switch(fi){case e:return Yl;case 34:case 39:e!==34&&e!==39&&$F(fi);break;case 40:e===41&&$F(e);break;case 92:Ic()}return Yl}function DKe(e,t){for(;Ic()&&e+fi!==57&&(e+fi!==84||RA()!==47););return"/*"+Xw(t,Yl-1)+"*"+o4(e===47?e:Ic())}function RKe(e){for(;!sw(RA());)Ic();return Xw(e,Yl)}function e$(e){return Ese(d_("",null,null,null,[""],e=wse(e),0,[0],e))}function d_(e,t,r,n,a,s,i,o,l){for(var u=0,d=0,f=i,h=0,p=0,g=0,v=1,b=1,y=1,_=0,S="",k=a,B=s,F=n,w=S;b;)switch(g=_,_=Ic()){case 40:if(g!=108&&co(w,f-1)==58){zF(w+=ia(u_(_),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:w+=u_(_);break;case 9:case 10:case 13:case 32:w+=FKe(g);break;case 92:w+=OKe(c_()-1,7);continue;case 47:switch(RA()){case 42:case 47:gC(PKe(DKe(Ic(),c_()),t,r),l);break;default:w+="/"}break;case 123*v:o[u++]=pA(w)*y;case 125*v:case 59:case 0:switch(_){case 0:case 125:b=0;case 59+d:p>0&&pA(w)-f&&gC(p>32?r$(w+";",n,r,f-1):r$(ia(w," ","")+";",n,r,f-2),l);break;case 59:w+=";";default:if(gC(F=t$(w,t,r,u,d,a,o,S,k=[],B=[],f),s),_===123)if(d===0)d_(w,t,F,F,k,s,f,o,B);else switch(h===99&&co(w,3)===110?100:h){case 100:case 109:case 115:d_(e,F,F,n&&gC(t$(e,F,F,0,0,a,o,S,a,k=[],f),B),a,B,f,o,n?k:B);break;default:d_(w,F,F,F,[""],B,0,o,B)}}u=d=p=0,v=y=1,S=w="",f=i;break;case 58:f=1+pA(w),p=g;default:if(v<1){if(_==123)--v;else if(_==125&&v++==0&&(fi=Yl>0?co(qx,--Yl):0,Cx--,fi===10&&(Cx=1,l4--),fi==125))continue}switch(w+=o4(_),_*v){case 38:y=d>0?1:(w+="\f",-1);break;case 44:o[u++]=(pA(w)-1)*y,y=1;break;case 64:RA()===45&&(w+=u_(Ic())),h=RA(),d=f=pA(S=w+=RKe(c_())),_++;break;case 45:g===45&&pA(w)==2&&(v=0)}}return s}function t$(e,t,r,n,a,s,i,o,l,u,d){for(var f=a-1,h=a===0?s:[""],p=nP(h),g=0,v=0,b=0;g<n;++g)for(var y=0,_=aw(e,f+1,f=IKe(v=i[g])),S=e;y<p;++y)(S=bse(v>0?h[y]+" "+_:ia(_,/&\f/g,h[y])))&&(l[b++]=S);return c4(e,t,r,a===0?"rule":o,l,u,d)}function PKe(e,t,r){return c4(e,t,r,"comm",o4(fi),aw(e,2,-2),0)}function r$(e,t,r,n){return c4(e,t,r,rP,aw(e,0,n),aw(e,n+1,-1),n)}function _p(e,t){for(var r="",n=nP(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function n$(e,t,r,n){switch(e.type){case"@import":case rP:return e.return=e.return||e.value;case"comm":return"";case xse:return e.return=e.value+"{"+_p(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return pA(r=_p(e.children,n))?e.return=e.value+"{"+r+"}":""}function a$(e){var t=nP(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function LKe(e){return function(t){t.root||(t=t.return)&&e(t)}}function Cse(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var MKe=function(e,t,r){for(var n=0,a=0;n=a,a=RA(),n===38&&a===12&&(t[r]=1),!sw(a);)Ic();return Xw(e,Yl)},UKe=function(e,t){return Ese(function(r,n){var a=-1,s=44;do switch(sw(s)){case 0:s===38&&RA()===12&&(n[a]=1),r[a]+=MKe(Yl-1,n,a);break;case 2:r[a]+=u_(s);break;case 4:if(s===44){r[++a]=RA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=o4(s)}while(s=Ic());return r}(wse(e),t))},s$=new WeakMap,QKe=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||s$.get(r))&&!n){s$.set(e,!0);for(var a=[],s=UKe(t,a),i=r.props,o=0,l=0;o<s.length;o++)for(var u=0;u<i.length;u++,l++)e.props[l]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},HKe=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function _se(e,t){switch(function(r,n){return 45^co(r,0)?(((n<<2^co(r,0))<<2^co(r,1))<<2^co(r,2))<<2^co(r,3):0}(e,t)){case 5103:return Jn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Jn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Jn+e+Zz+e+Au+e+e;case 6828:case 4268:return Jn+e+Au+e+e;case 6165:return Jn+e+Au+"flex-"+e+e;case 5187:return Jn+e+ia(e,/(\w+).+(:[^]+)/,Jn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Jn+e+Au+"flex-item-"+ia(e,/flex-|-self/,"")+e;case 4675:return Jn+e+Au+"flex-line-pack"+ia(e,/align-content|flex-|-self/,"")+e;case 5548:return Jn+e+Au+ia(e,"shrink","negative")+e;case 5292:return Jn+e+Au+ia(e,"basis","preferred-size")+e;case 6060:return Jn+"box-"+ia(e,"-grow","")+Jn+e+Au+ia(e,"grow","positive")+e;case 4554:return Jn+ia(e,/([^-])(transform)/g,"$1"+Jn+"$2")+e;case 6187:return ia(ia(ia(e,/(zoom-|grab)/,Jn+"$1"),/(image-set)/,Jn+"$1"),e,"")+e;case 5495:case 3959:return ia(e,/(image-set\([^]*)/,Jn+"$1$`$1");case 4968:return ia(ia(e,/(.+:)(flex-)?(.*)/,Jn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Jn+e+e;case 4095:case 3583:case 4068:case 2532:return ia(e,/(.+)-inline(.+)/,Jn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(pA(e)-1-t>6)switch(co(e,t+1)){case 109:if(co(e,t+4)!==45)break;case 102:return ia(e,/(.+:)(.+)-([^]+)/,"$1"+Jn+"$2-$3$1"+Zz+(co(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~zF(e,"stretch")?_se(ia(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(co(e,t+1)!==115)break;case 6444:switch(co(e,pA(e)-3-(~zF(e,"!important")&&10))){case 107:return ia(e,":",":"+Jn)+e;case 101:return ia(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Jn+(co(e,14)===45?"inline-":"")+"box$3$1"+Jn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(co(e,t+11)){case 114:return Jn+e+Au+ia(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Jn+e+Au+ia(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Jn+e+Au+ia(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Jn+e+Au+e+e}return e}var i$,vC,A_=typeof document<"u",VKe=A_?void 0:(i$=function(){return Cse(function(){var e={};return function(t){return e[t]}})},vC=new WeakMap,function(e){if(vC.has(e))return vC.get(e);var t=i$(e);return vC.set(e,t),t}),zKe=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case rP:e.return=_se(e.value,e.length);break;case xse:return _p([hb(e,{value:ia(e.value,"@","@"+Jn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _p([hb(e,{props:[ia(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return _p([hb(e,{props:[ia(a,/:(plac\w+)/,":"+Jn+"input-$1")]}),hb(e,{props:[ia(a,/:(plac\w+)/,":-moz-$1")]}),hb(e,{props:[ia(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],Sse=function(e){var t=e.key;if(A_&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||zKe,a,s,i={},o=[];A_&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var _=y.getAttribute("data-emotion").split(" "),S=1;S<_.length;S++)i[_[S]]=!0;o.push(y)}));var l=[QKe,HKe];if(A_){var u,d=[n$,LKe(function(y){u.insert(y)})],f=a$(l.concat(n,d));s=function(y,_,S,k){u=S,_p(e$(y?y+"{"+_.styles+"}":_.styles),f),k&&(b.inserted[_.name]=!0)}}else{var h=[n$],p=a$(l.concat(n,h)),g=VKe(n)(t),v=function(y,_){var S=_.name;return g[S]===void 0&&(g[S]=_p(e$(y?y+"{"+_.styles+"}":_.styles),p)),g[S]};s=function(y,_,S,k){var B=_.name,F=v(y,_);return b.compat===void 0?(k&&(b.inserted[B]=!0),F):k?void(b.inserted[B]=F):F}}var b={key:t,sheet:new TKe({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return b.sheet.hydrate(o),b};function la(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var Zi=typeof Symbol=="function"&&Symbol.for,KF=Zi?Symbol.for("react.element"):60103,GF=Zi?Symbol.for("react.portal"):60106,f_=Zi?Symbol.for("react.fragment"):60107,h_=Zi?Symbol.for("react.strict_mode"):60108,m_=Zi?Symbol.for("react.profiler"):60114,p_=Zi?Symbol.for("react.provider"):60109,g_=Zi?Symbol.for("react.context"):60110,qF=Zi?Symbol.for("react.async_mode"):60111,XS=Zi?Symbol.for("react.concurrent_mode"):60111,v_=Zi?Symbol.for("react.forward_ref"):60112,x_=Zi?Symbol.for("react.suspense"):60113,$Ke=Zi?Symbol.for("react.suspense_list"):60120,b_=Zi?Symbol.for("react.memo"):60115,y_=Zi?Symbol.for("react.lazy"):60116,KKe=Zi?Symbol.for("react.block"):60121,GKe=Zi?Symbol.for("react.fundamental"):60117,qKe=Zi?Symbol.for("react.responder"):60118,WKe=Zi?Symbol.for("react.scope"):60119;function xc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case KF:switch(e=e.type){case qF:case XS:case f_:case m_:case h_:case x_:return e;default:switch(e=e&&e.$$typeof){case g_:case v_:case y_:case b_:case p_:return e;default:return t}}case GF:return t}}}function o$(e){return xc(e)===XS}var XKe={AsyncMode:qF,ConcurrentMode:XS,ContextConsumer:g_,ContextProvider:p_,Element:KF,ForwardRef:v_,Fragment:f_,Lazy:y_,Memo:b_,Portal:GF,Profiler:m_,StrictMode:h_,Suspense:x_,isAsyncMode:function(e){return o$(e)||xc(e)===qF},isConcurrentMode:o$,isContextConsumer:function(e){return xc(e)===g_},isContextProvider:function(e){return xc(e)===p_},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===KF},isForwardRef:function(e){return xc(e)===v_},isFragment:function(e){return xc(e)===f_},isLazy:function(e){return xc(e)===y_},isMemo:function(e){return xc(e)===b_},isPortal:function(e){return xc(e)===GF},isProfiler:function(e){return xc(e)===m_},isStrictMode:function(e){return xc(e)===h_},isSuspense:function(e){return xc(e)===x_},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===f_||e===XS||e===m_||e===h_||e===x_||e===$Ke||typeof e=="object"&&e!==null&&(e.$$typeof===y_||e.$$typeof===b_||e.$$typeof===p_||e.$$typeof===g_||e.$$typeof===v_||e.$$typeof===GKe||e.$$typeof===qKe||e.$$typeof===WKe||e.$$typeof===KKe)},typeOf:xc};la(function(e,t){});var l$=la(function(e){e.exports=XKe}),c$={};c$[l$.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c$[l$.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var WF=typeof document<"u";function Nse(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var aP=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||WF===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},sP=function(e,t,r){aP(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);WF||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!WF&&a.length!==0)return a}},YKe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},JKe=/[A-Z]|^ms/g,ZKe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,kse=function(e){return e.charCodeAt(1)===45},u$=function(e){return e!=null&&typeof e!="boolean"},HT=Cse(function(e){return kse(e)?e:e.replace(JKe,"-$&").toLowerCase()}),d$=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(ZKe,function(r,n,a){return gA={name:n,styles:a,next:gA},n})}return YKe[e]===1||kse(e)||typeof t!="number"||t===0?t:t+"px"};function hy(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return gA={name:r.name,styles:r.styles,next:gA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)gA={name:n.name,styles:n.styles,next:gA},n=n.next;var a=r.styles+";";return a}return function(l,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=hy(l,u,d[h])+";";else for(var p in d){var g=d[p];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=p+"{"+u[g]+"}":u$(g)&&(f+=HT(p)+":"+d$(p,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var v=hy(l,u,g);switch(p){case"animation":case"animationName":f+=HT(p)+":"+v+";";break;default:f+=p+"{"+v+"}"}}else for(var b=0;b<g.length;b++)u$(g[b])&&(f+=HT(p)+":"+d$(p,g[b])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=gA,i=r(e);return gA=s,hy(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var gA,A$=/label:\s*([^\s;\n{]+)\s*(;|$)/g,u4=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";gA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=hy(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=hy(r,t,e[i]),n&&(a+=s[i]);A$.lastIndex=0;for(var o,l="";(o=A$.exec(a))!==null;)l+="-"+o[1];var u=function(d){for(var f,h=0,p=0,g=d.length;g>=4;++p,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(p+2))<<16;case 2:h^=(255&d.charCodeAt(p+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(p)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+l;return{name:u,styles:a,next:gA}},eGe=typeof document<"u",tGe=function(e){return e()},Bse=!!I.useInsertionEffect&&I.useInsertionEffect,Tse=eGe&&Bse||tGe,f$=Bse||I.useLayoutEffect,Jv=typeof document<"u",iP={}.hasOwnProperty,YS=I.createContext(typeof HTMLElement<"u"?Sse({key:"css"}):null);YS.Provider;var d4=function(e){return I.forwardRef(function(t,r){var n=I.useContext(YS);return e(t,n,r)})};Jv||(d4=function(e){return function(t){var r=I.useContext(YS);return r===null?(r=Sse({key:"css"}),I.createElement(YS.Provider,{value:r},e(t,r))):e(t,r)}});var oP=I.createContext({}),XF="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",rGe=function(e,t){var r={};for(var n in t)iP.call(t,n)&&(r[n]=t[n]);return r[XF]=e,r},nGe=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;aP(t,r,n);var a=Tse(function(){return sP(t,r,n)});if(!Jv&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return I.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},aGe=d4(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[XF],s=[n],i="";typeof e.className=="string"?i=Nse(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=u4(s,void 0,I.useContext(oP));i+=t.key+"-"+o.name;var l={};for(var u in e)!iP.call(e,u)||u==="css"||u===XF||(l[u]=e[u]);return l.ref=r,l.className=i,I.createElement(I.Fragment,null,I.createElement(nGe,{cache:t,serialized:o,isStringTag:typeof a=="string"}),I.createElement(a,l))});la(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var kr=function(e,t){var r=arguments;if(t==null||!iP.call(t,"css"))return I.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=aGe,a[1]=rGe(e,t);for(var s=2;s<n;s++)a[s]=r[s];return I.createElement.apply(null,a)};d4(function(e,t){var r=e.styles,n=u4([r],void 0,I.useContext(oP));if(!Jv){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var l=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,l);return l?null:I.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=I.useRef();return f$(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(p=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,p],function(){h.flush()}},[t]),f$(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&sP(t,n.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function lP(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u4(t)}var sGe=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function iGe(e,t,r){var n=[],a=Nse(e,n,r);return n.length<2?r:a+t(n)}var oGe=function(e){var t,r=e.cache,n=e.serializedArr,a=Tse(function(){for(var s="",i=0;i<n.length;i++){var o=sP(r,n[i],!1);Jv||o===void 0||(s+=o)}if(!Jv)return s});return Jv||a.length===0?null:I.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};d4(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=u4(o,t.registered);return r.push(u),aP(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return iGe(t.registered,n,sGe(o))},theme:I.useContext(oP)},s=e.children(a);return I.createElement(I.Fragment,null,I.createElement(oGe,{cache:t,serializedArr:r}),s)});function Hi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,l,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(f)throw i}}return u}}(e,t)||vse(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vA(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var l,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)l=f[u],o.indexOf(l)>=0||(d[l]=i[l]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vf(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ise(e){return Vf(e).getComputedStyle(e)}const xC=Math.round;function jse(e){return Ose(e)?(e.nodeName||"").toLowerCase():""}let bC;function Fse(e){return e instanceof Vf(e).HTMLElement}function w_(e){return e instanceof Vf(e).Element}function Ose(e){return e instanceof Vf(e).Node}function h$(e){return typeof ShadowRoot>"u"?!1:e instanceof Vf(e).ShadowRoot||e instanceof ShadowRoot}function Dse(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Ise(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function lGe(){return/^((?!chrome|android).)*safari/i.test(function(){if(bC)return bC;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(bC=e.brands.map(t=>t.brand+"/"+t.version).join(" "),bC):navigator.userAgent}())}function Rse(e){return w_(e)?e:e.contextElement}const Pse={x:1,y:1};function m$(e){const t=Rse(e);if(!Fse(t))return Pse;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(l){const u=Ise(l);let d=parseFloat(u.width),f=parseFloat(u.height);const h=l.offsetWidth,p=l.offsetHeight,g=xC(d)!==h||xC(f)!==p;return g&&(d=h,f=p),{width:d,height:f,fallback:g}}(t);let i=(s?xC(r.width):r.width)/n,o=(s?xC(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function p$(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=Rse(e);let l=Pse;t&&(l=m$(e));const u=o?Vf(o):window,d=lGe()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/l.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/l.y,p=i.width/l.x,g=i.height/l.y;if(o){const v=Vf(o),b=n;let y=v.frameElement;for(;y&&n&&b!==v;){const _=m$(y),S=y.getBoundingClientRect(),k=getComputedStyle(y);S.x+=(y.clientLeft+parseFloat(k.paddingLeft))*_.x,S.y+=(y.clientTop+parseFloat(k.paddingTop))*_.y,f*=_.x,h*=_.y,p*=_.x,g*=_.y,f+=S.x,h+=S.y,y=Vf(y).frameElement}}return{width:p,height:g,top:h,right:f+p,bottom:h+g,left:f,x:f,y:h}}function cGe(e){if(jse(e)==="html")return e;const t=e.assignedSlot||e.parentNode||h$(e)&&e.host||function(r){return((Ose(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return h$(t)?t.host:t}function Lse(e){const t=cGe(e);return function(r){return["html","body","#document"].includes(jse(r))}(t)?t.ownerDocument.body:Fse(t)&&Dse(t)?t:Lse(t)}function E_(e,t){var r;t===void 0&&(t=[]);const n=Lse(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=Vf(n);return a?t.concat(s,s.visualViewport||[],Dse(n)?n:[]):t.concat(n,E_(n))}var YF=typeof document<"u"?I.useLayoutEffect:I.useEffect,uGe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],JS=function(){};function dGe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function AGe(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(dGe(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var g$=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Cp(e)==="object"&&e!==null?[e]:[];var t},v$=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,xr({},vA(e,uGe))},bs=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function A4(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Mse(e){return A4(e)?window.pageYOffset:e.scrollTop}function ZS(e,t){A4(e)?window.scrollTo(0,t):e.scrollTop=t}function fGe(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function yC(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:JS,a=Mse(e),s=t-a,i=10,o=0;function l(){var u=fGe(o+=i,a,s,r);ZS(e,u),o<r?window.requestAnimationFrame(l):n(e)}l()}function x$(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?ZS(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&ZS(e,Math.max(t.offsetTop-a,0))}function b$(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Use=!1,hGe={get passive(){return Use=!0}},wC=typeof window<"u"?window:{};wC.addEventListener&&wC.removeEventListener&&(wC.addEventListener("p",JS,hGe),wC.removeEventListener("p",JS,!1));var mGe=Use;function pGe(e){return e!=null}function EC(e,t,r){return e?t:r}var gGe=["children","innerProps"],vGe=["children","innerProps"];function xGe(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,l=function(X){var K=getComputedStyle(X),Z=K.position==="absolute",H=/(auto|scroll)/;if(K.position==="fixed")return document.documentElement;for(var V=X;V=V.parentElement;)if(K=getComputedStyle(V),(!Z||K.position!=="static")&&H.test(K.overflow+K.overflowY+K.overflowX))return V;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=l.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,g=h.height,v=h.top,b=r.offsetParent.getBoundingClientRect().top,y=i||A4(d=l)?window.innerHeight:d.clientHeight,_=Mse(l),S=parseInt(getComputedStyle(r).marginBottom,10),k=parseInt(getComputedStyle(r).marginTop,10),B=b-k,F=y-v,w=B+_,C=f-_-v,N=p-y+_+S,R=_+v-k,O=160;switch(a){case"auto":case"bottom":if(F>=g)return{placement:"bottom",maxHeight:t};if(C>=g&&!i)return s&&yC(l,N,O),{placement:"bottom",maxHeight:t};if(!i&&C>=n||i&&F>=n)return s&&yC(l,N,O),{placement:"bottom",maxHeight:i?F-S:C-S};if(a==="auto"||i){var j=t,U=i?B:w;return U>=n&&(j=Math.min(U-S-o,t)),{placement:"top",maxHeight:j}}if(a==="bottom")return s&&ZS(l,N),{placement:"bottom",maxHeight:t};break;case"top":if(B>=g)return{placement:"top",maxHeight:t};if(w>=g&&!i)return s&&yC(l,R,O),{placement:"top",maxHeight:t};if(!i&&w>=n||i&&B>=n){var P=t;return(!i&&w>=n||i&&B>=n)&&(P=i?B-k:w-k),s&&yC(l,R,O),{placement:"top",maxHeight:P}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var y$,Qse=function(e){return e==="auto"?"bottom":e},Hse=I.createContext(null),bGe=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,l=(I.useContext(Hse)||{}).setPortalPlacement,u=I.useRef(null),d=Hi(I.useState(n),2),f=d[0],h=d[1],p=Hi(I.useState(null),2),g=p[0],v=p[1],b=o.spacing.controlHeight;return YF(function(){var y=u.current;if(y){var _=s==="fixed",S=xGe({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!_,isFixedPosition:_,controlHeight:b});h(S.maxHeight),v(S.placement),l==null||l(S.placement)}},[n,a,s,i,r,l,b]),t({ref:u,placerProps:xr(xr({},e),{},{placement:g||Qse(a),maxHeight:f})})},yGe=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return kr("div",Or({},bs(e,"menu",{menu:!0}),{ref:r},n),t)},Vse=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return xr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},wGe=Vse,EGe=Vse,CGe=["size"],_Ge=["innerProps","isRtl","size"],VT,zT,SGe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},zse=function(e){var t=e.size,r=vA(e,CGe);return kr("svg",Or({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:SGe},r))},$T=function(e){return kr(zse,Or({size:20},e),kr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},w$=function(e){return kr(zse,Or({size:20},e),kr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},$se=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return xr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},NGe=$se,kGe=$se,BGe=function(){var e=lP.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(y$||(VT=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],zT||(zT=VT.slice(0)),y$=Object.freeze(Object.defineProperties(VT,{raw:{value:Object.freeze(zT)}})))),KT=function(e){var t=e.delay,r=e.offset;return kr("span",{css:lP({animation:"".concat(BGe," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},TGe=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return kr("div",Or({ref:a},bs(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},IGe=["data"],jGe=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,l=e.label,u=e.theme,d=e.selectProps;return kr("div",Or({},bs(e,"group",{group:!0}),o),kr(s,Or({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),l),kr("div",null,t))},FGe=["innerRef","isDisabled","isHidden","inputClassName"],Kse={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},OGe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":xr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Kse)},DGe=function(e){return xr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Kse)},E$=function(e){var t=e.children,r=e.innerProps;return kr("div",r,t)},RGe=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,l=r.Container,u=r.Label,d=r.Remove;return kr(l,{data:n,innerProps:xr(xr({},bs(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},kr(u,{data:n,innerProps:xr({},bs(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),kr(d,{data:n,innerProps:xr(xr({},bs(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},PGe={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},bs(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||kr($T,null))},Control:TGe,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},bs(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||kr(w$,null))},DownChevron:w$,CrossIcon:$T,Group:jGe,GroupHeading:function(e){var t=v$(e);t.data;var r=vA(t,IGe);return kr("div",Or({},bs(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},bs(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return kr("span",Or({},t,bs(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=v$(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,l=vA(n,FGe);return kr("div",Or({},bs(e,"input",{"input-container":!0}),{"data-value":r||""}),kr("input",Or({className:t({input:!0},o),ref:a,style:DGe(i),disabled:s},l)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=vA(e,_Ge);return kr("div",Or({},bs(xr(xr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),kr(KT,{delay:0,offset:r}),kr(KT,{delay:160,offset:!0}),kr(KT,{delay:320,offset:!r}))},Menu:yGe,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return kr("div",Or({},bs(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=I.useRef(null),l=I.useRef(null),u=Hi(I.useState(Qse(s)),2),d=u[0],f=u[1],h=I.useMemo(function(){return{setPortalPlacement:f}},[]),p=Hi(I.useState(null),2),g=p[0],v=p[1],b=I.useCallback(function(){if(n){var k=function(w){var C=w.getBoundingClientRect();return{bottom:C.bottom,height:C.height,left:C.left,right:C.right,top:C.top,width:C.width}}(n),B=i==="fixed"?0:window.pageYOffset,F=k[d]+B;F===(g==null?void 0:g.offset)&&k.left===(g==null?void 0:g.rect.left)&&k.width===(g==null?void 0:g.rect.width)||v({offset:F,rect:k})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);YF(function(){b()},[b]);var y=I.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),n&&o.current&&(l.current=function(k,B,F,w){w===void 0&&(w={});const{ancestorScroll:C=!0,ancestorResize:N=!0,elementResize:R=!0,animationFrame:O=!1}=w,j=C&&!O,U=j||N?[...w_(k)?E_(k):k.contextElement?E_(k.contextElement):[],...E_(B)]:[];U.forEach(Z=>{j&&Z.addEventListener("scroll",F,{passive:!0}),N&&Z.addEventListener("resize",F)});let P,X=null;if(R){let Z=!0;X=new ResizeObserver(()=>{Z||F(),Z=!1}),w_(k)&&!O&&X.observe(k),w_(k)||!k.contextElement||O||X.observe(k.contextElement),X.observe(B)}let K=O?p$(k):null;return O&&function Z(){const H=p$(k);!K||H.x===K.x&&H.y===K.y&&H.width===K.width&&H.height===K.height||F(),K=H,P=requestAnimationFrame(Z)}(),F(),()=>{var Z;U.forEach(H=>{j&&H.removeEventListener("scroll",F),N&&H.removeEventListener("resize",F)}),(Z=X)==null||Z.disconnect(),X=null,O&&cancelAnimationFrame(P)}}(n,o.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);YF(function(){y()},[y]);var _=I.useCallback(function(k){o.current=k,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var S=kr("div",Or({ref:_},bs(xr(xr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return kr(Hse.Provider,{value:h},t?fne.createPortal(S,t):S)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=vA(e,vGe);return kr("div",Or({},bs(xr(xr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=vA(e,gGe);return kr("div",Or({},bs(xr(xr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:RGe,MultiValueContainer:E$,MultiValueLabel:E$,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({role:"button"},r),t||kr($T,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return kr("div",Or({},bs(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return kr("div",Or({},bs(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return kr("div",Or({},bs(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return kr("div",Or({},bs(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return kr("div",Or({},bs(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},C$=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function LGe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||C$(n)&&C$(a)))return!1;var n,a;return!0}for(var MGe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},_$=function(e){return kr("span",Or({css:MGe},e))},UGe={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,l=e.isSelected,u=e.isAppleDevice,d=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",h="".concat(l?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},QGe=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,l=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,h=o.inputValue,p=o.isMulti,g=o.isOptionDisabled,v=o.isSearchable,b=o.menuIsOpen,y=o.options,_=o.screenReaderStatus,S=o.tabSelectsValue,k=o.isLoading,B=o["aria-label"],F=o["aria-live"],w=I.useMemo(function(){return xr(xr({},UGe),d||{})},[d]),C=I.useMemo(function(){var P,X="";if(t&&w.onChange){var K=t.option,Z=t.options,H=t.removedValue,V=t.removedValues,q=t.value,ne=H||K||(P=q,Array.isArray(P)?null:P),L=ne?f(ne):"",W=Z||V||void 0,J=W?W.map(f):[],te=xr({isDisabled:ne&&g(ne,i),label:L,labels:J},t);X=w.onChange(te)}return X},[t,w,g,i,f]),N=I.useMemo(function(){var P="",X=r||n,K=!!(r&&i&&i.includes(r));if(X&&w.onFocus){var Z={focused:X,label:f(X),isDisabled:g(X,i),isSelected:K,options:a,context:X===r?"menu":"value",selectValue:i,isAppleDevice:u};P=w.onFocus(Z)}return P},[r,n,f,g,w,a,i,u]),R=I.useMemo(function(){var P="";if(b&&y.length&&!k&&w.onFilter){var X=_({count:a.length});P=w.onFilter({inputValue:h,resultsMessage:X})}return P},[a,h,b,w,y,_,k]),O=(t==null?void 0:t.action)==="initial-input-focus",j=I.useMemo(function(){var P="";if(w.guidance){var X=n?"value":b?"menu":"input";P=w.guidance({"aria-label":B,context:X,isDisabled:r&&g(r,i),isMulti:p,isSearchable:v,tabSelectsValue:S,isInitialFocus:O})}return P},[B,r,n,p,g,v,b,w,i,S,O]),U=kr(I.Fragment,null,kr("span",{id:"aria-selection"},C),kr("span",{id:"aria-focused"},N),kr("span",{id:"aria-results"},R),kr("span",{id:"aria-guidance"},j));return kr(I.Fragment,null,kr(_$,{id:l},O&&U),kr(_$,{"aria-live":F,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!O&&U))},GT=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],HGe=new RegExp("["+GT.map(function(e){return e.letters}).join("")+"]","g"),Gse={},qT=0;qT<GT.length;qT++)for(var WT=GT[qT],XT=0;XT<WT.letters.length;XT++)Gse[WT.letters[XT]]=WT.base;var qse=function(e){return e.replace(HGe,function(t){return Gse[t]})},VGe=function(e,t){t===void 0&&(t=LGe);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(qse),S$=function(e){return e.replace(/^\s+|\s+$/g,"")},zGe=function(e){return"".concat(e.label," ").concat(e.value)},$Ge=["innerRef"];function KGe(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(l){var u=Hi(l,1)[0];return!s.includes(u)});return o.reduce(function(l,u){var d=Hi(u,2),f=d[0],h=d[1];return l[f]=h,l},{})}(vA(e,$Ge),"onExited","in","enter","exit","appear");return kr("input",Or({ref:t},r,{css:lP({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var N$=["boxSizing","height","overflow","paddingRight","position"],k$={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function B$(e){e.preventDefault()}function T$(e){e.stopPropagation()}function I$(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function j$(){return"ontouchstart"in window||navigator.maxTouchPoints}var F$=!(typeof window>"u"||!window.document||!window.document.createElement),mb=0,iv={capture:!1,passive:!1},GGe=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},qGe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function WGe(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,l=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=I.useRef(!1),p=I.useRef(!1),g=I.useRef(0),v=I.useRef(null),b=I.useCallback(function(F,w){if(v.current!==null){var C=v.current,N=C.scrollTop,R=C.scrollHeight,O=C.clientHeight,j=v.current,U=w>0,P=R-O-N,X=!1;P>w&&h.current&&(u&&u(F),h.current=!1),U&&p.current&&(f&&f(F),p.current=!1),U&&w>P?(l&&!h.current&&l(F),j.scrollTop=R,X=!0,h.current=!0):!U&&-w>N&&(d&&!p.current&&d(F),j.scrollTop=0,X=!0,p.current=!0),X&&function(K){K.cancelable&&K.preventDefault(),K.stopPropagation()}(F)}},[l,u,d,f]),y=I.useCallback(function(F){b(F,F.deltaY)},[b]),_=I.useCallback(function(F){g.current=F.changedTouches[0].clientY},[]),S=I.useCallback(function(F){var w=g.current-F.changedTouches[0].clientY;b(F,w)},[b]),k=I.useCallback(function(F){if(F){var w=!!mGe&&{passive:!1};F.addEventListener("wheel",y,w),F.addEventListener("touchstart",_,w),F.addEventListener("touchmove",S,w)}},[S,_,y]),B=I.useCallback(function(F){F&&(F.removeEventListener("wheel",y,!1),F.removeEventListener("touchstart",_,!1),F.removeEventListener("touchmove",S,!1))},[S,_,y]);return I.useEffect(function(){if(o){var F=v.current;return k(F),function(){B(F)}}},[o,k,B]),function(F){v.current=F}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,l=i.accountForScrollbars,u=l===void 0||l,d=I.useRef({}),f=I.useRef(null),h=I.useCallback(function(g){if(F$){var v=document.body,b=v&&v.style;if(u&&N$.forEach(function(k){var B=b&&b[k];d.current[k]=B}),u&&mb<1){var y=parseInt(d.current.paddingRight,10)||0,_=document.body?document.body.clientWidth:0,S=window.innerWidth-_+y||0;Object.keys(k$).forEach(function(k){var B=k$[k];b&&(b[k]=B)}),b&&(b.paddingRight="".concat(S,"px"))}v&&j$()&&(v.addEventListener("touchmove",B$,iv),g&&(g.addEventListener("touchstart",I$,iv),g.addEventListener("touchmove",T$,iv))),mb+=1}},[u]),p=I.useCallback(function(g){if(F$){var v=document.body,b=v&&v.style;mb=Math.max(mb-1,0),u&&mb<1&&N$.forEach(function(y){var _=d.current[y];b&&(b[y]=_)}),v&&j$()&&(v.removeEventListener("touchmove",B$,iv),g&&(g.removeEventListener("touchstart",I$,iv),g.removeEventListener("touchmove",T$,iv)))}},[u]);return I.useEffect(function(){if(o){var g=f.current;return h(g),function(){p(g)}}},[o,h,p]),function(g){f.current=g}}({isEnabled:r});return kr(I.Fragment,null,r&&kr("div",{onClick:GGe,css:qGe}),t(function(i){a(i),s(i)}))}var XGe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},YGe=function(e){var t=e.name,r=e.onFocus;return kr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:XGe,value:"",onChange:function(){}})};function JF(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Wse(){return JF(/^Mac/i)}function JGe(){return JF(/^iPhone/i)||JF(/^iPad/i)||Wse()&&navigator.maxTouchPoints>1}var ZGe,eqe={clearIndicator:kGe,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return xr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:NGe,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return xr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return xr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return xr(xr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},OGe),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return xr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:EGe,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return xr((_v(r={label:"menu"},function(l){return l?{bottom:"top",top:"bottom"}[l]:"bottom"}(n),"100%"),_v(r,"position","absolute"),_v(r,"width","100%"),_v(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return xr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return xr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return xr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return xr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:wGe,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return xr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return xr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return xr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return xr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},YT={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},tqe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:b$(),captureMenuScroll:!b$(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=xr({ignoreCase:!0,ignoreAccents:!0,stringify:zGe,trim:!0,matchFrom:"any"},ZGe),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,l=i?S$(t):t,u=i?S$(s(e)):s(e);return n&&(l=l.toLowerCase(),u=u.toLowerCase()),a&&(l=VGe(l),u=qse(u)),o==="start"?u.substr(0,l.length)===l:u.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function O$(e,t,r,n){return{type:"option",data:t,isDisabled:Yse(e,t,r),isSelected:Jse(e,t,r),label:Xse(e,t),value:e5(e,t),index:n}}function CC(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return O$(e,i,t,o)}).filter(function(i){return P$(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=O$(e,r,t,n);return P$(e,s)?s:void 0}).filter(pGe)}function D$(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,tP(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function R$(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,tP(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function P$(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!eie(e)||!s)&&Zse(e,{label:i,value:o,data:a},n)}var JT=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Xse=function(e,t){return e.getOptionLabel(t)},e5=function(e,t){return e.getOptionValue(t)};function Yse(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function Jse(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=e5(e,t);return r.some(function(a){return e5(e,a)===n})}function Zse(e,t,r){return!e.filterOption||e.filterOption(t,r)}var eie=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},rqe=1,tie=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&HF(i,o)})(s,I.Component);var t,r,n,a=BKe(s);function s(i){var o;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=Wse()||JGe(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,h){var p=o.props,g=p.onChange,v=p.name;h.name=v,o.ariaOnChange(f,h),g(f,h)},o.setValue=function(f,h,p){var g=o.props,v=g.closeMenuOnSelect,b=g.isMulti,y=g.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),v&&(o.setState({inputIsHiddenAfterUpdate:!b}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:h,option:p})},o.selectOption=function(f){var h=o.props,p=h.blurInputOnSelect,g=h.isMulti,v=h.name,b=o.state.selectValue,y=g&&o.isOptionSelected(f,b),_=o.isOptionDisabled(f,b);if(y){var S=o.getOptionValue(f);o.setValue(b.filter(function(k){return o.getOptionValue(k)!==S}),"deselect-option",f)}else{if(_)return void o.ariaOnChange(f,{action:"select-option",option:f,name:v});g?o.setValue([].concat(tP(b),[f]),"select-option",f):o.setValue(f,"select-option")}p&&o.blurInput()},o.removeValue=function(f){var h=o.props.isMulti,p=o.state.selectValue,g=o.getOptionValue(f),v=p.filter(function(y){return o.getOptionValue(y)!==g}),b=EC(h,v,v[0]||null);o.onChange(b,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(EC(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,h=o.state.selectValue,p=h[h.length-1],g=h.slice(0,h.length-1),v=EC(f,g,g[0]||null);o.onChange(v,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(f){return JT(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return R$(CC(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return AGe.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(f){return Xse(o.props,f)},o.getOptionValue=function(f){return e5(o.props,f)},o.getStyles=function(f,h){var p=o.props.unstyled,g=eqe[f](h,p);g.boxSizing="border-box";var v=o.props.styles[f];return v?v(g,h):g},o.getClassNames=function(f,h){var p,g;return(p=(g=o.props.classNames)[f])===null||p===void 0?void 0:p.call(g,h)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,xr(xr({},PGe),f.components);var f},o.buildCategorizedOptions=function(){return CC(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return D$(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,h){o.setState({ariaSelection:xr({value:f},h)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var h=o.props,p=h.isMulti,g=h.menuIsOpen;o.focusInput(),g?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&A4(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var h=f.touches,p=h&&h.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var h=f.touches,p=h&&h.item(0);if(p){var g=Math.abs(p.clientX-o.initialTouchX),v=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=g>5||v>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var h=o.props.inputValue,p=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var h=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:h>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return eie(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var h=o.props,p=h.isMulti,g=h.backspaceRemovesValue,v=h.escapeClearsValue,b=h.inputValue,y=h.isClearable,_=h.isDisabled,S=h.menuIsOpen,k=h.onKeyDown,B=h.tabSelectsValue,F=h.openMenuOnFocus,w=o.state,C=w.focusedOption,N=w.focusedValue,R=w.selectValue;if(!(_||typeof k=="function"&&(k(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!p||b)return;o.focusValue("previous");break;case"ArrowRight":if(!p||b)return;o.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(N)o.removeValue(N);else{if(!g)return;p?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!S||!B||!C||F&&o.isOptionSelected(C,R))return;o.selectOption(C);break;case"Enter":if(f.keyCode===229)break;if(S){if(!C||o.isComposing)return;o.selectOption(C);break}return;case"Escape":S?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:b}),o.onMenuClose()):y&&v&&o.clearValue();break;case" ":if(b)return;if(!S){o.openMenu("first");break}if(!C)return;o.selectOption(C);break;case"ArrowUp":S?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":S?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!S)return;o.focusOption("pageup");break;case"PageDown":if(!S)return;o.focusOption("pagedown");break;case"Home":if(!S)return;o.focusOption("first");break;case"End":if(!S)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++rqe),o.state.selectValue=g$(i.value),i.menuIsOpen&&o.state.selectValue.length){var l=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=l,o.state.focusedOption=u[d],o.state.focusedOptionId=JT(l,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&x$(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,l=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!l&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&l&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||l||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(x$(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,l=this.state,u=l.selectValue,d=l.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var p=f.indexOf(u[0]);p>-1&&(h=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,l=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=l.indexOf(u);u||(d=-1);var f=l.length-1,h=-1;if(l.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:l[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,l=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(l);l||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(YT):xr(xr({},YT),this.props.theme):YT}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,l=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,p=this.props,g=p.isMulti,v=p.isRtl,b=p.options;return{clearValue:i,cx:o,getStyles:l,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:v,options:b,selectOption:f,selectProps:p,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,l=i.isMulti;return o===void 0?l:o}},{key:"isOptionDisabled",value:function(i,o){return Yse(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return Jse(this.props,i,o)}},{key:"filterOption",value:function(i,o){return Zse(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:l,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,l=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,p=i.menuIsOpen,g=i.required,v=this.getComponents().Input,b=this.state,y=b.inputIsHidden,_=b.ariaSelection,S=this.commonProps,k=u||this.getElementId("input"),B=xr(xr(xr({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?I.createElement(v,Or({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:k,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},B)):I.createElement(KGe,Or({id:k,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:JS,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:h,value:""},B))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),l=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,h=o.SingleValue,p=o.Placeholder,g=this.commonProps,v=this.props,b=v.controlShouldRenderValue,y=v.isDisabled,_=v.isMulti,S=v.inputValue,k=v.placeholder,B=this.state,F=B.selectValue,w=B.focusedValue,C=B.isFocused;if(!this.hasValue()||!b)return S?null:I.createElement(p,Or({},g,{key:"placeholder",isDisabled:y,isFocused:C,innerProps:{id:this.getElementId("placeholder")}}),k);if(_)return F.map(function(R,O){var j=R===w,U="".concat(i.getOptionLabel(R),"-").concat(i.getOptionValue(R));return I.createElement(l,Or({},g,{components:{Container:u,Label:d,Remove:f},isFocused:j,isDisabled:y,key:U,index:O,removeProps:{onClick:function(){return i.removeValue(R)},onTouchEnd:function(){return i.removeValue(R)},onMouseDown:function(P){P.preventDefault()}},data:R}),i.formatOptionLabel(R,"value"))});if(S)return null;var N=F[0];return I.createElement(h,Or({},g,{data:N,isDisabled:y}),this.formatOptionLabel(N,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(i,Or({},o,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,f=this.state.isFocused;return i&&d?I.createElement(i,Or({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,l=i.IndicatorSeparator;if(!o||!l)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return I.createElement(l,Or({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(i,Or({},o,{innerProps:d,isDisabled:l,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),l=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,h=o.MenuPortal,p=o.LoadingMessage,g=o.NoOptionsMessage,v=o.Option,b=this.commonProps,y=this.state.focusedOption,_=this.props,S=_.captureMenuScroll,k=_.inputValue,B=_.isLoading,F=_.loadingMessage,w=_.minMenuHeight,C=_.maxMenuHeight,N=_.menuIsOpen,R=_.menuPlacement,O=_.menuPosition,j=_.menuPortalTarget,U=_.menuShouldBlockScroll,P=_.menuShouldScrollIntoView,X=_.noOptionsMessage,K=_.onMenuScrollToTop,Z=_.onMenuScrollToBottom;if(!N)return null;var H,V=function(J,te){var ie=J.type,Ae=J.data,oe=J.isDisabled,ce=J.isSelected,ge=J.label,je=J.value,re=y===Ae,Se=oe?void 0:function(){return i.onOptionHover(Ae)},De=oe?void 0:function(){return i.selectOption(Ae)},_e="".concat(i.getElementId("option"),"-").concat(te),he={id:_e,onClick:De,onMouseMove:Se,onMouseOver:Se,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ce};return I.createElement(v,Or({},b,{innerProps:he,data:Ae,isDisabled:oe,isSelected:ce,key:_e,label:ge,type:ie,value:je,isFocused:re,innerRef:re?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(J.data,"menu"))};if(this.hasOptions())H=this.getCategorizedOptions().map(function(J){if(J.type==="group"){var te=J.data,ie=J.options,Ae=J.index,oe="".concat(i.getElementId("group"),"-").concat(Ae),ce="".concat(oe,"-heading");return I.createElement(l,Or({},b,{key:oe,data:te,options:ie,Heading:u,headingProps:{id:ce,data:J.data},label:i.formatGroupLabel(J.data)}),J.options.map(function(ge){return V(ge,"".concat(Ae,"-").concat(ge.index))}))}if(J.type==="option")return V(J,"".concat(J.index))});else if(B){var q=F({inputValue:k});if(q===null)return null;H=I.createElement(p,b,q)}else{var ne=X({inputValue:k});if(ne===null)return null;H=I.createElement(g,b,ne)}var L={minMenuHeight:w,maxMenuHeight:C,menuPlacement:R,menuPosition:O,menuShouldScrollIntoView:P},W=I.createElement(bGe,Or({},b,L),function(J){var te=J.ref,ie=J.placerProps,Ae=ie.placement,oe=ie.maxHeight;return I.createElement(d,Or({},b,L,{innerRef:te,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:B,placement:Ae}),I.createElement(WGe,{captureEnabled:S,onTopArrive:K,onBottomArrive:Z,lockEnabled:U},function(ce){return I.createElement(f,Or({},b,{innerRef:function(ge){i.getMenuListRef(ge),ce(ge)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:B,maxHeight:oe,focusedOption:y}),H)}))});return j||O==="fixed"?I.createElement(h,Or({},b,{appendTo:j,controlElement:this.controlRef,menuPlacement:R,menuPosition:O}),W):W}},{key:"renderFormField",value:function(){var i=this,o=this.props,l=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,h=o.required,p=this.state.selectValue;if(h&&!this.hasValue()&&!u)return I.createElement(YGe,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(l){var g=p.map(function(y){return i.getOptionValue(y)}).join(l);return I.createElement("input",{name:f,type:"hidden",value:g})}var v=p.length>0?p.map(function(y,_){return I.createElement("input",{key:"i-".concat(_),name:f,type:"hidden",value:i.getOptionValue(y)})}):I.createElement("input",{name:f,type:"hidden",value:""});return I.createElement("div",null,v)}var b=p[0]?this.getOptionValue(p[0]):"";return I.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,l=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,h=o.selectValue,p=this.getFocusableOptions();return I.createElement(QGe,Or({},i,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,l=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,p=f.id,g=f.isDisabled,v=f.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return I.createElement(u,Or({},y,{className:h,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),I.createElement(o,Or({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:v}),I.createElement(d,Or({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),I.createElement(l,Or({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var l=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,h=o.isFocused,p=o.prevWasFocused,g=o.instancePrefix,v=i.options,b=i.value,y=i.menuIsOpen,_=i.inputValue,S=i.isMulti,k=g$(b),B={};if(l&&(b!==l.value||v!==l.options||y!==l.menuIsOpen||_!==l.inputValue)){var F=y?function(U,P){return D$(CC(U,P))}(i,k):[],w=y?R$(CC(i,k),"".concat(g,"-option")):[],C=u?function(U,P){var X=U.focusedValue,K=U.selectValue.indexOf(X);if(K>-1){if(P.indexOf(X)>-1)return X;if(K<P.length)return P[K]}return null}(o,k):null,N=function(U,P){var X=U.focusedOption;return X&&P.indexOf(X)>-1?X:P[0]}(o,F);B={selectValue:k,focusedOption:N,focusedOptionId:JT(w,N),focusableOptionsWithIds:w,focusedValue:C,clearFocusValueOnUpdate:!1}}var R=d!=null&&i!==l?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},O=f,j=h&&p;return h&&!j&&(O={value:EC(S,k,k[0]||null),options:k,action:"initial-input-focus"},j=!p),(f==null?void 0:f.action)==="initial-input-focus"&&(O=null),xr(xr(xr({},B),R),{},{prevProps:i,ariaSelection:O,prevWasFocused:j})}}],r&&Jz(t.prototype,r),n&&Jz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();tie.defaultProps=tqe;var nqe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],aqe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],cP=la(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),sqe=la(function(e){var t=cP.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),rie=la(function(e){var t=cP.default;e.exports=function(r){var n=sqe(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),iqe=la(function(e){e.exports=function(t,r,n){return(r=rie(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){iqe(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),la(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),la(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,rie(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var oqe=la(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&oqe(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var L$=la(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),lqe=la(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),cqe=la(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),uqe=la(function(e){var t=cP.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cqe(r)},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t){var r=lqe();return function(){var n,a=L$(t);if(r){var s=L$(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return uqe(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var ZF=la(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),dqe=la(function(e){e.exports=function(t){if(Array.isArray(t))return ZF(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Aqe=la(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),nie=la(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return ZF(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZF(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),fqe=la(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t){return dqe(t)||Aqe(t)||nie(t)||fqe()},e.exports.__esModule=!0,e.exports.default=e.exports});var hqe=la(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),mqe=la(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,l=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(l.push(a.value),l.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}},e.exports.__esModule=!0,e.exports.default=e.exports}),pqe=la(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t,r){return hqe(t)||mqe(t,r)||nie(t,r)||pqe()},e.exports.__esModule=!0,e.exports.default=e.exports});var gqe=la(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});la(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=gqe(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),la(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var vqe=I.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,l=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,p=a.filterOption,g=p===void 0?null:p,v=vA(a,aqe),b=v.inputValue,y=I.useRef(void 0),_=I.useRef(!1),S=Hi(I.useState(Array.isArray(i)?i:void 0),2),k=S[0],B=S[1],F=Hi(I.useState(b!==void 0?b:""),2),w=F[0],C=F[1],N=Hi(I.useState(i===!0),2),R=N[0],O=N[1],j=Hi(I.useState(void 0),2),U=j[0],P=j[1],X=Hi(I.useState([]),2),K=X[0],Z=X[1],H=Hi(I.useState(!1),2),V=H[0],q=H[1],ne=Hi(I.useState({}),2),L=ne[0],W=ne[1],J=Hi(I.useState(void 0),2),te=J[0],ie=J[1],Ae=Hi(I.useState(void 0),2),oe=Ae[0],ce=Ae[1];l!==oe&&(W({}),ce(l)),i!==te&&(B(Array.isArray(i)?i:void 0),ie(i)),I.useEffect(function(){return _.current=!0,function(){_.current=!1}},[]);var ge=I.useCallback(function(Se,De){if(!u)return De();var _e=u(Se,De);_e&&typeof _e.then=="function"&&_e.then(De,function(){return De()})},[u]);I.useEffect(function(){i===!0&&ge(w,function(Se){_.current&&(B(Se||[]),O(!!y.current))})},[]);var je=I.useCallback(function(Se,De){var _e=function(Ie,He,Xe){if(Xe){var ye=Xe(Ie,He);if(typeof ye=="string")return ye}return Ie}(Se,De,h);if(!_e)return y.current=void 0,C(""),P(""),Z([]),O(!1),void q(!1);if(l&&L[_e])C(_e),P(_e),Z(L[_e]),O(!1),q(!1);else{var he=y.current={};C(_e),O(!0),q(!U),ge(_e,function(Ie){_&&he===y.current&&(y.current=void 0,O(!1),P(_e),Z(Ie||[]),q(!1),W(Ie?xr(xr({},L),{},_v({},_e,Ie)):L))})}},[l,ge,U,L,h]),re=V?[]:w&&U?K:k||[];return xr(xr({},v),{},{options:re,isLoading:R||f,onInputChange:je,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,l=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,p=a.onChange,g=a.onInputChange,v=a.onMenuClose,b=a.onMenuOpen,y=a.value,_=vA(a,nqe),S=Hi(I.useState(f!==void 0?f:i),2),k=S[0],B=S[1],F=Hi(I.useState(h!==void 0?h:l),2),w=F[0],C=F[1],N=Hi(I.useState(y!==void 0?y:d),2),R=N[0],O=N[1],j=I.useCallback(function(V,q){typeof p=="function"&&p(V,q),O(V)},[p]),U=I.useCallback(function(V,q){var ne;typeof g=="function"&&(ne=g(V,q)),B(ne!==void 0?ne:V)},[g]),P=I.useCallback(function(){typeof b=="function"&&b(),C(!0)},[b]),X=I.useCallback(function(){typeof v=="function"&&v(),C(!1)},[v]),K=f!==void 0?f:k,Z=h!==void 0?h:w,H=y!==void 0?y:R;return xr(xr({},_),{},{inputValue:K,menuIsOpen:Z,onChange:j,onInputChange:U,onMenuClose:X,onMenuOpen:P,value:H})}(r);return I.createElement(tie,Or({ref:t},n))}),xqe=vqe,bqe=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},Sv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Sv||(Sv={}));class ep{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:l,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=l,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=p,ep.instance){if(!bqe(this.options,ep.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(ep.instance.options)}`);return ep.instance}ep.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Sv.FAILURE:this.done?Sv.SUCCESS:this.loading?Sv.LOADING:Sv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var yqe=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(l,u){var d={};for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&u.indexOf(f)<0&&(d[f]=l[f]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(l);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(l,f[h])&&(d[f[h]]=l[f[h]])}return d}(e,["bounds","location"]),o=Ep({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var l=0,u=0,d=arguments.length;u<d;u++)l+=arguments[u].length;var f=Array(l),h=0;for(u=0;u<d;u++)for(var p=arguments[u],g=0,v=p.length;g<v;g++,h++)f[h]=p[g];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},wqe=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(l,u,d){d===void 0&&(d={});var f=d.maxWait,h=I.useRef(null),p=I.useRef([]),g=d.leading,v=d.trailing===void 0||d.trailing,b=I.useRef(!1),y=I.useRef(null),_=I.useRef(!1),S=I.useRef(l);S.current=l;var k=I.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,p.current=[],y.current=null,b.current=!1},[]);I.useEffect(function(){return _.current=!1,function(){_.current=!0}},[]);var B=I.useCallback(function(){for(var w=[],C=0;C<arguments.length;C++)w[C]=arguments[C];p.current=w,clearTimeout(y.current),b.current&&(b.current=!1),y.current||!g||b.current||(S.current.apply(S,w),b.current=!0),y.current=setTimeout(function(){var N=!0;g&&b.current&&(N=!1),k(),!_.current&&v&&N&&S.current.apply(S,w)},u),f&&!h.current&&v&&(h.current=setTimeout(function(){var N=p.current;k(),_.current||S.current.apply(null,N)},f))},[f,u,k,g,v]),F=I.useCallback(function(){y.current&&(S.current.apply(null,p.current),k())},[k]);return[B,k,F]}(function(l,u){if(!a)return u([]);if(l.length<n)return u([]);var d=Ep({},t);a.getPlacePredictions(yqe(d,l,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},M$=I.forwardRef(function(e,t){var r,n,a,s,i,o,l,u,d=function(v){var b=v.apiKey,y=v.apiOptions,_=v.onLoadFailed,S=I.useState(void 0),k=S[0],B=S[1],F=I.useState(void 0),w=F[0],C=F[1],N=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");B(new window.google.maps.places.AutocompleteService),C(new google.maps.places.AutocompleteSessionToken)};return I.useEffect(function(){b?SKe(void 0,void 0,void 0,function(){var R;return NKe(this,function(O){switch(O.label){case 0:if(!b)return[2];O.label=1;case 1:return O.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new ep(Ep({apiKey:b},Ep({libraries:["places"]},y))).load()];case 2:O.sent(),O.label=3;case 3:return N(),[3,5];case 4:return R=O.sent(),typeof _=="function"&&_(R),[3,5];case 5:return[2]}})}):N()},[]),{placesService:k,sessionToken:w,setSessionToken:C}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,p=d.setSessionToken,g=wqe({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:h,withSessionToken:(l=e.withSessionToken)!==null&&l!==void 0&&l});return I.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[h]),lt.createElement(xqe,Ep({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(v){return v.value.place_id}}))});function aie(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=aie(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function En(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=aie(e))&&(n&&(n+=" "),n+=t);return n}var ZT={},e3={},U$;function Eqe(){return U$||(U$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(e3)),e3}var t3={},Q$;function sie(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(t3)),t3}var r3={},H$;function iie(){return H$||(H$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(r3)),r3}var n3={},V$;function uP(){return V$||(V$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:l?u==='"'||u==="'"?o=u:u==="]"?(l=!1,n.push(i),i=""):i+=u:u==="["?(l=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(n3)),n3}var z$;function dP(){return z$||(z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Eqe(),r=sie(),n=iie(),a=uP();function s(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?r.isDeepKey(l)?s(o,a.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return i(o,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function i(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=s}(ZT)),ZT}var a3,$$;function Cqe(){return $$||($$=1,a3=dP().get),a3}var _qe=Cqe();const am=bl(_qe);var s3={exports:{}},aa={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K$;function Sqe(){if(K$)return aa;K$=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,_=e?Symbol.for("react.scope"):60119;function S(B){if(typeof B=="object"&&B!==null){var F=B.$$typeof;switch(F){case t:switch(B=B.type,B){case l:case u:case n:case s:case a:case f:return B;default:switch(B=B&&B.$$typeof,B){case o:case d:case g:case p:case i:return B;default:return F}}case r:return F}}}function k(B){return S(B)===u}return aa.AsyncMode=l,aa.ConcurrentMode=u,aa.ContextConsumer=o,aa.ContextProvider=i,aa.Element=t,aa.ForwardRef=d,aa.Fragment=n,aa.Lazy=g,aa.Memo=p,aa.Portal=r,aa.Profiler=s,aa.StrictMode=a,aa.Suspense=f,aa.isAsyncMode=function(B){return k(B)||S(B)===l},aa.isConcurrentMode=k,aa.isContextConsumer=function(B){return S(B)===o},aa.isContextProvider=function(B){return S(B)===i},aa.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===t},aa.isForwardRef=function(B){return S(B)===d},aa.isFragment=function(B){return S(B)===n},aa.isLazy=function(B){return S(B)===g},aa.isMemo=function(B){return S(B)===p},aa.isPortal=function(B){return S(B)===r},aa.isProfiler=function(B){return S(B)===s},aa.isStrictMode=function(B){return S(B)===a},aa.isSuspense=function(B){return S(B)===f},aa.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===n||B===u||B===s||B===a||B===f||B===h||typeof B=="object"&&B!==null&&(B.$$typeof===g||B.$$typeof===p||B.$$typeof===i||B.$$typeof===o||B.$$typeof===d||B.$$typeof===b||B.$$typeof===y||B.$$typeof===_||B.$$typeof===v)},aa.typeOf=S,aa}var G$;function Nqe(){return G$||(G$=1,s3.exports=Sqe()),s3.exports}var kqe=Nqe(),Xi=e=>e===0?0:e>0?1:-1,Dc=e=>typeof e=="number"&&e!=+e,op=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!Dc(e),MA=e=>ur(e)||typeof e=="string",Bqe=0,iw=e=>{var t=++Bqe;return"".concat(e||"").concat(t)},xl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var s;if(op(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return Dc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},oie=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},Nv=(e,t)=>ur(e)&&ur(t)?r=>e+r*(t-e):()=>t;function ov(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function Tqe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):am(n,t))===r)}var ks=e=>e===null||typeof e>"u",Yw=e=>ks(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Iqe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function AP(e){if(typeof e!="string")return!1;var t=Iqe;return t.includes(e)}var jqe=["viewBox","children"],q$=["points","pathLength"],i3={svg:jqe,polygon:q$,polyline:q$},fP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(I.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{AP(a)&&(n[a]=s=>r[a](r,s))}),n},Fqe=(e,t,r)=>n=>(e(t,r,n),null),Wx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];AP(a)&&typeof s=="function"&&(n||(n={}),n[a]=Fqe(s,t,r))}),n},Oqe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function lie(e){if(typeof e!="string")return!1;var t=Oqe;return t.includes(e)}function rl(e){var t=Object.entries(e).filter(r=>{var[n]=r;return lie(n)});return Object.fromEntries(t)}var W$=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",X$=null,o3=null,cie=e=>{if(e===X$&&Array.isArray(o3))return o3;var t=[];return I.Children.forEach(e,r=>{ks(r)||(kqe.isFragment(r)?t=t.concat(cie(r.props.children)):t.push(r))}),o3=t,X$=e,t};function Jw(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>W$(a)):n=[W$(t)],cie(e).forEach(a=>{var s=am(a,"type.displayName")||am(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var Dqe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(i3==null?void 0:i3[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||lie(t)),l=!!r&&AP(t);return i||o||l},Wn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(I.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;Dqe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},Rqe=["children","width","height","viewBox","className","style","title","desc"];function e6(){return e6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e6.apply(null,arguments)}function Pqe(e,t){if(e==null)return{};var r,n,a=Lqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uie=I.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:l,desc:u}=e,d=Pqe(e,Rqe),f=s||{width:n,height:a,x:0,y:0},h=En("recharts-surface",i);return I.createElement("svg",e6({},Wn(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),I.createElement("title",null,l),I.createElement("desc",null,u),r)}),Mqe=["children","className"];function t6(){return t6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t6.apply(null,arguments)}function Uqe(e,t){if(e==null)return{};var r,n,a=Qqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cs=I.forwardRef((e,t)=>{var{children:r,className:n}=e,a=Uqe(e,Mqe),s=En("recharts-layer",n);return I.createElement("g",t6({className:s},Wn(a,!0),{ref:t}),r)}),Hqe=I.createContext(null),Vqe=["type","size","sizeType"];function r6(){return r6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r6.apply(null,arguments)}function Y$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function J$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y$(Object(r),!0).forEach(function(n){zqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zqe(e,t,r){return(t=$qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $qe(e){var t=Kqe(e,"string");return typeof t=="symbol"?t:t+""}function Kqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gqe(e,t){if(e==null)return{};var r,n,a=qqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var die={symbolCircle:JR,symbolCross:y$e,symbolDiamond:E$e,symbolSquare:C$e,symbolStar:k$e,symbolTriangle:B$e,symbolWye:I$e},Wqe=Math.PI/180,Xqe=e=>{var t="symbol".concat(Yw(e));return die[t]||JR},Yqe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*Wqe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Jqe=(e,t)=>{die["symbol".concat(Yw(e))]=t},Aie=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=Gqe(e,Vqe),s=J$(J$({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=Xqe(t),h=j$e().type(f).size(Yqe(r,n,t));return h()},{className:o,cx:l,cy:u}=s,d=Wn(s,!0);return l===+l&&u===+u&&r===+r?I.createElement("path",r6({},d,{className:En("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(u,")"),d:i()})):null};Aie.registerSymbol=Jqe;var l3={},c3={},Z$;function Zqe(){return Z$||(Z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}(c3)),c3}var u3={},eK;function f4(){return eK||(eK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(u3)),u3}var d3={},A3={},f3={},tK;function eWe(){return tK||(tK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(f3)),f3}var rK;function hP(){return rK||(rK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eWe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(A3)),A3}var h3={},nK;function tWe(){return nK||(nK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(h3)),h3}var aK;function rWe(){return aK||(aK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hP(),r=tWe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(d3)),d3}var m3={},p3={},sK;function nWe(){return sK||(sK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dP();function r(n){return function(a){return t.get(a,n)}}e.property=r}(p3)),p3}var g3={},v3={},x3={},b3={},iK;function fie(){return iK||(iK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(b3)),b3}var y3={},oK;function hie(){return oK||(oK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(y3)),y3}var w3={},lK;function mP(){return lK||(lK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(w3)),w3}var cK;function aWe(){return cK||(cK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pP(),r=fie(),n=hie(),a=mP();function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):i(f,h,function g(v,b,y,_,S,k){const B=p(v,b,y,_,S,k);return B!==void 0?!!B:i(v,b,g,k)},new Map)}function i(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,g);case"function":return Object.keys(h).length>0?i(f,{...h},p,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function o(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,g);if(h instanceof Map)return l(f,h,p,g);if(h instanceof Set)return d(f,h,p,g);const v=Object.keys(h);if(f==null)return v.length===0;if(v.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let b=0;b<v.length;b++){const y=v[b];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function l(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[v,b]of h.entries()){const y=f.get(v);if(p(y,b,v,f,h,g)===!1)return!1}return!0}function u(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const v=new Set;for(let b=0;b<h.length;b++){const y=h[b];let _=!1;for(let S=0;S<f.length;S++){if(v.has(S))continue;const k=f[S];let B=!1;if(p(k,y,b,f,h,g)&&(B=!0),B){v.add(S),_=!0;break}}if(!_)return!1}return!0}function d(f,h,p,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,g):!1}e.isMatchWith=s,e.isSetMatch=d}(x3)),x3}var uK;function pP(){return uK||(uK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aWe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(v3)),v3}var E3={},C3={},_3={},dK;function mie(){return dK||(dK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(_3)),_3}var S3={},AK;function gP(){return AK||(AK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(S3)),S3}var N3={},fK;function vP(){return fK||(fK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",v="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",_="[object Uint16Array]",S="[object Uint32Array]",k="[object BigUint64Array]",B="[object Int8Array]",F="[object Int16Array]",w="[object Int32Array]",C="[object BigInt64Array]",N="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=k,e.booleanTag=a,e.dataViewTag=v,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=N,e.float64ArrayTag=R,e.functionTag=f,e.int16ArrayTag=F,e.int32ArrayTag=w,e.int8ArrayTag=B,e.mapTag=l,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=_,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(N3)),N3}var k3={},hK;function sWe(){return hK||(hK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(k3)),k3}var mK;function pie(){return mK||(mK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mie(),r=gP(),n=vP(),a=hie(),s=sWe();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,g=void 0){const v=g==null?void 0:g(d,f,h,p);if(v!=null)return v;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const b=new Array(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;p.set(d,b);for(const[y,_]of d)b.set(y,o(_,y,h,p,g));return b}if(d instanceof Set){const b=new Set;p.set(d,b);for(const y of d)b.add(o(y,void 0,h,p,g));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,b),l(b,d,h,p,g),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return p.set(d,b),l(b,d,h,p,g),b}if(d instanceof Blob){const b=new Blob([d],{type:d.type});return p.set(d,b),l(b,d,h,p,g),b}if(d instanceof Error){const b=new d.constructor;return p.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,l(b,d,h,p,g),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return p.set(d,b),l(b,d,h,p,g),b}return d}function l(d,f,h=d,p,g){const v=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<v.length;b++){const y=v[b],_=Object.getOwnPropertyDescriptor(d,y);(_==null||_.writable)&&(d[y]=o(f[y],y,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=l}(C3)),C3}var pK;function iWe(){return pK||(pK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pie();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(E3)),E3}var gK;function oWe(){return gK||(gK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pP(),r=iWe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(g3)),g3}var B3={},T3={},I3={},vK;function lWe(){return vK||(vK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pie(),r=vP();function n(a,s){return t.cloneDeepWith(a,(i,o,l,u)=>{const d=s==null?void 0:s(i,o,l,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(I3)),I3}var xK;function cWe(){return xK||(xK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lWe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(T3)),T3}var j3={},F3={},bK;function gie(){return bK||(bK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(F3)),F3}var O3={},yK;function uWe(){return yK||(yK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gP();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(O3)),O3}var wK;function dWe(){return wK||(wK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sie(),r=gie(),n=uWe(),a=uP();function s(i,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?l=a.toPath(o):l=[o],l.length===0)return!1;let u=i;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(j3)),j3}var EK;function AWe(){return EK||(EK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pP(),r=iie(),n=cWe(),a=dP(),s=dWe();function i(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=i}(B3)),B3}var CK;function xP(){return CK||(CK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f4(),r=nWe(),n=oWe(),a=AWe();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(m3)),m3}var _K;function fWe(){return _K||(_K=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zqe(),r=f4(),n=rWe(),a=xP();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(l3)),l3}var D3,SK;function hWe(){return SK||(SK=1,D3=fWe().uniqBy),D3}var mWe=hWe();const NK=bl(mWe);function pWe(e,t,r){return t===!0?NK(e,r):typeof t=="function"?NK(e,t):e}var bP=I.createContext(null),gWe=e=>e,us=()=>{var e=I.useContext(bP);return e?e.store.dispatch:gWe},C_=()=>{},vWe=()=>C_,xWe=(e,t)=>e===t;function ir(e){var t=I.useContext(bP);return Lre.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:vWe,t?t.store.getState:C_,t?t.store.getState:C_,t?e:C_,xWe)}function bWe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function yWe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function wWe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var kK=e=>Array.isArray(e)?e:[e];function EWe(e){const t=Array.isArray(e[0])?e[0]:e;return wWe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function CWe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var _We=class{constructor(e){this.value=e}deref(){return this.value}},SWe=typeof WeakRef<"u"?WeakRef:_We,NWe=0,BK=1;function _C(){return{s:NWe,v:void 0,o:null,p:null}}function vie(e,t={}){let r=_C();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:l}=arguments;for(let h=0,p=l;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const b=v.get(g);b===void 0?(o=_C(),v.set(g,o)):o=b}else{let v=o.p;v===null&&(o.p=v=new Map);const b=v.get(g);b===void 0?(o=_C(),v.set(g,o)):o=b}}const u=o;let d;if(o.s===BK)d=o.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new SWe(d):d}return u.s=BK,u.v=d,d}return i.clearCache=()=>{r=_C(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function kWe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,l={},u=a.pop();typeof u=="object"&&(l=u,u=a.pop()),bWe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:p=vie,argsMemoizeOptions:g=[]}=d,v=kK(h),b=kK(g),y=EWe(a),_=f(function(){return s++,u.apply(null,arguments)},...v),S=p(function(){i++;const B=CWe(y,arguments);return o=_.apply(null,B),o},...b);return Object.assign(S,{resultFunc:u,memoizedResultFunc:_,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var ct=kWe(vie),BWe=Object.assign((e,t=ct)=>{yWe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,l)=>(i[r[l]]=o,i),{}))},{withTypes:()=>BWe}),R3={},P3={},L3={},TK;function TWe(){return TK||(TK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(L3)),L3}var M3={},U3={},IK;function xie(){return IK||(IK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(U3)),U3}var jK;function IWe(){return jK||(jK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xie(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(M3)),M3}var FK;function jWe(){return FK||(FK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TWe(),r=IWe(),n=uP();function a(s,i,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,g)=>{let v=p;for(let b=0;b<g.length&&v!=null;++b)v=v[g[b]];return v},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let v=0;v<f.length;v++){const b=t.compareValues(p.criteria[v],g.criteria[v],o[v]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=a}(P3)),P3}var Q3={},OK;function FWe(){return OK||(OK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<s?i(d,l+1):a.push(d)}};return i(r,0),a}e.flatten=t}(Q3)),Q3}var H3={},DK;function bie(){return DK||(DK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gie(),r=hP(),n=fie(),a=mP();function s(i,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?a.eq(l[o],i):!1}e.isIterateeCall=s}(H3)),H3}var RK;function OWe(){return RK||(RK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jWe(),r=FWe(),n=bie();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(R3)),R3}var V3,PK;function DWe(){return PK||(PK=1,V3=OWe().sortBy),V3}var RWe=DWe();const h4=bl(RWe);var yie=e=>e.legend.settings,PWe=e=>e.legend.size,LWe=e=>e.legend.payload;ct([LWe,yie],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?h4(n,r):n});var SC=1;function MWe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=I.useState({height:0,left:0,top:0,width:0}),n=I.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>SC||Math.abs(i.left-t.left)>SC||Math.abs(i.top-t.top)>SC||Math.abs(i.width-t.width)>SC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function lo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var UWe=typeof Symbol=="function"&&Symbol.observable||"@@observable",LK=UWe,z3=()=>Math.random().toString(36).substring(7).split("").join("."),QWe={INIT:`@@redux/INIT${z3()}`,REPLACE:`@@redux/REPLACE${z3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${z3()}`},t5=QWe;function yP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wie(e,t,r){if(typeof e!="function")throw new Error(lo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(lo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(lo(1));return r(wie)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,l=!1;function u(){i===s&&(i=new Map,s.forEach((b,y)=>{i.set(y,b)}))}function d(){if(l)throw new Error(lo(3));return a}function f(b){if(typeof b!="function")throw new Error(lo(4));if(l)throw new Error(lo(5));let y=!0;u();const _=o++;return i.set(_,b),function(){if(y){if(l)throw new Error(lo(6));y=!1,u(),i.delete(_),s=null}}}function h(b){if(!yP(b))throw new Error(lo(7));if(typeof b.type>"u")throw new Error(lo(8));if(typeof b.type!="string")throw new Error(lo(17));if(l)throw new Error(lo(9));try{l=!0,a=n(a,b)}finally{l=!1}return(s=i).forEach(_=>{_()}),b}function p(b){if(typeof b!="function")throw new Error(lo(10));n=b,h({type:t5.REPLACE})}function g(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(lo(11));function _(){const k=y;k.next&&k.next(d())}return _(),{unsubscribe:b(_)}},[LK](){return this}}}return h({type:t5.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[LK]:g}}function HWe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:t5.INIT})>"u")throw new Error(lo(12));if(typeof r(void 0,{type:t5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(lo(13))})}function Eie(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{HWe(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let l=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=i[f],g=h(p,o);if(typeof g>"u")throw o&&o.type,new Error(lo(14));u[f]=g,l=l||g!==p}return l=l||n.length!==Object.keys(i).length,l?u:i}}function r5(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function VWe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(lo(15))};const i={getState:a.getState,dispatch:(l,...u)=>s(l,...u)},o=e.map(l=>l(i));return s=r5(...o)(a.dispatch),{...a,dispatch:s}}}function Cie(e){return yP(e)&&"type"in e&&typeof e.type=="string"}var _ie=Symbol.for("immer-nothing"),MK=Symbol.for("immer-draftable"),Rc=Symbol.for("immer-state");function hd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var _x=Object.getPrototypeOf;function zp(e){return!!e&&!!e[Rc]}function sh(e){var t;return e?Sie(e)||Array.isArray(e)||!!e[MK]||!!((t=e.constructor)!=null&&t[MK])||p4(e)||g4(e):!1}var zWe=Object.prototype.constructor.toString();function Sie(e){if(!e||typeof e!="object")return!1;const t=_x(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===zWe}function n5(e,t){m4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function m4(e){const t=e[Rc];return t?t.type_:Array.isArray(e)?1:p4(e)?2:g4(e)?3:0}function n6(e,t){return m4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Nie(e,t,r){const n=m4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function $We(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function p4(e){return e instanceof Map}function g4(e){return e instanceof Set}function qm(e){return e.copy_||e.base_}function a6(e,t){if(p4(e))return new Map(e);if(g4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Sie(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Rc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(_x(e),n)}else{const n=_x(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function wP(e,t=!1){return v4(e)||zp(e)||!sh(e)||(m4(e)>1&&(e.set=e.add=e.clear=e.delete=KWe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>wP(n,!0))),e}function KWe(){hd(2)}function v4(e){return Object.isFrozen(e)}var GWe={};function $p(e){const t=GWe[e];return t||hd(0,e),t}var ow;function kie(){return ow}function qWe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function UK(e,t){t&&($p("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function s6(e){i6(e),e.drafts_.forEach(WWe),e.drafts_=null}function i6(e){e===ow&&(ow=e.parent_)}function QK(e){return ow=qWe(ow,e)}function WWe(e){const t=e[Rc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function HK(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Rc].modified_&&(s6(t),hd(4)),sh(e)&&(e=a5(t,e),t.parent_||s5(t,e)),t.patches_&&$p("Patches").generateReplacementPatches_(r[Rc].base_,e,t.patches_,t.inversePatches_)):e=a5(t,r,[]),s6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_ie?e:void 0}function a5(e,t,r){if(v4(t))return t;const n=t[Rc];if(!n)return n5(t,(a,s)=>VK(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return s5(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),n5(s,(o,l)=>VK(e,n,a,o,l,r,i)),s5(e,a,!1),r&&e.patches_&&$p("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function VK(e,t,r,n,a,s,i){if(zp(a)){const o=s&&t&&t.type_!==3&&!n6(t.assigned_,n)?s.concat(n):void 0,l=a5(e,a,o);if(Nie(r,n,l),zp(l))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(sh(a)&&!v4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;a5(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&s5(e,a)}}function s5(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wP(t,r)}function XWe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:kie(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=EP;r&&(a=[n],s=lw);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var EP={get(e,t){if(t===Rc)return e;const r=qm(e);if(!n6(r,t))return YWe(e,r,t);const n=r[t];return e.finalized_||!sh(n)?n:n===$3(e.base_,t)?(K3(e),e.copy_[t]=l6(n,e)):n},has(e,t){return t in qm(e)},ownKeys(e){return Reflect.ownKeys(qm(e))},set(e,t,r){const n=Bie(qm(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=$3(qm(e),t),s=a==null?void 0:a[Rc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if($We(r,a)&&(r!==void 0||n6(e.base_,t)))return!0;K3(e),o6(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return $3(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,K3(e),o6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=qm(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){hd(11)},getPrototypeOf(e){return _x(e.base_)},setPrototypeOf(){hd(12)}},lw={};n5(EP,(e,t)=>{lw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});lw.deleteProperty=function(e,t){return lw.set.call(this,e,t,void 0)};lw.set=function(e,t,r){return EP.set.call(this,e[0],t,r,e[0])};function $3(e,t){const r=e[Rc];return(r?qm(r):e)[t]}function YWe(e,t,r){var a;const n=Bie(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Bie(e,t){if(!(t in e))return;let r=_x(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=_x(r)}}function o6(e){e.modified_||(e.modified_=!0,e.parent_&&o6(e.parent_))}function K3(e){e.copy_||(e.copy_=a6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var JWe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(l=s,...u){return i.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&hd(6),n!==void 0&&typeof n!="function"&&hd(7);let a;if(sh(t)){const s=QK(this),i=l6(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?s6(s):i6(s)}return UK(s,n),HK(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===_ie&&(a=void 0),this.autoFreeze_&&wP(a,!0),n){const s=[],i=[];$p("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else hd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,l=>t(l,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){sh(e)||hd(8),zp(e)&&(e=zf(e));const t=QK(this),r=l6(e,void 0);return r[Rc].isManual_=!0,i6(t),r}finishDraft(e,t){const r=e&&e[Rc];(!r||!r.isManual_)&&hd(9);const{scope_:n}=r;return UK(n,t),HK(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=$p("Patches").applyPatches_;return zp(e)?n(e,t):this.produce(e,a=>n(a,t))}};function l6(e,t){const r=p4(e)?$p("MapSet").proxyMap_(e,t):g4(e)?$p("MapSet").proxySet_(e,t):XWe(e,t);return(t?t.scope_:kie()).drafts_.push(r),r}function zf(e){return zp(e)||hd(10,e),Tie(e)}function Tie(e){if(!sh(e)||v4(e))return e;const t=e[Rc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=a6(e,t.scope_.immer_.useStrictShallowCopy_)}else r=a6(e,!0);return n5(r,(n,a)=>{Nie(r,n,Tie(a))}),t&&(t.finalized_=!1),r}var Pc=new JWe,Iie=Pc.produce;Pc.produceWithPatches.bind(Pc);Pc.setAutoFreeze.bind(Pc);Pc.setUseStrictShallowCopy.bind(Pc);Pc.applyPatches.bind(Pc);Pc.createDraft.bind(Pc);Pc.finishDraft.bind(Pc);function jie(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var ZWe=jie(),eXe=jie,tXe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?r5:r5.apply(null,arguments)};function Fu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(jc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Cie(n)&&n.type===e,r}var Fie=class Vb extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Vb.prototype)}static get[Symbol.species](){return Vb}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Vb(...t[0].concat(this)):new Vb(...t.concat(this))}};function zK(e){return sh(e)?Iie(e,()=>{}):e}function NC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function rXe(e){return typeof e=="boolean"}var nXe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new Fie;return r&&(rXe(r)?i.push(ZWe):i.push(eXe(r.extraArgument))),i},aXe="RTK_autoBatch",$K=e=>t=>{setTimeout(t,e)},sXe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$K(10):e.type==="callback"?e.queueNotification:$K(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[aXe]),s=!a,s&&(i||(i=!0,l(u))),n.dispatch(d)}finally{a=!0}}})},iXe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Fie(e);return n&&a.push(sXe(typeof n=="object"?n:void 0)),a};function oXe(e){const t=nXe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(yP(r))o=Eie(r);else throw new Error(jc(1));let l;typeof n=="function"?l=n(t):l=t();let u=r5;a&&(u=tXe({trace:!1,...typeof a=="object"&&a}));const d=VWe(...l),f=iXe(d);let h=typeof i=="function"?i(f):f();const p=u(...h);return wie(o,s,p)}function Oie(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(jc(28));if(o in t)throw new Error(jc(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function lXe(e){return typeof e=="function"}function cXe(e,t){let[r,n,a]=Oie(t),s;if(lXe(e))s=()=>zK(e());else{const o=zK(e);s=()=>o}function i(o=s(),l){let u=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(zp(d)){const p=f(d,l);return p===void 0?d:p}else{if(sh(d))return Iie(d,h=>f(h,l));{const h=f(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var uXe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dXe=(e=21)=>{let t="",r=e;for(;r--;)t+=uXe[Math.random()*64|0];return t},AXe=Symbol.for("rtk-slice-createasyncthunk");function fXe(e,t){return`${e}/${t}`}function hXe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[AXe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(jc(11));const o=(typeof a.reducers=="function"?a.reducers(pXe()):a.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(k,B){const F=typeof k=="string"?k:k.type;if(!F)throw new Error(jc(12));if(F in u.sliceCaseReducersByType)throw new Error(jc(13));return u.sliceCaseReducersByType[F]=B,d},addMatcher(k,B){return u.sliceMatchers.push({matcher:k,reducer:B}),d},exposeAction(k,B){return u.actionCreators[k]=B,d},exposeCaseReducer(k,B){return u.sliceCaseReducersByName[k]=B,d}};l.forEach(k=>{const B=o[k],F={reducerName:k,type:fXe(s,k),createNotation:typeof a.reducers=="function"};vXe(B)?bXe(F,B,d,t):gXe(F,B,d)});function f(){const[k={},B=[],F=void 0]=typeof a.extraReducers=="function"?Oie(a.extraReducers):[a.extraReducers],w={...k,...u.sliceCaseReducersByType};return cXe(a.initialState,C=>{for(let N in w)C.addCase(N,w[N]);for(let N of u.sliceMatchers)C.addMatcher(N.matcher,N.reducer);for(let N of B)C.addMatcher(N.matcher,N.reducer);F&&C.addDefaultCase(F)})}const h=k=>k,p=new Map,g=new WeakMap;let v;function b(k,B){return v||(v=f()),v(k,B)}function y(){return v||(v=f()),v.getInitialState()}function _(k,B=!1){function F(C){let N=C[k];return typeof N>"u"&&B&&(N=NC(g,F,y)),N}function w(C=h){const N=NC(p,B,()=>new WeakMap);return NC(N,C,()=>{const R={};for(const[O,j]of Object.entries(a.selectors??{}))R[O]=mXe(j,C,()=>NC(g,C,y),B);return R})}return{reducerPath:k,getSelectors:w,get selectors(){return w(F)},selectSlice:F}}const S={name:s,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,..._(i),injectInto(k,{reducerPath:B,...F}={}){const w=B??i;return k.inject({reducerPath:w,reducer:b},F),{...S,..._(w,!0)}}};return S}}function mXe(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var Mc=hXe();function pXe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function gXe({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!xXe(n))throw new Error(jc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?Fu(e,i):Fu(e))}function vXe(e){return e._reducerDefinitionType==="asyncThunk"}function xXe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function bXe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(jc(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:l,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||kC,pending:o||kC,rejected:l||kC,settled:u||kC})}function kC(){}var yXe="task",Die="listener",Rie="completed",CP="cancelled",wXe=`task-${CP}`,EXe=`task-${Rie}`,c6=`${Die}-${CP}`,CXe=`${Die}-${Rie}`,x4=class{constructor(e){Kk(this,"name","TaskAbortError");Kk(this,"message");this.code=e,this.message=`${yXe} ${CP} (reason: ${e})`}},_P=(e,t)=>{if(typeof e!="function")throw new TypeError(jc(32))},i5=()=>{},Pie=(e,t=i5)=>(e.catch(t),e),Lie=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Sp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Np=e=>{if(e.aborted){const{reason:t}=e;throw new x4(t)}};function Mie(e,t){let r=i5;return new Promise((n,a)=>{const s=()=>a(new x4(e.reason));if(e.aborted){s();return}r=Lie(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=i5})}var _Xe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof x4?"cancelled":"rejected",error:r}}finally{t==null||t()}},o5=e=>t=>Pie(Mie(e,t).then(r=>(Np(e),r))),Uie=e=>{const t=o5(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Zv}=Object,KK={},b4="listenerMiddleware",SXe=(e,t)=>{const r=n=>Lie(e,()=>Sp(n,e.reason));return(n,a)=>{_P(n);const s=new AbortController;r(s);const i=_Xe(async()=>{Np(e),Np(s.signal);const o=await n({pause:o5(s.signal),delay:Uie(s.signal),signal:s.signal});return Np(s.signal),o},()=>Sp(s,EXe));return a!=null&&a.autoJoin&&t.push(i.catch(i5)),{result:o5(e)(i),cancel(){Sp(s,wXe)}}}},NXe=(e,t)=>{const r=async(n,a)=>{Np(t);let s=()=>{};const o=[new Promise((l,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(l=>setTimeout(l,a,null)));try{const l=await Mie(t,Promise.race(o));return Np(t),l}finally{s()}};return(n,a)=>Pie(r(n,a))},Qie=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Fu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(jc(21));return _P(s),{predicate:a,type:t,effect:s}},Hie=Zv(e=>{const{type:t,predicate:r,effect:n}=Qie(e);return{id:dXe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(jc(22))}}},{withTypes:()=>Hie}),GK=(e,t)=>{const{type:r,effect:n,predicate:a}=Qie(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},u6=e=>{e.pending.forEach(t=>{Sp(t,c6)})},kXe=e=>()=>{e.forEach(u6),e.clear()},qK=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Vie=Zv(Fu(`${b4}/add`),{withTypes:()=>Vie}),BXe=Fu(`${b4}/removeAll`),zie=Zv(Fu(`${b4}/remove`),{withTypes:()=>zie}),TXe=(...e)=>{console.error(`${b4}/error`,...e)},Zw=(e={})=>{const t=new Map,{extra:r,onError:n=TXe}=e;_P(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&u6(d)}),s=d=>{const f=GK(t,d)??Hie(d);return a(f)};Zv(s,{withTypes:()=>s});const i=d=>{const f=GK(t,d);return f&&(f.unsubscribe(),d.cancelActive&&u6(f)),!!f};Zv(i,{withTypes:()=>i});const o=async(d,f,h,p)=>{const g=new AbortController,v=NXe(s,g.signal),b=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,Zv({},h,{getOriginalState:p,condition:(y,_)=>v(y,_).then(Boolean),take:v,delay:Uie(g.signal),pause:o5(g.signal),extra:r,signal:g.signal,fork:SXe(g.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,_,S)=>{y!==g&&(Sp(y,c6),S.delete(y))})},cancel:()=>{Sp(g,c6),d.pending.delete(g)},throwIfCancelled:()=>{Np(g.signal)}})))}catch(y){y instanceof x4||qK(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),Sp(g,CXe),d.pending.delete(g)}},l=kXe(t);return{middleware:d=>f=>h=>{if(!Cie(h))return f(h);if(Vie.match(h))return s(h.payload);if(BXe.match(h)){l();return}if(zie.match(h))return i(h.payload);let p=d.getState();const g=()=>{if(p===KK)throw new Error(jc(23));return p};let v;try{if(v=f(h),t.size>0){const b=d.getState(),y=Array.from(t.values());for(const _ of y){let S=!1;try{S=_.predicate(h,b,p)}catch(k){S=!1,qK(n,k,{raisedBy:"predicate"})}S&&o(_,h,d,g)}}}finally{p=KK}return v},startListening:s,stopListening:i,clearListeners:l}};function jc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var IXe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},$ie=Mc({name:"chartLayout",initialState:IXe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:jXe,setLayout:FXe,setChartSize:OXe,setScale:DXe}=$ie.actions,RXe=$ie.reducer;function WK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function XK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WK(Object(r),!0).forEach(function(n){PXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PXe(e,t,r){return(t=LXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LXe(e){var t=MXe(e,"string");return typeof t=="symbol"?t:t+""}function MXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l5=Math.PI/180,UXe=e=>e*180/Math.PI,Zn=(e,t,r,n)=>({x:e+Math.cos(-l5*n)*r,y:t+Math.sin(-l5*n)*r}),Kie=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},QXe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},HXe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=QXe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,l=Math.acos(o);return n>s&&(l=2*Math.PI-l),{radius:i,angle:UXe(l),angleInRadian:l}},VXe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},zXe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},$Xe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=HXe({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:l,endAngle:u}=VXe(t),d=s,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?XK(XK({},t),{},{radius:a,angle:zXe(d,t)}):null},Gie=e=>!I.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function qie(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function YK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YK(Object(r),!0).forEach(function(n){KXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KXe(e,t,r){return(t=GXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GXe(e){var t=qXe(e,"string");return typeof t=="symbol"?t:t+""}function qXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ra(e,t,r){return ks(e)||ks(t)?r:MA(t)?am(e,t,r):typeof t=="function"?t(e):r}var WXe=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(Xi(d-u)!==Xi(f-d)){var p=[];if(Xi(f-d)===Xi(a[1]-a[0])){h=f;var g=d+a[1]-a[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var v=f+a[1]-a[0];p[0]=Math.min(d,(v+d)/2),p[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:i}=r[l]);break}}else{var y=Math.min(u,f),_=Math.max(u,f);if(e>(y+d)/2&&e<=(_+d)/2){({index:i}=r[l]);break}}}else if(t){for(var S=0;S<o;S++)if(S===0&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S>0&&S<o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S===o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2){({index:i}=t[S]);break}}return i},XXe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&ur(e[s]))return yu(yu({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&ur(e[i]))return yu(yu({},e),{},{[i]:e[i]+(a||0)})}return e},mm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Wie=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},Xie=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!i)return null;var g=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,v=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(v=p==="angleAxis"&&s&&s.length>=2?Xi(s[0]-s[1])*2*v:v,f||h){var b=(f||h||[]).map((y,_)=>{var S=n?n.indexOf(y):y;return{coordinate:i(S)+v,value:y,offset:v,index:_}});return b.filter(y=>!Dc(y.coordinate))}return l&&u?u.map((y,_)=>({coordinate:i(y)+v,value:y,index:_,offset:v})):i.ticks&&d!=null?i.ticks(d).map((y,_)=>({coordinate:i(y)+v,value:y,offset:v,index:_})):i.domain().map((y,_)=>({coordinate:i(y)+v,value:n?n[y]:y,index:_,offset:v}))},JK=1e-4,YXe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-JK,s=Math.max(n[0],n[1])+JK,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},JXe=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(a[0]=r),(!ur(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},ZXe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Dc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},eYe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Dc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},tYe={sign:ZXe,expand:K$e,none:Ex,silhouette:G$e,wiggle:q$e,positive:eYe},rYe=(e,t,r)=>{var n=tYe[r],a=$$e().keys(t).value((s,i)=>+Ra(s,i,0)).order(QF).offset(n);return a(e)};function nYe(e){return e==null?void 0:String(e)}var ZK=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Ra(s,t.dataKey,t.scale.domain()[i]);return ks(o)?null:t.scale(o)-a/2+n},aYe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},sYe=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},iYe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],oYe=(e,t,r)=>{if(e!=null)return iYe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((l,u)=>{var d=qie(u,t,r),f=sYe(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},eG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=h4(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],u=a[i-1];s=Math.min((l.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function rG(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return yu(yu({},t),{},{dataKey:r,payload:n,value:a,name:s})}function Xx(e,t){if(e)return String(e);if(typeof t=="string")return t}function lYe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?$Xe({x:e,y:t},n):null}var cYe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return yu(yu(yu({},n),Zn(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:l}=n;return yu(yu(yu({},n),Zn(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},uYe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,mh=e=>e.layout.width,ph=e=>e.layout.height,dYe=e=>e.layout.scale,Yie=e=>e.layout.margin,SP=ct(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),NP=ct(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Jie="data-recharts-item-index",Zie="data-recharts-item-data-key",y4=60;function nG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function s0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nG(Object(r),!0).forEach(function(n){AYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AYe(e,t,r){return(t=fYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fYe(e){var t=hYe(e,"string");return typeof t=="symbol"?t:t+""}function hYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mYe=e=>e.brush.height,Ti=ct([mh,ph,Yie,mYe,SP,NP,yie,PWe],(e,t,r,n,a,s,i,o)=>{var l=s.reduce((g,v)=>{var{orientation:b}=v;if(!v.mirror&&!v.hide){var y=typeof v.width=="number"?v.width:y4;return s0(s0({},g),{},{[b]:g[b]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,v)=>{var{orientation:b}=v;return!v.mirror&&!v.hide?s0(s0({},g),{},{[b]:am(g,"".concat(b))+v.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=s0(s0({},u),l),f=d.bottom;d.bottom+=n,d=XXe(d,i,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return s0(s0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),pYe=ct(Ti,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),eoe=ct(mh,ph,(e,t)=>({x:0,y:0,width:e,height:t})),gYe=I.createContext(null),Zl=()=>I.useContext(gYe)!=null,w4=e=>e.brush,E4=ct([w4,Ti,Yie],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),kP=()=>{var e,t=Zl(),r=ir(pYe),n=ir(E4),a=(e=ir(w4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},vYe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},toe=()=>{var e;return(e=ir(Ti))!==null&&e!==void 0?e:vYe},roe=()=>ir(mh),noe=()=>ir(ph),Tn=e=>e.layout.layoutType,BP=()=>ir(Tn),xYe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},aoe=Mc({name:"legend",initialState:xYe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=zf(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:tut,setLegendSettings:rut,addLegendPayload:soe,removeLegendPayload:ioe}=aoe.actions,bYe=aoe.reducer;function d6(){return d6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d6.apply(null,arguments)}function aG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function G3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aG(Object(r),!0).forEach(function(n){yYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yYe(e,t,r){return(t=wYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wYe(e){var t=EYe(e,"string");return typeof t=="symbol"?t:t+""}function EYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CYe(e){return Array.isArray(e)&&MA(e[0])&&MA(e[1])?e.join(" ~ "):e}var _Ye=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var B={padding:0,margin:0},F=(o?h4(s,o):s).map((w,C)=>{if(w.type==="none")return null;var N=w.formatter||i||CYe,{value:R,name:O}=w,j=R,U=O;if(N){var P=N(R,O,w,C,s);if(Array.isArray(P))[j,U]=P;else if(P!=null)j=P;else return null}var X=G3({display:"block",paddingTop:4,paddingBottom:4,color:w.color||"#000"},n);return I.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:X},MA(U)?I.createElement("span",{className:"recharts-tooltip-item-name"},U):null,MA(U)?I.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,I.createElement("span",{className:"recharts-tooltip-item-value"},j),I.createElement("span",{className:"recharts-tooltip-item-unit"},w.unit||""))});return I.createElement("ul",{className:"recharts-tooltip-item-list",style:B},F)}return null},g=G3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=G3({margin:0},a),b=!ks(d),y=b?d:"",_=En("recharts-default-tooltip",l),S=En("recharts-tooltip-label",u);b&&f&&s!==void 0&&s!==null&&(y=f(d,s));var k=h?{role:"status","aria-live":"assertive"}:{};return I.createElement("div",d6({className:_,style:g},k),I.createElement("p",{className:S,style:v},I.isValidElement(y)?y:"".concat(y)),p())},pb="recharts-tooltip-wrapper",SYe={visibility:"hidden"};function NYe(e){var{coordinate:t,translateX:r,translateY:n}=e;return En(pb,{["".concat(pb,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat(pb,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat(pb,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat(pb,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function sG(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=e;if(s&&ur(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=l[n];if(h==null)return 0;if(i[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var v=f+o,b=h+u;return v>b?Math.max(d,h):Math.max(f,h)}function kYe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function BYe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:l}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=sG({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=sG({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=kYe({translateX:d,translateY:f,useTranslate3d:o})):u=SYe,{cssProperties:u,cssClasses:NYe({translateX:d,translateY:f,coordinate:r})}}function iG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iG(Object(r),!0).forEach(function(n){A6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A6(e,t,r){return(t=TYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TYe(e){var t=IYe(e,"string");return typeof t=="symbol"?t:t+""}function IYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jYe extends I.PureComponent{constructor(){super(...arguments),A6(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),A6(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:v,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:_,cssProperties:S}=BYe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:h,viewBox:p}),k=y?{}:BC(BC({transition:l&&t?"transform ".concat(n,"ms ").concat(a):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),B=BC(BC({},k),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return I.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:_,style:B,ref:b},s)}}var FYe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),og={isSsr:FYe()},ooe=()=>ir(e=>e.rootProps.accessibilityLayer);function Lc(e){return Number.isFinite(e)}function Sx(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function f6(){return f6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f6.apply(null,arguments)}function oG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oG(Object(r),!0).forEach(function(n){OYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OYe(e,t,r){return(t=DYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DYe(e){var t=RYe(e,"string");return typeof t=="symbol"?t:t+""}function RYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cG={curveBasisClosed:O$e,curveBasisOpen:D$e,curveBasis:F$e,curveBumpX:x$e,curveBumpY:b$e,curveLinearClosed:R$e,curveLinear:a4,curveMonotoneX:P$e,curveMonotoneY:L$e,curveNatural:M$e,curveStep:U$e,curveStepAfter:H$e,curveStepBefore:Q$e},TC=e=>Lc(e.x)&&Lc(e.y),gb=e=>e.x,vb=e=>e.y,PYe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Yw(e));return(r==="curveMonotone"||r==="curveBump")&&t?cG["".concat(r).concat(t==="vertical"?"Y":"X")]:cG[r]||a4},LYe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=PYe(t,a),o=s?r.filter(TC):r,l;if(Array.isArray(n)){var u=s?n.filter(f=>TC(f)):n,d=o.map((f,h)=>lG(lG({},f),{},{base:u[h]}));return a==="vertical"?l=pC().y(vb).x1(gb).x0(f=>f.base.x):l=pC().x(gb).y1(vb).y0(f=>f.base.y),l.defined(TC).curve(i),l(d)}return a==="vertical"&&ur(n)?l=pC().y(vb).x1(gb).x0(n):ur(n)?l=pC().x(gb).y1(vb).y0(n):l=sse().x(gb).y(vb),l.defined(TC).curve(i),l(o)},loe=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?LYe(e):n;return I.createElement("path",f6({},rl(e),fP(e),{className:En("recharts-curve",t),d:s===null?void 0:s,ref:a}))},MYe=["x","y","top","left","width","height","className"];function h6(){return h6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h6.apply(null,arguments)}function uG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UYe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uG(Object(r),!0).forEach(function(n){QYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QYe(e,t,r){return(t=HYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HYe(e){var t=VYe(e,"string");return typeof t=="symbol"?t:t+""}function VYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zYe(e,t){if(e==null)return{};var r,n,a=$Ye(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $Ye(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KYe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),GYe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,l=zYe(e,MYe),u=UYe({x:t,y:r,top:n,left:a,width:s,height:i},l);return!ur(t)||!ur(r)||!ur(s)||!ur(i)||!ur(n)||!ur(a)?null:I.createElement("path",h6({},Wn(u,!0),{className:En("recharts-cross",o),d:KYe(t,r,s,i,n,a)}))};function qYe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function dG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WYe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dG(Object(r),!0).forEach(function(n){XYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XYe(e,t,r){return(t=YYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YYe(e){var t=JYe(e,"string");return typeof t=="symbol"?t:t+""}function JYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pu(e,t){var r=WYe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var q3={},W3={},X3={},AG;function ZYe(){return AG||(AG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(X3)),X3}var fG;function eJe(){return fG||(fG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZYe(),r=mie(),n=gP(),a=vP(),s=mP();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,g,v){const b=v(u,d,f,h,p,g);if(b!==void 0)return b;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return l(u,d,g,v)}return l(u,d,g,v)}function l(u,d,f,h){if(Object.is(u,d))return!0;let p=n.getTag(u),g=n.getTag(d);if(p===a.argumentsTag&&(p=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),p!==g)return!1;switch(p){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),_=d.valueOf();return s.eq(y,_)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const v=f.get(u),b=f.get(d);if(v!=null&&b!=null)return v===d;f.set(u,d),f.set(d,u);try{switch(p){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,_]of u.entries())if(!d.has(y)||!o(_,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),_=Array.from(d.values());for(let S=0;S<y.length;S++){const k=y[S],B=_.findIndex(F=>o(k,F,void 0,u,d,f,h));if(B===-1)return!1;_.splice(B,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:l(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:l(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(l(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const _=[...Object.keys(u),...r.getSymbols(u)],S=[...Object.keys(d),...r.getSymbols(d)];if(_.length!==S.length)return!1;for(let k=0;k<_.length;k++){const B=_[k],F=u[B];if(!Object.hasOwn(d,B))return!1;const w=d[B];if(!o(F,w,B,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(W3)),W3}var Y3={},hG;function tJe(){return hG||(hG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(Y3)),Y3}var mG;function rJe(){return mG||(mG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eJe(),r=tJe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(q3)),q3}var J3,pG;function nJe(){return pG||(pG=1,J3=rJe().isEqual),J3}var aJe=nJe();const sJe=bl(aJe);var c5=1e-4,coe=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],uoe=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),gG=(e,t)=>r=>{var n=coe(e,t);return uoe(n,r)},iJe=(e,t)=>r=>{var n=coe(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return uoe(a,r)},vG=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var l=i[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,n,r,a]=l[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=gG(t,r),d=gG(n,a),f=iJe(t,r),h=g=>g>1?1:g<0?0:g,p=g=>{for(var v=g>1?1:g,b=v,y=0;y<8;++y){var _=u(b)-v,S=f(b);if(Math.abs(_-v)<c5||S<c5)return d(b);b=h(b-_/S)}return d(b)};return p.isStepper=!1,p},oJe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,l)=>{var u=-(i-o)*r,d=l*n,f=l+(u-d)*a/1e3,h=l*a/1e3+i;return Math.abs(h-o)<c5&&Math.abs(f)<c5?[o,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},doe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return vG(e);case"spring":return oJe();default:if(e.split("(")[0]==="cubic-bezier")return vG(e)}return typeof e=="function"?e:null};function xG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xG(Object(r),!0).forEach(function(n){lJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lJe(e,t,r){return(t=cJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cJe(e){var t=uJe(e,"string");return typeof t=="symbol"?t:t+""}function uJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dJe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),AJe=(e,t,r)=>e.map(n=>"".concat(dJe(n)," ").concat(t,"ms ").concat(r)).join(","),fJe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),uw=(e,t)=>Object.keys(t).reduce((r,n)=>bG(bG({},r),{},{[n]:e(n,t[n])}),{});function yG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yG(Object(r),!0).forEach(function(n){hJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hJe(e,t,r){return(t=mJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mJe(e){var t=pJe(e,"string");return typeof t=="symbol"?t:t+""}function pJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u5=(e,t,r)=>e+(t-e)*r,m6=e=>{var{from:t,to:r}=e;return t!==r},Aoe=(e,t,r)=>{var n=uw((a,s)=>{if(m6(s)){var[i,o]=e(s.from,s.to,s.velocity);return fo(fo({},s),{},{from:i,velocity:o})}return s},t);return r<1?uw((a,s)=>m6(s)?fo(fo({},s),{},{velocity:u5(s.velocity,n[a].velocity,r),from:u5(s.from,n[a].from,r)}):s,t):Aoe(e,n,r-1)};function gJe(e,t,r,n,a,s){var i,o=n.reduce((h,p)=>fo(fo({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>uw((h,p)=>p.from,o),u=()=>!Object.values(o).filter(m6).length,d=null,f=h=>{i||(i=h);var p=h-i,g=p/r.dt;o=Aoe(r,o,g),a(fo(fo(fo({},e),t),l())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function vJe(e,t,r,n,a,s,i){var o=null,l=a.reduce((f,h)=>fo(fo({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=uw((v,b)=>u5(...b,r(h)),l);if(s(fo(fo(fo({},e),t),p)),h<1)o=i.setTimeout(d);else{var g=uw((v,b)=>u5(...b,r(1)),l);s(fo(fo(fo({},e),t),g))}};return()=>(o=i.setTimeout(d),()=>{o()})}const foe=(e,t,r,n,a,s)=>{var i=fJe(e,t);return r.isStepper===!0?gJe(e,t,r,i,a,s):vJe(e,t,r,n,i,a,s)};function xJe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[l,...u]=o;if(typeof l=="number"){a=e.setTimeout(s.bind(null,u),l);return}s(l),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class bJe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function yJe(){return xJe(new bJe)}var wJe=I.createContext(yJe);function hoe(e,t){var r=I.useContext(wJe);return I.useMemo(()=>t??r(e),[e,t,r])}var EJe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function p6(){return p6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p6.apply(null,arguments)}function CJe(e,t){if(e==null)return{};var r,n,a=_Je(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _Je(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wG(Object(r),!0).forEach(function(n){lp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lp(e,t,r){return(t=SJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SJe(e){var t=NJe(e,"string");return typeof t=="symbol"?t:t+""}function NJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TP extends I.PureComponent{constructor(t,r){super(t,r),lp(this,"mounted",!1),lp(this,"manager",void 0),lp(this,"stopJSAnimation",null),lp(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:l,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:l}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(u);return}if(!(sJe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&l){var h={style:a?{[a]:f}:f};(a&&l[a]!==f||!a&&l!==f)&&this.setState(h)}this.runAnimation(i0(i0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:l}=t,u=foe(r,n,doe(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([l,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:l,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=AJe(Object.keys(d),n,i);this.manager.start([o,r,i0(i0({},d),{},{transition:f}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:l,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:g}=t,v=CJe(t,EJe),b=I.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||b===0||a<=0)return r;var _=S=>{var{style:k={},className:B}=S.props,F=I.cloneElement(S,i0(i0({},v),{},{style:i0(i0({},k),y),className:B}));return F};return b===1?_(I.Children.only(r)):I.createElement("div",null,I.Children.map(r,S=>_(S)))}}lp(TP,"displayName","Animate");lp(TP,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function d5(e){var t,r=hoe((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return I.createElement(TP,p6({},e,{animationManager:r}))}function A5(){return A5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A5.apply(null,arguments)}var EG=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},kJe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},moe=e=>{var t=Pu(e,kJe),r=I.useRef(null),[n,a]=I.useState(-1);I.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:v}=t;if(s!==+s||i!==+i||o!==+o||l!==+l||o===0||l===0)return null;var b=En("recharts-rectangle",d);return v?I.createElement(d5,{canBegin:n>0,from:{width:o,height:l,x:s,y:i},to:{width:o,height:l,x:s,y:i},duration:h,animationEasing:f,isActive:v},y=>{var{width:_,height:S,x:k,y:B}=y;return I.createElement(d5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:g,easing:f},I.createElement("path",A5({},Wn(t,!0),{className:b,d:EG(k,B,_,S,u),ref:r})))}):I.createElement("path",A5({},Wn(t,!0),{className:b,d:EG(s,i,o,l,u)}))};function poe(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=Zn(t,r,n,a),o=Zn(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function g6(){return g6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g6.apply(null,arguments)}var BJe=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},IC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/l5,f=l?a:a+s*d,h=Zn(t,r,u,f),p=Zn(t,r,n,f),g=l?a-s*d:a,v=Zn(t,r,u*Math.cos(d*l5),g);return{center:h,circleTangency:p,lineTangency:v,theta:d}},goe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=BJe(s,i),l=s+o,u=Zn(t,r,a,s),d=Zn(t,r,a,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Zn(t,r,n,s),p=Zn(t,r,n,l);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},TJe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:u}=e,d=Xi(u-l),{circleTangency:f,lineTangency:h,theta:p}=IC({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:v,theta:b}=IC({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(l-u):Math.abs(l-u)-p-b;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):goe({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:u});var _="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(n>0){var{circleTangency:S,lineTangency:k,theta:B}=IC({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:F,lineTangency:w,theta:C}=IC({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),N=o?Math.abs(l-u):Math.abs(l-u)-B-C;if(N<0&&s===0)return"".concat(_,"L").concat(t,",").concat(r,"Z");_+="L".concat(w.x,",").concat(w.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(N>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(k.x,",").concat(k.y,"Z")}else _+="L".concat(t,",").concat(r,"Z");return _},IJe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},voe=e=>{var t=Pu(e,IJe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=En("recharts-sector",f),p=s-a,g=xl(i,p,0,!0),v;return g>0&&Math.abs(u-d)<360?v=TJe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):v=goe({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),I.createElement("path",g6({},Wn(t,!0),{className:h,d:v}))};function jJe(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:d,angle:f}=t,h=Zn(o,l,u,f),p=Zn(o,l,d,f);n=h.x,a=h.y,s=p.x,i=p.y}else return poe(t);return[{x:n,y:a},{x:s,y:i}]}var Z3={},eI={},tI={},CG;function FJe(){return CG||(CG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xie();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(tI)),tI}var _G;function OJe(){return _G||(_G=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FJe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(eI)),eI}var SG;function DJe(){return SG||(SG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bie(),r=OJe();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=a,a+=i;return l}e.range=n}(Z3)),Z3}var rI,NG;function RJe(){return NG||(NG=1,rI=DJe().range),rI}var PJe=RJe();const xoe=bl(PJe),zb=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:OR,scaleDiverging:Jae,scaleDivergingLog:Zae,scaleDivergingPow:WR,scaleDivergingSqrt:p$e,scaleDivergingSymlog:ese,scaleIdentity:jae,scaleImplicit:LF,scaleLinear:Iae,scaleLog:Oae,scaleOrdinal:XN,scalePoint:LVe,scalePow:MR,scaleQuantile:Pae,scaleQuantize:Lae,scaleRadial:Rae,scaleSequential:qae,scaleSequentialLog:Wae,scaleSequentialPow:qR,scaleSequentialQuantile:Yae,scaleSequentialSqrt:m$e,scaleSequentialSymlog:Xae,scaleSqrt:XVe,scaleSymlog:Dae,scaleThreshold:Mae,scaleTime:f$e,scaleUtc:h$e,tickFormat:Tae},Symbol.toStringTag,{value:"Module"}));var pm=e=>e.chartData,C4=ct([pm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),IP=(e,t,r,n)=>n?C4(e):pm(e);function Nx(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Lc(t)&&Lc(r))return!0}return!1}function kG(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function LJe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Lc(r))a=r;else if(typeof r=="function")return;if(Lc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(Nx(i))return i}}function MJe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Nx(n))return kG(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(ur(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&eG.test(a)){var l=eG.exec(a);if(l==null||t==null)i=void 0;else{var u=+l[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(ur(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&tG.test(s)){var d=tG.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[i,o];if(Nx(h))return t==null?h:kG(h,t,r)}}}var Yx=1e9,UJe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},FP,Ja=!0,Ou="[DecimalError] ",kp=Ou+"Invalid argument: ",jP=Ou+"Exponent out of range: ",Jx=Math.floor,Wm=Math.pow,QJe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Nc,$i=1e7,Ma=7,boe=9007199254740991,f5=Jx(boe/Ma),dr={};dr.absoluteValue=dr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};dr.comparedTo=dr.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};dr.decimalPlaces=dr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ma;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};dr.dividedBy=dr.div=function(e){return $f(this,new this.constructor(e))};dr.dividedToIntegerBy=dr.idiv=function(e){var t=this,r=t.constructor;return Ba($f(t,new r(e),0,1),r.precision)};dr.equals=dr.eq=function(e){return!this.cmp(e)};dr.exponent=function(){return pi(this)};dr.greaterThan=dr.gt=function(e){return this.cmp(e)>0};dr.greaterThanOrEqualTo=dr.gte=function(e){return this.cmp(e)>=0};dr.isInteger=dr.isint=function(){return this.e>this.d.length-2};dr.isNegative=dr.isneg=function(){return this.s<0};dr.isPositive=dr.ispos=function(){return this.s>0};dr.isZero=function(){return this.s===0};dr.lessThan=dr.lt=function(e){return this.cmp(e)<0};dr.lessThanOrEqualTo=dr.lte=function(e){return this.cmp(e)<1};dr.logarithm=dr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Nc))throw Error(Ou+"NaN");if(r.s<1)throw Error(Ou+(r.s?"NaN":"-Infinity"));return r.eq(Nc)?new n(0):(Ja=!1,t=$f(dw(r,s),dw(e,s),s),Ja=!0,Ba(t,a))};dr.minus=dr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Eoe(t,e):yoe(t,(e.s=-e.s,e))};dr.modulo=dr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Ou+"NaN");return r.s?(Ja=!1,t=$f(r,e,0,1).times(e),Ja=!0,r.minus(t)):Ba(new n(r),a)};dr.naturalExponential=dr.exp=function(){return woe(this)};dr.naturalLogarithm=dr.ln=function(){return dw(this)};dr.negated=dr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};dr.plus=dr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?yoe(t,e):Eoe(t,(e.s=-e.s,e))};dr.precision=dr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(kp+e);if(t=pi(a)+1,n=a.d.length-1,r=n*Ma+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};dr.squareRoot=dr.sqrt=function(){var e,t,r,n,a,s,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Ou+"NaN")}for(e=pi(o),Ja=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=CA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Jx((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=i=r+3;;)if(s=n,n=s.plus($f(o,s,i+2)).times(.5),CA(s.d).slice(0,i)===(t=CA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(Ba(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return Ja=!0,Ba(n,r)};dr.times=dr.mul=function(e){var t,r,n,a,s,i,o,l,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=p.length,l<u&&(s=h,h=p,p=s,i=l,l=u,u=i),s=[],i=l+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)o=s[a]+p[n]*h[a-n-1]+t,s[a--]=o%$i|0,t=o/$i|0;s[a]=(s[a]+t)%$i|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Ja?Ba(e,f.precision):e};dr.toDecimalPlaces=dr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(UA(e,0,Yx),t===void 0?t=n.rounding:UA(t,0,8),Ba(r,e+pi(r)+1,t))};dr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Kp(n,!0):(UA(e,0,Yx),t===void 0?t=a.rounding:UA(t,0,8),n=Ba(new a(n),e+1,t),r=Kp(n,!0,e+1)),r};dr.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Kp(a):(UA(e,0,Yx),t===void 0?t=s.rounding:UA(t,0,8),n=Ba(new s(a),e+pi(a)+1,t),r=Kp(n.abs(),!1,e+pi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};dr.toInteger=dr.toint=function(){var e=this,t=e.constructor;return Ba(new t(e),pi(e)+1,t.rounding)};dr.toNumber=function(){return+this};dr.toPower=dr.pow=function(e){var t,r,n,a,s,i,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Nc);if(o=new l(o),!o.s){if(e.s<1)throw Error(Ou+"Infinity");return o}if(o.eq(Nc))return o;if(n=l.precision,e.eq(Nc))return Ba(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=boe){for(a=new l(Nc),t=Math.ceil(n/Ma+4),Ja=!1;r%2&&(a=a.times(o),TG(a.d,t)),r=Jx(r/2),r!==0;)o=o.times(o),TG(o.d,t);return Ja=!0,e.s<0?new l(Nc).div(a):Ba(a,n)}}else if(s<0)throw Error(Ou+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Ja=!1,a=e.times(dw(o,n+u)),Ja=!0,a=woe(a),a.s=s,a};dr.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=pi(a),n=Kp(a,r<=s.toExpNeg||r>=s.toExpPos)):(UA(e,1,Yx),t===void 0?t=s.rounding:UA(t,0,8),a=Ba(new s(a),e,t),r=pi(a),n=Kp(a,e<=r||r<=s.toExpNeg,e)),n};dr.toSignificantDigits=dr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(UA(e,1,Yx),t===void 0?t=n.rounding:UA(t,0,8)),Ba(new n(r),e,t)};dr.toString=dr.valueOf=dr.val=dr.toJSON=dr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=pi(e),r=e.constructor;return Kp(e,t<=r.toExpNeg||t>=r.toExpPos)};function yoe(e,t){var r,n,a,s,i,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ja?Ba(t,f):t;if(l=e.d,u=t.d,i=e.e,a=t.e,l=l.slice(),s=i-a,s){for(s<0?(n=l,s=-s,o=u.length):(n=u,a=i,o=l.length),i=Math.ceil(f/Ma),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=l.length,s=u.length,o-s<0&&(s=o,n=u,u=l,l=n),r=0;s;)r=(l[--s]=l[s]+u[s]+r)/$i|0,l[s]%=$i;for(r&&(l.unshift(r),++a),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=a,Ja?Ba(t,f):t}function UA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(kp+e)}function CA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=Ma-n.length,r&&(s+=f0(r)),s+=n;i=e[t],n=i+"",r=Ma-n.length,r&&(s+=f0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var $f=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%$i|0,i=s/$i|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,l;if(s!=i)l=s>i?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=a[o]){l=n[o]>a[o]?1:-1;break}return l}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*$i+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,l,u,d,f,h,p,g,v,b,y,_,S,k,B,F,w,C,N=n.constructor,R=n.s==a.s?1:-1,O=n.d,j=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(Ou+"Division by zero");for(l=n.e-a.e,w=j.length,B=O.length,p=new N(R),g=p.d=[],u=0;j[u]==(O[u]||0);)++u;if(j[u]>(O[u]||0)&&--l,s==null?_=s=N.precision:i?_=s+(pi(n)-pi(a))+1:_=s,_<0)return new N(0);if(_=_/Ma+2|0,u=0,w==1)for(d=0,j=j[0],_++;(u<B||d)&&_--;u++)S=d*$i+(O[u]||0),g[u]=S/j|0,d=S%j|0;else{for(d=$i/(j[0]+1)|0,d>1&&(j=e(j,d),O=e(O,d),w=j.length,B=O.length),k=w,v=O.slice(0,w),b=v.length;b<w;)v[b++]=0;C=j.slice(),C.unshift(0),F=j[0],j[1]>=$i/2&&++F;do d=0,o=t(j,v,w,b),o<0?(y=v[0],w!=b&&(y=y*$i+(v[1]||0)),d=y/F|0,d>1?(d>=$i&&(d=$i-1),f=e(j,d),h=f.length,b=v.length,o=t(f,v,h,b),o==1&&(d--,r(f,w<h?C:j,h))):(d==0&&(o=d=1),f=j.slice()),h=f.length,h<b&&f.unshift(0),r(v,f,b),o==-1&&(b=v.length,o=t(j,v,w,b),o<1&&(d++,r(v,w<b?C:j,b))),b=v.length):o===0&&(d++,v=[0]),g[u++]=d,o&&v[0]?v[b++]=O[k]||0:(v=[O[k]],b=1);while((k++<B||v[0]!==void 0)&&_--)}return g[0]||g.shift(),p.e=l,Ba(p,i?s+pi(p)+1:s)}}();function woe(e,t){var r,n,a,s,i,o,l=0,u=0,d=e.constructor,f=d.precision;if(pi(e)>16)throw Error(jP+pi(e));if(!e.s)return new d(Nc);for(Ja=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Wm(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(Nc),d.precision=o;;){if(a=Ba(a.times(e),o),r=r.times(++l),i=s.plus($f(a,r,o)),CA(i.d).slice(0,o)===CA(s.d).slice(0,o)){for(;u--;)s=Ba(s.times(s),o);return d.precision=f,t==null?(Ja=!0,Ba(s,f)):s}s=i}}function pi(e){for(var t=e.e*Ma,r=e.d[0];r>=10;r/=10)t++;return t}function nI(e,t,r){if(t>e.LN10.sd())throw Ja=!0,r&&(e.precision=r),Error(Ou+"LN10 precision limit exceeded");return Ba(new e(e.LN10),t)}function f0(e){for(var t="";e--;)t+="0";return t}function dw(e,t){var r,n,a,s,i,o,l,u,d,f=1,h=10,p=e,g=p.d,v=p.constructor,b=v.precision;if(p.s<1)throw Error(Ou+(p.s?"NaN":"-Infinity"));if(p.eq(Nc))return new v(0);if(t==null?(Ja=!1,u=b):u=t,p.eq(10))return t==null&&(Ja=!0),nI(v,u);if(u+=h,v.precision=u,r=CA(g),n=r.charAt(0),s=pi(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=CA(p.d),n=r.charAt(0),f++;s=pi(p),n>1?(p=new v("0."+r),s++):p=new v(n+"."+r.slice(1))}else return l=nI(v,u+2,b).times(s+""),p=dw(new v(n+"."+r.slice(1)),u-h).plus(l),v.precision=b,t==null?(Ja=!0,Ba(p,b)):p;for(o=i=p=$f(p.minus(Nc),p.plus(Nc),u),d=Ba(p.times(p),u),a=3;;){if(i=Ba(i.times(d),u),l=o.plus($f(i,new v(a),u)),CA(l.d).slice(0,u)===CA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(nI(v,u+2,b).times(s+""))),o=$f(o,new v(f),u),v.precision=b,t==null?(Ja=!0,Ba(o,b)):o;o=l,a+=2}}function BG(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Jx(r/Ma),e.d=[],n=(r+1)%Ma,r<0&&(n+=Ma),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ma;n<a;)e.d.push(+t.slice(n,n+=Ma));t=t.slice(n),n=Ma-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ja&&(e.e>f5||e.e<-f5))throw Error(jP+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ba(e,t,r){var n,a,s,i,o,l,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=Ma,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ma),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=Ma,a=n-Ma+i}if(r!==void 0&&(s=Wm(10,i-a-1),o=u/s%10|0,l=t<0||f[d+1]!==void 0||u%s,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?a>0?u/Wm(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(s=pi(e),f.length=1,t=t-s-1,f[0]=Wm(10,(Ma-t%Ma)%Ma),e.e=Jx(-t/Ma)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Wm(10,Ma-n),f[d]=a>0?(u/Wm(10,i-a)%Wm(10,a)|0)*s:0),l)for(;;)if(d==0){(f[0]+=s)==$i&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=$i)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Ja&&(e.e>f5||e.e<-f5))throw Error(jP+pi(e));return e}function Eoe(e,t){var r,n,a,s,i,o,l,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ja?Ba(t,p):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),i=u-n,i){for(d=i<0,d?(r=l,i=-i,o=f.length):(r=f,n=u,o=l.length),a=Math.max(Math.ceil(p/Ma),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=l.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(l[a]!=f[a]){d=l[a]<f[a];break}i=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,a=f.length-o;a>0;--a)l[o++]=0;for(a=f.length;a>i;){if(l[--a]<f[a]){for(s=a;s&&l[--s]===0;)l[s]=$i-1;--l[s],l[a]+=$i}l[a]-=f[a]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Ja?Ba(t,p):t):new h(0)}function Kp(e,t,r){var n,a=pi(e),s=CA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+f0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+f0(-a-1)+s,r&&(n=r-i)>0&&(s+=f0(n))):a>=i?(s+=f0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+f0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=f0(n))),e.s<0?"-"+s:s}function TG(e,t){if(e.length>t)return e.length=t,!0}function Coe(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(kp+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return BG(i,s.toString())}else if(typeof s!="string")throw Error(kp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,QJe.test(s))BG(i,s);else throw Error(kp+s)}if(a.prototype=dr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Coe,a.config=a.set=HJe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function HJe(e){if(!e||typeof e!="object")throw Error(Ou+"Object expected");var t,r,n,a=["precision",1,Yx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Jx(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(kp+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(kp+r+": "+n);return this}var FP=Coe(UJe);Nc=new FP(1);const ma=FP;var VJe=e=>e,_oe={},Soe=e=>e===_oe,IG=e=>function t(){return arguments.length===0||arguments.length===1&&Soe(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Noe=(e,t)=>e===1?t:IG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==_oe).length;return s>=e?t(...n):Noe(e-s,IG(function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=n.map(d=>Soe(d)?o.shift():d);return t(...u,...o)}))}),_4=e=>Noe(e.length,e),v6=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},zJe=_4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),$Je=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return VJe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,l)=>l(o),s(...arguments))}},x6=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),koe=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var l;return i===((l=t)===null||l===void 0?void 0:l[o])})||(t=a,r=e(...a)),r}};function Boe(e){var t;return e===0?t=1:t=Math.floor(new ma(e).abs().log(10).toNumber())+1,t}function Toe(e,t,r){for(var n=new ma(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}_4((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});_4((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});_4((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Ioe=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},joe=(e,t,r)=>{if(e.lte(0))return new ma(0);var n=Boe(e.toNumber()),a=new ma(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new ma(Math.ceil(s.div(i).toNumber())).add(r).mul(i),l=o.mul(a);return t?new ma(l.toNumber()):new ma(Math.ceil(l.toNumber()))},KJe=(e,t,r)=>{var n=new ma(1),a=new ma(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ma(10).pow(Boe(e)-1),a=new ma(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ma(Math.floor(e)))}else e===0?a=new ma(Math.floor((t-1)/2)):r||(a=new ma(Math.floor(e)));var i=Math.floor((t-1)/2),o=$Je(zJe(l=>a.add(new ma(l-i).mul(n)).toNumber()),v6);return o(0,t)},Foe=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ma(0),tickMin:new ma(0),tickMax:new ma(0)};var i=joe(new ma(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new ma(0):(o=new ma(t).add(r).div(2),o=o.sub(new ma(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ma(r).sub(o).div(i).toNumber()),d=l+u+1;return d>n?Foe(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,l=r>0?l:l+(n-d)),{step:i,tickMin:o.sub(new ma(l).mul(i)),tickMax:o.add(new ma(u).mul(i))})};function GJe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=Ioe([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...v6(0,n-1).map(()=>1/0)]:[...v6(0,n-1).map(()=>-1/0),o];return t>r?x6(l):l}if(i===o)return KJe(i,n,a);var{step:u,tickMin:d,tickMax:f}=Foe(i,o,s,a,0),h=Toe(d,f.add(new ma(.1).mul(u)),u);return t>r?x6(h):h}function qJe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Ioe([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),l=joe(new ma(i).sub(s).div(o-1),a,0),u=[...Toe(new ma(s),new ma(i),l),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?x6(u):u}var WJe=koe(GJe),XJe=koe(qJe),Ooe=e=>e.rootProps.maxBarSize,YJe=e=>e.rootProps.barGap,Doe=e=>e.rootProps.barCategoryGap,JJe=e=>e.rootProps.barSize,e2=e=>e.rootProps.stackOffset,OP=e=>e.options.chartName,DP=e=>e.rootProps.syncId,Roe=e=>e.rootProps.syncMethod,RP=e=>e.options.eventEmitter,xA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Hl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},S4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},ZJe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:xA.angleAxisId,includeHidden:!1,name:void 0,reversed:xA.reversed,scale:xA.scale,tick:xA.tick,tickCount:void 0,ticks:void 0,type:xA.type,unit:void 0},eZe={allowDataOverflow:Hl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hl.scale,tick:Hl.tick,tickCount:Hl.tickCount,ticks:void 0,type:Hl.type,unit:void 0},tZe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:xA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xA.scale,tick:xA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},rZe={allowDataOverflow:Hl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hl.scale,tick:Hl.tick,tickCount:Hl.tickCount,ticks:void 0,type:"category",unit:void 0},Zx=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?tZe:ZJe,t2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?rZe:eZe,N4=e=>e.polarOptions,PP=ct([mh,ph,Ti],Kie),Poe=ct([N4,PP],(e,t)=>{if(e!=null)return xl(e.innerRadius,t,0)}),Loe=ct([N4,PP],(e,t)=>{if(e!=null)return xl(e.outerRadius,t,t*.8)}),nZe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Moe=ct([N4],nZe),aZe=ct([Zx,Moe],S4),Uoe=ct([PP,Poe,Loe],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),sZe=ct([t2,Uoe],S4),e1=ct([Tn,N4,Poe,Loe,mh,ph],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:l,endAngle:u}=t;return{cx:xl(i,a,a/2),cy:xl(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),Ta=(e,t)=>t,r2=(e,t,r)=>r;function LP(e){return e==null?void 0:e.id}var Ii=e=>{var t=Tn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},t1=e=>e.tooltip.settings.axisId,ji=e=>{var t=Ii(e),r=t1(e);return r1(e,t,r)};function Qoe(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,l=(o=i.data)!==null&&o!==void 0?o:n;if(!(l==null||l.length===0)){var u=LP(i);l.forEach((d,f)=>{var h=a==null?f:String(Ra(d,a,null)),p=Ra(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:p}),s.set(h,g)})}}),Array.from(s.values())}function k4(e){return e.stackId!=null&&e.dataKey!=null}function jG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function h5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jG(Object(r),!0).forEach(function(n){iZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iZe(e,t,r){return(t=oZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oZe(e){var t=lZe(e,"string");return typeof t=="symbol"?t:t+""}function lZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b6=[0,"auto"],bc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},gh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??bc},yc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:b6,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:y4},gm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??yc},cZe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},MP=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??cZe},Zs=(e,t,r)=>{switch(t){case"xAxis":return gh(e,r);case"yAxis":return gm(e,r);case"zAxis":return MP(e,r);case"angleAxis":return Zx(e,r);case"radiusAxis":return t2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},uZe=(e,t,r)=>{switch(t){case"xAxis":return gh(e,r);case"yAxis":return gm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},r1=(e,t,r)=>{switch(t){case"xAxis":return gh(e,r);case"yAxis":return gm(e,r);case"angleAxis":return Zx(e,r);case"radiusAxis":return t2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Hoe=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function UP(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var QP=e=>e.graphicalItems.cartesianItems,dZe=ct([Ta,r2],UP),HP=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),n2=ct([QP,Zs,dZe],HP),Voe=ct([n2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(k4)),zoe=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),$oe=ct([n2],zoe),VP=e=>e.map(t=>t.data).filter(Boolean).flat(1),AZe=ct([n2],VP),zP=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},$P=ct([AZe,IP],zP),KP=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ra(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Ra(a,n)}))):e.map(n=>({value:n})),B4=ct([$P,Zs,n2],KP);function Koe(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function lg(e){return e.filter(t=>MA(t)||t instanceof Date).map(Number).filter(t=>Dc(t)===!1)}function fZe(e,t,r){return!r||typeof t!="number"||Dc(t)?[]:r.length?lg(r.flatMap(n=>{var a=Ra(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Lc(s)||!Lc(i)))return[t-s,t+i]})):[]}var hZe=ct([Voe,IP,ji],Qoe),Goe=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,l=o.map(LP);return[i,{stackedData:rYe(e,l,r),graphicalItems:o}]}))},y6=ct([hZe,Voe,e2],Goe),qoe=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=oYe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},mZe=ct([y6,pm,Ta],qoe),Woe=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>Koe(a,f)),d=Ra(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:fZe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ra(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),T4=e=>e.errorBars,Xoe=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Koe(r,n));ct([$oe,T4,Ta],Xoe);var pZe=ct([$P,Zs,$oe,T4,Ta],Woe);function gZe(e){var{value:t}=e;if(MA(t)||t instanceof Date)return t}var FG=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=lg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},vZe=(e,t,r)=>{var n=e.map(gZe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&oie(n))?xoe(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},GP=e=>{var t;if(e==null||!("domain"in e))return b6;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=lg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:b6},m5=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},Yoe=e=>e.referenceElements.dots,n1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),xZe=ct([Yoe,Ta,r2],n1),Joe=e=>e.referenceElements.areas,bZe=ct([Joe,Ta,r2],n1),Zoe=e=>e.referenceElements.lines,yZe=ct([Zoe,Ta,r2],n1),ele=(e,t)=>{var r=lg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},wZe=ct(xZe,Ta,ele),tle=(e,t)=>{var r=lg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},EZe=ct([bZe,Ta],tle),rle=(e,t)=>{var r=lg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},CZe=ct(yZe,Ta,rle),_Ze=ct(wZe,CZe,EZe,(e,t,r)=>m5(e,r,t)),nle=ct([Zs],GP),qP=(e,t,r,n,a,s,i)=>{var o=LJe(t,e.allowDataOverflow);if(o!=null)return o;var l=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=l?m5(r,a,FG(n)):m5(a,FG(n));return MJe(t,u,e.allowDataOverflow)},SZe=ct([Zs,nle,mZe,pZe,_Ze,Tn,Ta],qP),NZe=[0,1],WP=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:l}=e,u=mm(t,s);return u&&o==null?xoe(0,r.length):l==="category"?vZe(n,e,u):a==="expand"?NZe:i}},XP=ct([Zs,Tn,$P,B4,e2,Ta,SZe],WP),ale=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(Yw(s));return o in zb?o:"point"}}},vm=ct([Zs,Tn,Hoe,OP,Ta],ale);function kZe(e){if(e!=null){if(e in zb)return zb[e]();var t="scale".concat(Yw(e));if(t in zb)return zb[t]()}}function I4(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=kZe(t);if(a!=null){var s=a.domain(r).range(n);return YXe(s),s}}}var YP=(e,t,r)=>{var n=GP(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Nx(e))return WJe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Nx(e))return XJe(e,t.tickCount,t.allowDecimals)}},JP=ct([XP,r1,vm],YP),ZP=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Nx(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},BZe=ct([Zs,XP,JP,Ta],ZP),TZe=ct(B4,Zs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(lg(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),sle=ct(TZe,Tn,Doe,Ti,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Lc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=xl(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),IZe=(e,t)=>{var r=gh(e,t);return r==null||typeof r.padding!="string"?0:sle(e,"xAxis",t,r.padding)},jZe=(e,t)=>{var r=gm(e,t);return r==null||typeof r.padding!="string"?0:sle(e,"yAxis",t,r.padding)},FZe=ct(gh,IZe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),OZe=ct(gm,jZe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),DZe=ct([Ti,FZe,E4,w4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),RZe=ct([Ti,Tn,OZe,E4,w4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),a2=(e,t,r,n)=>{var a;switch(t){case"xAxis":return DZe(e,r,n);case"yAxis":return RZe(e,r,n);case"zAxis":return(a=MP(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Moe(e);case"radiusAxis":return Uoe(e,r);default:return}},ile=ct([Zs,a2],S4),a1=ct([Zs,vm,BZe,ile],I4);ct([n2,T4,Ta],Xoe);function ole(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var j4=(e,t)=>t,F4=(e,t,r)=>r,PZe=ct(SP,j4,F4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(ole)),LZe=ct(NP,j4,F4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(ole)),lle=(e,t)=>({width:e.width,height:t.height}),MZe=(e,t)=>{var r=typeof t.width=="number"?t.width:y4;return{width:r,height:e.height}},cle=ct(Ti,gh,lle),UZe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},QZe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},HZe=ct(ph,Ti,PZe,j4,F4,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var l=lle(t,o);i==null&&(i=UZe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*l.height,i+=(u?-1:1)*l.height}),s}),VZe=ct(mh,Ti,LZe,j4,F4,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var l=MZe(t,o);i==null&&(i=QZe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*l.width,i+=(u?-1:1)*l.width}),s}),zZe=(e,t)=>{var r=Ti(e),n=gh(e,t);if(n!=null){var a=HZe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},$Ze=(e,t)=>{var r=Ti(e),n=gm(e,t);if(n!=null){var a=VZe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},ule=ct(Ti,gm,(e,t)=>{var r=typeof t.width=="number"?t.width:y4;return{width:r,height:e.height}}),OG=(e,t,r)=>{switch(t){case"xAxis":return cle(e,r).width;case"yAxis":return ule(e,r).height;default:return}},dle=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=mm(e,n),l=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&oie(l))return l}},s2=ct([Tn,B4,Zs,Ta],dle),eL=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=mm(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},tL=ct([Tn,B4,r1,Ta],eL),DG=ct([Tn,uZe,vm,a1,s2,tL,a2,JP,Ta],(e,t,r,n,a,s,i,o,l)=>{if(t==null)return null;var u=mm(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),Ale=(e,t,r,n,a,s,i,o,l)=>{if(!(t==null||n==null)){var u=mm(e,l),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=l==="angleAxis"&&s!=null&&s.length>=2?Xi(s[0]-s[1])*2*g:g;var v=f||a;if(v){var b=v.map((y,_)=>{var S=i?i.indexOf(y):y;return{index:_,coordinate:n(S)+g,value:y,offset:g}});return b.filter(y=>!Dc(y.coordinate))}return u&&o?o.map((y,_)=>({coordinate:n(y)+g,value:y,index:_,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,_)=>({coordinate:n(y)+g,value:i?i[y]:y,index:_,offset:g}))}},fle=ct([Tn,r1,vm,a1,JP,a2,s2,tL,Ta],Ale),hle=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=mm(e,i),{tickCount:l}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Xi(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},kx=ct([Tn,r1,a1,a2,s2,tL,Ta],hle),Bx=ct(Zs,a1,(e,t)=>{if(!(e==null||t==null))return h5(h5({},e),{},{scale:t})}),KZe=ct([Zs,vm,XP,ile],I4);ct((e,t,r)=>MP(e,r),KZe,(e,t)=>{if(!(e==null||t==null))return h5(h5({},e),{},{scale:t})});var GZe=ct([Tn,SP,NP],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),mle=e=>e.options.defaultTooltipEventType,ple=e=>e.options.validateTooltipEventTypes;function gle(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function rL(e,t){var r=mle(e),n=ple(e);return gle(t,r,n)}function qZe(e){return ir(t=>rL(t,e))}var vle=(e,t)=>{var r,n=Number(t);if(!(Dc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},WZe=e=>e.tooltip.settings,b0={active:!1,index:null,dataKey:void 0,coordinate:void 0},XZe={itemInteraction:{click:b0,hover:b0},axisInteraction:{click:b0,hover:b0},keyboardInteraction:b0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},xle=Mc({name:"tooltip",initialState:XZe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=zf(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:YZe,removeTooltipEntrySettings:JZe,setTooltipSettingsState:ZZe,setActiveMouseOverItemIndex:ble,mouseLeaveItem:eet,mouseLeaveChart:yle,setActiveClickItemIndex:tet,setMouseOverAxisIndex:wle,setMouseClickAxisIndex:ret,setSyncInteraction:w6,setKeyboardInteraction:E6}=xle.actions,net=xle.reducer;function RG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RG(Object(r),!0).forEach(function(n){aet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aet(e,t,r){return(t=set(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function set(e){var t=iet(e,"string");return typeof t=="symbol"?t:t+""}function iet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oet(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function cet(e){return e.index!=null}var Ele=(e,t,r,n)=>{if(t==null)return b0;var a=oet(e,t,r);if(a==null)return b0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(cet(a)){if(s)return jC(jC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return jC(jC({},b0),{},{coordinate:a.coordinate})},nL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Lc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Cle=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var l=i[0],u=l==null?void 0:o(l.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},_le=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},i2=e=>e.options.tooltipPayloadSearcher,s1=e=>e.tooltip;function PG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PG(Object(r),!0).forEach(function(n){uet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uet(e,t,r){return(t=det(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function det(e){var t=Aet(e,"string");return typeof t=="symbol"?t:t+""}function Aet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fet(e,t){return e??t}var Sle=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:v,settings:b}=p,y=fet(v,o),_=Array.isArray(y)?qie(y,u,d):y,S=(g=b==null?void 0:b.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,k=b==null?void 0:b.nameKey,B;if(n!=null&&n.dataKey&&Array.isArray(_)&&!Array.isArray(_[0])&&i==="axis"?B=Tqe(_,n.dataKey,a):B=s(_,t,l,k),Array.isArray(B))B.forEach(w=>{var C=LG(LG({},b),{},{name:w.name,unit:w.unit,color:void 0,fill:void 0});h.push(rG({tooltipEntrySettings:C,dataKey:w.dataKey,payload:w.payload,value:Ra(w.payload,w.dataKey),name:w.name}))});else{var F;h.push(rG({tooltipEntrySettings:b,dataKey:S,payload:B,value:Ra(B,S),name:(F=Ra(B,k))!==null&&F!==void 0?F:b==null?void 0:b.name}))}return h},f)}},aL=ct([ji,Tn,Hoe,OP,Ii],ale),het=ct([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),met=ct([Ii,t1],UP),o2=ct([het,ji,met],HP),pet=ct([o2],e=>e.filter(k4)),get=ct([o2],VP),i1=ct([get,pm],zP),vet=ct([pet,pm,ji],Qoe),sL=ct([i1,ji,o2],KP),xet=ct([ji],GP),bet=ct([o2],e=>e.filter(k4)),yet=ct([vet,bet,e2],Goe),wet=ct([yet,pm,Ii],qoe),Eet=ct([o2],zoe),Cet=ct([i1,ji,Eet,T4,Ii],Woe),_et=ct([Yoe,Ii,t1],n1),Net=ct([_et,Ii],ele),ket=ct([Joe,Ii,t1],n1),Bet=ct([ket,Ii],tle),Tet=ct([Zoe,Ii,t1],n1),Iet=ct([Tet,Ii],rle),jet=ct([Net,Iet,Bet],m5),Fet=ct([ji,xet,wet,Cet,jet,Tn,Ii],qP),Nle=ct([ji,Tn,i1,sL,e2,Ii,Fet],WP),Oet=ct([Nle,ji,aL],YP),Det=ct([ji,Nle,Oet,Ii],ZP),kle=e=>{var t=Ii(e),r=t1(e),n=!1;return a2(e,t,r,n)},Ble=ct([ji,kle],S4),Tle=ct([ji,aL,Det,Ble],I4),Ret=ct([Tn,sL,ji,Ii],dle),Pet=ct([Tn,sL,ji,Ii],eL),Let=(e,t,r,n,a,s,i,o)=>{if(t){var{type:l}=t,u=mm(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Xi(a[0]-a[1])*2*f:f,u&&i?i.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},vh=ct([Tn,ji,aL,Tle,kle,Ret,Pet,Ii],Let),iL=ct([mle,ple,WZe],(e,t,r)=>gle(r.shared,e,t)),Ile=e=>e.tooltip.settings.trigger,oL=e=>e.tooltip.settings.defaultIndex,O4=ct([s1,iL,Ile,oL],Ele),sm=ct([O4,i1],nL),jle=ct([vh,sm],vle),Fle=ct([O4],e=>{if(e)return e.dataKey}),Ole=ct([s1,iL,Ile,oL],_le),Met=ct([mh,ph,Tn,Ti,vh,oL,Ole,i2],Cle),Uet=ct([O4,Met],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Qet=ct([O4],e=>e.active),Het=ct([Ole,sm,pm,ji,jle,i2,iL],Sle),Vet=ct([Het],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function MG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MG(Object(r),!0).forEach(function(n){zet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zet(e,t,r){return(t=$et(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $et(e){var t=Ket(e,"string");return typeof t=="symbol"?t:t+""}function Ket(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Get=()=>ir(ji),qet=()=>{var e=Get(),t=ir(vh),r=ir(Tle);return cw(UG(UG({},e),{},{scale:r}),t)},Wet=()=>ir(OP),lL=(e,t)=>t,Dle=(e,t,r)=>r,cL=(e,t,r,n)=>n,Xet=ct(vh,e=>h4(e,t=>t.coordinate)),uL=ct([s1,lL,Dle,cL],Ele),Rle=ct([uL,i1],nL),Yet=(e,t,r)=>{if(t!=null){var n=s1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Ple=ct([s1,lL,Dle,cL],_le),p5=ct([mh,ph,Tn,Ti,vh,cL,Ple,i2],Cle),Jet=ct([uL,p5],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Lle=ct(vh,Rle,vle),Zet=ct([Ple,Rle,pm,ji,Lle,i2,lL],Sle),ett=ct([uL],e=>({isActive:e.active,activeIndex:e.index})),ttt=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var l=lYe(e.chartX,e.chartY,t,r,o);if(l){var u=uYe(l,t),d=WXe(u,i,s,n,a),f=cYe(t,s,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function C6(){return C6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C6.apply(null,arguments)}function QG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QG(Object(r),!0).forEach(function(n){rtt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rtt(e,t,r){return(t=ntt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ntt(e){var t=att(e,"string");return typeof t=="symbol"?t:t+""}function att(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function stt(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:l,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&l!=="axis")return null;var p,g;if(u==="ScatterChart")p=d,g=GYe;else if(u==="BarChart")p=qYe(i,d,a,s),g=moe;else if(i==="radial"){var{cx:v,cy:b,radius:y,startAngle:_,endAngle:S}=poe(d);p={cx:v,cy:b,startAngle:_,endAngle:S,innerRadius:y,outerRadius:y},g=voe}else p={points:jJe(i,d,a)},g=loe;var k=typeof o=="object"&&"className"in o?o.className:void 0,B=FC(FC(FC(FC({stroke:"#ccc",pointerEvents:"none"},a),p),Wn(o,!1)),{},{payload:f,payloadIndex:h,className:En("recharts-tooltip-cursor",k)});return I.isValidElement(o)?I.cloneElement(o,B):I.createElement(g,B)}function itt(e){var t=qet(),r=toe(),n=BP(),a=Wet();return I.createElement(stt,C6({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var Mle=I.createContext(null),ott=()=>I.useContext(Mle),aI={exports:{}},HG;function ltt(){return HG||(HG=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||l,h),g=r?r+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var v=r?r+u:u;if(!this._events[v])return!1;var b=this._events[v],y=arguments.length,_,S;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,g),!0}for(S=1,_=new Array(y-1);S<y;S++)_[S-1]=arguments[S];b.fn.apply(b.context,_)}else{var k=b.length,B;for(S=0;S<k;S++)switch(b[S].once&&this.removeListener(u,b[S].fn,void 0,!0),y){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,d);break;case 3:b[S].fn.call(b[S].context,d,f);break;case 4:b[S].fn.call(b[S].context,d,f,h);break;default:if(!_)for(B=1,_=new Array(y-1);B<y;B++)_[B-1]=arguments[B];b[S].fn.apply(b[S].context,_)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,p);else{for(var v=0,b=[],y=g.length;v<y;v++)(g[v].fn!==d||h&&!g[v].once||f&&g[v].context!==f)&&b.push(g[v]);b.length?this._events[p]=b.length===1?b[0]:b:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(aI)),aI.exports}var ctt=ltt();const utt=bl(ctt);var Aw=new utt,_6="recharts.syncEvent.tooltip",VG="recharts.syncEvent.brush";function dL(e,t){if(t){var r=Number.parseInt(t,10);if(!Dc(r))return e==null?void 0:e[r]}}var dtt={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Ule=Mc({name:"options",initialState:dtt,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Att=Ule.reducer,{createEventEmitter:ftt}=Ule.actions;function htt(e){return e.tooltip.syncInteraction}var mtt={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Qle=Mc({name:"chartData",initialState:mtt,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:zG,setDataStartEndIndexes:ptt,setComputedData:nut}=Qle.actions,gtt=Qle.reducer,Hle=()=>{};function vtt(){var e=ir(DP),t=ir(RP),r=us(),n=ir(Roe),a=ir(vh),s=BP(),i=kP(),o=ir(l=>l.rootProps.className);I.useEffect(()=>{if(e==null)return Hle;var l=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,p);h=a[g]}else n==="value"&&(h=a.find(F=>String(F.value)===d.payload.label));var{coordinate:v}=d.payload;if(h==null||d.payload.active===!1||v==null||i==null){r(w6({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=v,_=Math.min(b,i.x+i.width),S=Math.min(y,i.y+i.height),k={x:s==="horizontal"?h.coordinate:_,y:s==="horizontal"?S:h.coordinate},B=w6({active:d.payload.active,coordinate:k,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(B)}}};return Aw.on(_6,l),()=>{Aw.off(_6,l)}},[o,r,t,e,n,a,s,i])}function xtt(){var e=ir(DP),t=ir(RP),r=us();I.useEffect(()=>{if(e==null)return Hle;var n=(a,s,i)=>{t!==i&&e===a&&r(ptt(s))};return Aw.on(VG,n),()=>{Aw.off(VG,n)}},[r,t,e])}function btt(){var e=us();I.useEffect(()=>{e(ftt())},[e]),vtt(),xtt()}function ytt(e,t,r,n,a,s){var i=ir(h=>Yet(h,e,t)),o=ir(RP),l=ir(DP),u=ir(Roe),d=ir(htt),f=d==null?void 0:d.active;I.useEffect(()=>{if(!f&&l!=null&&o!=null){var h=w6({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});Aw.emit(_6,l,h,o)}},[f,r,i,a,n,o,l,u,s])}function $G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$G(Object(r),!0).forEach(function(n){wtt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$G(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wtt(e,t,r){return(t=Ett(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ett(e){var t=Ctt(e,"string");return typeof t=="symbol"?t:t+""}function Ctt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _tt(e){return e.dataKey}function Stt(e,t){return I.isValidElement(e)?I.cloneElement(e,t):typeof e=="function"?I.createElement(e,t):I.createElement(_Ye,t)}var GG=[],Ntt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!og.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function OC(e){var t=Pu(e,Ntt),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:g,cursor:v,shared:b,trigger:y,defaultIndex:_,portal:S,axisId:k}=t,B=us(),F=typeof _=="number"?String(_):_;I.useEffect(()=>{B(ZZe({shared:b,trigger:y,axisId:k,active:r,defaultIndex:F}))},[B,b,y,k,r,F]);var w=kP(),C=ooe(),N=qZe(b),{activeIndex:R,isActive:O}=ir(te=>ett(te,N,y,F)),j=ir(te=>Zet(te,N,y,F)),U=ir(te=>Lle(te,N,y,F)),P=ir(te=>Jet(te,N,y,F)),X=j,K=ott(),Z=r??O,[H,V]=MWe([X,Z]),q=N==="axis"?U:void 0;ytt(N,y,P,q,R,Z);var ne=S??K;if(ne==null)return null;var L=X??GG;Z||(L=GG),o&&L.length&&(L=pWe(X.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),d,_tt));var W=L.length>0,J=I.createElement(jYe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:l,active:Z,coordinate:P,hasPayload:W,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:w,wrapperStyle:g,lastBoundingBox:H,innerRef:V,hasPortalFromProps:!!S},Stt(i,KG(KG({},t),{},{payload:L,label:q,active:Z,coordinate:P,accessibilityLayer:C})));return I.createElement(I.Fragment,null,fne.createPortal(J,ne),Z&&I.createElement(itt,{cursor:v,tooltipEventType:N,coordinate:P,payload:X,index:R}))}var sI={},iI={},oI={},qG;function ktt(){return qG||(qG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const l=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),v()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{g(),i=void 0,o=null},b=()=>{d()},y=function(..._){if(a!=null&&a.aborted)return;i=this,o=_;const S=h==null;p(),l&&S&&d()};return y.schedule=p,y.cancel=v,y.flush=b,a==null||a.addEventListener("abort",v,{once:!0}),y}e.debounce=t}(oI)),oI}var WG;function Btt(){return WG||(WG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ktt();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:l}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...v){d=n.apply(this,v),f=null},a,{edges:u}),p=function(...v){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,v),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,v),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r}(iI)),iI}var XG;function Ttt(){return XG||(XG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Btt();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(sI)),sI}var lI,YG;function Itt(){return YG||(YG=1,lI=Ttt().throttle),lI}var jtt=Itt();const Ftt=bl(jtt);var my=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function JG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JG(Object(r),!0).forEach(function(n){Ott(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ott(e,t,r){return(t=Dtt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dtt(e){var t=Rtt(e,"string");return typeof t=="symbol"?t:t+""}function Rtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DC=I.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,v=I.useRef(null),b=I.useRef();b.current=p,I.useImperativeHandle(t,()=>v.current);var[y,_]=I.useState({containerWidth:n.width,containerHeight:n.height}),S=I.useCallback((B,F)=>{_(w=>{var C=Math.round(B),N=Math.round(F);return w.containerWidth===C&&w.containerHeight===N?w:{containerWidth:C,containerHeight:N}})},[]);I.useEffect(()=>{var B=N=>{var R,{width:O,height:j}=N[0].contentRect;S(O,j),(R=b.current)===null||R===void 0||R.call(b,O,j)};d>0&&(B=Ftt(B,d,{trailing:!0,leading:!1}));var F=new ResizeObserver(B),{width:w,height:C}=v.current.getBoundingClientRect();return S(w,C),F.observe(v.current),()=>{F.disconnect()}},[S,d]);var k=I.useMemo(()=>{var{containerWidth:B,containerHeight:F}=y;if(B<0||F<0)return null;my(op(a)||op(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),my(!r||r>0,"The aspect(%s) must be greater than zero.",r);var w=op(a)?B:a,C=op(s)?F:s;return r&&r>0&&(w?C=w/r:C&&(w=C*r),l&&C>l&&(C=l)),my(w>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,w,C,a,s,i,o,r),I.Children.map(u,N=>I.cloneElement(N,{width:w,height:C,style:cI({width:w,height:C},N.props.style)}))},[r,u,s,l,o,i,y,a]);return I.createElement("div",{id:f?"".concat(f):void 0,className:En("recharts-responsive-container",h),style:cI(cI({},g),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:l}),ref:v},I.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),l2=e=>null;l2.displayName="Cell";function Ptt(e,t,r){return(t=Ltt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ltt(e){var t=Mtt(e,"string");return typeof t=="symbol"?t:t+""}function Mtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Utt{constructor(t){Ptt(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function ZG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qtt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZG(Object(r),!0).forEach(function(n){Htt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Htt(e,t,r){return(t=Vtt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vtt(e){var t=ztt(e,"string");return typeof t=="symbol"?t:t+""}function ztt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $tt={cacheSize:2e3,enableCache:!0},Vle=Qtt({},$tt),eq=new Utt(Vle.cacheSize),Ktt={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tq="recharts_measurement_span";function Gtt(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var rq=(e,t)=>{try{var r=document.getElementById(tq);r||(r=document.createElement("span"),r.setAttribute("id",tq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Ktt,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},py=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||og.isSsr)return{width:0,height:0};if(!Vle.enableCache)return rq(t,r);var n=Gtt(t,r),a=eq.get(n);if(a)return a;var s=rq(t,r);return eq.set(n,s),s},nq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qtt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Wtt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zle={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Xtt=Object.keys(zle),kv="NaN";function Ytt(e,t){return e*zle[t]}class Ml{static parse(t){var r,[,n,a]=(r=Wtt.exec(t))!==null&&r!==void 0?r:[];return new Ml(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Dc(t)&&(this.unit=""),r!==""&&!qtt.test(r)&&(this.num=NaN,this.unit=""),Xtt.includes(r)&&(this.num=Ytt(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ml(NaN,""):new Ml(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ml(NaN,""):new Ml(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ml(NaN,""):new Ml(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ml(NaN,""):new Ml(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Dc(this.num)}}function $le(e){if(e.includes(kv))return kv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=nq.exec(t))!==null&&r!==void 0?r:[],i=Ml.parse(n??""),o=Ml.parse(s??""),l=a==="*"?i.multiply(o):i.divide(o);if(l.isNaN())return kv;t=t.replace(nq,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=aq.exec(t))!==null&&u!==void 0?u:[],p=Ml.parse(d??""),g=Ml.parse(h??""),v=f==="+"?p.add(g):p.subtract(g);if(v.isNaN())return kv;t=t.replace(aq,v.toString())}return t}var sq=/\(([^()]*)\)/;function Jtt(e){for(var t=e,r;(r=sq.exec(t))!=null;){var[,n]=r;t=t.replace(sq,$le(n))}return t}function Ztt(e){var t=e.replace(/\s+/g,"");return t=Jtt(t),t=$le(t),t}function ert(e){try{return Ztt(e)}catch{return kv}}function uI(e){var t=ert(e.slice(5,-1));return t===kv?"":t}var trt=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],rrt=["dx","dy","angle","className","breakAll"];function S6(){return S6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S6.apply(null,arguments)}function iq(e,t){if(e==null)return{};var r,n,a=nrt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nrt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Kle=/[ \f\n\r\t\v\u2028\u2029]+/,Gle=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];ks(t)||(r?a=t.toString().split(""):a=t.toString().split(Kle));var s=a.map(o=>({word:o,width:py(o,n).width})),i=r?0:py(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},art=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:l}=e,u=ur(s),d=i,f=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce((j,U)=>{var{word:P,width:X}=U,K=j[j.length-1];if(K&&(n==null||a||K.width+X+r<Number(n)))K.words.push(P),K.width+=X+r;else{var Z={words:[P],width:X};j.push(Z)}return j},[])},h=f(t),p=R=>R.reduce((O,j)=>O.width>j.width?O:j);if(!u||a)return h;var g=h.length>s||p(h).width>Number(n);if(!g)return h;for(var v="…",b=R=>{var O=d.slice(0,R),j=Gle({breakAll:l,style:o,children:O+v}).wordsWithComputedWidth,U=f(j),P=U.length>s||p(U).width>Number(n);return[P,U]},y=0,_=d.length-1,S=0,k;y<=_&&S<=d.length-1;){var B=Math.floor((y+_)/2),F=B-1,[w,C]=b(F),[N]=b(B);if(!w&&!N&&(y=B+1),w&&N&&(_=B-1),!w&&N){k=C;break}S++}return k||h},oq=e=>{var t=ks(e)?[]:e.toString().split(Kle);return[{words:t}]},srt=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!og.isSsr){var o,l,u=Gle({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return oq(n);return art({breakAll:s,children:n,maxLines:i,style:a},o,l,t,r)}return oq(n)},lq="#808080",o1=I.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=lq}=e,d=iq(e,trt),f=I.useMemo(()=>srt({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:p,angle:g,className:v,breakAll:b}=d,y=iq(d,rrt);if(!MA(r)||!MA(n))return null;var _=r+(ur(h)?h:0),S=n+(ur(p)?p:0),k;switch(l){case"start":k=uI("calc(".concat(s,")"));break;case"middle":k=uI("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:k=uI("calc(".concat(f.length-1," * -").concat(a,")"));break}var B=[];if(i){var F=f[0].width,{width:w}=d;B.push("scale(".concat(ur(w)?w/F:1,")"))}return g&&B.push("rotate(".concat(g,", ").concat(_,", ").concat(S,")")),B.length&&(y.transform=B.join(" ")),I.createElement("text",S6({},Wn(y,!0),{ref:t,x:_,y:S,className:En("recharts-text",v),textAnchor:o,fill:u.includes("url")?lq:u}),f.map((C,N)=>{var R=C.words.join(b?"":" ");return I.createElement("tspan",{x:_,dy:N===0?k:a,key:"".concat(R,"-").concat(N)},R)}))});o1.displayName="Text";var irt=["offset"],ort=["labelRef"];function cq(e,t){if(e==null)return{};var r,n,a=lrt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lrt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uq(Object(r),!0).forEach(function(n){crt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function crt(e,t,r){return(t=urt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function urt(e){var t=drt(e,"string");return typeof t=="symbol"?t:t+""}function drt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tf.apply(null,arguments)}var Art=e=>{var{value:t,formatter:r}=e,n=ks(e.children)?t:e.children;return typeof r=="function"?r(n):n},AL=e=>e!=null&&typeof e=="function",frt=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},hrt=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=n,g=(u+d)/2,v=frt(f,h),b=v>=0?1:-1,y,_;a==="insideStart"?(y=f+b*s,_=p):a==="insideEnd"?(y=h-b*s,_=!p):a==="end"&&(y=h+b*s,_=p),_=v<=0?_:!_;var S=Zn(o,l,g,y),k=Zn(o,l,g,y+(_?1:-1)*359),B="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(_?0:1,`,
    `).concat(k.x,",").concat(k.y),F=ks(e.id)?iw("recharts-radial-line-"):e.id;return I.createElement("text",Tf({},r,{dominantBaseline:"central",className:En("recharts-radial-bar-label",i)}),I.createElement("defs",null,I.createElement("path",{id:F,d:B})),I.createElement("textPath",{xlinkHref:"#".concat(F)},t))},mrt=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:l}=e,u=(o+l)/2;if(r==="outside"){var{x:d,y:f}=Zn(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:p,y:g}=Zn(n,a,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},prt=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:l}=t,u=l>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,g=p*n,v=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return xs(xs({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var _={x:s+o/2,y:i+l+d,textAnchor:"middle",verticalAnchor:h};return xs(xs({},_),r?{height:Math.max(r.y+r.height-(i+l),0),width:o}:{})}if(a==="left"){var S={x:s-g,y:i+l/2,textAnchor:v,verticalAnchor:"middle"};return xs(xs({},S),r?{width:Math.max(S.x-r.x,0),height:l}:{})}if(a==="right"){var k={x:s+o+g,y:i+l/2,textAnchor:b,verticalAnchor:"middle"};return xs(xs({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:l}:{})}var B=r?{width:o,height:l}:{};return a==="insideLeft"?xs({x:s+g,y:i+l/2,textAnchor:b,verticalAnchor:"middle"},B):a==="insideRight"?xs({x:s+o-g,y:i+l/2,textAnchor:v,verticalAnchor:"middle"},B):a==="insideTop"?xs({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:h},B):a==="insideBottom"?xs({x:s+o/2,y:i+l-d,textAnchor:"middle",verticalAnchor:f},B):a==="insideTopLeft"?xs({x:s+g,y:i+d,textAnchor:b,verticalAnchor:h},B):a==="insideTopRight"?xs({x:s+o-g,y:i+d,textAnchor:v,verticalAnchor:h},B):a==="insideBottomLeft"?xs({x:s+g,y:i+l-d,textAnchor:b,verticalAnchor:f},B):a==="insideBottomRight"?xs({x:s+o-g,y:i+l-d,textAnchor:v,verticalAnchor:f},B):a&&typeof a=="object"&&(ur(a.x)||op(a.x))&&(ur(a.y)||op(a.y))?xs({x:s+xl(a.x,o),y:i+xl(a.y,l),textAnchor:"end",verticalAnchor:"end"},B):xs({x:s+o/2,y:i+l/2,textAnchor:"middle",verticalAnchor:"middle"},B)},grt=e=>"cx"in e&&ur(e.cx);function Vl(e){var{offset:t=5}=e,r=cq(e,irt),n=xs({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:l,className:u="",textBreakAll:d,labelRef:f}=n,h=ir(e1),p=kP(),g=s==="center"?p:h??p,v=a||g;if(!v||ks(i)&&ks(o)&&!I.isValidElement(l)&&typeof l!="function")return null;var b=xs(xs({},n),{},{viewBox:v});if(I.isValidElement(l)){var{labelRef:y}=b,_=cq(b,ort);return I.cloneElement(l,_)}var S;if(typeof l=="function"){if(S=I.createElement(l,b),I.isValidElement(S))return S}else S=Art(n);var k=grt(v),B=Wn(n,!0);if(k&&(s==="insideStart"||s==="insideEnd"||s==="end"))return hrt(n,S,B,v);var F=k?mrt(v,n.offset,n.position):prt(n,v);return I.createElement(o1,Tf({ref:f,className:En("recharts-label",u)},B,F,{breakAll:d}),S)}Vl.displayName="Label";var qle=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:l,outerRadius:u,x:d,y:f,top:h,left:p,width:g,height:v,clockWise:b,labelViewBox:y}=e;if(y)return y;if(ur(g)&&ur(v)){if(ur(d)&&ur(f))return{x:d,y:f,width:g,height:v};if(ur(h)&&ur(p))return{x:h,y:p,width:g,height:v}}if(ur(d)&&ur(f))return{x:d,y:f,width:0,height:0};if(ur(t)&&ur(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:l||0,outerRadius:u||o||i||0,clockWise:b};if(e.viewBox)return e.viewBox},vrt=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?I.createElement(Vl,Tf({key:"label-implicit"},n)):MA(e)?I.createElement(Vl,Tf({key:"label-implicit",value:e},n)):I.isValidElement(e)?e.type===Vl?I.cloneElement(e,xs({key:"label-implicit"},n)):I.createElement(Vl,Tf({key:"label-implicit",content:e},n)):AL(e)?I.createElement(Vl,Tf({key:"label-implicit",content:e},n)):e&&typeof e=="object"?I.createElement(Vl,Tf({},e,{key:"label-implicit"},n)):null},xrt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=qle(t),o=Jw(a,Vl).map((u,d)=>I.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var l=vrt(t.label,r||i,s);return[l,...o]};Vl.parseViewBox=qle;Vl.renderCallByParent=xrt;var dI={},AI={},dq;function brt(){return dq||(dq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(AI)),AI}var fI={},Aq;function yrt(){return Aq||(Aq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(fI)),fI}var fq;function wrt(){return fq||(fq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=brt(),r=yrt(),n=hP();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(dI)),dI}var hI,hq;function Ert(){return hq||(hq=1,hI=wrt().last),hI}var Crt=Ert();const Wle=bl(Crt);var _rt=["valueAccessor"],Srt=["data","dataKey","clockWise","id","textBreakAll"];function g5(){return g5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g5.apply(null,arguments)}function mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mq(Object(r),!0).forEach(function(n){Nrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nrt(e,t,r){return(t=krt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function krt(e){var t=Brt(e,"string");return typeof t=="symbol"?t:t+""}function Brt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gq(e,t){if(e==null)return{};var r,n,a=Trt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Trt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Irt=e=>Array.isArray(e.value)?Wle(e.value):e.value;function Q0(e){var{valueAccessor:t=Irt}=e,r=gq(e,_rt),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,l=gq(r,Srt);return!n||!n.length?null:I.createElement(cs,{className:"recharts-label-list"},n.map((u,d)=>{var f=ks(a)?t(u,d):Ra(u&&u.payload,a),h=ks(i)?{}:{id:"".concat(i,"-").concat(d)};return I.createElement(Vl,g5({},Wn(u,!0),l,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:Vl.parseViewBox(ks(s)?u:pq(pq({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Q0.displayName="LabelList";function jrt(e,t){return e?e===!0?I.createElement(Q0,{key:"labelList-implicit",data:t}):I.isValidElement(e)||AL(e)?I.createElement(Q0,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?I.createElement(Q0,g5({data:t},e,{key:"labelList-implicit"})):null:null}function Frt(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=Jw(n,Q0).map((i,o)=>I.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=jrt(e.label,t);return[s,...a]}Q0.renderCallByParent=Frt;var Ort=["points","className","baseLinePoints","connectNulls"];function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bv.apply(null,arguments)}function Drt(e,t){if(e==null)return{};var r,n,a=Rrt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Rrt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vq=e=>e&&e.x===+e.x&&e.y===+e.y,Prt=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{vq(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),vq(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},gy=(e,t)=>{var r=Prt(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},Lrt=(e,t,r)=>{var n=gy(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(gy(t.reverse(),r).slice(1))},Xle=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=Drt(e,Ort);if(!t||!t.length)return null;var i=En("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",l=Lrt(t,n,a);return I.createElement("g",{className:i},I.createElement("path",Bv({},Wn(s,!0),{fill:l.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:l})),o?I.createElement("path",Bv({},Wn(s,!0),{fill:"none",d:gy(t,a)})):null,o?I.createElement("path",Bv({},Wn(s,!0),{fill:"none",d:gy(n,a)})):null)}var u=gy(t,a);return I.createElement("path",Bv({},Wn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function N6(){return N6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N6.apply(null,arguments)}var fL=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=En("recharts-dot",a);return t===+t&&r===+r&&n===+n?I.createElement("circle",N6({},rl(e),fP(e),{className:s,cx:t,cy:r,r:n})):null},hL=e=>e.graphicalItems.polarItems,Mrt=ct([Ta,r2],UP),mL=ct([hL,Zs,Mrt],HP),Urt=ct([mL],VP),pL=ct([Urt,C4],zP),Yle=ct([pL,Zs,mL],KP),Qrt=ct([pL,Zs,mL],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Ra(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ra(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),xq=()=>{},Hrt=ct([Zs,nle,xq,Qrt,xq,Tn,Ta],qP),Jle=ct([Zs,Tn,pL,Yle,e2,Ta,Hrt],WP),Zle=ct([Jle,Zs,vm],YP),Vrt=ct([Zs,Jle,Zle,Ta],ZP),gL=(e,t,r)=>{switch(t){case"angleAxis":return Zx(e,r);case"radiusAxis":return t2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},vL=(e,t,r)=>{switch(t){case"angleAxis":return aZe(e,r);case"radiusAxis":return sZe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},l1=ct([gL,vm,Vrt,vL],I4),ece=ct([Tn,Yle,r1,Ta],eL),c1=ct([Tn,gL,vm,l1,Zle,vL,s2,ece,Ta],Ale);ct([Tn,gL,l1,vL,s2,ece,Ta],hle);var zrt=(e,t)=>c1(e,"angleAxis",t,!1),$rt=ct([zrt],e=>{if(e)return e.map(t=>t.coordinate)}),Krt=(e,t)=>c1(e,"radiusAxis",t,!1),Grt=ct([Krt],e=>{if(e)return e.map(t=>t.coordinate)}),qrt=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function Wrt(e,t){if(e==null)return{};var r,n,a=Xrt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xrt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ih(){return ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ih.apply(null,arguments)}function bq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bq(Object(r),!0).forEach(function(n){Yrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yrt(e,t,r){return(t=Jrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jrt(e){var t=Zrt(e,"string");return typeof t=="symbol"?t:t+""}function Zrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ent=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=Zn(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},tnt=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=Tx({stroke:"#ccc"},rl(e));return I.createElement("g",{className:"recharts-polar-grid-angle"},s.map(l=>{var u=Zn(t,r,n,l),d=Zn(t,r,a,l);return I.createElement("line",ih({},o,{key:"line-".concat(l),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},rnt=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=Tx(Tx({stroke:"#ccc"},rl(e)),{},{fill:"none"});return I.createElement("circle",ih({},s,{className:En("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},nnt=e=>{var{radius:t,index:r}=e,n=Tx(Tx({stroke:"#ccc"},rl(e)),{},{fill:"none"});return I.createElement("path",ih({},n,{className:En("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:ent(t,e.cx,e.cy,e.polarAngles)}))},ant=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:I.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?I.createElement(rnt,ih({key:s},e,{radius:n,index:a})):I.createElement(nnt,ih({key:s},e,{radius:n,index:a}))}))},tce=e=>{var t,r,n,a,s,i,o,l,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:p,cy:g,innerRadius:v,outerRadius:b}=e,y=Wrt(e,qrt),_=ir(e1),S=Tx({cx:(t=(r=_==null?void 0:_.cx)!==null&&r!==void 0?r:p)!==null&&t!==void 0?t:0,cy:(n=(a=_==null?void 0:_.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=_==null?void 0:_.innerRadius)!==null&&i!==void 0?i:v)!==null&&s!==void 0?s:0,outerRadius:(o=(l=_==null?void 0:_.outerRadius)!==null&&l!==void 0?l:b)!==null&&o!==void 0?o:0},y),{polarAngles:k,polarRadius:B,cx:F,cy:w,innerRadius:C,outerRadius:N}=S,R=ir(P=>$rt(P,f)),O=ir(P=>Grt(P,h)),j=Array.isArray(k)?k:R,U=Array.isArray(B)?B:O;return N<=0||j==null||U==null?null:I.createElement("g",{className:"recharts-polar-grid"},I.createElement(tnt,ih({cx:F,cy:w,innerRadius:C,outerRadius:N,gridType:u,radialLines:d},S,{polarAngles:j,polarRadius:U})),I.createElement(ant,ih({cx:F,cy:w,innerRadius:C,outerRadius:N,gridType:u,radialLines:d},S,{polarAngles:j,polarRadius:U})))};tce.displayName="PolarGrid";var mI={},pI={},yq;function snt(){return yq||(yq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],l=n(o);l>s&&(s=l,a=o)}return a}e.maxBy=t}(pI)),pI}var wq;function int(){return wq||(wq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=snt(),r=f4(),n=xP();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(mI)),mI}var gI,Eq;function ont(){return Eq||(Eq=1,gI=int().maxBy),gI}var lnt=ont();const cnt=bl(lnt);var vI={},xI={},Cq;function unt(){return Cq||(Cq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],l=n(o);l<s&&(s=l,a=o)}return a}e.minBy=t}(xI)),xI}var _q;function dnt(){return _q||(_q=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=unt(),r=f4(),n=xP();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(vI)),vI}var bI,Sq;function Ant(){return Sq||(Sq=1,bI=dnt().minBy),bI}var fnt=Ant();const hnt=bl(fnt);var mnt={radiusAxis:{},angleAxis:{}},rce=Mc({name:"polarAxis",initialState:mnt,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:pnt,removeRadiusAxis:gnt,addAngleAxis:vnt,removeAngleAxis:xnt}=rce.actions,bnt=rce.reducer,ynt=["cx","cy","angle","axisLine"],wnt=["angle","tickFormatter","stroke","tick"];function fw(){return fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fw.apply(null,arguments)}function Nq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _A(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nq(Object(r),!0).forEach(function(n){D4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D4(e,t,r){return(t=Ent(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ent(e){var t=Cnt(e,"string");return typeof t=="symbol"?t:t+""}function Cnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nce(e,t){if(e==null)return{};var r,n,a=_nt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _nt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ace="radiusAxis";function Snt(e){var t=us();return I.useEffect(()=>(t(pnt(e)),()=>{t(gnt(e))})),null}var Nnt=(e,t,r,n)=>{var{coordinate:a}=e;return Zn(r,n,a,t)},knt=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},Bnt=(e,t,r,n)=>{var a=cnt(n,i=>i.coordinate||0),s=hnt(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},Tnt=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=nce(e,ynt),o=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),l=Zn(r,n,o[0],a),u=Zn(r,n,o[1],a),d=_A(_A(_A({},rl(i)),{},{fill:"none"},Wn(s,!1)),{},{x1:l.x,y1:l.y,x2:u.x,y2:u.y});return I.createElement("line",fw({className:"recharts-polar-radius-axis-line"},d))},Int=(e,t,r)=>{var n;return I.isValidElement(e)?n=I.cloneElement(e,t):typeof e=="function"?n=e(t):n=I.createElement(o1,fw({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},jnt=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=nce(e,wnt),o=knt(e.orientation),l=rl(i),u=Wn(s,!1),d=t.map((f,h)=>{var p=Nnt(f,e.angle,e.cx,e.cy),g=_A(_A(_A(_A({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(p.x,", ").concat(p.y,")")},l),{},{stroke:"none",fill:a},u),{},{index:h},p),{},{payload:f});return I.createElement(cs,fw({className:En("recharts-polar-radius-axis-tick",Gie(s)),key:"tick-".concat(f.coordinate)},Wx(e,f,h)),Int(s,g,n?n(f.value,h):f.value))});return I.createElement(cs,{className:"recharts-polar-radius-axis-ticks"},d)},Fnt=e=>{var{radiusAxisId:t}=e,r=ir(e1),n=ir(l=>l1(l,"radiusAxis",t)),a=ir(l=>c1(l,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=_A(_A(_A({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return I.createElement(cs,{className:En("recharts-polar-radius-axis",ace,s.className)},o&&Tnt(s,a),i&&jnt(s,a),Vl.renderCallByParent(s,Bnt(s.angle,s.cx,s.cy,a)))};class R4 extends I.PureComponent{render(){return I.createElement(I.Fragment,null,I.createElement(Snt,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),I.createElement(Fnt,this.props))}}D4(R4,"displayName","PolarRadiusAxis");D4(R4,"axisType",ace);D4(R4,"defaultProps",Hl);var Ont=["children"];function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oh.apply(null,arguments)}function kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kq(Object(r),!0).forEach(function(n){P4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P4(e,t,r){return(t=Dnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dnt(e){var t=Rnt(e,"string");return typeof t=="symbol"?t:t+""}function Rnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pnt(e,t){if(e==null)return{};var r,n,a=Lnt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lnt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mnt=Math.PI/180,Bq=1e-5,sce="angleAxis";function Unt(e){var t=us(),r=I.useMemo(()=>{var{children:s}=e,i=Pnt(e,Ont);return i},[e]),n=ir(s=>Zx(s,r.id)),a=r===n;return I.useEffect(()=>(t(vnt(r)),()=>{t(xnt(r))}),[t,r]),a?e.children:null}var Qnt=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,l=Zn(r,n,a,e.coordinate),u=Zn(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:l.x,y1:l.y,x2:u.x,y2:u.y}},Hnt=(e,t)=>{var r=Math.cos(-e.coordinate*Mnt);return r>Bq?t==="outer"?"start":"end":r<-Bq?t==="outer"?"end":"start":"middle"},Vnt=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=bA(bA({},rl(e)),{},{fill:"none"},Wn(s,!1));if(a==="circle")return I.createElement(fL,oh({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var l=i.map(u=>Zn(t,r,n,u.coordinate));return I.createElement(Xle,oh({className:"recharts-polar-angle-axis-line"},o,{points:l}))},znt=e=>{var{tick:t,tickProps:r,value:n}=e;return t?I.isValidElement(t)?I.cloneElement(t,r):typeof t=="function"?t(r):I.createElement(o1,oh({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},$nt=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=rl(e),o=Wn(t,!1),l=bA(bA({},i),{},{fill:"none"},Wn(r,!1)),u=s.map((d,f)=>{var h=Qnt(d,e),p=Hnt(d,e.orientation),g=bA(bA(bA({},i),{},{textAnchor:p,stroke:"none",fill:a},o),{},{index:f,payload:d,x:h.x2,y:h.y2});return I.createElement(cs,oh({className:En("recharts-polar-angle-axis-tick",Gie(t)),key:"tick-".concat(d.coordinate)},Wx(e,d,f)),r&&I.createElement("line",oh({className:"recharts-polar-angle-axis-tick-line"},l,h)),I.createElement(znt,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return I.createElement(cs,{className:"recharts-polar-angle-axis-ticks"},u)},Knt=e=>{var{angleAxisId:t}=e,r=ir(e1),n=ir(o=>l1(o,"angleAxis",t)),a=Zl(),s=ir(o=>c1(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=bA(bA(bA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return I.createElement(cs,{className:En("recharts-polar-angle-axis",sce,i.className)},I.createElement(Vnt,oh({},i,{ticks:s})),I.createElement($nt,oh({},i,{ticks:s})))};class L4 extends I.PureComponent{render(){return this.props.radius<=0?null:I.createElement(Unt,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},I.createElement(Knt,this.props))}}P4(L4,"displayName","PolarAngleAxis");P4(L4,"axisType",sce);P4(L4,"defaultProps",xA);function Tq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Iq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tq(Object(r),!0).forEach(function(n){Gnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gnt(e,t,r){return(t=qnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qnt(e){var t=Wnt(e,"string");return typeof t=="symbol"?t:t+""}function Wnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xnt=(e,t)=>t,xL=ct([hL,Xnt],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),Ynt=[],bL=(e,t,r)=>(r==null?void 0:r.length)===0?Ynt:r,ice=ct([C4,xL,bL],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>Iq(Iq({},t.presentationProps),s.props))),a!=null)return a}}),Jnt=ct([ice,xL,bL],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Ra(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:Xx(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),Znt=ct([ice,xL,bL,Ti],(e,t,r,n)=>{if(!(t==null||e==null))return Kat({offset:n,pieSettings:t,displayedData:e,cells:r})}),yI={},jq;function eat(){return jq||(jq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(yI)),yI}var wI,Fq;function tat(){return Fq||(Fq=1,wI=eat().isPlainObject),wI}var rat=tat();const nat=bl(rat);function v5(){return v5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v5.apply(null,arguments)}var Oq=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},aat={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sat=e=>{var t=Pu(e,aat),r=I.useRef(),[n,a]=I.useState(-1);I.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:l,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||l!==+l||u!==+u||o===0&&l===0||u===0)return null;var v=En("recharts-trapezoid",d);return g?I.createElement(d5,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:l,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},b=>{var{upperWidth:y,lowerWidth:_,height:S,x:k,y:B}=b;return I.createElement(d5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},I.createElement("path",v5({},Wn(t,!0),{className:v,d:Oq(k,B,y,_,S),ref:r})))}):I.createElement("g",null,I.createElement("path",v5({},Wn(t,!0),{className:v,d:Oq(s,i,o,l,u)})))},iat=["option","shapeType","propTransformer","activeClassName","isActive"];function oat(e,t){if(e==null)return{};var r,n,a=lat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Dq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function x5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dq(Object(r),!0).forEach(function(n){cat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cat(e,t,r){return(t=uat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uat(e){var t=dat(e,"string");return typeof t=="symbol"?t:t+""}function dat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aat(e,t){return x5(x5({},t),e)}function fat(e,t){return e==="symbols"}function Rq(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return I.createElement(moe,r);case"trapezoid":return I.createElement(sat,r);case"sector":return I.createElement(voe,r);case"symbols":if(fat(t))return I.createElement(Aie,r);break;default:return null}}function hat(e){return I.isValidElement(e)?e.props:e}function oce(e){var{option:t,shapeType:r,propTransformer:n=Aat,activeClassName:a="recharts-active-shape",isActive:s}=e,i=oat(e,iat),o;if(I.isValidElement(t))o=I.cloneElement(t,x5(x5({},i),hat(t)));else if(typeof t=="function")o=t(i);else if(nat(t)&&typeof t!="boolean"){var l=n(t,i);o=I.createElement(Rq,{shapeType:r,elementProps:l})}else{var u=i;o=I.createElement(Rq,{shapeType:r,elementProps:u})}return s?I.createElement(cs,{className:a},o):o}var yL=(e,t)=>{var r=us();return(n,a)=>s=>{e==null||e(n,a,s),r(ble({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},wL=e=>{var t=us();return(r,n)=>a=>{e==null||e(r,n,a),t(eet())}},EL=(e,t)=>{var r=us();return(n,a)=>s=>{e==null||e(n,a,s),r(tet({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function CL(e){var{fn:t,args:r}=e,n=us(),a=Zl();return I.useEffect(()=>{if(!a){var s=t(r);return n(YZe(s)),()=>{n(JZe(s))}}},[t,r,n,a]),null}var lce=()=>{};function mat(e){var{legendPayload:t}=e,r=us(),n=Zl();return I.useEffect(()=>n?lce:(r(soe(t)),()=>{r(ioe(t))}),[r,n,t]),null}function cce(e){var{legendPayload:t}=e,r=us(),n=ir(Tn);return I.useEffect(()=>n!=="centric"&&n!=="radial"?lce:(r(soe(t)),()=>{r(ioe(t))}),[r,n,t]),null}function _L(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=I.useRef(iw(t)),n=I.useRef(e);return n.current!==e&&(r.current=iw(t),n.current=e),r.current}var EI,pat=()=>{var[e]=I.useState(()=>iw("uid-"));return e},gat=(EI=pde.useId)!==null&&EI!==void 0?EI:pat;function vat(e,t){var r=gat();return t||(e?"".concat(e,"-").concat(r):r)}var xat=I.createContext(void 0),SL=e=>{var{id:t,type:r,children:n}=e,a=vat("recharts-".concat(r),t);return I.createElement(xat.Provider,{value:a},n(a))},bat={cartesianItems:[],polarItems:[]},uce=Mc({name:"graphicalItems",initialState:bat,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=zf(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=zf(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=zf(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:yat,replaceCartesianGraphicalItem:wat,removeCartesianGraphicalItem:Eat,addPolarGraphicalItem:Cat,removePolarGraphicalItem:_at}=uce.actions,Sat=uce.reducer;function Nat(e){var t=us(),r=I.useRef(null);return I.useEffect(()=>{r.current===null?t(yat(e)):r.current!==e&&t(wat({prev:r.current,next:e})),r.current=e},[t,e]),I.useEffect(()=>()=>{r.current&&(t(Eat(r.current)),r.current=null)},[t]),null}function dce(e){var t=us();return I.useEffect(()=>(t(Cat(e)),()=>{t(_at(e))}),[t,e]),null}function kat(){}var Bat={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Pq={t:0},CI={t:1};function NL(e){var t=Pu(e,Bat),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:l,children:u}=t,d=hoe("JavascriptAnimate",t.animationManager),[f,h]=I.useState(r?Pq:CI),p=I.useRef(null);return I.useEffect(()=>{r||h(CI)},[r]),I.useEffect(()=>{if(!r||!n)return kat;var g=foe(Pq,CI,doe(s),a,h,d.getTimeoutController()),v=()=>{p.current=g()};return d.start([l,i,v,a,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,a,s,i,l,o,d]),u(f.t)}var Tat=["onMouseEnter","onClick","onMouseLeave"],Iat=["id"],jat=["id"];function kL(e,t){if(e==null)return{};var r,n,a=Fat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Fat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lq(Object(r),!0).forEach(function(n){Oat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oat(e,t,r){return(t=Dat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dat(e){var t=Rat(e,"string");return typeof t=="symbol"?t:t+""}function Rat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lh.apply(null,arguments)}function Pat(e){var t=I.useMemo(()=>Jw(e.children,l2),[e.children]),r=ir(n=>Jnt(n,e.id,t));return r==null?null:I.createElement(cce,{legendPayload:r})}function Lat(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:l,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:Xx(o,t),hide:l,type:u,color:i,unit:""}}}var Mat=(e,t)=>e>t?"start":e<t?"end":"middle",Uat=(e,t,r)=>typeof t=="function"?t(e):xl(t,r,r*.8),Qat=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=Kie(s,i),l=a+xl(e.cx,s,s/2),u=n+xl(e.cy,i,i/2),d=xl(e.innerRadius,o,0),f=Uat(r,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},Hat=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Vat=(e,t)=>{if(I.isValidElement(e))return I.cloneElement(e,t);if(typeof e=="function")return e(t);var r=En("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return I.createElement(loe,lh({},t,{type:"linear",className:r}))},zat=(e,t,r)=>{if(I.isValidElement(e))return I.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),I.isValidElement(n)))return n;var a=En("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return I.createElement(o1,lh({},t,{alignmentBaseline:"middle",className:a}),n)};function $at(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=rl(r),l=Wn(a,!1),u=Wn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,p)=>{var g=(h.startAngle+h.endAngle)/2,v=Zn(h.cx,h.cy,h.outerRadius+d,g),b=Es(Es(Es(Es({},o),h),{},{stroke:"none"},l),{},{index:p,textAnchor:Mat(v.x,h.cx)},v),y=Es(Es(Es(Es({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[Zn(h.cx,h.cy,h.outerRadius,g),v],key:"line"});return I.createElement(cs,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&Vat(s,y),zat(a,b,Ra(h,i)))});return I.createElement(cs,{className:"recharts-pie-labels"},f)}function Ace(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=ir(sm),{onMouseEnter:o,onClick:l,onMouseLeave:u}=a,d=kL(a,Tat),f=yL(o,a.dataKey),h=wL(u),p=EL(l,a.dataKey);return t==null?null:I.createElement(I.Fragment,null,t.map((g,v)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var b=r&&String(v)===i,y=i?n:null,_=b?r:y,S=Es(Es({},g),{},{stroke:g.stroke,tabIndex:-1,[Jie]:v,[Zie]:a.dataKey});return I.createElement(cs,lh({tabIndex:-1,className:"recharts-pie-sector"},Wx(d,g,v),{onMouseEnter:f(g,v),onMouseLeave:h(g,v),onClick:p(g,v),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(v)}),I.createElement(oce,lh({option:_,isActive:b,shapeType:"sector"},S)))}),I.createElement($at,{sectors:t,props:a,showLabels:s}))}function Kat(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:l,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),p=Hat(o,l),g=Math.abs(p),v=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(F=>Ra(F,u,0)!==0).length,y=(g>=360?b:b-1)*v,_=g-b*h-y,S=n.reduce((F,w)=>{var C=Ra(w,u,0);return F+(ur(C)?C:0)},0),k;if(S>0){var B;k=n.map((F,w)=>{var C=Ra(F,u,0),N=Ra(F,d,w),R=Qat(r,s,F),O=(ur(C)?C:0)/S,j,U=Es(Es({},F),a&&a[w]&&a[w].props);w?j=B.endAngle+Xi(p)*v*(C!==0?1:0):j=o;var P=j+Xi(p)*((C!==0?h:0)+O*_),X=(j+P)/2,K=(R.innerRadius+R.outerRadius)/2,Z=[{name:N,value:C,payload:U,dataKey:u,type:f}],H=Zn(R.cx,R.cy,K,X);return B=Es(Es(Es(Es({},r.presentationProps),{},{percent:O,cornerRadius:i,name:N,tooltipPayload:Z,midAngle:X,middleRadius:K,tooltipPosition:H},U),R),{},{value:Ra(F,u),startAngle:j,endAngle:P,payload:U,paddingAngle:Xi(p)*v}),B})}return k}function Gat(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:l,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=_L(t,"recharts-pie-"),p=r.current,[g,v]=I.useState(!0),b=I.useCallback(()=>{typeof f=="function"&&f(),v(!1)},[f]),y=I.useCallback(()=>{typeof d=="function"&&d(),v(!0)},[d]);return I.createElement(NL,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:b,key:h},_=>{var S=[],k=n&&n[0],B=k.startAngle;return n.forEach((F,w)=>{var C=p&&p[w],N=w>0?am(F,"paddingAngle",0):0;if(C){var R=Nv(C.endAngle-C.startAngle,F.endAngle-F.startAngle),O=Es(Es({},F),{},{startAngle:B+N,endAngle:B+R(_)+N});S.push(O),B=O.endAngle}else{var{endAngle:j,startAngle:U}=F,P=Nv(0,j-U),X=P(_),K=Es(Es({},F),{},{startAngle:B+N,endAngle:B+X+N});S.push(K),B=K.endAngle}}),r.current=S,I.createElement(cs,null,I.createElement(Ace,{sectors:S,activeShape:l,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function qat(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=I.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?I.createElement(Gat,{props:e,previousSectorsRef:s}):I.createElement(Ace,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function Wat(e){var{hide:t,className:r,rootTabIndex:n}=e,a=En("recharts-pie",r);return t?null:I.createElement(cs,{tabIndex:n,className:a},I.createElement(qat,e))}var Xat={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!og.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Yat(e){var{id:t}=e,r=kL(e,Iat),n=I.useMemo(()=>Jw(e.children,l2),[e.children]),a=ir(s=>Znt(s,t,n));return I.createElement(I.Fragment,null,I.createElement(CL,{fn:Lat,args:Es(Es({},e),{},{sectors:a})}),I.createElement(Wat,lh({},r,{sectors:a})))}function fce(e){var t=Pu(e,Xat),{id:r}=t,n=kL(t,jat),a=rl(n);return I.createElement(SL,{id:r,type:"pie"},s=>I.createElement(I.Fragment,null,I.createElement(dce,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),I.createElement(Pat,lh({},n,{id:s})),I.createElement(Yat,lh({},n,{id:s})),n.children))}fce.displayName="Pie";var Jat=ct([Ti],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Zat=ct([Jat,mh,ph],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),hce=()=>ir(Zat),est=()=>ir(Vet);function Mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mq(Object(r),!0).forEach(function(n){tst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tst(e,t,r){return(t=rst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rst(e){var t=nst(e,"string");return typeof t=="symbol"?t:t+""}function nst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ast=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=Uq(Uq({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Wn(a,!1)),fP(a)),o;return I.isValidElement(a)?o=I.cloneElement(a,i):typeof a=="function"?o=a(i):o=I.createElement(fL,i),I.createElement(cs,{className:"recharts-active-dot"},o)};function sst(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=ir(sm),i=est();if(t==null||i==null)return null;var o=t.find(l=>i.includes(l.payload));return ks(o)?null:ast({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function Qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qq(Object(r),!0).forEach(function(n){ist(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ist(e,t,r){return(t=ost(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ost(e){var t=lst(e,"string");return typeof t=="symbol"?t:t+""}function lst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mce=(e,t)=>l1(e,"radiusAxis",t),cst=ct([mce],e=>{if(e!=null)return{scale:e}}),ust=ct([t2,mce],(e,t)=>{if(!(e==null||t==null))return b5(b5({},e),{},{scale:t})}),dst=(e,t,r,n)=>c1(e,"radiusAxis",t,n),pce=(e,t,r)=>Zx(e,r),gce=(e,t,r)=>l1(e,"angleAxis",r),Ast=ct([pce,gce],(e,t)=>{if(!(e==null||t==null))return b5(b5({},e),{},{scale:t})}),fst=(e,t,r,n)=>c1(e,"angleAxis",r,n),hst=ct([pce,gce,e1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),mst=(e,t,r,n,a)=>a,pst=ct([Tn,ust,dst,Ast,fst],(e,t,r,n,a)=>mm(e,"radiusAxis")?cw(t,r,!1):cw(n,a,!1)),gst=ct([hL,mst],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),vst=ct([cst,hst,C4,gst,pst],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var l=s.slice(i,o+1);return Nst({radiusAxis:e,angleAxis:t,displayedData:l,dataKey:n,bandSize:a})}}),xst=["id"];function bst(e,t){if(e==null)return{};var r,n,a=yst(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hq(Object(r),!0).forEach(function(n){BL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BL(e,t,r){return(t=wst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wst(e){var t=Est(e,"string");return typeof t=="symbol"?t:t+""}function Est(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ix(){return Ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ix.apply(null,arguments)}function TL(e,t){return e&&e!=="none"?e:t}var Cst=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:TL(n,a),value:Xx(r,t),payload:e}]};function _st(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:Xx(s,t),hide:i,type:o,color:TL(r,a),unit:""}}}function Sst(e,t){var r;return I.isValidElement(e)?r=I.cloneElement(e,t):typeof e=="function"?r=e(t):r=I.createElement(fL,Ix({},t,{className:En("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function Nst(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,l=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,p)=>{var g=Ra(h,r.dataKey,p),v=Ra(h,a),b=r.scale(g)+d,y=Array.isArray(v)?Wle(v):v,_=ks(y)?void 0:t.scale(y);Array.isArray(v)&&v.length>=2&&(l=!0),u.push(hl(hl({},Zn(i,o,_,b)),{},{name:g,value:v,cx:i,cy:o,radius:_,angle:b,payload:h}))});var f=[];return l&&u.forEach(h=>{if(Array.isArray(h.value)){var p=h.value[0],g=ks(p)?void 0:t.scale(p);f.push(hl(hl({},h),{},{radius:g},Zn(i,o,g,h.angle)))}else f.push(h)}),{points:u,isRange:l,baseLinePoints:f}}function kst(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=bst(r,xst),o=rl(i),l=Wn(n,!0),u=t.map((d,f)=>{var h=hl(hl(hl({key:"dot-".concat(f),r:3},o),l),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return Sst(n,h)});return I.createElement(cs,{className:"recharts-radar-dots"},u)}function vce(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,l=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return I.isValidElement(a)?d=I.cloneElement(a,hl(hl({},r),{},{points:t})):typeof a=="function"?d=a(hl(hl({},r),{},{points:t})):d=I.createElement(Xle,Ix({},Wn(r,!0),{onMouseEnter:l,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),I.createElement(cs,{className:"recharts-radar-polygon"},d,I.createElement(kst,{props:r,points:t}),n&&Q0.renderCallByParent(r,t))}function Bst(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:l,onAnimationStart:u}=t,d=r.current,f=_L(t,"recharts-radar-"),[h,p]=I.useState(!0),g=I.useCallback(()=>{typeof l=="function"&&l(),p(!1)},[l]),v=I.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return I.createElement(NL,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:v},b=>{var y=d&&d.length/n.length,_=b===1?n:n.map((S,k)=>{var B=d&&d[Math.floor(k*y)];if(B){var F=Nv(B.x,S.x),w=Nv(B.y,S.y);return hl(hl({},S),{},{x:F(b),y:w(b)})}var C=Nv(S.cx,S.x),N=Nv(S.cy,S.y);return hl(hl({},S),{},{x:C(b),y:N(b)})});return b>0&&(r.current=_),I.createElement(vce,{points:_,props:t,showLabels:!h})})}function Tst(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=I.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?I.createElement(Bst,{props:e,previousPointsRef:a}):I.createElement(vce,{points:t,props:e,showLabels:!0})}var Ist={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!og.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class jst extends I.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=En("recharts-radar",r);return I.createElement(I.Fragment,null,I.createElement(cs,{className:a},I.createElement(Tst,this.props)),I.createElement(sst,{points:n,mainColor:TL(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function Fst(e){var t=Zl(),r=ir(n=>vst(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return I.createElement(jst,Ix({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class IL extends I.PureComponent{render(){return I.createElement(SL,{id:this.props.id,type:"radar"},t=>I.createElement(I.Fragment,null,I.createElement(dce,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),I.createElement(cce,{legendPayload:Cst(this.props)}),I.createElement(CL,{fn:_st,args:this.props}),I.createElement(Fst,Ix({},this.props,{id:t}))))}}BL(IL,"displayName","Radar");BL(IL,"defaultProps",Ist);var Ost="Invariant failed";function Dst(e,t){throw new Error(Ost)}var Rst=["x","y"];function k6(){return k6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k6.apply(null,arguments)}function Vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vq(Object(r),!0).forEach(function(n){Pst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pst(e,t,r){return(t=Lst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lst(e){var t=Mst(e,"string");return typeof t=="symbol"?t:t+""}function Mst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ust(e,t){if(e==null)return{};var r,n,a=Qst(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hst(e,t){var{x:r,y:n}=e,a=Ust(e,Rst),s="".concat(r),i=parseInt(s,10),o="".concat(n),l=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return xb(xb(xb(xb(xb({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function xce(e){return I.createElement(oce,k6({shapeType:"rectangle",propTransformer:Hst,activeClassName:"recharts-active-bar"},e))}var Vst=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(ur(t))return t;var s=ur(n)||ks(n);return s?t(n,a):(s||Dst(),r)}},zst={},bce=Mc({name:"errorBars",initialState:zst,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:aut,removeErrorBar:sut}=bce.actions,$st=bce.reducer,Kst=["children"];function Gst(e,t){if(e==null)return{};var r,n,a=qst(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Wst={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Xst=I.createContext(Wst);function Yst(e){var{children:t}=e,r=Gst(e,Kst);return I.createElement(Xst.Provider,{value:r},t)}function yce(e,t){var r,n,a=ir(u=>gh(u,e)),s=ir(u=>gm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:bc.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:yc.allowDataOverflow,l=i||o;return{needClip:l,needClipX:i,needClipY:o}}function Jst(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=hce(),{needClipX:s,needClipY:i,needClip:o}=yce(t,r);if(!o)return null;var{x:l,y:u,width:d,height:f}=a;return I.createElement("clipPath",{id:"clipPath-".concat(n)},I.createElement("rect",{x:s?l:l-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var Zst=["onMouseEnter","onMouseLeave","onClick"],eit=["value","background","tooltipPosition"],tit=["id"],rit=["onMouseEnter","onClick","onMouseLeave"];function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jx.apply(null,arguments)}function zq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zq(Object(r),!0).forEach(function(n){nit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nit(e,t,r){return(t=ait(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ait(e){var t=sit(e,"string");return typeof t=="symbol"?t:t+""}function sit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y5(e,t){if(e==null)return{};var r,n,a=iit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var oit=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Xx(r,t),payload:e}]};function lit(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Xx(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function cit(e){var t=ir(sm),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:l}=s,u=y5(s,Zst),d=yL(i,n),f=wL(o),h=EL(l,n);if(!a||r==null)return null;var p=Wn(a,!1);return I.createElement(I.Fragment,null,r.map((g,v)=>{var{value:b,background:y,tooltipPosition:_}=g,S=y5(g,eit);if(!y)return null;var k=d(g,v),B=f(g,v),F=h(g,v),w=Ko(Ko(Ko(Ko(Ko({option:a,isActive:String(v)===t},S),{},{fill:"#eee"},y),p),Wx(u,g,v)),{},{onMouseEnter:k,onMouseLeave:B,onClick:F,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return I.createElement(xce,jx({key:"background-bar-".concat(v)},w))}))}function wce(e){var{data:t,props:r,showLabels:n}=e,a=rl(r),{id:s}=a,i=y5(a,tit),{shape:o,dataKey:l,activeBar:u}=r,d=ir(sm),f=ir(Fle),{onMouseEnter:h,onClick:p,onMouseLeave:g}=r,v=y5(r,rit),b=yL(h,l),y=wL(g),_=EL(p,l);return t?I.createElement(I.Fragment,null,t.map((S,k)=>{var B=u&&String(k)===d&&(f==null||l===f),F=B?u:o,w=Ko(Ko(Ko({},i),S),{},{isActive:B,option:F,index:k,dataKey:l});return I.createElement(cs,jx({className:"recharts-bar-rectangle"},Wx(v,S,k),{onMouseEnter:b(S,k),onMouseLeave:y(S,k),onClick:_(S,k),key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(k)}),I.createElement(xce,w))}),n&&Q0.renderCallByParent(r,t)):null}function uit(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=_L(t,"recharts-bar-"),[p,g]=I.useState(!1),v=I.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=I.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return I.createElement(NL,{begin:i,duration:o,isActive:s,easing:l,onAnimationEnd:v,onAnimationStart:b,key:h},y=>{var _=y===1?n:n==null?void 0:n.map((S,k)=>{var B=f&&f[k];if(B)return Ko(Ko({},S),{},{x:ov(B.x,S.x,y),y:ov(B.y,S.y,y),width:ov(B.width,S.width,y),height:ov(B.height,S.height,y)});if(a==="horizontal"){var F=ov(0,S.height,y);return Ko(Ko({},S),{},{y:S.y+S.height-F,height:F})}var w=ov(0,S.width,y);return Ko(Ko({},S),{},{width:w})});return y>0&&(r.current=_??null),_==null?null:I.createElement(cs,null,I.createElement(wce,{props:t,data:_,showLabels:!p}))})}function dit(e){var{data:t,isAnimationActive:r}=e,n=I.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?I.createElement(uit,{previousRectanglesRef:n,props:e}):I.createElement(wce,{props:e,data:t,showLabels:!0})}var Ece=0,Ait=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ra(e,t)}};class fit extends I.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:l,id:u}=this.props;if(t)return null;var d=En("recharts-bar",a),f=u;return I.createElement(cs,{className:d,id:u},o&&I.createElement("defs",null,I.createElement(Jst,{clipPathId:f,xAxisId:s,yAxisId:i})),I.createElement(cs,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},I.createElement(cit,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),I.createElement(dit,this.props)),this.props.children)}}var hit={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!og.isSsr,legendType:"rect",minPointSize:Ece,xAxisId:0,yAxisId:0};function mit(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=yce(t,r),h=BP(),p=Zl(),g=Jw(e.children,l2),v=ir(_=>Hit(_,t,r,p,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var b,y=v==null?void 0:v[0];return y==null||y.height==null||y.width==null?b=0:b=h==="vertical"?y.height/2:y.width/2,I.createElement(Yst,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:Ait,errorBarOffset:b},I.createElement(fit,jx({},e,{layout:h,needClip:f,data:v,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d})))}function pit(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:l,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,g=t==="horizontal"?o:i,v=d?g.scale.domain():null,b=aYe({numericAxis:g});return f.map((y,_)=>{var S,k,B,F,w,C;d?S=JXe(d[_],v):(S=Ra(y,r),Array.isArray(S)||(S=[b,S]));var N=Vst(n,Ece)(S[1],_);if(t==="horizontal"){var R,[O,j]=[o.scale(S[0]),o.scale(S[1])];k=ZK({axis:i,ticks:l,bandSize:s,offset:a.offset,entry:y,index:_}),B=(R=j??O)!==null&&R!==void 0?R:void 0,F=a.size;var U=O-j;if(w=Dc(U)?0:U,C={x:k,y:h.top,width:F,height:h.height},Math.abs(N)>0&&Math.abs(w)<Math.abs(N)){var P=Xi(w||N)*(Math.abs(N)-Math.abs(w));B-=P,w+=P}}else{var[X,K]=[i.scale(S[0]),i.scale(S[1])];if(k=X,B=ZK({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:_}),F=K-X,w=a.size,C={x:h.left,y:B,width:h.width,height:w},Math.abs(N)>0&&Math.abs(F)<Math.abs(N)){var Z=Xi(F||N)*(Math.abs(N)-Math.abs(F));F+=Z}}if(k==null||B==null||F==null||w==null)return null;var H=Ko(Ko({},y),{},{x:k,y:B,width:F,height:w,value:d?S:S[1],payload:y,background:C,tooltipPosition:{x:k+F/2,y:B+w/2}},p&&p[_]&&p[_].props);return H}).filter(Boolean)}function B6(e){var t=Pu(e,hit),r=Zl();return I.createElement(SL,{id:t.id,type:"bar"},n=>I.createElement(I.Fragment,null,I.createElement(mat,{legendPayload:oit(t)}),I.createElement(CL,{fn:lit,args:t}),I.createElement(Nat,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:nYe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),I.createElement(mit,jx({},t,{id:n}))))}B6.displayName="Bar";function $q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$q(Object(r),!0).forEach(function(n){git(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$q(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function git(e,t,r){return(t=vit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vit(e){var t=xit(e,"string");return typeof t=="symbol"?t:t+""}function xit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bit=(e,t)=>t,yit=(e,t,r)=>r,wit=(e,t,r,n)=>n,Eit=(e,t,r,n,a)=>a,c2=ct([QP,Eit],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Cit=ct([c2],e=>e==null?void 0:e.maxBarSize),_it=(e,t,r,n,a,s)=>s,Kq=(e,t,r)=>{var n=r??e;if(!ks(n))return xl(n,t,0)},Sit=ct([Tn,QP,bit,yit,wit],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Nit=(e,t,r,n)=>{var a=Tn(e);return a==="horizontal"?y6(e,"yAxis",r,n):y6(e,"xAxis",t,n)},kit=(e,t,r)=>{var n=Tn(e);return n==="horizontal"?OG(e,"xAxis",t):OG(e,"yAxis",r)},Bit=(e,t,r)=>{var n={},a=e.filter(k4),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=Kq(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),l=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=Kq(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...l]},Tit=ct([Sit,JJe,kit],Bit),Iit=(e,t,r,n,a)=>{var s,i,o=c2(e,t,r,n,a);if(o!=null){var l=Tn(e),u=Ooe(e),{maxBarSize:d}=o,f=ks(d)?u:d,h,p;return l==="horizontal"?(h=Bx(e,"xAxis",t,n),p=kx(e,"xAxis",t,n)):(h=Bx(e,"yAxis",r,n),p=kx(e,"yAxis",r,n)),(s=(i=cw(h,p,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},Cce=(e,t,r,n)=>{var a=Tn(e),s,i;return a==="horizontal"?(s=Bx(e,"xAxis",t,n),i=kx(e,"xAxis",t,n)):(s=Bx(e,"yAxis",r,n),i=kx(e,"yAxis",r,n)),cw(s,i)};function jit(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=xl(e,r,0,!0),o,l=[];if(Lc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,_)=>y+(_.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,p={offset:h-i,size:0};o=n.reduce((y,_)=>{var S,k={stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:p.offset+p.size+i,size:u?d:(S=_.barSize)!==null&&S!==void 0?S:0}},B=[...y,k];return p=B[B.length-1].position,B},l)}else{var g=xl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var v=(r-2*g-(s-1)*i)/s;v>1&&(v>>=0);var b=Lc(a)?Math.min(v,a):v;o=n.reduce((y,_,S)=>[...y,{stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:g+(v+i)*S+(v-b)/2,size:b}}],l)}return o}}var Fit=(e,t,r,n,a,s,i)=>{var o=ks(i)?t:i,l=jit(r,n,a!==s?a:s,e,o);return a!==s&&l!=null&&(l=l.map(u=>RC(RC({},u),{},{position:RC(RC({},u.position),{},{offset:u.position.offset-a/2})}))),l},Oit=ct([Tit,Ooe,YJe,Doe,Iit,Cce,Cit],Fit),Dit=(e,t,r,n)=>Bx(e,"xAxis",t,n),Rit=(e,t,r,n)=>Bx(e,"yAxis",r,n),Pit=(e,t,r,n)=>kx(e,"xAxis",t,n),Lit=(e,t,r,n)=>kx(e,"yAxis",r,n),Mit=ct([Oit,c2],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Uit=(e,t)=>{var r=LP(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},Qit=ct([Nit,c2],Uit),Hit=ct([Ti,Dit,Rit,Pit,Lit,Mit,Tn,IP,Cce,Qit,c2,_it],(e,t,r,n,a,s,i,o,l,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||l==null)){var{data:v}=d,b;if(v!=null&&v.length>0?b=v:b=h==null?void 0:h.slice(p,g+1),b!=null)return pit({layout:i,barSettings:d,pos:s,bandSize:l,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:b,offset:e,cells:f})}}),_ce=e=>{var{chartData:t}=e,r=us(),n=Zl();return I.useEffect(()=>n?()=>{}:(r(zG(t)),()=>{r(zG(void 0))}),[t,r,n]),null},Gq={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Sce=Mc({name:"brush",initialState:Gq,reducers:{setBrushSettings(e,t){return t.payload==null?Gq:t.payload}}}),{setBrushSettings:iut}=Sce.actions,Vit=Sce.reducer;function zit(e,t,r){return(t=$it(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $it(e){var t=Kit(e,"string");return typeof t=="symbol"?t:t+""}function Kit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jL{static create(t){return new jL(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}zit(jL,"EPS",1e-4);function Git(e){return(e%180+180)%180}var qit=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Git(a),i=s*Math.PI/180,o=Math.atan(n/r),l=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},Wit={dots:[],areas:[],lines:[]},Nce=Mc({name:"referenceElements",initialState:Wit,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=zf(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=zf(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=zf(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:out,removeDot:lut,addArea:cut,removeArea:uut,addLine:dut,removeLine:Aut}=Nce.actions,Xit=Nce.reducer,Yit=I.createContext(void 0),Jit=e=>{var{children:t}=e,[r]=I.useState("".concat(iw("recharts"),"-clip")),n=hce();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return I.createElement(Yit.Provider,{value:r},I.createElement("defs",null,I.createElement("clipPath",{id:r},I.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function _I(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function kce(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function Zit(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return qit(n,r)}function eot(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function w5(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function tot(e,t){return kce(e,t+1)}function rot(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,l=0,u=1,d=i,f=function(){var g=n==null?void 0:n[l];if(g===void 0)return{v:kce(n,u)};var v=l,b,y=()=>(b===void 0&&(b=r(g,v)),b),_=g.coordinate,S=l===0||w5(e,_,y,d,o);S||(l=0,d=i,u+=1),S&&(d=_+e*(y()/2+a),l+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qq(Object(r),!0).forEach(function(n){not(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function not(e,t,r){return(t=aot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aot(e){var t=sot(e,"string");return typeof t=="symbol"?t:t+""}function sot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iot(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:l}=t,u=function(h){var p=s[h],g,v=()=>(g===void 0&&(g=r(p,h)),g);if(h===i-1){var b=e*(p.coordinate+e*v()/2-l);s[h]=p=Mo(Mo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[h]=p=Mo(Mo({},p),{},{tickCoord:p.coordinate});var y=w5(e,p.tickCoord,v,o,l);y&&(l=p.tickCoord-e*(v()/2+a),s[h]=Mo(Mo({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function oot(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:l,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=Mo(Mo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=w5(e,d.tickCoord,()=>f,l,u);p&&(u=d.tickCoord-e*(f/2+a),i[o-1]=Mo(Mo({},d),{},{isShow:!0}))}for(var g=s?o-1:o,v=function(_){var S=i[_],k,B=()=>(k===void 0&&(k=r(S,_)),k);if(_===0){var F=e*(S.coordinate-e*B()/2-l);i[_]=S=Mo(Mo({},S),{},{tickCoord:F<0?S.coordinate-F*e:S.coordinate})}else i[_]=S=Mo(Mo({},S),{},{tickCoord:S.coordinate});var w=w5(e,S.tickCoord,B,l,u);w&&(l=S.tickCoord+e*(B()/2+a),i[_]=Mo(Mo({},S),{},{isShow:!0}))},b=0;b<g;b++)v(b);return i}function FL(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(ur(l)||og.isSsr){var h;return(h=tot(a,ur(l)?l:0))!==null&&h!==void 0?h:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",v=d&&g==="width"?py(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(S,k)=>{var B=typeof u=="function"?u(S.value,k):S.value;return g==="width"?Zit(py(B,{fontSize:t,letterSpacing:r}),v,f):py(B,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?Xi(a[1].coordinate-a[0].coordinate):1,_=eot(s,y,g);return l==="equidistantPreserveStart"?rot(y,_,b,a,i):(l==="preserveStart"||l==="preserveStartEnd"?p=oot(y,_,b,a,i,l==="preserveStartEnd"):p=iot(y,_,b,a,i),p.filter(S=>S.isShow))}var lot=["viewBox"],cot=["viewBox"];function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tv.apply(null,arguments)}function Wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wq(Object(r),!0).forEach(function(n){OL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xq(e,t){if(e==null)return{};var r,n,a=uot(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function OL(e,t,r){return(t=dot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dot(e){var t=Aot(e,"string");return typeof t=="symbol"?t:t+""}function Aot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class xm extends I.Component{constructor(t){super(t),this.tickRefs=I.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=Xq(t,lot),s=this.props,{viewBox:i}=s,o=Xq(s,cot);return!_I(n,i)||!_I(a,o)||!_I(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:l,tickMargin:u}=this.props,d,f,h,p,g,v,b=l?-1:1,y=t.tickSize||o,_=ur(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,p=n+ +!l*s,h=p-b*y,v=h-b*u,g=_;break;case"left":h=p=t.coordinate,f=r+ +!l*a,d=f-b*y,g=d-b*u,v=_;break;case"right":h=p=t.coordinate,f=r+ +l*a,d=f+b*y,g=d+b*u,v=_;break;default:d=f=t.coordinate,p=n+ +l*s,h=p+b*y,v=h+b*u,g=_;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:g,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,l=Ci(Ci(Ci({},Wn(this.props,!1)),Wn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);l=Ci(Ci({},l),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);l=Ci(Ci({},l),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return I.createElement("line",Tv({},l,{className:En("recharts-cartesian-axis-line",am(o,"className"))}))}static renderTickItem(t,r,n){var a,s=En(r.className,"recharts-cartesian-axis-tick-value");if(I.isValidElement(t))a=I.cloneElement(t,Ci(Ci({},r),{},{className:s}));else if(typeof t=="function")a=t(Ci(Ci({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=En(i,t.className)),a=I.createElement(o1,Tv({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:l,padding:u}=this.props,d=FL(Ci(Ci({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=rl(this.props),g=Wn(i,!1),v=Ci(Ci({},p),{},{fill:"none"},Wn(a,!1)),b=d.map((y,_)=>{var{line:S,tick:k}=this.getTickLineCoord(y),B=Ci(Ci(Ci(Ci({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},g),k),{},{index:_,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return I.createElement(cs,Tv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Wx(this.props,y,_)),a&&I.createElement("line",Tv({},v,S,{className:En("recharts-cartesian-axis-tick-line",am(a,"className"))})),i&&xm.renderTickItem(i,B,"".concat(typeof o=="function"?o(y.value,_):y.value).concat(l||"")))});return b.length>0?I.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:I.createElement(cs,{className:En("recharts-cartesian-axis",a),ref:o=>{if(o){var l=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var u=l[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),Vl.renderCallByParent(this.props))}}OL(xm,"displayName","CartesianAxis");OL(xm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var fot=["x1","y1","x2","y2","key"],hot=["offset"],mot=["xAxisId","yAxisId"],pot=["xAxisId","yAxisId"];function Yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yq(Object(r),!0).forEach(function(n){got(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function got(e,t,r){return(t=vot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vot(e){var t=xot(e,"string");return typeof t=="symbol"?t:t+""}function xot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cp(){return cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cp.apply(null,arguments)}function E5(e,t){if(e==null)return{};var r,n,a=bot(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yot=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return I.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Bce(e,t){var r;if(I.isValidElement(e))r=I.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,l=E5(t,fot),u=rl(l),{offset:d}=u,f=E5(u,hot);r=I.createElement("line",cp({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function wot(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=E5(e,mot),l=a.map((u,d)=>{var f=Go(Go({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Bce(n,f)});return I.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Eot(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=E5(e,pot),l=a.map((u,d)=>{var f=Go(Go({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Bce(n,f)});return I.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Cot(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var v=h%t.length;return I.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function _ot(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var v=h%r.length;return I.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:o,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Sot=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Wie(FL(Go(Go(Go({},xm.defaultProps),r),{},{ticks:Xie(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},Not=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Wie(FL(Go(Go(Go({},xm.defaultProps),r),{},{ticks:Xie(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},kot={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function T6(e){var t=roe(),r=noe(),n=toe(),a=Go(Go({},Pu(e,kot)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,g=Zl(),v=ir(N=>DG(N,"xAxis",s,g)),b=ir(N=>DG(N,"yAxis",i,g));if(!ur(u)||u<=0||!ur(d)||d<=0||!ur(o)||o!==+o||!ur(l)||l!==+l)return null;var y=a.verticalCoordinatesGenerator||Sot,_=a.horizontalCoordinatesGenerator||Not,{horizontalPoints:S,verticalPoints:k}=a;if((!S||!S.length)&&typeof _=="function"){var B=h&&h.length,F=_({yAxis:b?Go(Go({},b),{},{ticks:B?h:b.ticks}):void 0,width:t,height:r,offset:n},B?!0:f);my(Array.isArray(F),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(S=F)}if((!k||!k.length)&&typeof y=="function"){var w=p&&p.length,C=y({xAxis:v?Go(Go({},v),{},{ticks:w?p:v.ticks}):void 0,width:t,height:r,offset:n},w?!0:f);my(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(k=C)}return I.createElement("g",{className:"recharts-cartesian-grid"},I.createElement(yot,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),I.createElement(Cot,cp({},a,{horizontalPoints:S})),I.createElement(_ot,cp({},a,{verticalPoints:k})),I.createElement(wot,cp({},a,{offset:n,horizontalPoints:S,xAxis:v,yAxis:b})),I.createElement(Eot,cp({},a,{offset:n,verticalPoints:k,xAxis:v,yAxis:b})))}T6.displayName="CartesianGrid";function Jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jq(Object(r),!0).forEach(function(n){Bot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bot(e,t,r){return(t=Tot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tot(e){var t=Iot(e,"string");return typeof t=="symbol"?t:t+""}function Iot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jot={xAxis:{},yAxis:{},zAxis:{}},Tce=Mc({name:"cartesianAxis",initialState:jot,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=Zq(Zq({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:Fot,removeXAxis:Oot,addYAxis:Dot,removeYAxis:Rot,addZAxis:fut,removeZAxis:hut,updateYAxisWidth:Pot}=Tce.actions,Lot=Tce.reducer,Mot=["children"],Uot=["dangerouslySetInnerHTML","ticks"];function Ice(e,t,r){return(t=Qot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qot(e){var t=Hot(e,"string");return typeof t=="symbol"?t:t+""}function Hot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I6(){return I6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I6.apply(null,arguments)}function jce(e,t){if(e==null)return{};var r,n,a=Vot(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zot(e){var t=us(),r=I.useMemo(()=>{var{children:s}=e,i=jce(e,Mot);return i},[e]),n=ir(s=>gh(s,r.id)),a=r===n;return I.useEffect(()=>(t(Fot(r)),()=>{t(Oot(r))}),[r,t]),a?e.children:null}var $ot=e=>{var{xAxisId:t,className:r}=e,n=ir(eoe),a=Zl(),s="xAxis",i=ir(p=>a1(p,s,t,a)),o=ir(p=>fle(p,s,t,a)),l=ir(p=>cle(p,t)),u=ir(p=>zZe(p,t));if(l==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=jce(e,Uot);return I.createElement(xm,I6({},h,{scale:i,x:u.x,y:u.y,width:l.width,height:l.height,className:En("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},Kot=e=>{var t,r,n,a,s;return I.createElement(zot,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},I.createElement($ot,e))};class C5 extends I.Component{render(){return I.createElement(Kot,this.props)}}Ice(C5,"displayName","XAxis");Ice(C5,"defaultProps",{allowDataOverflow:bc.allowDataOverflow,allowDecimals:bc.allowDecimals,allowDuplicatedCategory:bc.allowDuplicatedCategory,height:bc.height,hide:!1,mirror:bc.mirror,orientation:bc.orientation,padding:bc.padding,reversed:bc.reversed,scale:bc.scale,tickCount:bc.tickCount,type:bc.type,xAxisId:0});var Got=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=a+s,u=i+l+o+(r?n:0);return Math.round(u)}return 0},qot=["dangerouslySetInnerHTML","ticks"];function Fce(e,t,r){return(t=Wot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wot(e){var t=Xot(e,"string");return typeof t=="symbol"?t:t+""}function Xot(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j6(){return j6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j6.apply(null,arguments)}function Yot(e,t){if(e==null)return{};var r,n,a=Jot(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jot(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Zot(e){var t=us();return I.useEffect(()=>(t(Dot(e)),()=>{t(Rot(e))}),[e,t]),null}var elt=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=I.useRef(null),o=I.useRef(null),l=ir(eoe),u=Zl(),d=us(),f="yAxis",h=ir(S=>a1(S,f,r,u)),p=ir(S=>ule(S,r)),g=ir(S=>$Ze(S,r)),v=ir(S=>fle(S,f,r,u));if(I.useLayoutEffect(()=>{var S;if(!(a!=="auto"||!p||AL(s)||I.isValidElement(s))){var k=i.current,B=k==null||(S=k.tickRefs)===null||S===void 0?void 0:S.current,{tickSize:F,tickMargin:w}=k.props,C=Got({ticks:B,label:o.current,labelGapWithTick:5,tickSize:F,tickMargin:w});Math.round(p.width)!==Math.round(C)&&d(Pot({id:r,width:C}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,r,a]),p==null||g==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,_=Yot(e,qot);return I.createElement(xm,j6({},_,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,width:p.width,height:p.height,className:En("recharts-".concat(f," ").concat(f),n),viewBox:l,ticks:v}))},tlt=e=>{var t,r,n,a,s;return I.createElement(I.Fragment,null,I.createElement(Zot,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),I.createElement(elt,e))},rlt={allowDataOverflow:yc.allowDataOverflow,allowDecimals:yc.allowDecimals,allowDuplicatedCategory:yc.allowDuplicatedCategory,hide:!1,mirror:yc.mirror,orientation:yc.orientation,padding:yc.padding,reversed:yc.reversed,scale:yc.scale,tickCount:yc.tickCount,type:yc.type,width:yc.width,yAxisId:0};class _5 extends I.Component{render(){return I.createElement(tlt,this.props)}}Fce(_5,"displayName","YAxis");Fce(_5,"defaultProps",rlt);var SI={exports:{}},NI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eW;function nlt(){if(eW)return NI;eW=1;var e=Fx();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return NI.useSyncExternalStoreWithSelector=function(l,u,d,f,h){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=i(function(){function b(B){if(!y){if(y=!0,_=B,B=f(B),h!==void 0&&g.hasValue){var F=g.value;if(h(F,B))return S=F}return S=B}if(F=S,r(_,B))return F;var w=f(B);return h!==void 0&&h(F,w)?(_=B,F):(_=B,S=w)}var y=!1,_,S,k=d===void 0?null:d;return[function(){return b(u())},k===null?void 0:function(){return b(k())}]},[u,d,f,h]);var v=n(l,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=v},[v]),o(v),v},NI}var tW;function alt(){return tW||(tW=1,SI.exports=nlt()),SI.exports}alt();function slt(e){e()}function ilt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){slt(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var rW={notify(){},get:()=>[]};function olt(e,t){let r,n=rW,a=0,s=!1;function i(v){d();const b=n.subscribe(v);let y=!1;return()=>{y||(y=!0,b(),f())}}function o(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(l),n=ilt())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=rW)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var llt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",clt=llt(),ult=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dlt=ult(),Alt=()=>clt||dlt?I.useLayoutEffect:I.useEffect,flt=Alt(),kI=Symbol.for("react-redux-context"),BI=typeof globalThis<"u"?globalThis:{};function hlt(){if(!I.createContext)return{};const e=BI[kI]??(BI[kI]=new Map);let t=e.get(I.createContext);return t||(t=I.createContext(null),e.set(I.createContext,t)),t}var mlt=hlt();function plt(e){const{children:t,context:r,serverState:n,store:a}=e,s=I.useMemo(()=>{const l=olt(a);return{store:a,subscription:l,getServerState:n?()=>n:void 0}},[a,n]),i=I.useMemo(()=>a.getState(),[a]);flt(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==a.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,i]);const o=r||mlt;return I.createElement(o.Provider,{value:s},t)}var glt=plt,vlt=(e,t)=>t,DL=ct([vlt,Tn,e1,Ii,Ble,vh,Xet,Ti],ttt),RL=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Oce=Fu("mouseClick"),Dce=Zw();Dce.startListening({actionCreator:Oce,effect:(e,t)=>{var r=e.payload,n=DL(t.getState(),RL(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(ret({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var F6=Fu("mouseMove"),Rce=Zw();Rce.startListening({actionCreator:F6,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=rL(n,n.tooltip.settings.shared),s=DL(n,RL(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(wle({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(yle()))}});function xlt(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var nW={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Pce=Mc({name:"rootProps",initialState:nW,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:nW.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),blt=Pce.reducer,{updateOptions:ylt}=Pce.actions,Lce=Mc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:wlt}=Lce.actions,Elt=Lce.reducer,Mce=Fu("keyDown"),Uce=Fu("focus"),PL=Zw();PL.startListening({actionCreator:Mce,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(nL(a,i1(r))),o=vh(r);if(s==="Enter"){var l=p5(r,"axis","hover",String(a.index));t.dispatch(E6({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:l}));return}var u=GZe(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var p=p5(r,"axis","hover",String(h));t.dispatch(E6({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});PL.startListening({actionCreator:Uce,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=p5(r,"axis","hover",String(s));t.dispatch(E6({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var pu=Fu("externalEvent"),Qce=Zw();Qce.startListening({actionCreator:pu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Uet(r),activeDataKey:Fle(r),activeIndex:sm(r),activeLabel:jle(r),activeTooltipIndex:sm(r),isTooltipActive:Qet(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Clt=ct([s1],e=>e.tooltipItemPayloads),_lt=ct([Clt,i2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),Hce=Fu("touchMove"),Vce=Zw();Vce.startListening({actionCreator:Hce,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=rL(n,n.tooltip.settings.shared);if(a==="axis"){var s=DL(n,RL({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(wle({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(Jie),d=(i=l.getAttribute(Zie))!==null&&i!==void 0?i:void 0,f=_lt(t.getState(),u,d);t.dispatch(ble({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var Slt=Eie({brush:Vit,cartesianAxis:Lot,chartData:gtt,errorBars:$st,graphicalItems:Sat,layout:RXe,legend:bYe,options:Att,polarAxis:bnt,polarOptions:Elt,referenceElements:Xit,rootProps:blt,tooltip:net}),Nlt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return oXe({reducer:Slt,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Dce.middleware,Rce.middleware,PL.middleware,Qce.middleware,Vce.middleware]),devTools:{serialize:{replacer:xlt},name:"recharts-".concat(r)}})};function zce(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Zl(),s=I.useRef(null);if(a)return r;s.current==null&&(s.current=Nlt(t,n));var i=bP;return I.createElement(glt,{context:i,store:s.current},r)}function $ce(e){var{layout:t,width:r,height:n,margin:a}=e,s=us(),i=Zl();return I.useEffect(()=>{i||(s(FXe(t)),s(OXe({width:r,height:n})),s(jXe(a)))},[s,i,t,r,n,a]),null}function Kce(e){var t=us();return I.useEffect(()=>{t(ylt(e))},[t,e]),null}var klt=["children"];function Blt(e,t){if(e==null)return{};var r,n,a=Tlt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tlt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function S5(){return S5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S5.apply(null,arguments)}var Ilt={width:"100%",height:"100%"},jlt=I.forwardRef((e,t)=>{var r=roe(),n=noe(),a=ooe();if(!Sx(r)||!Sx(n))return null;var{children:s,otherAttributes:i,title:o,desc:l}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,I.createElement(uie,S5({},i,{title:o,desc:l,role:d,tabIndex:u,width:r,height:n,style:Ilt,ref:t}),s)}),Flt=e=>{var{children:t}=e,r=ir(E4);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return I.createElement(uie,{width:n,height:a,x:i,y:s},t)},aW=I.forwardRef((e,t)=>{var{children:r}=e,n=Blt(e,klt),a=Zl();return a?I.createElement(Flt,null,r):I.createElement(jlt,S5({ref:t},n),r)});function Olt(){var e=us(),[t,r]=I.useState(null),n=ir(dYe);return I.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Lc(s)&&s!==n&&e(DXe(s))}},[t,e,n]),r}function sW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dlt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sW(Object(r),!0).forEach(function(n){Rlt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rlt(e,t,r){return(t=Plt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Plt(e){var t=Llt(e,"string");return typeof t=="symbol"?t:t+""}function Llt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mlt=I.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:v,style:b,width:y}=e,_=us(),[S,k]=I.useState(null),[B,F]=I.useState(null);btt();var w=Olt(),C=I.useCallback(L=>{w(L),typeof t=="function"&&t(L),k(L),F(L)},[w,t,k,F]),N=I.useCallback(L=>{_(Oce(L)),_(pu({handler:s,reactEvent:L}))},[_,s]),R=I.useCallback(L=>{_(F6(L)),_(pu({handler:u,reactEvent:L}))},[_,u]),O=I.useCallback(L=>{_(yle()),_(pu({handler:d,reactEvent:L}))},[_,d]),j=I.useCallback(L=>{_(F6(L)),_(pu({handler:f,reactEvent:L}))},[_,f]),U=I.useCallback(()=>{_(Uce())},[_]),P=I.useCallback(L=>{_(Mce(L.key))},[_]),X=I.useCallback(L=>{_(pu({handler:i,reactEvent:L}))},[_,i]),K=I.useCallback(L=>{_(pu({handler:o,reactEvent:L}))},[_,o]),Z=I.useCallback(L=>{_(pu({handler:l,reactEvent:L}))},[_,l]),H=I.useCallback(L=>{_(pu({handler:h,reactEvent:L}))},[_,h]),V=I.useCallback(L=>{_(pu({handler:v,reactEvent:L}))},[_,v]),q=I.useCallback(L=>{_(Hce(L)),_(pu({handler:g,reactEvent:L}))},[_,g]),ne=I.useCallback(L=>{_(pu({handler:p,reactEvent:L}))},[_,p]);return I.createElement(Mle.Provider,{value:S},I.createElement(Hqe.Provider,{value:B},I.createElement("div",{className:En("recharts-wrapper",n),style:Dlt({position:"relative",cursor:"default",width:y,height:a},b),onClick:N,onContextMenu:X,onDoubleClick:K,onFocus:U,onKeyDown:P,onMouseDown:Z,onMouseEnter:R,onMouseLeave:O,onMouseMove:j,onMouseUp:H,onTouchEnd:ne,onTouchMove:q,onTouchStart:V,ref:C},r)))}),Ult=["children","className","width","height","style","compact","title","desc"];function Qlt(e,t){if(e==null)return{};var r,n,a=Hlt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hlt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Gce=I.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:l,desc:u}=e,d=Qlt(e,Ult),f=rl(d);return o?I.createElement(aW,{otherAttributes:f,title:l,desc:u},r):I.createElement(Mlt,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},I.createElement(aW,{otherAttributes:f,title:l,desc:u,ref:t},I.createElement(Jit,null,r)))}),Vlt=["width","height"];function O6(){return O6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O6.apply(null,arguments)}function zlt(e,t){if(e==null)return{};var r,n,a=$lt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $lt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Klt={top:5,right:5,bottom:5,left:5},Glt={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Klt,reverseStackOrder:!1,syncMethod:"index"},qlt=I.forwardRef(function(t,r){var n,a=Pu(t.categoricalChartProps,Glt),{width:s,height:i}=a,o=zlt(a,Vlt);if(!Sx(s)||!Sx(i))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return I.createElement(zce,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:l},I.createElement(_ce,{chartData:h.data}),I.createElement($ce,{width:s,height:i,layout:a.layout,margin:a.margin}),I.createElement(Kce,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),I.createElement(Gce,O6({},o,{width:s,height:i,ref:r})))}),Wlt=["axis","item"],iW=I.forwardRef((e,t)=>I.createElement(qlt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Wlt,tooltipPayloadSearcher:dL,categoricalChartProps:e,ref:t}));function Xlt(e){var t=us();return I.useEffect(()=>{t(wlt(e))},[t,e]),null}var Ylt=["width","height","layout"];function D6(){return D6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D6.apply(null,arguments)}function Jlt(e,t){if(e==null)return{};var r,n,a=Zlt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zlt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ect={top:5,right:5,bottom:5,left:5},tct={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ect,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},qce=I.forwardRef(function(t,r){var n,a=Pu(t.categoricalChartProps,tct),{width:s,height:i,layout:o}=a,l=Jlt(a,Ylt);if(!Sx(s)||!Sx(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return I.createElement(zce,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},I.createElement(_ce,{chartData:a.data}),I.createElement($ce,{width:s,height:i,layout:o,margin:a.margin}),I.createElement(Kce,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),I.createElement(Xlt,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),I.createElement(Gce,D6({width:s,height:i},l,{ref:r})))}),rct=["item"],nct={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},act=I.forwardRef((e,t)=>{var r=Pu(e,nct);return I.createElement(qce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:rct,tooltipPayloadSearcher:dL,categoricalChartProps:r,ref:t})}),sct=["axis"],ict={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},oct=I.forwardRef((e,t)=>{var r=Pu(e,ict);return I.createElement(qce,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:sct,tooltipPayloadSearcher:dL,categoricalChartProps:r,ref:t})});const lct=e=>{const[t,r]=I.useState(!1),[n,a]=I.useState(null);return I.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},Wce=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],cct=["Mecánica Industrial","Mecánica Automotriz"],uct=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:Wce.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),oW=({empresas:e,isLoaded:t,route:r})=>{const n=I.useRef(null),a=I.useRef(null),s=I.useRef([]),i=I.useRef(null),o=e.filter(l=>{var u,d;return((u=l.coordenadas)==null?void 0:u.lat)&&((d=l.coordenadas)==null?void 0:d.lng)});return I.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(l=>l.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(l=>{const u=new window.google.maps.Marker({position:{lat:l.coordenadas.lat,lng:l.coordenadas.lng},map:a.current,title:l.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${l.nombre}</div><div>${l.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),c.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[c.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:c.jsx("div",{className:"text-center p-6",children:c.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},dct=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,l=s+o,u=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return c.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[c.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),c.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var p,g,v;return c.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[(p=f.duration)==null?void 0:p.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&c.jsx("div",{className:"space-y-3",children:(v=f.steps)==null?void 0:v.map((b,y)=>b.transit&&c.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[c.jsx("span",{className:"text-lg",children:"🚌"}),c.jsx("span",{dangerouslySetInnerHTML:{__html:b.instructions}})]},y))})]},h)})}),c.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[c.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),c.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),c.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(l/60)," min"]}),c.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&c.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},lW=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,Act=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),c.jsx(DC,{width:"100%",height:300,children:c.jsxs(act,{children:[c.jsx(fce,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>c.jsx(l2,{fill:t[n%t.length]},`cell-${n}`))}),c.jsx(OC,{})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),c.jsx(DC,{width:"100%",height:300,children:c.jsxs(iW,{data:e.porSupervisor,layout:"vertical",children:[c.jsx(T6,{strokeDasharray:"3 3"}),c.jsx(C5,{type:"number"}),c.jsx(_5,{type:"category",dataKey:"name",width:150}),c.jsx(OC,{}),c.jsx(B6,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),c.jsx(DC,{width:"100%",height:300,children:c.jsxs(iW,{data:e.porComuna,children:[c.jsx(T6,{strokeDasharray:"3 3"}),c.jsx(C5,{dataKey:"name"}),c.jsx(_5,{}),c.jsx(OC,{}),c.jsx(B6,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),c.jsx(DC,{width:"100%",height:300,children:c.jsxs(oct,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[c.jsx(tce,{}),c.jsx(L4,{dataKey:"subject"}),c.jsx(R4,{angle:30,domain:[0,5]}),c.jsx(IL,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),c.jsx(OC,{})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),c.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:c.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>c.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[c.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),c.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},fct=()=>{const[e,t]=I.useState([]),[r,n]=I.useState([]),[a,s]=I.useState("list"),[i,o]=I.useState(null),[l,u]=I.useState(!0),[d,f]=I.useState(null),[h,p]=I.useState(null),[g,v]=I.useState(null),[b,y]=I.useState([]),[_,S]=I.useState(null),[k,B]=I.useState(!1),[F,w]=I.useState("DRIVING"),[C,N]=I.useState(""),[R,O]=I.useState([]),j="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:U}=lct(j);I.useEffect(()=>{u(!0);const oe=xKe(t),ce=wKe(n),ge=CKe(O);return u(!1),()=>{oe(),ce(),ge()}},[]);const P=I.useMemo(()=>{const oe=e.reduce((Se,De)=>{const _e=De.area||"Sin especificar";return Se[_e]=(Se[_e]||0)+1,Se},{}),ce=e.reduce((Se,De)=>{var he;const _e=((he=De.docenteSupervisor)==null?void 0:he.nombreCompleto)||"Sin asignar";return Se[_e]=(Se[_e]||0)+1,Se},{}),ge=e.reduce((Se,De)=>{const _e=De.direccion.split(",").map(Ie=>Ie.trim()),he=_e.length>1?_e[1]:"Desconocida";return Se[he]=(Se[he]||0)+1,Se},{}),je=Wce.map(Se=>{const De=e.flatMap(he=>{var Ie;return(Ie=he.calificaciones.find(He=>He.elemento===Se.elemento))==null?void 0:Ie.score}).filter(he=>he!=null),_e=De.length>0?De.reduce((he,Ie)=>he+Ie,0)/De.length:0;return{subject:Se.elemento.split(" ")[0],A:_e,fullMark:5}}),re=e.map(Se=>{const De=Se.calificaciones.map(he=>he.score).filter(he=>he!=null),_e=De.length>0?De.reduce((he,Ie)=>he+Ie,0)/De.length:0;return{...Se,promedio:_e}}).filter(Se=>Se.promedio>0).sort((Se,De)=>De.promedio-Se.promedio);return{porEspecialidad:Object.entries(oe).map(([Se,De])=>({name:Se,value:De})),porSupervisor:Object.entries(ce).map(([Se,De])=>({name:Se,value:De})),porComuna:Object.entries(ge).map(([Se,De])=>({name:Se,value:De})),calificacionPorAmbito:je,ranking:re}},[e]),X=async()=>{if(i)try{await bKe(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},K=async oe=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await yKe(oe)},Z=(oe,ce)=>{o(ge=>ge?{...ge,[oe]:ce}:null)},H=async oe=>{var ce;if(f(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&U){const ge=await lW(oe.value.place_id);Z("direccion",oe.label||""),Z("coordenadas",ge)}else Z("direccion",(oe==null?void 0:oe.label)||"")},V=oe=>{o(JSON.parse(JSON.stringify(oe))),oe.direccion&&f({label:oe.direccion,value:{description:oe.direccion}}),s("form")},q=async oe=>{var ce;if(p(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&U){const ge=await lW(oe.value.place_id);v(ge)}},ne=oe=>{y(ce=>ce.some(ge=>ge.id===oe.id)?ce.filter(ge=>ge.id!==oe.id):[...ce,oe])},L=()=>{if(!g||b.length===0||!U)return;B(!0);const oe=new window.google.maps.DirectionsService,ce=b.filter(ge=>ge.coordenadas).map(ge=>({location:ge.coordenadas,stopover:!0}));oe.route({origin:g,destination:g,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[F]},(ge,je)=>{B(!1),je===window.google.maps.DirectionsStatus.OK&&ge?S(ge):alert("No se pudo calcular la ruta: "+je)})},W=()=>{S(null),p(null),v(null),y([]),N("")},J=async()=>{if(!C||!h||!g||b.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const oe={nombre:C,startPoint:{label:h.label,coords:g},empresas:b.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:F};try{await EKe(oe),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},te=async()=>{const oe=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!oe||!ce)return;const ge=new mr("p","mm","a4"),je=ge.internal.pageSize.getWidth();ge.text(`Ruta de Supervisión: ${C||"Sin nombre"}`,10,15),ge.setFontSize(10),ge.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Se=(await CS(oe,{useCORS:!0})).toDataURL("image/png");ge.addImage(Se,"PNG",10,30,je-20,100);const _e=(await CS(ce)).toDataURL("image/png"),he=ge.getImageProperties(_e),Ie=he.height*(je-20)/he.width;ge.addImage(_e,"PNG",10,135,je-20,Ie),ge.save(`ruta-${C||"supervision"}.pdf`)},ie=oe=>{p({label:oe.startPoint.label,value:null}),v(oe.startPoint.coords),y(oe.empresas),w(oe.travelMode),N(oe.nombre),s("route")},Ae=async oe=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await _Ke(oe),alert("Ruta eliminada."))};return l?c.jsx("div",{className:"text-center p-8",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),c.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&c.jsx("button",{onClick:()=>{s("list"),f(null),o(null),W()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[c.jsx(Zxe,{size:18})," Dashboard"]}),c.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),c.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),c.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),c.jsx("button",{onClick:()=>{o(uct()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&c.jsx(Act,{data:P}),a==="saved-routes"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),c.jsx("div",{className:"space-y-3",children:R.length===0?c.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):R.map(oe=>c.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:oe.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[oe.empresas.length," paradas"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ie(oe),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),c.jsx("button",{onClick:()=>Ae(oe.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},oe.id))})]}),a==="route"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),c.jsx("input",{type:"text",value:C,onChange:oe=>N(oe.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),c.jsx(M$,{apiKey:j,selectProps:{value:h,onChange:q,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),c.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[c.jsx("button",{onClick:()=>w("DRIVING"),className:`w-full py-2 rounded-md transition ${F==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),c.jsx("button",{onClick:()=>w("TRANSIT"),className:`w-full py-2 rounded-md transition ${F==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),c.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(oe=>oe.coordenadas).map(oe=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`route-${oe.id}`,checked:b.some(ce=>ce.id===oe.id),onChange:()=>ne(oe),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsx("label",{htmlFor:`route-${oe.id}`,className:"ml-3 text-sm text-gray-700",children:oe.nombre})]},oe.id))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("button",{onClick:L,disabled:!g||b.length===0||k,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:k?"Calculando...":"Visualizar Ruta"}),c.jsx("button",{onClick:J,disabled:!C||!g||b.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),c.jsx("button",{onClick:te,disabled:!_,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),c.jsx("button",{onClick:W,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),c.jsx("div",{children:c.jsx(oW,{empresas:b,isLoaded:U,route:_})})]}),_&&c.jsx(dct,{route:_,travelMode:F})]}),a==="map"&&c.jsx(oW,{empresas:e,isLoaded:U}),a==="list"&&c.jsx("div",{className:"space-y-3",children:e.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(oe=>{var ce;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg",children:oe.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[oe.rut," | ",oe.direccion]}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",oe.area||"No especificada"," | Cupos: ",oe.cupos," | Supervisor: ",((ce=oe.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>V(oe),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),c.jsx("button",{onClick:()=>K(oe.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},oe.id)})}),a==="form"&&i&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(jxe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.nombre,onChange:oe=>Z("nombre",oe.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(Wxe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.rut,onChange:oe=>Z("rut",oe.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),c.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[c.jsx(hj,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),c.jsx("div",{className:"w-full pl-10",children:c.jsx(M$,{apiKey:j,selectProps:{value:d,onChange:H,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(P7,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.contacto,onChange:oe=>Z("contacto",oe.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(t1e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{type:"email",value:i.email||"",onChange:oe=>Z("email",oe.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(C1e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{type:"number",value:i.cupos,onChange:oe=>Z("cupos",parseInt(oe.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(Txe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsxs("select",{value:i.area||"",onChange:oe=>Z("area",oe.target.value),className:"input-style pl-10 w-full",children:[c.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),cct.map(oe=>c.jsx("option",{value:oe,children:oe},oe))]})]}),c.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[c.jsx(P7,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:oe=>{const ce=oe.target.value;Z("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[c.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(oe=>c.jsx("option",{value:JSON.stringify({id:oe.id,nombre:oe.nombreCompleto}),children:oe.nombreCompleto},oe.id))]})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),i.calificaciones.map((oe,ce)=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[c.jsx(p1e,{className:"w-5 h-5 text-slate-400"}),c.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:oe.elemento}),c.jsxs("select",{value:oe.score||"",onChange:ge=>{const je=[...i.calificaciones];je[ce].score=ge.target.value?parseInt(ge.target.value):null,Z("calificaciones",je)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[c.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(ge=>c.jsx("option",{value:ge,children:ge},ge))]})]},ce))]}),c.jsx("div",{className:"pt-6",children:c.jsx("button",{onClick:X,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})};var u2=e=>e.type==="checkbox",up=e=>e instanceof Date,Al=e=>e==null;const Xce=e=>typeof e=="object";var Xs=e=>!Al(e)&&!Array.isArray(e)&&Xce(e)&&!up(e),hct=e=>Xs(e)&&e.target?u2(e.target)?e.target.checked:e.target.value:e,mct=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,pct=(e,t)=>e.has(mct(t)),gct=e=>{const t=e.constructor&&e.constructor.prototype;return Xs(t)&&t.hasOwnProperty("isPrototypeOf")},LL=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Xa(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(LL&&(e instanceof Blob||n))&&(r||Xs(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!gct(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Xa(e[a]));else return e;return t}var M4=e=>/^\w*$/.test(e),Ya=e=>e===void 0,U4=e=>Array.isArray(e)?e.filter(Boolean):[],ML=e=>U4(e.replace(/["|']|\]/g,"").split(/\.|\[/)),or=(e,t,r)=>{if(!t||!Xs(e))return r;const n=(M4(t)?[t]:ML(t)).reduce((a,s)=>Al(a)?a:a[s],e);return Ya(n)||n===e?Ya(e[t])?r:e[t]:n},mA=e=>typeof e=="boolean",Fa=(e,t,r)=>{let n=-1;const a=M4(t)?[t]:ML(t),s=a.length,i=s-1;for(;++n<s;){const o=a[n];let l=r;if(n!==i){const u=e[o];l=Xs(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=l,e=e[o]}};const cW={BLUR:"blur",FOCUS_OUT:"focusout"},Cu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Bf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Yce=lt.createContext(null);Yce.displayName="HookFormContext";const vct=()=>lt.useContext(Yce);var xct=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==Cu.all&&(t._proxyFormState[i]=!n||Cu.all),e[i]}});return a};const Jce=typeof window<"u"?lt.useLayoutEffect:lt.useEffect;var SA=e=>typeof e=="string",bct=(e,t,r,n,a)=>SA(e)?(n&&t.watch.add(e),or(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),or(r,s))):(n&&(t.watchAll=!0),r),R6=e=>Al(e)||!Xce(e);function y0(e,t,r=new WeakSet){if(R6(e)||R6(t))return e===t;if(up(e)&&up(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const o=t[s];if(up(i)&&up(o)||Xs(i)&&Xs(o)||Array.isArray(i)&&Array.isArray(o)?!y0(i,o,r):i!==o)return!1}}return!0}var yct=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Gl=e=>Array.isArray(e)?e:[e],uW=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},cl=e=>Xs(e)&&!Object.keys(e).length,UL=e=>e.type==="file",md=e=>typeof e=="function",N5=e=>{if(!LL)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Zce=e=>e.type==="select-multiple",QL=e=>e.type==="radio",wct=e=>QL(e)||u2(e),TI=e=>N5(e)&&e.isConnected;function Ect(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ya(e)?n++:e[t[n++]];return e}function Cct(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ya(e[t]))return!1;return!0}function Qs(e,t){const r=Array.isArray(t)?t:M4(t)?[t]:ML(t),n=r.length===1?e:Ect(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Xs(n)&&cl(n)||Array.isArray(n)&&Cct(n))&&Qs(e,r.slice(0,-1)),e}var eue=e=>{for(const t in e)if(md(e[t]))return!0;return!1};function k5(e,t={}){const r=Array.isArray(e);if(Xs(e)||r)for(const n in e)Array.isArray(e[n])||Xs(e[n])&&!eue(e[n])?(t[n]=Array.isArray(e[n])?[]:{},k5(e[n],t[n])):Al(e[n])||(t[n]=!0);return t}function tue(e,t,r){const n=Array.isArray(e);if(Xs(e)||n)for(const a in e)Array.isArray(e[a])||Xs(e[a])&&!eue(e[a])?Ya(t)||R6(r[a])?r[a]=Array.isArray(e[a])?k5(e[a],[]):{...k5(e[a])}:tue(e[a],Al(t)?{}:t[a],r[a]):r[a]=!y0(e[a],t[a]);return r}var bb=(e,t)=>tue(e,t,k5(t));const dW={value:!1,isValid:!1},AW={value:!0,isValid:!0};var rue=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ya(e[0].attributes.value)?Ya(e[0].value)||e[0].value===""?AW:{value:e[0].value,isValid:!0}:AW:dW}return dW},nue=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ya(e)?e:t?e===""?NaN:e&&+e:r&&SA(e)?new Date(e):n?n(e):e;const fW={isValid:!1,value:null};var aue=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,fW):fW;function hW(e){const t=e.ref;return UL(t)?t.files:QL(t)?aue(e.refs).value:Zce(t)?[...t.selectedOptions].map(({value:r})=>r):u2(t)?rue(e.refs).value:nue(Ya(t.value)?e.ref.value:t.value,e)}var _ct=(e,t,r,n)=>{const a={};for(const s of e){const i=or(t,s);i&&Fa(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},B5=e=>e instanceof RegExp,yb=e=>Ya(e)?e:B5(e)?e.source:Xs(e)?B5(e.value)?e.value.source:e.value:e,Iv=e=>({isOnSubmit:!e||e===Cu.onSubmit,isOnBlur:e===Cu.onBlur,isOnChange:e===Cu.onChange,isOnAll:e===Cu.all,isOnTouch:e===Cu.onTouched});const mW="AsyncFunction";var Sct=e=>!!e&&!!e.validate&&!!(md(e.validate)&&e.validate.constructor.name===mW||Xs(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===mW)),Nct=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),P6=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const ex=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=or(e,a);if(s){const{_f:i,...o}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(ex(o,t))break}else if(Xs(o)&&ex(o,t))break}}};function pW(e,t,r){const n=or(e,r);if(n||M4(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=or(t,s),o=or(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};a.pop()}return{name:r}}var kct=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return cl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||Cu.all))},Bct=(e,t,r)=>!e||!t||e===t||Gl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Tct=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,Ict=(e,t)=>!U4(or(e,t)).length&&Qs(e,t),sue=(e,t,r)=>{const n=Gl(or(e,r));return Fa(n,"root",t[r]),Fa(e,r,n),e},__=e=>SA(e);function gW(e,t,r="validate"){if(__(e)||Array.isArray(e)&&e.every(__)||mA(e)&&!e)return{type:r,message:__(e)?e:"",ref:t}}var lv=e=>Xs(e)&&!B5(e)?e:{value:e,message:""},L6=async(e,t,r,n,a,s)=>{const{ref:i,refs:o,required:l,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:g,name:v,valueAsNumber:b,mount:y}=e._f,_=or(r,v);if(!y||t.has(v))return{};const S=o?o[0]:i,k=j=>{a&&S.reportValidity&&(S.setCustomValidity(mA(j)?"":j||""),S.reportValidity())},B={},F=QL(i),w=u2(i),C=F||w,N=(b||UL(i))&&Ya(i.value)&&Ya(_)||N5(i)&&i.value===""||_===""||Array.isArray(_)&&!_.length,R=yct.bind(null,v,n,B),O=(j,U,P,X=Bf.maxLength,K=Bf.minLength)=>{const Z=j?U:P;B[v]={type:j?X:K,message:Z,ref:i,...R(j?X:K,Z)}};if(s?!Array.isArray(_)||!_.length:l&&(!C&&(N||Al(_))||mA(_)&&!_||w&&!rue(o).isValid||F&&!aue(o).isValid)){const{value:j,message:U}=__(l)?{value:!!l,message:l}:lv(l);if(j&&(B[v]={type:Bf.required,message:U,ref:S,...R(Bf.required,U)},!n))return k(U),B}if(!N&&(!Al(f)||!Al(h))){let j,U;const P=lv(h),X=lv(f);if(!Al(_)&&!isNaN(_)){const K=i.valueAsNumber||_&&+_;Al(P.value)||(j=K>P.value),Al(X.value)||(U=K<X.value)}else{const K=i.valueAsDate||new Date(_),Z=q=>new Date(new Date().toDateString()+" "+q),H=i.type=="time",V=i.type=="week";SA(P.value)&&_&&(j=H?Z(_)>Z(P.value):V?_>P.value:K>new Date(P.value)),SA(X.value)&&_&&(U=H?Z(_)<Z(X.value):V?_<X.value:K<new Date(X.value))}if((j||U)&&(O(!!j,P.message,X.message,Bf.max,Bf.min),!n))return k(B[v].message),B}if((u||d)&&!N&&(SA(_)||s&&Array.isArray(_))){const j=lv(u),U=lv(d),P=!Al(j.value)&&_.length>+j.value,X=!Al(U.value)&&_.length<+U.value;if((P||X)&&(O(P,j.message,U.message),!n))return k(B[v].message),B}if(p&&!N&&SA(_)){const{value:j,message:U}=lv(p);if(B5(j)&&!_.match(j)&&(B[v]={type:Bf.pattern,message:U,ref:i,...R(Bf.pattern,U)},!n))return k(U),B}if(g){if(md(g)){const j=await g(_,r),U=gW(j,S);if(U&&(B[v]={...U,...R(Bf.validate,U.message)},!n))return k(U.message),B}else if(Xs(g)){let j={};for(const U in g){if(!cl(j)&&!n)break;const P=gW(await g[U](_,r),S,U);P&&(j={...P,...R(U,P.message)},k(P.message),n&&(B[v]=j))}if(!cl(j)&&(B[v]={ref:S,...j},!n))return B}}return k(!0),B};const jct={mode:Cu.onSubmit,reValidateMode:Cu.onChange,shouldFocusError:!0};function Fct(e={}){let t={...jct,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:md(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Xs(t.defaultValues)||Xs(t.values)?Xa(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Xa(a),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:uW(),state:uW()},p=t.criteriaMode===Cu.all,g=ye=>Oe=>{clearTimeout(u),u=setTimeout(ye,Oe)},v=async ye=>{if(!t.disabled&&(d.isValid||f.isValid||ye)){const Oe=t.resolver?cl((await w()).errors):await N(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},b=(ye,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ye||Array.from(o.mount)).forEach(Pe=>{Pe&&(Oe?Fa(r.validatingFields,Pe,Oe):Qs(r.validatingFields,Pe))}),h.state.next({validatingFields:r.validatingFields,isValidating:!cl(r.validatingFields)}))},y=(ye,Oe=[],Pe,qe,Ze=!0,ot=!0)=>{if(qe&&Pe&&!t.disabled){if(i.action=!0,ot&&Array.isArray(or(n,ye))){const mt=Pe(or(n,ye),qe.argA,qe.argB);Ze&&Fa(n,ye,mt)}if(ot&&Array.isArray(or(r.errors,ye))){const mt=Pe(or(r.errors,ye),qe.argA,qe.argB);Ze&&Fa(r.errors,ye,mt),Ict(r.errors,ye)}if((d.touchedFields||f.touchedFields)&&ot&&Array.isArray(or(r.touchedFields,ye))){const mt=Pe(or(r.touchedFields,ye),qe.argA,qe.argB);Ze&&Fa(r.touchedFields,ye,mt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=bb(a,s)),h.state.next({name:ye,isDirty:O(ye,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fa(s,ye,Oe)},_=(ye,Oe)=>{Fa(r.errors,ye,Oe),h.state.next({errors:r.errors})},S=ye=>{r.errors=ye,h.state.next({errors:r.errors,isValid:!1})},k=(ye,Oe,Pe,qe)=>{const Ze=or(n,ye);if(Ze){const ot=or(s,ye,Ya(Pe)?or(a,ye):Pe);Ya(ot)||qe&&qe.defaultChecked||Oe?Fa(s,ye,Oe?ot:hW(Ze._f)):P(ye,ot),i.mount&&v()}},B=(ye,Oe,Pe,qe,Ze)=>{let ot=!1,mt=!1;const Bt={name:ye};if(!t.disabled){if(!Pe||qe){(d.isDirty||f.isDirty)&&(mt=r.isDirty,r.isDirty=Bt.isDirty=O(),ot=mt!==Bt.isDirty);const Lt=y0(or(a,ye),Oe);mt=!!or(r.dirtyFields,ye),Lt?Qs(r.dirtyFields,ye):Fa(r.dirtyFields,ye,!0),Bt.dirtyFields=r.dirtyFields,ot=ot||(d.dirtyFields||f.dirtyFields)&&mt!==!Lt}if(Pe){const Lt=or(r.touchedFields,ye);Lt||(Fa(r.touchedFields,ye,Pe),Bt.touchedFields=r.touchedFields,ot=ot||(d.touchedFields||f.touchedFields)&&Lt!==Pe)}ot&&Ze&&h.state.next(Bt)}return ot?Bt:{}},F=(ye,Oe,Pe,qe)=>{const Ze=or(r.errors,ye),ot=(d.isValid||f.isValid)&&mA(Oe)&&r.isValid!==Oe;if(t.delayError&&Pe?(l=g(()=>_(ye,Pe)),l(t.delayError)):(clearTimeout(u),l=null,Pe?Fa(r.errors,ye,Pe):Qs(r.errors,ye)),(Pe?!y0(Ze,Pe):Ze)||!cl(qe)||ot){const mt={...qe,...ot&&mA(Oe)?{isValid:Oe}:{},errors:r.errors,name:ye};r={...r,...mt},h.state.next(mt)}},w=async ye=>{b(ye,!0);const Oe=await t.resolver(s,t.context,_ct(ye||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(ye),Oe},C=async ye=>{const{errors:Oe}=await w(ye);if(ye)for(const Pe of ye){const qe=or(Oe,Pe);qe?Fa(r.errors,Pe,qe):Qs(r.errors,Pe)}else r.errors=Oe;return Oe},N=async(ye,Oe,Pe={valid:!0})=>{for(const qe in ye){const Ze=ye[qe];if(Ze){const{_f:ot,...mt}=Ze;if(ot){const Bt=o.array.has(ot.name),Lt=Ze._f&&Sct(Ze._f);Lt&&d.validatingFields&&b([qe],!0);const Ot=await L6(Ze,o.disabled,s,p,t.shouldUseNativeValidation&&!Oe,Bt);if(Lt&&d.validatingFields&&b([qe]),Ot[ot.name]&&(Pe.valid=!1,Oe))break;!Oe&&(or(Ot,ot.name)?Bt?sue(r.errors,Ot,ot.name):Fa(r.errors,ot.name,Ot[ot.name]):Qs(r.errors,ot.name))}!cl(mt)&&await N(mt,Oe,Pe)}}return Pe.valid},R=()=>{for(const ye of o.unMount){const Oe=or(n,ye);Oe&&(Oe._f.refs?Oe._f.refs.every(Pe=>!TI(Pe)):!TI(Oe._f.ref))&&Ae(ye)}o.unMount=new Set},O=(ye,Oe)=>!t.disabled&&(ye&&Oe&&Fa(s,ye,Oe),!y0(q(),a)),j=(ye,Oe,Pe)=>bct(ye,o,{...i.mount?s:Ya(Oe)?a:SA(ye)?{[ye]:Oe}:Oe},Pe,Oe),U=ye=>U4(or(i.mount?s:a,ye,t.shouldUnregister?or(a,ye,[]):[])),P=(ye,Oe,Pe={})=>{const qe=or(n,ye);let Ze=Oe;if(qe){const ot=qe._f;ot&&(!ot.disabled&&Fa(s,ye,nue(Oe,ot)),Ze=N5(ot.ref)&&Al(Oe)?"":Oe,Zce(ot.ref)?[...ot.ref.options].forEach(mt=>mt.selected=Ze.includes(mt.value)):ot.refs?u2(ot.ref)?ot.refs.forEach(mt=>{(!mt.defaultChecked||!mt.disabled)&&(Array.isArray(Ze)?mt.checked=!!Ze.find(Bt=>Bt===mt.value):mt.checked=Ze===mt.value||!!Ze)}):ot.refs.forEach(mt=>mt.checked=mt.value===Ze):UL(ot.ref)?ot.ref.value="":(ot.ref.value=Ze,ot.ref.type||h.state.next({name:ye,values:Xa(s)})))}(Pe.shouldDirty||Pe.shouldTouch)&&B(ye,Ze,Pe.shouldTouch,Pe.shouldDirty,!0),Pe.shouldValidate&&V(ye)},X=(ye,Oe,Pe)=>{for(const qe in Oe){if(!Oe.hasOwnProperty(qe))return;const Ze=Oe[qe],ot=ye+"."+qe,mt=or(n,ot);(o.array.has(ye)||Xs(Ze)||mt&&!mt._f)&&!up(Ze)?X(ot,Ze,Pe):P(ot,Ze,Pe)}},K=(ye,Oe,Pe={})=>{const qe=or(n,ye),Ze=o.array.has(ye),ot=Xa(Oe);Fa(s,ye,ot),Ze?(h.array.next({name:ye,values:Xa(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Pe.shouldDirty&&h.state.next({name:ye,dirtyFields:bb(a,s),isDirty:O(ye,ot)})):qe&&!qe._f&&!Al(ot)?X(ye,ot,Pe):P(ye,ot,Pe),P6(ye,o)&&h.state.next({...r,name:ye}),h.state.next({name:i.mount?ye:void 0,values:Xa(s)})},Z=async ye=>{i.mount=!0;const Oe=ye.target;let Pe=Oe.name,qe=!0;const Ze=or(n,Pe),ot=Lt=>{qe=Number.isNaN(Lt)||up(Lt)&&isNaN(Lt.getTime())||y0(Lt,or(s,Pe,Lt))},mt=Iv(t.mode),Bt=Iv(t.reValidateMode);if(Ze){let Lt,Ot;const Qt=Oe.type?hW(Ze._f):hct(ye),bt=ye.type===cW.BLUR||ye.type===cW.FOCUS_OUT,Nr=!Nct(Ze._f)&&!t.resolver&&!or(r.errors,Pe)&&!Ze._f.deps||Tct(bt,or(r.touchedFields,Pe),r.isSubmitted,Bt,mt),tr=P6(Pe,o,bt);Fa(s,Pe,Qt),bt?(!Oe||!Oe.readOnly)&&(Ze._f.onBlur&&Ze._f.onBlur(ye),l&&l(0)):Ze._f.onChange&&Ze._f.onChange(ye);const nn=B(Pe,Qt,bt),Cr=!cl(nn)||tr;if(!bt&&h.state.next({name:Pe,type:ye.type,values:Xa(s)}),Nr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?bt&&v():bt||v()),Cr&&h.state.next({name:Pe,...tr?{}:nn});if(!bt&&tr&&h.state.next({...r}),t.resolver){const{errors:Vr}=await w([Pe]);if(ot(Qt),qe){const In=pW(r.errors,n,Pe),jr=pW(Vr,n,In.name||Pe);Lt=jr.error,Pe=jr.name,Ot=cl(Vr)}}else b([Pe],!0),Lt=(await L6(Ze,o.disabled,s,p,t.shouldUseNativeValidation))[Pe],b([Pe]),ot(Qt),qe&&(Lt?Ot=!1:(d.isValid||f.isValid)&&(Ot=await N(n,!0)));qe&&(Ze._f.deps&&V(Ze._f.deps),F(Pe,Ot,Lt,nn))}},H=(ye,Oe)=>{if(or(r.errors,Oe)&&ye.focus)return ye.focus(),1},V=async(ye,Oe={})=>{let Pe,qe;const Ze=Gl(ye);if(t.resolver){const ot=await C(Ya(ye)?ye:Ze);Pe=cl(ot),qe=ye?!Ze.some(mt=>or(ot,mt)):Pe}else ye?(qe=(await Promise.all(Ze.map(async ot=>{const mt=or(n,ot);return await N(mt&&mt._f?{[ot]:mt}:mt)}))).every(Boolean),!(!qe&&!r.isValid)&&v()):qe=Pe=await N(n);return h.state.next({...!SA(ye)||(d.isValid||f.isValid)&&Pe!==r.isValid?{}:{name:ye},...t.resolver||!ye?{isValid:Pe}:{},errors:r.errors}),Oe.shouldFocus&&!qe&&ex(n,H,ye?Ze:o.mount),qe},q=ye=>{const Oe={...i.mount?s:a};return Ya(ye)?Oe:SA(ye)?or(Oe,ye):ye.map(Pe=>or(Oe,Pe))},ne=(ye,Oe)=>({invalid:!!or((Oe||r).errors,ye),isDirty:!!or((Oe||r).dirtyFields,ye),error:or((Oe||r).errors,ye),isValidating:!!or(r.validatingFields,ye),isTouched:!!or((Oe||r).touchedFields,ye)}),L=ye=>{ye&&Gl(ye).forEach(Oe=>Qs(r.errors,Oe)),h.state.next({errors:ye?r.errors:{}})},W=(ye,Oe,Pe)=>{const qe=(or(n,ye,{_f:{}})._f||{}).ref,Ze=or(r.errors,ye)||{},{ref:ot,message:mt,type:Bt,...Lt}=Ze;Fa(r.errors,ye,{...Lt,...Oe,ref:qe}),h.state.next({name:ye,errors:r.errors,isValid:!1}),Pe&&Pe.shouldFocus&&qe&&qe.focus&&qe.focus()},J=(ye,Oe)=>md(ye)?h.state.subscribe({next:Pe=>"values"in Pe&&ye(j(void 0,Oe),Pe)}):j(ye,Oe,!0),te=ye=>h.state.subscribe({next:Oe=>{Bct(ye.name,Oe.name,ye.exact)&&kct(Oe,ye.formState||d,Ie,ye.reRenderRoot)&&ye.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,ie=ye=>(i.mount=!0,f={...f,...ye.formState},te({...ye,formState:f})),Ae=(ye,Oe={})=>{for(const Pe of ye?Gl(ye):o.mount)o.mount.delete(Pe),o.array.delete(Pe),Oe.keepValue||(Qs(n,Pe),Qs(s,Pe)),!Oe.keepError&&Qs(r.errors,Pe),!Oe.keepDirty&&Qs(r.dirtyFields,Pe),!Oe.keepTouched&&Qs(r.touchedFields,Pe),!Oe.keepIsValidating&&Qs(r.validatingFields,Pe),!t.shouldUnregister&&!Oe.keepDefaultValue&&Qs(a,Pe);h.state.next({values:Xa(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:O()}:{}}),!Oe.keepIsValid&&v()},oe=({disabled:ye,name:Oe})=>{(mA(ye)&&i.mount||ye||o.disabled.has(Oe))&&(ye?o.disabled.add(Oe):o.disabled.delete(Oe))},ce=(ye,Oe={})=>{let Pe=or(n,ye);const qe=mA(Oe.disabled)||mA(t.disabled);return Fa(n,ye,{...Pe||{},_f:{...Pe&&Pe._f?Pe._f:{ref:{name:ye}},name:ye,mount:!0,...Oe}}),o.mount.add(ye),Pe?oe({disabled:mA(Oe.disabled)?Oe.disabled:t.disabled,name:ye}):k(ye,!0,Oe.value),{...qe?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:yb(Oe.min),max:yb(Oe.max),minLength:yb(Oe.minLength),maxLength:yb(Oe.maxLength),pattern:yb(Oe.pattern)}:{},name:ye,onChange:Z,onBlur:Z,ref:Ze=>{if(Ze){ce(ye,Oe),Pe=or(n,ye);const ot=Ya(Ze.value)&&Ze.querySelectorAll&&Ze.querySelectorAll("input,select,textarea")[0]||Ze,mt=wct(ot),Bt=Pe._f.refs||[];if(mt?Bt.find(Lt=>Lt===ot):ot===Pe._f.ref)return;Fa(n,ye,{_f:{...Pe._f,...mt?{refs:[...Bt.filter(TI),ot,...Array.isArray(or(a,ye))?[{}]:[]],ref:{type:ot.type,name:ye}}:{ref:ot}}}),k(ye,!1,void 0,ot)}else Pe=or(n,ye,{}),Pe._f&&(Pe._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(pct(o.array,ye)&&i.action)&&o.unMount.add(ye)}}},ge=()=>t.shouldFocusError&&ex(n,H,o.mount),je=ye=>{mA(ye)&&(h.state.next({disabled:ye}),ex(n,(Oe,Pe)=>{const qe=or(n,Pe);qe&&(Oe.disabled=qe._f.disabled||ye,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ze=>{Ze.disabled=qe._f.disabled||ye}))},0,!1))},re=(ye,Oe)=>async Pe=>{let qe;Pe&&(Pe.preventDefault&&Pe.preventDefault(),Pe.persist&&Pe.persist());let Ze=Xa(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ot,values:mt}=await w();r.errors=ot,Ze=Xa(mt)}else await N(n);if(o.disabled.size)for(const ot of o.disabled)Qs(Ze,ot);if(Qs(r.errors,"root"),cl(r.errors)){h.state.next({errors:{}});try{await ye(Ze,Pe)}catch(ot){qe=ot}}else Oe&&await Oe({...r.errors},Pe),ge(),setTimeout(ge);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:cl(r.errors)&&!qe,submitCount:r.submitCount+1,errors:r.errors}),qe)throw qe},Se=(ye,Oe={})=>{or(n,ye)&&(Ya(Oe.defaultValue)?K(ye,Xa(or(a,ye))):(K(ye,Oe.defaultValue),Fa(a,ye,Xa(Oe.defaultValue))),Oe.keepTouched||Qs(r.touchedFields,ye),Oe.keepDirty||(Qs(r.dirtyFields,ye),r.isDirty=Oe.defaultValue?O(ye,Xa(or(a,ye))):O()),Oe.keepError||(Qs(r.errors,ye),d.isValid&&v()),h.state.next({...r}))},De=(ye,Oe={})=>{const Pe=ye?Xa(ye):a,qe=Xa(Pe),Ze=cl(ye),ot=Ze?a:qe;if(Oe.keepDefaultValues||(a=Pe),!Oe.keepValues){if(Oe.keepDirtyValues){const mt=new Set([...o.mount,...Object.keys(bb(a,s))]);for(const Bt of Array.from(mt))or(r.dirtyFields,Bt)?Fa(ot,Bt,or(s,Bt)):K(Bt,or(ot,Bt))}else{if(LL&&Ya(ye))for(const mt of o.mount){const Bt=or(n,mt);if(Bt&&Bt._f){const Lt=Array.isArray(Bt._f.refs)?Bt._f.refs[0]:Bt._f.ref;if(N5(Lt)){const Ot=Lt.closest("form");if(Ot){Ot.reset();break}}}}if(Oe.keepFieldsRef)for(const mt of o.mount)K(mt,or(ot,mt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?Xa(a):{}:Xa(ot),h.array.next({values:{...ot}}),h.state.next({values:{...ot}})}o={mount:Oe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:Ze?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!y0(ye,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ze?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?bb(a,s):r.dirtyFields:Oe.keepDefaultValues&&ye?bb(a,ye):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},_e=(ye,Oe)=>De(md(ye)?ye(s):ye,Oe),he=(ye,Oe={})=>{const Pe=or(n,ye),qe=Pe&&Pe._f;if(qe){const Ze=qe.refs?qe.refs[0]:qe.ref;Ze.focus&&(Ze.focus(),Oe.shouldSelect&&md(Ze.select)&&Ze.select())}},Ie=ye=>{r={...r,...ye}},Xe={control:{register:ce,unregister:Ae,getFieldState:ne,handleSubmit:re,setError:W,_subscribe:te,_runSchema:w,_focusError:ge,_getWatch:j,_getDirty:O,_setValid:v,_setFieldArray:y,_setDisabledField:oe,_setErrors:S,_getFieldArray:U,_reset:De,_resetDefaultValues:()=>md(t.defaultValues)&&t.defaultValues().then(ye=>{_e(ye,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:je,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(ye){i=ye},get _defaultValues(){return a},get _names(){return o},set _names(ye){o=ye},get _formState(){return r},get _options(){return t},set _options(ye){t={...t,...ye}}},subscribe:ie,trigger:V,register:ce,handleSubmit:re,watch:J,setValue:K,getValues:q,reset:_e,resetField:Se,clearErrors:L,unregister:Ae,setError:W,setFocus:he,getFieldState:ne};return{...Xe,formControl:Xe}}var o0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},II=(e,t,r={})=>r.shouldFocus||Ya(r.shouldFocus)?r.focusName||`${e}.${Ya(r.focusIndex)?t:r.focusIndex}.`:"",jI=(e,t)=>[...e,...Gl(t)],FI=e=>Array.isArray(e)?e.map(()=>{}):void 0;function OI(e,t,r){return[...e.slice(0,t),...Gl(r),...e.slice(t)]}var DI=(e,t,r)=>Array.isArray(e)?(Ya(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],RI=(e,t)=>[...Gl(t),...Gl(e)];function Oct(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return U4(n).length?n:[]}var PI=(e,t)=>Ya(t)?[]:Oct(e,Gl(t).sort((r,n)=>r-n)),LI=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},vW=(e,t,r)=>(e[t]=r,e);function Dct(e){const t=vct(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[o,l]=lt.useState(r._getFieldArray(n)),u=lt.useRef(r._getFieldArray(n).map(o0)),d=lt.useRef(o),f=lt.useRef(!1);d.current=o,r._names.array.add(n),lt.useMemo(()=>i&&r.register(n,i),[r,i,n]),Jce(()=>r._subjects.array.subscribe({next:({values:B,name:F})=>{if(F===n||!F){const w=or(B,n);Array.isArray(w)&&(l(w),u.current=w.map(o0))}}}).unsubscribe,[r,n]);const h=lt.useCallback(B=>{f.current=!0,r._setFieldArray(n,B)},[r,n]),p=(B,F)=>{const w=Gl(Xa(B)),C=jI(r._getFieldArray(n),w);r._names.focus=II(n,C.length-1,F),u.current=jI(u.current,w.map(o0)),h(C),l(C),r._setFieldArray(n,C,jI,{argA:FI(B)})},g=(B,F)=>{const w=Gl(Xa(B)),C=RI(r._getFieldArray(n),w);r._names.focus=II(n,0,F),u.current=RI(u.current,w.map(o0)),h(C),l(C),r._setFieldArray(n,C,RI,{argA:FI(B)})},v=B=>{const F=PI(r._getFieldArray(n),B);u.current=PI(u.current,B),h(F),l(F),!Array.isArray(or(r._fields,n))&&Fa(r._fields,n,void 0),r._setFieldArray(n,F,PI,{argA:B})},b=(B,F,w)=>{const C=Gl(Xa(F)),N=OI(r._getFieldArray(n),B,C);r._names.focus=II(n,B,w),u.current=OI(u.current,B,C.map(o0)),h(N),l(N),r._setFieldArray(n,N,OI,{argA:B,argB:FI(F)})},y=(B,F)=>{const w=r._getFieldArray(n);LI(w,B,F),LI(u.current,B,F),h(w),l(w),r._setFieldArray(n,w,LI,{argA:B,argB:F},!1)},_=(B,F)=>{const w=r._getFieldArray(n);DI(w,B,F),DI(u.current,B,F),h(w),l(w),r._setFieldArray(n,w,DI,{argA:B,argB:F},!1)},S=(B,F)=>{const w=Xa(F),C=vW(r._getFieldArray(n),B,w);u.current=[...C].map((N,R)=>!N||R===B?o0():u.current[R]),h(C),l([...C]),r._setFieldArray(n,C,vW,{argA:B,argB:w},!0,!1)},k=B=>{const F=Gl(Xa(B));u.current=F.map(o0),h([...F]),l([...F]),r._setFieldArray(n,[...F],w=>w,{},!0,!1)};return lt.useEffect(()=>{if(r._state.action=!1,P6(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!Iv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Iv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(B=>{const F=or(B.errors,n),w=or(r._formState.errors,n);(w?!F&&w.type||F&&(w.type!==F.type||w.message!==F.message):F&&F.type)&&(F?Fa(r._formState.errors,n,F):Qs(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const B=or(r._fields,n);B&&B._f&&!(Iv(r._options.reValidateMode).isOnSubmit&&Iv(r._options.mode).isOnSubmit)&&L6(B,r._names.disabled,r._formValues,r._options.criteriaMode===Cu.all,r._options.shouldUseNativeValidation,!0).then(F=>!cl(F)&&r._subjects.state.next({errors:sue(r._formState.errors,F,n)}))}r._subjects.state.next({name:n,values:Xa(r._formValues)}),r._names.focus&&ex(r._fields,(B,F)=>{if(r._names.focus&&F.startsWith(r._names.focus)&&B.focus)return B.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[o,n,r]),lt.useEffect(()=>(!or(r._formValues,n)&&r._setFieldArray(n),()=>{const B=(F,w)=>{const C=or(r._fields,F);C&&C._f&&(C._f.mount=w)};r._options.shouldUnregister||s?r.unregister(n):B(n,!1)}),[n,r,a,s]),{swap:lt.useCallback(y,[h,n,r]),move:lt.useCallback(_,[h,n,r]),prepend:lt.useCallback(g,[h,n,r]),append:lt.useCallback(p,[h,n,r]),remove:lt.useCallback(v,[h,n,r]),insert:lt.useCallback(b,[h,n,r]),update:lt.useCallback(S,[h,n,r]),replace:lt.useCallback(k,[h,n,r]),fields:lt.useMemo(()=>o.map((B,F)=>({...B,[a]:u.current[F]||o0()})),[o,a])}}function Rct(e={}){const t=lt.useRef(void 0),r=lt.useRef(void 0),[n,a]=lt.useState({isDirty:!1,isValidating:!1,isLoading:md(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:md(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!md(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...o}=Fct(e);t.current={...o,formState:n}}const s=t.current.control;return s._options=e,Jce(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s._formState.isReady=!0,i},[s]),lt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),lt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),lt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),lt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),lt.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),lt.useEffect(()=>{e.values&&!y0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),lt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=xct(n,s),t.current}const M6=Ut(Rr,"alternancias");async function Pct(e){return(await ea(M6,{...e,createdAt:jp(),updatedAt:jp()})).id}async function Lct({especialidad:e,pageSize:t=10,lastDoc:r}){let n=nr(M6,Kr("createdAt","desc"),FA(t));e&&(n=nr(M6,Ln("especialidad","==",e),Kr("createdAt","desc"),FA(t))),r&&(n=nr(n,Sge(r)));const a=await qs(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function Mct(e,t){const r=pr(Rr,"alternancias",e);await cm(r,{...t,updatedAt:jp()})}async function Uct(e){const t=pr(Rr,"alternancias",e);await Ys(t)}async function Qct(e,t,r){const n=Ut(Rr,"alternancias",e,t);await ea(n,{...r,createdAt:jp()})}async function Hct(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=GO(sJ,r);await $O(n,t);const a=await KO(n);return await Qct(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const Vct=({currentUser:e})=>{const[t,r]=I.useState([]),[n,a]=I.useState(null),[s,i]=I.useState(!1),{register:o,control:l,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:p}}=Rct({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=Dct({control:l,name:"actividades"}),v=["COORDINACION_TP","SUBDIRECCION"],b=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!b||v.some(P=>b.includes(P))))return c.jsx("div",{className:"p-4 text-red-600",children:"Acceso no autorizado"});const _=P=>(P||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),S=(P,X)=>{var K;return!P||!X?[]:((K=vxe[P])==null?void 0:K[X])??[]},k=f("especialidad"),B=f("modulos")||[],F=I.useMemo(()=>k?mxe[k]??[]:[],[k]),w=I.useMemo(()=>k?gxe[k]??[]:[],[k]);I.useEffect(()=>{h("curso",[]),h("modulos",[]);const P=[...f("actividades")||[]].map(X=>({...X,modulo:"",oa:""}));h("actividades",P)},[k]),I.useEffect(()=>{const P=[...f("actividades")||[]].map(X=>X.modulo&&!B.includes(X.modulo)?{...X,modulo:"",oa:""}:X);h("actividades",P)},[B]);const C=async()=>{i(!0);const{items:P}=await Lct({});r(P),i(!1)};I.useEffect(()=>{C()},[]);const N=async P=>{n?await Mct(n,{...P}):await Pct({...P,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await C()},R=P=>{const X=Array.isArray(P.curso)?P.curso:P.curso?[P.curso]:[],K=Array.isArray(P.modulos)?P.modulos.map(H=>_(H)):[],Z=Array.isArray(P.actividades)?P.actividades.map(H=>({...H,modulo:H!=null&&H.modulo?_(H.modulo):"",oa:(H==null?void 0:H.oa)||""})):[];d({...P,curso:X,modulos:K,actividades:Z}),a(P.id)},O=async P=>{confirm("¿Eliminar esta alternancia?")&&(await Uct(P),await C())},j=async(P,X)=>{await Hct(P,X),alert("Evidencia subida correctamente")},U=P=>{const X=Array.from(P.currentTarget.selectedOptions).map(K=>K.value);h("curso",X,{shouldDirty:!0})};return c.jsxs("div",{className:"p-4",children:[c.jsx("h1",{className:"text-xl font-bold mb-4",children:"Formación por Alternancia"}),s?c.jsx("p",{className:"text-sm text-gray-600",children:"Cargando…"}):c.jsx("div",{className:"mb-6",children:t.length===0?c.jsx("p",{className:"text-gray-500",children:"No hay alternancias registradas"}):c.jsx("ul",{className:"space-y-2",children:t.map(P=>c.jsxs("li",{className:"border p-2 rounded flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[c.jsxs("span",{className:"text-sm",children:[c.jsx("strong",{children:P.especialidad})," —"," ",Array.isArray(P.curso)?P.curso.join(", "):P.curso," — ",P.institucion," —"," ",Array.isArray(P.tipoAlternancia)?P.tipoAlternancia.join(", "):""]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("label",{className:"cursor-pointer bg-yellow-500 text-white px-2 py-1 rounded flex items-center gap-1",children:[c.jsx(y1e,{size:16}),c.jsx("input",{type:"file",className:"hidden",onChange:X=>X.target.files&&j(P.id,X.target.files[0])}),"Evidencia"]}),c.jsx("button",{type:"button",onClick:()=>R(P),className:"px-2 py-1 bg-blue-600 text-white rounded",children:"Editar"}),c.jsx("button",{type:"button",onClick:()=>O(P.id),className:"px-2 py-1 bg-red-600 text-white rounded",children:"Eliminar"})]})]},P.id))})}),c.jsxs("form",{onSubmit:u(N),className:"space-y-4 border p-4 rounded bg-white/60",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-1",children:"Especialidad"}),c.jsxs("select",{...o("especialidad"),className:"border rounded p-2 w-full",children:[c.jsx("option",{value:"",children:"Selecciona…"}),fxe.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-1",children:"Curso (puedes elegir varios)"}),c.jsx("select",{multiple:!0,size:4,...o("curso"),onChange:U,className:"border rounded p-2 w-full min-h-[140px]",disabled:!k,children:k?F.map(P=>c.jsx("option",{value:P,children:P},P)):c.jsx("option",{value:"",children:"Elige especialidad primero"})}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ctrl/Cmd + clic para seleccionar múltiples cursos."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-1",children:"Institución"}),c.jsxs("select",{...o("institucion"),className:"border rounded p-2 w-full",children:[c.jsx("option",{value:"",children:"Selecciona…"}),hxe.map(P=>c.jsx("option",{value:P,children:P},P))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-2",children:"Módulos"}),k?c.jsx("div",{className:"flex flex-wrap gap-4",children:w.map(P=>c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",value:P,...o("modulos")}),c.jsx("span",{className:"text-sm",children:P})]},P))}):c.jsx("p",{className:"text-sm text-gray-500",children:"Elige especialidad para ver los módulos."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold",children:"Tipo de Alternancia"}),c.jsx("div",{className:"flex gap-4 flex-wrap",children:pxe.map(P=>c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",value:P,...o("tipoAlternancia")}),P]},P))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold",children:"Fundamentación técnico-pedagógica"}),c.jsx("textarea",{...o("fundamentacion"),className:"border rounded p-2 w-full"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold mb-2",children:"Plan de actividades"}),g.fields.map((P,X)=>{const K=f(`actividades.${X}.modulo`)||"",Z=S(k,K);return c.jsxs("div",{className:"flex flex-col gap-2 mb-3 border rounded p-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[c.jsx("input",{placeholder:"Fecha",...o(`actividades.${X}.fecha`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Tipo",...o(`actividades.${X}.tipo`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Actividad",...o(`actividades.${X}.actividad`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Lugar",...o(`actividades.${X}.lugar`),className:"border p-1 rounded"}),c.jsx("input",{placeholder:"Evidencias",...o(`actividades.${X}.evidencias`),className:"border p-1 rounded"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Módulo"}),c.jsxs("select",{...o(`actividades.${X}.modulo`),className:"border p-2 rounded w-full",disabled:!k||B.length===0,children:[c.jsx("option",{value:"",children:!k&&"Elige especialidad arriba"||B.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),B.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Objetivo de Aprendizaje (OA)"}),c.jsxs("select",{...o(`actividades.${X}.oa`),className:"border p-2 rounded w-full",disabled:!K||Z.length===0,children:[c.jsx("option",{value:"",children:K?Z.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),Z.map(H=>c.jsx("option",{value:H,children:H},H))]})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{type:"button",onClick:()=>g.remove(X),className:"text-red-600 inline-flex items-center gap-1",title:"Eliminar fila",children:[c.jsx(Iw,{size:18}),"Eliminar"]})})]},P.id)}),c.jsxs("button",{type:"button",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),className:"px-2 py-1 bg-green-600 text-white rounded flex items-center gap-1",children:[c.jsx(AJ,{size:16})," Agregar actividad"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-semibold",children:"Análisis Curricular"}),c.jsx("textarea",{...o("analisisCurricular"),className:"border rounded p-2 w-full"})]}),c.jsxs("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded inline-flex items-center gap-2",children:[c.jsx(fJ,{size:18}),"Guardar"]})]})]})},zct=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},$ct=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,l=I.useMemo(()=>{const y=cxe[o]||[];return o!==er.ESTUDIANTE?y:y.filter(_=>{if(_.name==="Asistencia a Empresa"){const S=zct(e.curso||"");return S.startsWith("3º")||S.startsWith("4º")}return!0})},[o,e.curso]),[u,d]=I.useState(null),[f,h]=I.useState(!1);I.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const p=I.useCallback(y=>{d(y),window.innerWidth<768&&h(!1)},[]),g=I.useCallback(y=>{const _=l.find(S=>S.name===y);_&&p(_)},[l,p]),v=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(Gve,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(y=>c.jsxs("button",{onClick:()=>p(y),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===y.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[y.icon,c.jsx("span",{className:"ml-4",children:y.name})]},y.name))})]}),b=()=>{if(!u)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return c.jsx(uye,{profile:o});if(u.name==="Muro de Anuncios")return c.jsx(mye,{currentUser:e});if(u.name==="Mensajería Interna")return c.jsx(LFe,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return c.jsx(Eye,{});if(o===er.SUBDIRECCION){if(u.name==="Dashboard")return c.jsx(tbe,{currentUser:e});if(u.name==="Administración")return c.jsx(GIe,{});if(u.name==="Seguimiento Curricular")return c.jsx(dKe,{currentUser:e});if(u.name==="Acompañamiento docente")return c.jsx(TFe,{currentUser:e});if(u.name==="Análisis Taxonómico")return c.jsx(Xz,{currentUser:e});if(u.name==="Interdisciplinario")return c.jsx(AV,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(X1e,{currentUser:e});if(u.name==="Crear horarios")return c.jsx(Lbe,{});if(u.name==="Seguimiento de acciones pedagógicas")return c.jsx(Vbe,{});if(u.name==="Inclusión")return c.jsx(uH,{currentUser:e})}if(o===er.PROFESORADO){if(u.name==="Planificación")return c.jsx(rye,{currentUser:e});if(u.name==="Mis Acompañamientos")return c.jsx(oVe,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return c.jsx(GHe,{});if(u.name==="Análisis Taxonómico")return c.jsx(Xz,{currentUser:e});if(u.name==="Interdisciplinario")return c.jsx(AV,{});if(u.name==="Inclusión")return c.jsx(uH,{currentUser:e});if(u.name==="Actividades Remotas")return c.jsx(Eje,{});if(u.name==="Evaluación de Aprendizajes")return c.jsx(C2e,{});if(u.name==="Evaluaciones Formativas")return c.jsx(pFe,{currentUser:e})}if(o===er.COORDINACION_TP){if(u.name==="Seguimiento Dual")return c.jsx(nje,{});if(u.name==="Asistencia Dual")return c.jsx(eFe,{});if(u.name==="Pañol")return c.jsx(SLe,{});if(u.name==="Gestión de Empresas")return c.jsx(fct,{});if(u.name==="Alternancia TP")return c.jsx(Vct,{})}if(o===er.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return c.jsx(Ije,{currentUser:e});if(u.name==="Evaluación Formativa")return c.jsx(eVe,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return c.jsx(sVe,{currentUser:e});if(u.name==="Asistencia a Empresa")return c.jsx(Kje,{currentUser:e})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100 dark:bg-slate-900",children:[c.jsx(F1e,{currentUser:e,onLogout:t,onNavigate:g,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(!f),unreadMessagesCount:s,refreshUnreadCount:i}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&c.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${f?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(v,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-100 dark:bg-slate-900",children:c.jsx("div",{className:"p-6 md:p-8",children:b()})})]})]})},Kct=({onSelectProfile:e,isAdminView:t=!1})=>c.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[c.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),c.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),c.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(XO,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:lxe.map(r=>c.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[c.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),c.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),Gct=()=>{const[e,t]=I.useState(null),[r,n]=I.useState(null),[a,s]=I.useState(!0),[i,o]=I.useState(null),[l,u]=I.useState(!1),[d,f]=I.useState(null);I.useEffect(()=>{const _=eX(Tw,async S=>{if(t(S),S)try{const k=await iJ(S.email);k?(n(k),k.profile===er.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await hB())}catch{o("Error al conectar con la base de datos."),await hB()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>_()},[]);const h=async(_,S)=>{if(o(null),!_.trim()||!S.trim()){o("Por favor ingrese email y contraseña");return}try{await zve(_.trim(),S)}catch(k){switch(k.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},p=async _=>{try{await $ve(_)}catch(S){console.error("Error al enviar email de recuperación:",S)}},g=_=>{f(_),u(!1)},v=()=>{u(!0),f(null)},b=async()=>{try{await hB()}catch(_){console.error("Error al cerrar sesión:",_)}};if(a)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(XO,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return c.jsx(xxe,{onLoginAttempt:h,onForgotPasswordRequest:p,error:i});if(l&&r.profile===er.SUBDIRECCION)return c.jsx(Kct,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return c.jsx($ct,{currentUser:{...r,profile:y},onLogout:b,onChangeProfile:r.profile===er.SUBDIRECCION?v:void 0,canChangeProfile:r.profile===er.SUBDIRECCION})},iue=document.getElementById("root");if(!iue)throw new Error("Could not find root element to mount to");const qct=Ede.createRoot(iue);qct.render(c.jsx(lt.StrictMode,{children:c.jsx(Gct,{})}));export{pa as _,Xct as c,bl as g};
