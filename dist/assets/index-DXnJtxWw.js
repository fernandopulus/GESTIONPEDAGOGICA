var G1e=Object.defineProperty;var q1e=(e,t,r)=>t in e?G1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var CI=(e,t,r)=>q1e(e,typeof t!="symbol"?t+"":t,r);function K1e(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var FSt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function W1e(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var EI={exports:{}},Ow={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k$;function X1e(){if(k$)return Ow;k$=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:s}}return Ow.Fragment=t,Ow.jsx=r,Ow.jsxs=r,Ow}var S$;function Y1e(){return S$||(S$=1,EI.exports=X1e()),EI.exports}var i=Y1e(),jI={exports:{}},gn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _$;function J1e(){if(_$)return gn;_$=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function A(V){return V===null||typeof V!="object"?null:(V=f&&V[f]||V["@@iterator"],typeof V=="function"?V:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(V,Y,R){this.props=V,this.context=Y,this.refs=x,this.updater=R||m}v.prototype.isReactComponent={},v.prototype.setState=function(V,Y){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Y,"setState")},v.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function y(){}y.prototype=v.prototype;function N(V,Y,R){this.props=V,this.context=Y,this.refs=x,this.updater=R||m}var C=N.prototype=new y;C.constructor=N,g(C,v.prototype),C.isPureReactComponent=!0;var _=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function T(V,Y,R,O,K,J){return R=J.ref,{$$typeof:e,type:V,key:Y,ref:R!==void 0?R:null,props:J}}function k(V,Y){return T(V.type,Y,void 0,void 0,void 0,V.props)}function B(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function M(V){var Y={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(R){return Y[R]})}var P=/\/+/g;function S(V,Y){return typeof V=="object"&&V!==null&&V.key!=null?M(""+V.key):Y.toString(36)}function L(){}function U(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(L,L):(V.status="pending",V.then(function(Y){V.status==="pending"&&(V.status="fulfilled",V.value=Y)},function(Y){V.status==="pending"&&(V.status="rejected",V.reason=Y)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function q(V,Y,R,O,K){var J=typeof V;(J==="undefined"||J==="boolean")&&(V=null);var ce=!1;if(V===null)ce=!0;else switch(J){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(V.$$typeof){case e:case t:ce=!0;break;case d:return ce=V._init,q(ce(V._payload),Y,R,O,K)}}if(ce)return K=K(V),ce=O===""?"."+S(V,0):O,_(K)?(R="",ce!=null&&(R=ce.replace(P,"$&/")+"/"),q(K,Y,R,"",function(ue){return ue})):K!=null&&(B(K)&&(K=k(K,R+(K.key==null||V&&V.key===K.key?"":(""+K.key).replace(P,"$&/")+"/")+ce)),Y.push(K)),1;ce=0;var oe=O===""?".":O+":";if(_(V))for(var re=0;re<V.length;re++)O=V[re],J=oe+S(O,re),ce+=q(O,Y,R,J,K);else if(re=A(V),typeof re=="function")for(V=re.call(V),re=0;!(O=V.next()).done;)O=O.value,J=oe+S(O,re++),ce+=q(O,Y,R,J,K);else if(J==="object"){if(typeof V.then=="function")return q(U(V),Y,R,O,K);throw Y=String(V),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ce}function H(V,Y,R){if(V==null)return V;var O=[],K=0;return q(V,O,"","",function(J){return Y.call(R,J,K++)}),O}function z(V){if(V._status===-1){var Y=V._result;Y=Y(),Y.then(function(R){(V._status===0||V._status===-1)&&(V._status=1,V._result=R)},function(R){(V._status===0||V._status===-1)&&(V._status=2,V._result=R)}),V._status===-1&&(V._status=0,V._result=Y)}if(V._status===1)return V._result.default;throw V._result}var W=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Z(){}return gn.Children={map:H,forEach:function(V,Y,R){H(V,function(){Y.apply(this,arguments)},R)},count:function(V){var Y=0;return H(V,function(){Y++}),Y},toArray:function(V){return H(V,function(Y){return Y})||[]},only:function(V){if(!B(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},gn.Component=v,gn.Fragment=r,gn.Profiler=a,gn.PureComponent=N,gn.StrictMode=n,gn.Suspense=c,gn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,gn.__COMPILER_RUNTIME={__proto__:null,c:function(V){return j.H.useMemoCache(V)}},gn.cache=function(V){return function(){return V.apply(null,arguments)}},gn.cloneElement=function(V,Y,R){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var O=g({},V.props),K=V.key,J=void 0;if(Y!=null)for(ce in Y.ref!==void 0&&(J=void 0),Y.key!==void 0&&(K=""+Y.key),Y)!I.call(Y,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Y.ref===void 0||(O[ce]=Y[ce]);var ce=arguments.length-2;if(ce===1)O.children=R;else if(1<ce){for(var oe=Array(ce),re=0;re<ce;re++)oe[re]=arguments[re+2];O.children=oe}return T(V.type,K,void 0,void 0,J,O)},gn.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:s,_context:V},V},gn.createElement=function(V,Y,R){var O,K={},J=null;if(Y!=null)for(O in Y.key!==void 0&&(J=""+Y.key),Y)I.call(Y,O)&&O!=="key"&&O!=="__self"&&O!=="__source"&&(K[O]=Y[O]);var ce=arguments.length-2;if(ce===1)K.children=R;else if(1<ce){for(var oe=Array(ce),re=0;re<ce;re++)oe[re]=arguments[re+2];K.children=oe}if(V&&V.defaultProps)for(O in ce=V.defaultProps,ce)K[O]===void 0&&(K[O]=ce[O]);return T(V,J,void 0,void 0,null,K)},gn.createRef=function(){return{current:null}},gn.forwardRef=function(V){return{$$typeof:l,render:V}},gn.isValidElement=B,gn.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:z}},gn.memo=function(V,Y){return{$$typeof:u,type:V,compare:Y===void 0?null:Y}},gn.startTransition=function(V){var Y=j.T,R={};j.T=R;try{var O=V(),K=j.S;K!==null&&K(R,O),typeof O=="object"&&O!==null&&typeof O.then=="function"&&O.then(Z,W)}catch(J){W(J)}finally{j.T=Y}},gn.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},gn.use=function(V){return j.H.use(V)},gn.useActionState=function(V,Y,R){return j.H.useActionState(V,Y,R)},gn.useCallback=function(V,Y){return j.H.useCallback(V,Y)},gn.useContext=function(V){return j.H.useContext(V)},gn.useDebugValue=function(){},gn.useDeferredValue=function(V,Y){return j.H.useDeferredValue(V,Y)},gn.useEffect=function(V,Y,R){var O=j.H;if(typeof R=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return O.useEffect(V,Y)},gn.useId=function(){return j.H.useId()},gn.useImperativeHandle=function(V,Y,R){return j.H.useImperativeHandle(V,Y,R)},gn.useInsertionEffect=function(V,Y){return j.H.useInsertionEffect(V,Y)},gn.useLayoutEffect=function(V,Y){return j.H.useLayoutEffect(V,Y)},gn.useMemo=function(V,Y){return j.H.useMemo(V,Y)},gn.useOptimistic=function(V,Y){return j.H.useOptimistic(V,Y)},gn.useReducer=function(V,Y,R){return j.H.useReducer(V,Y,R)},gn.useRef=function(V){return j.H.useRef(V)},gn.useState=function(V){return j.H.useState(V)},gn.useSyncExternalStore=function(V,Y,R){return j.H.useSyncExternalStore(V,Y,R)},gn.useTransition=function(){return j.H.useTransition()},gn.version="19.1.1",gn}var T$;function fy(){return T$||(T$=1,jI.exports=J1e()),jI.exports}var w=fy();const At=oc(w),Z1e=K1e({__proto__:null,default:At},[w]);var kI={exports:{}},Pw={},SI={exports:{}},_I={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B$;function eye(){return B$||(B$=1,function(e){function t(H,z){var W=H.length;H.push(z);e:for(;0<W;){var Z=W-1>>>1,V=H[Z];if(0<a(V,z))H[Z]=z,H[W]=V,W=Z;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var z=H[0],W=H.pop();if(W!==z){H[0]=W;e:for(var Z=0,V=H.length,Y=V>>>1;Z<Y;){var R=2*(Z+1)-1,O=H[R],K=R+1,J=H[K];if(0>a(O,W))K<V&&0>a(J,O)?(H[Z]=J,H[K]=W,Z=K):(H[Z]=O,H[R]=W,Z=R);else if(K<V&&0>a(J,W))H[Z]=J,H[K]=W,Z=K;else break e}}return z}function a(H,z){var W=H.sortIndex-z.sortIndex;return W!==0?W:H.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,A=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function _(H){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=H)n(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(u)}}function j(H){if(x=!1,_(H),!g)if(r(c)!==null)g=!0,I||(I=!0,S());else{var z=r(u);z!==null&&q(j,z.startTime-H)}}var I=!1,T=-1,k=5,B=-1;function M(){return v?!0:!(e.unstable_now()-B<k)}function P(){if(v=!1,I){var H=e.unstable_now();B=H;var z=!0;try{e:{g=!1,x&&(x=!1,N(T),T=-1),m=!0;var W=A;try{t:{for(_(H),f=r(c);f!==null&&!(f.expirationTime>H&&M());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,A=f.priorityLevel;var V=Z(f.expirationTime<=H);if(H=e.unstable_now(),typeof V=="function"){f.callback=V,_(H),z=!0;break t}f===r(c)&&n(c),_(H)}else n(c);f=r(c)}if(f!==null)z=!0;else{var Y=r(u);Y!==null&&q(j,Y.startTime-H),z=!1}}break e}finally{f=null,A=W,m=!1}z=void 0}}finally{z?S():I=!1}}}var S;if(typeof C=="function")S=function(){C(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,U=L.port2;L.port1.onmessage=P,S=function(){U.postMessage(null)}}else S=function(){y(P,0)};function q(H,z){T=y(function(){H(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_next=function(H){switch(A){case 1:case 2:case 3:var z=3;break;default:z=A}var W=A;A=z;try{return H()}finally{A=W}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(H,z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var W=A;A=H;try{return z()}finally{A=W}},e.unstable_scheduleCallback=function(H,z,W){var Z=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Z+W:Z):W=Z,H){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=W+V,H={id:d++,callback:z,priorityLevel:H,startTime:W,expirationTime:V,sortIndex:-1},W>Z?(H.sortIndex=W,t(u,H),r(c)===null&&H===r(u)&&(x?(N(T),T=-1):x=!0,q(j,W-Z))):(H.sortIndex=V,t(c,H),g||m||(g=!0,I||(I=!0,S()))),H},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(H){var z=A;return function(){var W=A;A=z;try{return H.apply(this,arguments)}finally{A=W}}}}(_I)),_I}var I$;function tye(){return I$||(I$=1,SI.exports=eye()),SI.exports}var TI={exports:{}},ul={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D$;function rye(){if(D$)return ul;D$=1;var e=fy();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ul.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ul.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},ul.flushSync=function(c){var u=o.T,d=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=u,n.p=d,n.d.f()}},ul.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},ul.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},ul.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),A=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:A,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:A,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ul.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},ul.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ul.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},ul.requestFormReset=function(c){n.d.r(c)},ul.unstable_batchedUpdates=function(c,u){return c(u)},ul.useFormState=function(c,u,d){return o.H.useFormState(c,u,d)},ul.useFormStatus=function(){return o.H.useHostTransitionStatus()},ul.version="19.1.1",ul}var O$;function tae(){if(O$)return TI.exports;O$=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),TI.exports=rye(),TI.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P$;function nye(){if(P$)return Pw;P$=1;var e=tye(),t=fy(),r=tae();function n(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function s(h){var p=h,b=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(b=p.return),h=p.return;while(h)}return p.tag===3?b:null}function o(h){if(h.tag===13){var p=h.memoizedState;if(p===null&&(h=h.alternate,h!==null&&(p=h.memoizedState)),p!==null)return p.dehydrated}return null}function l(h){if(s(h)!==h)throw Error(n(188))}function c(h){var p=h.alternate;if(!p){if(p=s(h),p===null)throw Error(n(188));return p!==h?null:h}for(var b=h,E=p;;){var Q=b.return;if(Q===null)break;var ee=Q.alternate;if(ee===null){if(E=Q.return,E!==null){b=E;continue}break}if(Q.child===ee.child){for(ee=Q.child;ee;){if(ee===b)return l(Q),h;if(ee===E)return l(Q),p;ee=ee.sibling}throw Error(n(188))}if(b.return!==E.return)b=Q,E=ee;else{for(var be=!1,Fe=Q.child;Fe;){if(Fe===b){be=!0,b=Q,E=ee;break}if(Fe===E){be=!0,E=Q,b=ee;break}Fe=Fe.sibling}if(!be){for(Fe=ee.child;Fe;){if(Fe===b){be=!0,b=ee,E=Q;break}if(Fe===E){be=!0,E=ee,b=Q;break}Fe=Fe.sibling}if(!be)throw Error(n(189))}}if(b.alternate!==E)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?h:p}function u(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=u(h),p!==null)return p;h=h.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),C=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function S(h){return h===null||typeof h!="object"?null:(h=P&&h[P]||h["@@iterator"],typeof h=="function"?h:null)}var L=Symbol.for("react.client.reference");function U(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===L?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case j:return"Suspense";case I:return"SuspenseList";case B:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case m:return"Portal";case C:return(h.displayName||"Context")+".Provider";case N:return(h._context.displayName||"Context")+".Consumer";case _:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case T:return p=h.displayName||null,p!==null?p:U(h.type)||"Memo";case k:p=h._payload,h=h._init;try{return U(h(p))}catch{}}return null}var q=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Z=[],V=-1;function Y(h){return{current:h}}function R(h){0>V||(h.current=Z[V],Z[V]=null,V--)}function O(h,p){V++,Z[V]=h.current,h.current=p}var K=Y(null),J=Y(null),ce=Y(null),oe=Y(null);function re(h,p){switch(O(ce,p),O(J,h),O(K,null),p.nodeType){case 9:case 11:h=(h=p.documentElement)&&(h=h.namespaceURI)?t$(h):0;break;default:if(h=p.tagName,p=p.namespaceURI)p=t$(p),h=r$(p,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}R(K),O(K,h)}function ue(){R(K),R(J),R(ce)}function le(h){h.memoizedState!==null&&O(oe,h);var p=K.current,b=r$(p,h.type);p!==b&&(O(J,h),O(K,b))}function ve(h){J.current===h&&(R(K),R(J)),oe.current===h&&(R(oe),_w._currentValue=W)}var X=Object.prototype.hasOwnProperty,Ee=e.unstable_scheduleCallback,Be=e.unstable_cancelCallback,je=e.unstable_shouldYield,fe=e.unstable_requestPaint,ye=e.unstable_now,Ae=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,ne=e.unstable_UserBlockingPriority,de=e.unstable_NormalPriority,me=e.unstable_LowPriority,ge=e.unstable_IdlePriority,Te=e.log,Ve=e.unstable_setDisableYieldValue,Xe=null,Ke=null;function Qe(h){if(typeof Te=="function"&&Ve(h),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Xe,h)}catch{}}var Je=Math.clz32?Math.clz32:He,mt=Math.log,We=Math.LN2;function He(h){return h>>>=0,h===0?32:31-(mt(h)/We|0)|0}var Tt=256,Ie=4194304;function ft(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function vt(h,p,b){var E=h.pendingLanes;if(E===0)return 0;var Q=0,ee=h.suspendedLanes,be=h.pingedLanes;h=h.warmLanes;var Fe=E&134217727;return Fe!==0?(E=Fe&~ee,E!==0?Q=ft(E):(be&=Fe,be!==0?Q=ft(be):b||(b=Fe&~h,b!==0&&(Q=ft(b))))):(Fe=E&~ee,Fe!==0?Q=ft(Fe):be!==0?Q=ft(be):b||(b=E&~h,b!==0&&(Q=ft(b)))),Q===0?0:p!==0&&p!==Q&&(p&ee)===0&&(ee=Q&-Q,b=p&-p,ee>=b||ee===32&&(b&4194048)!==0)?p:Q}function et(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function Ct(h,p){switch(h){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(){var h=Tt;return Tt<<=1,(Tt&4194048)===0&&(Tt=256),h}function ot(){var h=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),h}function nr(h){for(var p=[],b=0;31>b;b++)p.push(h);return p}function fr(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Zt(h,p,b,E,Q,ee){var be=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var Fe=h.entanglements,Ye=h.expirationTimes,wt=h.hiddenUpdates;for(b=be&~b;0<b;){var Ht=31-Je(b),Gt=1<<Ht;Fe[Ht]=0,Ye[Ht]=-1;var Et=wt[Ht];if(Et!==null)for(wt[Ht]=null,Ht=0;Ht<Et.length;Ht++){var jt=Et[Ht];jt!==null&&(jt.lane&=-536870913)}b&=~Gt}E!==0&&Ft(h,E,0),ee!==0&&Q===0&&h.tag!==0&&(h.suspendedLanes|=ee&~(be&~p))}function Ft(h,p,b){h.pendingLanes|=p,h.suspendedLanes&=~p;var E=31-Je(p);h.entangledLanes|=p,h.entanglements[E]=h.entanglements[E]|1073741824|b&4194090}function dr(h,p){var b=h.entangledLanes|=p;for(h=h.entanglements;b;){var E=31-Je(b),Q=1<<E;Q&p|h[E]&p&&(h[E]|=p),b&=~Q}}function Sr(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function _r(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Vn(){var h=z.p;return h!==0?h:(h=window.event,h===void 0?32:y$(h.type))}function qa(h,p){var b=z.p;try{return z.p=h,p()}finally{z.p=b}}var ar=Math.random().toString(36).slice(2),fn="__reactFiber$"+ar,$r="__reactProps$"+ar,mn="__reactContainer$"+ar,In="__reactEvents$"+ar,$n="__reactListeners$"+ar,ke="__reactHandles$"+ar,$e="__reactResources$"+ar,Re="__reactMarker$"+ar;function Me(h){delete h[fn],delete h[$r],delete h[In],delete h[$n],delete h[ke]}function we(h){var p=h[fn];if(p)return p;for(var b=h.parentNode;b;){if(p=b[mn]||b[fn]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(h=i$(h);h!==null;){if(b=h[fn])return b;h=i$(h)}return p}h=b,b=h.parentNode}return null}function xe(h){if(h=h[fn]||h[mn]){var p=h.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return h}return null}function De(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h.stateNode;throw Error(n(33))}function Ge(h){var p=h[$e];return p||(p=h[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Ue(h){h[Re]=!0}var Ze=new Set,rt={};function _t(h,p){Bt(h,p),Bt(h+"Capture",p)}function Bt(h,p){for(rt[h]=p,h=0;h<p.length;h++)Ze.add(p[h])}var Kt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},Jt={};function jr(h){return X.call(Jt,h)?!0:X.call(Ut,h)?!1:Kt.test(h)?Jt[h]=!0:(Ut[h]=!0,!1)}function on(h,p,b){if(jr(p))if(b===null)h.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":h.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){h.removeAttribute(p);return}}h.setAttribute(p,""+b)}}function ln(h,p,b){if(b===null)h.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(p);return}h.setAttribute(p,""+b)}}function hn(h,p,b,E){if(E===null)h.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(b);return}h.setAttributeNS(p,b,""+E)}}var Ka,Ci;function Da(h){if(Ka===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);Ka=p&&p[1]||"",Ci=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ka+h+Ci}var us=!1;function Oa(h,p){if(!h||us)return"";us=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var Gt=function(){throw Error()};if(Object.defineProperty(Gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Gt,[])}catch(jt){var Et=jt}Reflect.construct(h,[],Gt)}else{try{Gt.call()}catch(jt){Et=jt}h.call(Gt.prototype)}}else{try{throw Error()}catch(jt){Et=jt}(Gt=h())&&typeof Gt.catch=="function"&&Gt.catch(function(){})}}catch(jt){if(jt&&Et&&typeof jt.stack=="string")return[jt.stack,Et.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Q=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");Q&&Q.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ee=E.DetermineComponentFrameRoot(),be=ee[0],Fe=ee[1];if(be&&Fe){var Ye=be.split(`
`),wt=Fe.split(`
`);for(Q=E=0;E<Ye.length&&!Ye[E].includes("DetermineComponentFrameRoot");)E++;for(;Q<wt.length&&!wt[Q].includes("DetermineComponentFrameRoot");)Q++;if(E===Ye.length||Q===wt.length)for(E=Ye.length-1,Q=wt.length-1;1<=E&&0<=Q&&Ye[E]!==wt[Q];)Q--;for(;1<=E&&0<=Q;E--,Q--)if(Ye[E]!==wt[Q]){if(E!==1||Q!==1)do if(E--,Q--,0>Q||Ye[E]!==wt[Q]){var Ht=`
`+Ye[E].replace(" at new "," at ");return h.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",h.displayName)),Ht}while(1<=E&&0<=Q);break}}}finally{us=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?Da(b):""}function ds(h){switch(h.tag){case 26:case 27:case 5:return Da(h.type);case 16:return Da("Lazy");case 13:return Da("Suspense");case 19:return Da("SuspenseList");case 0:case 15:return Oa(h.type,!1);case 11:return Oa(h.type.render,!1);case 1:return Oa(h.type,!0);case 31:return Da("Activity");default:return""}}function la(h){try{var p="";do p+=ds(h),h=h.return;while(h);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function fs(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Mu(h){var p=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Pd(h){var p=Mu(h)?"checked":"value",b=Object.getOwnPropertyDescriptor(h.constructor.prototype,p),E=""+h[p];if(!h.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var Q=b.get,ee=b.set;return Object.defineProperty(h,p,{configurable:!0,get:function(){return Q.call(this)},set:function(be){E=""+be,ee.call(this,be)}}),Object.defineProperty(h,p,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(be){E=""+be},stopTracking:function(){h._valueTracker=null,delete h[p]}}}}function $l(h){h._valueTracker||(h._valueTracker=Pd(h))}function kr(h){if(!h)return!1;var p=h._valueTracker;if(!p)return!0;var b=p.getValue(),E="";return h&&(E=Mu(h)?h.checked?"true":"false":h.value),h=E,h!==b?(p.setValue(h),!0):!1}function rn(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var yn=/[\n"\\]/g;function Ur(h){return h.replace(yn,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Un(h,p,b,E,Q,ee,be,Fe){h.name="",be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?h.type=be:h.removeAttribute("type"),p!=null?be==="number"?(p===0&&h.value===""||h.value!=p)&&(h.value=""+fs(p)):h.value!==""+fs(p)&&(h.value=""+fs(p)):be!=="submit"&&be!=="reset"||h.removeAttribute("value"),p!=null?Zo(h,be,fs(p)):b!=null?Zo(h,be,fs(b)):E!=null&&h.removeAttribute("value"),Q==null&&ee!=null&&(h.defaultChecked=!!ee),Q!=null&&(h.checked=Q&&typeof Q!="function"&&typeof Q!="symbol"),Fe!=null&&typeof Fe!="function"&&typeof Fe!="symbol"&&typeof Fe!="boolean"?h.name=""+fs(Fe):h.removeAttribute("name")}function Ei(h,p,b,E,Q,ee,be,Fe){if(ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(h.type=ee),p!=null||b!=null){if(!(ee!=="submit"&&ee!=="reset"||p!=null))return;b=b!=null?""+fs(b):"",p=p!=null?""+fs(p):b,Fe||p===h.value||(h.value=p),h.defaultValue=p}E=E??Q,E=typeof E!="function"&&typeof E!="symbol"&&!!E,h.checked=Fe?h.checked:!!E,h.defaultChecked=!!E,be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"&&(h.name=be)}function Zo(h,p,b){p==="number"&&rn(h.ownerDocument)===h||h.defaultValue===""+b||(h.defaultValue=""+b)}function Hi(h,p,b,E){if(h=h.options,p){p={};for(var Q=0;Q<b.length;Q++)p["$"+b[Q]]=!0;for(b=0;b<h.length;b++)Q=p.hasOwnProperty("$"+h[b].value),h[b].selected!==Q&&(h[b].selected=Q),Q&&E&&(h[b].defaultSelected=!0)}else{for(b=""+fs(b),p=null,Q=0;Q<h.length;Q++){if(h[Q].value===b){h[Q].selected=!0,E&&(h[Q].defaultSelected=!0);return}p!==null||h[Q].disabled||(p=h[Q])}p!==null&&(p.selected=!0)}}function Pn(h,p,b){if(p!=null&&(p=""+fs(p),p!==h.value&&(h.value=p),b==null)){h.defaultValue!==p&&(h.defaultValue=p);return}h.defaultValue=b!=null?""+fs(b):""}function el(h,p,b,E){if(p==null){if(E!=null){if(b!=null)throw Error(n(92));if(q(E)){if(1<E.length)throw Error(n(93));E=E[0]}b=E}b==null&&(b=""),p=b}b=fs(p),h.defaultValue=b,E=h.textContent,E===b&&E!==""&&E!==null&&(h.value=E)}function Qi(h,p){if(p){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=p;return}}h.textContent=p}var _o=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fd(h,p,b){var E=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?h.setProperty(p,""):p==="float"?h.cssFloat="":h[p]="":E?h.setProperty(p,b):typeof b!="number"||b===0||_o.has(p)?p==="float"?h.cssFloat=b:h[p]=(""+b).trim():h[p]=b+"px"}function Rd(h,p,b){if(p!=null&&typeof p!="object")throw Error(n(62));if(h=h.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?h.setProperty(E,""):E==="float"?h.cssFloat="":h[E]="");for(var Q in p)E=p[Q],p.hasOwnProperty(Q)&&b[Q]!==E&&Fd(h,Q,E)}else for(var ee in p)p.hasOwnProperty(ee)&&Fd(h,ee,p[ee])}function u0(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wc(h){return Vf.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var cc=null;function wa(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Xc=null,uc=null;function Hr(h){var p=xe(h);if(p&&(h=p.stateNode)){var b=h[$r]||null;e:switch(h=p.stateNode,p.type){case"input":if(Un(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Ur(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var E=b[p];if(E!==h&&E.form===h.form){var Q=E[$r]||null;if(!Q)throw Error(n(90));Un(E,Q.value,Q.defaultValue,Q.defaultValue,Q.checked,Q.defaultChecked,Q.type,Q.name)}}for(p=0;p<b.length;p++)E=b[p],E.form===h.form&&kr(E)}break e;case"textarea":Pn(h,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Hi(h,!!b.multiple,p,!1)}}}var dc=!1;function KA(h,p,b){if(dc)return h(p,b);dc=!0;try{var E=h(p);return E}finally{if(dc=!1,(Xc!==null||uc!==null)&&(pj(),Xc&&(p=Xc,h=uc,uc=Xc=null,Hr(p),h)))for(p=0;p<h.length;p++)Hr(h[p])}}function ao(h,p){var b=h.stateNode;if(b===null)return null;var E=b[$r]||null;if(E===null)return null;b=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(h=h.type,E=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!E;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(n(231,p,typeof b));return b}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),To=!1;if(tl)try{var fc={};Object.defineProperty(fc,"passive",{get:function(){To=!0}}),window.addEventListener("test",fc,fc),window.removeEventListener("test",fc,fc)}catch{To=!1}var rl=null,Uu=null,Yc=null;function d0(){if(Yc)return Yc;var h,p=Uu,b=p.length,E,Q="value"in rl?rl.value:rl.textContent,ee=Q.length;for(h=0;h<b&&p[h]===Q[h];h++);var be=b-h;for(E=1;E<=be&&p[b-E]===Q[ee-E];E++);return Yc=Q.slice(h,1<E?1-E:void 0)}function nl(h){var p=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&p===13&&(h=13)):h=p,h===10&&(h=13),32<=h||h===13?h:0}function so(){return!0}function hc(){return!1}function Ps(h){function p(b,E,Q,ee,be){this._reactName=b,this._targetInst=Q,this.type=E,this.nativeEvent=ee,this.target=be,this.currentTarget=null;for(var Fe in h)h.hasOwnProperty(Fe)&&(b=h[Fe],this[Fe]=b?b(ee):ee[Fe]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?so:hc,this.isPropagationStopped=hc,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=so)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=so)},persist:function(){},isPersistent:so}),p}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=Ps(kn),Ac=d({},kn,{view:0,detail:0}),f0=Ps(Ac),Ld,Md,zl,io=d({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zu,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==zl&&(zl&&h.type==="mousemove"?(Ld=h.screenX-zl.screenX,Md=h.screenY-zl.screenY):Md=Ld=0,zl=h),Ld)},movementY:function(h){return"movementY"in h?h.movementY:Md}}),Fs=Ps(io),WA=d({},io,{dataTransfer:0}),Qu=Ps(WA),Vi=d({},Ac,{relatedTarget:0}),Vu=Ps(Vi),Jc=d({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),$f=Ps(Jc),Ud=d({},kn,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),zf=Ps(Ud),h0=d({},kn,{data:0}),Hd=Ps(h0),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vd(h){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(h):(h=Gf[h])?!!p[h]:!1}function zu(){return Vd}var XA=d({},Ac,{key:function(h){if(h.key){var p=$u[h.key]||h.key;if(p!=="Unidentified")return p}return h.type==="keypress"?(h=nl(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Qd[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zu,charCode:function(h){return h.type==="keypress"?nl(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?nl(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Zc=Ps(XA),Gu=d({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=Ps(Gu),oo=d({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zu}),qf=Ps(oo),te=d({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ce=Ps(te),qe=d({},io,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=Ps(qe),ct=d({},kn,{newState:0,oldState:0}),It=Ps(ct),Xt=[9,13,27,32],lr=tl&&"CompositionEvent"in window,F=null;tl&&"documentMode"in document&&(F=document.documentMode);var ie=tl&&"TextEvent"in window&&!F,pe=tl&&(!lr||F&&8<F&&11>=F),Pe=" ",lt=!1;function yt(h,p){switch(h){case"keyup":return Xt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yt(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Qr=!1;function Sn(h,p){switch(h){case"compositionend":return Yt(p);case"keypress":return p.which!==32?null:(lt=!0,Pe);case"textInput":return h=p.data,h===Pe&&lt?null:h;default:return null}}function nn(h,p){if(Qr)return h==="compositionend"||!lr&&yt(h,p)?(h=d0(),Yc=Uu=rl=null,Qr=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return pe&&p.locale!=="ko"?null:p.data;default:return null}}var ta={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ha(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p==="input"?!!ta[h.type]:p==="textarea"}function mc(h,p,b,E){Xc?uc?uc.push(E):uc=[E]:Xc=E,p=wj(p,"onChange"),0<p.length&&(b=new Hu("onChange","change",null,b,E),h.push({event:b,listeners:p}))}var ws=null,al=null;function qu(h){XV(h,0)}function Kf(h){var p=De(h);if(kr(p))return h}function YA(h,p){if(h==="change")return p}var A0=!1;if(tl){var ti;if(tl){var Wf="oninput"in document;if(!Wf){var m0=document.createElement("div");m0.setAttribute("oninput","return;"),Wf=typeof m0.oninput=="function"}ti=Wf}else ti=!1;A0=ti&&(!document.documentMode||9<document.documentMode)}function p0(){ws&&(ws.detachEvent("onpropertychange",JA),al=ws=null)}function JA(h){if(h.propertyName==="value"&&Kf(al)){var p=[];mc(p,al,h,wa(h)),KA(qu,p)}}function sl(h,p,b){h==="focusin"?(p0(),ws=p,al=b,ws.attachEvent("onpropertychange",JA)):h==="focusout"&&p0()}function Xy(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Kf(al)}function sg(h,p){if(h==="click")return Kf(p)}function xv(h,p){if(h==="input"||h==="change")return Kf(p)}function pc(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var ji=typeof Object.is=="function"?Object.is:pc;function Xf(h,p){if(ji(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var b=Object.keys(h),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var Q=b[E];if(!X.call(p,Q)||!ji(h[Q],p[Q]))return!1}return!0}function ig(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function zd(h,p){var b=ig(h);h=0;for(var E;b;){if(b.nodeType===3){if(E=h+b.textContent.length,h<=p&&E>=p)return{node:b,offset:p-h};h=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=ig(b)}}function Yf(h,p){return h&&p?h===p?!0:h&&h.nodeType===3?!1:p&&p.nodeType===3?Yf(h,p.parentNode):"contains"in h?h.contains(p):h.compareDocumentPosition?!!(h.compareDocumentPosition(p)&16):!1:!1}function Bo(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var p=rn(h.document);p instanceof h.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)h=p.contentWindow;else break;p=rn(h.document)}return p}function $i(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p&&(p==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||p==="textarea"||h.contentEditable==="true")}var Jf=tl&&"documentMode"in document&&11>=document.documentMode,il=null,eu=null,Ku=null,tu=!1;function hs(h,p,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;tu||il==null||il!==rn(E)||(E=il,"selectionStart"in E&&$i(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Ku&&Xf(Ku,E)||(Ku=E,E=wj(eu,"onSelect"),0<E.length&&(p=new Hu("onSelect","select",null,p,b),h.push({event:p,listeners:E}),p.target=il)))}function ru(h,p){var b={};return b[h.toLowerCase()]=p.toLowerCase(),b["Webkit"+h]="webkit"+p,b["Moz"+h]="moz"+p,b}var Rs={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionrun:ru("Transition","TransitionRun"),transitionstart:ru("Transition","TransitionStart"),transitioncancel:ru("Transition","TransitionCancel"),transitionend:ru("Transition","TransitionEnd")},ol={},g0={};tl&&(g0=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function Wu(h){if(ol[h])return ol[h];if(!Rs[h])return h;var p=Rs[h],b;for(b in p)if(p.hasOwnProperty(b)&&b in g0)return ol[h]=p[b];return h}var ZA=Wu("animationend"),Zf=Wu("animationiteration"),eh=Wu("animationstart"),th=Wu("transitionrun"),x0=Wu("transitionstart"),em=Wu("transitioncancel"),rh=Wu("transitionend"),Gd=new Map,v0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");v0.push("scrollEnd");function As(h,p){Gd.set(h,p),_t(p,[h])}var Gl=new WeakMap;function Nn(h,p){if(typeof h=="object"&&h!==null){var b=Gl.get(h);return b!==void 0?b:(p={value:h,source:p,stack:la(p)},Gl.set(h,p),p)}return{value:h,source:p,stack:la(p)}}var Cn=[],Pa=0,Ns=0;function gc(){for(var h=Pa,p=Ns=Pa=0;p<h;){var b=Cn[p];Cn[p++]=null;var E=Cn[p];Cn[p++]=null;var Q=Cn[p];Cn[p++]=null;var ee=Cn[p];if(Cn[p++]=null,E!==null&&Q!==null){var be=E.pending;be===null?Q.next=Q:(Q.next=be.next,be.next=Q),E.pending=Q}ee!==0&&vv(b,Q,ee)}}function nh(h,p,b,E){Cn[Pa++]=h,Cn[Pa++]=p,Cn[Pa++]=b,Cn[Pa++]=E,Ns|=E,h.lanes|=E,h=h.alternate,h!==null&&(h.lanes|=E)}function ah(h,p,b,E){return nh(h,p,b,E),b0(h)}function qd(h,p){return nh(h,null,null,p),b0(h)}function vv(h,p,b){h.lanes|=b;var E=h.alternate;E!==null&&(E.lanes|=b);for(var Q=!1,ee=h.return;ee!==null;)ee.childLanes|=b,E=ee.alternate,E!==null&&(E.childLanes|=b),ee.tag===22&&(h=ee.stateNode,h===null||h._visibility&1||(Q=!0)),h=ee,ee=ee.return;return h.tag===3?(ee=h.stateNode,Q&&p!==null&&(Q=31-Je(b),h=ee.hiddenUpdates,E=h[Q],E===null?h[Q]=[p]:E.push(p),p.lane=b|536870912),ee):null}function b0(h){if(50<yw)throw yw=0,KB=null,Error(n(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}var ki={};function xc(h,p,b,E){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lo(h,p,b,E){return new xc(h,p,b,E)}function tm(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Xu(h,p){var b=h.alternate;return b===null?(b=lo(h.tag,p,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=p,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,p=h.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function og(h,p){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,p=b.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function y0(h,p,b,E,Q,ee){var be=0;if(E=h,typeof h=="function")tm(h)&&(be=1);else if(typeof h=="string")be=D1e(h,b,K.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case B:return h=lo(31,b,p,Q),h.elementType=B,h.lanes=ee,h;case g:return Kd(b.children,Q,ee,p);case x:be=8,Q|=24;break;case v:return h=lo(12,b,p,Q|2),h.elementType=v,h.lanes=ee,h;case j:return h=lo(13,b,p,Q),h.elementType=j,h.lanes=ee,h;case I:return h=lo(19,b,p,Q),h.elementType=I,h.lanes=ee,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case y:case C:be=10;break e;case N:be=9;break e;case _:be=11;break e;case T:be=14;break e;case k:be=16,E=null;break e}be=29,b=Error(n(130,h===null?"null":typeof h,"")),E=null}return p=lo(be,b,p,Q),p.elementType=h,p.type=E,p.lanes=ee,p}function Kd(h,p,b,E){return h=lo(7,h,E,p),h.lanes=b,h}function bv(h,p,b){return h=lo(6,h,null,p),h.lanes=b,h}function lg(h,p,b){return p=lo(4,h.children!==null?h.children:[],h.key,p),p.lanes=b,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}var sh=[],Wd=0,rm=null,yv=0,vc=[],ql=0,w0=null,Xd=1,Yd="";function N0(h,p){sh[Wd++]=yv,sh[Wd++]=rm,rm=h,yv=p}function UE(h,p,b){vc[ql++]=Xd,vc[ql++]=Yd,vc[ql++]=w0,w0=h;var E=Xd;h=Yd;var Q=32-Je(E)-1;E&=~(1<<Q),b+=1;var ee=32-Je(p)+Q;if(30<ee){var be=Q-Q%5;ee=(E&(1<<be)-1).toString(32),E>>=be,Q-=be,Xd=1<<32-Je(p)+Q|b<<Q|E,Yd=ee+h}else Xd=1<<ee|b<<Q|E,Yd=h}function cg(h){h.return!==null&&(N0(h,1),UE(h,1,0))}function ug(h){for(;h===rm;)rm=sh[--Wd],sh[Wd]=null,yv=sh[--Wd],sh[Wd]=null;for(;h===w0;)w0=vc[--ql],vc[ql]=null,Yd=vc[--ql],vc[ql]=null,Xd=vc[--ql],vc[ql]=null}var ri=null,ms=null,Yn=!1,ih=null,Yu=!1,Yy=Error(n(519));function C0(h){var p=Error(n(418,""));throw nm(Nn(p,h)),Yy}function HE(h){var p=h.stateNode,b=h.type,E=h.memoizedProps;switch(p[fn]=h,p[$r]=E,b){case"dialog":On("cancel",p),On("close",p);break;case"iframe":case"object":case"embed":On("load",p);break;case"video":case"audio":for(b=0;b<Nw.length;b++)On(Nw[b],p);break;case"source":On("error",p);break;case"img":case"image":case"link":On("error",p),On("load",p);break;case"details":On("toggle",p);break;case"input":On("invalid",p),Ei(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),$l(p);break;case"select":On("invalid",p);break;case"textarea":On("invalid",p),el(p,E.value,E.defaultValue,E.children),$l(p)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||E.suppressHydrationWarning===!0||e$(p.textContent,b)?(E.popover!=null&&(On("beforetoggle",p),On("toggle",p)),E.onScroll!=null&&On("scroll",p),E.onScrollEnd!=null&&On("scrollend",p),E.onClick!=null&&(p.onclick=Nj),p=!0):p=!1,p||C0(h)}function Jd(h){for(ri=h.return;ri;)switch(ri.tag){case 5:case 13:Yu=!1;return;case 27:case 3:Yu=!0;return;default:ri=ri.return}}function Io(h){if(h!==ri)return!1;if(!Yn)return Jd(h),Yn=!0,!1;var p=h.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=h.type,b=!(b!=="form"&&b!=="button")||uI(h.type,h.memoizedProps)),b=!b),b&&ms&&C0(h),Jd(h),p===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));e:{for(h=h.nextSibling,p=0;h;){if(h.nodeType===8)if(b=h.data,b==="/$"){if(p===0){ms=of(h.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;h=h.nextSibling}ms=null}}else p===27?(p=ms,bm(h.type)?(h=AI,AI=null,ms=h):ms=p):ms=ri?of(h.stateNode.nextSibling):null;return!0}function Kl(){ms=ri=null,Yn=!1}function QE(){var h=ih;return h!==null&&(wc===null?wc=h:wc.push.apply(wc,h),ih=null),h}function nm(h){ih===null?ih=[h]:ih.push(h)}var Ju=Y(null),Si=null,Zd=null;function oh(h,p,b){O(Ju,p._currentValue),p._currentValue=b}function Zu(h){h._currentValue=Ju.current,R(Ju)}function wv(h,p,b){for(;h!==null;){var E=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),h===b)break;h=h.return}}function Nv(h,p,b,E){var Q=h.child;for(Q!==null&&(Q.return=h);Q!==null;){var ee=Q.dependencies;if(ee!==null){var be=Q.child;ee=ee.firstContext;e:for(;ee!==null;){var Fe=ee;ee=Q;for(var Ye=0;Ye<p.length;Ye++)if(Fe.context===p[Ye]){ee.lanes|=b,Fe=ee.alternate,Fe!==null&&(Fe.lanes|=b),wv(ee.return,b,h),E||(be=null);break e}ee=Fe.next}}else if(Q.tag===18){if(be=Q.return,be===null)throw Error(n(341));be.lanes|=b,ee=be.alternate,ee!==null&&(ee.lanes|=b),wv(be,b,h),be=null}else be=Q.child;if(be!==null)be.return=Q;else for(be=Q;be!==null;){if(be===h){be=null;break}if(Q=be.sibling,Q!==null){Q.return=be.return,be=Q;break}be=be.return}Q=be}}function am(h,p,b,E){h=null;for(var Q=p,ee=!1;Q!==null;){if(!ee){if((Q.flags&524288)!==0)ee=!0;else if((Q.flags&262144)!==0)break}if(Q.tag===10){var be=Q.alternate;if(be===null)throw Error(n(387));if(be=be.memoizedProps,be!==null){var Fe=Q.type;ji(Q.pendingProps.value,be.value)||(h!==null?h.push(Fe):h=[Fe])}}else if(Q===oe.current){if(be=Q.alternate,be===null)throw Error(n(387));be.memoizedState.memoizedState!==Q.memoizedState.memoizedState&&(h!==null?h.push(_w):h=[_w])}Q=Q.return}h!==null&&Nv(p,h,b,E),p.flags|=262144}function Cv(h){for(h=h.firstContext;h!==null;){if(!ji(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function ed(h){Si=h,Zd=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function ni(h){return Ev(Si,h)}function lh(h,p){return Si===null&&ed(h),Ev(h,p)}function Ev(h,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},Zd===null){if(h===null)throw Error(n(308));Zd=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else Zd=Zd.next=p;return b}var vB=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(b,E){h.push(E)}};this.abort=function(){p.aborted=!0,h.forEach(function(b){return b()})}},VE=e.unstable_scheduleCallback,bB=e.unstable_NormalPriority,ai={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jy(){return{controller:new vB,data:new Map,refCount:0}}function dg(h){h.refCount--,h.refCount===0&&VE(bB,function(){h.controller.abort()})}var fg=null,Zy=0,E0=0,ef=null;function yB(h,p){if(fg===null){var b=fg=[];Zy=0,E0=tI(),ef={status:"pending",value:void 0,then:function(E){b.push(E)}}}return Zy++,p.then($E,$E),p}function $E(){if(--Zy===0&&fg!==null){ef!==null&&(ef.status="fulfilled");var h=fg;fg=null,E0=0,ef=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function zE(h,p){var b=[],E={status:"pending",value:null,reason:null,then:function(Q){b.push(Q)}};return h.then(function(){E.status="fulfilled",E.value=p;for(var Q=0;Q<b.length;Q++)(0,b[Q])(p)},function(Q){for(E.status="rejected",E.reason=Q,Q=0;Q<b.length;Q++)(0,b[Q])(void 0)}),E}var D=H.S;H.S=function(h,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&yB(h,p),D!==null&&D(h,p)};var G=Y(null);function ae(){var h=G.current;return h!==null?h:Xa.pooledCache}function he(h,p){p===null?O(G,G.current):O(G,p.pool)}function Ne(){var h=ae();return h===null?null:{parent:ai._currentValue,pool:h}}var Se=Error(n(460)),_e=Error(n(474)),Oe=Error(n(542)),Le={then:function(){}};function ze(h){return h=h.status,h==="fulfilled"||h==="rejected"}function nt(){}function bt(h,p,b){switch(b=h[b],b===void 0?h.push(p):b!==p&&(p.then(nt,nt),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,$t(h),h;default:if(typeof p.status=="string")p.then(nt,nt);else{if(h=Xa,h!==null&&100<h.shellSuspendCounter)throw Error(n(482));h=p,h.status="pending",h.then(function(E){if(p.status==="pending"){var Q=p;Q.status="fulfilled",Q.value=E}},function(E){if(p.status==="pending"){var Q=p;Q.status="rejected",Q.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,$t(h),h}throw gt=p,Se}}var gt=null;function ut(){if(gt===null)throw Error(n(459));var h=gt;return gt=null,h}function $t(h){if(h===Se||h===Oe)throw Error(n(483))}var kt=!1;function at(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function it(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Mt(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function zt(h,p,b){var E=h.updateQueue;if(E===null)return null;if(E=E.shared,(Ca&2)!==0){var Q=E.pending;return Q===null?p.next=p:(p.next=Q.next,Q.next=p),E.pending=p,p=b0(h),vv(h,null,b),p}return nh(h,E,p,b),b0(h)}function Qt(h,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var E=p.lanes;E&=h.pendingLanes,b|=E,p.lanes=b,dr(h,b)}}function Ar(h,p){var b=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var Q=null,ee=null;if(b=b.firstBaseUpdate,b!==null){do{var be={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};ee===null?Q=ee=be:ee=ee.next=be,b=b.next}while(b!==null);ee===null?Q=ee=p:ee=ee.next=p}else Q=ee=p;b={baseState:E.baseState,firstBaseUpdate:Q,lastBaseUpdate:ee,shared:E.shared,callbacks:E.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=p:h.next=p,b.lastBaseUpdate=p}var or=!1;function Br(){if(or){var h=ef;if(h!==null)throw h}}function cr(h,p,b,E){or=!1;var Q=h.updateQueue;kt=!1;var ee=Q.firstBaseUpdate,be=Q.lastBaseUpdate,Fe=Q.shared.pending;if(Fe!==null){Q.shared.pending=null;var Ye=Fe,wt=Ye.next;Ye.next=null,be===null?ee=wt:be.next=wt,be=Ye;var Ht=h.alternate;Ht!==null&&(Ht=Ht.updateQueue,Fe=Ht.lastBaseUpdate,Fe!==be&&(Fe===null?Ht.firstBaseUpdate=wt:Fe.next=wt,Ht.lastBaseUpdate=Ye))}if(ee!==null){var Gt=Q.baseState;be=0,Ht=wt=Ye=null,Fe=ee;do{var Et=Fe.lane&-536870913,jt=Et!==Fe.lane;if(jt?(qn&Et)===Et:(E&Et)===Et){Et!==0&&Et===E0&&(or=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:Fe.tag,payload:Fe.payload,callback:null,next:null});e:{var en=h,Vr=Fe;Et=p;var Ra=b;switch(Vr.tag){case 1:if(en=Vr.payload,typeof en=="function"){Gt=en.call(Ra,Gt,Et);break e}Gt=en;break e;case 3:en.flags=en.flags&-65537|128;case 0:if(en=Vr.payload,Et=typeof en=="function"?en.call(Ra,Gt,Et):en,Et==null)break e;Gt=d({},Gt,Et);break e;case 2:kt=!0}}Et=Fe.callback,Et!==null&&(h.flags|=64,jt&&(h.flags|=8192),jt=Q.callbacks,jt===null?Q.callbacks=[Et]:jt.push(Et))}else jt={lane:Et,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null},Ht===null?(wt=Ht=jt,Ye=Gt):Ht=Ht.next=jt,be|=Et;if(Fe=Fe.next,Fe===null){if(Fe=Q.shared.pending,Fe===null)break;jt=Fe,Fe=jt.next,jt.next=null,Q.lastBaseUpdate=jt,Q.shared.pending=null}}while(!0);Ht===null&&(Ye=Gt),Q.baseState=Ye,Q.firstBaseUpdate=wt,Q.lastBaseUpdate=Ht,ee===null&&(Q.shared.lanes=0),pm|=be,h.lanes=be,h.memoizedState=Gt}}function zn(h,p){if(typeof h!="function")throw Error(n(191,h));h.call(p)}function ra(h,p){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)zn(b[h],p)}var wn=Y(null),pn=Y(0);function Aa(h,p){h=P0,O(pn,h),O(wn,p),P0=h|p.baseLanes}function na(){O(pn,P0),O(wn,wn.current)}function an(){P0=pn.current,R(wn),R(pn)}var Na=0,Lr=null,Wr=null,Hn=null,Gn=!1,_i=!1,si=!1,Cs=0,Es=0,Ls=null,bc=0;function aa(){throw Error(n(321))}function Ms(h,p){if(p===null)return!1;for(var b=0;b<p.length&&b<h.length;b++)if(!ji(h[b],p[b]))return!1;return!0}function nu(h,p,b,E,Q,ee){return Na=ee,Lr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,H.H=h===null||h.memoizedState===null?OQ:PQ,si=!1,ee=b(E,Q),si=!1,_i&&(ee=j0(p,b,E,Q)),ch(h),ee}function ch(h){H.H=nj;var p=Wr!==null&&Wr.next!==null;if(Na=0,Hn=Wr=Lr=null,Gn=!1,Es=0,Ls=null,p)throw Error(n(300));h===null||co||(h=h.dependencies,h!==null&&Cv(h)&&(co=!0))}function j0(h,p,b,E){Lr=h;var Q=0;do{if(_i&&(Ls=null),Es=0,_i=!1,25<=Q)throw Error(n(301));if(Q+=1,Hn=Wr=null,h.updateQueue!=null){var ee=h.updateQueue;ee.lastEffect=null,ee.events=null,ee.stores=null,ee.memoCache!=null&&(ee.memoCache.index=0)}H.H=$be,ee=p(b,E)}while(_i);return ee}function uh(){var h=H.H,p=h.useState()[0];return p=typeof p.then=="function"?dh(p):p,h=h.useState()[0],(Wr!==null?Wr.memoizedState:null)!==h&&(Lr.flags|=1024),p}function Wa(){var h=Cs!==0;return Cs=0,h}function hg(h,p,b){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~b}function jv(h){if(Gn){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Gn=!1}Na=0,Hn=Wr=Lr=null,_i=!1,Es=Cs=0,Ls=null}function Do(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?Lr.memoizedState=Hn=h:Hn=Hn.next=h,Hn}function ts(){if(Wr===null){var h=Lr.alternate;h=h!==null?h.memoizedState:null}else h=Wr.next;var p=Hn===null?Lr.memoizedState:Hn.next;if(p!==null)Hn=p,Wr=h;else{if(h===null)throw Lr.alternate===null?Error(n(467)):Error(n(310));Wr=h,h={memoizedState:Wr.memoizedState,baseState:Wr.baseState,baseQueue:Wr.baseQueue,queue:Wr.queue,next:null},Hn===null?Lr.memoizedState=Hn=h:Hn=Hn.next=h}return Hn}function k0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dh(h){var p=Es;return Es+=1,Ls===null&&(Ls=[]),h=bt(Ls,h,p),p=Lr,(Hn===null?p.memoizedState:Hn.next)===null&&(p=p.alternate,H.H=p===null||p.memoizedState===null?OQ:PQ),h}function ll(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return dh(h);if(h.$$typeof===C)return ni(h)}throw Error(n(438,String(h)))}function fh(h){var p=null,b=Lr.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var E=Lr.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(Q){return Q.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=k0(),Lr.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(h),E=0;E<h;E++)b[E]=M;return p.index++,b}function cl(h,p){return typeof p=="function"?p(h):p}function Ag(h){var p=ts();return sm(p,Wr,h)}function sm(h,p,b){var E=h.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=b;var Q=h.baseQueue,ee=E.pending;if(ee!==null){if(Q!==null){var be=Q.next;Q.next=ee.next,ee.next=be}p.baseQueue=Q=ee,E.pending=null}if(ee=h.baseState,Q===null)h.memoizedState=ee;else{p=Q.next;var Fe=be=null,Ye=null,wt=p,Ht=!1;do{var Gt=wt.lane&-536870913;if(Gt!==wt.lane?(qn&Gt)===Gt:(Na&Gt)===Gt){var Et=wt.revertLane;if(Et===0)Ye!==null&&(Ye=Ye.next={lane:0,revertLane:0,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null}),Gt===E0&&(Ht=!0);else if((Na&Et)===Et){wt=wt.next,Et===E0&&(Ht=!0);continue}else Gt={lane:0,revertLane:wt.revertLane,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},Ye===null?(Fe=Ye=Gt,be=ee):Ye=Ye.next=Gt,Lr.lanes|=Et,pm|=Et;Gt=wt.action,si&&b(ee,Gt),ee=wt.hasEagerState?wt.eagerState:b(ee,Gt)}else Et={lane:Gt,revertLane:wt.revertLane,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},Ye===null?(Fe=Ye=Et,be=ee):Ye=Ye.next=Et,Lr.lanes|=Gt,pm|=Gt;wt=wt.next}while(wt!==null&&wt!==p);if(Ye===null?be=ee:Ye.next=Fe,!ji(ee,h.memoizedState)&&(co=!0,Ht&&(b=ef,b!==null)))throw b;h.memoizedState=ee,h.baseState=be,h.baseQueue=Ye,E.lastRenderedState=ee}return Q===null&&(E.lanes=0),[h.memoizedState,E.dispatch]}function kv(h){var p=ts(),b=p.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=h;var E=b.dispatch,Q=b.pending,ee=p.memoizedState;if(Q!==null){b.pending=null;var be=Q=Q.next;do ee=h(ee,be.action),be=be.next;while(be!==Q);ji(ee,p.memoizedState)||(co=!0),p.memoizedState=ee,p.baseQueue===null&&(p.baseState=ee),b.lastRenderedState=ee}return[ee,E]}function mg(h,p,b){var E=Lr,Q=ts(),ee=Yn;if(ee){if(b===void 0)throw Error(n(407));b=b()}else b=p();var be=!ji((Wr||Q).memoizedState,b);be&&(Q.memoizedState=b,co=!0),Q=Q.queue;var Fe=im.bind(null,E,Q,h);if(cm(2048,8,Fe,[h]),Q.getSnapshot!==p||be||Hn!==null&&Hn.memoizedState.tag&1){if(E.flags|=2048,rf(9,vg(),pg.bind(null,E,Q,b,p),null),Xa===null)throw Error(n(349));ee||(Na&124)!==0||Sv(E,p,b)}return b}function Sv(h,p,b){h.flags|=16384,h={getSnapshot:p,value:b},p=Lr.updateQueue,p===null?(p=k0(),Lr.updateQueue=p,p.stores=[h]):(b=p.stores,b===null?p.stores=[h]:b.push(h))}function pg(h,p,b,E){p.value=b,p.getSnapshot=E,GE(p)&&qE(h)}function im(h,p,b){return b(function(){GE(p)&&qE(h)})}function GE(h){var p=h.getSnapshot;h=h.value;try{var b=p();return!ji(h,b)}catch{return!0}}function qE(h){var p=qd(h,2);p!==null&&cu(p,h,2)}function gg(h){var p=Do();if(typeof h=="function"){var b=h;if(h=b(),si){Qe(!0);try{b()}finally{Qe(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:h},p}function tf(h,p,b,E){return h.baseState=b,sm(h,Wr,typeof E=="function"?E:cl)}function wB(h,p,b,E,Q){if(rj(h))throw Error(n(485));if(h=p.action,h!==null){var ee={payload:Q,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(be){ee.listeners.push(be)}};H.T!==null?b(!0):ee.isTransition=!1,E(ee),b=p.pending,b===null?(ee.next=p.pending=ee,KE(p,ee)):(ee.next=b.next,p.pending=b.next=ee)}}function KE(h,p){var b=p.action,E=p.payload,Q=h.state;if(p.isTransition){var ee=H.T,be={};H.T=be;try{var Fe=b(Q,E),Ye=H.S;Ye!==null&&Ye(be,Fe),WE(h,p,Fe)}catch(wt){om(h,p,wt)}finally{H.T=ee}}else try{ee=b(Q,E),WE(h,p,ee)}catch(wt){om(h,p,wt)}}function WE(h,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){ew(h,p,E)},function(E){return om(h,p,E)}):ew(h,p,b)}function ew(h,p,b){p.status="fulfilled",p.value=b,tw(p),h.state=b,p=h.pending,p!==null&&(b=p.next,b===p?h.pending=null:(b=b.next,p.next=b,KE(h,b)))}function om(h,p,b){var E=h.pending;if(h.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=b,tw(p),p=p.next;while(p!==E)}h.action=null}function tw(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function rw(h,p){return p}function xg(h,p){if(Yn){var b=Xa.formState;if(b!==null){e:{var E=Lr;if(Yn){if(ms){t:{for(var Q=ms,ee=Yu;Q.nodeType!==8;){if(!ee){Q=null;break t}if(Q=of(Q.nextSibling),Q===null){Q=null;break t}}ee=Q.data,Q=ee==="F!"||ee==="F"?Q:null}if(Q){ms=of(Q.nextSibling),E=Q.data==="F!";break e}}C0(E)}E=!1}E&&(p=b[0])}}return b=Do(),b.memoizedState=b.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rw,lastRenderedState:p},b.queue=E,b=BQ.bind(null,Lr,E),E.dispatch=b,E=gg(!1),ee=NB.bind(null,Lr,!1,E.queue),E=Do(),Q={state:p,dispatch:null,action:h,pending:null},E.queue=Q,b=wB.bind(null,Lr,Q,ee,b),Q.dispatch=b,E.memoizedState=h,[p,b,!1]}function _v(h){var p=ts();return lm(p,Wr,h)}function lm(h,p,b){if(p=sm(h,p,rw)[0],h=Ag(cl)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=dh(p)}catch(be){throw be===Se?Oe:be}else E=p;p=ts();var Q=p.queue,ee=Q.dispatch;return b!==p.memoizedState&&(Lr.flags|=2048,rf(9,vg(),XE.bind(null,Q,b),null)),[E,ee,h]}function XE(h,p){h.action=p}function YE(h){var p=ts(),b=Wr;if(b!==null)return lm(p,b,h);ts(),p=p.memoizedState,b=ts();var E=b.queue.dispatch;return b.memoizedState=h,[p,E,!1]}function rf(h,p,b,E){return h={tag:h,create:b,deps:E,inst:p,next:null},p=Lr.updateQueue,p===null&&(p=k0(),Lr.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=h.next=h:(E=b.next,b.next=h,h.next=E,p.lastEffect=h),h}function vg(){return{destroy:void 0,resource:void 0}}function Tv(){return ts().memoizedState}function au(h,p,b,E){var Q=Do();E=E===void 0?null:E,Lr.flags|=h,Q.memoizedState=rf(1|p,vg(),b,E)}function cm(h,p,b,E){var Q=ts();E=E===void 0?null:E;var ee=Q.memoizedState.inst;Wr!==null&&E!==null&&Ms(E,Wr.memoizedState.deps)?Q.memoizedState=rf(p,ee,b,E):(Lr.flags|=h,Q.memoizedState=rf(1|p,ee,b,E))}function nw(h,p){au(8390656,8,h,p)}function JE(h,p){cm(2048,8,h,p)}function aw(h,p){return cm(4,2,h,p)}function S0(h,p){return cm(4,4,h,p)}function ZE(h,p){if(typeof p=="function"){h=h();var b=p(h);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function sw(h,p,b){b=b!=null?b.concat([h]):null,cm(4,4,ZE.bind(null,p,h),b)}function iw(){}function ow(h,p){var b=ts();p=p===void 0?null:p;var E=b.memoizedState;return p!==null&&Ms(p,E[1])?E[0]:(b.memoizedState=[h,p],h)}function ej(h,p){var b=ts();p=p===void 0?null:p;var E=b.memoizedState;if(p!==null&&Ms(p,E[1]))return E[0];if(E=h(),si){Qe(!0);try{h()}finally{Qe(!1)}}return b.memoizedState=[E,p],E}function _0(h,p,b){return b===void 0||(Na&1073741824)!==0?h.memoizedState=p:(h.memoizedState=b,h=kV(),Lr.lanes|=h,pm|=h,b)}function Bv(h,p,b,E){return ji(b,p)?b:wn.current!==null?(h=_0(h,b,E),ji(h,p)||(co=!0),h):(Na&42)===0?(co=!0,h.memoizedState=b):(h=kV(),Lr.lanes|=h,pm|=h,p)}function bg(h,p,b,E,Q){var ee=z.p;z.p=ee!==0&&8>ee?ee:8;var be=H.T,Fe={};H.T=Fe,NB(h,!1,p,b);try{var Ye=Q(),wt=H.S;if(wt!==null&&wt(Fe,Ye),Ye!==null&&typeof Ye=="object"&&typeof Ye.then=="function"){var Ht=zE(Ye,E);dw(h,p,Ht,lu(h))}else dw(h,p,E,lu(h))}catch(Gt){dw(h,p,{then:function(){},status:"rejected",reason:Gt},lu())}finally{z.p=ee,H.T=be}}function nf(){}function td(h,p,b,E){if(h.tag!==5)throw Error(n(476));var Q=af(h).queue;bg(h,Q,p,W,b===null?nf:function(){return yg(h),b(E)})}function af(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:W},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:b},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function yg(h){var p=af(h).next.queue;dw(h,p,{},lu())}function wg(){return ni(_w)}function lw(){return ts().memoizedState}function tj(){return ts().memoizedState}function cw(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var b=lu();h=Mt(b);var E=zt(p,h,b);E!==null&&(cu(E,p,b),Qt(E,p,b)),p={cache:Jy()},h.payload=p;return}p=p.return}}function uw(h,p,b){var E=lu();b={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},rj(h)?IQ(p,b):(b=ah(h,p,b,E),b!==null&&(cu(b,h,E),DQ(b,p,E)))}function BQ(h,p,b){var E=lu();dw(h,p,b,E)}function dw(h,p,b,E){var Q={lane:E,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(rj(h))IQ(p,Q);else{var ee=h.alternate;if(h.lanes===0&&(ee===null||ee.lanes===0)&&(ee=p.lastRenderedReducer,ee!==null))try{var be=p.lastRenderedState,Fe=ee(be,b);if(Q.hasEagerState=!0,Q.eagerState=Fe,ji(Fe,be))return nh(h,p,Q,0),Xa===null&&gc(),!1}catch{}finally{}if(b=ah(h,p,Q,E),b!==null)return cu(b,h,E),DQ(b,p,E),!0}return!1}function NB(h,p,b,E){if(E={lane:2,revertLane:tI(),action:E,hasEagerState:!1,eagerState:null,next:null},rj(h)){if(p)throw Error(n(479))}else p=ah(h,b,E,2),p!==null&&cu(p,h,2)}function rj(h){var p=h.alternate;return h===Lr||p!==null&&p===Lr}function IQ(h,p){_i=Gn=!0;var b=h.pending;b===null?p.next=p:(p.next=b.next,b.next=p),h.pending=p}function DQ(h,p,b){if((b&4194048)!==0){var E=p.lanes;E&=h.pendingLanes,b|=E,p.lanes=b,dr(h,b)}}var nj={readContext:ni,use:ll,useCallback:aa,useContext:aa,useEffect:aa,useImperativeHandle:aa,useLayoutEffect:aa,useInsertionEffect:aa,useMemo:aa,useReducer:aa,useRef:aa,useState:aa,useDebugValue:aa,useDeferredValue:aa,useTransition:aa,useSyncExternalStore:aa,useId:aa,useHostTransitionStatus:aa,useFormState:aa,useActionState:aa,useOptimistic:aa,useMemoCache:aa,useCacheRefresh:aa},OQ={readContext:ni,use:ll,useCallback:function(h,p){return Do().memoizedState=[h,p===void 0?null:p],h},useContext:ni,useEffect:nw,useImperativeHandle:function(h,p,b){b=b!=null?b.concat([h]):null,au(4194308,4,ZE.bind(null,p,h),b)},useLayoutEffect:function(h,p){return au(4194308,4,h,p)},useInsertionEffect:function(h,p){au(4,2,h,p)},useMemo:function(h,p){var b=Do();p=p===void 0?null:p;var E=h();if(si){Qe(!0);try{h()}finally{Qe(!1)}}return b.memoizedState=[E,p],E},useReducer:function(h,p,b){var E=Do();if(b!==void 0){var Q=b(p);if(si){Qe(!0);try{b(p)}finally{Qe(!1)}}}else Q=p;return E.memoizedState=E.baseState=Q,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:Q},E.queue=h,h=h.dispatch=uw.bind(null,Lr,h),[E.memoizedState,h]},useRef:function(h){var p=Do();return h={current:h},p.memoizedState=h},useState:function(h){h=gg(h);var p=h.queue,b=BQ.bind(null,Lr,p);return p.dispatch=b,[h.memoizedState,b]},useDebugValue:iw,useDeferredValue:function(h,p){var b=Do();return _0(b,h,p)},useTransition:function(){var h=gg(!1);return h=bg.bind(null,Lr,h.queue,!0,!1),Do().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,b){var E=Lr,Q=Do();if(Yn){if(b===void 0)throw Error(n(407));b=b()}else{if(b=p(),Xa===null)throw Error(n(349));(qn&124)!==0||Sv(E,p,b)}Q.memoizedState=b;var ee={value:b,getSnapshot:p};return Q.queue=ee,nw(im.bind(null,E,ee,h),[h]),E.flags|=2048,rf(9,vg(),pg.bind(null,E,ee,b,p),null),b},useId:function(){var h=Do(),p=Xa.identifierPrefix;if(Yn){var b=Yd,E=Xd;b=(E&~(1<<32-Je(E)-1)).toString(32)+b,p=""+p+"R"+b,b=Cs++,0<b&&(p+="H"+b.toString(32)),p+=""}else b=bc++,p=""+p+"r"+b.toString(32)+"";return h.memoizedState=p},useHostTransitionStatus:wg,useFormState:xg,useActionState:xg,useOptimistic:function(h){var p=Do();p.memoizedState=p.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=NB.bind(null,Lr,!0,b),b.dispatch=p,[h,p]},useMemoCache:fh,useCacheRefresh:function(){return Do().memoizedState=cw.bind(null,Lr)}},PQ={readContext:ni,use:ll,useCallback:ow,useContext:ni,useEffect:JE,useImperativeHandle:sw,useInsertionEffect:aw,useLayoutEffect:S0,useMemo:ej,useReducer:Ag,useRef:Tv,useState:function(){return Ag(cl)},useDebugValue:iw,useDeferredValue:function(h,p){var b=ts();return Bv(b,Wr.memoizedState,h,p)},useTransition:function(){var h=Ag(cl)[0],p=ts().memoizedState;return[typeof h=="boolean"?h:dh(h),p]},useSyncExternalStore:mg,useId:lw,useHostTransitionStatus:wg,useFormState:_v,useActionState:_v,useOptimistic:function(h,p){var b=ts();return tf(b,Wr,h,p)},useMemoCache:fh,useCacheRefresh:tj},$be={readContext:ni,use:ll,useCallback:ow,useContext:ni,useEffect:JE,useImperativeHandle:sw,useInsertionEffect:aw,useLayoutEffect:S0,useMemo:ej,useReducer:kv,useRef:Tv,useState:function(){return kv(cl)},useDebugValue:iw,useDeferredValue:function(h,p){var b=ts();return Wr===null?_0(b,h,p):Bv(b,Wr.memoizedState,h,p)},useTransition:function(){var h=kv(cl)[0],p=ts().memoizedState;return[typeof h=="boolean"?h:dh(h),p]},useSyncExternalStore:mg,useId:lw,useHostTransitionStatus:wg,useFormState:YE,useActionState:YE,useOptimistic:function(h,p){var b=ts();return Wr!==null?tf(b,Wr,h,p):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:fh,useCacheRefresh:tj},Iv=null,fw=0;function aj(h){var p=fw;return fw+=1,Iv===null&&(Iv=[]),bt(Iv,h,p)}function hw(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function sj(h,p){throw p.$$typeof===f?Error(n(525)):(h=Object.prototype.toString.call(p),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function FQ(h){var p=h._init;return p(h._payload)}function RQ(h){function p(ht,st){if(h){var xt=ht.deletions;xt===null?(ht.deletions=[st],ht.flags|=16):xt.push(st)}}function b(ht,st){if(!h)return null;for(;st!==null;)p(ht,st),st=st.sibling;return null}function E(ht){for(var st=new Map;ht!==null;)ht.key!==null?st.set(ht.key,ht):st.set(ht.index,ht),ht=ht.sibling;return st}function Q(ht,st){return ht=Xu(ht,st),ht.index=0,ht.sibling=null,ht}function ee(ht,st,xt){return ht.index=xt,h?(xt=ht.alternate,xt!==null?(xt=xt.index,xt<st?(ht.flags|=67108866,st):xt):(ht.flags|=67108866,st)):(ht.flags|=1048576,st)}function be(ht){return h&&ht.alternate===null&&(ht.flags|=67108866),ht}function Fe(ht,st,xt,Vt){return st===null||st.tag!==6?(st=bv(xt,ht.mode,Vt),st.return=ht,st):(st=Q(st,xt),st.return=ht,st)}function Ye(ht,st,xt,Vt){var Cr=xt.type;return Cr===g?Ht(ht,st,xt.props.children,Vt,xt.key):st!==null&&(st.elementType===Cr||typeof Cr=="object"&&Cr!==null&&Cr.$$typeof===k&&FQ(Cr)===st.type)?(st=Q(st,xt.props),hw(st,xt),st.return=ht,st):(st=y0(xt.type,xt.key,xt.props,null,ht.mode,Vt),hw(st,xt),st.return=ht,st)}function wt(ht,st,xt,Vt){return st===null||st.tag!==4||st.stateNode.containerInfo!==xt.containerInfo||st.stateNode.implementation!==xt.implementation?(st=lg(xt,ht.mode,Vt),st.return=ht,st):(st=Q(st,xt.children||[]),st.return=ht,st)}function Ht(ht,st,xt,Vt,Cr){return st===null||st.tag!==7?(st=Kd(xt,ht.mode,Vt,Cr),st.return=ht,st):(st=Q(st,xt),st.return=ht,st)}function Gt(ht,st,xt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=bv(""+st,ht.mode,xt),st.return=ht,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case A:return xt=y0(st.type,st.key,st.props,null,ht.mode,xt),hw(xt,st),xt.return=ht,xt;case m:return st=lg(st,ht.mode,xt),st.return=ht,st;case k:var Vt=st._init;return st=Vt(st._payload),Gt(ht,st,xt)}if(q(st)||S(st))return st=Kd(st,ht.mode,xt,null),st.return=ht,st;if(typeof st.then=="function")return Gt(ht,aj(st),xt);if(st.$$typeof===C)return Gt(ht,lh(ht,st),xt);sj(ht,st)}return null}function Et(ht,st,xt,Vt){var Cr=st!==null?st.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return Cr!==null?null:Fe(ht,st,""+xt,Vt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case A:return xt.key===Cr?Ye(ht,st,xt,Vt):null;case m:return xt.key===Cr?wt(ht,st,xt,Vt):null;case k:return Cr=xt._init,xt=Cr(xt._payload),Et(ht,st,xt,Vt)}if(q(xt)||S(xt))return Cr!==null?null:Ht(ht,st,xt,Vt,null);if(typeof xt.then=="function")return Et(ht,st,aj(xt),Vt);if(xt.$$typeof===C)return Et(ht,st,lh(ht,xt),Vt);sj(ht,xt)}return null}function jt(ht,st,xt,Vt,Cr){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint")return ht=ht.get(xt)||null,Fe(st,ht,""+Vt,Cr);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case A:return ht=ht.get(Vt.key===null?xt:Vt.key)||null,Ye(st,ht,Vt,Cr);case m:return ht=ht.get(Vt.key===null?xt:Vt.key)||null,wt(st,ht,Vt,Cr);case k:var _n=Vt._init;return Vt=_n(Vt._payload),jt(ht,st,xt,Vt,Cr)}if(q(Vt)||S(Vt))return ht=ht.get(xt)||null,Ht(st,ht,Vt,Cr,null);if(typeof Vt.then=="function")return jt(ht,st,xt,aj(Vt),Cr);if(Vt.$$typeof===C)return jt(ht,st,xt,lh(st,Vt),Cr);sj(st,Vt)}return null}function en(ht,st,xt,Vt){for(var Cr=null,_n=null,Dr=st,zr=st=0,fo=null;Dr!==null&&zr<xt.length;zr++){Dr.index>zr?(fo=Dr,Dr=null):fo=Dr.sibling;var sa=Et(ht,Dr,xt[zr],Vt);if(sa===null){Dr===null&&(Dr=fo);break}h&&Dr&&sa.alternate===null&&p(ht,Dr),st=ee(sa,st,zr),_n===null?Cr=sa:_n.sibling=sa,_n=sa,Dr=fo}if(zr===xt.length)return b(ht,Dr),Yn&&N0(ht,zr),Cr;if(Dr===null){for(;zr<xt.length;zr++)Dr=Gt(ht,xt[zr],Vt),Dr!==null&&(st=ee(Dr,st,zr),_n===null?Cr=Dr:_n.sibling=Dr,_n=Dr);return Yn&&N0(ht,zr),Cr}for(Dr=E(Dr);zr<xt.length;zr++)fo=jt(Dr,ht,zr,xt[zr],Vt),fo!==null&&(h&&fo.alternate!==null&&Dr.delete(fo.key===null?zr:fo.key),st=ee(fo,st,zr),_n===null?Cr=fo:_n.sibling=fo,_n=fo);return h&&Dr.forEach(function(Em){return p(ht,Em)}),Yn&&N0(ht,zr),Cr}function Vr(ht,st,xt,Vt){if(xt==null)throw Error(n(151));for(var Cr=null,_n=null,Dr=st,zr=st=0,fo=null,sa=xt.next();Dr!==null&&!sa.done;zr++,sa=xt.next()){Dr.index>zr?(fo=Dr,Dr=null):fo=Dr.sibling;var Em=Et(ht,Dr,sa.value,Vt);if(Em===null){Dr===null&&(Dr=fo);break}h&&Dr&&Em.alternate===null&&p(ht,Dr),st=ee(Em,st,zr),_n===null?Cr=Em:_n.sibling=Em,_n=Em,Dr=fo}if(sa.done)return b(ht,Dr),Yn&&N0(ht,zr),Cr;if(Dr===null){for(;!sa.done;zr++,sa=xt.next())sa=Gt(ht,sa.value,Vt),sa!==null&&(st=ee(sa,st,zr),_n===null?Cr=sa:_n.sibling=sa,_n=sa);return Yn&&N0(ht,zr),Cr}for(Dr=E(Dr);!sa.done;zr++,sa=xt.next())sa=jt(Dr,ht,zr,sa.value,Vt),sa!==null&&(h&&sa.alternate!==null&&Dr.delete(sa.key===null?zr:sa.key),st=ee(sa,st,zr),_n===null?Cr=sa:_n.sibling=sa,_n=sa);return h&&Dr.forEach(function(z1e){return p(ht,z1e)}),Yn&&N0(ht,zr),Cr}function Ra(ht,st,xt,Vt){if(typeof xt=="object"&&xt!==null&&xt.type===g&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case A:e:{for(var Cr=xt.key;st!==null;){if(st.key===Cr){if(Cr=xt.type,Cr===g){if(st.tag===7){b(ht,st.sibling),Vt=Q(st,xt.props.children),Vt.return=ht,ht=Vt;break e}}else if(st.elementType===Cr||typeof Cr=="object"&&Cr!==null&&Cr.$$typeof===k&&FQ(Cr)===st.type){b(ht,st.sibling),Vt=Q(st,xt.props),hw(Vt,xt),Vt.return=ht,ht=Vt;break e}b(ht,st);break}else p(ht,st);st=st.sibling}xt.type===g?(Vt=Kd(xt.props.children,ht.mode,Vt,xt.key),Vt.return=ht,ht=Vt):(Vt=y0(xt.type,xt.key,xt.props,null,ht.mode,Vt),hw(Vt,xt),Vt.return=ht,ht=Vt)}return be(ht);case m:e:{for(Cr=xt.key;st!==null;){if(st.key===Cr)if(st.tag===4&&st.stateNode.containerInfo===xt.containerInfo&&st.stateNode.implementation===xt.implementation){b(ht,st.sibling),Vt=Q(st,xt.children||[]),Vt.return=ht,ht=Vt;break e}else{b(ht,st);break}else p(ht,st);st=st.sibling}Vt=lg(xt,ht.mode,Vt),Vt.return=ht,ht=Vt}return be(ht);case k:return Cr=xt._init,xt=Cr(xt._payload),Ra(ht,st,xt,Vt)}if(q(xt))return en(ht,st,xt,Vt);if(S(xt)){if(Cr=S(xt),typeof Cr!="function")throw Error(n(150));return xt=Cr.call(xt),Vr(ht,st,xt,Vt)}if(typeof xt.then=="function")return Ra(ht,st,aj(xt),Vt);if(xt.$$typeof===C)return Ra(ht,st,lh(ht,xt),Vt);sj(ht,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint"?(xt=""+xt,st!==null&&st.tag===6?(b(ht,st.sibling),Vt=Q(st,xt),Vt.return=ht,ht=Vt):(b(ht,st),Vt=bv(xt,ht.mode,Vt),Vt.return=ht,ht=Vt),be(ht)):b(ht,st)}return function(ht,st,xt,Vt){try{fw=0;var Cr=Ra(ht,st,xt,Vt);return Iv=null,Cr}catch(Dr){if(Dr===Se||Dr===Oe)throw Dr;var _n=lo(29,Dr,null,ht.mode);return _n.lanes=Vt,_n.return=ht,_n}finally{}}}var Dv=RQ(!0),LQ=RQ(!1),rd=Y(null),hh=null;function um(h){var p=h.alternate;O(zi,zi.current&1),O(rd,h),hh===null&&(p===null||wn.current!==null||p.memoizedState!==null)&&(hh=h)}function MQ(h){if(h.tag===22){if(O(zi,zi.current),O(rd,h),hh===null){var p=h.alternate;p!==null&&p.memoizedState!==null&&(hh=h)}}else dm()}function dm(){O(zi,zi.current),O(rd,rd.current)}function T0(h){R(rd),hh===h&&(hh=null),R(zi)}var zi=Y(0);function ij(h){for(var p=h;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||hI(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function CB(h,p,b,E){p=h.memoizedState,b=b(E,p),b=b==null?p:d({},p,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var EB={enqueueSetState:function(h,p,b){h=h._reactInternals;var E=lu(),Q=Mt(E);Q.payload=p,b!=null&&(Q.callback=b),p=zt(h,Q,E),p!==null&&(cu(p,h,E),Qt(p,h,E))},enqueueReplaceState:function(h,p,b){h=h._reactInternals;var E=lu(),Q=Mt(E);Q.tag=1,Q.payload=p,b!=null&&(Q.callback=b),p=zt(h,Q,E),p!==null&&(cu(p,h,E),Qt(p,h,E))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var b=lu(),E=Mt(b);E.tag=2,p!=null&&(E.callback=p),p=zt(h,E,b),p!==null&&(cu(p,h,b),Qt(p,h,b))}};function UQ(h,p,b,E,Q,ee,be){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,ee,be):p.prototype&&p.prototype.isPureReactComponent?!Xf(b,E)||!Xf(Q,ee):!0}function HQ(h,p,b,E){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==h&&EB.enqueueReplaceState(p,p.state,null)}function Ng(h,p){var b=p;if("ref"in p){b={};for(var E in p)E!=="ref"&&(b[E]=p[E])}if(h=h.defaultProps){b===p&&(b=d({},b));for(var Q in h)b[Q]===void 0&&(b[Q]=h[Q])}return b}var oj=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function QQ(h){oj(h)}function VQ(h){console.error(h)}function $Q(h){oj(h)}function lj(h,p){try{var b=h.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function zQ(h,p,b){try{var E=h.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(Q){setTimeout(function(){throw Q})}}function jB(h,p,b){return b=Mt(b),b.tag=3,b.payload={element:null},b.callback=function(){lj(h,p)},b}function GQ(h){return h=Mt(h),h.tag=3,h}function qQ(h,p,b,E){var Q=b.type.getDerivedStateFromError;if(typeof Q=="function"){var ee=E.value;h.payload=function(){return Q(ee)},h.callback=function(){zQ(p,b,E)}}var be=b.stateNode;be!==null&&typeof be.componentDidCatch=="function"&&(h.callback=function(){zQ(p,b,E),typeof Q!="function"&&(gm===null?gm=new Set([this]):gm.add(this));var Fe=E.stack;this.componentDidCatch(E.value,{componentStack:Fe!==null?Fe:""})})}function zbe(h,p,b,E,Q){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=b.alternate,p!==null&&am(p,b,Q,!0),b=rd.current,b!==null){switch(b.tag){case 13:return hh===null?XB():b.alternate===null&&Us===0&&(Us=3),b.flags&=-257,b.flags|=65536,b.lanes=Q,E===Le?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([E]):p.add(E),JB(h,E,Q)),!1;case 22:return b.flags|=65536,E===Le?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([E]):b.add(E)),JB(h,E,Q)),!1}throw Error(n(435,b.tag))}return JB(h,E,Q),XB(),!1}if(Yn)return p=rd.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=Q,E!==Yy&&(h=Error(n(422),{cause:E}),nm(Nn(h,b)))):(E!==Yy&&(p=Error(n(423),{cause:E}),nm(Nn(p,b))),h=h.current.alternate,h.flags|=65536,Q&=-Q,h.lanes|=Q,E=Nn(E,b),Q=jB(h.stateNode,E,Q),Ar(h,Q),Us!==4&&(Us=2)),!1;var ee=Error(n(520),{cause:E});if(ee=Nn(ee,b),bw===null?bw=[ee]:bw.push(ee),Us!==4&&(Us=2),p===null)return!0;E=Nn(E,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,h=Q&-Q,b.lanes|=h,h=jB(b.stateNode,E,h),Ar(b,h),!1;case 1:if(p=b.type,ee=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(gm===null||!gm.has(ee))))return b.flags|=65536,Q&=-Q,b.lanes|=Q,Q=GQ(Q),qQ(Q,h,b,E),Ar(b,Q),!1}b=b.return}while(b!==null);return!1}var KQ=Error(n(461)),co=!1;function Oo(h,p,b,E){p.child=h===null?LQ(p,null,b,E):Dv(p,h.child,b,E)}function WQ(h,p,b,E,Q){b=b.render;var ee=p.ref;if("ref"in E){var be={};for(var Fe in E)Fe!=="ref"&&(be[Fe]=E[Fe])}else be=E;return ed(p),E=nu(h,p,b,be,ee,Q),Fe=Wa(),h!==null&&!co?(hg(h,p,Q),B0(h,p,Q)):(Yn&&Fe&&cg(p),p.flags|=1,Oo(h,p,E,Q),p.child)}function XQ(h,p,b,E,Q){if(h===null){var ee=b.type;return typeof ee=="function"&&!tm(ee)&&ee.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=ee,YQ(h,p,ee,E,Q)):(h=y0(b.type,null,E,p,p.mode,Q),h.ref=p.ref,h.return=p,p.child=h)}if(ee=h.child,!OB(h,Q)){var be=ee.memoizedProps;if(b=b.compare,b=b!==null?b:Xf,b(be,E)&&h.ref===p.ref)return B0(h,p,Q)}return p.flags|=1,h=Xu(ee,E),h.ref=p.ref,h.return=p,p.child=h}function YQ(h,p,b,E,Q){if(h!==null){var ee=h.memoizedProps;if(Xf(ee,E)&&h.ref===p.ref)if(co=!1,p.pendingProps=E=ee,OB(h,Q))(h.flags&131072)!==0&&(co=!0);else return p.lanes=h.lanes,B0(h,p,Q)}return kB(h,p,b,E,Q)}function JQ(h,p,b){var E=p.pendingProps,Q=E.children,ee=h!==null?h.memoizedState:null;if(E.mode==="hidden"){if((p.flags&128)!==0){if(E=ee!==null?ee.baseLanes|b:b,h!==null){for(Q=p.child=h.child,ee=0;Q!==null;)ee=ee|Q.lanes|Q.childLanes,Q=Q.sibling;p.childLanes=ee&~E}else p.childLanes=0,p.child=null;return ZQ(h,p,E,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&he(p,ee!==null?ee.cachePool:null),ee!==null?Aa(p,ee):na(),MQ(p);else return p.lanes=p.childLanes=536870912,ZQ(h,p,ee!==null?ee.baseLanes|b:b,b)}else ee!==null?(he(p,ee.cachePool),Aa(p,ee),dm(),p.memoizedState=null):(h!==null&&he(p,null),na(),dm());return Oo(h,p,Q,b),p.child}function ZQ(h,p,b,E){var Q=ae();return Q=Q===null?null:{parent:ai._currentValue,pool:Q},p.memoizedState={baseLanes:b,cachePool:Q},h!==null&&he(p,null),na(),MQ(p),h!==null&&am(h,p,E,!0),null}function cj(h,p){var b=p.ref;if(b===null)h!==null&&h.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(h===null||h.ref!==b)&&(p.flags|=4194816)}}function kB(h,p,b,E,Q){return ed(p),b=nu(h,p,b,E,void 0,Q),E=Wa(),h!==null&&!co?(hg(h,p,Q),B0(h,p,Q)):(Yn&&E&&cg(p),p.flags|=1,Oo(h,p,b,Q),p.child)}function eV(h,p,b,E,Q,ee){return ed(p),p.updateQueue=null,b=j0(p,E,b,Q),ch(h),E=Wa(),h!==null&&!co?(hg(h,p,ee),B0(h,p,ee)):(Yn&&E&&cg(p),p.flags|=1,Oo(h,p,b,ee),p.child)}function tV(h,p,b,E,Q){if(ed(p),p.stateNode===null){var ee=ki,be=b.contextType;typeof be=="object"&&be!==null&&(ee=ni(be)),ee=new b(E,ee),p.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,ee.updater=EB,p.stateNode=ee,ee._reactInternals=p,ee=p.stateNode,ee.props=E,ee.state=p.memoizedState,ee.refs={},at(p),be=b.contextType,ee.context=typeof be=="object"&&be!==null?ni(be):ki,ee.state=p.memoizedState,be=b.getDerivedStateFromProps,typeof be=="function"&&(CB(p,b,be,E),ee.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof ee.getSnapshotBeforeUpdate=="function"||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(be=ee.state,typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount(),be!==ee.state&&EB.enqueueReplaceState(ee,ee.state,null),cr(p,E,ee,Q),Br(),ee.state=p.memoizedState),typeof ee.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(h===null){ee=p.stateNode;var Fe=p.memoizedProps,Ye=Ng(b,Fe);ee.props=Ye;var wt=ee.context,Ht=b.contextType;be=ki,typeof Ht=="object"&&Ht!==null&&(be=ni(Ht));var Gt=b.getDerivedStateFromProps;Ht=typeof Gt=="function"||typeof ee.getSnapshotBeforeUpdate=="function",Fe=p.pendingProps!==Fe,Ht||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(Fe||wt!==be)&&HQ(p,ee,E,be),kt=!1;var Et=p.memoizedState;ee.state=Et,cr(p,E,ee,Q),Br(),wt=p.memoizedState,Fe||Et!==wt||kt?(typeof Gt=="function"&&(CB(p,b,Gt,E),wt=p.memoizedState),(Ye=kt||UQ(p,b,Ye,E,Et,wt,be))?(Ht||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=wt),ee.props=E,ee.state=wt,ee.context=be,E=Ye):(typeof ee.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{ee=p.stateNode,it(h,p),be=p.memoizedProps,Ht=Ng(b,be),ee.props=Ht,Gt=p.pendingProps,Et=ee.context,wt=b.contextType,Ye=ki,typeof wt=="object"&&wt!==null&&(Ye=ni(wt)),Fe=b.getDerivedStateFromProps,(wt=typeof Fe=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(be!==Gt||Et!==Ye)&&HQ(p,ee,E,Ye),kt=!1,Et=p.memoizedState,ee.state=Et,cr(p,E,ee,Q),Br();var jt=p.memoizedState;be!==Gt||Et!==jt||kt||h!==null&&h.dependencies!==null&&Cv(h.dependencies)?(typeof Fe=="function"&&(CB(p,b,Fe,E),jt=p.memoizedState),(Ht=kt||UQ(p,b,Ht,E,Et,jt,Ye)||h!==null&&h.dependencies!==null&&Cv(h.dependencies))?(wt||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(E,jt,Ye),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(E,jt,Ye)),typeof ee.componentDidUpdate=="function"&&(p.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ee.componentDidUpdate!="function"||be===h.memoizedProps&&Et===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||be===h.memoizedProps&&Et===h.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=jt),ee.props=E,ee.state=jt,ee.context=Ye,E=Ht):(typeof ee.componentDidUpdate!="function"||be===h.memoizedProps&&Et===h.memoizedState||(p.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||be===h.memoizedProps&&Et===h.memoizedState||(p.flags|=1024),E=!1)}return ee=E,cj(h,p),E=(p.flags&128)!==0,ee||E?(ee=p.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:ee.render(),p.flags|=1,h!==null&&E?(p.child=Dv(p,h.child,null,Q),p.child=Dv(p,null,b,Q)):Oo(h,p,b,Q),p.memoizedState=ee.state,h=p.child):h=B0(h,p,Q),h}function rV(h,p,b,E){return Kl(),p.flags|=256,Oo(h,p,b,E),p.child}var SB={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _B(h){return{baseLanes:h,cachePool:Ne()}}function TB(h,p,b){return h=h!==null?h.childLanes&~b:0,p&&(h|=nd),h}function nV(h,p,b){var E=p.pendingProps,Q=!1,ee=(p.flags&128)!==0,be;if((be=ee)||(be=h!==null&&h.memoizedState===null?!1:(zi.current&2)!==0),be&&(Q=!0,p.flags&=-129),be=(p.flags&32)!==0,p.flags&=-33,h===null){if(Yn){if(Q?um(p):dm(),Yn){var Fe=ms,Ye;if(Ye=Fe){e:{for(Ye=Fe,Fe=Yu;Ye.nodeType!==8;){if(!Fe){Fe=null;break e}if(Ye=of(Ye.nextSibling),Ye===null){Fe=null;break e}}Fe=Ye}Fe!==null?(p.memoizedState={dehydrated:Fe,treeContext:w0!==null?{id:Xd,overflow:Yd}:null,retryLane:536870912,hydrationErrors:null},Ye=lo(18,null,null,0),Ye.stateNode=Fe,Ye.return=p,p.child=Ye,ri=p,ms=null,Ye=!0):Ye=!1}Ye||C0(p)}if(Fe=p.memoizedState,Fe!==null&&(Fe=Fe.dehydrated,Fe!==null))return hI(Fe)?p.lanes=32:p.lanes=536870912,null;T0(p)}return Fe=E.children,E=E.fallback,Q?(dm(),Q=p.mode,Fe=uj({mode:"hidden",children:Fe},Q),E=Kd(E,Q,b,null),Fe.return=p,E.return=p,Fe.sibling=E,p.child=Fe,Q=p.child,Q.memoizedState=_B(b),Q.childLanes=TB(h,be,b),p.memoizedState=SB,E):(um(p),BB(p,Fe))}if(Ye=h.memoizedState,Ye!==null&&(Fe=Ye.dehydrated,Fe!==null)){if(ee)p.flags&256?(um(p),p.flags&=-257,p=IB(h,p,b)):p.memoizedState!==null?(dm(),p.child=h.child,p.flags|=128,p=null):(dm(),Q=E.fallback,Fe=p.mode,E=uj({mode:"visible",children:E.children},Fe),Q=Kd(Q,Fe,b,null),Q.flags|=2,E.return=p,Q.return=p,E.sibling=Q,p.child=E,Dv(p,h.child,null,b),E=p.child,E.memoizedState=_B(b),E.childLanes=TB(h,be,b),p.memoizedState=SB,p=Q);else if(um(p),hI(Fe)){if(be=Fe.nextSibling&&Fe.nextSibling.dataset,be)var wt=be.dgst;be=wt,E=Error(n(419)),E.stack="",E.digest=be,nm({value:E,source:null,stack:null}),p=IB(h,p,b)}else if(co||am(h,p,b,!1),be=(b&h.childLanes)!==0,co||be){if(be=Xa,be!==null&&(E=b&-b,E=(E&42)!==0?1:Sr(E),E=(E&(be.suspendedLanes|b))!==0?0:E,E!==0&&E!==Ye.retryLane))throw Ye.retryLane=E,qd(h,E),cu(be,h,E),KQ;Fe.data==="$?"||XB(),p=IB(h,p,b)}else Fe.data==="$?"?(p.flags|=192,p.child=h.child,p=null):(h=Ye.treeContext,ms=of(Fe.nextSibling),ri=p,Yn=!0,ih=null,Yu=!1,h!==null&&(vc[ql++]=Xd,vc[ql++]=Yd,vc[ql++]=w0,Xd=h.id,Yd=h.overflow,w0=p),p=BB(p,E.children),p.flags|=4096);return p}return Q?(dm(),Q=E.fallback,Fe=p.mode,Ye=h.child,wt=Ye.sibling,E=Xu(Ye,{mode:"hidden",children:E.children}),E.subtreeFlags=Ye.subtreeFlags&65011712,wt!==null?Q=Xu(wt,Q):(Q=Kd(Q,Fe,b,null),Q.flags|=2),Q.return=p,E.return=p,E.sibling=Q,p.child=E,E=Q,Q=p.child,Fe=h.child.memoizedState,Fe===null?Fe=_B(b):(Ye=Fe.cachePool,Ye!==null?(wt=ai._currentValue,Ye=Ye.parent!==wt?{parent:wt,pool:wt}:Ye):Ye=Ne(),Fe={baseLanes:Fe.baseLanes|b,cachePool:Ye}),Q.memoizedState=Fe,Q.childLanes=TB(h,be,b),p.memoizedState=SB,E):(um(p),b=h.child,h=b.sibling,b=Xu(b,{mode:"visible",children:E.children}),b.return=p,b.sibling=null,h!==null&&(be=p.deletions,be===null?(p.deletions=[h],p.flags|=16):be.push(h)),p.child=b,p.memoizedState=null,b)}function BB(h,p){return p=uj({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function uj(h,p){return h=lo(22,h,null,p),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function IB(h,p,b){return Dv(p,h.child,null,b),h=BB(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function aV(h,p,b){h.lanes|=p;var E=h.alternate;E!==null&&(E.lanes|=p),wv(h.return,p,b)}function DB(h,p,b,E,Q){var ee=h.memoizedState;ee===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:Q}:(ee.isBackwards=p,ee.rendering=null,ee.renderingStartTime=0,ee.last=E,ee.tail=b,ee.tailMode=Q)}function sV(h,p,b){var E=p.pendingProps,Q=E.revealOrder,ee=E.tail;if(Oo(h,p,E.children,b),E=zi.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&aV(h,b,p);else if(h.tag===19)aV(h,b,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}switch(O(zi,E),Q){case"forwards":for(b=p.child,Q=null;b!==null;)h=b.alternate,h!==null&&ij(h)===null&&(Q=b),b=b.sibling;b=Q,b===null?(Q=p.child,p.child=null):(Q=b.sibling,b.sibling=null),DB(p,!1,Q,b,ee);break;case"backwards":for(b=null,Q=p.child,p.child=null;Q!==null;){if(h=Q.alternate,h!==null&&ij(h)===null){p.child=Q;break}h=Q.sibling,Q.sibling=b,b=Q,Q=h}DB(p,!0,b,null,ee);break;case"together":DB(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function B0(h,p,b){if(h!==null&&(p.dependencies=h.dependencies),pm|=p.lanes,(b&p.childLanes)===0)if(h!==null){if(am(h,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(n(153));if(p.child!==null){for(h=p.child,b=Xu(h,h.pendingProps),p.child=b,b.return=p;h.sibling!==null;)h=h.sibling,b=b.sibling=Xu(h,h.pendingProps),b.return=p;b.sibling=null}return p.child}function OB(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&Cv(h)))}function Gbe(h,p,b){switch(p.tag){case 3:re(p,p.stateNode.containerInfo),oh(p,ai,h.memoizedState.cache),Kl();break;case 27:case 5:le(p);break;case 4:re(p,p.stateNode.containerInfo);break;case 10:oh(p,p.type,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(um(p),p.flags|=128,null):(b&p.child.childLanes)!==0?nV(h,p,b):(um(p),h=B0(h,p,b),h!==null?h.sibling:null);um(p);break;case 19:var Q=(h.flags&128)!==0;if(E=(b&p.childLanes)!==0,E||(am(h,p,b,!1),E=(b&p.childLanes)!==0),Q){if(E)return sV(h,p,b);p.flags|=128}if(Q=p.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),O(zi,zi.current),E)break;return null;case 22:case 23:return p.lanes=0,JQ(h,p,b);case 24:oh(p,ai,h.memoizedState.cache)}return B0(h,p,b)}function iV(h,p,b){if(h!==null)if(h.memoizedProps!==p.pendingProps)co=!0;else{if(!OB(h,b)&&(p.flags&128)===0)return co=!1,Gbe(h,p,b);co=(h.flags&131072)!==0}else co=!1,Yn&&(p.flags&1048576)!==0&&UE(p,yv,p.index);switch(p.lanes=0,p.tag){case 16:e:{h=p.pendingProps;var E=p.elementType,Q=E._init;if(E=Q(E._payload),p.type=E,typeof E=="function")tm(E)?(h=Ng(E,h),p.tag=1,p=tV(null,p,E,h,b)):(p.tag=0,p=kB(null,p,E,h,b));else{if(E!=null){if(Q=E.$$typeof,Q===_){p.tag=11,p=WQ(null,p,E,h,b);break e}else if(Q===T){p.tag=14,p=XQ(null,p,E,h,b);break e}}throw p=U(E)||E,Error(n(306,p,""))}}return p;case 0:return kB(h,p,p.type,p.pendingProps,b);case 1:return E=p.type,Q=Ng(E,p.pendingProps),tV(h,p,E,Q,b);case 3:e:{if(re(p,p.stateNode.containerInfo),h===null)throw Error(n(387));E=p.pendingProps;var ee=p.memoizedState;Q=ee.element,it(h,p),cr(p,E,null,b);var be=p.memoizedState;if(E=be.cache,oh(p,ai,E),E!==ee.cache&&Nv(p,[ai],b,!0),Br(),E=be.element,ee.isDehydrated)if(ee={element:E,isDehydrated:!1,cache:be.cache},p.updateQueue.baseState=ee,p.memoizedState=ee,p.flags&256){p=rV(h,p,E,b);break e}else if(E!==Q){Q=Nn(Error(n(424)),p),nm(Q),p=rV(h,p,E,b);break e}else{switch(h=p.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(ms=of(h.firstChild),ri=p,Yn=!0,ih=null,Yu=!0,b=LQ(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Kl(),E===Q){p=B0(h,p,b);break e}Oo(h,p,E,b)}p=p.child}return p;case 26:return cj(h,p),h===null?(b=u$(p.type,null,p.pendingProps,null))?p.memoizedState=b:Yn||(b=p.type,h=p.pendingProps,E=Cj(ce.current).createElement(b),E[fn]=p,E[$r]=h,Fo(E,b,h),Ue(E),p.stateNode=E):p.memoizedState=u$(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:return le(p),h===null&&Yn&&(E=p.stateNode=o$(p.type,p.pendingProps,ce.current),ri=p,Yu=!0,Q=ms,bm(p.type)?(AI=Q,ms=of(E.firstChild)):ms=Q),Oo(h,p,p.pendingProps.children,b),cj(h,p),h===null&&(p.flags|=4194304),p.child;case 5:return h===null&&Yn&&((Q=E=ms)&&(E=b1e(E,p.type,p.pendingProps,Yu),E!==null?(p.stateNode=E,ri=p,ms=of(E.firstChild),Yu=!1,Q=!0):Q=!1),Q||C0(p)),le(p),Q=p.type,ee=p.pendingProps,be=h!==null?h.memoizedProps:null,E=ee.children,uI(Q,ee)?E=null:be!==null&&uI(Q,be)&&(p.flags|=32),p.memoizedState!==null&&(Q=nu(h,p,uh,null,null,b),_w._currentValue=Q),cj(h,p),Oo(h,p,E,b),p.child;case 6:return h===null&&Yn&&((h=b=ms)&&(b=y1e(b,p.pendingProps,Yu),b!==null?(p.stateNode=b,ri=p,ms=null,h=!0):h=!1),h||C0(p)),null;case 13:return nV(h,p,b);case 4:return re(p,p.stateNode.containerInfo),E=p.pendingProps,h===null?p.child=Dv(p,null,E,b):Oo(h,p,E,b),p.child;case 11:return WQ(h,p,p.type,p.pendingProps,b);case 7:return Oo(h,p,p.pendingProps,b),p.child;case 8:return Oo(h,p,p.pendingProps.children,b),p.child;case 12:return Oo(h,p,p.pendingProps.children,b),p.child;case 10:return E=p.pendingProps,oh(p,p.type,E.value),Oo(h,p,E.children,b),p.child;case 9:return Q=p.type._context,E=p.pendingProps.children,ed(p),Q=ni(Q),E=E(Q),p.flags|=1,Oo(h,p,E,b),p.child;case 14:return XQ(h,p,p.type,p.pendingProps,b);case 15:return YQ(h,p,p.type,p.pendingProps,b);case 19:return sV(h,p,b);case 31:return E=p.pendingProps,b=p.mode,E={mode:E.mode,children:E.children},h===null?(b=uj(E,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=Xu(h.child,E),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return JQ(h,p,b);case 24:return ed(p),E=ni(ai),h===null?(Q=ae(),Q===null&&(Q=Xa,ee=Jy(),Q.pooledCache=ee,ee.refCount++,ee!==null&&(Q.pooledCacheLanes|=b),Q=ee),p.memoizedState={parent:E,cache:Q},at(p),oh(p,ai,Q)):((h.lanes&b)!==0&&(it(h,p),cr(p,null,null,b),Br()),Q=h.memoizedState,ee=p.memoizedState,Q.parent!==E?(Q={parent:E,cache:E},p.memoizedState=Q,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=Q),oh(p,ai,E)):(E=ee.cache,oh(p,ai,E),E!==Q.cache&&Nv(p,[ai],b,!0))),Oo(h,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function I0(h){h.flags|=4}function oV(h,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!m$(p)){if(p=rd.current,p!==null&&((qn&4194048)===qn?hh!==null:(qn&62914560)!==qn&&(qn&536870912)===0||p!==hh))throw gt=Le,_e;h.flags|=8192}}function dj(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?ot():536870912,h.lanes|=p,Rv|=p)}function Aw(h,p){if(!Yn)switch(h.tailMode){case"hidden":p=h.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function js(h){var p=h.alternate!==null&&h.alternate.child===h.child,b=0,E=0;if(p)for(var Q=h.child;Q!==null;)b|=Q.lanes|Q.childLanes,E|=Q.subtreeFlags&65011712,E|=Q.flags&65011712,Q.return=h,Q=Q.sibling;else for(Q=h.child;Q!==null;)b|=Q.lanes|Q.childLanes,E|=Q.subtreeFlags,E|=Q.flags,Q.return=h,Q=Q.sibling;return h.subtreeFlags|=E,h.childLanes=b,p}function qbe(h,p,b){var E=p.pendingProps;switch(ug(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return js(p),null;case 1:return js(p),null;case 3:return b=p.stateNode,E=null,h!==null&&(E=h.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),Zu(ai),ue(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(Io(p)?I0(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,QE())),js(p),null;case 26:return b=p.memoizedState,h===null?(I0(p),b!==null?(js(p),oV(p,b)):(js(p),p.flags&=-16777217)):b?b!==h.memoizedState?(I0(p),js(p),oV(p,b)):(js(p),p.flags&=-16777217):(h.memoizedProps!==E&&I0(p),js(p),p.flags&=-16777217),null;case 27:ve(p),b=ce.current;var Q=p.type;if(h!==null&&p.stateNode!=null)h.memoizedProps!==E&&I0(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return js(p),null}h=K.current,Io(p)?HE(p):(h=o$(Q,E,b),p.stateNode=h,I0(p))}return js(p),null;case 5:if(ve(p),b=p.type,h!==null&&p.stateNode!=null)h.memoizedProps!==E&&I0(p);else{if(!E){if(p.stateNode===null)throw Error(n(166));return js(p),null}if(h=K.current,Io(p))HE(p);else{switch(Q=Cj(ce.current),h){case 1:h=Q.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:h=Q.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":h=Q.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":h=Q.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":h=Q.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof E.is=="string"?Q.createElement("select",{is:E.is}):Q.createElement("select"),E.multiple?h.multiple=!0:E.size&&(h.size=E.size);break;default:h=typeof E.is=="string"?Q.createElement(b,{is:E.is}):Q.createElement(b)}}h[fn]=p,h[$r]=E;e:for(Q=p.child;Q!==null;){if(Q.tag===5||Q.tag===6)h.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===p)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===p)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}p.stateNode=h;e:switch(Fo(h,b,E),b){case"button":case"input":case"select":case"textarea":h=!!E.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&I0(p)}}return js(p),p.flags&=-16777217,null;case 6:if(h&&p.stateNode!=null)h.memoizedProps!==E&&I0(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(n(166));if(h=ce.current,Io(p)){if(h=p.stateNode,b=p.memoizedProps,E=null,Q=ri,Q!==null)switch(Q.tag){case 27:case 5:E=Q.memoizedProps}h[fn]=p,h=!!(h.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||e$(h.nodeValue,b)),h||C0(p)}else h=Cj(h).createTextNode(E),h[fn]=p,p.stateNode=h}return js(p),null;case 13:if(E=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Q=Io(p),E!==null&&E.dehydrated!==null){if(h===null){if(!Q)throw Error(n(318));if(Q=p.memoizedState,Q=Q!==null?Q.dehydrated:null,!Q)throw Error(n(317));Q[fn]=p}else Kl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;js(p),Q=!1}else Q=QE(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=Q),Q=!0;if(!Q)return p.flags&256?(T0(p),p):(T0(p),null)}if(T0(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=E!==null,h=h!==null&&h.memoizedState!==null,b){E=p.child,Q=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(Q=E.alternate.memoizedState.cachePool.pool);var ee=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(ee=E.memoizedState.cachePool.pool),ee!==Q&&(E.flags|=2048)}return b!==h&&b&&(p.child.flags|=8192),dj(p,p.updateQueue),js(p),null;case 4:return ue(),h===null&&sI(p.stateNode.containerInfo),js(p),null;case 10:return Zu(p.type),js(p),null;case 19:if(R(zi),Q=p.memoizedState,Q===null)return js(p),null;if(E=(p.flags&128)!==0,ee=Q.rendering,ee===null)if(E)Aw(Q,!1);else{if(Us!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(ee=ij(h),ee!==null){for(p.flags|=128,Aw(Q,!1),h=ee.updateQueue,p.updateQueue=h,dj(p,h),p.subtreeFlags=0,h=b,b=p.child;b!==null;)og(b,h),b=b.sibling;return O(zi,zi.current&1|2),p.child}h=h.sibling}Q.tail!==null&&ye()>Aj&&(p.flags|=128,E=!0,Aw(Q,!1),p.lanes=4194304)}else{if(!E)if(h=ij(ee),h!==null){if(p.flags|=128,E=!0,h=h.updateQueue,p.updateQueue=h,dj(p,h),Aw(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!ee.alternate&&!Yn)return js(p),null}else 2*ye()-Q.renderingStartTime>Aj&&b!==536870912&&(p.flags|=128,E=!0,Aw(Q,!1),p.lanes=4194304);Q.isBackwards?(ee.sibling=p.child,p.child=ee):(h=Q.last,h!==null?h.sibling=ee:p.child=ee,Q.last=ee)}return Q.tail!==null?(p=Q.tail,Q.rendering=p,Q.tail=p.sibling,Q.renderingStartTime=ye(),p.sibling=null,h=zi.current,O(zi,E?h&1|2:h&1),p):(js(p),null);case 22:case 23:return T0(p),an(),E=p.memoizedState!==null,h!==null?h.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(b&536870912)!==0&&(p.flags&128)===0&&(js(p),p.subtreeFlags&6&&(p.flags|=8192)):js(p),b=p.updateQueue,b!==null&&dj(p,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048),h!==null&&R(G),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Zu(ai),js(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function Kbe(h,p){switch(ug(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Zu(ai),ue(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return ve(p),null;case 13:if(T0(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(n(340));Kl()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return R(zi),null;case 4:return ue(),null;case 10:return Zu(p.type),null;case 22:case 23:return T0(p),an(),h!==null&&R(G),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return Zu(ai),null;case 25:return null;default:return null}}function lV(h,p){switch(ug(p),p.tag){case 3:Zu(ai),ue();break;case 26:case 27:case 5:ve(p);break;case 4:ue();break;case 13:T0(p);break;case 19:R(zi);break;case 10:Zu(p.type);break;case 22:case 23:T0(p),an(),h!==null&&R(G);break;case 24:Zu(ai)}}function mw(h,p){try{var b=p.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var Q=E.next;b=Q;do{if((b.tag&h)===h){E=void 0;var ee=b.create,be=b.inst;E=ee(),be.destroy=E}b=b.next}while(b!==Q)}}catch(Fe){Ha(p,p.return,Fe)}}function fm(h,p,b){try{var E=p.updateQueue,Q=E!==null?E.lastEffect:null;if(Q!==null){var ee=Q.next;E=ee;do{if((E.tag&h)===h){var be=E.inst,Fe=be.destroy;if(Fe!==void 0){be.destroy=void 0,Q=p;var Ye=b,wt=Fe;try{wt()}catch(Ht){Ha(Q,Ye,Ht)}}}E=E.next}while(E!==ee)}}catch(Ht){Ha(p,p.return,Ht)}}function cV(h){var p=h.updateQueue;if(p!==null){var b=h.stateNode;try{ra(p,b)}catch(E){Ha(h,h.return,E)}}}function uV(h,p,b){b.props=Ng(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(E){Ha(h,p,E)}}function pw(h,p){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var E=h.stateNode;break;case 30:E=h.stateNode;break;default:E=h.stateNode}typeof b=="function"?h.refCleanup=b(E):b.current=E}}catch(Q){Ha(h,p,Q)}}function Ah(h,p){var b=h.ref,E=h.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(Q){Ha(h,p,Q)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(Q){Ha(h,p,Q)}else b.current=null}function dV(h){var p=h.type,b=h.memoizedProps,E=h.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(Q){Ha(h,h.return,Q)}}function PB(h,p,b){try{var E=h.stateNode;m1e(E,h.type,b,p),E[$r]=p}catch(Q){Ha(h,h.return,Q)}}function fV(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&bm(h.type)||h.tag===4}function FB(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||fV(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&bm(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function RB(h,p,b){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(h,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(h),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=Nj));else if(E!==4&&(E===27&&bm(h.type)&&(b=h.stateNode,p=null),h=h.child,h!==null))for(RB(h,p,b),h=h.sibling;h!==null;)RB(h,p,b),h=h.sibling}function fj(h,p,b){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?b.insertBefore(h,p):b.appendChild(h);else if(E!==4&&(E===27&&bm(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(fj(h,p,b),h=h.sibling;h!==null;)fj(h,p,b),h=h.sibling}function hV(h){var p=h.stateNode,b=h.memoizedProps;try{for(var E=h.type,Q=p.attributes;Q.length;)p.removeAttributeNode(Q[0]);Fo(p,E,b),p[fn]=h,p[$r]=b}catch(ee){Ha(h,h.return,ee)}}var D0=!1,ii=!1,LB=!1,AV=typeof WeakSet=="function"?WeakSet:Set,uo=null;function Wbe(h,p){if(h=h.containerInfo,lI=Tj,h=Bo(h),$i(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var Q=E.anchorOffset,ee=E.focusNode;E=E.focusOffset;try{b.nodeType,ee.nodeType}catch{b=null;break e}var be=0,Fe=-1,Ye=-1,wt=0,Ht=0,Gt=h,Et=null;t:for(;;){for(var jt;Gt!==b||Q!==0&&Gt.nodeType!==3||(Fe=be+Q),Gt!==ee||E!==0&&Gt.nodeType!==3||(Ye=be+E),Gt.nodeType===3&&(be+=Gt.nodeValue.length),(jt=Gt.firstChild)!==null;)Et=Gt,Gt=jt;for(;;){if(Gt===h)break t;if(Et===b&&++wt===Q&&(Fe=be),Et===ee&&++Ht===E&&(Ye=be),(jt=Gt.nextSibling)!==null)break;Gt=Et,Et=Gt.parentNode}Gt=jt}b=Fe===-1||Ye===-1?null:{start:Fe,end:Ye}}else b=null}b=b||{start:0,end:0}}else b=null;for(cI={focusedElem:h,selectionRange:b},Tj=!1,uo=p;uo!==null;)if(p=uo,h=p.child,(p.subtreeFlags&1024)!==0&&h!==null)h.return=p,uo=h;else for(;uo!==null;){switch(p=uo,ee=p.alternate,h=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&ee!==null){h=void 0,b=p,Q=ee.memoizedProps,ee=ee.memoizedState,E=b.stateNode;try{var en=Ng(b.type,Q,b.elementType===b.type);h=E.getSnapshotBeforeUpdate(en,ee),E.__reactInternalSnapshotBeforeUpdate=h}catch(Vr){Ha(b,b.return,Vr)}}break;case 3:if((h&1024)!==0){if(h=p.stateNode.containerInfo,b=h.nodeType,b===9)fI(h);else if(b===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":fI(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(n(163))}if(h=p.sibling,h!==null){h.return=p.return,uo=h;break}uo=p.return}}function mV(h,p,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:hm(h,b),E&4&&mw(5,b);break;case 1:if(hm(h,b),E&4)if(h=b.stateNode,p===null)try{h.componentDidMount()}catch(be){Ha(b,b.return,be)}else{var Q=Ng(b.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(Q,p,h.__reactInternalSnapshotBeforeUpdate)}catch(be){Ha(b,b.return,be)}}E&64&&cV(b),E&512&&pw(b,b.return);break;case 3:if(hm(h,b),E&64&&(h=b.updateQueue,h!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{ra(h,p)}catch(be){Ha(b,b.return,be)}}break;case 27:p===null&&E&4&&hV(b);case 26:case 5:hm(h,b),p===null&&E&4&&dV(b),E&512&&pw(b,b.return);break;case 12:hm(h,b);break;case 13:hm(h,b),E&4&&xV(h,b),E&64&&(h=b.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(b=a1e.bind(null,b),w1e(h,b))));break;case 22:if(E=b.memoizedState!==null||D0,!E){p=p!==null&&p.memoizedState!==null||ii,Q=D0;var ee=ii;D0=E,(ii=p)&&!ee?Am(h,b,(b.subtreeFlags&8772)!==0):hm(h,b),D0=Q,ii=ee}break;case 30:break;default:hm(h,b)}}function pV(h){var p=h.alternate;p!==null&&(h.alternate=null,pV(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Me(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var ps=null,yc=!1;function O0(h,p,b){for(b=b.child;b!==null;)gV(h,p,b),b=b.sibling}function gV(h,p,b){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Xe,b)}catch{}switch(b.tag){case 26:ii||Ah(b,p),O0(h,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:ii||Ah(b,p);var E=ps,Q=yc;bm(b.type)&&(ps=b.stateNode,yc=!1),O0(h,p,b),Ew(b.stateNode),ps=E,yc=Q;break;case 5:ii||Ah(b,p);case 6:if(E=ps,Q=yc,ps=null,O0(h,p,b),ps=E,yc=Q,ps!==null)if(yc)try{(ps.nodeType===9?ps.body:ps.nodeName==="HTML"?ps.ownerDocument.body:ps).removeChild(b.stateNode)}catch(ee){Ha(b,p,ee)}else try{ps.removeChild(b.stateNode)}catch(ee){Ha(b,p,ee)}break;case 18:ps!==null&&(yc?(h=ps,s$(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,b.stateNode),Dw(h)):s$(ps,b.stateNode));break;case 4:E=ps,Q=yc,ps=b.stateNode.containerInfo,yc=!0,O0(h,p,b),ps=E,yc=Q;break;case 0:case 11:case 14:case 15:ii||fm(2,b,p),ii||fm(4,b,p),O0(h,p,b);break;case 1:ii||(Ah(b,p),E=b.stateNode,typeof E.componentWillUnmount=="function"&&uV(b,p,E)),O0(h,p,b);break;case 21:O0(h,p,b);break;case 22:ii=(E=ii)||b.memoizedState!==null,O0(h,p,b),ii=E;break;default:O0(h,p,b)}}function xV(h,p){if(p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Dw(h)}catch(b){Ha(p,p.return,b)}}function Xbe(h){switch(h.tag){case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new AV),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new AV),p;default:throw Error(n(435,h.tag))}}function MB(h,p){var b=Xbe(h);p.forEach(function(E){var Q=s1e.bind(null,h,E);b.has(E)||(b.add(E),E.then(Q,Q))})}function su(h,p){var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var Q=b[E],ee=h,be=p,Fe=be;e:for(;Fe!==null;){switch(Fe.tag){case 27:if(bm(Fe.type)){ps=Fe.stateNode,yc=!1;break e}break;case 5:ps=Fe.stateNode,yc=!1;break e;case 3:case 4:ps=Fe.stateNode.containerInfo,yc=!0;break e}Fe=Fe.return}if(ps===null)throw Error(n(160));gV(ee,be,Q),ps=null,yc=!1,ee=Q.alternate,ee!==null&&(ee.return=null),Q.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)vV(p,h),p=p.sibling}var sf=null;function vV(h,p){var b=h.alternate,E=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:su(p,h),iu(h),E&4&&(fm(3,h,h.return),mw(3,h),fm(5,h,h.return));break;case 1:su(p,h),iu(h),E&512&&(ii||b===null||Ah(b,b.return)),E&64&&D0&&(h=h.updateQueue,h!==null&&(E=h.callbacks,E!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var Q=sf;if(su(p,h),iu(h),E&512&&(ii||b===null||Ah(b,b.return)),E&4){var ee=b!==null?b.memoizedState:null;if(E=h.memoizedState,b===null)if(E===null)if(h.stateNode===null){e:{E=h.type,b=h.memoizedProps,Q=Q.ownerDocument||Q;t:switch(E){case"title":ee=Q.getElementsByTagName("title")[0],(!ee||ee[Re]||ee[fn]||ee.namespaceURI==="http://www.w3.org/2000/svg"||ee.hasAttribute("itemprop"))&&(ee=Q.createElement(E),Q.head.insertBefore(ee,Q.querySelector("head > title"))),Fo(ee,E,b),ee[fn]=h,Ue(ee),E=ee;break e;case"link":var be=h$("link","href",Q).get(E+(b.href||""));if(be){for(var Fe=0;Fe<be.length;Fe++)if(ee=be[Fe],ee.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&ee.getAttribute("rel")===(b.rel==null?null:b.rel)&&ee.getAttribute("title")===(b.title==null?null:b.title)&&ee.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){be.splice(Fe,1);break t}}ee=Q.createElement(E),Fo(ee,E,b),Q.head.appendChild(ee);break;case"meta":if(be=h$("meta","content",Q).get(E+(b.content||""))){for(Fe=0;Fe<be.length;Fe++)if(ee=be[Fe],ee.getAttribute("content")===(b.content==null?null:""+b.content)&&ee.getAttribute("name")===(b.name==null?null:b.name)&&ee.getAttribute("property")===(b.property==null?null:b.property)&&ee.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&ee.getAttribute("charset")===(b.charSet==null?null:b.charSet)){be.splice(Fe,1);break t}}ee=Q.createElement(E),Fo(ee,E,b),Q.head.appendChild(ee);break;default:throw Error(n(468,E))}ee[fn]=h,Ue(ee),E=ee}h.stateNode=E}else A$(Q,h.type,h.stateNode);else h.stateNode=f$(Q,E,h.memoizedProps);else ee!==E?(ee===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):ee.count--,E===null?A$(Q,h.type,h.stateNode):f$(Q,E,h.memoizedProps)):E===null&&h.stateNode!==null&&PB(h,h.memoizedProps,b.memoizedProps)}break;case 27:su(p,h),iu(h),E&512&&(ii||b===null||Ah(b,b.return)),b!==null&&E&4&&PB(h,h.memoizedProps,b.memoizedProps);break;case 5:if(su(p,h),iu(h),E&512&&(ii||b===null||Ah(b,b.return)),h.flags&32){Q=h.stateNode;try{Qi(Q,"")}catch(jt){Ha(h,h.return,jt)}}E&4&&h.stateNode!=null&&(Q=h.memoizedProps,PB(h,Q,b!==null?b.memoizedProps:Q)),E&1024&&(LB=!0);break;case 6:if(su(p,h),iu(h),E&4){if(h.stateNode===null)throw Error(n(162));E=h.memoizedProps,b=h.stateNode;try{b.nodeValue=E}catch(jt){Ha(h,h.return,jt)}}break;case 3:if(kj=null,Q=sf,sf=Ej(p.containerInfo),su(p,h),sf=Q,iu(h),E&4&&b!==null&&b.memoizedState.isDehydrated)try{Dw(p.containerInfo)}catch(jt){Ha(h,h.return,jt)}LB&&(LB=!1,bV(h));break;case 4:E=sf,sf=Ej(h.stateNode.containerInfo),su(p,h),iu(h),sf=E;break;case 12:su(p,h),iu(h);break;case 13:su(p,h),iu(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(zB=ye()),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,MB(h,E)));break;case 22:Q=h.memoizedState!==null;var Ye=b!==null&&b.memoizedState!==null,wt=D0,Ht=ii;if(D0=wt||Q,ii=Ht||Ye,su(p,h),ii=Ht,D0=wt,iu(h),E&8192)e:for(p=h.stateNode,p._visibility=Q?p._visibility&-2:p._visibility|1,Q&&(b===null||Ye||D0||ii||Cg(h)),b=null,p=h;;){if(p.tag===5||p.tag===26){if(b===null){Ye=b=p;try{if(ee=Ye.stateNode,Q)be=ee.style,typeof be.setProperty=="function"?be.setProperty("display","none","important"):be.display="none";else{Fe=Ye.stateNode;var Gt=Ye.memoizedProps.style,Et=Gt!=null&&Gt.hasOwnProperty("display")?Gt.display:null;Fe.style.display=Et==null||typeof Et=="boolean"?"":(""+Et).trim()}}catch(jt){Ha(Ye,Ye.return,jt)}}}else if(p.tag===6){if(b===null){Ye=p;try{Ye.stateNode.nodeValue=Q?"":Ye.memoizedProps}catch(jt){Ha(Ye,Ye.return,jt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break e;for(;p.sibling===null;){if(p.return===null||p.return===h)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=h.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,MB(h,b))));break;case 19:su(p,h),iu(h),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,MB(h,E)));break;case 30:break;case 21:break;default:su(p,h),iu(h)}}function iu(h){var p=h.flags;if(p&2){try{for(var b,E=h.return;E!==null;){if(fV(E)){b=E;break}E=E.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var Q=b.stateNode,ee=FB(h);fj(h,ee,Q);break;case 5:var be=b.stateNode;b.flags&32&&(Qi(be,""),b.flags&=-33);var Fe=FB(h);fj(h,Fe,be);break;case 3:case 4:var Ye=b.stateNode.containerInfo,wt=FB(h);RB(h,wt,Ye);break;default:throw Error(n(161))}}catch(Ht){Ha(h,h.return,Ht)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function bV(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;bV(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),h=h.sibling}}function hm(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)mV(h,p.alternate,p),p=p.sibling}function Cg(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:fm(4,p,p.return),Cg(p);break;case 1:Ah(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&uV(p,p.return,b),Cg(p);break;case 27:Ew(p.stateNode);case 26:case 5:Ah(p,p.return),Cg(p);break;case 22:p.memoizedState===null&&Cg(p);break;case 30:Cg(p);break;default:Cg(p)}h=h.sibling}}function Am(h,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,Q=h,ee=p,be=ee.flags;switch(ee.tag){case 0:case 11:case 15:Am(Q,ee,b),mw(4,ee);break;case 1:if(Am(Q,ee,b),E=ee,Q=E.stateNode,typeof Q.componentDidMount=="function")try{Q.componentDidMount()}catch(wt){Ha(E,E.return,wt)}if(E=ee,Q=E.updateQueue,Q!==null){var Fe=E.stateNode;try{var Ye=Q.shared.hiddenCallbacks;if(Ye!==null)for(Q.shared.hiddenCallbacks=null,Q=0;Q<Ye.length;Q++)zn(Ye[Q],Fe)}catch(wt){Ha(E,E.return,wt)}}b&&be&64&&cV(ee),pw(ee,ee.return);break;case 27:hV(ee);case 26:case 5:Am(Q,ee,b),b&&E===null&&be&4&&dV(ee),pw(ee,ee.return);break;case 12:Am(Q,ee,b);break;case 13:Am(Q,ee,b),b&&be&4&&xV(Q,ee);break;case 22:ee.memoizedState===null&&Am(Q,ee,b),pw(ee,ee.return);break;case 30:break;default:Am(Q,ee,b)}p=p.sibling}}function UB(h,p){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&dg(b))}function HB(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&dg(h))}function mh(h,p,b,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)yV(h,p,b,E),p=p.sibling}function yV(h,p,b,E){var Q=p.flags;switch(p.tag){case 0:case 11:case 15:mh(h,p,b,E),Q&2048&&mw(9,p);break;case 1:mh(h,p,b,E);break;case 3:mh(h,p,b,E),Q&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&dg(h)));break;case 12:if(Q&2048){mh(h,p,b,E),h=p.stateNode;try{var ee=p.memoizedProps,be=ee.id,Fe=ee.onPostCommit;typeof Fe=="function"&&Fe(be,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Ye){Ha(p,p.return,Ye)}}else mh(h,p,b,E);break;case 13:mh(h,p,b,E);break;case 23:break;case 22:ee=p.stateNode,be=p.alternate,p.memoizedState!==null?ee._visibility&2?mh(h,p,b,E):gw(h,p):ee._visibility&2?mh(h,p,b,E):(ee._visibility|=2,Ov(h,p,b,E,(p.subtreeFlags&10256)!==0)),Q&2048&&UB(be,p);break;case 24:mh(h,p,b,E),Q&2048&&HB(p.alternate,p);break;default:mh(h,p,b,E)}}function Ov(h,p,b,E,Q){for(Q=Q&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var ee=h,be=p,Fe=b,Ye=E,wt=be.flags;switch(be.tag){case 0:case 11:case 15:Ov(ee,be,Fe,Ye,Q),mw(8,be);break;case 23:break;case 22:var Ht=be.stateNode;be.memoizedState!==null?Ht._visibility&2?Ov(ee,be,Fe,Ye,Q):gw(ee,be):(Ht._visibility|=2,Ov(ee,be,Fe,Ye,Q)),Q&&wt&2048&&UB(be.alternate,be);break;case 24:Ov(ee,be,Fe,Ye,Q),Q&&wt&2048&&HB(be.alternate,be);break;default:Ov(ee,be,Fe,Ye,Q)}p=p.sibling}}function gw(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=h,E=p,Q=E.flags;switch(E.tag){case 22:gw(b,E),Q&2048&&UB(E.alternate,E);break;case 24:gw(b,E),Q&2048&&HB(E.alternate,E);break;default:gw(b,E)}p=p.sibling}}var xw=8192;function Pv(h){if(h.subtreeFlags&xw)for(h=h.child;h!==null;)wV(h),h=h.sibling}function wV(h){switch(h.tag){case 26:Pv(h),h.flags&xw&&h.memoizedState!==null&&P1e(sf,h.memoizedState,h.memoizedProps);break;case 5:Pv(h);break;case 3:case 4:var p=sf;sf=Ej(h.stateNode.containerInfo),Pv(h),sf=p;break;case 22:h.memoizedState===null&&(p=h.alternate,p!==null&&p.memoizedState!==null?(p=xw,xw=16777216,Pv(h),xw=p):Pv(h));break;default:Pv(h)}}function NV(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function vw(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];uo=E,EV(E,h)}NV(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)CV(h),h=h.sibling}function CV(h){switch(h.tag){case 0:case 11:case 15:vw(h),h.flags&2048&&fm(9,h,h.return);break;case 3:vw(h);break;case 12:vw(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&2&&(h.return===null||h.return.tag!==13)?(p._visibility&=-3,hj(h)):vw(h);break;default:vw(h)}}function hj(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];uo=E,EV(E,h)}NV(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:fm(8,p,p.return),hj(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,hj(p));break;default:hj(p)}h=h.sibling}}function EV(h,p){for(;uo!==null;){var b=uo;switch(b.tag){case 0:case 11:case 15:fm(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:dg(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,uo=E;else e:for(b=h;uo!==null;){E=uo;var Q=E.sibling,ee=E.return;if(pV(E),E===b){uo=null;break e}if(Q!==null){Q.return=ee,uo=Q;break e}uo=ee}}}var Ybe={getCacheForType:function(h){var p=ni(ai),b=p.data.get(h);return b===void 0&&(b=h(),p.data.set(h,b)),b}},Jbe=typeof WeakMap=="function"?WeakMap:Map,Ca=0,Xa=null,Dn=null,qn=0,Ea=0,ou=null,mm=!1,Fv=!1,QB=!1,P0=0,Us=0,pm=0,Eg=0,VB=0,nd=0,Rv=0,bw=null,wc=null,$B=!1,zB=0,Aj=1/0,mj=null,gm=null,Po=0,xm=null,Lv=null,Mv=0,GB=0,qB=null,jV=null,yw=0,KB=null;function lu(){if((Ca&2)!==0&&qn!==0)return qn&-qn;if(H.T!==null){var h=E0;return h!==0?h:tI()}return Vn()}function kV(){nd===0&&(nd=(qn&536870912)===0||Yn?St():536870912);var h=rd.current;return h!==null&&(h.flags|=32),nd}function cu(h,p,b){(h===Xa&&(Ea===2||Ea===9)||h.cancelPendingCommit!==null)&&(Uv(h,0),vm(h,qn,nd,!1)),fr(h,b),((Ca&2)===0||h!==Xa)&&(h===Xa&&((Ca&2)===0&&(Eg|=b),Us===4&&vm(h,qn,nd,!1)),ph(h))}function SV(h,p,b){if((Ca&6)!==0)throw Error(n(327));var E=!b&&(p&124)===0&&(p&h.expiredLanes)===0||et(h,p),Q=E?t1e(h,p):YB(h,p,!0),ee=E;do{if(Q===0){Fv&&!E&&vm(h,p,0,!1);break}else{if(b=h.current.alternate,ee&&!Zbe(b)){Q=YB(h,p,!1),ee=!1;continue}if(Q===2){if(ee=p,h.errorRecoveryDisabledLanes&ee)var be=0;else be=h.pendingLanes&-536870913,be=be!==0?be:be&536870912?536870912:0;if(be!==0){p=be;e:{var Fe=h;Q=bw;var Ye=Fe.current.memoizedState.isDehydrated;if(Ye&&(Uv(Fe,be).flags|=256),be=YB(Fe,be,!1),be!==2){if(QB&&!Ye){Fe.errorRecoveryDisabledLanes|=ee,Eg|=ee,Q=4;break e}ee=wc,wc=Q,ee!==null&&(wc===null?wc=ee:wc.push.apply(wc,ee))}Q=be}if(ee=!1,Q!==2)continue}}if(Q===1){Uv(h,0),vm(h,p,0,!0);break}e:{switch(E=h,ee=Q,ee){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:vm(E,p,nd,!mm);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(Q=zB+300-ye(),10<Q)){if(vm(E,p,nd,!mm),vt(E,0,!0)!==0)break e;E.timeoutHandle=n$(_V.bind(null,E,b,wc,mj,$B,p,nd,Eg,Rv,mm,ee,2,-0,0),Q);break e}_V(E,b,wc,mj,$B,p,nd,Eg,Rv,mm,ee,0,-0,0)}}break}while(!0);ph(h)}function _V(h,p,b,E,Q,ee,be,Fe,Ye,wt,Ht,Gt,Et,jt){if(h.timeoutHandle=-1,Gt=p.subtreeFlags,(Gt&8192||(Gt&16785408)===16785408)&&(Sw={stylesheets:null,count:0,unsuspend:O1e},wV(p),Gt=F1e(),Gt!==null)){h.cancelPendingCommit=Gt(FV.bind(null,h,p,ee,b,E,Q,be,Fe,Ye,Ht,1,Et,jt)),vm(h,ee,be,!wt);return}FV(h,p,ee,b,E,Q,be,Fe,Ye)}function Zbe(h){for(var p=h;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var Q=b[E],ee=Q.getSnapshot;Q=Q.value;try{if(!ji(ee(),Q))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function vm(h,p,b,E){p&=~VB,p&=~Eg,h.suspendedLanes|=p,h.pingedLanes&=~p,E&&(h.warmLanes|=p),E=h.expirationTimes;for(var Q=p;0<Q;){var ee=31-Je(Q),be=1<<ee;E[ee]=-1,Q&=~be}b!==0&&Ft(h,b,p)}function pj(){return(Ca&6)===0?(ww(0),!1):!0}function WB(){if(Dn!==null){if(Ea===0)var h=Dn.return;else h=Dn,Zd=Si=null,jv(h),Iv=null,fw=0,h=Dn;for(;h!==null;)lV(h.alternate,h),h=h.return;Dn=null}}function Uv(h,p){var b=h.timeoutHandle;b!==-1&&(h.timeoutHandle=-1,g1e(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),WB(),Xa=h,Dn=b=Xu(h.current,null),qn=p,Ea=0,ou=null,mm=!1,Fv=et(h,p),QB=!1,Rv=nd=VB=Eg=pm=Us=0,wc=bw=null,$B=!1,(p&8)!==0&&(p|=p&32);var E=h.entangledLanes;if(E!==0)for(h=h.entanglements,E&=p;0<E;){var Q=31-Je(E),ee=1<<Q;p|=h[Q],E&=~ee}return P0=p,gc(),b}function TV(h,p){Lr=null,H.H=nj,p===Se||p===Oe?(p=ut(),Ea=3):p===_e?(p=ut(),Ea=4):Ea=p===KQ?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,ou=p,Dn===null&&(Us=1,lj(h,Nn(p,h.current)))}function BV(){var h=H.H;return H.H=nj,h===null?nj:h}function IV(){var h=H.A;return H.A=Ybe,h}function XB(){Us=4,mm||(qn&4194048)!==qn&&rd.current!==null||(Fv=!0),(pm&134217727)===0&&(Eg&134217727)===0||Xa===null||vm(Xa,qn,nd,!1)}function YB(h,p,b){var E=Ca;Ca|=2;var Q=BV(),ee=IV();(Xa!==h||qn!==p)&&(mj=null,Uv(h,p)),p=!1;var be=Us;e:do try{if(Ea!==0&&Dn!==null){var Fe=Dn,Ye=ou;switch(Ea){case 8:WB(),be=6;break e;case 3:case 2:case 9:case 6:rd.current===null&&(p=!0);var wt=Ea;if(Ea=0,ou=null,Hv(h,Fe,Ye,wt),b&&Fv){be=0;break e}break;default:wt=Ea,Ea=0,ou=null,Hv(h,Fe,Ye,wt)}}e1e(),be=Us;break}catch(Ht){TV(h,Ht)}while(!0);return p&&h.shellSuspendCounter++,Zd=Si=null,Ca=E,H.H=Q,H.A=ee,Dn===null&&(Xa=null,qn=0,gc()),be}function e1e(){for(;Dn!==null;)DV(Dn)}function t1e(h,p){var b=Ca;Ca|=2;var E=BV(),Q=IV();Xa!==h||qn!==p?(mj=null,Aj=ye()+500,Uv(h,p)):Fv=et(h,p);e:do try{if(Ea!==0&&Dn!==null){p=Dn;var ee=ou;t:switch(Ea){case 1:Ea=0,ou=null,Hv(h,p,ee,1);break;case 2:case 9:if(ze(ee)){Ea=0,ou=null,OV(p);break}p=function(){Ea!==2&&Ea!==9||Xa!==h||(Ea=7),ph(h)},ee.then(p,p);break e;case 3:Ea=7;break e;case 4:Ea=5;break e;case 7:ze(ee)?(Ea=0,ou=null,OV(p)):(Ea=0,ou=null,Hv(h,p,ee,7));break;case 5:var be=null;switch(Dn.tag){case 26:be=Dn.memoizedState;case 5:case 27:var Fe=Dn;if(!be||m$(be)){Ea=0,ou=null;var Ye=Fe.sibling;if(Ye!==null)Dn=Ye;else{var wt=Fe.return;wt!==null?(Dn=wt,gj(wt)):Dn=null}break t}}Ea=0,ou=null,Hv(h,p,ee,5);break;case 6:Ea=0,ou=null,Hv(h,p,ee,6);break;case 8:WB(),Us=6;break e;default:throw Error(n(462))}}r1e();break}catch(Ht){TV(h,Ht)}while(!0);return Zd=Si=null,H.H=E,H.A=Q,Ca=b,Dn!==null?0:(Xa=null,qn=0,gc(),Us)}function r1e(){for(;Dn!==null&&!je();)DV(Dn)}function DV(h){var p=iV(h.alternate,h,P0);h.memoizedProps=h.pendingProps,p===null?gj(h):Dn=p}function OV(h){var p=h,b=p.alternate;switch(p.tag){case 15:case 0:p=eV(b,p,p.pendingProps,p.type,void 0,qn);break;case 11:p=eV(b,p,p.pendingProps,p.type.render,p.ref,qn);break;case 5:jv(p);default:lV(b,p),p=Dn=og(p,P0),p=iV(b,p,P0)}h.memoizedProps=h.pendingProps,p===null?gj(h):Dn=p}function Hv(h,p,b,E){Zd=Si=null,jv(p),Iv=null,fw=0;var Q=p.return;try{if(zbe(h,Q,p,b,qn)){Us=1,lj(h,Nn(b,h.current)),Dn=null;return}}catch(ee){if(Q!==null)throw Dn=Q,ee;Us=1,lj(h,Nn(b,h.current)),Dn=null;return}p.flags&32768?(Yn||E===1?h=!0:Fv||(qn&536870912)!==0?h=!1:(mm=h=!0,(E===2||E===9||E===3||E===6)&&(E=rd.current,E!==null&&E.tag===13&&(E.flags|=16384))),PV(p,h)):gj(p)}function gj(h){var p=h;do{if((p.flags&32768)!==0){PV(p,mm);return}h=p.return;var b=qbe(p.alternate,p,P0);if(b!==null){Dn=b;return}if(p=p.sibling,p!==null){Dn=p;return}Dn=p=h}while(p!==null);Us===0&&(Us=5)}function PV(h,p){do{var b=Kbe(h.alternate,h);if(b!==null){b.flags&=32767,Dn=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(h=h.sibling,h!==null)){Dn=h;return}Dn=h=b}while(h!==null);Us=6,Dn=null}function FV(h,p,b,E,Q,ee,be,Fe,Ye){h.cancelPendingCommit=null;do xj();while(Po!==0);if((Ca&6)!==0)throw Error(n(327));if(p!==null){if(p===h.current)throw Error(n(177));if(ee=p.lanes|p.childLanes,ee|=Ns,Zt(h,b,ee,be,Fe,Ye),h===Xa&&(Dn=Xa=null,qn=0),Lv=p,xm=h,Mv=b,GB=ee,qB=Q,jV=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,i1e(de,function(){return HV(),null})):(h.callbackNode=null,h.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=H.T,H.T=null,Q=z.p,z.p=2,be=Ca,Ca|=4;try{Wbe(h,p,b)}finally{Ca=be,z.p=Q,H.T=E}}Po=1,RV(),LV(),MV()}}function RV(){if(Po===1){Po=0;var h=xm,p=Lv,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=H.T,H.T=null;var E=z.p;z.p=2;var Q=Ca;Ca|=4;try{vV(p,h);var ee=cI,be=Bo(h.containerInfo),Fe=ee.focusedElem,Ye=ee.selectionRange;if(be!==Fe&&Fe&&Fe.ownerDocument&&Yf(Fe.ownerDocument.documentElement,Fe)){if(Ye!==null&&$i(Fe)){var wt=Ye.start,Ht=Ye.end;if(Ht===void 0&&(Ht=wt),"selectionStart"in Fe)Fe.selectionStart=wt,Fe.selectionEnd=Math.min(Ht,Fe.value.length);else{var Gt=Fe.ownerDocument||document,Et=Gt&&Gt.defaultView||window;if(Et.getSelection){var jt=Et.getSelection(),en=Fe.textContent.length,Vr=Math.min(Ye.start,en),Ra=Ye.end===void 0?Vr:Math.min(Ye.end,en);!jt.extend&&Vr>Ra&&(be=Ra,Ra=Vr,Vr=be);var ht=zd(Fe,Vr),st=zd(Fe,Ra);if(ht&&st&&(jt.rangeCount!==1||jt.anchorNode!==ht.node||jt.anchorOffset!==ht.offset||jt.focusNode!==st.node||jt.focusOffset!==st.offset)){var xt=Gt.createRange();xt.setStart(ht.node,ht.offset),jt.removeAllRanges(),Vr>Ra?(jt.addRange(xt),jt.extend(st.node,st.offset)):(xt.setEnd(st.node,st.offset),jt.addRange(xt))}}}}for(Gt=[],jt=Fe;jt=jt.parentNode;)jt.nodeType===1&&Gt.push({element:jt,left:jt.scrollLeft,top:jt.scrollTop});for(typeof Fe.focus=="function"&&Fe.focus(),Fe=0;Fe<Gt.length;Fe++){var Vt=Gt[Fe];Vt.element.scrollLeft=Vt.left,Vt.element.scrollTop=Vt.top}}Tj=!!lI,cI=lI=null}finally{Ca=Q,z.p=E,H.T=b}}h.current=p,Po=2}}function LV(){if(Po===2){Po=0;var h=xm,p=Lv,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=H.T,H.T=null;var E=z.p;z.p=2;var Q=Ca;Ca|=4;try{mV(h,p.alternate,p)}finally{Ca=Q,z.p=E,H.T=b}}Po=3}}function MV(){if(Po===4||Po===3){Po=0,fe();var h=xm,p=Lv,b=Mv,E=jV;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Po=5:(Po=0,Lv=xm=null,UV(h,h.pendingLanes));var Q=h.pendingLanes;if(Q===0&&(gm=null),_r(b),p=p.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Xe,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=H.T,Q=z.p,z.p=2,H.T=null;try{for(var ee=h.onRecoverableError,be=0;be<E.length;be++){var Fe=E[be];ee(Fe.value,{componentStack:Fe.stack})}}finally{H.T=p,z.p=Q}}(Mv&3)!==0&&xj(),ph(h),Q=h.pendingLanes,(b&4194090)!==0&&(Q&42)!==0?h===KB?yw++:(yw=0,KB=h):yw=0,ww(0)}}function UV(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,dg(p)))}function xj(h){return RV(),LV(),MV(),HV()}function HV(){if(Po!==5)return!1;var h=xm,p=GB;GB=0;var b=_r(Mv),E=H.T,Q=z.p;try{z.p=32>b?32:b,H.T=null,b=qB,qB=null;var ee=xm,be=Mv;if(Po=0,Lv=xm=null,Mv=0,(Ca&6)!==0)throw Error(n(331));var Fe=Ca;if(Ca|=4,CV(ee.current),yV(ee,ee.current,be,b),Ca=Fe,ww(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Xe,ee)}catch{}return!0}finally{z.p=Q,H.T=E,UV(h,p)}}function QV(h,p,b){p=Nn(b,p),p=jB(h.stateNode,p,2),h=zt(h,p,2),h!==null&&(fr(h,2),ph(h))}function Ha(h,p,b){if(h.tag===3)QV(h,h,b);else for(;p!==null;){if(p.tag===3){QV(p,h,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(gm===null||!gm.has(E))){h=Nn(b,h),b=GQ(2),E=zt(p,b,2),E!==null&&(qQ(b,E,p,h),fr(E,2),ph(E));break}}p=p.return}}function JB(h,p,b){var E=h.pingCache;if(E===null){E=h.pingCache=new Jbe;var Q=new Set;E.set(p,Q)}else Q=E.get(p),Q===void 0&&(Q=new Set,E.set(p,Q));Q.has(b)||(QB=!0,Q.add(b),h=n1e.bind(null,h,p,b),p.then(h,h))}function n1e(h,p,b){var E=h.pingCache;E!==null&&E.delete(p),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,Xa===h&&(qn&b)===b&&(Us===4||Us===3&&(qn&62914560)===qn&&300>ye()-zB?(Ca&2)===0&&Uv(h,0):VB|=b,Rv===qn&&(Rv=0)),ph(h)}function VV(h,p){p===0&&(p=ot()),h=qd(h,p),h!==null&&(fr(h,p),ph(h))}function a1e(h){var p=h.memoizedState,b=0;p!==null&&(b=p.retryLane),VV(h,b)}function s1e(h,p){var b=0;switch(h.tag){case 13:var E=h.stateNode,Q=h.memoizedState;Q!==null&&(b=Q.retryLane);break;case 19:E=h.stateNode;break;case 22:E=h.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(p),VV(h,b)}function i1e(h,p){return Ee(h,p)}var vj=null,Qv=null,ZB=!1,bj=!1,eI=!1,jg=0;function ph(h){h!==Qv&&h.next===null&&(Qv===null?vj=Qv=h:Qv=Qv.next=h),bj=!0,ZB||(ZB=!0,l1e())}function ww(h,p){if(!eI&&bj){eI=!0;do for(var b=!1,E=vj;E!==null;){if(h!==0){var Q=E.pendingLanes;if(Q===0)var ee=0;else{var be=E.suspendedLanes,Fe=E.pingedLanes;ee=(1<<31-Je(42|h)+1)-1,ee&=Q&~(be&~Fe),ee=ee&201326741?ee&201326741|1:ee?ee|2:0}ee!==0&&(b=!0,qV(E,ee))}else ee=qn,ee=vt(E,E===Xa?ee:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(ee&3)===0||et(E,ee)||(b=!0,qV(E,ee));E=E.next}while(b);eI=!1}}function o1e(){$V()}function $V(){bj=ZB=!1;var h=0;jg!==0&&(p1e()&&(h=jg),jg=0);for(var p=ye(),b=null,E=vj;E!==null;){var Q=E.next,ee=zV(E,p);ee===0?(E.next=null,b===null?vj=Q:b.next=Q,Q===null&&(Qv=b)):(b=E,(h!==0||(ee&3)!==0)&&(bj=!0)),E=Q}ww(h)}function zV(h,p){for(var b=h.suspendedLanes,E=h.pingedLanes,Q=h.expirationTimes,ee=h.pendingLanes&-62914561;0<ee;){var be=31-Je(ee),Fe=1<<be,Ye=Q[be];Ye===-1?((Fe&b)===0||(Fe&E)!==0)&&(Q[be]=Ct(Fe,p)):Ye<=p&&(h.expiredLanes|=Fe),ee&=~Fe}if(p=Xa,b=qn,b=vt(h,h===p?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),E=h.callbackNode,b===0||h===p&&(Ea===2||Ea===9)||h.cancelPendingCommit!==null)return E!==null&&E!==null&&Be(E),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||et(h,b)){if(p=b&-b,p===h.callbackPriority)return p;switch(E!==null&&Be(E),_r(b)){case 2:case 8:b=ne;break;case 32:b=de;break;case 268435456:b=ge;break;default:b=de}return E=GV.bind(null,h),b=Ee(b,E),h.callbackPriority=p,h.callbackNode=b,p}return E!==null&&E!==null&&Be(E),h.callbackPriority=2,h.callbackNode=null,2}function GV(h,p){if(Po!==0&&Po!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(xj()&&h.callbackNode!==b)return null;var E=qn;return E=vt(h,h===Xa?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),E===0?null:(SV(h,E,p),zV(h,ye()),h.callbackNode!=null&&h.callbackNode===b?GV.bind(null,h):null)}function qV(h,p){if(xj())return null;SV(h,p,!0)}function l1e(){x1e(function(){(Ca&6)!==0?Ee(se,o1e):$V()})}function tI(){return jg===0&&(jg=St()),jg}function KV(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Wc(""+h)}function WV(h,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,h.id&&b.setAttribute("form",h.id),p.parentNode.insertBefore(b,p),h=new FormData(h),b.parentNode.removeChild(b),h}function c1e(h,p,b,E,Q){if(p==="submit"&&b&&b.stateNode===Q){var ee=KV((Q[$r]||null).action),be=E.submitter;be&&(p=(p=be[$r]||null)?KV(p.formAction):be.getAttribute("formAction"),p!==null&&(ee=p,be=null));var Fe=new Hu("action","action",null,E,Q);h.push({event:Fe,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(jg!==0){var Ye=be?WV(Q,be):new FormData(Q);td(b,{pending:!0,data:Ye,method:Q.method,action:ee},null,Ye)}}else typeof ee=="function"&&(Fe.preventDefault(),Ye=be?WV(Q,be):new FormData(Q),td(b,{pending:!0,data:Ye,method:Q.method,action:ee},ee,Ye))},currentTarget:Q}]})}}for(var rI=0;rI<v0.length;rI++){var nI=v0[rI],u1e=nI.toLowerCase(),d1e=nI[0].toUpperCase()+nI.slice(1);As(u1e,"on"+d1e)}As(ZA,"onAnimationEnd"),As(Zf,"onAnimationIteration"),As(eh,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(th,"onTransitionRun"),As(x0,"onTransitionStart"),As(em,"onTransitionCancel"),As(rh,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),_t("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_t("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_t("onBeforeInput",["compositionend","keypress","textInput","paste"]),_t("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_t("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_t("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f1e=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nw));function XV(h,p){p=(p&4)!==0;for(var b=0;b<h.length;b++){var E=h[b],Q=E.event;E=E.listeners;e:{var ee=void 0;if(p)for(var be=E.length-1;0<=be;be--){var Fe=E[be],Ye=Fe.instance,wt=Fe.currentTarget;if(Fe=Fe.listener,Ye!==ee&&Q.isPropagationStopped())break e;ee=Fe,Q.currentTarget=wt;try{ee(Q)}catch(Ht){oj(Ht)}Q.currentTarget=null,ee=Ye}else for(be=0;be<E.length;be++){if(Fe=E[be],Ye=Fe.instance,wt=Fe.currentTarget,Fe=Fe.listener,Ye!==ee&&Q.isPropagationStopped())break e;ee=Fe,Q.currentTarget=wt;try{ee(Q)}catch(Ht){oj(Ht)}Q.currentTarget=null,ee=Ye}}}}function On(h,p){var b=p[In];b===void 0&&(b=p[In]=new Set);var E=h+"__bubble";b.has(E)||(YV(p,h,2,!1),b.add(E))}function aI(h,p,b){var E=0;p&&(E|=4),YV(b,h,E,p)}var yj="_reactListening"+Math.random().toString(36).slice(2);function sI(h){if(!h[yj]){h[yj]=!0,Ze.forEach(function(b){b!=="selectionchange"&&(f1e.has(b)||aI(b,!1,h),aI(b,!0,h))});var p=h.nodeType===9?h:h.ownerDocument;p===null||p[yj]||(p[yj]=!0,aI("selectionchange",!1,p))}}function YV(h,p,b,E){switch(y$(p)){case 2:var Q=M1e;break;case 8:Q=U1e;break;default:Q=vI}b=Q.bind(null,p,b,h),Q=void 0,!To||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(Q=!0),E?Q!==void 0?h.addEventListener(p,b,{capture:!0,passive:Q}):h.addEventListener(p,b,!0):Q!==void 0?h.addEventListener(p,b,{passive:Q}):h.addEventListener(p,b,!1)}function iI(h,p,b,E,Q){var ee=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var be=E.tag;if(be===3||be===4){var Fe=E.stateNode.containerInfo;if(Fe===Q)break;if(be===4)for(be=E.return;be!==null;){var Ye=be.tag;if((Ye===3||Ye===4)&&be.stateNode.containerInfo===Q)return;be=be.return}for(;Fe!==null;){if(be=we(Fe),be===null)return;if(Ye=be.tag,Ye===5||Ye===6||Ye===26||Ye===27){E=ee=be;continue e}Fe=Fe.parentNode}}E=E.return}KA(function(){var wt=ee,Ht=wa(b),Gt=[];e:{var Et=Gd.get(h);if(Et!==void 0){var jt=Hu,en=h;switch(h){case"keypress":if(nl(b)===0)break e;case"keydown":case"keyup":jt=Zc;break;case"focusin":en="focus",jt=Vu;break;case"focusout":en="blur",jt=Vu;break;case"beforeblur":case"afterblur":jt=Vu;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=Fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=Qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=qf;break;case ZA:case Zf:case eh:jt=$f;break;case rh:jt=Ce;break;case"scroll":case"scrollend":jt=f0;break;case"wheel":jt=tt;break;case"copy":case"cut":case"paste":jt=zf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=$d;break;case"toggle":case"beforetoggle":jt=It}var Vr=(p&4)!==0,Ra=!Vr&&(h==="scroll"||h==="scrollend"),ht=Vr?Et!==null?Et+"Capture":null:Et;Vr=[];for(var st=wt,xt;st!==null;){var Vt=st;if(xt=Vt.stateNode,Vt=Vt.tag,Vt!==5&&Vt!==26&&Vt!==27||xt===null||ht===null||(Vt=ao(st,ht),Vt!=null&&Vr.push(Cw(st,Vt,xt))),Ra)break;st=st.return}0<Vr.length&&(Et=new jt(Et,en,null,b,Ht),Gt.push({event:Et,listeners:Vr}))}}if((p&7)===0){e:{if(Et=h==="mouseover"||h==="pointerover",jt=h==="mouseout"||h==="pointerout",Et&&b!==cc&&(en=b.relatedTarget||b.fromElement)&&(we(en)||en[mn]))break e;if((jt||Et)&&(Et=Ht.window===Ht?Ht:(Et=Ht.ownerDocument)?Et.defaultView||Et.parentWindow:window,jt?(en=b.relatedTarget||b.toElement,jt=wt,en=en?we(en):null,en!==null&&(Ra=s(en),Vr=en.tag,en!==Ra||Vr!==5&&Vr!==27&&Vr!==6)&&(en=null)):(jt=null,en=wt),jt!==en)){if(Vr=Fs,Vt="onMouseLeave",ht="onMouseEnter",st="mouse",(h==="pointerout"||h==="pointerover")&&(Vr=$d,Vt="onPointerLeave",ht="onPointerEnter",st="pointer"),Ra=jt==null?Et:De(jt),xt=en==null?Et:De(en),Et=new Vr(Vt,st+"leave",jt,b,Ht),Et.target=Ra,Et.relatedTarget=xt,Vt=null,we(Ht)===wt&&(Vr=new Vr(ht,st+"enter",en,b,Ht),Vr.target=xt,Vr.relatedTarget=Ra,Vt=Vr),Ra=Vt,jt&&en)t:{for(Vr=jt,ht=en,st=0,xt=Vr;xt;xt=Vv(xt))st++;for(xt=0,Vt=ht;Vt;Vt=Vv(Vt))xt++;for(;0<st-xt;)Vr=Vv(Vr),st--;for(;0<xt-st;)ht=Vv(ht),xt--;for(;st--;){if(Vr===ht||ht!==null&&Vr===ht.alternate)break t;Vr=Vv(Vr),ht=Vv(ht)}Vr=null}else Vr=null;jt!==null&&JV(Gt,Et,jt,Vr,!1),en!==null&&Ra!==null&&JV(Gt,Ra,en,Vr,!0)}}e:{if(Et=wt?De(wt):window,jt=Et.nodeName&&Et.nodeName.toLowerCase(),jt==="select"||jt==="input"&&Et.type==="file")var Cr=YA;else if(ha(Et))if(A0)Cr=xv;else{Cr=Xy;var _n=sl}else jt=Et.nodeName,!jt||jt.toLowerCase()!=="input"||Et.type!=="checkbox"&&Et.type!=="radio"?wt&&u0(wt.elementType)&&(Cr=YA):Cr=sg;if(Cr&&(Cr=Cr(h,wt))){mc(Gt,Cr,b,Ht);break e}_n&&_n(h,Et,wt),h==="focusout"&&wt&&Et.type==="number"&&wt.memoizedProps.value!=null&&Zo(Et,"number",Et.value)}switch(_n=wt?De(wt):window,h){case"focusin":(ha(_n)||_n.contentEditable==="true")&&(il=_n,eu=wt,Ku=null);break;case"focusout":Ku=eu=il=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,hs(Gt,b,Ht);break;case"selectionchange":if(Jf)break;case"keydown":case"keyup":hs(Gt,b,Ht)}var Dr;if(lr)e:{switch(h){case"compositionstart":var zr="onCompositionStart";break e;case"compositionend":zr="onCompositionEnd";break e;case"compositionupdate":zr="onCompositionUpdate";break e}zr=void 0}else Qr?yt(h,b)&&(zr="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(zr="onCompositionStart");zr&&(pe&&b.locale!=="ko"&&(Qr||zr!=="onCompositionStart"?zr==="onCompositionEnd"&&Qr&&(Dr=d0()):(rl=Ht,Uu="value"in rl?rl.value:rl.textContent,Qr=!0)),_n=wj(wt,zr),0<_n.length&&(zr=new Hd(zr,h,null,b,Ht),Gt.push({event:zr,listeners:_n}),Dr?zr.data=Dr:(Dr=Yt(b),Dr!==null&&(zr.data=Dr)))),(Dr=ie?Sn(h,b):nn(h,b))&&(zr=wj(wt,"onBeforeInput"),0<zr.length&&(_n=new Hd("onBeforeInput","beforeinput",null,b,Ht),Gt.push({event:_n,listeners:zr}),_n.data=Dr)),c1e(Gt,h,wt,b,Ht)}XV(Gt,p)})}function Cw(h,p,b){return{instance:h,listener:p,currentTarget:b}}function wj(h,p){for(var b=p+"Capture",E=[];h!==null;){var Q=h,ee=Q.stateNode;if(Q=Q.tag,Q!==5&&Q!==26&&Q!==27||ee===null||(Q=ao(h,b),Q!=null&&E.unshift(Cw(h,Q,ee)),Q=ao(h,p),Q!=null&&E.push(Cw(h,Q,ee))),h.tag===3)return E;h=h.return}return[]}function Vv(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function JV(h,p,b,E,Q){for(var ee=p._reactName,be=[];b!==null&&b!==E;){var Fe=b,Ye=Fe.alternate,wt=Fe.stateNode;if(Fe=Fe.tag,Ye!==null&&Ye===E)break;Fe!==5&&Fe!==26&&Fe!==27||wt===null||(Ye=wt,Q?(wt=ao(b,ee),wt!=null&&be.unshift(Cw(b,wt,Ye))):Q||(wt=ao(b,ee),wt!=null&&be.push(Cw(b,wt,Ye)))),b=b.return}be.length!==0&&h.push({event:p,listeners:be})}var h1e=/\r\n?/g,A1e=/\u0000|\uFFFD/g;function ZV(h){return(typeof h=="string"?h:""+h).replace(h1e,`
`).replace(A1e,"")}function e$(h,p){return p=ZV(p),ZV(h)===p}function Nj(){}function Fa(h,p,b,E,Q,ee){switch(b){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||Qi(h,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&Qi(h,""+E);break;case"className":ln(h,"class",E);break;case"tabIndex":ln(h,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ln(h,b,E);break;case"style":Rd(h,E,ee);break;case"data":if(p!=="object"){ln(h,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||b!=="href")){h.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){h.removeAttribute(b);break}E=Wc(""+E),h.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){h.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ee=="function"&&(b==="formAction"?(p!=="input"&&Fa(h,p,"name",Q.name,Q,null),Fa(h,p,"formEncType",Q.formEncType,Q,null),Fa(h,p,"formMethod",Q.formMethod,Q,null),Fa(h,p,"formTarget",Q.formTarget,Q,null)):(Fa(h,p,"encType",Q.encType,Q,null),Fa(h,p,"method",Q.method,Q,null),Fa(h,p,"target",Q.target,Q,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){h.removeAttribute(b);break}E=Wc(""+E),h.setAttribute(b,E);break;case"onClick":E!=null&&(h.onclick=Nj);break;case"onScroll":E!=null&&On("scroll",h);break;case"onScrollEnd":E!=null&&On("scrollend",h);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(Q.children!=null)throw Error(n(60));h.innerHTML=b}}break;case"multiple":h.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":h.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){h.removeAttribute("xlink:href");break}b=Wc(""+E),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?h.setAttribute(b,""+E):h.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?h.setAttribute(b,""):h.removeAttribute(b);break;case"capture":case"download":E===!0?h.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?h.setAttribute(b,E):h.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?h.setAttribute(b,E):h.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?h.removeAttribute(b):h.setAttribute(b,E);break;case"popover":On("beforetoggle",h),On("toggle",h),on(h,"popover",E);break;case"xlinkActuate":hn(h,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":hn(h,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":hn(h,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":hn(h,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":hn(h,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":hn(h,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":hn(h,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":hn(h,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":hn(h,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":on(h,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Kc.get(b)||b,on(h,b,E))}}function oI(h,p,b,E,Q,ee){switch(b){case"style":Rd(h,E,ee);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(b=E.__html,b!=null){if(Q.children!=null)throw Error(n(60));h.innerHTML=b}}break;case"children":typeof E=="string"?Qi(h,E):(typeof E=="number"||typeof E=="bigint")&&Qi(h,""+E);break;case"onScroll":E!=null&&On("scroll",h);break;case"onScrollEnd":E!=null&&On("scrollend",h);break;case"onClick":E!=null&&(h.onclick=Nj);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rt.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(Q=b.endsWith("Capture"),p=b.slice(2,Q?b.length-7:void 0),ee=h[$r]||null,ee=ee!=null?ee[b]:null,typeof ee=="function"&&h.removeEventListener(p,ee,Q),typeof E=="function")){typeof ee!="function"&&ee!==null&&(b in h?h[b]=null:h.hasAttribute(b)&&h.removeAttribute(b)),h.addEventListener(p,E,Q);break e}b in h?h[b]=E:E===!0?h.setAttribute(b,""):on(h,b,E)}}}function Fo(h,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":On("error",h),On("load",h);var E=!1,Q=!1,ee;for(ee in b)if(b.hasOwnProperty(ee)){var be=b[ee];if(be!=null)switch(ee){case"src":E=!0;break;case"srcSet":Q=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:Fa(h,p,ee,be,b,null)}}Q&&Fa(h,p,"srcSet",b.srcSet,b,null),E&&Fa(h,p,"src",b.src,b,null);return;case"input":On("invalid",h);var Fe=ee=be=Q=null,Ye=null,wt=null;for(E in b)if(b.hasOwnProperty(E)){var Ht=b[E];if(Ht!=null)switch(E){case"name":Q=Ht;break;case"type":be=Ht;break;case"checked":Ye=Ht;break;case"defaultChecked":wt=Ht;break;case"value":ee=Ht;break;case"defaultValue":Fe=Ht;break;case"children":case"dangerouslySetInnerHTML":if(Ht!=null)throw Error(n(137,p));break;default:Fa(h,p,E,Ht,b,null)}}Ei(h,ee,Fe,Ye,wt,be,Q,!1),$l(h);return;case"select":On("invalid",h),E=be=ee=null;for(Q in b)if(b.hasOwnProperty(Q)&&(Fe=b[Q],Fe!=null))switch(Q){case"value":ee=Fe;break;case"defaultValue":be=Fe;break;case"multiple":E=Fe;default:Fa(h,p,Q,Fe,b,null)}p=ee,b=be,h.multiple=!!E,p!=null?Hi(h,!!E,p,!1):b!=null&&Hi(h,!!E,b,!0);return;case"textarea":On("invalid",h),ee=Q=E=null;for(be in b)if(b.hasOwnProperty(be)&&(Fe=b[be],Fe!=null))switch(be){case"value":E=Fe;break;case"defaultValue":Q=Fe;break;case"children":ee=Fe;break;case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(91));break;default:Fa(h,p,be,Fe,b,null)}el(h,E,Q,ee),$l(h);return;case"option":for(Ye in b)if(b.hasOwnProperty(Ye)&&(E=b[Ye],E!=null))switch(Ye){case"selected":h.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Fa(h,p,Ye,E,b,null)}return;case"dialog":On("beforetoggle",h),On("toggle",h),On("cancel",h),On("close",h);break;case"iframe":case"object":On("load",h);break;case"video":case"audio":for(E=0;E<Nw.length;E++)On(Nw[E],h);break;case"image":On("error",h),On("load",h);break;case"details":On("toggle",h);break;case"embed":case"source":case"link":On("error",h),On("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(wt in b)if(b.hasOwnProperty(wt)&&(E=b[wt],E!=null))switch(wt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:Fa(h,p,wt,E,b,null)}return;default:if(u0(p)){for(Ht in b)b.hasOwnProperty(Ht)&&(E=b[Ht],E!==void 0&&oI(h,p,Ht,E,b,void 0));return}}for(Fe in b)b.hasOwnProperty(Fe)&&(E=b[Fe],E!=null&&Fa(h,p,Fe,E,b,null))}function m1e(h,p,b,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Q=null,ee=null,be=null,Fe=null,Ye=null,wt=null,Ht=null;for(jt in b){var Gt=b[jt];if(b.hasOwnProperty(jt)&&Gt!=null)switch(jt){case"checked":break;case"value":break;case"defaultValue":Ye=Gt;default:E.hasOwnProperty(jt)||Fa(h,p,jt,null,E,Gt)}}for(var Et in E){var jt=E[Et];if(Gt=b[Et],E.hasOwnProperty(Et)&&(jt!=null||Gt!=null))switch(Et){case"type":ee=jt;break;case"name":Q=jt;break;case"checked":wt=jt;break;case"defaultChecked":Ht=jt;break;case"value":be=jt;break;case"defaultValue":Fe=jt;break;case"children":case"dangerouslySetInnerHTML":if(jt!=null)throw Error(n(137,p));break;default:jt!==Gt&&Fa(h,p,Et,jt,E,Gt)}}Un(h,be,Fe,Ye,wt,Ht,ee,Q);return;case"select":jt=be=Fe=Et=null;for(ee in b)if(Ye=b[ee],b.hasOwnProperty(ee)&&Ye!=null)switch(ee){case"value":break;case"multiple":jt=Ye;default:E.hasOwnProperty(ee)||Fa(h,p,ee,null,E,Ye)}for(Q in E)if(ee=E[Q],Ye=b[Q],E.hasOwnProperty(Q)&&(ee!=null||Ye!=null))switch(Q){case"value":Et=ee;break;case"defaultValue":Fe=ee;break;case"multiple":be=ee;default:ee!==Ye&&Fa(h,p,Q,ee,E,Ye)}p=Fe,b=be,E=jt,Et!=null?Hi(h,!!b,Et,!1):!!E!=!!b&&(p!=null?Hi(h,!!b,p,!0):Hi(h,!!b,b?[]:"",!1));return;case"textarea":jt=Et=null;for(Fe in b)if(Q=b[Fe],b.hasOwnProperty(Fe)&&Q!=null&&!E.hasOwnProperty(Fe))switch(Fe){case"value":break;case"children":break;default:Fa(h,p,Fe,null,E,Q)}for(be in E)if(Q=E[be],ee=b[be],E.hasOwnProperty(be)&&(Q!=null||ee!=null))switch(be){case"value":Et=Q;break;case"defaultValue":jt=Q;break;case"children":break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:Q!==ee&&Fa(h,p,be,Q,E,ee)}Pn(h,Et,jt);return;case"option":for(var en in b)if(Et=b[en],b.hasOwnProperty(en)&&Et!=null&&!E.hasOwnProperty(en))switch(en){case"selected":h.selected=!1;break;default:Fa(h,p,en,null,E,Et)}for(Ye in E)if(Et=E[Ye],jt=b[Ye],E.hasOwnProperty(Ye)&&Et!==jt&&(Et!=null||jt!=null))switch(Ye){case"selected":h.selected=Et&&typeof Et!="function"&&typeof Et!="symbol";break;default:Fa(h,p,Ye,Et,E,jt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vr in b)Et=b[Vr],b.hasOwnProperty(Vr)&&Et!=null&&!E.hasOwnProperty(Vr)&&Fa(h,p,Vr,null,E,Et);for(wt in E)if(Et=E[wt],jt=b[wt],E.hasOwnProperty(wt)&&Et!==jt&&(Et!=null||jt!=null))switch(wt){case"children":case"dangerouslySetInnerHTML":if(Et!=null)throw Error(n(137,p));break;default:Fa(h,p,wt,Et,E,jt)}return;default:if(u0(p)){for(var Ra in b)Et=b[Ra],b.hasOwnProperty(Ra)&&Et!==void 0&&!E.hasOwnProperty(Ra)&&oI(h,p,Ra,void 0,E,Et);for(Ht in E)Et=E[Ht],jt=b[Ht],!E.hasOwnProperty(Ht)||Et===jt||Et===void 0&&jt===void 0||oI(h,p,Ht,Et,E,jt);return}}for(var ht in b)Et=b[ht],b.hasOwnProperty(ht)&&Et!=null&&!E.hasOwnProperty(ht)&&Fa(h,p,ht,null,E,Et);for(Gt in E)Et=E[Gt],jt=b[Gt],!E.hasOwnProperty(Gt)||Et===jt||Et==null&&jt==null||Fa(h,p,Gt,Et,E,jt)}var lI=null,cI=null;function Cj(h){return h.nodeType===9?h:h.ownerDocument}function t$(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r$(h,p){if(h===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&p==="foreignObject"?0:h}function uI(h,p){return h==="textarea"||h==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var dI=null;function p1e(){var h=window.event;return h&&h.type==="popstate"?h===dI?!1:(dI=h,!0):(dI=null,!1)}var n$=typeof setTimeout=="function"?setTimeout:void 0,g1e=typeof clearTimeout=="function"?clearTimeout:void 0,a$=typeof Promise=="function"?Promise:void 0,x1e=typeof queueMicrotask=="function"?queueMicrotask:typeof a$<"u"?function(h){return a$.resolve(null).then(h).catch(v1e)}:n$;function v1e(h){setTimeout(function(){throw h})}function bm(h){return h==="head"}function s$(h,p){var b=p,E=0,Q=0;do{var ee=b.nextSibling;if(h.removeChild(b),ee&&ee.nodeType===8)if(b=ee.data,b==="/$"){if(0<E&&8>E){b=E;var be=h.ownerDocument;if(b&1&&Ew(be.documentElement),b&2&&Ew(be.body),b&4)for(b=be.head,Ew(b),be=b.firstChild;be;){var Fe=be.nextSibling,Ye=be.nodeName;be[Re]||Ye==="SCRIPT"||Ye==="STYLE"||Ye==="LINK"&&be.rel.toLowerCase()==="stylesheet"||b.removeChild(be),be=Fe}}if(Q===0){h.removeChild(ee),Dw(p);return}Q--}else b==="$"||b==="$?"||b==="$!"?Q++:E=b.charCodeAt(0)-48;else E=0;b=ee}while(b);Dw(p)}function fI(h){var p=h.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":fI(b),Me(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}h.removeChild(b)}}function b1e(h,p,b,E){for(;h.nodeType===1;){var Q=b;if(h.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(E){if(!h[Re])switch(p){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(ee=h.getAttribute("rel"),ee==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(ee!==Q.rel||h.getAttribute("href")!==(Q.href==null||Q.href===""?null:Q.href)||h.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin)||h.getAttribute("title")!==(Q.title==null?null:Q.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(ee=h.getAttribute("src"),(ee!==(Q.src==null?null:Q.src)||h.getAttribute("type")!==(Q.type==null?null:Q.type)||h.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin))&&ee&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(p==="input"&&h.type==="hidden"){var ee=Q.name==null?null:""+Q.name;if(Q.type==="hidden"&&h.getAttribute("name")===ee)return h}else return h;if(h=of(h.nextSibling),h===null)break}return null}function y1e(h,p,b){if(p==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!b||(h=of(h.nextSibling),h===null))return null;return h}function hI(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function w1e(h,p){var b=h.ownerDocument;if(h.data!=="$?"||b.readyState==="complete")p();else{var E=function(){p(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),h._reactRetry=E}}function of(h){for(;h!=null;h=h.nextSibling){var p=h.nodeType;if(p===1||p===3)break;if(p===8){if(p=h.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return h}var AI=null;function i$(h){h=h.previousSibling;for(var p=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return h;p--}else b==="/$"&&p++}h=h.previousSibling}return null}function o$(h,p,b){switch(p=Cj(b),h){case"html":if(h=p.documentElement,!h)throw Error(n(452));return h;case"head":if(h=p.head,!h)throw Error(n(453));return h;case"body":if(h=p.body,!h)throw Error(n(454));return h;default:throw Error(n(451))}}function Ew(h){for(var p=h.attributes;p.length;)h.removeAttributeNode(p[0]);Me(h)}var ad=new Map,l$=new Set;function Ej(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var F0=z.d;z.d={f:N1e,r:C1e,D:E1e,C:j1e,L:k1e,m:S1e,X:T1e,S:_1e,M:B1e};function N1e(){var h=F0.f(),p=pj();return h||p}function C1e(h){var p=xe(h);p!==null&&p.tag===5&&p.type==="form"?yg(p):F0.r(h)}var $v=typeof document>"u"?null:document;function c$(h,p,b){var E=$v;if(E&&typeof p=="string"&&p){var Q=Ur(p);Q='link[rel="'+h+'"][href="'+Q+'"]',typeof b=="string"&&(Q+='[crossorigin="'+b+'"]'),l$.has(Q)||(l$.add(Q),h={rel:h,crossOrigin:b,href:p},E.querySelector(Q)===null&&(p=E.createElement("link"),Fo(p,"link",h),Ue(p),E.head.appendChild(p)))}}function E1e(h){F0.D(h),c$("dns-prefetch",h,null)}function j1e(h,p){F0.C(h,p),c$("preconnect",h,p)}function k1e(h,p,b){F0.L(h,p,b);var E=$v;if(E&&h&&p){var Q='link[rel="preload"][as="'+Ur(p)+'"]';p==="image"&&b&&b.imageSrcSet?(Q+='[imagesrcset="'+Ur(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(Q+='[imagesizes="'+Ur(b.imageSizes)+'"]')):Q+='[href="'+Ur(h)+'"]';var ee=Q;switch(p){case"style":ee=zv(h);break;case"script":ee=Gv(h)}ad.has(ee)||(h=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:h,as:p},b),ad.set(ee,h),E.querySelector(Q)!==null||p==="style"&&E.querySelector(jw(ee))||p==="script"&&E.querySelector(kw(ee))||(p=E.createElement("link"),Fo(p,"link",h),Ue(p),E.head.appendChild(p)))}}function S1e(h,p){F0.m(h,p);var b=$v;if(b&&h){var E=p&&typeof p.as=="string"?p.as:"script",Q='link[rel="modulepreload"][as="'+Ur(E)+'"][href="'+Ur(h)+'"]',ee=Q;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ee=Gv(h)}if(!ad.has(ee)&&(h=d({rel:"modulepreload",href:h},p),ad.set(ee,h),b.querySelector(Q)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(kw(ee)))return}E=b.createElement("link"),Fo(E,"link",h),Ue(E),b.head.appendChild(E)}}}function _1e(h,p,b){F0.S(h,p,b);var E=$v;if(E&&h){var Q=Ge(E).hoistableStyles,ee=zv(h);p=p||"default";var be=Q.get(ee);if(!be){var Fe={loading:0,preload:null};if(be=E.querySelector(jw(ee)))Fe.loading=5;else{h=d({rel:"stylesheet",href:h,"data-precedence":p},b),(b=ad.get(ee))&&mI(h,b);var Ye=be=E.createElement("link");Ue(Ye),Fo(Ye,"link",h),Ye._p=new Promise(function(wt,Ht){Ye.onload=wt,Ye.onerror=Ht}),Ye.addEventListener("load",function(){Fe.loading|=1}),Ye.addEventListener("error",function(){Fe.loading|=2}),Fe.loading|=4,jj(be,p,E)}be={type:"stylesheet",instance:be,count:1,state:Fe},Q.set(ee,be)}}}function T1e(h,p){F0.X(h,p);var b=$v;if(b&&h){var E=Ge(b).hoistableScripts,Q=Gv(h),ee=E.get(Q);ee||(ee=b.querySelector(kw(Q)),ee||(h=d({src:h,async:!0},p),(p=ad.get(Q))&&pI(h,p),ee=b.createElement("script"),Ue(ee),Fo(ee,"link",h),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},E.set(Q,ee))}}function B1e(h,p){F0.M(h,p);var b=$v;if(b&&h){var E=Ge(b).hoistableScripts,Q=Gv(h),ee=E.get(Q);ee||(ee=b.querySelector(kw(Q)),ee||(h=d({src:h,async:!0,type:"module"},p),(p=ad.get(Q))&&pI(h,p),ee=b.createElement("script"),Ue(ee),Fo(ee,"link",h),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},E.set(Q,ee))}}function u$(h,p,b,E){var Q=(Q=ce.current)?Ej(Q):null;if(!Q)throw Error(n(446));switch(h){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=zv(b.href),b=Ge(Q).hoistableStyles,E=b.get(p),E||(E={type:"style",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){h=zv(b.href);var ee=Ge(Q).hoistableStyles,be=ee.get(h);if(be||(Q=Q.ownerDocument||Q,be={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ee.set(h,be),(ee=Q.querySelector(jw(h)))&&!ee._p&&(be.instance=ee,be.state.loading=5),ad.has(h)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},ad.set(h,b),ee||I1e(Q,h,b,be.state))),p&&E===null)throw Error(n(528,""));return be}if(p&&E!==null)throw Error(n(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Gv(b),b=Ge(Q).hoistableScripts,E=b.get(p),E||(E={type:"script",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,h))}}function zv(h){return'href="'+Ur(h)+'"'}function jw(h){return'link[rel="stylesheet"]['+h+"]"}function d$(h){return d({},h,{"data-precedence":h.precedence,precedence:null})}function I1e(h,p,b,E){h.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=h.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),Fo(p,"link",b),Ue(p),h.head.appendChild(p))}function Gv(h){return'[src="'+Ur(h)+'"]'}function kw(h){return"script[async]"+h}function f$(h,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var E=h.querySelector('style[data-href~="'+Ur(b.href)+'"]');if(E)return p.instance=E,Ue(E),E;var Q=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(h.ownerDocument||h).createElement("style"),Ue(E),Fo(E,"style",Q),jj(E,b.precedence,h),p.instance=E;case"stylesheet":Q=zv(b.href);var ee=h.querySelector(jw(Q));if(ee)return p.state.loading|=4,p.instance=ee,Ue(ee),ee;E=d$(b),(Q=ad.get(Q))&&mI(E,Q),ee=(h.ownerDocument||h).createElement("link"),Ue(ee);var be=ee;return be._p=new Promise(function(Fe,Ye){be.onload=Fe,be.onerror=Ye}),Fo(ee,"link",E),p.state.loading|=4,jj(ee,b.precedence,h),p.instance=ee;case"script":return ee=Gv(b.src),(Q=h.querySelector(kw(ee)))?(p.instance=Q,Ue(Q),Q):(E=b,(Q=ad.get(ee))&&(E=d({},b),pI(E,Q)),h=h.ownerDocument||h,Q=h.createElement("script"),Ue(Q),Fo(Q,"link",E),h.head.appendChild(Q),p.instance=Q);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,jj(E,b.precedence,h));return p.instance}function jj(h,p,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Q=E.length?E[E.length-1]:null,ee=Q,be=0;be<E.length;be++){var Fe=E[be];if(Fe.dataset.precedence===p)ee=Fe;else if(ee!==Q)break}ee?ee.parentNode.insertBefore(h,ee.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(h,p.firstChild))}function mI(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.title==null&&(h.title=p.title)}function pI(h,p){h.crossOrigin==null&&(h.crossOrigin=p.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=p.referrerPolicy),h.integrity==null&&(h.integrity=p.integrity)}var kj=null;function h$(h,p,b){if(kj===null){var E=new Map,Q=kj=new Map;Q.set(b,E)}else Q=kj,E=Q.get(b),E||(E=new Map,Q.set(b,E));if(E.has(h))return E;for(E.set(h,null),b=b.getElementsByTagName(h),Q=0;Q<b.length;Q++){var ee=b[Q];if(!(ee[Re]||ee[fn]||h==="link"&&ee.getAttribute("rel")==="stylesheet")&&ee.namespaceURI!=="http://www.w3.org/2000/svg"){var be=ee.getAttribute(p)||"";be=h+be;var Fe=E.get(be);Fe?Fe.push(ee):E.set(be,[ee])}}return E}function A$(h,p,b){h=h.ownerDocument||h,h.head.insertBefore(b,p==="title"?h.querySelector("head > title"):null)}function D1e(h,p,b){if(b===1||p.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return h=p.disabled,typeof p.precedence=="string"&&h==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function m$(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var Sw=null;function O1e(){}function P1e(h,p,b){if(Sw===null)throw Error(n(475));var E=Sw;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var Q=zv(b.href),ee=h.querySelector(jw(Q));if(ee){h=ee._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(E.count++,E=Sj.bind(E),h.then(E,E)),p.state.loading|=4,p.instance=ee,Ue(ee);return}ee=h.ownerDocument||h,b=d$(b),(Q=ad.get(Q))&&mI(b,Q),ee=ee.createElement("link"),Ue(ee);var be=ee;be._p=new Promise(function(Fe,Ye){be.onload=Fe,be.onerror=Ye}),Fo(ee,"link",b),p.instance=ee}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(p,h),(h=p.state.preload)&&(p.state.loading&3)===0&&(E.count++,p=Sj.bind(E),h.addEventListener("load",p),h.addEventListener("error",p))}}function F1e(){if(Sw===null)throw Error(n(475));var h=Sw;return h.stylesheets&&h.count===0&&gI(h,h.stylesheets),0<h.count?function(p){var b=setTimeout(function(){if(h.stylesheets&&gI(h,h.stylesheets),h.unsuspend){var E=h.unsuspend;h.unsuspend=null,E()}},6e4);return h.unsuspend=p,function(){h.unsuspend=null,clearTimeout(b)}}:null}function Sj(){if(this.count--,this.count===0){if(this.stylesheets)gI(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var _j=null;function gI(h,p){h.stylesheets=null,h.unsuspend!==null&&(h.count++,_j=new Map,p.forEach(R1e,h),_j=null,Sj.call(h))}function R1e(h,p){if(!(p.state.loading&4)){var b=_j.get(h);if(b)var E=b.get(null);else{b=new Map,_j.set(h,b);for(var Q=h.querySelectorAll("link[data-precedence],style[data-precedence]"),ee=0;ee<Q.length;ee++){var be=Q[ee];(be.nodeName==="LINK"||be.getAttribute("media")!=="not all")&&(b.set(be.dataset.precedence,be),E=be)}E&&b.set(null,E)}Q=p.instance,be=Q.getAttribute("data-precedence"),ee=b.get(be)||E,ee===E&&b.set(null,Q),b.set(be,Q),this.count++,E=Sj.bind(this),Q.addEventListener("load",E),Q.addEventListener("error",E),ee?ee.parentNode.insertBefore(Q,ee.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(Q,h.firstChild)),p.state.loading|=4}}var _w={$$typeof:C,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function L1e(h,p,b,E,Q,ee,be,Fe){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.hiddenUpdates=nr(null),this.identifierPrefix=E,this.onUncaughtError=Q,this.onCaughtError=ee,this.onRecoverableError=be,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Fe,this.incompleteTransitions=new Map}function p$(h,p,b,E,Q,ee,be,Fe,Ye,wt,Ht,Gt){return h=new L1e(h,p,b,be,Fe,Ye,wt,Gt),p=1,ee===!0&&(p|=24),ee=lo(3,null,null,p),h.current=ee,ee.stateNode=h,p=Jy(),p.refCount++,h.pooledCache=p,p.refCount++,ee.memoizedState={element:E,isDehydrated:b,cache:p},at(ee),h}function g$(h){return h?(h=ki,h):ki}function x$(h,p,b,E,Q,ee){Q=g$(Q),E.context===null?E.context=Q:E.pendingContext=Q,E=Mt(p),E.payload={element:b},ee=ee===void 0?null:ee,ee!==null&&(E.callback=ee),b=zt(h,E,p),b!==null&&(cu(b,h,p),Qt(b,h,p))}function v$(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<p?b:p}}function xI(h,p){v$(h,p),(h=h.alternate)&&v$(h,p)}function b$(h){if(h.tag===13){var p=qd(h,67108864);p!==null&&cu(p,h,67108864),xI(h,67108864)}}var Tj=!0;function M1e(h,p,b,E){var Q=H.T;H.T=null;var ee=z.p;try{z.p=2,vI(h,p,b,E)}finally{z.p=ee,H.T=Q}}function U1e(h,p,b,E){var Q=H.T;H.T=null;var ee=z.p;try{z.p=8,vI(h,p,b,E)}finally{z.p=ee,H.T=Q}}function vI(h,p,b,E){if(Tj){var Q=bI(E);if(Q===null)iI(h,p,E,Bj,b),w$(h,E);else if(Q1e(Q,h,p,b,E))E.stopPropagation();else if(w$(h,E),p&4&&-1<H1e.indexOf(h)){for(;Q!==null;){var ee=xe(Q);if(ee!==null)switch(ee.tag){case 3:if(ee=ee.stateNode,ee.current.memoizedState.isDehydrated){var be=ft(ee.pendingLanes);if(be!==0){var Fe=ee;for(Fe.pendingLanes|=2,Fe.entangledLanes|=2;be;){var Ye=1<<31-Je(be);Fe.entanglements[1]|=Ye,be&=~Ye}ph(ee),(Ca&6)===0&&(Aj=ye()+500,ww(0))}}break;case 13:Fe=qd(ee,2),Fe!==null&&cu(Fe,ee,2),pj(),xI(ee,2)}if(ee=bI(E),ee===null&&iI(h,p,E,Bj,b),ee===Q)break;Q=ee}Q!==null&&E.stopPropagation()}else iI(h,p,E,null,b)}}function bI(h){return h=wa(h),yI(h)}var Bj=null;function yI(h){if(Bj=null,h=we(h),h!==null){var p=s(h);if(p===null)h=null;else{var b=p.tag;if(b===13){if(h=o(p),h!==null)return h;h=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;h=null}else p!==h&&(h=null)}}return Bj=h,null}function y$(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case se:return 2;case ne:return 8;case de:case me:return 32;case ge:return 268435456;default:return 32}default:return 32}}var wI=!1,ym=null,wm=null,Nm=null,Tw=new Map,Bw=new Map,Cm=[],H1e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w$(h,p){switch(h){case"focusin":case"focusout":ym=null;break;case"dragenter":case"dragleave":wm=null;break;case"mouseover":case"mouseout":Nm=null;break;case"pointerover":case"pointerout":Tw.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bw.delete(p.pointerId)}}function Iw(h,p,b,E,Q,ee){return h===null||h.nativeEvent!==ee?(h={blockedOn:p,domEventName:b,eventSystemFlags:E,nativeEvent:ee,targetContainers:[Q]},p!==null&&(p=xe(p),p!==null&&b$(p)),h):(h.eventSystemFlags|=E,p=h.targetContainers,Q!==null&&p.indexOf(Q)===-1&&p.push(Q),h)}function Q1e(h,p,b,E,Q){switch(p){case"focusin":return ym=Iw(ym,h,p,b,E,Q),!0;case"dragenter":return wm=Iw(wm,h,p,b,E,Q),!0;case"mouseover":return Nm=Iw(Nm,h,p,b,E,Q),!0;case"pointerover":var ee=Q.pointerId;return Tw.set(ee,Iw(Tw.get(ee)||null,h,p,b,E,Q)),!0;case"gotpointercapture":return ee=Q.pointerId,Bw.set(ee,Iw(Bw.get(ee)||null,h,p,b,E,Q)),!0}return!1}function N$(h){var p=we(h.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=o(b),p!==null){h.blockedOn=p,qa(h.priority,function(){if(b.tag===13){var E=lu();E=Sr(E);var Q=qd(b,E);Q!==null&&cu(Q,b,E),xI(b,E)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Ij(h){if(h.blockedOn!==null)return!1;for(var p=h.targetContainers;0<p.length;){var b=bI(h.nativeEvent);if(b===null){b=h.nativeEvent;var E=new b.constructor(b.type,b);cc=E,b.target.dispatchEvent(E),cc=null}else return p=xe(b),p!==null&&b$(p),h.blockedOn=b,!1;p.shift()}return!0}function C$(h,p,b){Ij(h)&&b.delete(p)}function V1e(){wI=!1,ym!==null&&Ij(ym)&&(ym=null),wm!==null&&Ij(wm)&&(wm=null),Nm!==null&&Ij(Nm)&&(Nm=null),Tw.forEach(C$),Bw.forEach(C$)}function Dj(h,p){h.blockedOn===p&&(h.blockedOn=null,wI||(wI=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,V1e)))}var Oj=null;function E$(h){Oj!==h&&(Oj=h,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Oj===h&&(Oj=null);for(var p=0;p<h.length;p+=3){var b=h[p],E=h[p+1],Q=h[p+2];if(typeof E!="function"){if(yI(E||b)===null)continue;break}var ee=xe(b);ee!==null&&(h.splice(p,3),p-=3,td(ee,{pending:!0,data:Q,method:b.method,action:E},E,Q))}}))}function Dw(h){function p(Ye){return Dj(Ye,h)}ym!==null&&Dj(ym,h),wm!==null&&Dj(wm,h),Nm!==null&&Dj(Nm,h),Tw.forEach(p),Bw.forEach(p);for(var b=0;b<Cm.length;b++){var E=Cm[b];E.blockedOn===h&&(E.blockedOn=null)}for(;0<Cm.length&&(b=Cm[0],b.blockedOn===null);)N$(b),b.blockedOn===null&&Cm.shift();if(b=(h.ownerDocument||h).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var Q=b[E],ee=b[E+1],be=Q[$r]||null;if(typeof ee=="function")be||E$(b);else if(be){var Fe=null;if(ee&&ee.hasAttribute("formAction")){if(Q=ee,be=ee[$r]||null)Fe=be.formAction;else if(yI(Q)!==null)continue}else Fe=be.action;typeof Fe=="function"?b[E+1]=Fe:(b.splice(E,3),E-=3),E$(b)}}}function NI(h){this._internalRoot=h}Pj.prototype.render=NI.prototype.render=function(h){var p=this._internalRoot;if(p===null)throw Error(n(409));var b=p.current,E=lu();x$(b,E,h,p,null,null)},Pj.prototype.unmount=NI.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var p=h.containerInfo;x$(h.current,2,null,h,null,null),pj(),p[mn]=null}};function Pj(h){this._internalRoot=h}Pj.prototype.unstable_scheduleHydration=function(h){if(h){var p=Vn();h={blockedOn:null,target:h,priority:p};for(var b=0;b<Cm.length&&p!==0&&p<Cm[b].priority;b++);Cm.splice(b,0,h),b===0&&N$(h)}};var j$=t.version;if(j$!=="19.1.1")throw Error(n(527,j$,"19.1.1"));z.findDOMNode=function(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=c(p),h=h!==null?u(h):null,h=h===null?null:h.stateNode,h};var $1e={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fj=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fj.isDisabled&&Fj.supportsFiber)try{Xe=Fj.inject($1e),Ke=Fj}catch{}}return Pw.createRoot=function(h,p){if(!a(h))throw Error(n(299));var b=!1,E="",Q=QQ,ee=VQ,be=$Q,Fe=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(Q=p.onUncaughtError),p.onCaughtError!==void 0&&(ee=p.onCaughtError),p.onRecoverableError!==void 0&&(be=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Fe=p.unstable_transitionCallbacks)),p=p$(h,1,!1,null,null,b,E,Q,ee,be,Fe,null),h[mn]=p.current,sI(h),new NI(p)},Pw.hydrateRoot=function(h,p,b){if(!a(h))throw Error(n(299));var E=!1,Q="",ee=QQ,be=VQ,Fe=$Q,Ye=null,wt=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(Q=b.identifierPrefix),b.onUncaughtError!==void 0&&(ee=b.onUncaughtError),b.onCaughtError!==void 0&&(be=b.onCaughtError),b.onRecoverableError!==void 0&&(Fe=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Ye=b.unstable_transitionCallbacks),b.formState!==void 0&&(wt=b.formState)),p=p$(h,1,!0,p,b??null,E,Q,ee,be,Fe,Ye,wt),p.context=g$(null),b=p.current,E=lu(),E=Sr(E),Q=Mt(E),Q.callback=null,zt(b,Q,E),b=E,p.current.lanes=b,fr(p,b),ph(p),h[mn]=p.current,sI(h),new Pj(p)},Pw.version="19.1.1",Pw}var F$;function aye(){if(F$)return kI.exports;F$=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kI.exports=nye(),kI.exports}var sye=aye();const iye=oc(sye),oye=()=>{};var R$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rae=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},lye=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],o=e[r++],l=e[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],o=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return t.join("")},O8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],o=a+1<e.length,l=o?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let A=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(A=64)),n.push(r[d],r[f],r[A],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(rae(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lye(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],l=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new cye;const A=s<<2|l>>4;if(n.push(A),u!==64){const m=l<<4&240|u>>2;if(n.push(m),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class cye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uye=function(e){const t=rae(e);return O8.encodeByteArray(t,!0)},g5=function(e){return uye(e).replace(/\./g,"")},nae=function(e){try{return O8.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dye=()=>aae().__FIREBASE_DEFAULTS__,fye=()=>{if(typeof process>"u"||typeof R$>"u")return;const e=R$.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},hye=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&nae(e[1]);return t&&JSON.parse(t)},R4=()=>{try{return oye()||dye()||fye()||hye()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},sae=e=>{var t,r;return(r=(t=R4())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},P8=e=>{const t=sae(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},iae=()=>{var e;return(e=R4())==null?void 0:e.config},oae=e=>{var t;return(t=R4())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L4(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lae(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[g5(JSON.stringify(r)),g5(JSON.stringify(o)),""].join(".")}const V2={};function Aye(){const e={prod:[],emulator:[]};for(const t of Object.keys(V2))V2[t]?e.emulator.push(t):e.prod.push(t);return e}function mye(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let L$=!1;function M4(e,t){if(typeof window>"u"||typeof document>"u"||!RA(window.location.host)||V2[e]===t||V2[e]||L$)return;V2[e]=t;function r(A){return`__firebase__banner__${A}`}const n="__firebase__banner",s=Aye().prod.length>0;function o(){const A=document.getElementById(n);A&&A.remove()}function l(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function c(A,m){A.setAttribute("width","24"),A.setAttribute("id",m),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function u(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{L$=!0,o()},A}function d(A,m){A.setAttribute("id",m),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function f(){const A=mye(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),N=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const C=A.element;l(C),d(v,x);const _=u();c(N,y),C.append(N,g,v,_),document.body.appendChild(C)}s?(g.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pye(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ll())}function gye(){var t;const e=(t=R4())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xye(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vye(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function bye(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yye(){const e=Ll();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function wye(){return!gye()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F8(){try{return typeof indexedDB=="object"}catch{return!1}}function Nye(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cye="FirebaseError";class Ff extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=Cye,Object.setPrototypeOf(this,Ff.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hy.prototype.create)}}class hy{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],o=s?Eye(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Ff(a,l,n)}}function Eye(e,t){return e.replace(jye,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const jye=/\{\$([^}]+)}/g;function kye(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _x(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],o=t[a];if(M$(s)&&M$(o)){if(!_x(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function M$(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function p2(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function g2(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function Sye(e,t){const r=new _ye(e,t);return r.subscribe.bind(r)}class _ye{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Tye(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=BI),a.error===void 0&&(a.error=BI),a.complete===void 0&&(a.complete=BI);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tye(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function BI(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bye=1e3,Iye=2,Dye=14400*1e3,Oye=.5;function Pye(e,t=Bye,r=Iye){const n=t*Math.pow(r,e),a=Math.round(Oye*n*(Math.random()-.5)*2);return Math.min(Dye,n+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(e){return e&&e._delegate?e._delegate:e}class _f{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fye=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new jN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Lye(t))try{this.getOrInitializeService({instanceIdentifier:Og})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Og){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Og){return this.instances.has(t)}getOptions(t=Og){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Rye(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Og){return this.component?this.component.multipleInstances?t:Og:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Rye(e){return e===Og?void 0:e}function Lye(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mye{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Fye(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Rn||(Rn={}));const Uye={debug:Rn.DEBUG,verbose:Rn.VERBOSE,info:Rn.INFO,warn:Rn.WARN,error:Rn.ERROR,silent:Rn.SILENT},Hye=Rn.INFO,Qye={[Rn.DEBUG]:"log",[Rn.VERBOSE]:"log",[Rn.INFO]:"info",[Rn.WARN]:"warn",[Rn.ERROR]:"error"},Vye=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Qye[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let U4=class{constructor(t){this.name=t,this._logLevel=Hye,this._logHandler=Vye,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Rn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Uye[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Rn.DEBUG,...t),this._logHandler(this,Rn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Rn.VERBOSE,...t),this._logHandler(this,Rn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Rn.INFO,...t),this._logHandler(this,Rn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Rn.WARN,...t),this._logHandler(this,Rn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Rn.ERROR,...t),this._logHandler(this,Rn.ERROR,...t)}};const $ye=(e,t)=>t.some(r=>e instanceof r);let U$,H$;function zye(){return U$||(U$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gye(){return H$||(H$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cae=new WeakMap,qP=new WeakMap,uae=new WeakMap,II=new WeakMap,R8=new WeakMap;function qye(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(ip(e.result)),a()},o=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&cae.set(r,e)}).catch(()=>{}),R8.set(t,e),t}function Kye(e){if(qP.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});qP.set(e,t)}let KP={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return qP.get(e);if(t==="objectStoreNames")return e.objectStoreNames||uae.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ip(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Wye(e){KP=e(KP)}function Xye(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(DI(this),t,...r);return uae.set(n,t.sort?t.sort():[t]),ip(n)}:Gye().includes(e)?function(...t){return e.apply(DI(this),t),ip(cae.get(this))}:function(...t){return ip(e.apply(DI(this),t))}}function Yye(e){return typeof e=="function"?Xye(e):(e instanceof IDBTransaction&&Kye(e),$ye(e,zye())?new Proxy(e,KP):e)}function ip(e){if(e instanceof IDBRequest)return qye(e);if(II.has(e))return II.get(e);const t=Yye(e);return t!==e&&(II.set(e,t),R8.set(t,e)),t}const DI=e=>R8.get(e);function Jye(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(e,t),l=ip(o);return n&&o.addEventListener("upgradeneeded",c=>{n(ip(o.result),c.oldVersion,c.newVersion,ip(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Zye=["get","getKey","getAll","getAllKeys","count"],ewe=["put","add","delete","clear"],OI=new Map;function Q$(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(OI.get(t))return OI.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=ewe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Zye.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return OI.set(t,s),s}Wye(e=>({...e,get:(t,r,n)=>Q$(t,r)||e.get(t,r,n),has:(t,r)=>!!Q$(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class twe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(rwe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function rwe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const WP="@firebase/app",V$="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new U4("@firebase/app"),nwe="@firebase/app-compat",awe="@firebase/analytics-compat",swe="@firebase/analytics",iwe="@firebase/app-check-compat",owe="@firebase/app-check",lwe="@firebase/auth",cwe="@firebase/auth-compat",uwe="@firebase/database",dwe="@firebase/data-connect",fwe="@firebase/database-compat",hwe="@firebase/functions",Awe="@firebase/functions-compat",mwe="@firebase/installations",pwe="@firebase/installations-compat",gwe="@firebase/messaging",xwe="@firebase/messaging-compat",vwe="@firebase/performance",bwe="@firebase/performance-compat",ywe="@firebase/remote-config",wwe="@firebase/remote-config-compat",Nwe="@firebase/storage",Cwe="@firebase/storage-compat",Ewe="@firebase/firestore",jwe="@firebase/ai",kwe="@firebase/firestore-compat",Swe="firebase",_we="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="[DEFAULT]",Twe={[WP]:"fire-core",[nwe]:"fire-core-compat",[swe]:"fire-analytics",[awe]:"fire-analytics-compat",[owe]:"fire-app-check",[iwe]:"fire-app-check-compat",[lwe]:"fire-auth",[cwe]:"fire-auth-compat",[uwe]:"fire-rtdb",[dwe]:"fire-data-connect",[fwe]:"fire-rtdb-compat",[hwe]:"fire-fn",[Awe]:"fire-fn-compat",[mwe]:"fire-iid",[pwe]:"fire-iid-compat",[gwe]:"fire-fcm",[xwe]:"fire-fcm-compat",[vwe]:"fire-perf",[bwe]:"fire-perf-compat",[ywe]:"fire-rc",[wwe]:"fire-rc-compat",[Nwe]:"fire-gcs",[Cwe]:"fire-gcs-compat",[Ewe]:"fire-fst",[kwe]:"fire-fst-compat",[jwe]:"fire-vertex","fire-js":"fire-js",[Swe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new Map,Bwe=new Map,YP=new Map;function $$(e,t){try{e.container.addComponent(t)}catch(r){pA.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Jh(e){const t=e.name;if(YP.has(t))return pA.debug(`There were multiple attempts to register component ${t}.`),!1;YP.set(t,e);for(const r of kN.values())$$(r,e);for(const r of Bwe.values())$$(r,e);return!0}function Xx(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function bu(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iwe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},op=new hy("app","Firebase",Iwe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dwe{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new _f("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw op.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=_we;function L8(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:XP,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw op.create("bad-app-name",{appName:String(a)});if(r||(r=iae()),!r)throw op.create("no-options");const s=kN.get(a);if(s){if(_x(r,s.options)&&_x(n,s.config))return s;throw op.create("duplicate-app",{appName:a})}const o=new Mye(a);for(const c of YP.values())o.addComponent(c);const l=new Dwe(r,n,o);return kN.set(a,l),l}function FC(e=XP){const t=kN.get(e);if(!t&&e===XP&&iae())return L8();if(!t)throw op.create("no-app",{appName:e});return t}function z$(){return Array.from(kN.values())}function Su(e,t,r){let n=Twe[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const o=[`Unable to register library "${n}" with version "${t}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),pA.warn(o.join(" "));return}Jh(new _f(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Owe="firebase-heartbeat-database",Pwe=1,SN="firebase-heartbeat-store";let PI=null;function dae(){return PI||(PI=Jye(Owe,Pwe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(SN)}catch(r){console.warn(r)}}}}).catch(e=>{throw op.create("idb-open",{originalErrorMessage:e.message})})),PI}async function Fwe(e){try{const r=(await dae()).transaction(SN),n=await r.objectStore(SN).get(fae(e));return await r.done,n}catch(t){if(t instanceof Ff)pA.warn(t.message);else{const r=op.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});pA.warn(r.message)}}}async function G$(e,t){try{const n=(await dae()).transaction(SN,"readwrite");await n.objectStore(SN).put(t,fae(e)),await n.done}catch(r){if(r instanceof Ff)pA.warn(r.message);else{const n=op.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});pA.warn(n.message)}}}function fae(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rwe=1024,Lwe=30;class Mwe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Hwe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=q$();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>Lwe){const o=Qwe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){pA.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=q$(),{heartbeatsToSend:n,unsentEntries:a}=Uwe(this._heartbeatsCache.heartbeats),s=g5(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return pA.warn(r),""}}}function q$(){return new Date().toISOString().substring(0,10)}function Uwe(e,t=Rwe){const r=[];let n=e.slice();for(const a of e){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),K$(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),K$(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Hwe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F8()?Nye().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Fwe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return G$(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return G$(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function K$(e){return g5(JSON.stringify({version:2,heartbeats:e})).length}function Qwe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vwe(e){Jh(new _f("platform-logger",t=>new twe(t),"PRIVATE")),Jh(new _f("heartbeat",t=>new Mwe(t),"PRIVATE")),Su(WP,V$,e),Su(WP,V$,"esm2020"),Su("fire-js","")}Vwe("");function hae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $we=hae,Aae=new hy("auth","Firebase",hae());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=new U4("@firebase/auth");function zwe(e,...t){x5.logLevel<=Rn.WARN&&x5.warn(`Auth (${Yx}): ${e}`,...t)}function CS(e,...t){x5.logLevel<=Rn.ERROR&&x5.error(`Auth (${Yx}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(e,...t){throw M8(e,...t)}function Uh(e,...t){return M8(e,...t)}function mae(e,t,r){const n={...$we(),[t]:r};return new hy("auth","Firebase",n).create(t,{appName:e.name})}function lp(e){return mae(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M8(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return Aae.create(e,...t)}function Jr(e,t,...r){if(!e)throw M8(t,...r)}function K0(e){const t="INTERNAL ASSERTION FAILED: "+e;throw CS(t),new Error(t)}function gA(e,t){e||K0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Gwe(){return W$()==="http:"||W$()==="https:"}function W$(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qwe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Gwe()||vye()||"connection"in navigator)?navigator.onLine:!0}function Kwe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t,r){this.shortDelay=t,this.longDelay=r,gA(r>t,"Short delay should be less than long delay!"),this.isMobile=pye()||bye()}get(){return qwe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(e,t){gA(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pae{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;K0("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;K0("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;K0("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wwe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xwe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ywe=new RC(3e4,6e4);function Hp(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function LA(e,t,r,n,a={}){return gae(e,a,async()=>{let s={},o={};n&&(t==="GET"?o=n:s={body:JSON.stringify(n)});const l=PC({key:e.config.apiKey,...o}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return xye()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&RA(e.emulatorConfig.host)&&(u.credentials="include"),pae.fetch()(await xae(e,e.config.apiHost,r,l),u)})}async function gae(e,t,r){e._canInitEmulator=!1;const n={...Wwe,...t};try{const a=new Zwe(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rj(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rj(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Rj(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw Rj(e,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw mae(e,d,u);Tf(e,d)}}catch(a){if(a instanceof Ff)throw a;Tf(e,"network-request-failed",{message:String(a)})}}async function H4(e,t,r,n,a={}){const s=await LA(e,t,r,n,a);return"mfaPendingCredential"in s&&Tf(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function xae(e,t,r,n){const a=`${t}${r}?${n}`,s=e,o=s.config.emulator?U8(e.config,a):`${e.config.apiScheme}://${a}`;return Xwe.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Jwe(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zwe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Uh(this.auth,"network-request-failed")),Ywe.get())})}}function Rj(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Uh(e,t,n);return a.customData._tokenResponse=r,a}function X$(e){return e!==void 0&&e.enterprise!==void 0}class e2e{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Jwe(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function t2e(e,t){return LA(e,"GET","/v2/recaptchaConfig",Hp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2e(e,t){return LA(e,"POST","/v1/accounts:delete",t)}async function v5(e,t){return LA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function n2e(e,t=!1){const r=Zn(e),n=await r.getIdToken(t),a=H8(n);Jr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:$2(FI(a.auth_time)),issuedAtTime:$2(FI(a.iat)),expirationTime:$2(FI(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function FI(e){return Number(e)*1e3}function H8(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return CS("JWT malformed, contained fewer than 3 sections"),null;try{const a=nae(r);return a?JSON.parse(a):(CS("Failed to decode base64 JWT payload"),null)}catch(a){return CS("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Y$(e){const t=H8(e);return Jr(t,"internal-error"),Jr(typeof t.exp<"u","internal-error"),Jr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Ff&&a2e(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function a2e({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2e{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=$2(this.lastLoginAt),this.creationTime=$2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b5(e){var f;const t=e.auth,r=await e.getIdToken(),n=await _N(e,v5(t,{idToken:r}));Jr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?vae(a.providerUserInfo):[],o=o2e(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new ZP(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function i2e(e){const t=Zn(e);await b5(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function o2e(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function vae(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2e(e,t){const r=await gae(e,{},async()=>{const n=PC({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,o=await xae(e,a,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return e.emulatorConfig&&RA(e.emulatorConfig.host)&&(c.credentials="include"),pae.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function c2e(e,t){return LA(e,"POST","/v2/accounts:revokeToken",Hp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Jr(t.idToken,"internal-error"),Jr(typeof t.idToken<"u","internal-error"),Jr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Y$(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Jr(t.length!==0,"internal-error");const r=Y$(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Jr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await l2e(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new Zb;return n&&(Jr(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),a&&(Jr(typeof a=="string","internal-error",{appName:t}),o.accessToken=a),s&&(Jr(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Zb,this.toJSON())}_performRefresh(){return K0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(e,t){Jr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class xf{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new s2e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ZP(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await _N(this,this.stsTokenManager.getToken(this.auth,t));return Jr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return n2e(this,t)}reload(){return i2e(this)}_assign(t){this!==t&&(Jr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new xf({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Jr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await b5(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bu(this.auth.app))return Promise.reject(lp(this.auth));const t=await this.getIdToken();return await _N(this,r2e(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:A,isAnonymous:m,providerData:g,stsTokenManager:x}=r;Jr(f&&x,t,"internal-error");const v=Zb.fromJSON(this.name,x);Jr(typeof f=="string",t,"internal-error"),jm(n,t.name),jm(a,t.name),Jr(typeof A=="boolean",t,"internal-error"),Jr(typeof m=="boolean",t,"internal-error"),jm(s,t.name),jm(o,t.name),jm(l,t.name),jm(c,t.name),jm(u,t.name),jm(d,t.name);const y=new xf({uid:f,auth:t,email:a,emailVerified:A,displayName:n,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(N=>({...N}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new Zb;a.updateFromServerResponse(r);const s=new xf({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await b5(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Jr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?vae(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Zb;l.updateFromIdToken(n);const c=new xf({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new ZP(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$=new Map;function W0(e){gA(e instanceof Function,"Expected a class definition");let t=J$.get(e);return t?(gA(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,J$.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}bae.type="NONE";const Z$=bae;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(e,t,r){return`firebase:${e}:${t}:${r}`}class e1{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=ES(this.userKey,a.apiKey,s),this.fullPersistenceKey=ES("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await v5(this.auth,{idToken:t}).catch(()=>{});return r?xf._fromGetAccountInfoResponse(this.auth,r,t):null}return xf._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new e1(W0(Z$),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||W0(Z$);const o=ES(n,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const A=await v5(t,{idToken:d}).catch(()=>{});if(!A)break;f=await xf._fromGetAccountInfoResponse(t,A,d)}else f=xf._fromJSON(t,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new e1(s,t,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new e1(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Cae(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yae(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jae(t))return"Blackberry";if(kae(t))return"Webos";if(wae(t))return"Safari";if((t.includes("chrome/")||Nae(t))&&!t.includes("edge/"))return"Chrome";if(Eae(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function yae(e=Ll()){return/firefox\//i.test(e)}function wae(e=Ll()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Nae(e=Ll()){return/crios\//i.test(e)}function Cae(e=Ll()){return/iemobile/i.test(e)}function Eae(e=Ll()){return/android/i.test(e)}function jae(e=Ll()){return/blackberry/i.test(e)}function kae(e=Ll()){return/webos/i.test(e)}function Q8(e=Ll()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function u2e(e=Ll()){var t;return Q8(e)&&!!((t=window.navigator)!=null&&t.standalone)}function d2e(){return yye()&&document.documentMode===10}function Sae(e=Ll()){return Q8(e)||Eae(e)||kae(e)||jae(e)||/windows phone/i.test(e)||Cae(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ae(e,t=[]){let r;switch(e){case"Browser":r=ez(Ll());break;case"Worker":r=`${ez(Ll())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Yx}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2e{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((o,l)=>{try{const c=t(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2e(e,t={}){return LA(e,"GET","/v2/passwordPolicy",Hp(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2e=6;class m2e{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??A2e,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2e{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tz(this),this.idTokenSubscription=new tz(this),this.beforeStateQueue=new f2e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Aae,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=W0(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await e1.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await v5(this,{idToken:t}),n=await xf._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(bu(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Jr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await b5(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Kwe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(bu(this.app))return Promise.reject(lp(this));const r=t?Zn(t):null;return r&&Jr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Jr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return bu(this.app)?Promise.reject(lp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return bu(this.app)?Promise.reject(lp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(W0(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await h2e(this),r=new m2e(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new hy("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await c2e(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&W0(t)||this._popupRedirectResolver;Jr(r,this,"argument-error"),this.redirectPersistenceManager=await e1.create(this,[W0(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jr(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=t.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Jr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=_ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(bu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&zwe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Jx(e){return Zn(e)}class tz{constructor(t){this.auth=t,this.observer=null,this.addObserver=Sye(r=>this.observer=r)}get next(){return Jr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q4={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g2e(e){Q4=e}function Tae(e){return Q4.loadJS(e)}function x2e(){return Q4.recaptchaEnterpriseScript}function v2e(){return Q4.gapiScript}function b2e(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class y2e{constructor(){this.enterprise=new w2e}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class w2e{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const N2e="recaptcha-enterprise",Bae="NO_RECAPTCHA";class C2e{constructor(t){this.type=N2e,this.auth=Jx(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{t2e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new e2e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;X$(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o(Bae)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new y2e().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&X$(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=x2e();c.length!==0&&(c+=l),Tae(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function rz(e,t,r,n=!1,a=!1){const s=new C2e(e);let o;if(a)o=Bae;else try{o=await s.verify(r)}catch{o=await s.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function eF(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await rz(e,t,r,r==="getOobCode");return n(e,o)}else return n(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await rz(e,t,r,r==="getOobCode");return n(e,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2e(e,t){const r=Xx(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(_x(s,t??{}))return a;Tf(a,"already-initialized")}return r.initialize({options:t})}function j2e(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(W0);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function k2e(e,t,r){const n=Jx(e);Jr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=Iae(t),{host:o,port:l}=S2e(t),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Jr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Jr(_x(u,n.config.emulator)&&_x(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,RA(o)?(L4(`${s}//${o}${c}`),M4("Auth",!0)):_2e()}function Iae(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function S2e(e){const t=Iae(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:nz(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:nz(o)}}}function nz(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function _2e(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return K0("not implemented")}_getIdTokenResponse(t){return K0("not implemented")}_linkToIdToken(t,r){return K0("not implemented")}_getReauthenticationResolver(t){return K0("not implemented")}}async function T2e(e,t){return LA(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2e(e,t){return H4(e,"POST","/v1/accounts:signInWithPassword",Hp(e,t))}async function I2e(e,t){return LA(e,"POST","/v1/accounts:sendOobCode",Hp(e,t))}async function D2e(e,t){return I2e(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2e(e,t){return H4(e,"POST","/v1/accounts:signInWithEmailLink",Hp(e,t))}async function P2e(e,t){return H4(e,"POST","/v1/accounts:signInWithEmailLink",Hp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN extends V8{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new TN(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new TN(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eF(t,r,"signInWithPassword",B2e);case"emailLink":return O2e(t,{email:this._email,oobCode:this._password});default:Tf(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eF(t,n,"signUpPassword",T2e);case"emailLink":return P2e(t,{idToken:r,email:this._email,oobCode:this._password});default:Tf(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(e,t){return H4(e,"POST","/v1/accounts:signInWithIdp",Hp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2e="http://localhost";class Tx extends V8{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Tx(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Tf("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const o=new Tx(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return t1(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,t1(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,t1(t,r)}buildRequest(){const t={requestUri:F2e,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=PC(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2e(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function L2e(e){const t=p2(g2(e)).link,r=t?p2(g2(t)).deep_link_id:null,n=p2(g2(e)).deep_link_id;return(n?p2(g2(n)).link:null)||n||r||t||e}class $8{constructor(t){const r=p2(g2(t)),n=r.apiKey??null,a=r.oobCode??null,s=R2e(r.mode??null);Jr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=L2e(t);try{return new $8(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.providerId=Ay.PROVIDER_ID}static credential(t,r){return TN._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=$8.parseLink(r);return Jr(n,"argument-error"),TN._fromEmailAndCode(t,n.code,n.tenantId)}}Ay.PROVIDER_ID="password";Ay.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ay.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dae{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends Dae{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends LC{constructor(){super("facebook.com")}static credential(t){return Tx._fromParams({providerId:zm.PROVIDER_ID,signInMethod:zm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zm.credentialFromTaggedObject(t)}static credentialFromError(t){return zm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zm.credential(t.oauthAccessToken)}catch{return null}}}zm.FACEBOOK_SIGN_IN_METHOD="facebook.com";zm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends LC{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Tx._fromParams({providerId:Gm.PROVIDER_ID,signInMethod:Gm.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return Gm.credentialFromTaggedObject(t)}static credentialFromError(t){return Gm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return Gm.credential(r,n)}catch{return null}}}Gm.GOOGLE_SIGN_IN_METHOD="google.com";Gm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends LC{constructor(){super("github.com")}static credential(t){return Tx._fromParams({providerId:qm.PROVIDER_ID,signInMethod:qm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qm.credentialFromTaggedObject(t)}static credentialFromError(t){return qm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qm.credential(t.oauthAccessToken)}catch{return null}}}qm.GITHUB_SIGN_IN_METHOD="github.com";qm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends LC{constructor(){super("twitter.com")}static credential(t,r){return Tx._fromParams({providerId:Km.PROVIDER_ID,signInMethod:Km.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Km.credentialFromTaggedObject(t)}static credentialFromError(t){return Km.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return Km.credential(r,n)}catch{return null}}}Km.TWITTER_SIGN_IN_METHOD="twitter.com";Km.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await xf._fromIdTokenResponse(t,n,a),o=az(n);return new j1({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=az(n);return new j1({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function az(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5 extends Ff{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,y5.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new y5(t,r,n,a)}}function Oae(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?y5._fromErrorAndOperation(e,s,t,n):s})}async function M2e(e,t,r=!1){const n=await _N(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return j1._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2e(e,t,r=!1){const{auth:n}=e;if(bu(n.app))return Promise.reject(lp(n));const a="reauthenticate";try{const s=await _N(e,Oae(n,a,t,e),r);Jr(s.idToken,n,"internal-error");const o=H8(s.idToken);Jr(o,n,"internal-error");const{sub:l}=o;return Jr(e.uid===l,n,"user-mismatch"),j1._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Tf(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pae(e,t,r=!1){if(bu(e.app))return Promise.reject(lp(e));const n="signIn",a=await Oae(e,n,t),s=await j1._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function H2e(e,t){return Pae(Jx(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2e(e){const t=Jx(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function V2e(e,t,r){const n=Jx(e);await eF(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",D2e)}function $2e(e,t,r){return bu(e.app)?Promise.reject(lp(e)):H2e(Zn(e),Ay.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Q2e(e),n})}function z2e(e,t,r,n){return Zn(e).onIdTokenChanged(t,r,n)}function G2e(e,t,r){return Zn(e).beforeAuthStateChanged(t,r)}function Fae(e,t,r,n){return Zn(e).onAuthStateChanged(t,r,n)}function q2e(e){return Zn(e).signOut()}const w5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rae{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(w5,"1"),this.storage.removeItem(w5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2e=1e3,W2e=10;class Lae extends Rae{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sae(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);d2e()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,W2e):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},K2e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}Lae.type="LOCAL";const X2e=Lae;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mae extends Rae{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}Mae.type="SESSION";const Uae=Mae;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2e(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new V4(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await Y2e(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}V4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2e{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=z8("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const A=f;if(A.data.eventId===u)switch(A.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(A.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(){return window}function Z2e(e){Hh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hae(){return typeof Hh().WorkerGlobalScope<"u"&&typeof Hh().importScripts=="function"}async function eNe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tNe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function rNe(){return Hae()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qae="firebaseLocalStorageDb",nNe=1,N5="firebaseLocalStorage",Vae="fbase_key";class MC{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function $4(e,t){return e.transaction([N5],t?"readwrite":"readonly").objectStore(N5)}function aNe(){const e=indexedDB.deleteDatabase(Qae);return new MC(e).toPromise()}function tF(){const e=indexedDB.open(Qae,nNe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(N5,{keyPath:Vae})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(N5)?t(n):(n.close(),await aNe(),t(await tF()))})})}async function sz(e,t,r){const n=$4(e,!0).put({[Vae]:t,value:r});return new MC(n).toPromise()}async function sNe(e,t){const r=$4(e,!1).get(t),n=await new MC(r).toPromise();return n===void 0?null:n.value}function iz(e,t){const r=$4(e,!0).delete(t);return new MC(r).toPromise()}const iNe=800,oNe=3;class $ae{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tF(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>oNe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hae()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=V4._getInstance(rNe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await eNe(),!this.activeServiceWorker)return;this.sender=new J2e(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||tNe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await tF();return await sz(t,w5,"1"),await iz(t,w5),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>sz(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>sNe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>iz(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=$4(a,!1).getAll();return new MC(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iNe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$ae.type="LOCAL";const lNe=$ae;new RC(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cNe(e,t){return t?W0(t):(Jr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8 extends V8{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return t1(t,this._buildIdpRequest())}_linkToIdToken(t,r){return t1(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return t1(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function uNe(e){return Pae(e.auth,new G8(e),e.bypassAuthState)}function dNe(e){const{auth:t,user:r}=e;return Jr(r,t,"internal-error"),U2e(r,new G8(e),e.bypassAuthState)}async function fNe(e){const{auth:t,user:r}=e;return Jr(r,t,"internal-error"),M2e(r,new G8(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return uNe;case"linkViaPopup":case"linkViaRedirect":return fNe;case"reauthViaPopup":case"reauthViaRedirect":return dNe;default:Tf(this.auth,"internal-error")}}resolve(t){gA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){gA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hNe=new RC(2e3,1e4);class Ib extends zae{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Ib.currentPopupAction&&Ib.currentPopupAction.cancel(),Ib.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Jr(t,this.auth,"internal-error"),t}async onExecution(){gA(this.filter.length===1,"Popup operations only handle one event");const t=z8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Uh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Uh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ib.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Uh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,hNe.get())};t()}}Ib.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ANe="pendingRedirect",jS=new Map;class mNe extends zae{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=jS.get(this.auth._key());if(!t){try{const n=await pNe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}jS.set(this.auth._key(),t)}return this.bypassAuthState||jS.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pNe(e,t){const r=vNe(t),n=xNe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function gNe(e,t){jS.set(e._key(),t)}function xNe(e){return W0(e._redirectPersistence)}function vNe(e){return ES(ANe,e.config.apiKey,e.name)}async function bNe(e,t,r=!1){if(bu(e.app))return Promise.reject(lp(e));const n=Jx(e),a=cNe(n,t),o=await new mNe(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yNe=600*1e3;class wNe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!NNe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!Gae(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Uh(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=yNe&&this.cachedEventUids.clear(),this.cachedEventUids.has(oz(t))}saveEventToCache(t){this.cachedEventUids.add(oz(t)),this.lastProcessedEventTime=Date.now()}}function oz(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Gae({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function NNe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gae(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CNe(e,t={}){return LA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ENe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jNe=/^https?/;async function kNe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await CNe(e);for(const r of t)try{if(SNe(r))return}catch{}Tf(e,"unauthorized-domain")}function SNe(e){const t=JP(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!jNe.test(r))return!1;if(ENe.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ne=new RC(3e4,6e4);function lz(){const e=Hh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function TNe(e){return new Promise((t,r)=>{var a,s,o;function n(){lz(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{lz(),r(Uh(e,"network-request-failed"))},timeout:_Ne.get()})}if((s=(a=Hh().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((o=Hh().gapi)!=null&&o.load)n();else{const l=b2e("iframefcb");return Hh()[l]=()=>{gapi.load?n():r(Uh(e,"network-request-failed"))},Tae(`${v2e()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw kS=null,t})}let kS=null;function BNe(e){return kS=kS||TNe(e),kS}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INe=new RC(5e3,15e3),DNe="__/auth/iframe",ONe="emulator/auth/iframe",PNe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FNe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RNe(e){const t=e.config;Jr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?U8(t,ONe):`https://${e.config.authDomain}/${DNe}`,n={apiKey:t.apiKey,appName:e.name,v:Yx},a=FNe.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${PC(n).slice(1)}`}async function LNe(e){const t=await BNe(e),r=Hh().gapi;return Jr(r,e,"internal-error"),t.open({where:document.body,url:RNe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PNe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Uh(e,"network-request-failed"),l=Hh().setTimeout(()=>{s(o)},INe.get());function c(){Hh().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MNe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UNe=500,HNe=600,QNe="_blank",VNe="http://localhost";class cz{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $Ne(e,t,r,n=UNe,a=HNe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...MNe,width:n.toString(),height:a.toString(),top:s,left:o},u=Ll().toLowerCase();r&&(l=Nae(u)?QNe:r),yae(u)&&(t=t||VNe,c.scrollbars="yes");const d=Object.entries(c).reduce((A,[m,g])=>`${A}${m}=${g},`,"");if(u2e(u)&&l!=="_self")return zNe(t||"",l),new cz(null);const f=window.open(t||"",l,d);Jr(f,e,"popup-blocked");try{f.focus()}catch{}return new cz(f)}function zNe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GNe="__/auth/handler",qNe="emulator/auth/handler",KNe=encodeURIComponent("fac");async function uz(e,t,r,n,a,s){Jr(e.config.authDomain,e,"auth-domain-config-required"),Jr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Yx,eventId:a};if(t instanceof Dae){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",kye(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof LC){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${KNe}=${encodeURIComponent(c)}`:"";return`${WNe(e)}?${PC(l).slice(1)}${u}`}function WNe({config:e}){return e.emulator?U8(e,qNe):`https://${e.authDomain}/${GNe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="webStorageSupport";class XNe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uae,this._completeRedirectFn=bNe,this._overrideRedirectResult=gNe}async _openPopup(t,r,n,a){var o;gA((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await uz(t,r,n,JP(),a);return $Ne(t,s,z8())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await uz(t,r,n,JP(),a);return Z2e(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(gA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await LNe(t),n=new wNe(t);return r.register("authEvent",a=>(Jr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(RI,{type:RI},a=>{var o;const s=(o=a==null?void 0:a[0])==null?void 0:o[RI];s!==void 0&&r(!!s),Tf(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=kNe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return Sae()||wae()||Q8()}}const YNe=XNe;var dz="@firebase/auth",fz="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JNe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Jr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZNe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eCe(e){Jh(new _f("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Jr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_ae(e)},u=new p2e(n,a,s,c);return j2e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),Jh(new _f("auth-internal",t=>{const r=Jx(t.getProvider("auth").getImmediate());return(n=>new JNe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Su(dz,fz,ZNe(e)),Su(dz,fz,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tCe=300,rCe=oae("authIdTokenMaxAge")||tCe;let hz=null;const nCe=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>rCe)return;const a=r==null?void 0:r.token;hz!==a&&(hz=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function qae(e=FC()){const t=Xx(e,"auth");if(t.isInitialized())return t.getImmediate();const r=E2e(e,{popupRedirectResolver:YNe,persistence:[lNe,X2e,Uae]}),n=oae("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=nCe(s.toString());G2e(r,o,()=>o(r.currentUser)),z2e(r,l=>o(l))}}const a=sae("auth");return a&&k2e(r,`http://${a}`),r}function aCe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}g2e({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=Uh("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",aCe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eCe("Browser");var sCe="firebase",iCe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Su(sCe,iCe,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=new Map,Kae={activated:!1,tokenObservers:[]},oCe={initialized:!1,enabled:!1};function Xi(e){return rF.get(e)||{...Kae}}function lCe(e,t){return rF.set(e,t),rF.get(e)}function z4(){return oCe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wae="https://content-firebaseappcheck.googleapis.com/v1",cCe="exchangeRecaptchaV3Token",uCe="exchangeDebugToken",Az={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},dCe=1440*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fCe{constructor(t,r,n,a,s){if(this.operation=t,this.retryPolicy=r,this.getWaitDuration=n,this.lowerBound=a,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=a,a>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new jN,this.pending.promise.catch(r=>{}),await hCe(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new jN,this.pending.promise.catch(r=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(r){this.retryPolicy(r)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}}function hCe(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ACe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Oc=new hy("appCheck","AppCheck",ACe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(e=!1){var t;return e?(t=self.grecaptcha)==null?void 0:t.enterprise:self.grecaptcha}function q8(e){if(!Xi(e).activated)throw Oc.create("use-before-activation",{appName:e.name})}function Xae(e){const t=Math.round(e/1e3),r=Math.floor(t/(3600*24)),n=Math.floor((t-r*3600*24)/3600),a=Math.floor((t-r*3600*24-n*3600)/60),s=t-r*3600*24-n*3600-a*60;let o="";return r&&(o+=Lj(r)+"d:"),n&&(o+=Lj(n)+"h:"),o+=Lj(a)+"m:"+Lj(s)+"s",o}function Lj(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K8({url:e,body:t},r){const n={"Content-Type":"application/json"},a=r.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&(n["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:n};let o;try{o=await fetch(e,s)}catch(f){throw Oc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Oc.create("fetch-status-error",{httpStatus:o.status});let l;try{l=await o.json()}catch(f){throw Oc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const c=l.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Oc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const u=Number(c[1])*1e3,d=Date.now();return{token:l.token,expireTimeMillis:d+u,issuedAtTimeMillis:d}}function mCe(e,t){const{projectId:r,appId:n,apiKey:a}=e.options;return{url:`${Wae}/projects/${r}/apps/${n}:${cCe}?key=${a}`,body:{recaptcha_v3_token:t}}}function Yae(e,t){const{projectId:r,appId:n,apiKey:a}=e.options;return{url:`${Wae}/projects/${r}/apps/${n}:${uCe}?key=${a}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pCe="firebase-app-check-database",gCe=1,BN="firebase-app-check-store",Jae="debug-token";let Mj=null;function Zae(){return Mj||(Mj=new Promise((e,t)=>{try{const r=indexedDB.open(pCe,gCe);r.onsuccess=n=>{e(n.target.result)},r.onerror=n=>{var a;t(Oc.create("storage-open",{originalErrorMessage:(a=n.target.error)==null?void 0:a.message}))},r.onupgradeneeded=n=>{const a=n.target.result;switch(n.oldVersion){case 0:a.createObjectStore(BN,{keyPath:"compositeKey"})}}}catch(r){t(Oc.create("storage-open",{originalErrorMessage:r==null?void 0:r.message}))}}),Mj)}function xCe(e){return tse(rse(e))}function vCe(e,t){return ese(rse(e),t)}function bCe(e){return ese(Jae,e)}function yCe(){return tse(Jae)}async function ese(e,t){const n=(await Zae()).transaction(BN,"readwrite"),s=n.objectStore(BN).put({compositeKey:e,value:t});return new Promise((o,l)=>{s.onsuccess=c=>{o()},n.onerror=c=>{var u;l(Oc.create("storage-set",{originalErrorMessage:(u=c.target.error)==null?void 0:u.message}))}})}async function tse(e){const r=(await Zae()).transaction(BN,"readonly"),a=r.objectStore(BN).get(e);return new Promise((s,o)=>{a.onsuccess=l=>{const c=l.target.result;s(c?c.value:void 0)},r.onerror=l=>{var c;o(Oc.create("storage-get",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function rse(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new U4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wCe(e){if(F8()){let t;try{t=await xCe(e)}catch(r){Jm.warn(`Failed to read token from IndexedDB. Error: ${r}`)}return t}}function LI(e,t){return F8()?vCe(e,t).catch(r=>{Jm.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}async function NCe(){let e;try{e=await yCe()}catch{}if(e)return e;{const t=crypto.randomUUID();return bCe(t).catch(r=>Jm.warn(`Failed to persist debug token to IndexedDB. Error: ${r}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(){return z4().enabled}async function X8(){const e=z4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function CCe(){const e=aae(),t=z4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const r=new jN;t.token=r,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(NCe())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ECe={error:"UNKNOWN_ERROR"};function jCe(e){return O8.encodeString(JSON.stringify(e),!1)}async function nF(e,t=!1,r=!1){const n=e.app;q8(n);const a=Xi(n);let s=a.token,o;if(s&&!Db(s)&&(a.token=void 0,s=void 0),!s){const u=await a.cachedTokenPromise;u&&(Db(u)?s=u:await LI(n,void 0))}if(!t&&s&&Db(s))return{token:s.token};let l=!1;if(W8())try{a.exchangeTokenPromise||(a.exchangeTokenPromise=K8(Yae(n,await X8()),e.heartbeatServiceProvider).finally(()=>{a.exchangeTokenPromise=void 0}),l=!0);const u=await a.exchangeTokenPromise;return await LI(n,u),a.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Jm.warn(u.message):r&&Jm.error(u),MI(u)}try{a.exchangeTokenPromise||(a.exchangeTokenPromise=a.provider.getToken().finally(()=>{a.exchangeTokenPromise=void 0}),l=!0),s=await Xi(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Jm.warn(u.message):r&&Jm.error(u),o=u}let c;return s?o?Db(s)?c={token:s.token,internalError:o}:c=MI(o):(c={token:s.token},a.token=s,await LI(n,s)):c=MI(o),l&&sse(n,c),c}async function kCe(e){const t=e.app;q8(t);const{provider:r}=Xi(t);if(W8()){const n=await X8(),{token:a}=await K8(Yae(t,n),e.heartbeatServiceProvider);return{token:a}}else{const{token:n}=await r.getToken();return{token:n}}}function nse(e,t,r,n){const{app:a}=e,s=Xi(a),o={next:r,error:n,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Db(s.token)){const l=s.token;Promise.resolve().then(()=>{r({token:l.token}),pz(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>pz(e))}function ase(e,t){const r=Xi(e),n=r.tokenObservers.filter(a=>a.next!==t);n.length===0&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=n}function pz(e){const{app:t}=e,r=Xi(t);let n=r.tokenRefresher;n||(n=SCe(e),r.tokenRefresher=n),!n.isRunning()&&r.isTokenAutoRefreshEnabled&&n.start()}function SCe(e){const{app:t}=e;return new fCe(async()=>{const r=Xi(t);let n;if(r.token?n=await nF(e,!0):n=await nF(e),n.error)throw n.error;if(n.internalError)throw n.internalError},()=>!0,()=>{const r=Xi(t);if(r.token){let n=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5;const a=r.token.expireTimeMillis-300*1e3;return n=Math.min(n,a),Math.max(0,n-Date.now())}else return 0},Az.RETRIAL_MIN_WAIT,Az.RETRIAL_MAX_WAIT)}function sse(e,t){const r=Xi(e).tokenObservers;for(const n of r)try{n.type==="EXTERNAL"&&t.error!=null?n.error(t.error):n.next(t)}catch{}}function Db(e){return e.expireTimeMillis-Date.now()>0}function MI(e){return{token:jCe(ECe),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Ce{constructor(t,r){this.app=t,this.heartbeatServiceProvider=r}_delete(){const{tokenObservers:t}=Xi(this.app);for(const r of t)ase(this.app,r.next);return Promise.resolve()}}function TCe(e,t){return new _Ce(e,t)}function BCe(e){return{getToken:t=>nF(e,t),getLimitedUseToken:()=>kCe(e),addTokenListener:t=>nse(e,"INTERNAL",t),removeTokenListener:t=>ase(e.app,t)}}const ICe="@firebase/app-check",DCe="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OCe="https://www.google.com/recaptcha/api.js";function PCe(e,t){const r=new jN,n=Xi(e);n.reCAPTCHAState={initialized:r};const a=FCe(e),s=mz(!1);return s?gz(e,t,s,a,r):MCe(()=>{const o=mz(!1);if(!o)throw new Error("no recaptcha");gz(e,t,o,a,r)}),r.promise}function gz(e,t,r,n,a){r.ready(()=>{LCe(e,t,r,n),a.resolve(r)})}function FCe(e){const t=`fire_app_check_${e.name}`,r=document.createElement("div");return r.id=t,r.style.display="none",document.body.appendChild(r),t}async function RCe(e){q8(e);const r=await Xi(e).reCAPTCHAState.initialized.promise;return new Promise((n,a)=>{const s=Xi(e).reCAPTCHAState;r.ready(()=>{n(r.execute(s.widgetId,{action:"fire_app_check"}))})})}function LCe(e,t,r,n){const a=r.render(n,{sitekey:t,size:"invisible",callback:()=>{Xi(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Xi(e).reCAPTCHAState.succeeded=!1}}),s=Xi(e);s.reCAPTCHAState={...s.reCAPTCHAState,widgetId:a}}function MCe(e){const t=document.createElement("script");t.src=OCe,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var n,a,s;HCe(this._throttleData);const t=await RCe(this._app).catch(o=>{throw Oc.create("recaptcha-error")});if(!((n=Xi(this._app).reCAPTCHAState)!=null&&n.succeeded))throw Oc.create("recaptcha-error");let r;try{r=await K8(mCe(this._app,t),this._heartbeatServiceProvider)}catch(o){throw(a=o.code)!=null&&a.includes("fetch-status-error")?(this._throttleData=UCe(Number((s=o.customData)==null?void 0:s.httpStatus),this._throttleData),Oc.create("initial-throttle",{time:Xae(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,r}initialize(t){this._app=t,this._heartbeatServiceProvider=Xx(t,"heartbeat"),PCe(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Y8?this._siteKey===t._siteKey:!1}}function UCe(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+dCe,httpStatus:e};{const r=t?t.backoffCount:0,n=Pye(r,1e3,2);return{backoffCount:r+1,allowRequestsAfter:Date.now()+n,httpStatus:e}}}function HCe(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Oc.create("throttled",{time:Xae(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QCe(e=FC(),t){e=Zn(e);const r=Xx(e,"app-check");if(z4().initialized||CCe(),W8()&&X8().then(a=>console.log(`App Check debug token: ${a}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return a;throw Oc.create("already-initialized",{appName:e.name})}const n=r.initialize({options:t});return VCe(e,t.provider,t.isTokenAutoRefreshEnabled),Xi(e).isTokenAutoRefreshEnabled&&nse(n,"INTERNAL",()=>{}),n}function VCe(e,t,r=!1){const n=lCe(e,{...Kae});n.activated=!0,n.provider=t,n.cachedTokenPromise=wCe(e).then(a=>(a&&Db(a)&&(n.token=a,sse(e,{token:a.token})),a)),n.isTokenAutoRefreshEnabled=r&&e.automaticDataCollectionEnabled,!e.automaticDataCollectionEnabled&&r&&Jm.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),n.provider.initialize(e)}const $Ce="app-check",xz="app-check-internal";function zCe(){Jh(new _f($Ce,e=>{const t=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat");return TCe(t,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider(xz).initialize()})),Jh(new _f(xz,e=>{const t=e.getProvider("app-check").getImmediate();return BCe(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Su(ICe,DCe)}zCe();var vz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cp,ise;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,k){function B(){}B.prototype=k.prototype,T.D=k.prototype,T.prototype=new B,T.prototype.constructor=T,T.C=function(M,P,S){for(var L=Array(arguments.length-2),U=2;U<arguments.length;U++)L[U-2]=arguments[U];return k.prototype[P].apply(M,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(T,k,B){B||(B=0);var M=Array(16);if(typeof k=="string")for(var P=0;16>P;++P)M[P]=k.charCodeAt(B++)|k.charCodeAt(B++)<<8|k.charCodeAt(B++)<<16|k.charCodeAt(B++)<<24;else for(P=0;16>P;++P)M[P]=k[B++]|k[B++]<<8|k[B++]<<16|k[B++]<<24;k=T.g[0],B=T.g[1],P=T.g[2];var S=T.g[3],L=k+(S^B&(P^S))+M[0]+3614090360&4294967295;k=B+(L<<7&4294967295|L>>>25),L=S+(P^k&(B^P))+M[1]+3905402710&4294967295,S=k+(L<<12&4294967295|L>>>20),L=P+(B^S&(k^B))+M[2]+606105819&4294967295,P=S+(L<<17&4294967295|L>>>15),L=B+(k^P&(S^k))+M[3]+3250441966&4294967295,B=P+(L<<22&4294967295|L>>>10),L=k+(S^B&(P^S))+M[4]+4118548399&4294967295,k=B+(L<<7&4294967295|L>>>25),L=S+(P^k&(B^P))+M[5]+1200080426&4294967295,S=k+(L<<12&4294967295|L>>>20),L=P+(B^S&(k^B))+M[6]+2821735955&4294967295,P=S+(L<<17&4294967295|L>>>15),L=B+(k^P&(S^k))+M[7]+4249261313&4294967295,B=P+(L<<22&4294967295|L>>>10),L=k+(S^B&(P^S))+M[8]+1770035416&4294967295,k=B+(L<<7&4294967295|L>>>25),L=S+(P^k&(B^P))+M[9]+2336552879&4294967295,S=k+(L<<12&4294967295|L>>>20),L=P+(B^S&(k^B))+M[10]+4294925233&4294967295,P=S+(L<<17&4294967295|L>>>15),L=B+(k^P&(S^k))+M[11]+2304563134&4294967295,B=P+(L<<22&4294967295|L>>>10),L=k+(S^B&(P^S))+M[12]+1804603682&4294967295,k=B+(L<<7&4294967295|L>>>25),L=S+(P^k&(B^P))+M[13]+4254626195&4294967295,S=k+(L<<12&4294967295|L>>>20),L=P+(B^S&(k^B))+M[14]+2792965006&4294967295,P=S+(L<<17&4294967295|L>>>15),L=B+(k^P&(S^k))+M[15]+1236535329&4294967295,B=P+(L<<22&4294967295|L>>>10),L=k+(P^S&(B^P))+M[1]+4129170786&4294967295,k=B+(L<<5&4294967295|L>>>27),L=S+(B^P&(k^B))+M[6]+3225465664&4294967295,S=k+(L<<9&4294967295|L>>>23),L=P+(k^B&(S^k))+M[11]+643717713&4294967295,P=S+(L<<14&4294967295|L>>>18),L=B+(S^k&(P^S))+M[0]+3921069994&4294967295,B=P+(L<<20&4294967295|L>>>12),L=k+(P^S&(B^P))+M[5]+3593408605&4294967295,k=B+(L<<5&4294967295|L>>>27),L=S+(B^P&(k^B))+M[10]+38016083&4294967295,S=k+(L<<9&4294967295|L>>>23),L=P+(k^B&(S^k))+M[15]+3634488961&4294967295,P=S+(L<<14&4294967295|L>>>18),L=B+(S^k&(P^S))+M[4]+3889429448&4294967295,B=P+(L<<20&4294967295|L>>>12),L=k+(P^S&(B^P))+M[9]+568446438&4294967295,k=B+(L<<5&4294967295|L>>>27),L=S+(B^P&(k^B))+M[14]+3275163606&4294967295,S=k+(L<<9&4294967295|L>>>23),L=P+(k^B&(S^k))+M[3]+4107603335&4294967295,P=S+(L<<14&4294967295|L>>>18),L=B+(S^k&(P^S))+M[8]+1163531501&4294967295,B=P+(L<<20&4294967295|L>>>12),L=k+(P^S&(B^P))+M[13]+2850285829&4294967295,k=B+(L<<5&4294967295|L>>>27),L=S+(B^P&(k^B))+M[2]+4243563512&4294967295,S=k+(L<<9&4294967295|L>>>23),L=P+(k^B&(S^k))+M[7]+1735328473&4294967295,P=S+(L<<14&4294967295|L>>>18),L=B+(S^k&(P^S))+M[12]+2368359562&4294967295,B=P+(L<<20&4294967295|L>>>12),L=k+(B^P^S)+M[5]+4294588738&4294967295,k=B+(L<<4&4294967295|L>>>28),L=S+(k^B^P)+M[8]+2272392833&4294967295,S=k+(L<<11&4294967295|L>>>21),L=P+(S^k^B)+M[11]+1839030562&4294967295,P=S+(L<<16&4294967295|L>>>16),L=B+(P^S^k)+M[14]+4259657740&4294967295,B=P+(L<<23&4294967295|L>>>9),L=k+(B^P^S)+M[1]+2763975236&4294967295,k=B+(L<<4&4294967295|L>>>28),L=S+(k^B^P)+M[4]+1272893353&4294967295,S=k+(L<<11&4294967295|L>>>21),L=P+(S^k^B)+M[7]+4139469664&4294967295,P=S+(L<<16&4294967295|L>>>16),L=B+(P^S^k)+M[10]+3200236656&4294967295,B=P+(L<<23&4294967295|L>>>9),L=k+(B^P^S)+M[13]+681279174&4294967295,k=B+(L<<4&4294967295|L>>>28),L=S+(k^B^P)+M[0]+3936430074&4294967295,S=k+(L<<11&4294967295|L>>>21),L=P+(S^k^B)+M[3]+3572445317&4294967295,P=S+(L<<16&4294967295|L>>>16),L=B+(P^S^k)+M[6]+76029189&4294967295,B=P+(L<<23&4294967295|L>>>9),L=k+(B^P^S)+M[9]+3654602809&4294967295,k=B+(L<<4&4294967295|L>>>28),L=S+(k^B^P)+M[12]+3873151461&4294967295,S=k+(L<<11&4294967295|L>>>21),L=P+(S^k^B)+M[15]+530742520&4294967295,P=S+(L<<16&4294967295|L>>>16),L=B+(P^S^k)+M[2]+3299628645&4294967295,B=P+(L<<23&4294967295|L>>>9),L=k+(P^(B|~S))+M[0]+4096336452&4294967295,k=B+(L<<6&4294967295|L>>>26),L=S+(B^(k|~P))+M[7]+1126891415&4294967295,S=k+(L<<10&4294967295|L>>>22),L=P+(k^(S|~B))+M[14]+2878612391&4294967295,P=S+(L<<15&4294967295|L>>>17),L=B+(S^(P|~k))+M[5]+4237533241&4294967295,B=P+(L<<21&4294967295|L>>>11),L=k+(P^(B|~S))+M[12]+1700485571&4294967295,k=B+(L<<6&4294967295|L>>>26),L=S+(B^(k|~P))+M[3]+2399980690&4294967295,S=k+(L<<10&4294967295|L>>>22),L=P+(k^(S|~B))+M[10]+4293915773&4294967295,P=S+(L<<15&4294967295|L>>>17),L=B+(S^(P|~k))+M[1]+2240044497&4294967295,B=P+(L<<21&4294967295|L>>>11),L=k+(P^(B|~S))+M[8]+1873313359&4294967295,k=B+(L<<6&4294967295|L>>>26),L=S+(B^(k|~P))+M[15]+4264355552&4294967295,S=k+(L<<10&4294967295|L>>>22),L=P+(k^(S|~B))+M[6]+2734768916&4294967295,P=S+(L<<15&4294967295|L>>>17),L=B+(S^(P|~k))+M[13]+1309151649&4294967295,B=P+(L<<21&4294967295|L>>>11),L=k+(P^(B|~S))+M[4]+4149444226&4294967295,k=B+(L<<6&4294967295|L>>>26),L=S+(B^(k|~P))+M[11]+3174756917&4294967295,S=k+(L<<10&4294967295|L>>>22),L=P+(k^(S|~B))+M[2]+718787259&4294967295,P=S+(L<<15&4294967295|L>>>17),L=B+(S^(P|~k))+M[9]+3951481745&4294967295,T.g[0]=T.g[0]+k&4294967295,T.g[1]=T.g[1]+(P+(L<<21&4294967295|L>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+S&4294967295}n.prototype.u=function(T,k){k===void 0&&(k=T.length);for(var B=k-this.blockSize,M=this.B,P=this.h,S=0;S<k;){if(P==0)for(;S<=B;)a(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<k;)if(M[P++]=T.charCodeAt(S++),P==this.blockSize){a(this,M),P=0;break}}else for(;S<k;)if(M[P++]=T[S++],P==this.blockSize){a(this,M),P=0;break}}this.h=P,this.o+=k},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var k=1;k<T.length-8;++k)T[k]=0;var B=8*this.o;for(k=T.length-8;k<T.length;++k)T[k]=B&255,B/=256;for(this.u(T),T=Array(16),k=B=0;4>k;++k)for(var M=0;32>M;M+=8)T[B++]=this.g[k]>>>M&255;return T};function s(T,k){var B=l;return Object.prototype.hasOwnProperty.call(B,T)?B[T]:B[T]=k(T)}function o(T,k){this.h=k;for(var B=[],M=!0,P=T.length-1;0<=P;P--){var S=T[P]|0;M&&S==k||(B[P]=S,M=!1)}this.g=B}var l={};function c(T){return-128<=T&&128>T?s(T,function(k){return new o([k|0],0>k?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return v(u(-T));for(var k=[],B=1,M=0;T>=B;M++)k[M]=T/B|0,B*=4294967296;return new o(k,0)}function d(T,k){if(T.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T.charAt(0)=="-")return v(d(T.substring(1),k));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(k,8)),M=f,P=0;P<T.length;P+=8){var S=Math.min(8,T.length-P),L=parseInt(T.substring(P,P+S),k);8>S?(S=u(Math.pow(k,S)),M=M.j(S).add(u(L))):(M=M.j(B),M=M.add(u(L)))}return M}var f=c(0),A=c(1),m=c(16777216);e=o.prototype,e.m=function(){if(x(this))return-v(this).m();for(var T=0,k=1,B=0;B<this.g.length;B++){var M=this.i(B);T+=(0<=M?M:4294967296+M)*k,k*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(g(this))return"0";if(x(this))return"-"+v(this).toString(T);for(var k=u(Math.pow(T,6)),B=this,M="";;){var P=_(B,k).g;B=y(B,P.j(k));var S=((0<B.g.length?B.g[0]:B.h)>>>0).toString(T);if(B=P,g(B))return S+M;for(;6>S.length;)S="0"+S;M=S+M}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function g(T){if(T.h!=0)return!1;for(var k=0;k<T.g.length;k++)if(T.g[k]!=0)return!1;return!0}function x(T){return T.h==-1}e.l=function(T){return T=y(this,T),x(T)?-1:g(T)?0:1};function v(T){for(var k=T.g.length,B=[],M=0;M<k;M++)B[M]=~T.g[M];return new o(B,~T.h).add(A)}e.abs=function(){return x(this)?v(this):this},e.add=function(T){for(var k=Math.max(this.g.length,T.g.length),B=[],M=0,P=0;P<=k;P++){var S=M+(this.i(P)&65535)+(T.i(P)&65535),L=(S>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);M=L>>>16,S&=65535,L&=65535,B[P]=L<<16|S}return new o(B,B[B.length-1]&-2147483648?-1:0)};function y(T,k){return T.add(v(k))}e.j=function(T){if(g(this)||g(T))return f;if(x(this))return x(T)?v(this).j(v(T)):v(v(this).j(T));if(x(T))return v(this.j(v(T)));if(0>this.l(m)&&0>T.l(m))return u(this.m()*T.m());for(var k=this.g.length+T.g.length,B=[],M=0;M<2*k;M++)B[M]=0;for(M=0;M<this.g.length;M++)for(var P=0;P<T.g.length;P++){var S=this.i(M)>>>16,L=this.i(M)&65535,U=T.i(P)>>>16,q=T.i(P)&65535;B[2*M+2*P]+=L*q,N(B,2*M+2*P),B[2*M+2*P+1]+=S*q,N(B,2*M+2*P+1),B[2*M+2*P+1]+=L*U,N(B,2*M+2*P+1),B[2*M+2*P+2]+=S*U,N(B,2*M+2*P+2)}for(M=0;M<k;M++)B[M]=B[2*M+1]<<16|B[2*M];for(M=k;M<2*k;M++)B[M]=0;return new o(B,0)};function N(T,k){for(;(T[k]&65535)!=T[k];)T[k+1]+=T[k]>>>16,T[k]&=65535,k++}function C(T,k){this.g=T,this.h=k}function _(T,k){if(g(k))throw Error("division by zero");if(g(T))return new C(f,f);if(x(T))return k=_(v(T),k),new C(v(k.g),v(k.h));if(x(k))return k=_(T,v(k)),new C(v(k.g),k.h);if(30<T.g.length){if(x(T)||x(k))throw Error("slowDivide_ only works with positive integers.");for(var B=A,M=k;0>=M.l(T);)B=j(B),M=j(M);var P=I(B,1),S=I(M,1);for(M=I(M,2),B=I(B,2);!g(M);){var L=S.add(M);0>=L.l(T)&&(P=P.add(B),S=L),M=I(M,1),B=I(B,1)}return k=y(T,P.j(k)),new C(P,k)}for(P=f;0<=T.l(k);){for(B=Math.max(1,Math.floor(T.m()/k.m())),M=Math.ceil(Math.log(B)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),S=u(B),L=S.j(k);x(L)||0<L.l(T);)B-=M,S=u(B),L=S.j(k);g(S)&&(S=A),P=P.add(S),T=y(T,L)}return new C(P,T)}e.A=function(T){return _(this,T).h},e.and=function(T){for(var k=Math.max(this.g.length,T.g.length),B=[],M=0;M<k;M++)B[M]=this.i(M)&T.i(M);return new o(B,this.h&T.h)},e.or=function(T){for(var k=Math.max(this.g.length,T.g.length),B=[],M=0;M<k;M++)B[M]=this.i(M)|T.i(M);return new o(B,this.h|T.h)},e.xor=function(T){for(var k=Math.max(this.g.length,T.g.length),B=[],M=0;M<k;M++)B[M]=this.i(M)^T.i(M);return new o(B,this.h^T.h)};function j(T){for(var k=T.g.length+1,B=[],M=0;M<k;M++)B[M]=T.i(M)<<1|T.i(M-1)>>>31;return new o(B,T.h)}function I(T,k){var B=k>>5;k%=32;for(var M=T.g.length-B,P=[],S=0;S<M;S++)P[S]=0<k?T.i(S+B)>>>k|T.i(S+B+1)<<32-k:T.i(S+B);return new o(P,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,ise=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,cp=o}).apply(typeof vz<"u"?vz:typeof self<"u"?self:typeof window<"u"?window:{});var Uj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ose,x2,lse,SS,aF,cse,use,dse;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(F,ie,pe){return F==Array.prototype||F==Object.prototype||(F[ie]=pe.value),F};function r(F){F=[typeof globalThis=="object"&&globalThis,F,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uj=="object"&&Uj];for(var ie=0;ie<F.length;++ie){var pe=F[ie];if(pe&&pe.Math==Math)return pe}throw Error("Cannot find global object")}var n=r(this);function a(F,ie){if(ie)e:{var pe=n;F=F.split(".");for(var Pe=0;Pe<F.length-1;Pe++){var lt=F[Pe];if(!(lt in pe))break e;pe=pe[lt]}F=F[F.length-1],Pe=pe[F],ie=ie(Pe),ie!=Pe&&ie!=null&&t(pe,F,{configurable:!0,writable:!0,value:ie})}}function s(F,ie){F instanceof String&&(F+="");var pe=0,Pe=!1,lt={next:function(){if(!Pe&&pe<F.length){var yt=pe++;return{value:ie(yt,F[yt]),done:!1}}return Pe=!0,{done:!0,value:void 0}}};return lt[Symbol.iterator]=function(){return lt},lt}a("Array.prototype.values",function(F){return F||function(){return s(this,function(ie,pe){return pe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(F){var ie=typeof F;return ie=ie!="object"?ie:F?Array.isArray(F)?"array":ie:"null",ie=="array"||ie=="object"&&typeof F.length=="number"}function u(F){var ie=typeof F;return ie=="object"&&F!=null||ie=="function"}function d(F,ie,pe){return F.call.apply(F.bind,arguments)}function f(F,ie,pe){if(!F)throw Error();if(2<arguments.length){var Pe=Array.prototype.slice.call(arguments,2);return function(){var lt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(lt,Pe),F.apply(ie,lt)}}return function(){return F.apply(ie,arguments)}}function A(F,ie,pe){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,A.apply(null,arguments)}function m(F,ie){var pe=Array.prototype.slice.call(arguments,1);return function(){var Pe=pe.slice();return Pe.push.apply(Pe,arguments),F.apply(this,Pe)}}function g(F,ie){function pe(){}pe.prototype=ie.prototype,F.aa=ie.prototype,F.prototype=new pe,F.prototype.constructor=F,F.Qb=function(Pe,lt,yt){for(var Yt=Array(arguments.length-2),Qr=2;Qr<arguments.length;Qr++)Yt[Qr-2]=arguments[Qr];return ie.prototype[lt].apply(Pe,Yt)}}function x(F){const ie=F.length;if(0<ie){const pe=Array(ie);for(let Pe=0;Pe<ie;Pe++)pe[Pe]=F[Pe];return pe}return[]}function v(F,ie){for(let pe=1;pe<arguments.length;pe++){const Pe=arguments[pe];if(c(Pe)){const lt=F.length||0,yt=Pe.length||0;F.length=lt+yt;for(let Yt=0;Yt<yt;Yt++)F[lt+Yt]=Pe[Yt]}else F.push(Pe)}}class y{constructor(ie,pe){this.i=ie,this.j=pe,this.h=0,this.g=null}get(){let ie;return 0<this.h?(this.h--,ie=this.g,this.g=ie.next,ie.next=null):ie=this.i(),ie}}function N(F){return/^[\s\xa0]*$/.test(F)}function C(){var F=l.navigator;return F&&(F=F.userAgent)?F:""}function _(F){return _[" "](F),F}_[" "]=function(){};var j=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function I(F,ie,pe){for(const Pe in F)ie.call(pe,F[Pe],Pe,F)}function T(F,ie){for(const pe in F)ie.call(void 0,F[pe],pe,F)}function k(F){const ie={};for(const pe in F)ie[pe]=F[pe];return ie}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(F,ie){let pe,Pe;for(let lt=1;lt<arguments.length;lt++){Pe=arguments[lt];for(pe in Pe)F[pe]=Pe[pe];for(let yt=0;yt<B.length;yt++)pe=B[yt],Object.prototype.hasOwnProperty.call(Pe,pe)&&(F[pe]=Pe[pe])}}function P(F){var ie=1;F=F.split(":");const pe=[];for(;0<ie&&F.length;)pe.push(F.shift()),ie--;return F.length&&pe.push(F.join(":")),pe}function S(F){l.setTimeout(()=>{throw F},0)}function L(){var F=Z;let ie=null;return F.g&&(ie=F.g,F.g=F.g.next,F.g||(F.h=null),ie.next=null),ie}class U{constructor(){this.h=this.g=null}add(ie,pe){const Pe=q.get();Pe.set(ie,pe),this.h?this.h.next=Pe:this.g=Pe,this.h=Pe}}var q=new y(()=>new H,F=>F.reset());class H{constructor(){this.next=this.g=this.h=null}set(ie,pe){this.h=ie,this.g=pe,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,Z=new U,V=()=>{const F=l.Promise.resolve(void 0);z=()=>{F.then(Y)}};var Y=()=>{for(var F;F=L();){try{F.h.call(F.g)}catch(pe){S(pe)}var ie=q;ie.j(F),100>ie.h&&(ie.h++,F.next=ie.g,ie.g=F)}W=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(F,ie){this.type=F,this.g=this.target=ie,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var F=!1,ie=Object.defineProperty({},"passive",{get:function(){F=!0}});try{const pe=()=>{};l.addEventListener("test",pe,ie),l.removeEventListener("test",pe,ie)}catch{}return F}();function J(F,ie){if(O.call(this,F?F.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,F){var pe=this.type=F.type,Pe=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:null;if(this.target=F.target||F.srcElement,this.g=ie,ie=F.relatedTarget){if(j){e:{try{_(ie.nodeName);var lt=!0;break e}catch{}lt=!1}lt||(ie=null)}}else pe=="mouseover"?ie=F.fromElement:pe=="mouseout"&&(ie=F.toElement);this.relatedTarget=ie,Pe?(this.clientX=Pe.clientX!==void 0?Pe.clientX:Pe.pageX,this.clientY=Pe.clientY!==void 0?Pe.clientY:Pe.pageY,this.screenX=Pe.screenX||0,this.screenY=Pe.screenY||0):(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0),this.button=F.button,this.key=F.key||"",this.ctrlKey=F.ctrlKey,this.altKey=F.altKey,this.shiftKey=F.shiftKey,this.metaKey=F.metaKey,this.pointerId=F.pointerId||0,this.pointerType=typeof F.pointerType=="string"?F.pointerType:ce[F.pointerType]||"",this.state=F.state,this.i=F,F.defaultPrevented&&J.aa.h.call(this)}}g(J,O);var ce={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var F=this.i;F.preventDefault?F.preventDefault():F.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),re=0;function ue(F,ie,pe,Pe,lt){this.listener=F,this.proxy=null,this.src=ie,this.type=pe,this.capture=!!Pe,this.ha=lt,this.key=++re,this.da=this.fa=!1}function le(F){F.da=!0,F.listener=null,F.proxy=null,F.src=null,F.ha=null}function ve(F){this.src=F,this.g={},this.h=0}ve.prototype.add=function(F,ie,pe,Pe,lt){var yt=F.toString();F=this.g[yt],F||(F=this.g[yt]=[],this.h++);var Yt=Ee(F,ie,Pe,lt);return-1<Yt?(ie=F[Yt],pe||(ie.fa=!1)):(ie=new ue(ie,this.src,yt,!!Pe,lt),ie.fa=pe,F.push(ie)),ie};function X(F,ie){var pe=ie.type;if(pe in F.g){var Pe=F.g[pe],lt=Array.prototype.indexOf.call(Pe,ie,void 0),yt;(yt=0<=lt)&&Array.prototype.splice.call(Pe,lt,1),yt&&(le(ie),F.g[pe].length==0&&(delete F.g[pe],F.h--))}}function Ee(F,ie,pe,Pe){for(var lt=0;lt<F.length;++lt){var yt=F[lt];if(!yt.da&&yt.listener==ie&&yt.capture==!!pe&&yt.ha==Pe)return lt}return-1}var Be="closure_lm_"+(1e6*Math.random()|0),je={};function fe(F,ie,pe,Pe,lt){if(Array.isArray(ie)){for(var yt=0;yt<ie.length;yt++)fe(F,ie[yt],pe,Pe,lt);return null}return pe=Ve(pe),F&&F[oe]?F.K(ie,pe,u(Pe)?!!Pe.capture:!1,lt):ye(F,ie,pe,!1,Pe,lt)}function ye(F,ie,pe,Pe,lt,yt){if(!ie)throw Error("Invalid event type");var Yt=u(lt)?!!lt.capture:!!lt,Qr=ge(F);if(Qr||(F[Be]=Qr=new ve(F)),pe=Qr.add(ie,pe,Pe,Yt,yt),pe.proxy)return pe;if(Pe=Ae(),pe.proxy=Pe,Pe.src=F,Pe.listener=pe,F.addEventListener)K||(lt=Yt),lt===void 0&&(lt=!1),F.addEventListener(ie.toString(),Pe,lt);else if(F.attachEvent)F.attachEvent(de(ie.toString()),Pe);else if(F.addListener&&F.removeListener)F.addListener(Pe);else throw Error("addEventListener and attachEvent are unavailable.");return pe}function Ae(){function F(pe){return ie.call(F.src,F.listener,pe)}const ie=me;return F}function se(F,ie,pe,Pe,lt){if(Array.isArray(ie))for(var yt=0;yt<ie.length;yt++)se(F,ie[yt],pe,Pe,lt);else Pe=u(Pe)?!!Pe.capture:!!Pe,pe=Ve(pe),F&&F[oe]?(F=F.i,ie=String(ie).toString(),ie in F.g&&(yt=F.g[ie],pe=Ee(yt,pe,Pe,lt),-1<pe&&(le(yt[pe]),Array.prototype.splice.call(yt,pe,1),yt.length==0&&(delete F.g[ie],F.h--)))):F&&(F=ge(F))&&(ie=F.g[ie.toString()],F=-1,ie&&(F=Ee(ie,pe,Pe,lt)),(pe=-1<F?ie[F]:null)&&ne(pe))}function ne(F){if(typeof F!="number"&&F&&!F.da){var ie=F.src;if(ie&&ie[oe])X(ie.i,F);else{var pe=F.type,Pe=F.proxy;ie.removeEventListener?ie.removeEventListener(pe,Pe,F.capture):ie.detachEvent?ie.detachEvent(de(pe),Pe):ie.addListener&&ie.removeListener&&ie.removeListener(Pe),(pe=ge(ie))?(X(pe,F),pe.h==0&&(pe.src=null,ie[Be]=null)):le(F)}}}function de(F){return F in je?je[F]:je[F]="on"+F}function me(F,ie){if(F.da)F=!0;else{ie=new J(ie,this);var pe=F.listener,Pe=F.ha||F.src;F.fa&&ne(F),F=pe.call(Pe,ie)}return F}function ge(F){return F=F[Be],F instanceof ve?F:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ve(F){return typeof F=="function"?F:(F[Te]||(F[Te]=function(ie){return F.handleEvent(ie)}),F[Te])}function Xe(){R.call(this),this.i=new ve(this),this.M=this,this.F=null}g(Xe,R),Xe.prototype[oe]=!0,Xe.prototype.removeEventListener=function(F,ie,pe,Pe){se(this,F,ie,pe,Pe)};function Ke(F,ie){var pe,Pe=F.F;if(Pe)for(pe=[];Pe;Pe=Pe.F)pe.push(Pe);if(F=F.M,Pe=ie.type||ie,typeof ie=="string")ie=new O(ie,F);else if(ie instanceof O)ie.target=ie.target||F;else{var lt=ie;ie=new O(Pe,F),M(ie,lt)}if(lt=!0,pe)for(var yt=pe.length-1;0<=yt;yt--){var Yt=ie.g=pe[yt];lt=Qe(Yt,Pe,!0,ie)&&lt}if(Yt=ie.g=F,lt=Qe(Yt,Pe,!0,ie)&&lt,lt=Qe(Yt,Pe,!1,ie)&&lt,pe)for(yt=0;yt<pe.length;yt++)Yt=ie.g=pe[yt],lt=Qe(Yt,Pe,!1,ie)&&lt}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var F=this.i,ie;for(ie in F.g){for(var pe=F.g[ie],Pe=0;Pe<pe.length;Pe++)le(pe[Pe]);delete F.g[ie],F.h--}}this.F=null},Xe.prototype.K=function(F,ie,pe,Pe){return this.i.add(String(F),ie,!1,pe,Pe)},Xe.prototype.L=function(F,ie,pe,Pe){return this.i.add(String(F),ie,!0,pe,Pe)};function Qe(F,ie,pe,Pe){if(ie=F.i.g[String(ie)],!ie)return!0;ie=ie.concat();for(var lt=!0,yt=0;yt<ie.length;++yt){var Yt=ie[yt];if(Yt&&!Yt.da&&Yt.capture==pe){var Qr=Yt.listener,Sn=Yt.ha||Yt.src;Yt.fa&&X(F.i,Yt),lt=Qr.call(Sn,Pe)!==!1&&lt}}return lt&&!Pe.defaultPrevented}function Je(F,ie,pe){if(typeof F=="function")pe&&(F=A(F,pe));else if(F&&typeof F.handleEvent=="function")F=A(F.handleEvent,F);else throw Error("Invalid listener argument");return 2147483647<Number(ie)?-1:l.setTimeout(F,ie||0)}function mt(F){F.g=Je(()=>{F.g=null,F.i&&(F.i=!1,mt(F))},F.l);const ie=F.h;F.h=null,F.m.apply(null,ie)}class We extends R{constructor(ie,pe){super(),this.m=ie,this.l=pe,this.h=null,this.i=!1,this.g=null}j(ie){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function He(F){R.call(this),this.h=F,this.g={}}g(He,R);var Tt=[];function Ie(F){I(F.g,function(ie,pe){this.g.hasOwnProperty(pe)&&ne(ie)},F),F.g={}}He.prototype.N=function(){He.aa.N.call(this),Ie(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=l.JSON.stringify,vt=l.JSON.parse,et=class{stringify(F){return l.JSON.stringify(F,void 0)}parse(F){return l.JSON.parse(F,void 0)}};function Ct(){}Ct.prototype.h=null;function St(F){return F.h||(F.h=F.i())}function ot(){}var nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fr(){O.call(this,"d")}g(fr,O);function Zt(){O.call(this,"c")}g(Zt,O);var Ft={},dr=null;function Sr(){return dr=dr||new Xe}Ft.La="serverreachability";function _r(F){O.call(this,Ft.La,F)}g(_r,O);function Vn(F){const ie=Sr();Ke(ie,new _r(ie))}Ft.STAT_EVENT="statevent";function qa(F,ie){O.call(this,Ft.STAT_EVENT,F),this.stat=ie}g(qa,O);function ar(F){const ie=Sr();Ke(ie,new qa(ie,F))}Ft.Ma="timingevent";function fn(F,ie){O.call(this,Ft.Ma,F),this.size=ie}g(fn,O);function $r(F,ie){if(typeof F!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){F()},ie)}function mn(){this.g=!0}mn.prototype.xa=function(){this.g=!1};function In(F,ie,pe,Pe,lt,yt){F.info(function(){if(F.g)if(yt)for(var Yt="",Qr=yt.split("&"),Sn=0;Sn<Qr.length;Sn++){var nn=Qr[Sn].split("=");if(1<nn.length){var ta=nn[0];nn=nn[1];var ha=ta.split("_");Yt=2<=ha.length&&ha[1]=="type"?Yt+(ta+"="+nn+"&"):Yt+(ta+"=redacted&")}}else Yt=null;else Yt=yt;return"XMLHTTP REQ ("+Pe+") [attempt "+lt+"]: "+ie+`
`+pe+`
`+Yt})}function $n(F,ie,pe,Pe,lt,yt,Yt){F.info(function(){return"XMLHTTP RESP ("+Pe+") [ attempt "+lt+"]: "+ie+`
`+pe+`
`+yt+" "+Yt})}function ke(F,ie,pe,Pe){F.info(function(){return"XMLHTTP TEXT ("+ie+"): "+Re(F,pe)+(Pe?" "+Pe:"")})}function $e(F,ie){F.info(function(){return"TIMEOUT: "+ie})}mn.prototype.info=function(){};function Re(F,ie){if(!F.g)return ie;if(!ie)return null;try{var pe=JSON.parse(ie);if(pe){for(F=0;F<pe.length;F++)if(Array.isArray(pe[F])){var Pe=pe[F];if(!(2>Pe.length)){var lt=Pe[1];if(Array.isArray(lt)&&!(1>lt.length)){var yt=lt[0];if(yt!="noop"&&yt!="stop"&&yt!="close")for(var Yt=1;Yt<lt.length;Yt++)lt[Yt]=""}}}}return ft(pe)}catch{return ie}}var Me={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},we={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xe;function De(){}g(De,Ct),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},xe=new De;function Ge(F,ie,pe,Pe){this.j=F,this.i=ie,this.l=pe,this.R=Pe||1,this.U=new He(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ue}function Ue(){this.i=null,this.g="",this.h=!1}var Ze={},rt={};function _t(F,ie,pe){F.L=1,F.v=el(Un(ie)),F.m=pe,F.P=!0,Bt(F,null)}function Bt(F,ie){F.F=Date.now(),Jt(F),F.A=Un(F.v);var pe=F.A,Pe=F.R;Array.isArray(Pe)||(Pe=[String(Pe)]),Hr(pe.i,"t",Pe),F.C=0,pe=F.j.J,F.h=new Ue,F.g=Ce(F.j,pe?ie:null,!F.m),0<F.O&&(F.M=new We(A(F.Y,F,F.g),F.O)),ie=F.U,pe=F.g,Pe=F.ca;var lt="readystatechange";Array.isArray(lt)||(lt&&(Tt[0]=lt.toString()),lt=Tt);for(var yt=0;yt<lt.length;yt++){var Yt=fe(pe,lt[yt],Pe||ie.handleEvent,!1,ie.h||ie);if(!Yt)break;ie.g[Yt.key]=Yt}ie=F.H?k(F.H):{},F.m?(F.u||(F.u="POST"),ie["Content-Type"]="application/x-www-form-urlencoded",F.g.ea(F.A,F.u,F.m,ie)):(F.u="GET",F.g.ea(F.A,F.u,null,ie)),Vn(),In(F.i,F.u,F.A,F.l,F.R,F.m)}Ge.prototype.ca=function(F){F=F.target;const ie=this.M;ie&&Fs(F)==3?ie.j():this.Y(F)},Ge.prototype.Y=function(F){try{if(F==this.g)e:{const ha=Fs(this.g);var ie=this.g.Ba();const mc=this.g.Z();if(!(3>ha)&&(ha!=3||this.g&&(this.h.h||this.g.oa()||WA(this.g)))){this.J||ha!=4||ie==7||(ie==8||0>=mc?Vn(3):Vn(2)),on(this);var pe=this.g.Z();this.X=pe;t:if(Kt(this)){var Pe=WA(this.g);F="";var lt=Pe.length,yt=Fs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),ln(this);var Yt="";break t}this.h.i=new l.TextDecoder}for(ie=0;ie<lt;ie++)this.h.h=!0,F+=this.h.i.decode(Pe[ie],{stream:!(yt&&ie==lt-1)});Pe.length=0,this.h.g+=F,this.C=0,Yt=this.h.g}else Yt=this.g.oa();if(this.o=pe==200,$n(this.i,this.u,this.A,this.l,this.R,ha,pe),this.o){if(this.T&&!this.K){t:{if(this.g){var Qr,Sn=this.g;if((Qr=Sn.g?Sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Qr)){var nn=Qr;break t}}nn=null}if(pe=nn)ke(this.i,this.l,pe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ka(this,pe);else{this.o=!1,this.s=3,ar(12),hn(this),ln(this);break e}}if(this.P){pe=!0;let ws;for(;!this.J&&this.C<Yt.length;)if(ws=Ut(this,Yt),ws==rt){ha==4&&(this.s=4,ar(14),pe=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}else if(ws==Ze){this.s=4,ar(15),ke(this.i,this.l,Yt,"[Invalid Chunk]"),pe=!1;break}else ke(this.i,this.l,ws,null),Ka(this,ws);if(Kt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ha!=4||Yt.length!=0||this.h.h||(this.s=1,ar(16),pe=!1),this.o=this.o&&pe,!pe)ke(this.i,this.l,Yt,"[Invalid Chunked Response]"),hn(this),ln(this);else if(0<Yt.length&&!this.W){this.W=!0;var ta=this.j;ta.g==this&&ta.ba&&!ta.M&&(ta.j.info("Great, no buffering proxy detected. Bytes received: "+Yt.length),zu(ta),ta.M=!0,ar(11))}}else ke(this.i,this.l,Yt,null),Ka(this,Yt);ha==4&&hn(this),this.o&&!this.J&&(ha==4?Gu(this.j,this):(this.o=!1,Jt(this)))}else Qu(this.g),pe==400&&0<Yt.indexOf("Unknown SID")?(this.s=3,ar(12)):(this.s=0,ar(13)),hn(this),ln(this)}}}catch{}finally{}};function Kt(F){return F.g?F.u=="GET"&&F.L!=2&&F.j.Ca:!1}function Ut(F,ie){var pe=F.C,Pe=ie.indexOf(`
`,pe);return Pe==-1?rt:(pe=Number(ie.substring(pe,Pe)),isNaN(pe)?Ze:(Pe+=1,Pe+pe>ie.length?rt:(ie=ie.slice(Pe,Pe+pe),F.C=Pe+pe,ie)))}Ge.prototype.cancel=function(){this.J=!0,hn(this)};function Jt(F){F.S=Date.now()+F.I,jr(F,F.I)}function jr(F,ie){if(F.B!=null)throw Error("WatchDog timer not null");F.B=$r(A(F.ba,F),ie)}function on(F){F.B&&(l.clearTimeout(F.B),F.B=null)}Ge.prototype.ba=function(){this.B=null;const F=Date.now();0<=F-this.S?($e(this.i,this.A),this.L!=2&&(Vn(),ar(17)),hn(this),this.s=2,ln(this)):jr(this,this.S-F)};function ln(F){F.j.G==0||F.J||Gu(F.j,F)}function hn(F){on(F);var ie=F.M;ie&&typeof ie.ma=="function"&&ie.ma(),F.M=null,Ie(F.U),F.g&&(ie=F.g,F.g=null,ie.abort(),ie.ma())}function Ka(F,ie){try{var pe=F.j;if(pe.G!=0&&(pe.g==F||ds(pe.h,F))){if(!F.K&&ds(pe.h,F)&&pe.G==3){try{var Pe=pe.Da.g.parse(ie)}catch{Pe=null}if(Array.isArray(Pe)&&Pe.length==3){var lt=Pe;if(lt[0]==0){e:if(!pe.u){if(pe.g)if(pe.g.F+3e3<F.F)Zc(pe),$f(pe);else break e;Vd(pe),ar(18)}}else pe.za=lt[1],0<pe.za-pe.T&&37500>lt[2]&&pe.F&&pe.v==0&&!pe.C&&(pe.C=$r(A(pe.Za,pe),6e3));if(1>=Oa(pe.h)&&pe.ca){try{pe.ca()}catch{}pe.ca=void 0}}else oo(pe,11)}else if((F.K||pe.g==F)&&Zc(pe),!N(ie))for(lt=pe.Da.g.parse(ie),ie=0;ie<lt.length;ie++){let nn=lt[ie];if(pe.T=nn[0],nn=nn[1],pe.G==2)if(nn[0]=="c"){pe.K=nn[1],pe.ia=nn[2];const ta=nn[3];ta!=null&&(pe.la=ta,pe.j.info("VER="+pe.la));const ha=nn[4];ha!=null&&(pe.Aa=ha,pe.j.info("SVER="+pe.Aa));const mc=nn[5];mc!=null&&typeof mc=="number"&&0<mc&&(Pe=1.5*mc,pe.L=Pe,pe.j.info("backChannelRequestTimeoutMs_="+Pe)),Pe=pe;const ws=F.g;if(ws){const al=ws.g?ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var yt=Pe.h;yt.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(yt.j=yt.l,yt.g=new Set,yt.h&&(la(yt,yt.h),yt.h=null))}if(Pe.D){const qu=ws.g?ws.g.getResponseHeader("X-HTTP-Session-Id"):null;qu&&(Pe.ya=qu,Pn(Pe.I,Pe.D,qu))}}pe.G=3,pe.l&&pe.l.ua(),pe.ba&&(pe.R=Date.now()-F.F,pe.j.info("Handshake RTT: "+pe.R+"ms")),Pe=pe;var Yt=F;if(Pe.qa=te(Pe,Pe.J?Pe.ia:null,Pe.W),Yt.K){fs(Pe.h,Yt);var Qr=Yt,Sn=Pe.L;Sn&&(Qr.I=Sn),Qr.B&&(on(Qr),Jt(Qr)),Pe.g=Yt}else Gf(Pe);0<pe.i.length&&zf(pe)}else nn[0]!="stop"&&nn[0]!="close"||oo(pe,7);else pe.G==3&&(nn[0]=="stop"||nn[0]=="close"?nn[0]=="stop"?oo(pe,7):Jc(pe):nn[0]!="noop"&&pe.l&&pe.l.ta(nn),pe.v=0)}}Vn(4)}catch{}}var Ci=class{constructor(F,ie){this.g=F,this.map=ie}};function Da(F){this.l=F||10,l.PerformanceNavigationTiming?(F=l.performance.getEntriesByType("navigation"),F=0<F.length&&(F[0].nextHopProtocol=="hq"||F[0].nextHopProtocol=="h2")):F=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=F?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function us(F){return F.h?!0:F.g?F.g.size>=F.j:!1}function Oa(F){return F.h?1:F.g?F.g.size:0}function ds(F,ie){return F.h?F.h==ie:F.g?F.g.has(ie):!1}function la(F,ie){F.g?F.g.add(ie):F.h=ie}function fs(F,ie){F.h&&F.h==ie?F.h=null:F.g&&F.g.has(ie)&&F.g.delete(ie)}Da.prototype.cancel=function(){if(this.i=Mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const F of this.g.values())F.cancel();this.g.clear()}};function Mu(F){if(F.h!=null)return F.i.concat(F.h.D);if(F.g!=null&&F.g.size!==0){let ie=F.i;for(const pe of F.g.values())ie=ie.concat(pe.D);return ie}return x(F.i)}function Pd(F){if(F.V&&typeof F.V=="function")return F.V();if(typeof Map<"u"&&F instanceof Map||typeof Set<"u"&&F instanceof Set)return Array.from(F.values());if(typeof F=="string")return F.split("");if(c(F)){for(var ie=[],pe=F.length,Pe=0;Pe<pe;Pe++)ie.push(F[Pe]);return ie}ie=[],pe=0;for(Pe in F)ie[pe++]=F[Pe];return ie}function $l(F){if(F.na&&typeof F.na=="function")return F.na();if(!F.V||typeof F.V!="function"){if(typeof Map<"u"&&F instanceof Map)return Array.from(F.keys());if(!(typeof Set<"u"&&F instanceof Set)){if(c(F)||typeof F=="string"){var ie=[];F=F.length;for(var pe=0;pe<F;pe++)ie.push(pe);return ie}ie=[],pe=0;for(const Pe in F)ie[pe++]=Pe;return ie}}}function kr(F,ie){if(F.forEach&&typeof F.forEach=="function")F.forEach(ie,void 0);else if(c(F)||typeof F=="string")Array.prototype.forEach.call(F,ie,void 0);else for(var pe=$l(F),Pe=Pd(F),lt=Pe.length,yt=0;yt<lt;yt++)ie.call(void 0,Pe[yt],pe&&pe[yt],F)}var rn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yn(F,ie){if(F){F=F.split("&");for(var pe=0;pe<F.length;pe++){var Pe=F[pe].indexOf("="),lt=null;if(0<=Pe){var yt=F[pe].substring(0,Pe);lt=F[pe].substring(Pe+1)}else yt=F[pe];ie(yt,lt?decodeURIComponent(lt.replace(/\+/g," ")):"")}}}function Ur(F){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,F instanceof Ur){this.h=F.h,Ei(this,F.j),this.o=F.o,this.g=F.g,Zo(this,F.s),this.l=F.l;var ie=F.i,pe=new cc;pe.i=ie.i,ie.g&&(pe.g=new Map(ie.g),pe.h=ie.h),Hi(this,pe),this.m=F.m}else F&&(ie=String(F).match(rn))?(this.h=!1,Ei(this,ie[1]||"",!0),this.o=Qi(ie[2]||""),this.g=Qi(ie[3]||"",!0),Zo(this,ie[4]),this.l=Qi(ie[5]||"",!0),Hi(this,ie[6]||"",!0),this.m=Qi(ie[7]||"")):(this.h=!1,this.i=new cc(null,this.h))}Ur.prototype.toString=function(){var F=[],ie=this.j;ie&&F.push(_o(ie,Rd,!0),":");var pe=this.g;return(pe||ie=="file")&&(F.push("//"),(ie=this.o)&&F.push(_o(ie,Rd,!0),"@"),F.push(encodeURIComponent(String(pe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),pe=this.s,pe!=null&&F.push(":",String(pe))),(pe=this.l)&&(this.g&&pe.charAt(0)!="/"&&F.push("/"),F.push(_o(pe,pe.charAt(0)=="/"?Kc:u0,!0))),(pe=this.i.toString())&&F.push("?",pe),(pe=this.m)&&F.push("#",_o(pe,Wc)),F.join("")};function Un(F){return new Ur(F)}function Ei(F,ie,pe){F.j=pe?Qi(ie,!0):ie,F.j&&(F.j=F.j.replace(/:$/,""))}function Zo(F,ie){if(ie){if(ie=Number(ie),isNaN(ie)||0>ie)throw Error("Bad port number "+ie);F.s=ie}else F.s=null}function Hi(F,ie,pe){ie instanceof cc?(F.i=ie,KA(F.i,F.h)):(pe||(ie=_o(ie,Vf)),F.i=new cc(ie,F.h))}function Pn(F,ie,pe){F.i.set(ie,pe)}function el(F){return Pn(F,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),F}function Qi(F,ie){return F?ie?decodeURI(F.replace(/%25/g,"%2525")):decodeURIComponent(F):""}function _o(F,ie,pe){return typeof F=="string"?(F=encodeURI(F).replace(ie,Fd),pe&&(F=F.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F):null}function Fd(F){return F=F.charCodeAt(0),"%"+(F>>4&15).toString(16)+(F&15).toString(16)}var Rd=/[#\/\?@]/g,u0=/[#\?:]/g,Kc=/[#\?]/g,Vf=/[#\?@]/g,Wc=/#/g;function cc(F,ie){this.h=this.g=null,this.i=F||null,this.j=!!ie}function wa(F){F.g||(F.g=new Map,F.h=0,F.i&&yn(F.i,function(ie,pe){F.add(decodeURIComponent(ie.replace(/\+/g," ")),pe)}))}e=cc.prototype,e.add=function(F,ie){wa(this),this.i=null,F=dc(this,F);var pe=this.g.get(F);return pe||this.g.set(F,pe=[]),pe.push(ie),this.h+=1,this};function Xc(F,ie){wa(F),ie=dc(F,ie),F.g.has(ie)&&(F.i=null,F.h-=F.g.get(ie).length,F.g.delete(ie))}function uc(F,ie){return wa(F),ie=dc(F,ie),F.g.has(ie)}e.forEach=function(F,ie){wa(this),this.g.forEach(function(pe,Pe){pe.forEach(function(lt){F.call(ie,lt,Pe,this)},this)},this)},e.na=function(){wa(this);const F=Array.from(this.g.values()),ie=Array.from(this.g.keys()),pe=[];for(let Pe=0;Pe<ie.length;Pe++){const lt=F[Pe];for(let yt=0;yt<lt.length;yt++)pe.push(ie[Pe])}return pe},e.V=function(F){wa(this);let ie=[];if(typeof F=="string")uc(this,F)&&(ie=ie.concat(this.g.get(dc(this,F))));else{F=Array.from(this.g.values());for(let pe=0;pe<F.length;pe++)ie=ie.concat(F[pe])}return ie},e.set=function(F,ie){return wa(this),this.i=null,F=dc(this,F),uc(this,F)&&(this.h-=this.g.get(F).length),this.g.set(F,[ie]),this.h+=1,this},e.get=function(F,ie){return F?(F=this.V(F),0<F.length?String(F[0]):ie):ie};function Hr(F,ie,pe){Xc(F,ie),0<pe.length&&(F.i=null,F.g.set(dc(F,ie),x(pe)),F.h+=pe.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const F=[],ie=Array.from(this.g.keys());for(var pe=0;pe<ie.length;pe++){var Pe=ie[pe];const yt=encodeURIComponent(String(Pe)),Yt=this.V(Pe);for(Pe=0;Pe<Yt.length;Pe++){var lt=yt;Yt[Pe]!==""&&(lt+="="+encodeURIComponent(String(Yt[Pe]))),F.push(lt)}}return this.i=F.join("&")};function dc(F,ie){return ie=String(ie),F.j&&(ie=ie.toLowerCase()),ie}function KA(F,ie){ie&&!F.j&&(wa(F),F.i=null,F.g.forEach(function(pe,Pe){var lt=Pe.toLowerCase();Pe!=lt&&(Xc(this,Pe),Hr(this,lt,pe))},F)),F.j=ie}function ao(F,ie){const pe=new mn;if(l.Image){const Pe=new Image;Pe.onload=m(To,pe,"TestLoadImage: loaded",!0,ie,Pe),Pe.onerror=m(To,pe,"TestLoadImage: error",!1,ie,Pe),Pe.onabort=m(To,pe,"TestLoadImage: abort",!1,ie,Pe),Pe.ontimeout=m(To,pe,"TestLoadImage: timeout",!1,ie,Pe),l.setTimeout(function(){Pe.ontimeout&&Pe.ontimeout()},1e4),Pe.src=F}else ie(!1)}function tl(F,ie){const pe=new mn,Pe=new AbortController,lt=setTimeout(()=>{Pe.abort(),To(pe,"TestPingServer: timeout",!1,ie)},1e4);fetch(F,{signal:Pe.signal}).then(yt=>{clearTimeout(lt),yt.ok?To(pe,"TestPingServer: ok",!0,ie):To(pe,"TestPingServer: server error",!1,ie)}).catch(()=>{clearTimeout(lt),To(pe,"TestPingServer: error",!1,ie)})}function To(F,ie,pe,Pe,lt){try{lt&&(lt.onload=null,lt.onerror=null,lt.onabort=null,lt.ontimeout=null),Pe(pe)}catch{}}function fc(){this.g=new et}function rl(F,ie,pe){const Pe=pe||"";try{kr(F,function(lt,yt){let Yt=lt;u(lt)&&(Yt=ft(lt)),ie.push(Pe+yt+"="+encodeURIComponent(Yt))})}catch(lt){throw ie.push(Pe+"type="+encodeURIComponent("_badmap")),lt}}function Uu(F){this.l=F.Ub||null,this.j=F.eb||!1}g(Uu,Ct),Uu.prototype.g=function(){return new Yc(this.l,this.j)},Uu.prototype.i=function(F){return function(){return F}}({});function Yc(F,ie){Xe.call(this),this.D=F,this.o=ie,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Yc,Xe),e=Yc.prototype,e.open=function(F,ie){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=F,this.A=ie,this.readyState=1,so(this)},e.send=function(F){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ie={headers:this.u,method:this.B,credentials:this.m,cache:void 0};F&&(ie.body=F),(this.D||l).fetch(new Request(this.A,ie)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nl(this)),this.readyState=0},e.Sa=function(F){if(this.g&&(this.l=F,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=F.headers,this.readyState=2,so(this)),this.g&&(this.readyState=3,so(this),this.g)))if(this.responseType==="arraybuffer")F.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in F){if(this.j=F.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;d0(this)}else F.text().then(this.Ra.bind(this),this.ga.bind(this))};function d0(F){F.j.read().then(F.Pa.bind(F)).catch(F.ga.bind(F))}e.Pa=function(F){if(this.g){if(this.o&&F.value)this.response.push(F.value);else if(!this.o){var ie=F.value?F.value:new Uint8Array(0);(ie=this.v.decode(ie,{stream:!F.done}))&&(this.response=this.responseText+=ie)}F.done?nl(this):so(this),this.readyState==3&&d0(this)}},e.Ra=function(F){this.g&&(this.response=this.responseText=F,nl(this))},e.Qa=function(F){this.g&&(this.response=F,nl(this))},e.ga=function(){this.g&&nl(this)};function nl(F){F.readyState=4,F.l=null,F.j=null,F.v=null,so(F)}e.setRequestHeader=function(F,ie){this.u.append(F,ie)},e.getResponseHeader=function(F){return this.h&&this.h.get(F.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const F=[],ie=this.h.entries();for(var pe=ie.next();!pe.done;)pe=pe.value,F.push(pe[0]+": "+pe[1]),pe=ie.next();return F.join(`\r
`)};function so(F){F.onreadystatechange&&F.onreadystatechange.call(F)}Object.defineProperty(Yc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(F){this.m=F?"include":"same-origin"}});function hc(F){let ie="";return I(F,function(pe,Pe){ie+=Pe,ie+=":",ie+=pe,ie+=`\r
`}),ie}function Ps(F,ie,pe){e:{for(Pe in pe){var Pe=!1;break e}Pe=!0}Pe||(pe=hc(pe),typeof F=="string"?pe!=null&&encodeURIComponent(String(pe)):Pn(F,ie,pe))}function kn(F){Xe.call(this),this.headers=new Map,this.o=F||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(kn,Xe);var Hu=/^https?$/i,Ac=["POST","PUT"];e=kn.prototype,e.Ha=function(F){this.J=F},e.ea=function(F,ie,pe,Pe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+F);ie=ie?ie.toUpperCase():"GET",this.D=F,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xe.g(),this.v=this.o?St(this.o):St(xe),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(ie,String(F),!0),this.B=!1}catch(yt){f0(this,yt);return}if(F=pe||"",pe=new Map(this.headers),Pe)if(Object.getPrototypeOf(Pe)===Object.prototype)for(var lt in Pe)pe.set(lt,Pe[lt]);else if(typeof Pe.keys=="function"&&typeof Pe.get=="function")for(const yt of Pe.keys())pe.set(yt,Pe.get(yt));else throw Error("Unknown input type for opt_headers: "+String(Pe));Pe=Array.from(pe.keys()).find(yt=>yt.toLowerCase()=="content-type"),lt=l.FormData&&F instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ac,ie,void 0))||Pe||lt||pe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[yt,Yt]of pe)this.g.setRequestHeader(yt,Yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{io(this),this.u=!0,this.g.send(F),this.u=!1}catch(yt){f0(this,yt)}};function f0(F,ie){F.h=!1,F.g&&(F.j=!0,F.g.abort(),F.j=!1),F.l=ie,F.m=5,Ld(F),zl(F)}function Ld(F){F.A||(F.A=!0,Ke(F,"complete"),Ke(F,"error"))}e.abort=function(F){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=F||7,Ke(this,"complete"),Ke(this,"abort"),zl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zl(this,!0)),kn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Md(this):this.bb())},e.bb=function(){Md(this)};function Md(F){if(F.h&&typeof o<"u"&&(!F.v[1]||Fs(F)!=4||F.Z()!=2)){if(F.u&&Fs(F)==4)Je(F.Ea,0,F);else if(Ke(F,"readystatechange"),Fs(F)==4){F.h=!1;try{const Yt=F.Z();e:switch(Yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ie=!0;break e;default:ie=!1}var pe;if(!(pe=ie)){var Pe;if(Pe=Yt===0){var lt=String(F.D).match(rn)[1]||null;!lt&&l.self&&l.self.location&&(lt=l.self.location.protocol.slice(0,-1)),Pe=!Hu.test(lt?lt.toLowerCase():"")}pe=Pe}if(pe)Ke(F,"complete"),Ke(F,"success");else{F.m=6;try{var yt=2<Fs(F)?F.g.statusText:""}catch{yt=""}F.l=yt+" ["+F.Z()+"]",Ld(F)}}finally{zl(F)}}}}function zl(F,ie){if(F.g){io(F);const pe=F.g,Pe=F.v[0]?()=>{}:null;F.g=null,F.v=null,ie||Ke(F,"ready");try{pe.onreadystatechange=Pe}catch{}}}function io(F){F.I&&(l.clearTimeout(F.I),F.I=null)}e.isActive=function(){return!!this.g};function Fs(F){return F.g?F.g.readyState:0}e.Z=function(){try{return 2<Fs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(F){if(this.g){var ie=this.g.responseText;return F&&ie.indexOf(F)==0&&(ie=ie.substring(F.length)),vt(ie)}};function WA(F){try{if(!F.g)return null;if("response"in F.g)return F.g.response;switch(F.H){case"":case"text":return F.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in F.g)return F.g.mozResponseArrayBuffer}return null}catch{return null}}function Qu(F){const ie={};F=(F.g&&2<=Fs(F)&&F.g.getAllResponseHeaders()||"").split(`\r
`);for(let Pe=0;Pe<F.length;Pe++){if(N(F[Pe]))continue;var pe=P(F[Pe]);const lt=pe[0];if(pe=pe[1],typeof pe!="string")continue;pe=pe.trim();const yt=ie[lt]||[];ie[lt]=yt,yt.push(pe)}T(ie,function(Pe){return Pe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(F,ie,pe){return pe&&pe.internalChannelParams&&pe.internalChannelParams[F]||ie}function Vu(F){this.Aa=0,this.i=[],this.j=new mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vi("failFast",!1,F),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vi("baseRetryDelayMs",5e3,F),this.cb=Vi("retryDelaySeedMs",1e4,F),this.Wa=Vi("forwardChannelMaxRetries",2,F),this.wa=Vi("forwardChannelRequestTimeoutMs",2e4,F),this.pa=F&&F.xmlHttpFactory||void 0,this.Xa=F&&F.Tb||void 0,this.Ca=F&&F.useFetchStreams||!1,this.L=void 0,this.J=F&&F.supportsCrossDomainXhr||!1,this.K="",this.h=new Da(F&&F.concurrentRequestLimit),this.Da=new fc,this.P=F&&F.fastHandshake||!1,this.O=F&&F.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=F&&F.Rb||!1,F&&F.xa&&this.j.xa(),F&&F.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&F&&F.detectBufferingProxy||!1,this.ja=void 0,F&&F.longPollingTimeout&&0<F.longPollingTimeout&&(this.ja=F.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Vu.prototype,e.la=8,e.G=1,e.connect=function(F,ie,pe,Pe){ar(0),this.W=F,this.H=ie||{},pe&&Pe!==void 0&&(this.H.OSID=pe,this.H.OAID=Pe),this.F=this.X,this.I=te(this,null,this.W),zf(this)};function Jc(F){if(Ud(F),F.G==3){var ie=F.U++,pe=Un(F.I);if(Pn(pe,"SID",F.K),Pn(pe,"RID",ie),Pn(pe,"TYPE","terminate"),$u(F,pe),ie=new Ge(F,F.j,ie),ie.L=2,ie.v=el(Un(pe)),pe=!1,l.navigator&&l.navigator.sendBeacon)try{pe=l.navigator.sendBeacon(ie.v.toString(),"")}catch{}!pe&&l.Image&&(new Image().src=ie.v,pe=!0),pe||(ie.g=Ce(ie.j,null),ie.g.ea(ie.v)),ie.F=Date.now(),Jt(ie)}qf(F)}function $f(F){F.g&&(zu(F),F.g.cancel(),F.g=null)}function Ud(F){$f(F),F.u&&(l.clearTimeout(F.u),F.u=null),Zc(F),F.h.cancel(),F.s&&(typeof F.s=="number"&&l.clearTimeout(F.s),F.s=null)}function zf(F){if(!us(F.h)&&!F.s){F.s=!0;var ie=F.Ga;z||V(),W||(z(),W=!0),Z.add(ie,F),F.B=0}}function h0(F,ie){return Oa(F.h)>=F.h.j-(F.s?1:0)?!1:F.s?(F.i=ie.D.concat(F.i),!0):F.G==1||F.G==2||F.B>=(F.Va?0:F.Wa)?!1:(F.s=$r(A(F.Ga,F,ie),$d(F,F.B)),F.B++,!0)}e.Ga=function(F){if(this.s)if(this.s=null,this.G==1){if(!F){this.U=Math.floor(1e5*Math.random()),F=this.U++;const lt=new Ge(this,this.j,F);let yt=this.o;if(this.S&&(yt?(yt=k(yt),M(yt,this.S)):yt=this.S),this.m!==null||this.O||(lt.H=yt,yt=null),this.P)e:{for(var ie=0,pe=0;pe<this.i.length;pe++){t:{var Pe=this.i[pe];if("__data__"in Pe.map&&(Pe=Pe.map.__data__,typeof Pe=="string")){Pe=Pe.length;break t}Pe=void 0}if(Pe===void 0)break;if(ie+=Pe,4096<ie){ie=pe;break e}if(ie===4096||pe===this.i.length-1){ie=pe+1;break e}}ie=1e3}else ie=1e3;ie=Qd(this,lt,ie),pe=Un(this.I),Pn(pe,"RID",F),Pn(pe,"CVER",22),this.D&&Pn(pe,"X-HTTP-Session-Id",this.D),$u(this,pe),yt&&(this.O?ie="headers="+encodeURIComponent(String(hc(yt)))+"&"+ie:this.m&&Ps(pe,this.m,yt)),la(this.h,lt),this.Ua&&Pn(pe,"TYPE","init"),this.P?(Pn(pe,"$req",ie),Pn(pe,"SID","null"),lt.T=!0,_t(lt,pe,null)):_t(lt,pe,ie),this.G=2}}else this.G==3&&(F?Hd(this,F):this.i.length==0||us(this.h)||Hd(this))};function Hd(F,ie){var pe;ie?pe=ie.l:pe=F.U++;const Pe=Un(F.I);Pn(Pe,"SID",F.K),Pn(Pe,"RID",pe),Pn(Pe,"AID",F.T),$u(F,Pe),F.m&&F.o&&Ps(Pe,F.m,F.o),pe=new Ge(F,F.j,pe,F.B+1),F.m===null&&(pe.H=F.o),ie&&(F.i=ie.D.concat(F.i)),ie=Qd(F,pe,1e3),pe.I=Math.round(.5*F.wa)+Math.round(.5*F.wa*Math.random()),la(F.h,pe),_t(pe,Pe,ie)}function $u(F,ie){F.H&&I(F.H,function(pe,Pe){Pn(ie,Pe,pe)}),F.l&&kr({},function(pe,Pe){Pn(ie,Pe,pe)})}function Qd(F,ie,pe){pe=Math.min(F.i.length,pe);var Pe=F.l?A(F.l.Na,F.l,F):null;e:{var lt=F.i;let yt=-1;for(;;){const Yt=["count="+pe];yt==-1?0<pe?(yt=lt[0].g,Yt.push("ofs="+yt)):yt=0:Yt.push("ofs="+yt);let Qr=!0;for(let Sn=0;Sn<pe;Sn++){let nn=lt[Sn].g;const ta=lt[Sn].map;if(nn-=yt,0>nn)yt=Math.max(0,lt[Sn].g-100),Qr=!1;else try{rl(ta,Yt,"req"+nn+"_")}catch{Pe&&Pe(ta)}}if(Qr){Pe=Yt.join("&");break e}}}return F=F.i.splice(0,pe),ie.D=F,Pe}function Gf(F){if(!F.g&&!F.u){F.Y=1;var ie=F.Fa;z||V(),W||(z(),W=!0),Z.add(ie,F),F.v=0}}function Vd(F){return F.g||F.u||3<=F.v?!1:(F.Y++,F.u=$r(A(F.Fa,F),$d(F,F.v)),F.v++,!0)}e.Fa=function(){if(this.u=null,XA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var F=2*this.R;this.j.info("BP detection timer enabled: "+F),this.A=$r(A(this.ab,this),F)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ar(10),$f(this),XA(this))};function zu(F){F.A!=null&&(l.clearTimeout(F.A),F.A=null)}function XA(F){F.g=new Ge(F,F.j,"rpc",F.Y),F.m===null&&(F.g.H=F.o),F.g.O=0;var ie=Un(F.qa);Pn(ie,"RID","rpc"),Pn(ie,"SID",F.K),Pn(ie,"AID",F.T),Pn(ie,"CI",F.F?"0":"1"),!F.F&&F.ja&&Pn(ie,"TO",F.ja),Pn(ie,"TYPE","xmlhttp"),$u(F,ie),F.m&&F.o&&Ps(ie,F.m,F.o),F.L&&(F.g.I=F.L);var pe=F.g;F=F.ia,pe.L=1,pe.v=el(Un(ie)),pe.m=null,pe.P=!0,Bt(pe,F)}e.Za=function(){this.C!=null&&(this.C=null,$f(this),Vd(this),ar(19))};function Zc(F){F.C!=null&&(l.clearTimeout(F.C),F.C=null)}function Gu(F,ie){var pe=null;if(F.g==ie){Zc(F),zu(F),F.g=null;var Pe=2}else if(ds(F.h,ie))pe=ie.D,fs(F.h,ie),Pe=1;else return;if(F.G!=0){if(ie.o)if(Pe==1){pe=ie.m?ie.m.length:0,ie=Date.now()-ie.F;var lt=F.B;Pe=Sr(),Ke(Pe,new fn(Pe,pe)),zf(F)}else Gf(F);else if(lt=ie.s,lt==3||lt==0&&0<ie.X||!(Pe==1&&h0(F,ie)||Pe==2&&Vd(F)))switch(pe&&0<pe.length&&(ie=F.h,ie.i=ie.i.concat(pe)),lt){case 1:oo(F,5);break;case 4:oo(F,10);break;case 3:oo(F,6);break;default:oo(F,2)}}}function $d(F,ie){let pe=F.Ta+Math.floor(Math.random()*F.cb);return F.isActive()||(pe*=2),pe*ie}function oo(F,ie){if(F.j.info("Error code "+ie),ie==2){var pe=A(F.fb,F),Pe=F.Xa;const lt=!Pe;Pe=new Ur(Pe||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ei(Pe,"https"),el(Pe),lt?ao(Pe.toString(),pe):tl(Pe.toString(),pe)}else ar(2);F.G=0,F.l&&F.l.sa(ie),qf(F),Ud(F)}e.fb=function(F){F?(this.j.info("Successfully pinged google.com"),ar(2)):(this.j.info("Failed to ping google.com"),ar(1))};function qf(F){if(F.G=0,F.ka=[],F.l){const ie=Mu(F.h);(ie.length!=0||F.i.length!=0)&&(v(F.ka,ie),v(F.ka,F.i),F.h.i.length=0,x(F.i),F.i.length=0),F.l.ra()}}function te(F,ie,pe){var Pe=pe instanceof Ur?Un(pe):new Ur(pe);if(Pe.g!="")ie&&(Pe.g=ie+"."+Pe.g),Zo(Pe,Pe.s);else{var lt=l.location;Pe=lt.protocol,ie=ie?ie+"."+lt.hostname:lt.hostname,lt=+lt.port;var yt=new Ur(null);Pe&&Ei(yt,Pe),ie&&(yt.g=ie),lt&&Zo(yt,lt),pe&&(yt.l=pe),Pe=yt}return pe=F.D,ie=F.ya,pe&&ie&&Pn(Pe,pe,ie),Pn(Pe,"VER",F.la),$u(F,Pe),Pe}function Ce(F,ie,pe){if(ie&&!F.J)throw Error("Can't create secondary domain capable XhrIo object.");return ie=F.Ca&&!F.pa?new kn(new Uu({eb:pe})):new kn(F.pa),ie.Ha(F.J),ie}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function qe(){}e=qe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function tt(){}tt.prototype.g=function(F,ie){return new ct(F,ie)};function ct(F,ie){Xe.call(this),this.g=new Vu(ie),this.l=F,this.h=ie&&ie.messageUrlParams||null,F=ie&&ie.messageHeaders||null,ie&&ie.clientProtocolHeaderRequired&&(F?F["X-Client-Protocol"]="webchannel":F={"X-Client-Protocol":"webchannel"}),this.g.o=F,F=ie&&ie.initMessageHeaders||null,ie&&ie.messageContentType&&(F?F["X-WebChannel-Content-Type"]=ie.messageContentType:F={"X-WebChannel-Content-Type":ie.messageContentType}),ie&&ie.va&&(F?F["X-WebChannel-Client-Profile"]=ie.va:F={"X-WebChannel-Client-Profile":ie.va}),this.g.S=F,(F=ie&&ie.Sb)&&!N(F)&&(this.g.m=F),this.v=ie&&ie.supportsCrossDomainXhr||!1,this.u=ie&&ie.sendRawJson||!1,(ie=ie&&ie.httpSessionIdParam)&&!N(ie)&&(this.g.D=ie,F=this.h,F!==null&&ie in F&&(F=this.h,ie in F&&delete F[ie])),this.j=new lr(this)}g(ct,Xe),ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ct.prototype.close=function(){Jc(this.g)},ct.prototype.o=function(F){var ie=this.g;if(typeof F=="string"){var pe={};pe.__data__=F,F=pe}else this.u&&(pe={},pe.__data__=ft(F),F=pe);ie.i.push(new Ci(ie.Ya++,F)),ie.G==3&&zf(ie)},ct.prototype.N=function(){this.g.l=null,delete this.j,Jc(this.g),delete this.g,ct.aa.N.call(this)};function It(F){fr.call(this),F.__headers__&&(this.headers=F.__headers__,this.statusCode=F.__status__,delete F.__headers__,delete F.__status__);var ie=F.__sm__;if(ie){e:{for(const pe in ie){F=pe;break e}F=void 0}(this.i=F)&&(F=this.i,ie=ie!==null&&F in ie?ie[F]:void 0),this.data=ie}else this.data=F}g(It,fr);function Xt(){Zt.call(this),this.status=1}g(Xt,Zt);function lr(F){this.g=F}g(lr,qe),lr.prototype.ua=function(){Ke(this.g,"a")},lr.prototype.ta=function(F){Ke(this.g,new It(F))},lr.prototype.sa=function(F){Ke(this.g,new Xt)},lr.prototype.ra=function(){Ke(this.g,"b")},tt.prototype.createWebChannel=tt.prototype.g,ct.prototype.send=ct.prototype.o,ct.prototype.open=ct.prototype.m,ct.prototype.close=ct.prototype.close,dse=function(){return new tt},use=function(){return Sr()},cse=Ft,aF={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,SS=Me,we.COMPLETE="complete",lse=we,ot.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,x2=ot,kn.prototype.listenOnce=kn.prototype.L,kn.prototype.getLastError=kn.prototype.Ka,kn.prototype.getLastErrorCode=kn.prototype.Ba,kn.prototype.getStatus=kn.prototype.Z,kn.prototype.getResponseJson=kn.prototype.Oa,kn.prototype.getResponseText=kn.prototype.oa,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Ha,ose=kn}).apply(typeof Uj<"u"?Uj:typeof self<"u"?self:typeof window<"u"?window:{});const bz="@firebase/firestore",yz="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};yl.UNAUTHENTICATED=new yl(null),yl.GOOGLE_CREDENTIALS=new yl("google-credentials-uid"),yl.FIRST_PARTY=new yl("first-party-uid"),yl.MOCK_USER=new yl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let my="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=new U4("@firebase/firestore");function wb(){return yp.logLevel}function GCe(e){yp.setLogLevel(e)}function yr(e,...t){if(yp.logLevel<=Rn.DEBUG){const r=t.map(J8);yp.debug(`Firestore (${my}): ${e}`,...r)}}function xA(e,...t){if(yp.logLevel<=Rn.ERROR){const r=t.map(J8);yp.error(`Firestore (${my}): ${e}`,...r)}}function Bx(e,...t){if(yp.logLevel<=Rn.WARN){const r=t.map(J8);yp.warn(`Firestore (${my}): ${e}`,...r)}}function J8(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,fse(e,n,r)}function fse(e,t,r){let n=`FIRESTORE (${my}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw xA(n),new Error(n)}function ba(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||fse(t,a,n)}function un(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ir extends Ff{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ase{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(yl.UNAUTHENTICATED))}shutdown(){}}class qCe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class KCe{constructor(t){this.t=t,this.currentUser=yl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ba(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new nA;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nA,t.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{yr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(yr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nA)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(yr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ba(typeof n.accessToken=="string",31837,{l:n}),new hse(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ba(t===null||typeof t=="string",2055,{h:t}),new yl(t)}}class WCe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=yl.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XCe{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new WCe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(yl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wz{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YCe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bu(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){ba(this.o===void 0,3512);const n=s=>{s.error!=null&&yr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,yr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{yr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):yr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wz(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ba(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new wz(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JCe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=JCe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function Ln(e,t){return e<t?-1:e>t?1:0}function sF(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return UI(a)===UI(s)?Ln(a,s):UI(a)?1:-1}return Ln(e.length,t.length)}const ZCe=55296,eEe=57343;function UI(e){const t=e.charCodeAt(0);return t>=ZCe&&t<=eEe}function k1(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz="__name__";class Nh{constructor(t,r,n){r===void 0?r=0:r>t.length&&Zr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Zr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return Nh.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Nh?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=Nh.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return Ln(t.length,r.length)}static compareSegments(t,r){const n=Nh.isNumericId(t),a=Nh.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Nh.extractNumericId(t).compare(Nh.extractNumericId(r)):sF(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return cp.fromString(t.substring(4,t.length-2))}}class $a extends Nh{construct(t,r,n){return new $a(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new ir(Rt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new $a(r)}static emptyPath(){return new $a([])}}const tEe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vo extends Nh{construct(t,r,n){return new vo(t,r,n)}static isValidIdentifier(t){return tEe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nz}static keyField(){return new vo([Nz])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new ir(Rt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<t.length;){const l=t[a];if(l==="\\"){if(a+1===t.length)throw new ir(Rt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ir(Rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new ir(Rt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new vo(r)}static emptyPath(){return new vo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t){this.path=t}static fromPath(t){return new Ir($a.fromString(t))}static fromName(t){return new Ir($a.fromString(t).popFirst(5))}static empty(){return new Ir($a.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&$a.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return $a.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ir(new $a(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mse(e,t,r){if(!r)throw new ir(Rt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function pse(e,t,r,n){if(t===!0&&n===!0)throw new ir(Rt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function Cz(e){if(!Ir.isDocumentKey(e))throw new ir(Rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ez(e){if(Ir.isDocumentKey(e))throw new ir(Rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function gse(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function q4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Zr(12329,{type:typeof e})}function Pl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ir(Rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=q4(e);throw new ir(Rt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function rEe(e,t){if(t<=0)throw new ir(Rt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(e,t){const r={typeString:e};return t&&(r.value=t),r}function UC(e,t){if(!gse(e))throw new ir(Rt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const o=e[n];if(a&&typeof o!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new ir(Rt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=-62135596800,kz=1e6;class wr{static now(){return wr.fromMillis(Date.now())}static fromDate(t){return wr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*kz);return new wr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new ir(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ir(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<jz)throw new ir(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ir(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kz}_compareTo(t){return this.seconds===t.seconds?Ln(this.nanoseconds,t.nanoseconds):Ln(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(UC(t,wr._jsonSchema))return new wr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-jz;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wr._jsonSchemaVersion="firestore/timestamp/1.0",wr._jsonSchema={type:Mi("string",wr._jsonSchemaVersion),seconds:Mi("number"),nanoseconds:Mi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{static fromTimestamp(t){return new sn(t)}static min(){return new sn(new wr(0,0))}static max(){return new sn(new wr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=-1;function nEe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=sn.fromTimestamp(n===1e9?new wr(r+1,0):new wr(r,n));return new wp(a,Ir.empty(),t)}function aEe(e){return new wp(e.readTime,e.key,IN)}class wp{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new wp(sn.min(),Ir.empty(),IN)}static max(){return new wp(sn.max(),Ir.empty(),IN)}}function sEe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=Ir.comparator(e.documentKey,t.documentKey),r!==0?r:Ln(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iEe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oEe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function py(e){if(e.code!==Rt.FAILED_PRECONDITION||e.message!==iEe)throw e;yr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Zr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new qt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof qt?r:qt.resolve(r)}catch(r){return qt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):qt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):qt.reject(r)}static resolve(t){return new qt((r,n)=>{r(t)})}static reject(t){return new qt((r,n)=>{n(t)})}static waitFor(t){return new qt((r,n)=>{let a=0,s=0,o=!1;t.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(t){let r=qt.resolve(!1);for(const n of t)r=r.next(a=>a?qt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new qt((n,a)=>{const s=t.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(t,r){return new qt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function lEe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function gy(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}K4.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=-1;function W4(e){return e==null}function C5(e){return e===0&&1/e==-1/0}function cEe(e){return typeof e=="number"&&Number.isInteger(e)&&!C5(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xse="";function uEe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=Sz(t)),t=dEe(e.get(r),t);return Sz(t)}function dEe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case xse:r+="";break;default:r+=s}}return r}function Sz(e){return e+xse+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _z(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Qp(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function vse(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(t,r){this.comparator=t,this.root=r||Vo.EMPTY}insert(t,r){return new Is(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Vo.BLACK,null,null))}remove(t){return new Is(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Hj(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Hj(this.root,t,this.comparator,!1)}getReverseIterator(){return new Hj(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Hj(this.root,t,this.comparator,!0)}}class Hj{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Vo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??Vo.RED,this.left=a??Vo.EMPTY,this.right=s??Vo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new Vo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Vo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return Vo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Vo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Vo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Zr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Zr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Zr(27949);return t+(this.isRed()?0:1)}}Vo.EMPTY=null,Vo.RED=!0,Vo.BLACK=!1;Vo.EMPTY=new class{constructor(){this.size=0}get key(){throw Zr(57766)}get value(){throw Zr(16141)}get color(){throw Zr(16727)}get left(){throw Zr(29726)}get right(){throw Zr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new Vo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this.comparator=t,this.data=new Is(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new Tz(this.data.getIterator())}getIteratorFrom(t){return new Tz(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Yi)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Yi(this.comparator);return r.data=t,r}}class Tz{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t){this.fields=t,t.sort(vo.comparator)}static empty(){return new ju([])}unionWith(t){let r=new Yi(vo.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new ju(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return k1(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bse extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bse("Invalid base64 string: "+s):s}}(t);return new Co(r)}static fromUint8Array(t){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(t);return new Co(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ln(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Co.EMPTY_BYTE_STRING=new Co("");const fEe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Np(e){if(ba(!!e,39018),typeof e=="string"){let t=0;const r=fEe.exec(e);if(ba(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:hi(e.seconds),nanos:hi(e.nanos)}}function hi(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Cp(e){return typeof e=="string"?Co.fromBase64String(e):Co.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yse="server_timestamp",wse="__type__",Nse="__previous_value__",Cse="__local_write_time__";function X4(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[wse])==null?void 0:n.stringValue)===yse}function Y4(e){const t=e.mapValue.fields[Nse];return X4(t)?Y4(t):t}function DN(e){const t=Np(e.mapValue.fields[Cse].timestampValue);return new wr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hEe{constructor(t,r,n,a,s,o,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const E5="(default)";class S1{constructor(t,r){this.projectId=t,this.database=r||E5}static empty(){return new S1("","")}get isDefaultDatabase(){return this.database===E5}isEqual(t){return t instanceof S1&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ese="__type__",AEe="__max__",Qj={mapValue:{}},jse="__vector__",j5="value";function Ep(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?X4(e)?4:pEe(e)?9007199254740991:mEe(e)?10:11:Zr(28295,{value:e})}function Zh(e,t){if(e===t)return!0;const r=Ep(e);if(r!==Ep(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return DN(e).isEqual(DN(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=Np(a.timestampValue),l=Np(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return Cp(a.bytesValue).isEqual(Cp(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return hi(a.geoPointValue.latitude)===hi(s.geoPointValue.latitude)&&hi(a.geoPointValue.longitude)===hi(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return hi(a.integerValue)===hi(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=hi(a.doubleValue),l=hi(s.doubleValue);return o===l?C5(o)===C5(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return k1(e.arrayValue.values||[],t.arrayValue.values||[],Zh);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(_z(o)!==_z(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Zh(o[c],l[c])))return!1;return!0}(e,t);default:return Zr(52216,{left:e})}}function ON(e,t){return(e.values||[]).find(r=>Zh(r,t))!==void 0}function _1(e,t){if(e===t)return 0;const r=Ep(e),n=Ep(t);if(r!==n)return Ln(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ln(e.booleanValue,t.booleanValue);case 2:return function(s,o){const l=hi(s.integerValue||s.doubleValue),c=hi(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return Bz(e.timestampValue,t.timestampValue);case 4:return Bz(DN(e),DN(t));case 5:return sF(e.stringValue,t.stringValue);case 6:return function(s,o){const l=Cp(s),c=Cp(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Ln(l[u],c[u]);if(d!==0)return d}return Ln(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const l=Ln(hi(s.latitude),hi(o.latitude));return l!==0?l:Ln(hi(s.longitude),hi(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Iz(e.arrayValue,t.arrayValue);case 10:return function(s,o){var A,m,g,x;const l=s.fields||{},c=o.fields||{},u=(A=l[j5])==null?void 0:A.arrayValue,d=(m=c[j5])==null?void 0:m.arrayValue,f=Ln(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:Iz(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===Qj.mapValue&&o===Qj.mapValue)return 0;if(s===Qj.mapValue)return 1;if(o===Qj.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const A=sF(c[f],d[f]);if(A!==0)return A;const m=_1(l[c[f]],u[d[f]]);if(m!==0)return m}return Ln(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Zr(23264,{he:r})}}function Bz(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ln(e,t);const r=Np(e),n=Np(t),a=Ln(r.seconds,n.seconds);return a!==0?a:Ln(r.nanos,n.nanos)}function Iz(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=_1(r[a],n[a]);if(s)return s}return Ln(r.length,n.length)}function T1(e){return iF(e)}function iF(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=Np(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Cp(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return Ir.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=iF(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${iF(r.fields[o])}`;return a+"}"}(e.mapValue):Zr(61005,{value:e})}function _S(e){switch(Ep(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Y4(e);return t?16+_S(t):16;case 5:return 2*e.stringValue.length;case 6:return Cp(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+_S(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return Qp(n.fields,(s,o)=>{a+=s.length+_S(o)}),a}(e.mapValue);default:throw Zr(13486,{value:e})}}function k5(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function oF(e){return!!e&&"integerValue"in e}function eM(e){return!!e&&"arrayValue"in e}function Dz(e){return!!e&&"nullValue"in e}function Oz(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function TS(e){return!!e&&"mapValue"in e}function mEe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[Ese])==null?void 0:n.stringValue)===jse}function z2(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Qp(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=z2(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=z2(e.arrayValue.values[r]);return t}return{...e}}function pEe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===AEe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t){this.value=t}static empty(){return new Ic({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!TS(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=z2(r)}setAll(t){let r=vo.emptyPath(),n={},a=[];t.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=z2(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());TS(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Zh(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];TS(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){Qp(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Ic(z2(this.value))}}function kse(e){const t=[];return Qp(e.fields,(r,n)=>{const a=new vo([r]);if(TS(n)){const s=kse(n.mapValue).fields;if(s.length===0)t.push(a);else for(const o of s)t.push(a.child(o))}else t.push(a)}),new ju(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,r,n,a,s,o,l){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new jl(t,0,sn.min(),sn.min(),sn.min(),Ic.empty(),0)}static newFoundDocument(t,r,n,a){return new jl(t,1,r,sn.min(),n,a,0)}static newNoDocument(t,r){return new jl(t,2,r,sn.min(),sn.min(),Ic.empty(),0)}static newUnknownDocument(t,r){return new jl(t,3,r,sn.min(),sn.min(),Ic.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(sn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ic.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ic.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof jl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new jl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(t,r){this.position=t,this.inclusive=r}}function Pz(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],o=e.position[a];if(s.field.isKeyField()?n=Ir.comparator(Ir.fromName(o.referenceValue),r.key):n=_1(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Fz(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!Zh(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(t,r="asc"){this.field=t,this.dir=r}}function gEe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sse{}class Ri extends Sse{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new vEe(t,r,n):r==="array-contains"?new wEe(t,n):r==="in"?new NEe(t,n):r==="not-in"?new CEe(t,n):r==="array-contains-any"?new EEe(t,n):new Ri(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new bEe(t,n):new yEe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(_1(r,this.value)):r!==null&&Ep(this.value)===Ep(r)&&this.matchesComparison(_1(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Zr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bf extends Sse{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Bf(t,r)}matches(t){return _se(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _se(e){return e.op==="and"}function Tse(e){return xEe(e)&&_se(e)}function xEe(e){for(const t of e.filters)if(t instanceof Bf)return!1;return!0}function lF(e){if(e instanceof Ri)return e.field.canonicalString()+e.op.toString()+T1(e.value);if(Tse(e))return e.filters.map(t=>lF(t)).join(",");{const t=e.filters.map(r=>lF(r)).join(",");return`${e.op}(${t})`}}function Bse(e,t){return e instanceof Ri?function(n,a){return a instanceof Ri&&n.op===a.op&&n.field.isEqual(a.field)&&Zh(n.value,a.value)}(e,t):e instanceof Bf?function(n,a){return a instanceof Bf&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&Bse(o,a.filters[l]),!0):!1}(e,t):void Zr(19439)}function Ise(e){return e instanceof Ri?function(r){return`${r.field.canonicalString()} ${r.op} ${T1(r.value)}`}(e):e instanceof Bf?function(r){return r.op.toString()+" {"+r.getFilters().map(Ise).join(" ,")+"}"}(e):"Filter"}class vEe extends Ri{constructor(t,r,n){super(t,r,n),this.key=Ir.fromName(n.referenceValue)}matches(t){const r=Ir.comparator(t.key,this.key);return this.matchesComparison(r)}}class bEe extends Ri{constructor(t,r){super(t,"in",r),this.keys=Dse("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class yEe extends Ri{constructor(t,r){super(t,"not-in",r),this.keys=Dse("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Dse(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>Ir.fromName(n.referenceValue))}class wEe extends Ri{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return eM(r)&&ON(r.arrayValue,this.value)}}class NEe extends Ri{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&ON(this.value.arrayValue,r)}}class CEe extends Ri{constructor(t,r){super(t,"not-in",r)}matches(t){if(ON(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!ON(this.value.arrayValue,r)}}class EEe extends Ri{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!eM(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ON(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jEe{constructor(t,r=null,n=[],a=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function Rz(e,t=null,r=[],n=[],a=null,s=null,o=null){return new jEe(e,t,r,n,a,s,o)}function tM(e){const t=un(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>lF(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),W4(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>T1(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>T1(n)).join(",")),t.Te=r}return t.Te}function rM(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!gEe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!Bse(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fz(e.startAt,t.startAt)&&Fz(e.endAt,t.endAt)}function cF(e){return Ir.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(t,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kEe(e,t,r,n,a,s,o,l){return new Zx(e,t,r,n,a,s,o,l)}function J4(e){return new Zx(e)}function Lz(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function nM(e){return e.collectionGroup!==null}function r1(e){const t=un(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Yi(vo.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new PN(s,n))}),r.has(vo.keyField().canonicalString())||t.Ie.push(new PN(vo.keyField(),n))}return t.Ie}function Qh(e){const t=un(e);return t.Ee||(t.Ee=SEe(t,r1(e))),t.Ee}function SEe(e,t){if(e.limitType==="F")return Rz(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new PN(a.field,s)});const r=e.endAt?new B1(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new B1(e.startAt.position,e.startAt.inclusive):null;return Rz(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function uF(e,t){const r=e.filters.concat([t]);return new Zx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function S5(e,t,r){return new Zx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function Z4(e,t){return rM(Qh(e),Qh(t))&&e.limitType===t.limitType}function Ose(e){return`${tM(Qh(e))}|lt:${e.limitType}`}function Nb(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>Ise(a)).join(", ")}]`),W4(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>T1(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>T1(a)).join(",")),`Target(${n})`}(Qh(e))}; limitType=${e.limitType})`}function e3(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Ir.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of r1(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=Pz(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,r1(n),a)||n.endAt&&!function(o,l,c){const u=Pz(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,r1(n),a))}(e,t)}function _Ee(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Pse(e){return(t,r)=>{let n=!1;for(const a of r1(e)){const s=TEe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function TEe(e,t,r){const n=e.field.isKeyField()?Ir.comparator(t.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?_1(c,u):Zr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Zr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Qp(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return vse(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BEe=new Is(Ir.comparator);function vA(){return BEe}const Fse=new Is(Ir.comparator);function v2(...e){let t=Fse;for(const r of e)t=t.insert(r.key,r);return t}function Rse(e){let t=Fse;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Yg(){return G2()}function Lse(){return G2()}function G2(){return new ev(e=>e.toString(),(e,t)=>e.isEqual(t))}const IEe=new Is(Ir.comparator),DEe=new Yi(Ir.comparator);function Mn(...e){let t=DEe;for(const r of e)t=t.add(r);return t}const OEe=new Yi(Ln);function PEe(){return OEe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:C5(t)?"-0":t}}function Mse(e){return{integerValue:""+e}}function FEe(e,t){return cEe(t)?Mse(t):aM(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this._=void 0}}function REe(e,t,r){return e instanceof FN?function(a,s){const o={fields:{[wse]:{stringValue:yse},[Cse]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&X4(s)&&(s=Y4(s)),s&&(o.fields[Nse]=s),{mapValue:o}}(r,t):e instanceof RN?Hse(e,t):e instanceof LN?Qse(e,t):function(a,s){const o=Use(a,s),l=Mz(o)+Mz(a.Ae);return oF(o)&&oF(a.Ae)?Mse(l):aM(a.serializer,l)}(e,t)}function LEe(e,t,r){return e instanceof RN?Hse(e,t):e instanceof LN?Qse(e,t):r}function Use(e,t){return e instanceof _5?function(n){return oF(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class FN extends t3{}class RN extends t3{constructor(t){super(),this.elements=t}}function Hse(e,t){const r=Vse(t);for(const n of e.elements)r.some(a=>Zh(a,n))||r.push(n);return{arrayValue:{values:r}}}class LN extends t3{constructor(t){super(),this.elements=t}}function Qse(e,t){let r=Vse(t);for(const n of e.elements)r=r.filter(a=>!Zh(a,n));return{arrayValue:{values:r}}}class _5 extends t3{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function Mz(e){return hi(e.integerValue||e.doubleValue)}function Vse(e){return eM(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MEe{constructor(t,r){this.field=t,this.transform=r}}function UEe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof RN&&a instanceof RN||n instanceof LN&&a instanceof LN?k1(n.elements,a.elements,Zh):n instanceof _5&&a instanceof _5?Zh(n.Ae,a.Ae):n instanceof FN&&a instanceof FN}(e.transform,t.transform)}class HEe{constructor(t,r){this.version=t,this.transformResults=r}}class ac{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new ac}static exists(t){return new ac(void 0,t)}static updateTime(t){return new ac(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function BS(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class r3{}function $se(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new n3(e.key,ac.none()):new HC(e.key,e.data,ac.none());{const r=e.data,n=Ic.empty();let a=new Yi(vo.comparator);for(let s of t.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new Vp(e.key,n,new ju(a.toArray()),ac.none())}}function QEe(e,t,r){e instanceof HC?function(a,s,o){const l=a.value.clone(),c=Hz(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,r):e instanceof Vp?function(a,s,o){if(!BS(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Hz(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(zse(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function q2(e,t,r,n){return e instanceof HC?function(s,o,l,c){if(!BS(s.precondition,o))return l;const u=s.value.clone(),d=Qz(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Vp?function(s,o,l,c){if(!BS(s.precondition,o))return l;const u=Qz(s.fieldTransforms,c,o),d=o.data;return d.setAll(zse(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,o,l){return BS(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,r)}function VEe(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=Use(n.transform,a||null);s!=null&&(r===null&&(r=Ic.empty()),r.set(n.field,s))}return r||null}function Uz(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&k1(n,a,(s,o)=>UEe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class HC extends r3{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Vp extends r3{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zse(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function Hz(e,t,r){const n=new Map;ba(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],o=s.transform,l=t.data.field(s.field);n.set(s.field,LEe(o,l,r[a]))}return n}function Qz(e,t,r){const n=new Map;for(const a of e){const s=a.transform,o=r.data.field(a.field);n.set(a.field,REe(s,o,t))}return n}class n3 extends r3{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $Ee extends r3{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zEe{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&QEe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=q2(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=q2(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=Lse();return this.mutations.forEach(a=>{const s=t.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=$se(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(sn.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Mn())}isEqual(t){return this.batchId===t.batchId&&k1(this.mutations,t.mutations,(r,n)=>Uz(r,n))&&k1(this.baseMutations,t.baseMutations,(r,n)=>Uz(r,n))}}class sM{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){ba(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return IEe}();const s=t.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new sM(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GEe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qEe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi,Kn;function KEe(e){switch(e){case Rt.OK:return Zr(64938);case Rt.CANCELLED:case Rt.UNKNOWN:case Rt.DEADLINE_EXCEEDED:case Rt.RESOURCE_EXHAUSTED:case Rt.INTERNAL:case Rt.UNAVAILABLE:case Rt.UNAUTHENTICATED:return!1;case Rt.INVALID_ARGUMENT:case Rt.NOT_FOUND:case Rt.ALREADY_EXISTS:case Rt.PERMISSION_DENIED:case Rt.FAILED_PRECONDITION:case Rt.ABORTED:case Rt.OUT_OF_RANGE:case Rt.UNIMPLEMENTED:case Rt.DATA_LOSS:return!0;default:return Zr(15467,{code:e})}}function Gse(e){if(e===void 0)return xA("GRPC error has no .code"),Rt.UNKNOWN;switch(e){case Bi.OK:return Rt.OK;case Bi.CANCELLED:return Rt.CANCELLED;case Bi.UNKNOWN:return Rt.UNKNOWN;case Bi.DEADLINE_EXCEEDED:return Rt.DEADLINE_EXCEEDED;case Bi.RESOURCE_EXHAUSTED:return Rt.RESOURCE_EXHAUSTED;case Bi.INTERNAL:return Rt.INTERNAL;case Bi.UNAVAILABLE:return Rt.UNAVAILABLE;case Bi.UNAUTHENTICATED:return Rt.UNAUTHENTICATED;case Bi.INVALID_ARGUMENT:return Rt.INVALID_ARGUMENT;case Bi.NOT_FOUND:return Rt.NOT_FOUND;case Bi.ALREADY_EXISTS:return Rt.ALREADY_EXISTS;case Bi.PERMISSION_DENIED:return Rt.PERMISSION_DENIED;case Bi.FAILED_PRECONDITION:return Rt.FAILED_PRECONDITION;case Bi.ABORTED:return Rt.ABORTED;case Bi.OUT_OF_RANGE:return Rt.OUT_OF_RANGE;case Bi.UNIMPLEMENTED:return Rt.UNIMPLEMENTED;case Bi.DATA_LOSS:return Rt.DATA_LOSS;default:return Zr(39323,{code:e})}}(Kn=Bi||(Bi={}))[Kn.OK=0]="OK",Kn[Kn.CANCELLED=1]="CANCELLED",Kn[Kn.UNKNOWN=2]="UNKNOWN",Kn[Kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kn[Kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kn[Kn.NOT_FOUND=5]="NOT_FOUND",Kn[Kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kn[Kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kn[Kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kn[Kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kn[Kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kn[Kn.ABORTED=10]="ABORTED",Kn[Kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kn[Kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kn[Kn.INTERNAL=13]="INTERNAL",Kn[Kn.UNAVAILABLE=14]="UNAVAILABLE",Kn[Kn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WEe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XEe=new cp([4294967295,4294967295],0);function Vz(e){const t=WEe().encode(e),r=new ise;return r.update(t),new Uint8Array(r.digest())}function $z(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new cp([r,n],0),new cp([a,s],0)]}class iM{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new b2(`Invalid padding: ${r}`);if(n<0)throw new b2(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new b2(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new b2(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=cp.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(cp.fromNumber(n)));return a.compare(XEe)===1&&(a=new cp([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=Vz(t),[n,a]=$z(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);if(!this.we(o))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new iM(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const r=Vz(t),[n,a]=$z(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);this.Se(o)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class b2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,QC.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new a3(sn.min(),a,new Is(Ln),vA(),Mn())}}class QC{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new QC(n,r,Mn(),Mn(),Mn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class qse{constructor(t,r){this.targetId=t,this.Ce=r}}class Kse{constructor(t,r,n=Co.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class zz{constructor(){this.ve=0,this.Fe=Gz(),this.Me=Co.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Mn(),r=Mn(),n=Mn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Zr(38017,{changeType:s})}}),new QC(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=Gz()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ba(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YEe{constructor(t){this.Ge=t,this.ze=new Map,this.je=vA(),this.Je=Vj(),this.He=Vj(),this.Ye=new Is(Ln)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Zr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(cF(s))if(n===0){const o=new Ir(s.path);this.et(r,o,jl.newNoDocument(o,sn.min()))}else ba(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=Cp(n).toUint8Array()}catch(c){if(c instanceof bse)return Bx("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new iM(o,a,s)}catch(c){return Bx(c instanceof b2?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&cF(l.target)){const c=new Ir(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,jl.newNoDocument(c,t))}s.Be&&(r.set(o,s.ke()),s.qe())}});let n=Mn();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(t));const a=new a3(t,r,this.Ye,this.je,n);return this.je=vA(),this.Je=Vj(),this.He=Vj(),this.Ye=new Is(Ln),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new zz,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Yi(Ln),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Yi(Ln),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||yr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new zz),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function Vj(){return new Is(Ir.comparator)}function Gz(){return new Is(Ir.comparator)}const JEe={asc:"ASCENDING",desc:"DESCENDING"},ZEe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eje={and:"AND",or:"OR"};class tje{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function dF(e,t){return e.useProto3Json||W4(t)?t:{value:t}}function T5(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Wse(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rje(e,t){return T5(e,t.toTimestamp())}function Vh(e){return ba(!!e,49232),sn.fromTimestamp(function(r){const n=Np(r);return new wr(n.seconds,n.nanos)}(e))}function oM(e,t){return fF(e,t).canonicalString()}function fF(e,t){const r=function(a){return new $a(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function Xse(e){const t=$a.fromString(e);return ba(tie(t),10190,{key:t.toString()}),t}function hF(e,t){return oM(e.databaseId,t.path)}function HI(e,t){const r=Xse(t);if(r.get(1)!==e.databaseId.projectId)throw new ir(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new ir(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new Ir(Jse(r))}function Yse(e,t){return oM(e.databaseId,t)}function nje(e){const t=Xse(e);return t.length===4?$a.emptyPath():Jse(t)}function AF(e){return new $a(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Jse(e){return ba(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function qz(e,t,r){return{name:hF(e,t),fields:r.value.mapValue.fields}}function aje(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Zr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ba(d===void 0||typeof d=="string",58123),Co.fromBase64String(d||"")):(ba(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Co.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const d=u.code===void 0?Rt.UNKNOWN:Gse(u.code);return new ir(d,u.message||"")}(o);r=new Kse(n,a,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=HI(e,n.document.name),s=Vh(n.document.updateTime),o=n.document.createTime?Vh(n.document.createTime):sn.min(),l=new Ic({mapValue:{fields:n.document.fields}}),c=jl.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new IS(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=HI(e,n.document),s=n.readTime?Vh(n.readTime):sn.min(),o=jl.newNoDocument(a,s),l=n.removedTargetIds||[];r=new IS([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=HI(e,n.document),s=n.removedTargetIds||[];r=new IS([],s,a,null)}else{if(!("filter"in t))return Zr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new qEe(a,s),l=n.targetId;r=new qse(l,o)}}return r}function sje(e,t){let r;if(t instanceof HC)r={update:qz(e,t.key,t.value)};else if(t instanceof n3)r={delete:hF(e,t.key)};else if(t instanceof Vp)r={update:qz(e,t.key,t.data),updateMask:Aje(t.fieldMask)};else{if(!(t instanceof $Ee))return Zr(16599,{Vt:t.type});r={verify:hF(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof FN)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof RN)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof LN)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _5)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Zr(20930,{transform:o.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:rje(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Zr(27497)}(e,t.precondition)),r}function ije(e,t){return e&&e.length>0?(ba(t!==void 0,14353),e.map(r=>function(a,s){let o=a.updateTime?Vh(a.updateTime):Vh(s);return o.isEqual(sn.min())&&(o=Vh(s)),new HEe(o,a.transformResults||[])}(r,t))):[]}function oje(e,t){return{documents:[Yse(e,t.path)]}}function lje(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Yse(e,a);const s=function(u){if(u.length!==0)return eie(Bf.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(A){return{field:Cb(A.field),direction:dje(A.dir)}}(d))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const l=dF(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function cje(e){let t=nje(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){ba(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const A=Zse(f);return A instanceof Bf&&Tse(A)?A.getFilters():[A]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(A=>function(g){return new PN(Eb(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(A))}(r.orderBy));let l=null;r.limit&&(l=function(f){let A;return A=typeof f=="object"?f.value:f,W4(A)?null:A}(r.limit));let c=null;r.startAt&&(c=function(f){const A=!!f.before,m=f.values||[];return new B1(m,A)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const A=!f.before,m=f.values||[];return new B1(m,A)}(r.endAt)),kEe(t,a,o,s,l,"F",c,u)}function uje(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Zr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function Zse(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Eb(r.unaryFilter.field);return Ri.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Eb(r.unaryFilter.field);return Ri.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Eb(r.unaryFilter.field);return Ri.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Eb(r.unaryFilter.field);return Ri.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Zr(61313);default:return Zr(60726)}}(e):e.fieldFilter!==void 0?function(r){return Ri.create(Eb(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Zr(58110);default:return Zr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Bf.create(r.compositeFilter.filters.map(n=>Zse(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Zr(1026)}}(r.compositeFilter.op))}(e):Zr(30097,{filter:e})}function dje(e){return JEe[e]}function fje(e){return ZEe[e]}function hje(e){return eje[e]}function Cb(e){return{fieldPath:e.canonicalString()}}function Eb(e){return vo.fromServerFormat(e.fieldPath)}function eie(e){return e instanceof Ri?function(r){if(r.op==="=="){if(Oz(r.value))return{unaryFilter:{field:Cb(r.field),op:"IS_NAN"}};if(Dz(r.value))return{unaryFilter:{field:Cb(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Oz(r.value))return{unaryFilter:{field:Cb(r.field),op:"IS_NOT_NAN"}};if(Dz(r.value))return{unaryFilter:{field:Cb(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cb(r.field),op:fje(r.op),value:r.value}}}(e):e instanceof Bf?function(r){const n=r.getFilters().map(a=>eie(a));return n.length===1?n[0]:{compositeFilter:{op:hje(r.op),filters:n}}}(e):Zr(54877,{filter:e})}function Aje(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function tie(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,r,n,a,s=sn.min(),o=sn.min(),l=Co.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Zm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Zm(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mje{constructor(t){this.yt=t}}function pje(e){const t=cje({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?S5(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gje{constructor(){this.Cn=new xje}addToCollectionParentIndex(t,r){return this.Cn.add(r),qt.resolve()}getCollectionParents(t,r){return qt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return qt.resolve()}deleteFieldIndex(t,r){return qt.resolve()}deleteAllFieldIndexes(t){return qt.resolve()}createTargetIndexes(t,r){return qt.resolve()}getDocumentsMatchingTarget(t,r){return qt.resolve(null)}getIndexType(t,r){return qt.resolve(0)}getFieldIndexes(t,r){return qt.resolve([])}getNextCollectionGroupToUpdate(t){return qt.resolve(null)}getMinOffset(t,r){return qt.resolve(wp.min())}getMinOffsetFromCollectionGroup(t,r){return qt.resolve(wp.min())}updateCollectionGroup(t,r,n){return qt.resolve()}updateIndexEntries(t,r){return qt.resolve()}}class xje{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Yi($a.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Yi($a.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rie=41943040;class jc{static withCacheSize(t){return new jc(t,jc.DEFAULT_COLLECTION_PERCENTILE,jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jc.DEFAULT_COLLECTION_PERCENTILE=10,jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jc.DEFAULT=new jc(rie,jc.DEFAULT_COLLECTION_PERCENTILE,jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jc.DISABLED=new jc(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new I1(0)}static cr(){return new I1(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz="LruGarbageCollector",vje=1048576;function Xz([e,t],[r,n]){const a=Ln(e,r);return a===0?Ln(t,n):a}class bje{constructor(t){this.Ir=t,this.buffer=new Yi(Xz),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Xz(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class yje{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){yr(Wz,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){gy(r)?yr(Wz,"Ignoring IndexedDB error during garbage collection: ",r):await py(r)}await this.Vr(3e5)})}}class wje{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return qt.resolve(K4.ce);const n=new bje(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(yr("LruGarbageCollector","Garbage collection skipped; disabled"),qt.resolve(Kz)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(yr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kz):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(yr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),wb()<=Rn.DEBUG&&yr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),qt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function Nje(e,t){return new wje(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cje{constructor(){this.changes=new ev(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,jl.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?qt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eje{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jje{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&q2(n.mutation,a,ju.empty(),wr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Mn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Mn()){const a=Yg();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let o=v2();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const n=Yg();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Mn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(t,r,n,a){let s=vA();const o=G2(),l=function(){return G2()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Vp)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),q2(d.mutation,u,d.mutation.getFieldMask(),wr.now())):o.set(u.key,ju.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new Eje(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,r){const n=G2();let a=new Is((o,l)=>o-l),s=Mn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||ju.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||Mn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=Lse();d.forEach(A=>{if(!s.has(A)){const m=$se(r.get(A),n.get(A));m!==null&&f.set(A,m),s=s.add(A)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,f))}return qt.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(o){return Ir.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):nM(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):qt.resolve(Yg());let l=IN,c=s;return o.next(u=>qt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?qt.resolve():this.remoteDocumentCache.getEntry(t,d).next(A=>{c=c.insert(d,A)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Mn())).next(d=>({batchId:l,changes:Rse(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Ir(r)).next(n=>{let a=v2();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let o=v2();return this.indexManager.getCollectionParents(t,s).next(l=>qt.forEach(l,c=>{const u=function(f,A){return new Zx(A,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,A)=>{o=o.insert(f,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,jl.newInvalidDocument(d)))});let l=v2();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&q2(d.mutation,u,ju.empty(),wr.now()),e3(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kje{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return qt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Vh(a.createTime)}}(r)),qt.resolve()}getNamedQuery(t,r){return qt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:pje(a.bundledQuery),readTime:Vh(a.readTime)}}(r)),qt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sje{constructor(){this.overlays=new Is(Ir.comparator),this.qr=new Map}getOverlay(t,r){return qt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Yg();return qt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),qt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),qt.resolve()}getOverlaysForCollection(t,r,n){const a=Yg(),s=r.length+1,o=new Ir(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return qt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new Is((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Yg(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Yg(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return qt.resolve(l)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new GEe(r,n));let s=this.qr.get(r);s===void 0&&(s=Mn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _je{constructor(){this.sessionToken=Co.EMPTY_BYTE_STRING}getSessionToken(t){return qt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,qt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.Qr=new Yi(mo.$r),this.Ur=new Yi(mo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new mo(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new mo(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new Ir(new $a([])),n=new mo(r,t),a=new mo(r,t+1),s=[];return this.Ur.forEachInRange([n,a],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new Ir(new $a([])),n=new mo(r,t),a=new mo(r,t+1);let s=Mn();return this.Ur.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(t){const r=new mo(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class mo{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return Ir.comparator(t.key,r.key)||Ln(t.Yr,r.Yr)}static Kr(t,r){return Ln(t.Yr,r.Yr)||Ir.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tje{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Yi(mo.$r)}checkEmpty(t){return qt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zEe(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new mo(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return qt.resolve(o)}lookupMutationBatch(t,r){return qt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return qt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return qt.resolve(this.mutationQueue.length===0?Z8:this.tr-1)}getAllMutationBatches(t){return qt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new mo(r,0),a=new mo(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],o=>{const l=this.Xr(o.Yr);s.push(l)}),qt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Yi(Ln);return r.forEach(a=>{const s=new mo(a,0),o=new mo(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{n=n.add(l.Yr)})}),qt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;Ir.isDocumentKey(s)||(s=s.child(""));const o=new mo(new Ir(s),0);let l=new Yi(Ln);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Yr)),!0)},o),qt.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){ba(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return qt.forEach(r.mutations,a=>{const s=new mo(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new mo(r,0),a=this.Zr.firstAfterOrEqual(n);return qt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,qt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bje{constructor(t){this.ri=t,this.docs=function(){return new Is(Ir.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return qt.resolve(n?n.document.mutableCopy():jl.newInvalidDocument(r))}getEntries(t,r){let n=vA();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():jl.newInvalidDocument(a))}),qt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=vA();const o=r.path,l=new Ir(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||sEe(aEe(d),n)<=0||(a.has(d.key)||e3(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return qt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Zr(9500)}ii(t,r){return qt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new Ije(this)}getSize(t){return qt.resolve(this.size)}}class Ije extends Cje{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),qt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dje{constructor(t){this.persistence=t,this.si=new ev(r=>tM(r),rM),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.oi=0,this._i=new lM,this.targetCount=0,this.ai=I1.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),qt.resolve()}getLastRemoteSnapshotVersion(t){return qt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return qt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),qt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),qt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new I1(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,qt.resolve()}updateTargetData(t,r){return this.Pr(r),qt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,qt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),a++)}),qt.waitFor(s).next(()=>a)}getTargetCount(t){return qt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return qt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),qt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(t,o))}),qt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),qt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return qt.resolve(n)}containsKey(t,r){return qt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nie{constructor(t,r){this.ui={},this.overlays={},this.ci=new K4(0),this.li=!1,this.li=!0,this.hi=new _je,this.referenceDelegate=t(this),this.Pi=new Dje(this),this.indexManager=new gje,this.remoteDocumentCache=function(a){return new Bje(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new mje(r),this.Ii=new kje(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Sje,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new Tje(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){yr("MemoryPersistence","Starting transaction:",t);const a=new Oje(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return qt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class Oje extends oEe{constructor(t){super(),this.currentSequenceNumber=t}}class cM{constructor(t){this.persistence=t,this.Ri=new lM,this.Vi=null}static mi(t){return new cM(t)}get fi(){if(this.Vi)return this.Vi;throw Zr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),qt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),qt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),qt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qt.forEach(this.fi,n=>{const a=Ir.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,sn.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return qt.or([()=>qt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class B5{constructor(t,r){this.persistence=t,this.pi=new ev(n=>uEe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Nje(this,r)}static mi(t,r){return new B5(t,r)}Ei(){}di(t){return qt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return qt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?qt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,o=>this.br(t,o,r).next(l=>{l||(n++,s.removeEntry(o,sn.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),qt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),qt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),qt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),qt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=_S(t.data.value)),r}br(t,r,n){return qt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return qt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Mn(),a=Mn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new uM(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pje{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fje{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return wye()?8:lEe(Ll())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Pje;return this.Ss(t,r,o).next(l=>{if(s.result=l,this.Vs)return this.bs(t,r,o,l.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(wb()<=Rn.DEBUG&&yr("QueryEngine","SDK will not create cache indexes for query:",Nb(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),qt.resolve()):(wb()<=Rn.DEBUG&&yr("QueryEngine","Query:",Nb(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(wb()<=Rn.DEBUG&&yr("QueryEngine","The SDK decides to create cache indexes for query:",Nb(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Qh(r))):qt.resolve())}ys(t,r){if(Lz(r))return qt.resolve(null);let n=Qh(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=S5(r,null,"F"),n=Qh(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=Mn(...s);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(t,S5(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return Lz(r)||a.isEqual(sn.min())?qt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const o=this.Ds(r,s);return this.Cs(r,o,n,a)?qt.resolve(null):(wb()<=Rn.DEBUG&&yr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Nb(r)),this.vs(t,o,r,nEe(a,IN)).next(l=>l))})}Ds(t,r){let n=new Yi(Pse(t));return r.forEach((a,s)=>{e3(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return wb()<=Rn.DEBUG&&yr("QueryEngine","Using full collection scan to execute query:",Nb(r)),this.ps.getDocumentsMatchingQuery(t,r,wp.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="LocalStore",Rje=3e8;class Lje{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new Is(Ln),this.xs=new ev(s=>tM(s),rM),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new jje(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Mje(e,t,r,n){return new Lje(e,t,r,n)}async function aie(e,t){const r=un(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=Mn();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function Uje(e,t){const r=un(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,A=f.keys();let m=qt.resolve();return A.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);ba(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Mn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function sie(e){const t=un(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Hje(e,t){const r=un(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];t.targetChanges.forEach((d,f)=>{const A=a.get(f);if(!A)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let m=A.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(Co.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),a=a.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Rje?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(A,m,d)&&l.push(r.Pi.updateTargetData(s,m))});let c=vA(),u=Mn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Qje(s,o,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(sn.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return qt.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function Qje(e,t,r){let n=Mn(),a=Mn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let o=vA();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(sn.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):yr(dM,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:a}})}function Vje(e,t){const r=un(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=Z8),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function $je(e,t){const r=un(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,qt.resolve(a)):r.Pi.allocateTargetId(n).next(o=>(a=new Zm(t,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function mF(e,t,r){const n=un(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!gy(o))throw o;yr(dM,`Failed to update sequence numbers for target ${t}: ${o}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function Yz(e,t,r){const n=un(e);let a=sn.min(),s=Mn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=un(c),A=f.xs.get(d);return A!==void 0?qt.resolve(f.Ms.get(A)):f.Pi.getTargetData(u,d)}(n,o,Qh(t)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,t,r?a:sn.min(),r?s:Mn())).next(l=>(zje(n,_Ee(t),l),{documents:l,Qs:s})))}function zje(e,t,r){let n=e.Os.get(t)||sn.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class Jz{constructor(){this.activeTargetIds=PEe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Gje{constructor(){this.Mo=new Jz,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Jz,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qje{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz="ConnectivityMonitor";class eG{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){yr(Zz,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){yr(Zz,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $j=null;function pF(){return $j===null?$j=function(){return 268435456+Math.round(2147483648*Math.random())}():$j++,"0x"+$j.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="RestConnection",Kje={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wje{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===E5?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const o=pF(),l=this.zo(t,r.toUriEncodedString());yr(QI,`Sending RPC '${t}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(l),d=RA(u);return this.Jo(t,l,c,n,d).then(f=>(yr(QI,`Received RPC '${t}' ${o}: `,f),f),f=>{throw Bx(QI,`RPC '${t}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(t,r,n,a,s,o){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+my}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=Kje[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xje{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="WebChannelConnection";class Yje extends Wje{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const o=pF();return new Promise((l,c)=>{const u=new ose;u.setWithCredentials(!0),u.listenOnce(lse.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case SS.NO_ERROR:const f=u.getResponseJson();yr(dl,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),l(f);break;case SS.TIMEOUT:yr(dl,`RPC '${t}' ${o} timed out`),c(new ir(Rt.DEADLINE_EXCEEDED,"Request time out"));break;case SS.HTTP_ERROR:const A=u.getStatus();if(yr(dl,`RPC '${t}' ${o} failed with status:`,A,"response text:",u.getResponseText()),A>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const N=y.toLowerCase().replace(/_/g,"-");return Object.values(Rt).indexOf(N)>=0?N:Rt.UNKNOWN}(g.status);c(new ir(x,g.message))}else c(new ir(Rt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ir(Rt.UNAVAILABLE,"Connection failed."));break;default:Zr(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{yr(dl,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(a);yr(dl,`RPC '${t}' ${o} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=pF(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=dse(),l=use(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");yr(dl,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let A=!1,m=!1;const g=new Xje({Yo:v=>{m?yr(dl,`Not sending because RPC '${t}' stream ${a} is closed:`,v):(A||(yr(dl,`Opening RPC '${t}' stream ${a} transport.`),f.open(),A=!0),yr(dl,`RPC '${t}' stream ${a} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,N)=>{v.listen(y,C=>{try{N(C)}catch(_){setTimeout(()=>{throw _},0)}})};return x(f,x2.EventType.OPEN,()=>{m||(yr(dl,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,x2.EventType.CLOSE,()=>{m||(m=!0,yr(dl,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,x2.EventType.ERROR,v=>{m||(m=!0,Bx(dl,`RPC '${t}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new ir(Rt.UNAVAILABLE,"The operation could not be completed")))}),x(f,x2.EventType.MESSAGE,v=>{var y;if(!m){const N=v.data[0];ba(!!N,16349);const C=N,_=(C==null?void 0:C.error)||((y=C[0])==null?void 0:y.error);if(_){yr(dl,`RPC '${t}' stream ${a} received error:`,_);const j=_.status;let I=function(B){const M=Bi[B];if(M!==void 0)return Gse(M)}(j),T=_.message;I===void 0&&(I=Rt.INTERNAL,T="Unknown error status: "+j+" with message "+_.message),m=!0,g.a_(new ir(I,T)),f.close()}else yr(dl,`RPC '${t}' stream ${a} received:`,N),g.u_(N)}}),x(l,cse.STAT_EVENT,v=>{v.stat===aF.PROXY?yr(dl,`RPC '${t}' stream ${a} detected buffering proxy`):v.stat===aF.NOPROXY&&yr(dl,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function VI(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(e){return new tje(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iie{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&yr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tG="PersistentStream";class oie{constructor(t,r,n,a,s,o,l,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iie(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Rt.RESOURCE_EXHAUSTED?(xA(r.toString()),xA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Rt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new ir(Rt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return yr(tG,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(yr(tG,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jje extends oie{constructor(t,r,n,a,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=aje(this.serializer,t),n=function(s){if(!("targetChange"in s))return sn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?sn.min():o.readTime?Vh(o.readTime):sn.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=AF(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=cF(c)?{documents:oje(s,c)}:{query:lje(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Wse(s,o.resumeToken);const u=dF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(sn.min())>0){l.readTime=T5(s,o.snapshotVersion.toTimestamp());const u=dF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const n=uje(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=AF(this.serializer),r.removeTarget=t,this.q_(r)}}class Zje extends oie{constructor(t,r,n,a,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return ba(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ba(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ba(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=ije(t.writeResults,t.commitTime),n=Vh(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=AF(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>sje(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eke{}class tke extends eke{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ir(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(t,fF(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ir(Rt.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,fF(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ir(Rt.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class rke{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xA(r),this.aa=!1):yr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="RemoteStore";class nke{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{tv(this)&&(yr(Ix,"Restarting streams for network reachability change."),await async function(c){const u=un(c);u.Ea.add(4),await VC(u),u.Ra.set("Unknown"),u.Ea.delete(4),await i3(u)}(this))})}),this.Ra=new rke(n,a)}}async function i3(e){if(tv(e))for(const t of e.da)await t(!0)}async function VC(e){for(const t of e.da)await t(!1)}function lie(e,t){const r=un(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),mM(r)?AM(r):xy(r).O_()&&hM(r,t))}function fM(e,t){const r=un(e),n=xy(r);r.Ia.delete(t),n.O_()&&cie(r,t),r.Ia.size===0&&(n.O_()?n.L_():tv(r)&&r.Ra.set("Unknown"))}function hM(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(sn.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}xy(e).Y_(t)}function cie(e,t){e.Va.Ue(t),xy(e).Z_(t)}function AM(e){e.Va=new YEe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),xy(e).start(),e.Ra.ua()}function mM(e){return tv(e)&&!xy(e).x_()&&e.Ia.size>0}function tv(e){return un(e).Ea.size===0}function uie(e){e.Va=void 0}async function ake(e){e.Ra.set("Online")}async function ske(e){e.Ia.forEach((t,r)=>{hM(e,t)})}async function ike(e,t){uie(e),mM(e)?(e.Ra.ha(t),AM(e)):e.Ra.set("Unknown")}async function oke(e,t,r){if(e.Ra.set("Online"),t instanceof Kse&&t.state===2&&t.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(e,t)}catch(n){yr(Ix,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await I5(e,n)}else if(t instanceof IS?e.Va.Ze(t):t instanceof qse?e.Va.st(t):e.Va.tt(t),!r.isEqual(sn.min()))try{const n=await sie(e.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Co.EMPTY_BYTE_STRING,d.snapshotVersion)),cie(s,c);const f=new Zm(d.target,c,u,d.sequenceNumber);hM(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(n){yr(Ix,"Failed to raise snapshot:",n),await I5(e,n)}}async function I5(e,t,r){if(!gy(t))throw t;e.Ea.add(1),await VC(e),e.Ra.set("Offline"),r||(r=()=>sie(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{yr(Ix,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await i3(e)})}function die(e,t){return t().catch(r=>I5(e,r,t))}async function o3(e){const t=un(e),r=jp(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Z8;for(;lke(t);)try{const a=await Vje(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,cke(t,a)}catch(a){await I5(t,a)}fie(t)&&hie(t)}function lke(e){return tv(e)&&e.Ta.length<10}function cke(e,t){e.Ta.push(t);const r=jp(e);r.O_()&&r.X_&&r.ea(t.mutations)}function fie(e){return tv(e)&&!jp(e).x_()&&e.Ta.length>0}function hie(e){jp(e).start()}async function uke(e){jp(e).ra()}async function dke(e){const t=jp(e);for(const r of e.Ta)t.ea(r.mutations)}async function fke(e,t,r){const n=e.Ta.shift(),a=sM.from(n,t,r);await die(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await o3(e)}async function hke(e,t){t&&jp(e).X_&&await async function(n,a){if(function(o){return KEe(o)&&o!==Rt.ABORTED}(a.code)){const s=n.Ta.shift();jp(n).B_(),await die(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await o3(n)}}(e,t),fie(e)&&hie(e)}async function rG(e,t){const r=un(e);r.asyncQueue.verifyOperationInProgress(),yr(Ix,"RemoteStore received new credentials");const n=tv(r);r.Ea.add(3),await VC(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await i3(r)}async function Ake(e,t){const r=un(e);t?(r.Ea.delete(2),await i3(r)):t||(r.Ea.add(2),await VC(r),r.Ra.set("Unknown"))}function xy(e){return e.ma||(e.ma=function(r,n,a){const s=un(r);return s.sa(),new Jje(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:ake.bind(null,e),t_:ske.bind(null,e),r_:ike.bind(null,e),H_:oke.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),mM(e)?AM(e):e.Ra.set("Unknown")):(await e.ma.stop(),uie(e))})),e.ma}function jp(e){return e.fa||(e.fa=function(r,n,a){const s=un(r);return s.sa(),new Zje(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:uke.bind(null,e),r_:hke.bind(null,e),ta:dke.bind(null,e),na:fke.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await o3(e)):(await e.fa.stop(),e.Ta.length>0&&(yr(Ix,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new nA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const o=Date.now()+n,l=new pM(t,r,o,a,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ir(Rt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gM(e,t){if(xA("AsyncQueue",`${t}: ${e}`),gy(e))return new ir(Rt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{static emptySet(t){return new n1(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||Ir.comparator(r.key,n.key):(r,n)=>Ir.comparator(r.key,n.key),this.keyedMap=v2(),this.sortedSet=new Is(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof n1)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new n1;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(){this.ga=new Is(Ir.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Zr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class D1{constructor(t,r,n,a,s,o,l,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new D1(t,r,n1.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Z4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mke{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class pke{constructor(){this.queries=aG(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=un(r),s=a.queries;a.queries=aG(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new ir(Rt.ABORTED,"Firestore shutting down"))}}function aG(){return new ev(e=>Ose(e),Z4)}async function xM(e,t){const r=un(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new mke,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=gM(o,`Initialization of query '${Nb(t.query)}' failed`);return void t.onError(l)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&bM(r)}async function vM(e,t){const r=un(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const o=s.Sa.indexOf(t);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function gke(e,t){const r=un(e);let n=!1;for(const a of t){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.Sa)l.Fa(a)&&(n=!0);o.wa=a}}n&&bM(r)}function xke(e,t,r){const n=un(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function bM(e){e.Ca.forEach(t=>{t.next()})}var gF,sG;(sG=gF||(gF={})).Ma="default",sG.Cache="cache";class yM{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new D1(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=D1.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==gF.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aie{constructor(t){this.key=t}}class mie{constructor(t){this.key=t}}class vke{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mn(),this.mutatedKeys=Mn(),this.eu=Pse(t),this.tu=new n1(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new nG,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const A=a.get(d),m=e3(this.query,f)?f:null,g=!!A&&this.mutatedKeys.has(A.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;A&&m?A.data.isEqual(m.data)?g!==x&&(n.track({type:3,doc:m}),v=!0):this.su(A,m)||(n.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!A&&m?(n.track({type:0,doc:m}),v=!0):A&&!m&&(n.track({type:1,doc:A}),v=!0,(c||u)&&(l=!0)),v&&(m?(o=o.add(m),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:l,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((d,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new D1(this.query,t.tu,s,o,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nG,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Mn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new mie(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new Aie(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Mn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return D1.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wM="SyncEngine";class bke{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class yke{constructor(t){this.key=t,this.hu=!1}}class wke{constructor(t,r,n,a,s,o){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ev(l=>Ose(l),Z4),this.Iu=new Map,this.Eu=new Set,this.du=new Is(Ir.comparator),this.Au=new Map,this.Ru=new lM,this.Vu={},this.mu=new Map,this.fu=I1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Nke(e,t,r=!0){const n=yie(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await pie(n,t,r,!0),a}async function Cke(e,t){const r=yie(e);await pie(r,t,!0,!1)}async function pie(e,t,r,n){const a=await $je(e.localStore,Qh(t)),s=a.targetId,o=e.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await Eke(e,t,s,o==="current",a.resumeToken)),e.isPrimaryClient&&r&&lie(e.remoteStore,a),l}async function Eke(e,t,r,n,a){e.pu=(f,A,m)=>async function(x,v,y,N){let C=v.view.ru(y);C.Cs&&(C=await Yz(x.localStore,v.query,!1).then(({documents:T})=>v.view.ru(T,C)));const _=N&&N.targetChanges.get(v.targetId),j=N&&N.targetMismatches.get(v.targetId)!=null,I=v.view.applyChanges(C,x.isPrimaryClient,_,j);return oG(x,v.targetId,I.au),I.snapshot}(e,f,A,m);const s=await Yz(e.localStore,t,!0),o=new vke(t,s.Qs),l=o.ru(s.documents),c=QC.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=o.applyChanges(l,e.isPrimaryClient,c);oG(e,r,u.au);const d=new bke(t,r,o);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function jke(e,t,r){const n=un(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(o=>!Z4(o,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await mF(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&fM(n.remoteStore,a.targetId),xF(n,a.targetId)}).catch(py)):(xF(n,a.targetId),await mF(n.localStore,a.targetId,!0))}async function kke(e,t){const r=un(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),fM(r.remoteStore,n.targetId))}async function Ske(e,t,r){const n=Pke(e);try{const a=await function(o,l){const c=un(o),u=wr.now(),d=l.reduce((m,g)=>m.add(g.key),Mn());let f,A;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=vA(),x=Mn();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,N)=>{N.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const N of l){const C=VEe(N,f.get(N.key).overlayedDocument);C!=null&&y.push(new Vp(N.key,C,kse(C.value.mapValue),ac.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(v=>{A=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:A.batchId,changes:Rse(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Is(Ln)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(n,a.batchId,r),await $C(n,a.changes),await o3(n.remoteStore)}catch(a){const s=gM(a,"Failed to persist write");r.reject(s)}}async function gie(e,t){const r=un(e);try{const n=await Hje(r.localStore,t);t.targetChanges.forEach((a,s)=>{const o=r.Au.get(s);o&&(ba(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?ba(o.hu,14607):a.removedDocuments.size>0&&(ba(o.hu,42227),o.hu=!1))}),await $C(r,n,t)}catch(n){await py(n)}}function iG(e,t,r){const n=un(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,o)=>{const l=o.view.va(t);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=un(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const A of f.Sa)A.va(l)&&(u=!0)}),u&&bM(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function _ke(e,t,r){const n=un(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let o=new Is(Ir.comparator);o=o.insert(s,jl.newNoDocument(s,sn.min()));const l=Mn().add(s),c=new a3(sn.min(),new Map,new Is(Ln),o,l);await gie(n,c),n.du=n.du.remove(s),n.Au.delete(t),NM(n)}else await mF(n.localStore,t,!1).then(()=>xF(n,t,r)).catch(py)}async function Tke(e,t){const r=un(e),n=t.batch.batchId;try{const a=await Uje(r.localStore,t);vie(r,n,null),xie(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await $C(r,a)}catch(a){await py(a)}}async function Bke(e,t,r){const n=un(e);try{const a=await function(o,l){const c=un(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ba(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);vie(n,t,r),xie(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await $C(n,a)}catch(a){await py(a)}}function xie(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function vie(e,t,r){const n=un(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function xF(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||bie(e,n)})}function bie(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(fM(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),NM(e))}function oG(e,t,r){for(const n of r)n instanceof Aie?(e.Ru.addReference(n.key,t),Ike(e,n)):n instanceof mie?(yr(wM,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||bie(e,n.key)):Zr(19791,{wu:n})}function Ike(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(yr(wM,"New document in limbo: "+r),e.Eu.add(n),NM(e))}function NM(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new Ir($a.fromString(t)),n=e.fu.next();e.Au.set(n,new yke(r)),e.du=e.du.insert(r,n),lie(e.remoteStore,new Zm(Qh(J4(r.path)),n,"TargetPurposeLimboResolution",K4.ce))}}async function $C(e,t,r){const n=un(e),a=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=uM.As(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Pu.H_(a),await async function(c,u){const d=un(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>qt.forEach(u,A=>qt.forEach(A.Es,m=>d.persistence.referenceDelegate.addReference(f,A.targetId,m)).next(()=>qt.forEach(A.ds,m=>d.persistence.referenceDelegate.removeReference(f,A.targetId,m)))))}catch(f){if(!gy(f))throw f;yr(dM,"Failed to update sequence numbers: "+f)}for(const f of u){const A=f.targetId;if(!f.fromCache){const m=d.Ms.get(A),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(A,x)}}}(n.localStore,s))}async function Dke(e,t){const r=un(e);if(!r.currentUser.isEqual(t)){yr(wM,"User change. New user:",t.toKey());const n=await aie(r.localStore,t);r.currentUser=t,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new ir(Rt.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await $C(r,n.Ls)}}function Oke(e,t){const r=un(e),n=r.Au.get(t);if(n&&n.hu)return Mn().add(n.key);{let a=Mn();const s=r.Iu.get(t);if(!s)return a;for(const o of s){const l=r.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function yie(e){const t=un(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gie.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Oke.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_ke.bind(null,t),t.Pu.H_=gke.bind(null,t.eventManager),t.Pu.yu=xke.bind(null,t.eventManager),t}function Pke(e){const t=un(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tke.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Bke.bind(null,t),t}class D5{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=s3(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Mje(this.persistence,new Fje,t.initialUser,this.serializer)}Cu(t){return new nie(cM.mi,this.serializer)}Du(t){return new Gje}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}D5.provider={build:()=>new D5};class Fke extends D5{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){ba(this.persistence.referenceDelegate instanceof B5,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new yje(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?jc.withCacheSize(this.cacheSizeBytes):jc.DEFAULT;return new nie(n=>B5.mi(n,r),this.serializer)}}class vF{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>iG(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dke.bind(null,this.syncEngine),await Ake(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new pke}()}createDatastore(t){const r=s3(t.databaseInfo.databaseId),n=function(s){return new Yje(s)}(t.databaseInfo);return function(s,o,l,c){return new tke(s,o,l,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,o,l){return new nke(n,a,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,r=>iG(this.syncEngine,r,0),function(){return eG.v()?new eG:new qje}())}createSyncEngine(t,r){return function(a,s,o,l,c,u,d){const f=new wke(a,s,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=un(a);yr(Ix,"RemoteStore shutting down."),s.Ea.add(5),await VC(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}vF.provider={build:()=>new vF};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):xA("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="FirestoreClient";class Rke{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=yl.UNAUTHENTICATED,this.clientId=G4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{yr(kp,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(yr(kp,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=gM(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function $I(e,t){e.asyncQueue.verifyOperationInProgress(),yr(kp,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await aie(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function lG(e,t){e.asyncQueue.verifyOperationInProgress();const r=await Lke(e);yr(kp,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>rG(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>rG(t.remoteStore,a)),e._onlineComponents=t}async function Lke(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){yr(kp,"Using user provided OfflineComponentProvider");try{await $I(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Rt.FAILED_PRECONDITION||a.code===Rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Bx("Error using user provided cache. Falling back to memory cache: "+r),await $I(e,new D5)}}else yr(kp,"Using default OfflineComponentProvider"),await $I(e,new Fke(void 0));return e._offlineComponents}async function wie(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(yr(kp,"Using user provided OnlineComponentProvider"),await lG(e,e._uninitializedComponentsProvider._online)):(yr(kp,"Using default OnlineComponentProvider"),await lG(e,new vF))),e._onlineComponents}function Mke(e){return wie(e).then(t=>t.syncEngine)}async function O5(e){const t=await wie(e),r=t.eventManager;return r.onListen=Nke.bind(null,t.syncEngine),r.onUnlisten=jke.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Cke.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=kke.bind(null,t.syncEngine),r}function Uke(e,t,r={}){const n=new nA;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new CM({next:A=>{d.Nu(),o.enqueueAndForget(()=>vM(s,f));const m=A.docs.has(l);!m&&A.fromCache?u.reject(new ir(Rt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&A.fromCache&&c&&c.source==="server"?u.reject(new ir(Rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new yM(J4(l.path),d,{includeMetadataChanges:!0,qa:!0});return xM(s,f)}(await O5(e),e.asyncQueue,t,r,n)),n.promise}function Hke(e,t,r={}){const n=new nA;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new CM({next:A=>{d.Nu(),o.enqueueAndForget(()=>vM(s,f)),A.fromCache&&c.source==="server"?u.reject(new ir(Rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new yM(l,d,{includeMetadataChanges:!0,qa:!0});return xM(s,f)}(await O5(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nie(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cG=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cie="firestore.googleapis.com",uG=!0;class dG{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ir(Rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cie,this.ssl=uG}else this.host=t.host,this.ssl=t.ssl??uG;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=rie;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<vje)throw new ir(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}pse("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nie(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ir(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ir(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ir(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class l3{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dG({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ir(Rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ir(Rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dG(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Ase;switch(n.type){case"firstParty":return new XCe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ir(Rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=cG.get(r);n&&(yr("ComponentProvider","Removing Datastore"),cG.delete(r),n.terminate())}(this),Promise.resolve()}}function Eie(e,t,r,n={}){var u;e=Pl(e,l3);const a=RA(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;a&&(L4(`https://${l}`),M4("Firestore",!0)),s.host!==Cie&&s.host!==l&&Bx("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:a,emulatorOptions:n};if(!_x(c,o)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=yl.MOCK_USER;else{d=lae(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const A=n.mockUserToken.sub||n.mockUserToken.user_id;if(!A)throw new ir(Rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new yl(A)}e._authCredentials=new qCe(new hse(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Rf(this.firestore,t,this._query)}}class _s{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aA(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _s(this.firestore,t,this._key)}toJSON(){return{type:_s._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(UC(r,_s._jsonSchema))return new _s(t,n||null,new Ir($a.fromString(r.referencePath)))}}_s._jsonSchemaVersion="firestore/documentReference/1.0",_s._jsonSchema={type:Mi("string",_s._jsonSchemaVersion),referencePath:Mi("string")};class aA extends Rf{constructor(t,r,n){super(t,r,J4(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _s(this.firestore,null,new Ir(t))}withConverter(t){return new aA(this.firestore,t,this._path)}}function pt(e,t,...r){if(e=Zn(e),mse("collection","path",t),e instanceof l3){const n=$a.fromString(t,...r);return Ez(n),new aA(e,null,n)}{if(!(e instanceof _s||e instanceof aA))throw new ir(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($a.fromString(t,...r));return Ez(n),new aA(e.firestore,null,n)}}function er(e,t,...r){if(e=Zn(e),arguments.length===1&&(t=G4.newId()),mse("doc","path",t),e instanceof l3){const n=$a.fromString(t,...r);return Cz(n),new _s(e,null,new Ir(n))}{if(!(e instanceof _s||e instanceof aA))throw new ir(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($a.fromString(t,...r));return Cz(n),new _s(e.firestore,e instanceof aA?e.converter:null,new Ir(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fG="AsyncQueue";class hG{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iie(this,"async_queue_retry"),this._c=()=>{const n=VI();n&&yr(fG,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=VI();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=VI();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new nA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!gy(t))throw t;yr(fG,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,xA("INTERNAL UNHANDLED ERROR: ",AG(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=pM.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Zr(47125,{Pc:AG(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function AG(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class If extends l3{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new hG,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hG(t),this._firestoreClient=void 0,await t}}}function EM(e,t){const r=typeof e=="object"?e:FC(),n=typeof e=="string"?e:E5,a=Xx(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=P8("firestore");s&&Eie(a,...s)}return a}function vy(e){if(e._terminated)throw new ir(Rt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Qke(e),e._firestoreClient}function Qke(e){var n,a,s;const t=e._freezeSettings(),r=function(l,c,u,d){return new hEe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Nie(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Rke(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yu(Co.fromBase64String(t))}catch(r){throw new ir(Rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new yu(Co.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:yu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(UC(t,yu._jsonSchema))return yu.fromBase64String(t.bytes)}}yu._jsonSchemaVersion="firestore/bytes/1.0",yu._jsonSchema={type:Mi("string",yu._jsonSchemaVersion),bytes:Mi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new ir(Rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new ir(Rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new ir(Rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ln(this._lat,t._lat)||Ln(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cf._jsonSchemaVersion}}static fromJSON(t){if(UC(t,Cf._jsonSchema))return new Cf(t.latitude,t.longitude)}}Cf._jsonSchemaVersion="firestore/geoPoint/1.0",Cf._jsonSchema={type:Mi("string",Cf._jsonSchemaVersion),latitude:Mi("number"),longitude:Mi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ef._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(UC(t,Ef._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Ef(t.vectorValues);throw new ir(Rt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ef._jsonSchemaVersion="firestore/vectorValue/1.0",Ef._jsonSchema={type:Mi("string",Ef._jsonSchemaVersion),vectorValues:Mi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vke=/^__.*__$/;class $ke{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Vp(t,this.data,this.fieldMask,r,this.fieldTransforms):new HC(t,this.data,r,this.fieldTransforms)}}class jie{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Vp(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function kie(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zr(40011,{Ac:e})}}class jM{constructor(t,r,n,a,s,o){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new jM({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return P5(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(kie(this.Ac)&&Vke.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class zke{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||s3(t)}Cc(t,r,n,a=!1){return new jM({Ac:t,methodName:r,Dc:n,path:vo.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yy(e){const t=e._freezeSettings(),r=s3(e._databaseId);return new zke(e._databaseId,!!t.ignoreUndefinedProperties,r)}function kM(e,t,r,n,a,s={}){const o=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);_M("Data must be an object, but it was:",o,n);const l=Bie(n,o);let c,u;if(s.merge)c=new ju(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const A=bF(t,f,r);if(!o.contains(A))throw new ir(Rt.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Die(d,A)||d.push(A)}c=new ju(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new $ke(new Ic(l),c,u)}class c3 extends zC{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof c3}}class SM extends zC{_toFieldTransform(t){return new MEe(t.path,new FN)}isEqual(t){return t instanceof SM}}function Sie(e,t,r,n){const a=e.Cc(1,t,r);_M("Data must be an object, but it was:",a,n);const s=[],o=Ic.empty();Qp(n,(c,u)=>{const d=TM(t,c,r);u=Zn(u);const f=a.yc(d);if(u instanceof c3)s.push(d);else{const A=GC(u,f);A!=null&&(s.push(d),o.set(d,A))}});const l=new ju(s);return new jie(o,l,a.fieldTransforms)}function _ie(e,t,r,n,a,s){const o=e.Cc(1,t,r),l=[bF(t,n,r)],c=[a];if(s.length%2!=0)throw new ir(Rt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)l.push(bF(t,s[A])),c.push(s[A+1]);const u=[],d=Ic.empty();for(let A=l.length-1;A>=0;--A)if(!Die(u,l[A])){const m=l[A];let g=c[A];g=Zn(g);const x=o.yc(m);if(g instanceof c3)u.push(m);else{const v=GC(g,x);v!=null&&(u.push(m),d.set(m,v))}}const f=new ju(u);return new jie(d,f,o.fieldTransforms)}function Tie(e,t,r,n=!1){return GC(r,e.Cc(n?4:3,t))}function GC(e,t){if(Iie(e=Zn(e)))return _M("Unsupported field value:",t,e),Bie(e,t);if(e instanceof zC)return function(n,a){if(!kie(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=GC(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Zn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return FEe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=wr.fromDate(n);return{timestampValue:T5(a.serializer,s)}}if(n instanceof wr){const s=new wr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:T5(a.serializer,s)}}if(n instanceof Cf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yu)return{bytesValue:Wse(a.serializer,n._byteString)};if(n instanceof _s){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oM(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Ef)return function(o,l){return{mapValue:{fields:{[Ese]:{stringValue:jse},[j5]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return aM(l.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${q4(n)}`)}(e,t)}function Bie(e,t){const r={};return vse(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qp(e,(n,a)=>{const s=GC(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function Iie(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof wr||e instanceof Cf||e instanceof yu||e instanceof _s||e instanceof zC||e instanceof Ef)}function _M(e,t,r){if(!Iie(r)||!gse(r)){const n=q4(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function bF(e,t,r){if((t=Zn(t))instanceof by)return t._internalPath;if(typeof t=="string")return TM(e,t);throw P5("Field path arguments must be of type string or ",e,!1,void 0,r)}const Gke=new RegExp("[~\\*/\\[\\]]");function TM(e,t,r){if(t.search(Gke)>=0)throw P5(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new by(...t.split("."))._internalPath}catch{throw P5(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function P5(e,t,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new ir(Rt.INVALID_ARGUMENT,l+e+c)}function Die(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _s(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new qke(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(u3("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class qke extends BM{data(){return super.data()}}function u3(e,t){return typeof t=="string"?TM(e,t):t instanceof by?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oie(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ir(Rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IM{}class qC extends IM{}function Lt(e,t,...r){let n=[];t instanceof IM&&n.push(t),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof d3).length,l=s.filter(c=>c instanceof KC).length;if(o>1||o>0&&l>0)throw new ir(Rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class KC extends qC{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new KC(t,r,n)}_apply(t){const r=this._parse(t);return Fie(t._query,r),new Rf(t.firestore,t.converter,uF(t._query,r))}_parse(t){const r=yy(t.firestore);return function(s,o,l,c,u,d,f){let A;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ir(Rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){gG(f,d);const g=[];for(const x of f)g.push(pG(c,s,x));A={arrayValue:{values:g}}}else A=pG(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||gG(f,d),A=Tie(l,o,f,d==="in"||d==="not-in");return Ri.create(u,d,A)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function ur(e,t,r){const n=t,a=u3("where",e);return KC._create(a,n,r)}class d3 extends IM{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new d3(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Bf.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)Fie(o,c),o=uF(o,c)}(t._query,r),new Rf(t.firestore,t.converter,uF(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class f3 extends qC{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new f3(t,r)}_apply(t){const r=function(a,s,o){if(a.startAt!==null)throw new ir(Rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ir(Rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new PN(s,o)}(t._query,this._field,this._direction);return new Rf(t.firestore,t.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new Zx(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function tr(e,t="asc"){const r=t,n=u3("orderBy",e);return f3._create(n,r)}class h3 extends qC{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new h3(t,r,n)}_apply(t){return new Rf(t.firestore,t.converter,S5(t._query,this._limit,this._limitType))}}function Fl(e){return rEe("limit",e),h3._create("limit",e,"F")}class A3 extends qC{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new A3(t,r,n)}_apply(t){const r=Kke(t,this.type,this._docOrFields,this._inclusive);return new Rf(t.firestore,t.converter,function(a,s){return new Zx(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function Pie(...e){return A3._create("startAfter",e,!1)}function Kke(e,t,r,n){if(r[0]=Zn(r[0]),r[0]instanceof BM)return function(s,o,l,c,u){if(!c)throw new ir(Rt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of r1(s))if(f.field.isKeyField())d.push(k5(o,c.key));else{const A=c.data.field(f.field);if(X4(A))throw new ir(Rt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const m=f.field.canonicalString();throw new ir(Rt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(A)}return new B1(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=yy(e.firestore);return function(o,l,c,u,d,f){const A=o.explicitOrderBy;if(d.length>A.length)throw new ir(Rt.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(A[g].field.isKeyField()){if(typeof x!="string")throw new ir(Rt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!nM(o)&&x.indexOf("/")!==-1)throw new ir(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=o.path.child($a.fromString(x));if(!Ir.isDocumentKey(v))throw new ir(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new Ir(v);m.push(k5(l,y))}else{const v=Tie(c,u,x);m.push(v)}}return new B1(m,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function pG(e,t,r){if(typeof(r=Zn(r))=="string"){if(r==="")throw new ir(Rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nM(t)&&r.indexOf("/")!==-1)throw new ir(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child($a.fromString(r));if(!Ir.isDocumentKey(n))throw new ir(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return k5(e,new Ir(n))}if(r instanceof _s)return k5(e,r._key);throw new ir(Rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${q4(r)}.`)}function gG(e,t){if(!Array.isArray(e)||e.length===0)throw new ir(Rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Fie(e,t){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new ir(Rt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ir(Rt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Rie{convertValue(t,r="none"){switch(Ep(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Cp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Zr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return Qp(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[j5].arrayValue)==null?void 0:a.values)==null?void 0:s.map(o=>hi(o.doubleValue));return new Ef(r)}convertGeoPoint(t){return new Cf(hi(t.latitude),hi(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=Y4(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(DN(t));default:return null}}convertTimestamp(t){const r=Np(t);return new wr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=$a.fromString(t);ba(tie(n),9688,{name:t});const a=new S1(n.get(1),n.get(3)),s=new Ir(n.popFirst(5));return a.isEqual(r)||xA(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class Ob{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class up extends BM{constructor(t,r,n,a,s,o){super(t,r,n,a,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new K2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(u3("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ir(Rt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=up._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}up._jsonSchemaVersion="firestore/documentSnapshot/1.0",up._jsonSchema={type:Mi("string",up._jsonSchemaVersion),bundleSource:Mi("string","DocumentSnapshot"),bundleName:Mi("string"),bundle:Mi("string")};class K2 extends up{data(t={}){return super.data(t)}}class dp{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new Ob(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new K2(this._firestore,this._userDataWriter,n.key,n,new Ob(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ir(Rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new K2(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Ob(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new K2(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Ob(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:Wke(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ir(Rt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=dp._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=G4.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Wke(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(e){e=Pl(e,_s);const t=Pl(e.firestore,If);return Uke(vy(t),e._key).then(r=>Lie(t,e,r))}dp._jsonSchemaVersion="firestore/querySnapshot/1.0",dp._jsonSchema={type:Mi("string",dp._jsonSchemaVersion),bundleSource:Mi("string","QuerySnapshot"),bundleName:Mi("string"),bundle:Mi("string")};class OM extends Rie{constructor(t){super(),this.firestore=t}convertBytes(t){return new yu(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new _s(this.firestore,null,r)}}function Rr(e){e=Pl(e,Rf);const t=Pl(e.firestore,If),r=vy(t),n=new OM(t);return Oie(e._query),Hke(r,e._query).then(a=>new dp(t,n,e,a))}function yi(e,t,r){e=Pl(e,_s);const n=Pl(e.firestore,If),a=DM(e.converter,t,r);return wy(n,[kM(yy(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,ac.none())])}function Zi(e,t,r,...n){e=Pl(e,_s);const a=Pl(e.firestore,If),s=yy(a);let o;return o=typeof(t=Zn(t))=="string"||t instanceof by?_ie(s,"updateDoc",e._key,t,r,n):Sie(s,"updateDoc",e._key,t),wy(a,[o.toMutation(e._key,ac.exists(!0))])}function fa(e){return wy(Pl(e.firestore,If),[new n3(e._key,ac.none())])}function dn(e,t){const r=Pl(e.firestore,If),n=er(e),a=DM(e.converter,t);return wy(r,[kM(yy(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,ac.exists(!1))]).then(()=>n)}function hr(e,...t){var c,u,d;e=Zn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||mG(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(mG(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,o,l;if(e instanceof _s)o=Pl(e.firestore,If),l=J4(e._key.path),s={next:f=>{t[n]&&t[n](Lie(o,e,f))},error:t[n+1],complete:t[n+2]};else{const f=Pl(e,Rf);o=Pl(f.firestore,If),l=f._query;const A=new OM(o);s={next:m=>{t[n]&&t[n](new dp(o,A,f,m))},error:t[n+1],complete:t[n+2]},Oie(e._query)}return function(A,m,g,x){const v=new CM(x),y=new yM(m,v,g);return A.asyncQueue.enqueueAndForget(async()=>xM(await O5(A),y)),()=>{v.Nu(),A.asyncQueue.enqueueAndForget(async()=>vM(await O5(A),y))}}(vy(o),l,a,s)}function wy(e,t){return function(n,a){const s=new nA;return n.asyncQueue.enqueueAndForget(async()=>Ske(await Mke(n),a,s)),s.promise}(vy(e),t)}function Lie(e,t,r){const n=r.docs.get(t._key),a=new OM(e);return new up(e,a,t._key,n,new Ob(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mie{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=yy(t)}set(t,r,n){this._verifyNotCommitted();const a=zI(t,this._firestore),s=DM(a.converter,r,n),o=kM(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,ac.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=zI(t,this._firestore);let o;return o=typeof(r=Zn(r))=="string"||r instanceof by?_ie(this._dataReader,"WriteBatch.update",s._key,r,n,a):Sie(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,ac.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=zI(t,this._firestore);return this._mutations=this._mutations.concat(new n3(r._key,ac.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ir(Rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zI(e,t){if((e=Zn(e)).firestore!==t)throw new ir(Rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Xn(){return new SM("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(e){return vy(e=Pl(e,If)),new Mie(e,t=>wy(e,t))}(function(t,r=!0){(function(a){my=a})(Yx),Jh(new _f("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new If(new KCe(n.getProvider("auth-internal")),new YCe(o,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ir(Rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new S1(u.options.projectId,d)}(o,a),o);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Su(bz,yz,t),Su(bz,yz,"esm2020")})();const O1=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Rie,Bytes:yu,CollectionReference:aA,DocumentReference:_s,DocumentSnapshot:up,FieldPath:by,FieldValue:zC,Firestore:If,FirestoreError:ir,GeoPoint:Cf,Query:Rf,QueryCompositeFilterConstraint:d3,QueryConstraint:qC,QueryDocumentSnapshot:K2,QueryFieldFilterConstraint:KC,QueryLimitConstraint:h3,QueryOrderByConstraint:f3,QuerySnapshot:dp,QueryStartAtConstraint:A3,SnapshotMetadata:Ob,Timestamp:wr,VectorValue:Ef,WriteBatch:Mie,_AutoId:G4,_ByteString:Co,_DatabaseId:S1,_DocumentKey:Ir,_EmptyAuthCredentialsProvider:Ase,_FieldPath:vo,_cast:Pl,_logWarn:Bx,_validateIsNotUsedTogether:pse,addDoc:dn,collection:pt,connectFirestoreEmulator:Eie,deleteDoc:fa,doc:er,ensureFirestoreConfigured:vy,executeWrite:wy,getDoc:bA,getDocs:Rr,getFirestore:EM,limit:Fl,onSnapshot:hr,orderBy:tr,query:Lt,serverTimestamp:Xn,setDoc:yi,setLogLevel:GCe,startAfter:Pie,updateDoc:Zi,where:ur,writeBatch:$p},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uie="firebasestorage.googleapis.com",Hie="storageBucket",Xke=120*1e3,Yke=600*1e3,Jke=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Ff{constructor(t,r,n=0){super(GI(t),`Firebase Storage: ${r} (${GI(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Os.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return GI(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ls;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ls||(ls={}));function GI(e){return"storage/"+e}function PM(){const e="An unknown error occurred, please check the error payload for server response.";return new Os(ls.UNKNOWN,e)}function Zke(e){return new Os(ls.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function eSe(e){return new Os(ls.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function tSe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Os(ls.UNAUTHENTICATED,e)}function rSe(){return new Os(ls.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nSe(e){return new Os(ls.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Qie(){return new Os(ls.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vie(){return new Os(ls.CANCELED,"User canceled the upload/download.")}function aSe(e){return new Os(ls.INVALID_URL,"Invalid URL '"+e+"'.")}function sSe(e){return new Os(ls.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function iSe(){return new Os(ls.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Hie+"' property when initializing the app?")}function $ie(){return new Os(ls.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oSe(){return new Os(ls.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function lSe(){return new Os(ls.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function cSe(e){return new Os(ls.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yF(e){return new Os(ls.INVALID_ARGUMENT,e)}function zie(){return new Os(ls.APP_DELETED,"The Firebase app was deleted.")}function uSe(e){return new Os(ls.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function W2(e,t){return new Os(ls.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Fw(e){throw new Os(ls.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=tc.makeFromUrl(t,r)}catch{return new tc(t,"")}if(n.path==="")return n;throw sSe(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function u(_){_.path_=decodeURIComponent(_.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${a}/o${A}`,"i"),g={bucket:1,path:3},x=r===Uie?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${v}`,"i"),C=[{regex:l,indices:c,postModify:s},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let _=0;_<C.length;_++){const j=C[_],I=j.regex.exec(t);if(I){const T=I[j.indices.bucket];let k=I[j.indices.path];k||(k=""),n=new tc(T,k),j.postModify(n);break}}if(n==null)throw aSe(t);return n}}class dSe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fSe(e,t,r){let n=1,a=null,s=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function f(v){a=setTimeout(()=>{a=null,e(m,c())},v)}function A(){s&&clearTimeout(s)}function m(v,...y){if(u){A();return}if(v){A(),d.call(null,v,...y);return}if(c()||o){A(),d.call(null,v,...y);return}n<64&&(n*=2);let C;l===1?(l=2,C=0):C=(n+Math.random())*1e3,f(C)}let g=!1;function x(v){g||(g=!0,A(),!u&&(a!==null?(v||(l=2),clearTimeout(a),f(0)):v||(l=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},r),x}function hSe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ASe(e){return e!==void 0}function mSe(e){return typeof e=="function"}function pSe(e){return typeof e=="object"&&!Array.isArray(e)}function m3(e){return typeof e=="string"||e instanceof String}function xG(e){return FM()&&e instanceof Blob}function FM(){return typeof Blob<"u"}function wF(e,t,r,n){if(n<t)throw yF(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw yF(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function Gie(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var cx;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(cx||(cx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qie(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gSe{constructor(t,r,n,a,s,o,l,c,u,d,f,A=!0,m=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=A,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new zj(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===cx.NO_ERROR,c=s.getStatus();if(!l||qie(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===cx.ABORT;n(!1,new zj(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new zj(u,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());ASe(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=PM();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?zie():Vie();o(c)}else{const c=Qie();o(c)}};this.canceled_?r(!1,new zj(!1,null,!0)):this.backoffId_=fSe(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&hSe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zj{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function xSe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function vSe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function bSe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function ySe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function wSe(e,t,r,n,a,s,o=!0,l=!1){const c=Gie(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return bSe(d,t),xSe(d,r),vSe(d,s),ySe(d,n),new gSe(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NSe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function CSe(...e){const t=NSe();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(FM())return new Blob(e);throw new Os(ls.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ESe(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jSe(e){if(typeof atob>"u")throw cSe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qI{constructor(t,r){this.data=t,this.contentType=r||null}}function kSe(e,t){switch(e){case Ih.RAW:return new qI(Kie(t));case Ih.BASE64:case Ih.BASE64URL:return new qI(Wie(e,t));case Ih.DATA_URL:return new qI(_Se(t),TSe(t))}throw PM()}function Kie(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,o=e.charCodeAt(++r);n=65536|(s&1023)<<10|o&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function SSe(e){let t;try{t=decodeURIComponent(e)}catch{throw W2(Ih.DATA_URL,"Malformed data URL.")}return Kie(t)}function Wie(e,t){switch(e){case Ih.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw W2(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ih.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw W2(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=jSe(t)}catch(a){throw a.message.includes("polyfill")?a:W2(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class Xie{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw W2(Ih.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=BSe(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function _Se(e){const t=new Xie(e);return t.base64?Wie(Ih.BASE64,t.rest):SSe(t.rest)}function TSe(e){return new Xie(e).contentType}function BSe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(t,r){let n=0,a="";xG(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(xG(this.data_)){const n=this.data_,a=ESe(n,t,r);return a===null?null:new $0(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new $0(n,!0)}}static getBlob(...t){if(FM()){const r=t.map(n=>n instanceof $0?n.data_:n);return new $0(CSe.apply(null,r))}else{const r=t.map(o=>m3(o)?kSe(Ih.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)a[s++]=o[l]}),new $0(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(e){let t;try{t=JSON.parse(e)}catch{return null}return pSe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ISe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function DSe(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function Yie(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OSe(e,t){return t}class Wl{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||OSe}}let Gj=null;function PSe(e){return!m3(e)||e.length<2?e:Yie(e)}function LM(){if(Gj)return Gj;const e=[];e.push(new Wl("bucket")),e.push(new Wl("generation")),e.push(new Wl("metageneration")),e.push(new Wl("name","fullPath",!0));function t(s,o){return PSe(o)}const r=new Wl("name");r.xform=t,e.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new Wl("size");return a.xform=n,e.push(a),e.push(new Wl("timeCreated")),e.push(new Wl("updated")),e.push(new Wl("md5Hash",null,!0)),e.push(new Wl("cacheControl",null,!0)),e.push(new Wl("contentDisposition",null,!0)),e.push(new Wl("contentEncoding",null,!0)),e.push(new Wl("contentLanguage",null,!0)),e.push(new Wl("contentType",null,!0)),e.push(new Wl("metadata","customMetadata",!0)),Gj=e,Gj}function FSe(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new tc(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function RSe(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,t[o.server])}return FSe(n,e),n}function Jie(e,t,r){const n=RM(t);return n===null?null:RSe(e,n,r)}function LSe(e,t,r,n){const a=RM(t);if(a===null||!m3(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,A="/b/"+o(d)+"/o/"+o(f),m=rv(A,r,n),g=Gie({alt:"media",token:u});return m+g})[0]}function Zie(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG="prefixes",bG="items";function MSe(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[vG])for(const a of r[vG]){const s=a.replace(/\/$/,""),o=e._makeStorageReference(new tc(t,s));n.prefixes.push(o)}if(r[bG])for(const a of r[bG]){const s=e._makeStorageReference(new tc(t,a.name));n.items.push(s)}return n}function USe(e,t,r){const n=RM(r);return n===null?null:MSe(e,t,n)}class zp{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(e){if(!e)throw PM()}function MM(e,t){function r(n,a){const s=Jie(e,a,t);return $h(s!==null),s}return r}function HSe(e,t){function r(n,a){const s=USe(e,t,a);return $h(s!==null),s}return r}function QSe(e,t){function r(n,a){const s=Jie(e,a,t);return $h(s!==null),LSe(s,a,e.host,e._protocol)}return r}function Ny(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=rSe():a=tSe():r.getStatus()===402?a=eSe(e.bucket):r.getStatus()===403?a=nSe(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function UM(e){const t=Ny(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=Zke(e.path)),s.serverResponse=a.serverResponse,s}return r}function VSe(e,t,r){const n=t.fullServerUrl(),a=rv(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new zp(a,s,MM(e,r),o);return l.errorHandler=UM(t),l}function $Se(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const o=t.bucketOnlyServerUrl(),l=rv(o,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new zp(l,c,HSe(e,t.bucket),u);return d.urlParams=s,d.errorHandler=Ny(t),d}function zSe(e,t,r){const n=t.fullServerUrl(),a=rv(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new zp(a,s,QSe(e,r),o);return l.errorHandler=UM(t),l}function GSe(e,t){const r=t.fullServerUrl(),n=rv(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function o(c,u){}const l=new zp(n,a,o,s);return l.successCodes=[200,204],l.errorHandler=UM(t),l}function qSe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function eoe(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=qSe(null,t)),n}function toe(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let _=0;_<2;_++)C=C+Math.random().toString().slice(2);return C}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=eoe(t,n,a),d=Zie(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,A=`\r
--`+c+"--",m=$0.getBlob(f,n,A);if(m===null)throw $ie();const g={name:u.fullPath},x=rv(s,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,N=new zp(x,v,MM(e,r),y);return N.urlParams=g,N.headers=o,N.body=m.uploadData(),N.errorHandler=Ny(t),N}class F5{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function HM(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{$h(!1)}return $h(!!r&&(t||["active"]).indexOf(r)!==-1),r}function KSe(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o=eoe(t,n,a),l={name:o.fullPath},c=rv(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=Zie(o,r),A=e.maxUploadRetryTime;function m(x){HM(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{$h(!1)}return $h(m3(v)),v}const g=new zp(c,u,m,A);return g.urlParams=l,g.headers=d,g.body=f,g.errorHandler=Ny(t),g}function WSe(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=HM(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$h(!1)}f||$h(!1);const A=Number(f);return $h(!isNaN(A)),new F5(A,n.size(),d==="final")}const o="POST",l=e.maxUploadRetryTime,c=new zp(r,o,s,l);return c.headers=a,c.errorHandler=Ny(t),c}const yG=256*1024;function XSe(e,t,r,n,a,s,o,l){const c=new F5(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw oSe();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,A=f+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,A);if(x===null)throw $ie();function v(_,j){const I=HM(_,["active","final"]),T=c.current+d,k=n.size();let B;return I==="final"?B=MM(t,s)(_,j):B=null,new F5(T,k,I==="final",B)}const y="POST",N=t.maxUploadRetryTime,C=new zp(r,y,v,N);return C.headers=g,C.body=x.uploadData(),C.progressCallback=l||null,C.errorHandler=Ny(e),C}const kc={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function KI(e){switch(e){case"running":case"pausing":case"canceling":return kc.RUNNING;case"paused":return kc.PAUSED;case"success":return kc.SUCCESS;case"canceled":return kc.CANCELED;case"error":return kc.ERROR;default:return kc.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YSe{constructor(t,r,n){if(mSe(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class JSe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cx.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=cx.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=cx.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw Fw("cannot .send() more than once");if(RA(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class ZSe extends JSe{initXhr(){this.xhr_.responseType="text"}}function z0(){return new ZSe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=LM(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(ls.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(qie(a.status,[]))if(s)a=Qie();else{this.sleepTime=Math.max(this.sleepTime*2,Jke),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(ls.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=KSe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,z0,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=WSe(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,z0,r,n);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=yG*this._chunkMultiplier,r=new F5(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let o;try{o=XSe(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,z0,a,s,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){yG*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=VSe(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,z0,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=toe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,z0,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Vie(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=KI(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new YSe(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(KI(this._state)){case kc.SUCCESS:qv(this._resolve.bind(null,this.snapshot))();break;case kc.CANCELED:case kc.ERROR:const r=this._reject;qv(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(KI(this._state)){case kc.RUNNING:case kc.PAUSED:t.next&&qv(t.next.bind(t,this.snapshot))();break;case kc.SUCCESS:t.complete&&qv(t.complete.bind(t))();break;case kc.CANCELED:case kc.ERROR:t.error&&qv(t.error.bind(t,this._error))();break;default:t.error&&qv(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t,r){this._service=t,r instanceof tc?this._location=r:this._location=tc.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Dx(t,r)}get root(){const t=new tc(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Yie(this._location.path)}get storage(){return this._service}get parent(){const t=ISe(this._location.path);if(t===null)return null;const r=new tc(this._location.bucket,t);return new Dx(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw uSe(t)}}function t5e(e,t,r){e._throwIfRoot("uploadBytes");const n=toe(e.storage,e._location,LM(),new $0(t,!0),r);return e.storage.makeRequestWithTokens(n,z0).then(a=>({metadata:a,ref:e}))}function r5e(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new e5e(e,new $0(t),r)}function n5e(e){const t={prefixes:[],items:[]};return roe(e,t).then(()=>t)}async function roe(e,t,r){const a=await a5e(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await roe(e,t,a.nextPageToken)}function a5e(e,t){t!=null&&typeof t.maxResults=="number"&&wF("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=$Se(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,z0)}function s5e(e){e._throwIfRoot("getDownloadURL");const t=zSe(e.storage,e._location,LM());return e.storage.makeRequestWithTokens(t,z0).then(r=>{if(r===null)throw lSe();return r})}function i5e(e){e._throwIfRoot("deleteObject");const t=GSe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,z0)}function o5e(e,t){const r=DSe(e._location.path,t),n=new tc(e._location.bucket,r);return new Dx(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5e(e){return/^[A-Za-z]+:\/\//.test(e)}function c5e(e,t){return new Dx(e,t)}function noe(e,t){if(e instanceof QM){const r=e;if(r._bucket==null)throw iSe();const n=new Dx(r,r._bucket);return t!=null?noe(n,t):n}else return t!==void 0?o5e(e,t):e}function u5e(e,t){if(t&&l5e(t)){if(e instanceof QM)return c5e(e,t);throw yF("To use ref(service, url), the first argument must be a Storage instance.")}else return noe(e,t)}function wG(e,t){const r=t==null?void 0:t[Hie];return r==null?null:tc.makeFromBucketSpec(r,e)}function d5e(e,t,r,n={}){e.host=`${t}:${r}`;const a=RA(t);a&&(L4(`https://${e.host}/b`),M4("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:lae(s,e.app.options.projectId))}class QM{constructor(t,r,n,a,s,o=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Uie,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Xke,this._maxUploadRetryTime=Yke,this._requests=new Set,a!=null?this._bucket=tc.makeFromBucketSpec(a,this._host):this._bucket=wG(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=tc.makeFromBucketSpec(this._url,t):this._bucket=wG(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){wF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){wF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(bu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Dx(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new dSe(zie());{const o=wSe(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const NG="@firebase/storage",CG="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aoe="storage";function WC(e,t,r){return e=Zn(e),t5e(e,t,r)}function soe(e,t,r){return e=Zn(e),r5e(e,t,r)}function ioe(e){return e=Zn(e),n5e(e)}function MA(e){return e=Zn(e),s5e(e)}function VM(e){return e=Zn(e),i5e(e)}function Iu(e,t){return e=Zn(e),u5e(e,t)}function $M(e=FC(),t){e=Zn(e);const n=Xx(e,aoe).getImmediate({identifier:t}),a=P8("storage");return a&&f5e(n,...a),n}function f5e(e,t,r,n={}){d5e(e,t,r,n)}function h5e(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new QM(r,n,a,t,Yx)}function A5e(){Jh(new _f(aoe,h5e,"PUBLIC").setMultipleInstances(!0)),Su(NG,CG,""),Su(NG,CG,"esm2020")}A5e();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5e="type.googleapis.com/google.protobuf.Int64Value",p5e="type.googleapis.com/google.protobuf.UInt64Value";function ooe(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function R5(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>R5(t));if(typeof e=="function"||typeof e=="object")return ooe(e,t=>R5(t));throw new Error("Data cannot be encoded in JSON: "+e)}function P1(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case m5e:case p5e:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>P1(t)):typeof e=="function"||typeof e=="object"?ooe(e,t=>P1(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EG={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pc extends Ff{constructor(t,r,n){super(`${zM}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,Pc.prototype)}}function g5e(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function L5(e,t){let r=g5e(e),n=r,a;try{const s=t&&t.error;if(s){const o=s.status;if(typeof o=="string"){if(!EG[o])return new Pc("internal","internal");r=EG[o],n=o}const l=s.message;typeof l=="string"&&(n=l),a=s.details,a!==void 0&&(a=P1(a))}}catch{}return r==="ok"?null:new Pc(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5e{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,bu(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF="us-central1",v5e=/^data: (.*?)(?:\n|$)/;function b5e(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Pc("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class y5e{constructor(t,r,n,a,s=NF,o=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new x5e(t,r,n,a),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=NF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function w5e(e,t,r){const n=RA(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(L4(e.emulatorOrigin),M4("Functions",!0))}function N5e(e,t,r){const n=a=>E5e(e,t,a,{});return n.stream=(a,s)=>k5e(e,t,a,s),n}async function C5e(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function loe(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function E5e(e,t,r,n){const a=e._url(t);return j5e(e,a,r,n)}async function j5e(e,t,r,n){r=R5(r);const a={data:r},s=await loe(e,n),o=n.timeout||7e4,l=b5e(o),c=await Promise.race([C5e(t,a,s,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new Pc("cancelled","Firebase Functions instance was deleted.");const u=L5(c.status,c.json);if(u)throw u;if(!c.json)throw new Pc("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Pc("internal","Response is missing data field.");return{data:P1(d)}}function k5e(e,t,r,n){const a=e._url(t);return S5e(e,a,r,n||{})}async function S5e(e,t,r,n){var A;r=R5(r);const a={data:r},s=await loe(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new Pc("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=L5(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const u=new Promise((m,g)=>{l=m,c=g});(A=n==null?void 0:n.signal)==null||A.addEventListener("abort",()=>{const m=new Pc("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),f=_5e(d,l,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function _5e(e,t,r,n){const a=(o,l)=>{const c=o.match(v5e);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(P1(d.result));return}if("message"in d){l.enqueue(P1(d.message));return}if("error"in d){const f=L5(0,d);l.error(f),r(f);return}}catch(d){if(d instanceof Pc){l.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(n!=null&&n.aborted){const u=new Pc("cancelled","Request was cancelled");return o.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){l.trim()&&a(l.trim(),o),o.close();return}if(n!=null&&n.aborted){const A=new Pc("cancelled","Request was cancelled");o.error(A),r(A),await e.cancel();return}l+=s.decode(u,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const A of f)A.trim()&&a(A.trim(),o);return c()}catch(u){const d=u instanceof Pc?u:L5(0,null);o.error(d),r(d)}}},cancel(){return e.cancel()}})}const jG="@firebase/functions",kG="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5e="auth-internal",B5e="app-check-internal",I5e="messaging-internal";function D5e(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(T5e),o=r.getProvider(I5e),l=r.getProvider(B5e);return new y5e(a,s,o,l,n)};Jh(new _f(zM,t,"PUBLIC").setMultipleInstances(!0)),Su(jG,kG,e),Su(jG,kG,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(e=FC(),t=NF){const n=Xx(Zn(e),zM).getImmediate({identifier:t}),a=P8("functions");return a&&O5e(n,...a),n}function O5e(e,t,r){w5e(Zn(e),t,r)}function Nl(e,t,r){return N5e(Zn(e),t)}D5e();const Kv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",VITE_FIREBASE_APP_ID:"1:978612067917:web:299137755ec80939d7c604",VITE_FIREBASE_AUTH_DOMAIN:"plania-clase.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"978612067917",VITE_FIREBASE_PROJECT_ID:"plania-clase",VITE_FIREBASE_STORAGE_BUCKET:"plania-clase.firebasestorage.app",VITE_GOOGLE_MAPS_API_KEY:"AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg"},P5e={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604"},nv=L8(P5e),ua=qae(nv),xr=EM(nv),yA=$M(nv),Ox=V0(nv,"us-central1");try{const e=(Kv==null?void 0:Kv.VITE_APPCHECK_SITE_KEY)||(Kv==null?void 0:Kv.VITE_RECAPTCHA_V3_SITE_KEY);e?QCe(nv,{provider:new Y8(e),isTokenAutoRefreshEnabled:!0}):console.warn("[AppCheck] Falta VITE_APPCHECK_SITE_KEY o VITE_RECAPTCHA_V3_SITE_KEY. Las funciones con App Check pueden fallar.")}catch{}const coe=Object.freeze(Object.defineProperty({__proto__:null,app:nv,auth:ua,db:xr,functions:Ox,storage:yA},Symbol.toStringTag,{value:"Module"})),F5e=async(e,t)=>{try{return(await $2e(ua,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},WI=async()=>{try{await q2e(ua)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},R5e=async e=>{try{await V2e(ua,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},uoe=async e=>{try{const t=er(xr,"usuarios",e),r=await bA(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontr perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),M5e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),SG=e=>{const t=M5e(e);return t.charAt(0).toUpperCase()+t.slice(1)},doe=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),U5e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H5e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5e=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...H5e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:doe("lucide",a),...!s&&!U5e(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>w.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=(e,t)=>{const r=w.forwardRef(({className:n,...a},s)=>w.createElement(Q5e,{ref:s,iconNode:t,className:doe(`lucide-${L5e(SG(e))}`,`lucide-${e}`,n),...a}));return r.displayName=SG(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],$5e=Dt("activity",V5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5e=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],qj=Dt("arrow-left",z5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5e=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],q5e=Dt("arrow-up-down",G5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5e=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],W5e=Dt("award",K5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],Y5e=Dt("bell-ring",X5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Z5e=Dt("bell",J5e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_e=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],t_e=Dt("book-marked",e_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_e=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],n_e=Dt("book-open-check",r_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ys=Dt("book-open",a_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_e=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],_G=Dt("book",s_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_e=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],o_e=Dt("brain-circuit",i_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_e=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],MN=Dt("brain",l_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_e=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],F1=Dt("briefcase",c_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_e=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],a1=Dt("building-2",u_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_e=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],TG=Dt("building",d_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_e=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],GM=Dt("calculator",f_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],qM=Dt("calendar-check",h_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Yo=Dt("calendar",A_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_e=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],p_e=Dt("camera",m_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Dl=Dt("chart-column",g_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],v_e=Dt("chart-line",x_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_e=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],CF=Dt("chart-no-axes-column-increasing",b_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_e=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],foe=Dt("chart-no-axes-column",y_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_e=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],s1=Dt("chart-pie",w_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hoe=Dt("check",N_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],X2=Dt("chevron-down",C_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],UN=Dt("chevron-left",E_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],XC=Dt("chevron-right",j_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Uc=Dt("circle-alert",k_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],YC=Dt("circle-check-big",S_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],va=Dt("circle-check",__e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_e=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],B_e=Dt("circle-play",T_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Kj=Dt("circle-plus",I_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Aoe=Dt("circle-question-mark",D_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Sh=Dt("circle-x",O_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],F_e=Dt("circle",P_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],y2=Dt("clipboard-check",R_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_e=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],e0=Dt("clipboard-list",L_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_e=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],U_e=Dt("clock-3",M_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dc=Dt("clock",H_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_e=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],EF=Dt("cloud-upload",Q_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_e=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],$_e=Dt("cog",V_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_e=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],G_e=Dt("database",z_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Df=Dt("download",q_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ux=Dt("external-link",K_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],X_e=Dt("eye-off",W_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fp=Dt("eye",Y_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_e=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Z_e=Dt("factory",J_e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],jF=Dt("file-check",e4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],r4e=Dt("file-down",t4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4e=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],BG=Dt("file-pen",n4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],s4e=Dt("file-play",a4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],p3=Dt("file-spreadsheet",i4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Wi=Dt("file-text",o4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],XI=Dt("files",l4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],moe=Dt("film",c4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],d4e=Dt("folder-closed",u4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4e=[["path",{d:"M10.3 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.98a2 2 0 0 1 1.69.9l.66 1.2A2 2 0 0 0 12 6h8a2 2 0 0 1 2 2v3.3",key:"128dxu"}],["path",{d:"m14.305 19.53.923-.382",key:"3m78fa"}],["path",{d:"m15.228 16.852-.923-.383",key:"npixar"}],["path",{d:"m16.852 15.228-.383-.923",key:"5xggr7"}],["path",{d:"m16.852 20.772-.383.924",key:"dpfhf9"}],["path",{d:"m19.148 15.228.383-.923",key:"1reyyz"}],["path",{d:"m19.53 21.696-.382-.924",key:"1goivc"}],["path",{d:"m20.772 16.852.924-.383",key:"htqkph"}],["path",{d:"m20.772 19.148.924.383",key:"9w9pjp"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}]],h4e=Dt("folder-cog",f4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],IG=Dt("folder-open",A4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],p4e=Dt("folder",m4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],JC=Dt("funnel",g4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4e=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],M5=Dt("gauge",x4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],b4e=Dt("globe",v4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4e=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],wA=Dt("graduation-cap",y4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4e=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],N4e=Dt("hash",w4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4e=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],E4e=Dt("heart",C4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4e=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],poe=Dt("hourglass",j4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],U5=Dt("image",k4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_4e=Dt("info",S4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4e=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],goe=Dt("layout-dashboard",T4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],g3=Dt("layers",B4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],kF=Dt("layout-grid",I4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],O4e=Dt("layout-list",D4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],F4e=Dt("lightbulb",P4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4e=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],DG=Dt("link-2",R4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],H5=Dt("link",L4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4e=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],i1=Dt("list-checks",M4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4e=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],H4e=Dt("list-ordered",U4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ks=Dt("loader-circle",Q4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xoe=Dt("mail",V4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],HN=Dt("map-pin",$4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4e=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],G4e=Dt("map",z4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4e=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],voe=Dt("megaphone",q4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4e=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],W4e=Dt("menu",K4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Px=Dt("message-square",X4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4e=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],OG=Dt("notebook-pen",Y4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Z4e=Dt("palette",J4e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3e=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Pb=Dt("paperclip",e3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3e=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],QN=Dt("pen-line",t3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],x3=Dt("pencil",r3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3e=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],a3e=Dt("percent",n3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3e=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],i3e=Dt("phone",s3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3e=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],DS=Dt("pin",o3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xi=Dt("plus",l3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3e=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],SF=Dt("presentation",c3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3e=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],d3e=Dt("puzzle",u3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3e=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],OS=Dt("refresh-ccw",f3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zh=Dt("refresh-cw",h3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3e=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],m3e=Dt("rocket",A3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3e=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],PG=Dt("rotate-cw",p3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3e=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],x3e=Dt("route",g3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3e=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],b3e=Dt("ruler",v3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ml=Dt("save",y3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3e=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Dh=Dt("school",w3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3e=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],FG=Dt("scroll-text",N3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cy=Dt("search",C3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],KM=Dt("send",E3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],VN=Dt("settings",j3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],S3e=Dt("shield-check",k3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],T3e=Dt("shield",_3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3e=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],dx=Dt("sparkles",B3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],X0=Dt("square-pen",I3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],_F=Dt("square-plus",D3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],boe=Dt("star",O3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3e=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],yoe=Dt("tag",P3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],R1=Dt("target",F3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qn=Dt("trash-2",R3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Q5=Dt("trending-up",L3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],L1=Dt("triangle-alert",M3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3e=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],H3e=Dt("university",U3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],av=Dt("upload",Q3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3e=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],RG=Dt("user-cog",V3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],LG=Dt("user-minus",$3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],V5=Dt("user-plus",z3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3e=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],q3e=Dt("user-round",G3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fx=Dt("user",K3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3e=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],jb=Dt("users-round",W3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ys=Dt("users",X3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],wu=Dt("video",Y3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3e=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],woe=Dt("wand-sparkles",J3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],hx=Dt("wrench",Z3e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eTe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],No=Dt("x",eTe);var Ot=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Ot||{}),vn=(e=>(e.EVALUACION="Evaluacin",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedaggica",e))(vn||{}),Vg=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Gua de Aprendizaje",e.RUBRICA="Rbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Vg||{});const tTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),rTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),ei="w-5 h-5",v3="w-16 h-16",WM=()=>i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-32 h-32 object-contain"}),nTe=({className:e,...t})=>i.jsxs("svg",{className:e??"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",...t,children:[i.jsx("path",{d:"M9 18h6"}),i.jsx("path",{d:"M10 22h4"}),i.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),aTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),PS=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),sTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),iTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Noe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),oTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v3,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),lTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v3,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),cTe=()=>i.jsx($_e,{className:v3}),uTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v3,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),dTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Wj=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),Xj=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Yj=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Jj=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),kg=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),YI=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),fTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),hTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),ATe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),mTe=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Zj=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),pTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),JI=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),gTe=()=>i.jsx(hx,{className:ei}),xTe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ei,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),MG=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ei,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),ek=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ei,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),UG=[{id:Ot.SUBDIRECCION,label:"Subdireccin Pedaggica",icon:i.jsx(oTe,{})},{id:Ot.PROFESORADO,label:"Profesorado",icon:i.jsx(lTe,{})},{id:Ot.COORDINACION_TP,label:"Coordinacin TP",icon:i.jsx(cTe,{})},{id:Ot.ESTUDIANTE,label:"Estudiantes",icon:i.jsx(uTe,{})}],vTe={[Ot.SUBDIRECCION]:[{name:"Intranet",icon:i.jsx(PS,{})},{name:"Planificacin",icon:i.jsx(YI,{})},{name:"Documentacin",icon:i.jsx(kg,{})},{name:"Dashboard",icon:i.jsx(dTe,{})},{name:"Administracin",icon:i.jsx(mTe,{})},{name:"Horario del liceo",icon:i.jsx(Yj,{})},{name:"Multicopias",icon:i.jsx(Wj,{})},{name:"Evaluacin de Ensayo",icon:i.jsx(kg,{})},{name:"Seguimiento Curricular",icon:i.jsx(xTe,{})},{name:"Acompaamiento docente",icon:i.jsx(ATe,{})},{name:"Anlisis Taxonmico",icon:i.jsx(MG,{})},{name:"SIMCE",icon:i.jsx(ek,{})},{name:"Interdisciplinario",icon:i.jsx(JI,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:i.jsx(Wj,{})},{name:"Crear horarios",icon:i.jsx(Yj,{})},{name:"Seguimiento de acciones pedaggicas",icon:i.jsx(Jj,{})},{name:"Inclusin",icon:i.jsx(Zj,{})},{name:"Calendario Acadmico",icon:i.jsx(Xj,{})}],[Ot.PROFESORADO]:[{name:"Intranet",icon:i.jsx(PS,{})},{name:"Documentacin",icon:i.jsx(kg,{})},{name:"Planificacin",icon:i.jsx(YI,{})},{name:"Mis Acompaamientos",icon:i.jsx(pTe,{})},{name:"Recursos de Aprendizaje",icon:i.jsx(fTe,{})},{name:"Anlisis Taxonmico",icon:i.jsx(MG,{})},{name:"SIMCE",icon:i.jsx(ek,{})},{name:"Interdisciplinario",icon:i.jsx(JI,{})},{name:"Inclusin",icon:i.jsx(Zj,{})},{name:"Multicopias",icon:i.jsx(Wj,{})},{name:"Actividades Remotas",icon:i.jsx(hTe,{})},{name:"Evaluacin de Ensayo",icon:i.jsx(kg,{})},{name:"Evaluacin de Aprendizajes",icon:i.jsx(kg,{})},{name:"Evaluaciones Formativas",icon:i.jsx(Jj,{})},{name:"Desarrollo Profesional",icon:i.jsx(Zj,{})},{name:"Evaluacin de Competencias",icon:i.jsx(rTe,{})},{name:"Calendario Acadmico",icon:i.jsx(Xj,{})}],[Ot.COORDINACION_TP]:[{name:"Intranet",icon:i.jsx(PS,{})},{name:"Documentacin",icon:i.jsx(kg,{})},{name:"Seguimiento Dual",icon:i.jsx(Jj,{})},{name:"Asistencia Dual",icon:i.jsx(Yj,{})},{name:"Paol",icon:i.jsx(gTe,{})},{name:"SIMCE",icon:i.jsx(ek,{})},{name:"Evaluacin de Ensayo",icon:i.jsx(kg,{})},{name:"Multicopias",icon:i.jsx(Wj,{})},{name:"Gestin de Empresas",icon:i.jsx(tTe,{})},{name:"Calendario Acadmico",icon:i.jsx(Xj,{})},{name:"Alternancia TP",icon:""},{name:"Desarrollo Profesional",icon:i.jsx(Zj,{})}],[Ot.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:i.jsx(YI,{})},{name:"Evaluacin Formativa",icon:i.jsx(Jj,{})},{name:"SIMCE",icon:i.jsx(ek,{})},{name:"Tareas Interdisciplinarias",icon:i.jsx(JI,{})},{name:"Asistencia a Empresa",icon:i.jsx(Yj,{})},{name:"Calendario Acadmico",icon:i.jsx(Xj,{})}]},Y0=["1 Medio","2 Medio","3 Medio","4 Medio"],xa=["Lengua y Literatura","Matemtica","Ingls","Filosofa","Historia y Geografa","Educacin Ciudadana","Ciencias","Ciencias para la Ciudadana","Artes","Msica","Educacin Fsica","Orientacin","Mecnica Industrial","Mecnica Automotriz","Emprendimiento","Tecnologa","Pensamiento Lgico","Competencia Lectora"],Sa=["1A","1B","1C","1D","1E","2A","2B","2C","2D","3A","3B","3C","3D","4A","4B","4C","4D"],TF=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Gh=["Lunes","Martes","Mircoles","Jueves","Viernes"],zs=[{bloque:1,inicio:"08:30",fin:"09:10"},{bloque:2,inicio:"09:10",fin:"09:50"},{bloque:3,inicio:"10:10",fin:"10:50"},{bloque:4,inicio:"10:50",fin:"11:30"},{bloque:5,inicio:"11:40",fin:"12:20"},{bloque:6,inicio:"12:20",fin:"13:00"},{bloque:7,inicio:"13:40",fin:"14:20"},{bloque:8,inicio:"14:20",fin:"15:00"},{bloque:9,inicio:"15:10",fin:"15:50"},{bloque:10,inicio:"15:50",fin:"16:30"}],o1={[vn.EVALUACION]:{label:"Evaluacin",icon:"",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[vn.ACTO]:{label:"Acto",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[vn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[vn.SALIDA_PEDAGOGICA]:{label:"Salida Pedaggica",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},bTe=Object.values(Vg),ZI=["Vinculado","Desvinculado","En proceso","Empresa"],hp=["3A","3B","3C","3D","4A","4B","4C","4D"],yTe=["Quiz","Comprensin de Lectura","Trminos Pareados","Desarrollo"],$5=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limtrofe","Trastorno Dficit Atencional (TDA)","Trastorno Dficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Especfica del Aprendizaje","Dificultad Especfica de Aprendizaje en Matemticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarizacin"],Y2=[{domain:"Dominio A: Preparacin de la Enseanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que ensea, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que ensea, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemolgicas o metodolgicas en su rea.","Conoce y comprende los principios y conceptos centrales de las disciplinas que ensea, atendiendo a la permanente actualizacin curricular en su rea.","Conoce, comprende y cuestiona los principios centrales de la disciplina que ensea a la luz de nuevos paradigmas epistemolgicos o tericos, permitiendo que el trabajo o la exposicin conceptual invite al desarrollo del pensamiento crtico o la investigacin continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificacin o gestin de la clase estndar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relacin al contexto y caractersticas del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Seleccin de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las caractersticas de sus estudiantes y a la relacin con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didcticos de aprendizaje, siendo congruentes al contenido pero no a las caractersticas de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejndose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didcticos de aprendizaje congruentes con la complejidad de los contenidos y las caractersticas de sus alumnos.","Conoce y selecciona distintos recursos didcticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisicin de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluacin",levels:["Establece estrategias de evaluacin incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo adems, las metodologas empleadas previamente en clases.","Establece estrategias de evaluacin coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexin, y, la retroalimentacin descriptiva."]},{name:"Estrategias de enseanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes disean e implementan estrategias de enseanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes disean e implementan estrategias efectivas de enseanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes disean e implementan estrategias avanzadas de enseanza-aprendizaje tales como (ABP, ABD, Gamificacin, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creacin de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empata",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vnculos fundados en el respeto y/o en la empata.","Establece un clima de relaciones interpersonales respetuosas y empticas con la mayora de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos, generando situaciones concretas de cooperacin y ayuda mutua entre l/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Inters por las especialidades",levels:["No transmite inters por las especialidades, centrndose exclusivamente en su rea de desempeo.","Transmite inters general por las especialidades, no obstante no es capaz de acercarse a las caractersticas concretas de los mdulos.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha rea de desempeo."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implcitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estndar que implican un desarrollo mecnico y que no tienden hacia la consolidacin de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus caractersticas personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivacin por el aprendizaje",levels:["No transmite motivacin por el aprendizaje, la bsqueda o la indagacin.","Transmite una motivacin positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autnoma","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda.","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemtico en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participacin."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentacin de objetivos",levels:["Al iniciar las clases no presenta el objetivo o slo lo enuncia sin profundizar en l.","Al iniciar las clases presenta el objetivo de aprendizaje y el propsito, pero no logra dar cuenta de la relacin con el futuro laboral de los estudiantes o con otras reas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionndolo con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a travs de la relacin con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro."]},{name:"Clase en funcin de objetivos",levels:["No realiza su clase en funcin de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currculum nacional","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando slo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional y en el PEI."]},{name:"Introduccin de nueva informacin",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva informacin, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisin conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolacin que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentacin",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes slo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal, a travs de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensin y desempeo de sus estudiantes.","Monitorea parcialmente el grado de comprensin y desempeo de sus estudiantes, no siempre a travs de evidencia.","Monitorea constantemente el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo."]},{name:"Orientacin a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales, no obstante, la orientacin es superficial y no predispone la construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores en consonancia a elementos propios del PEI."]},{name:"Conclusin de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicacin que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora adems preguntas de metacognicin y/o autoevaluacin."]},{name:"Abordaje de errores",levels:["No aborda los errores, nicamente los seala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a travs de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogneo, descuidando la diversidad y las caractersticas particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias segn nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],Coe=["Lder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],tk=[{nombre:"Aprendiz Emergente",emoji:"",promedioMin:1,promedioMax:3.9,mensaje:"Ests comenzando tu viaje de aprendizaje! Sigue esforzndote."},{nombre:"Explorador del Conocimiento",emoji:"",promedioMin:4,promedioMax:4.9,mensaje:"Buen trabajo! Ests construyendo una base slida."},{nombre:"Arquitecto de Ideas",emoji:"",promedioMin:5,promedioMax:5.9,mensaje:"Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"",promedioMin:6,promedioMax:6.5,mensaje:"Impresionante! Tu dedicacin te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"",promedioMin:6.6,promedioMax:7,mensaje:"Extraordinario! Eres una inspiracin para tus compaeros."}],wTe=["Mecnica Industrial","Mecnica Automotriz"],NTe=["INACAP","UNAB","DUOC","Universidad de Las Amricas"],CTe={"Mecnica Automotriz":["3A","3B","4A","4B"],"Mecnica Industrial":["3C","3D","4C","4D"]},ETe=["Pasanta","Visita","Certificacin","Formacin en empresa"],jTe={"Mecnica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medicin y verificacin","Mecnica de banco","Torneado de piezas y conjuntos mecnicos","Fresado de piezas mecnicas","Taladrado de piezas mecnicas","Rectificado de piezas mecnicas","Fabricacin asistida por computador (CNC)"],"Mecnica Automotriz":["Ajuste de motores","Lectura de planos y manuales tcnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas elctricos y electrnicos","Mantenimiento de motores","Mantenimiento de sistemas hidrulicos y neumticos","Mantenimiento de los sistemas de transmisin y frenos","Mantenimiento de sistemas de direccin y suspensin","Emprendimiento y empleabilidad"]},kTe={"Mecnica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, disel, gas e hbridos), incluyendo sistemas de control de emisiones, lubricacin y refrigeracin, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales tcnicos":["Leer e interpretar informacin tcnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnsticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulacin y disposicin de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatizacin, cierre centralizado, asientos elctricos) segn especificaciones tcnicas."],"Mantenimiento de sistemas elctricos y electrnicos":["Reemplazar, ajustar y probar sistemas elctricos y electrnicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parmetros operativos segn especificaciones."],"Mantenimiento de sistemas hidrulicos y neumticos":["Inspeccionar, diagnosticar y reparar sistemas hidrulicos y neumticos de vehculos automotrices."],"Mantenimiento de los sistemas de transmisin y frenos":["Verificar, ajustar o reemplazar componentes de transmisin y frenos, segn manual del fabricante."],"Mantenimiento de sistemas de direccin y suspensin":["Diagnosticar, alinear y corregir sistemas de direccin y suspensin, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestin, marketing y normativa vigente."]},"Mecnica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de mquinas, asegurando su operatividad y prolongando su vida til."],"Medicin y verificacin":["Utilizar instrumentos de medicin y verificacin para controlar dimensiones y tolerancias segn planos y especificaciones tcnicas."],"Mecnica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecnicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecnicos, cumpliendo con las especificaciones tcnicas y de seguridad."],"Fresado de piezas mecnicas":["Operar fresadoras para fabricar piezas mecnicas, seleccionando herramientas de corte y parmetros de mecanizado adecuados."],"Taladrado de piezas mecnicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones tcnicas y de seguridad."],"Rectificado de piezas mecnicas":["Utilizar rectificadoras para mejorar el acabado y precisin dimensional de piezas mecnicas, cumpliendo tolerancias indicadas."],"Fabricacin asistida por computador (CNC)":["Programar y operar mquinas CNC para fabricar piezas mecnicas con precisin, optimizando procesos y aplicando normas de seguridad."]}},G0={"Liderazgo Curricular":["Planificacin y organizacin del currculo","Asegurar la cobertura y secuenciacin de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prcticas Pedaggicas en el Aula":["Estrategias de enseanza y metodologas activas","Evaluacin de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologas para apoyar la enseanza"],"Acompaamiento y Desarrollo Profesional Docente":["Observacin de clases y retroalimentacin","Planes de formacin continua y actualizacin pedaggica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluacin de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedaggicas","Evaluaciones internas y externas","Ajuste de estrategias segn resultados y metas de aprendizaje"]},HG=["Pendiente","En Proceso","Cumplida"],QG=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],STe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=w.useState(""),[s,o]=w.useState(""),[l,c]=w.useState("login"),u=A=>{A.preventDefault(),e(n,s)},d=A=>{A.preventDefault(),t(n),c("forgot_sent")},f=()=>l==="forgot"?i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico Registrado"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:A=>a(A.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperacin"})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesin"})})]}):l==="forgot_sent"?i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),i.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",i.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contrasea."]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulacin, revise la consola del navegador para ver el enlace)."}),i.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:" Volver a Iniciar Sesin"})]}):i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:A=>a(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contrasea"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:A=>o(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:i.jsx("p",{children:r})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Olvid su contrasea?"})}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(WM,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesin":"Recuperacin de Contrasea"})]}),i.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},rk=({trigger:e,children:t,onOpen:r})=>{const[n,a]=w.useState(!1),s=w.useRef(null),o=()=>{const c=!n;a(c),c&&r&&r()},l=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return w.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),i.jsxs("div",{className:"relative",ref:s,children:[i.jsx("div",{onClick:o,children:e}),n&&i.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},VG="usuariosLiceo",_Te=({user:e,onClose:t,onSave:r})=>{const[n,a]=w.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=l=>{a({...n,[l.target.name]:l.target.value})},o=l=>{l.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(VG);let d=u?JSON.parse(u):[];const f=d.findIndex(A=>A.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(VG,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:i.jsxs("form",{onSubmit:o,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),i.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrnico"}),i.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Funcin"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},$G="usuariosLiceo",TTe=({user:e,onClose:t,onSave:r})=>{const[n,a]=w.useState(""),[s,o]=w.useState(""),[l,c]=w.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contrasea no puede estar en blanco.");return}if(n!==s){c("Las contraseas no coinciden.");return}const f={...e,password:n};try{const A=localStorage.getItem($G);let m=A?JSON.parse(A):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem($G,JSON.stringify(m)),r(f),t()}catch(A){console.error("Failed to save new password:",A),c("No se pudo guardar la nueva contrasea.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuracin de Cuenta"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contrasea"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contrasea"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>o(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:i.jsx("p",{children:l})})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contrasea"})]})]})})})};async function Eoe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Xn()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await dn(pt(xr,"notificaciones"),t)).id}function BTe(e,t){const r=[];let n=[],a=[];const s=()=>{const o=new Map;[...n,...a].forEach(c=>{c.id&&(o.has(c.id)||o.set(c.id,c))});const l=Array.from(o.values()).sort((c,u)=>{var A,m;const d=(A=c.createdAt)!=null&&A.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(l)};if(e.email){const o=Lt(pt(xr,"notificaciones"),ur("docenteEmailLower","==",e.email.toLowerCase()),tr("createdAt","desc"));r.push(hr(o,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const o=Lt(pt(xr,"notificaciones"),ur("docenteNombre","==",e.nombreCompleto),tr("createdAt","desc"));r.push(hr(o,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(o=>o())}async function ITe(e){const t=er(xr,"notificaciones",e);await Zi(t,{leida:!0})}async function DTe(e){const t=er(xr,"notificaciones",e);await fa(t)}const zG="anunciosMuro",GG="mensajesInternos",qG="lir-read-status",OTe=({user:e})=>{if(e.fotoUrl)return i.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return i.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},PTe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:o,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[u,d]=w.useState([]),[f,A]=w.useState([]),[m,g]=w.useState(!1),[x,v]=w.useState(!1),[y,N]=w.useState([]),C=w.useCallback(()=>{try{const B=localStorage.getItem(`${qG}-${e.id}`);return B?JSON.parse(B):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),_=w.useCallback(B=>{try{localStorage.setItem(`${qG}-${e.id}`,JSON.stringify(B))}catch(M){console.error("Failed to set read status:",M)}},[e.id]);w.useEffect(()=>{const B=JSON.parse(localStorage.getItem(zG)||"[]"),M=C();d(B.filter(S=>!M.announcements.includes(S.id)));const P=JSON.parse(localStorage.getItem(GG)||"[]");A(P.filter(S=>S.para===e.email).sort((S,L)=>new Date(L.fecha).getTime()-new Date(S.fecha).getTime()).slice(0,5))},[e.id,C,l]),w.useEffect(()=>{if(!((e==null?void 0:e.profile)===Ot.SUBDIRECCION||(e==null?void 0:e.profile)===Ot.PROFESORADO||(e==null?void 0:e.profile)===Ot.COORDINACION_TP)||!(e!=null&&e.email))return;const M=BTe({email:e.email,nombreCompleto:e.nombreCompleto},P=>{const S=P.filter(L=>L.tipo&&(L.tipo.toLowerCase()==="pie"||L.tipo==="nueva_intervencion"));N(S)});return()=>M()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto,e==null?void 0:e.profile]);const j=()=>{const B=C(),M=JSON.parse(localStorage.getItem(zG)||"[]").map(P=>P.id);B.announcements=M,_(B),d([])},I=()=>{const B=C(),P=JSON.parse(localStorage.getItem(GG)||"[]").filter(S=>S.para===e.email).map(S=>S.id);B.messages=[...new Set([...B.messages,...P])],_(B),c()},T=y.filter(B=>!B.leida).length,k=B=>{var M;try{const P=(M=B.createdAt)!=null&&M.toDate?B.createdAt.toDate():new Date(B.createdAt);return P?P.toLocaleString("es-CL"):""}catch{return""}};return i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:i.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:o,children:i.jsx(aTe,{})}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestin LIR"})]})]}),i.jsx("div",{className:"flex-1 flex justify-center",children:i.jsx("button",{onClick:()=>r("Calendario Acadmico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Acadmico",children:i.jsx(PS,{})})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rk,{onOpen:j,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[i.jsx(sTe,{}),u.length>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),i.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(B=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsx("p",{className:"font-bold dark:text-slate-200",children:B.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.mensaje})]},B.id)),u.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]})]})}),(e.profile===Ot.SUBDIRECCION||e.profile===Ot.PROFESORADO||e.profile===Ot.COORDINACION_TP)&&i.jsx(rk,{trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[i.jsx(d3e,{className:"w-5 h-5"}),T>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:T})]}),children:i.jsxs("div",{className:"p-2 w-80",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),i.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&i.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(B=>i.jsx("li",{className:"p-2 text-sm",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),i.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:B.mensaje}),B.estudianteNombre&&i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",i.jsx("b",{children:B.estudianteNombre})]}),i.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:k(B)})]}),i.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!B.leida&&i.jsx("button",{onClick:()=>B.id&&ITe(B.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leda"}),i.jsx("button",{onClick:()=>B.id&&DTe(B.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},B.id))]})]})}),i.jsx(rk,{onOpen:I,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[i.jsx(iTe,{}),l>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),i.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(B=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",B.de]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.asunto})]},B.id)),f.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]})]})}),i.jsx(rk,{trigger:i.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(OTe,{user:e})}),children:i.jsxs("div",{className:"p-2",children:[i.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),i.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuracin"})}),s&&i.jsx("li",{children:i.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:" Cambiar Vista"})}),i.jsx("li",{children:i.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesin"})})]})]})})]})]})}),m&&i.jsx(_Te,{user:e,onClose:()=>g(!1),onSave:n}),x&&i.jsx(TTe,{user:e,onClose:()=>v(!1),onSave:n})]})},FTe={apiKey:"AIzaSyBX_n9qoSh0N2c1OAPurBAl6FC9ltX4tK0",authDomain:"plania-clase.firebaseapp.com",projectId:"plania-clase",storageBucket:"plania-clase.firebasestorage.app",messagingSenderId:"978612067917",appId:"1:978612067917:web:299137755ec80939d7c604",measurementId:void 0},XM=z$().length?z$()[0]:L8(FTe),dt=EM(XM),$N=qae(XM),b3=$M(XM),YM=Object.freeze(Object.defineProperty({__proto__:null,auth:$N,db:dt,storage:b3},Symbol.toStringTag,{value:"Module"})),y3="reemplazos_docentes",RTe="usuarios",joe=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},LTe=e=>{const t=e.data();return{id:e.id,...t}},MTe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:wr.fromDate(new Date),fechaActualizacion:wr.fromDate(new Date)};return(await dn(pt(dt,y3),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},UTe=async(e,t)=>{try{const r=er(dt,y3,e),n=await bA(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await fa(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},HTe=(e,t,r=50)=>{try{const n=Lt(pt(dt,y3),ur("userId","==",e),tr("diaAusencia","desc"),Fl(r));return hr(n,a=>{const s=a.docs.map(joe);t(s)},a=>{console.error("Error en suscripcin a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripcin de reemplazos:",n),()=>{}}},QTe=e=>{try{const t=Lt(pt(dt,RTe),ur("profile","==",Ot.PROFESORADO));return hr(t,n=>{const a=n.docs.map(LTe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripcin de profesores:",t),()=>{}}},VTe=async(e,t)=>{try{if(!t.trim())return[];const r=Lt(pt(dt,y3),ur("userId","==",e),tr("diaAusencia","desc"),Fl(100)),a=(await Rr(r)).docs.map(joe),s=t.toLowerCase();return a.filter(o=>o.docenteAusente.toLowerCase().includes(s)||o.docenteReemplazante.toLowerCase().includes(s)||o.curso.toLowerCase().includes(s)||o.diaAusencia.includes(s)||o.asignaturaAusente.toLowerCase().includes(s)||o.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en bsqueda de reemplazos:",r),[]}};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var z5={};z5.version="0.18.5";var koe=1252,$Te=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],JM={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},ZM=function(e){$Te.indexOf(e)!=-1&&(koe=JM[0]=e)};function zTe(){ZM(1252)}var vf=function(e){ZM(e)};function e7(){vf(1200),zTe()}function KG(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function GTe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Soe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var w2=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?GTe(e.slice(2)):t==254&&r==255?Soe(e.slice(2)):t==65279?e.slice(1):e},nk=function(t){return String.fromCharCode(t)},WG=function(t){return String.fromCharCode(t)},zN,ep="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function GN(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=ep.charAt(s)+ep.charAt(o)+ep.charAt(l)+ep.charAt(c);return t}function Du(e){var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=ep.indexOf(e.charAt(u++)),o=ep.indexOf(e.charAt(u++)),r=s<<2|o>>4,t+=String.fromCharCode(r),l=ep.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=ep.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var En=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),UA=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Sp(e){return En?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function XG(e){return En?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Nu=function(t){return En?UA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function w3(e){if(typeof ArrayBuffer>"u")return Nu(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Gp(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function qTe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function t7(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return t7(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var bo=En?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:UA(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function KTe(e){for(var t=[],r=0,n=e.length+250,a=Sp(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Sp(65535),n=65530)}return t.push(a.slice(0,r)),bo(t)}var sc=/\u0000/g,N2=/[\u0001-\u0006]/g;function l1(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function bf(e,t){var r=""+e;return r.length>=t?r:qs("0",t-r.length)+r}function r7(e,t){var r=""+e;return r.length>=t?r:qs(" ",t-r.length)+r}function G5(e,t){var r=""+e;return r.length>=t?r:r+qs(" ",t-r.length)}function WTe(e,t){var r=""+Math.round(e);return r.length>=t?r:qs("0",t-r.length)+r}function XTe(e,t){var r=""+e;return r.length>=t?r:qs("0",t-r.length)+r}var YG=Math.pow(2,32);function Wv(e,t){if(e>YG||e<-YG)return WTe(e,t);var r=Math.round(e);return XTe(r,t)}function q5(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var JG=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],e6=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function YTe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Kr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},ZG={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},JTe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function K5(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var A=Math.floor(n*l/d);return[A,n*l-A*d,d]}function Jg(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=aBe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var _oe=new Date(1899,11,31,0,0,0),ZTe=_oe.getTime(),eBe=new Date(1900,2,1,0,0,0);function Toe(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=eBe&&(r+=1440*60*1e3),(r-(ZTe+(e.getTimezoneOffset()-_oe.getTimezoneOffset())*6e4))/(1440*60*1e3)}function n7(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function tBe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function rBe(e){var t=e<0?12:11,r=n7(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function nBe(e){var t=n7(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function qN(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=rBe(e):t===10?r=e.toFixed(10).substr(0,12):r=nBe(e),n7(tBe(r.toUpperCase()))}function Fx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):qN(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Td(14,Toe(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function aBe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function sBe(e,t,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return e6[r.m-1][1];case 5:return e6[r.m-1][0];default:return e6[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return JG[r.q][0];default:return JG[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?bf(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(a=bf(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?bf(c,u):"";return d}function tp(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var Boe=/%/g;function iBe(e,t,r){var n=t.replace(Boe,""),a=t.length-n.length;return sA(e,n,r*Math.pow(10,2*a))+qs("%",a)}function oBe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return sA(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Ioe(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Ioe(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Doe=/# (\?+)( ?)\/( ?)(\d+)/;function lBe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?qs(" ",e[1].length+1+e[4].length):r7(o,e[1].length)+e[2]+"/"+e[3]+bf(l,e[4].length))}function cBe(e,t,r){return r+(t===0?"":""+t)+qs(" ",e[1].length+2+e[4].length)}var Ooe=/^#*0*\.([0#]+)/,Poe=/\).*[0#]/,Foe=/\(###\) ###\\?-####/;function Jl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function eq(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function tq(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function uBe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function dBe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function dd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Poe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?dd("n",n,r):"("+dd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return oBe(e,t,r);if(t.indexOf("%")!==-1)return iBe(e,t,r);if(t.indexOf("E")!==-1)return Ioe(t,r);if(t.charCodeAt(0)===36)return"$"+dd(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Wv(c,t.length);if(t.match(/^[#?]+$/))return a=Wv(r,0),a==="0"&&(a=""),a.length>t.length?a:Jl(t.substr(0,t.length-a.length))+a;if(s=t.match(Doe))return lBe(s,c,u);if(t.match(/^#+0+$/))return u+Wv(c,t.length-t.indexOf("0"));if(s=t.match(Ooe))return a=eq(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Jl(s[1])).replace(/\.$/,"."+Jl(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+qs("0",Jl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+eq(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+tp(Wv(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+dd(e,t,-r):tp(""+(Math.floor(r)+uBe(r,s[1].length)))+"."+bf(tq(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return dd(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=l1(dd(e,t.replace(/[\\-]/g,""),r)),o=0,l1(l1(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Foe))return a=dd(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=K5(c,Math.pow(10,o)-1,!1),a=""+u,d=sA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=G5(l[2],o),d.length<s[4].length&&(d=Jl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=K5(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?r7(l[1],o)+s[2]+"/"+s[3]+G5(l[2],o):qs(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Wv(r,0),t.length<=a.length?a:Jl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,A=t.length-a.length-f;return Jl(t.substr(0,f)+a+t.substr(t.length-A))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=tq(r,s[1].length),r<0?"-"+dd(e,t,-r):tp(dBe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?bf(0,3-g.length):"")+g})+"."+bf(o,s[1].length);switch(t){case"###,##0.00":return dd(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=tp(Wv(c,0));return m!=="0"?u+m:"";case"###,###.00":return dd(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return dd(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function fBe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return sA(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function hBe(e,t,r){var n=t.replace(Boe,""),a=t.length-n.length;return sA(e,n,r*Math.pow(10,2*a))+qs("%",a)}function Roe(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Roe(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function bh(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Poe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?bh("n",n,r):"("+bh("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return fBe(e,t,r);if(t.indexOf("%")!==-1)return hBe(e,t,r);if(t.indexOf("E")!==-1)return Roe(t,r);if(t.charCodeAt(0)===36)return"$"+bh(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+bf(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Jl(t.substr(0,t.length-a.length))+a;if(s=t.match(Doe))return cBe(s,c,u);if(t.match(/^#+0+$/))return u+bf(c,t.length-t.indexOf("0"));if(s=t.match(Ooe))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Jl(s[1])).replace(/\.$/,"."+Jl(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+qs("0",Jl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+tp(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+bh(e,t,-r):tp(""+r)+"."+qs("0",s[1].length);if(s=t.match(/^#,#*,#0/))return bh(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=l1(bh(e,t.replace(/[\\-]/g,""),r)),o=0,l1(l1(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Foe))return a=bh(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=K5(c,Math.pow(10,o)-1,!1),a=""+u,d=sA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=G5(l[2],o),d.length<s[4].length&&(d=Jl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=K5(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?r7(l[1],o)+s[2]+"/"+s[3]+G5(l[2],o):qs(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Jl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,A=t.length-a.length-f;return Jl(t.substr(0,f)+a+t.substr(t.length-A))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+bh(e,t,-r):tp(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?bf(0,3-g.length):"")+g})+"."+bf(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=tp(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return bh(e,t.slice(0,t.lastIndexOf(".")),r)+Jl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function sA(e,t,r){return(r|0)===r?bh(e,t,r):dd(e,t,r)}function ABe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Loe=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ey(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":q5(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Loe))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function mBe(e,t,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,A="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!q5(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var m=e.charAt(++o),g=m==="("||m===")"?m:"t";a[a.length]={t:g,v:m},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=Jg(t,r,e.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Jg(t,r),u==null))return"";for(s=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=A),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var x={t:l,v:l};if(u==null&&(u=Jg(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",A="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",o+=5,A="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(x.v=u.H>=12?"":""),x.t="T",o+=5,A="h"):(x.t="t",++o),u==null&&x.t==="T")return"";a[a.length]=x,c=l;break;case"[":for(s=l;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Loe)){if(u==null&&(u=Jg(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ey(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<e.length&&(l=e.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var v=0,y=0,N;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=A,c="h",v<1&&(v=1);break;case"s":(N=a[o].v.match(/\.0+$/))&&(y=Math.max(y,N[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[o].v.match(/[Hh]/)&&(v=1),v<2&&a[o].v.match(/[Mm]/)&&(v=2),v<3&&a[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var C="",_;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=sBe(a[o].t.charCodeAt(0),a[o].v,u,y),a[o].t="t";break;case"n":case"?":for(_=o+1;a[_]!=null&&((l=a[_].t)==="?"||l==="D"||(l===" "||l==="t")&&a[_+1]!=null&&(a[_+1].t==="?"||a[_+1].t==="t"&&a[_+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[_].v==="/"||a[_].v===" "&&a[_+1]!=null&&a[_+1].t=="?"));)a[o].v+=a[_].v,a[_]={v:"",t:";"},++_;C+=a[o].v,o=_-1;break;case"G":a[o].t="t",a[o].v=Fx(t,r);break}var j="",I,T;if(C.length>0){C.charCodeAt(0)==40?(I=t<0&&C.charCodeAt(0)===45?-t:t,T=sA("n",C,I)):(I=t<0&&n>1?-t:t,T=sA("n",C,I),I<0&&a[0]&&a[0].t=="t"&&(T=T.substr(1),a[0].v="-"+a[0].v)),_=T.length-1;var k=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){k=o;break}var B=a.length;if(k===a.length&&T.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(_>=a[o].v.length-1?(_-=a[o].v.length,a[o].v=T.substr(_+1,a[o].v.length)):_<0?a[o].v="":(a[o].v=T.substr(0,_+1),_=-1),a[o].t="t",B=o);_>=0&&B<a.length&&(a[B].v=T.substr(0,_+1)+a[B].v)}else if(k!==a.length&&T.indexOf("E")===-1){for(_=T.indexOf(".")-1,o=k;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===k?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)_>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=T.charAt(_--)+j);a[o].v=j,a[o].t="t",B=o}for(_>=0&&B<a.length&&(a[B].v=T.substr(0,_+1)+a[B].v),_=T.indexOf(".")+1,o=k;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==k)){for(d=a[o].v.indexOf(".")>-1&&o===k?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)_<T.length&&(j+=T.charAt(_++));a[o].v=j,a[o].t="t",B=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(I=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=sA(a[o].t,a[o].v,I),a[o].t="t");var M="";for(o=0;o!==a.length;++o)a[o]!=null&&(M+=a[o].v);return M}var rq=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function nq(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function pBe(e,t){var r=ABe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(rq),l=r[1].match(rq);return nq(t,o)?[n,r[0]]:nq(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function Td(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Kr)[e],n==null&&(n=r.table&&r.table[ZG[e]]||Kr[ZG[e]]),n==null&&(n=JTe[e]||"General");break}if(q5(n,0))return Fx(t,r);t instanceof Date&&(t=Toe(t,r.date1904));var a=pBe(n,t);if(q5(a[1]))return Fx(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return mBe(a[1],t,r,a[0])}function iA(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Kr[r]==null){t<0&&(t=r);continue}if(Kr[r]==e){t=r;break}}t<0&&(t=391)}return Kr[t]=e,t}function N3(e){for(var t=0;t!=392;++t)e[t]!==void 0&&iA(e[t],t)}function jy(){Kr=YTe()}var gBe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Moe=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function xBe(e){var t=typeof e=="number"?Kr[e]:e;return t=t.replace(Moe,"(\\d+)"),new RegExp("^"+t+"$")}function vBe(e,t,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(t.match(Moe)||[]).forEach(function(f,A){var m=parseInt(r[A+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:a=m;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var bBe=function(){var e={};e.version="1.2.0";function t(){for(var T=0,k=new Array(256),B=0;B!=256;++B)T=B,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,k[B]=T;return typeof Int32Array<"u"?new Int32Array(k):k}var r=t();function n(T){var k=0,B=0,M=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)P[M]=T[M];for(M=0;M!=256;++M)for(B=T[M],k=256+M;k<4096;k+=256)B=P[k]=B>>>8^T[B&255];var S=[];for(M=1;M!=16;++M)S[M-1]=typeof Int32Array<"u"?P.subarray(M*256,M*256+256):P.slice(M*256,M*256+256);return S}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],A=a[7],m=a[8],g=a[9],x=a[10],v=a[11],y=a[12],N=a[13],C=a[14];function _(T,k){for(var B=k^-1,M=0,P=T.length;M<P;)B=B>>>8^r[(B^T.charCodeAt(M++))&255];return~B}function j(T,k){for(var B=k^-1,M=T.length-15,P=0;P<M;)B=C[T[P++]^B&255]^N[T[P++]^B>>8&255]^y[T[P++]^B>>16&255]^v[T[P++]^B>>>24]^x[T[P++]]^g[T[P++]]^m[T[P++]]^A[T[P++]]^f[T[P++]]^d[T[P++]]^u[T[P++]]^c[T[P++]]^l[T[P++]]^o[T[P++]]^s[T[P++]]^r[T[P++]];for(M+=15;P<M;)B=B>>>8^r[(B^T[P++])&255];return~B}function I(T,k){for(var B=k^-1,M=0,P=T.length,S=0,L=0;M<P;)S=T.charCodeAt(M++),S<128?B=B>>>8^r[(B^S)&255]:S<2048?(B=B>>>8^r[(B^(192|S>>6&31))&255],B=B>>>8^r[(B^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,L=T.charCodeAt(M++)&1023,B=B>>>8^r[(B^(240|S>>8&7))&255],B=B>>>8^r[(B^(128|S>>2&63))&255],B=B>>>8^r[(B^(128|L>>6&15|(S&3)<<4))&255],B=B>>>8^r[(B^(128|L&63))&255]):(B=B>>>8^r[(B^(224|S>>12&15))&255],B=B>>>8^r[(B^(128|S>>6&63))&255],B=B>>>8^r[(B^(128|S&63))&255]);return~B}return e.table=r,e.bstr=_,e.buf=j,e.str=I,e}(),Fr=function(){var t={};t.version="1.2.1";function r(ke,$e){for(var Re=ke.split("/"),Me=$e.split("/"),we=0,xe=0,De=Math.min(Re.length,Me.length);we<De;++we){if(xe=Re[we].length-Me[we].length)return xe;if(Re[we]!=Me[we])return Re[we]<Me[we]?-1:1}return Re.length-Me.length}function n(ke){if(ke.charAt(ke.length-1)=="/")return ke.slice(0,-1).indexOf("/")===-1?ke:n(ke.slice(0,-1));var $e=ke.lastIndexOf("/");return $e===-1?ke:ke.slice(0,$e+1)}function a(ke){if(ke.charAt(ke.length-1)=="/")return a(ke.slice(0,-1));var $e=ke.lastIndexOf("/");return $e===-1?ke:ke.slice($e+1)}function s(ke,$e){typeof $e=="string"&&($e=new Date($e));var Re=$e.getHours();Re=Re<<6|$e.getMinutes(),Re=Re<<5|$e.getSeconds()>>>1,ke.write_shift(2,Re);var Me=$e.getFullYear()-1980;Me=Me<<4|$e.getMonth()+1,Me=Me<<5|$e.getDate(),ke.write_shift(2,Me)}function o(ke){var $e=ke.read_shift(2)&65535,Re=ke.read_shift(2)&65535,Me=new Date,we=Re&31;Re>>>=5;var xe=Re&15;Re>>>=4,Me.setMilliseconds(0),Me.setFullYear(Re+1980),Me.setMonth(xe-1),Me.setDate(we);var De=$e&31;$e>>>=5;var Ge=$e&63;return $e>>>=6,Me.setHours($e),Me.setMinutes(Ge),Me.setSeconds(De<<1),Me}function l(ke){zo(ke,0);for(var $e={},Re=0;ke.l<=ke.length-4;){var Me=ke.read_shift(2),we=ke.read_shift(2),xe=ke.l+we,De={};switch(Me){case 21589:Re=ke.read_shift(1),Re&1&&(De.mtime=ke.read_shift(4)),we>5&&(Re&2&&(De.atime=ke.read_shift(4)),Re&4&&(De.ctime=ke.read_shift(4))),De.mtime&&(De.mt=new Date(De.mtime*1e3));break}ke.l=xe,$e[Me]=De}return $e}var c;function u(){return c||(c={})}function d(ke,$e){if(ke[0]==80&&ke[1]==75)return ot(ke,$e);if((ke[0]|32)==109&&(ke[1]|32)==105)return qa(ke,$e);if(ke.length<512)throw new Error("CFB file size "+ke.length+" < 512");var Re=3,Me=512,we=0,xe=0,De=0,Ge=0,Ue=0,Ze=[],rt=ke.slice(0,512);zo(rt,0);var _t=f(rt);switch(Re=_t[0],Re){case 3:Me=512;break;case 4:Me=4096;break;case 0:if(_t[1]==0)return ot(ke,$e);default:throw new Error("Major Version: Expected 3 or 4 saw "+Re)}Me!==512&&(rt=ke.slice(0,Me),zo(rt,28));var Bt=ke.slice(0,Me);A(rt,Re);var Kt=rt.read_shift(4,"i");if(Re===3&&Kt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Kt);rt.l+=4,De=rt.read_shift(4,"i"),rt.l+=4,rt.chk("00100000","Mini Stream Cutoff Size: "),Ge=rt.read_shift(4,"i"),we=rt.read_shift(4,"i"),Ue=rt.read_shift(4,"i"),xe=rt.read_shift(4,"i");for(var Ut=-1,Jt=0;Jt<109&&(Ut=rt.read_shift(4,"i"),!(Ut<0));++Jt)Ze[Jt]=Ut;var jr=m(ke,Me);v(Ue,xe,jr,Me,Ze);var on=N(jr,De,Ze,Me);on[De].name="!Directory",we>0&&Ge!==L&&(on[Ge].name="!MiniFAT"),on[Ze[0]].name="!FAT",on.fat_addrs=Ze,on.ssz=Me;var ln={},hn=[],Ka=[],Ci=[];C(De,on,jr,hn,we,ln,Ka,Ge),g(Ka,Ci,hn),hn.shift();var Da={FileIndex:Ka,FullPaths:Ci};return $e&&$e.raw&&(Da.raw={header:Bt,sectors:jr}),Da}function f(ke){if(ke[ke.l]==80&&ke[ke.l+1]==75)return[0,0];ke.chk(U,"Header Signature: "),ke.l+=16;var $e=ke.read_shift(2,"u");return[ke.read_shift(2,"u"),$e]}function A(ke,$e){var Re=9;switch(ke.l+=2,Re=ke.read_shift(2)){case 9:if($e!=3)throw new Error("Sector Shift: Expected 9 saw "+Re);break;case 12:if($e!=4)throw new Error("Sector Shift: Expected 12 saw "+Re);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Re)}ke.chk("0600","Mini Sector Shift: "),ke.chk("000000000000","Reserved: ")}function m(ke,$e){for(var Re=Math.ceil(ke.length/$e)-1,Me=[],we=1;we<Re;++we)Me[we-1]=ke.slice(we*$e,(we+1)*$e);return Me[Re-1]=ke.slice(Re*$e),Me}function g(ke,$e,Re){for(var Me=0,we=0,xe=0,De=0,Ge=0,Ue=Re.length,Ze=[],rt=[];Me<Ue;++Me)Ze[Me]=rt[Me]=Me,$e[Me]=Re[Me];for(;Ge<rt.length;++Ge)Me=rt[Ge],we=ke[Me].L,xe=ke[Me].R,De=ke[Me].C,Ze[Me]===Me&&(we!==-1&&Ze[we]!==we&&(Ze[Me]=Ze[we]),xe!==-1&&Ze[xe]!==xe&&(Ze[Me]=Ze[xe])),De!==-1&&(Ze[De]=Me),we!==-1&&Me!=Ze[Me]&&(Ze[we]=Ze[Me],rt.lastIndexOf(we)<Ge&&rt.push(we)),xe!==-1&&Me!=Ze[Me]&&(Ze[xe]=Ze[Me],rt.lastIndexOf(xe)<Ge&&rt.push(xe));for(Me=1;Me<Ue;++Me)Ze[Me]===Me&&(xe!==-1&&Ze[xe]!==xe?Ze[Me]=Ze[xe]:we!==-1&&Ze[we]!==we&&(Ze[Me]=Ze[we]));for(Me=1;Me<Ue;++Me)if(ke[Me].type!==0){if(Ge=Me,Ge!=Ze[Ge])do Ge=Ze[Ge],$e[Me]=$e[Ge]+"/"+$e[Me];while(Ge!==0&&Ze[Ge]!==-1&&Ge!=Ze[Ge]);Ze[Me]=-1}for($e[0]+="/",Me=1;Me<Ue;++Me)ke[Me].type!==2&&($e[Me]+="/")}function x(ke,$e,Re){for(var Me=ke.start,we=ke.size,xe=[],De=Me;Re&&we>0&&De>=0;)xe.push($e.slice(De*S,De*S+S)),we-=S,De=$g(Re,De*4);return xe.length===0?Pt(0):bo(xe).slice(0,ke.size)}function v(ke,$e,Re,Me,we){var xe=L;if(ke===L){if($e!==0)throw new Error("DIFAT chain shorter than expected")}else if(ke!==-1){var De=Re[ke],Ge=(Me>>>2)-1;if(!De)return;for(var Ue=0;Ue<Ge&&(xe=$g(De,Ue*4))!==L;++Ue)we.push(xe);v($g(De,Me-4),$e-1,Re,Me,we)}}function y(ke,$e,Re,Me,we){var xe=[],De=[];we||(we=[]);var Ge=Me-1,Ue=0,Ze=0;for(Ue=$e;Ue>=0;){we[Ue]=!0,xe[xe.length]=Ue,De.push(ke[Ue]);var rt=Re[Math.floor(Ue*4/Me)];if(Ze=Ue*4&Ge,Me<4+Ze)throw new Error("FAT boundary crossed: "+Ue+" 4 "+Me);if(!ke[rt])break;Ue=$g(ke[rt],Ze)}return{nodes:xe,data:mq([De])}}function N(ke,$e,Re,Me){var we=ke.length,xe=[],De=[],Ge=[],Ue=[],Ze=Me-1,rt=0,_t=0,Bt=0,Kt=0;for(rt=0;rt<we;++rt)if(Ge=[],Bt=rt+$e,Bt>=we&&(Bt-=we),!De[Bt]){Ue=[];var Ut=[];for(_t=Bt;_t>=0;){Ut[_t]=!0,De[_t]=!0,Ge[Ge.length]=_t,Ue.push(ke[_t]);var Jt=Re[Math.floor(_t*4/Me)];if(Kt=_t*4&Ze,Me<4+Kt)throw new Error("FAT boundary crossed: "+_t+" 4 "+Me);if(!ke[Jt]||(_t=$g(ke[Jt],Kt),Ut[_t]))break}xe[Bt]={nodes:Ge,data:mq([Ue])}}return xe}function C(ke,$e,Re,Me,we,xe,De,Ge){for(var Ue=0,Ze=Me.length?2:0,rt=$e[ke].data,_t=0,Bt=0,Kt;_t<rt.length;_t+=128){var Ut=rt.slice(_t,_t+128);zo(Ut,64),Bt=Ut.read_shift(2),Kt=u7(Ut,0,Bt-Ze),Me.push(Kt);var Jt={name:Kt,type:Ut.read_shift(1),color:Ut.read_shift(1),L:Ut.read_shift(4,"i"),R:Ut.read_shift(4,"i"),C:Ut.read_shift(4,"i"),clsid:Ut.read_shift(16),state:Ut.read_shift(4,"i"),start:0,size:0},jr=Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2);jr!==0&&(Jt.ct=_(Ut,Ut.l-8));var on=Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2);on!==0&&(Jt.mt=_(Ut,Ut.l-8)),Jt.start=Ut.read_shift(4,"i"),Jt.size=Ut.read_shift(4,"i"),Jt.size<0&&Jt.start<0&&(Jt.size=Jt.type=0,Jt.start=L,Jt.name=""),Jt.type===5?(Ue=Jt.start,we>0&&Ue!==L&&($e[Ue].name="!StreamData")):Jt.size>=4096?(Jt.storage="fat",$e[Jt.start]===void 0&&($e[Jt.start]=y(Re,Jt.start,$e.fat_addrs,$e.ssz)),$e[Jt.start].name=Jt.name,Jt.content=$e[Jt.start].data.slice(0,Jt.size)):(Jt.storage="minifat",Jt.size<0?Jt.size=0:Ue!==L&&Jt.start!==L&&$e[Ue]&&(Jt.content=x(Jt,$e[Ue].data,($e[Ge]||{}).data))),Jt.content&&zo(Jt.content,0),xe[Kt]=Jt,De.push(Jt)}}function _(ke,$e){return new Date((vu(ke,$e+4)/1e7*Math.pow(2,32)+vu(ke,$e)/1e7-11644473600)*1e3)}function j(ke,$e){return u(),d(c.readFileSync(ke),$e)}function I(ke,$e){var Re=$e&&$e.type;switch(Re||En&&Buffer.isBuffer(ke)&&(Re="buffer"),Re||"base64"){case"file":return j(ke,$e);case"base64":return d(Nu(Du(ke)),$e);case"binary":return d(Nu(ke),$e)}return d(ke,$e)}function T(ke,$e){var Re=$e||{},Me=Re.root||"Root Entry";if(ke.FullPaths||(ke.FullPaths=[]),ke.FileIndex||(ke.FileIndex=[]),ke.FullPaths.length!==ke.FileIndex.length)throw new Error("inconsistent CFB structure");ke.FullPaths.length===0&&(ke.FullPaths[0]=Me+"/",ke.FileIndex[0]={name:Me,type:5}),Re.CLSID&&(ke.FileIndex[0].clsid=Re.CLSID),k(ke)}function k(ke){var $e="Sh33tJ5";if(!Fr.find(ke,"/"+$e)){var Re=Pt(4);Re[0]=55,Re[1]=Re[3]=50,Re[2]=54,ke.FileIndex.push({name:$e,type:2,content:Re,size:4,L:69,R:69,C:69}),ke.FullPaths.push(ke.FullPaths[0]+$e),B(ke)}}function B(ke,$e){T(ke);for(var Re=!1,Me=!1,we=ke.FullPaths.length-1;we>=0;--we){var xe=ke.FileIndex[we];switch(xe.type){case 0:Me?Re=!0:(ke.FileIndex.pop(),ke.FullPaths.pop());break;case 1:case 2:case 5:Me=!0,isNaN(xe.R*xe.L*xe.C)&&(Re=!0),xe.R>-1&&xe.L>-1&&xe.R==xe.L&&(Re=!0);break;default:Re=!0;break}}if(!(!Re&&!$e)){var De=new Date(1987,1,19),Ge=0,Ue=Object.create?Object.create(null):{},Ze=[];for(we=0;we<ke.FullPaths.length;++we)Ue[ke.FullPaths[we]]=!0,ke.FileIndex[we].type!==0&&Ze.push([ke.FullPaths[we],ke.FileIndex[we]]);for(we=0;we<Ze.length;++we){var rt=n(Ze[we][0]);Me=Ue[rt],Me||(Ze.push([rt,{name:a(rt).replace("/",""),type:1,clsid:H,ct:De,mt:De,content:null}]),Ue[rt]=!0)}for(Ze.sort(function(Kt,Ut){return r(Kt[0],Ut[0])}),ke.FullPaths=[],ke.FileIndex=[],we=0;we<Ze.length;++we)ke.FullPaths[we]=Ze[we][0],ke.FileIndex[we]=Ze[we][1];for(we=0;we<Ze.length;++we){var _t=ke.FileIndex[we],Bt=ke.FullPaths[we];if(_t.name=a(Bt).replace("/",""),_t.L=_t.R=_t.C=-(_t.color=1),_t.size=_t.content?_t.content.length:0,_t.start=0,_t.clsid=_t.clsid||H,we===0)_t.C=Ze.length>1?1:-1,_t.size=0,_t.type=5;else if(Bt.slice(-1)=="/"){for(Ge=we+1;Ge<Ze.length&&n(ke.FullPaths[Ge])!=Bt;++Ge);for(_t.C=Ge>=Ze.length?-1:Ge,Ge=we+1;Ge<Ze.length&&n(ke.FullPaths[Ge])!=n(Bt);++Ge);_t.R=Ge>=Ze.length?-1:Ge,_t.type=1}else n(ke.FullPaths[we+1]||"")==n(Bt)&&(_t.R=we+1),_t.type=2}}}function M(ke,$e){var Re=$e||{};if(Re.fileType=="mad")return ar(ke,Re);switch(B(ke),Re.fileType){case"zip":return fr(ke,Re)}var Me=function(Kt){for(var Ut=0,Jt=0,jr=0;jr<Kt.FileIndex.length;++jr){var on=Kt.FileIndex[jr];if(on.content){var ln=on.content.length;ln>0&&(ln<4096?Ut+=ln+63>>6:Jt+=ln+511>>9)}}for(var hn=Kt.FullPaths.length+3>>2,Ka=Ut+7>>3,Ci=Ut+127>>7,Da=Ka+Jt+hn+Ci,us=Da+127>>7,Oa=us<=109?0:Math.ceil((us-109)/127);Da+us+Oa+127>>7>us;)Oa=++us<=109?0:Math.ceil((us-109)/127);var ds=[1,Oa,us,Ci,hn,Jt,Ut,0];return Kt.FileIndex[0].size=Ut<<6,ds[7]=(Kt.FileIndex[0].start=ds[0]+ds[1]+ds[2]+ds[3]+ds[4]+ds[5])+(ds[6]+7>>3),ds}(ke),we=Pt(Me[7]<<9),xe=0,De=0;{for(xe=0;xe<8;++xe)we.write_shift(1,q[xe]);for(xe=0;xe<8;++xe)we.write_shift(2,0);for(we.write_shift(2,62),we.write_shift(2,3),we.write_shift(2,65534),we.write_shift(2,9),we.write_shift(2,6),xe=0;xe<3;++xe)we.write_shift(2,0);for(we.write_shift(4,0),we.write_shift(4,Me[2]),we.write_shift(4,Me[0]+Me[1]+Me[2]+Me[3]-1),we.write_shift(4,0),we.write_shift(4,4096),we.write_shift(4,Me[3]?Me[0]+Me[1]+Me[2]-1:L),we.write_shift(4,Me[3]),we.write_shift(-4,Me[1]?Me[0]-1:L),we.write_shift(4,Me[1]),xe=0;xe<109;++xe)we.write_shift(-4,xe<Me[2]?Me[1]+xe:-1)}if(Me[1])for(De=0;De<Me[1];++De){for(;xe<236+De*127;++xe)we.write_shift(-4,xe<Me[2]?Me[1]+xe:-1);we.write_shift(-4,De===Me[1]-1?L:De+1)}var Ge=function(Kt){for(De+=Kt;xe<De-1;++xe)we.write_shift(-4,xe+1);Kt&&(++xe,we.write_shift(-4,L))};for(De=xe=0,De+=Me[1];xe<De;++xe)we.write_shift(-4,z.DIFSECT);for(De+=Me[2];xe<De;++xe)we.write_shift(-4,z.FATSECT);Ge(Me[3]),Ge(Me[4]);for(var Ue=0,Ze=0,rt=ke.FileIndex[0];Ue<ke.FileIndex.length;++Ue)rt=ke.FileIndex[Ue],rt.content&&(Ze=rt.content.length,!(Ze<4096)&&(rt.start=De,Ge(Ze+511>>9)));for(Ge(Me[6]+7>>3);we.l&511;)we.write_shift(-4,z.ENDOFCHAIN);for(De=xe=0,Ue=0;Ue<ke.FileIndex.length;++Ue)rt=ke.FileIndex[Ue],rt.content&&(Ze=rt.content.length,!(!Ze||Ze>=4096)&&(rt.start=De,Ge(Ze+63>>6)));for(;we.l&511;)we.write_shift(-4,z.ENDOFCHAIN);for(xe=0;xe<Me[4]<<2;++xe){var _t=ke.FullPaths[xe];if(!_t||_t.length===0){for(Ue=0;Ue<17;++Ue)we.write_shift(4,0);for(Ue=0;Ue<3;++Ue)we.write_shift(4,-1);for(Ue=0;Ue<12;++Ue)we.write_shift(4,0);continue}rt=ke.FileIndex[xe],xe===0&&(rt.start=rt.size?rt.start-1:L);var Bt=xe===0&&Re.root||rt.name;if(Ze=2*(Bt.length+1),we.write_shift(64,Bt,"utf16le"),we.write_shift(2,Ze),we.write_shift(1,rt.type),we.write_shift(1,rt.color),we.write_shift(-4,rt.L),we.write_shift(-4,rt.R),we.write_shift(-4,rt.C),rt.clsid)we.write_shift(16,rt.clsid,"hex");else for(Ue=0;Ue<4;++Ue)we.write_shift(4,0);we.write_shift(4,rt.state||0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,rt.start),we.write_shift(4,rt.size),we.write_shift(4,0)}for(xe=1;xe<ke.FileIndex.length;++xe)if(rt=ke.FileIndex[xe],rt.size>=4096)if(we.l=rt.start+1<<9,En&&Buffer.isBuffer(rt.content))rt.content.copy(we,we.l,0,rt.size),we.l+=rt.size+511&-512;else{for(Ue=0;Ue<rt.size;++Ue)we.write_shift(1,rt.content[Ue]);for(;Ue&511;++Ue)we.write_shift(1,0)}for(xe=1;xe<ke.FileIndex.length;++xe)if(rt=ke.FileIndex[xe],rt.size>0&&rt.size<4096)if(En&&Buffer.isBuffer(rt.content))rt.content.copy(we,we.l,0,rt.size),we.l+=rt.size+63&-64;else{for(Ue=0;Ue<rt.size;++Ue)we.write_shift(1,rt.content[Ue]);for(;Ue&63;++Ue)we.write_shift(1,0)}if(En)we.l=we.length;else for(;we.l<we.length;)we.write_shift(1,0);return we}function P(ke,$e){var Re=ke.FullPaths.map(function(Ue){return Ue.toUpperCase()}),Me=Re.map(function(Ue){var Ze=Ue.split("/");return Ze[Ze.length-(Ue.slice(-1)=="/"?2:1)]}),we=!1;$e.charCodeAt(0)===47?(we=!0,$e=Re[0].slice(0,-1)+$e):we=$e.indexOf("/")!==-1;var xe=$e.toUpperCase(),De=we===!0?Re.indexOf(xe):Me.indexOf(xe);if(De!==-1)return ke.FileIndex[De];var Ge=!xe.match(N2);for(xe=xe.replace(sc,""),Ge&&(xe=xe.replace(N2,"!")),De=0;De<Re.length;++De)if((Ge?Re[De].replace(N2,"!"):Re[De]).replace(sc,"")==xe||(Ge?Me[De].replace(N2,"!"):Me[De]).replace(sc,"")==xe)return ke.FileIndex[De];return null}var S=64,L=-2,U="d0cf11e0a1b11ae1",q=[208,207,17,224,161,177,26,225],H="00000000000000000000000000000000",z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:U,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:H,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function W(ke,$e,Re){u();var Me=M(ke,Re);c.writeFileSync($e,Me)}function Z(ke){for(var $e=new Array(ke.length),Re=0;Re<ke.length;++Re)$e[Re]=String.fromCharCode(ke[Re]);return $e.join("")}function V(ke,$e){var Re=M(ke,$e);switch($e&&$e.type||"buffer"){case"file":return u(),c.writeFileSync($e.filename,Re),Re;case"binary":return typeof Re=="string"?Re:Z(Re);case"base64":return GN(typeof Re=="string"?Re:Z(Re));case"buffer":if(En)return Buffer.isBuffer(Re)?Re:UA(Re);case"array":return typeof Re=="string"?Nu(Re):Re}return Re}var Y;function R(ke){try{var $e=ke.InflateRaw,Re=new $e;if(Re._processChunk(new Uint8Array([3,0]),Re._finishFlushFlag),Re.bytesRead)Y=ke;else throw new Error("zlib does not expose bytesRead")}catch(Me){console.error("cannot use native zlib: "+(Me.message||Me))}}function O(ke,$e){if(!Y)return Ct(ke,$e);var Re=Y.InflateRaw,Me=new Re,we=Me._processChunk(ke.slice(ke.l),Me._finishFlushFlag);return ke.l+=Me.bytesRead,we}function K(ke){return Y?Y.deflateRawSync(ke):mt(ke)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function re(ke){var $e=(ke<<1|ke<<11)&139536|(ke<<5|ke<<15)&558144;return($e>>16|$e>>8|$e)&255}for(var ue=typeof Uint8Array<"u",le=ue?new Uint8Array(256):[],ve=0;ve<256;++ve)le[ve]=re(ve);function X(ke,$e){var Re=le[ke&255];return $e<=8?Re>>>8-$e:(Re=Re<<8|le[ke>>8&255],$e<=16?Re>>>16-$e:(Re=Re<<8|le[ke>>16&255],Re>>>24-$e))}function Ee(ke,$e){var Re=$e&7,Me=$e>>>3;return(ke[Me]|(Re<=6?0:ke[Me+1]<<8))>>>Re&3}function Be(ke,$e){var Re=$e&7,Me=$e>>>3;return(ke[Me]|(Re<=5?0:ke[Me+1]<<8))>>>Re&7}function je(ke,$e){var Re=$e&7,Me=$e>>>3;return(ke[Me]|(Re<=4?0:ke[Me+1]<<8))>>>Re&15}function fe(ke,$e){var Re=$e&7,Me=$e>>>3;return(ke[Me]|(Re<=3?0:ke[Me+1]<<8))>>>Re&31}function ye(ke,$e){var Re=$e&7,Me=$e>>>3;return(ke[Me]|(Re<=1?0:ke[Me+1]<<8))>>>Re&127}function Ae(ke,$e,Re){var Me=$e&7,we=$e>>>3,xe=(1<<Re)-1,De=ke[we]>>>Me;return Re<8-Me||(De|=ke[we+1]<<8-Me,Re<16-Me)||(De|=ke[we+2]<<16-Me,Re<24-Me)||(De|=ke[we+3]<<24-Me),De&xe}function se(ke,$e,Re){var Me=$e&7,we=$e>>>3;return Me<=5?ke[we]|=(Re&7)<<Me:(ke[we]|=Re<<Me&255,ke[we+1]=(Re&7)>>8-Me),$e+3}function ne(ke,$e,Re){var Me=$e&7,we=$e>>>3;return Re=(Re&1)<<Me,ke[we]|=Re,$e+1}function de(ke,$e,Re){var Me=$e&7,we=$e>>>3;return Re<<=Me,ke[we]|=Re&255,Re>>>=8,ke[we+1]=Re,$e+8}function me(ke,$e,Re){var Me=$e&7,we=$e>>>3;return Re<<=Me,ke[we]|=Re&255,Re>>>=8,ke[we+1]=Re&255,ke[we+2]=Re>>>8,$e+16}function ge(ke,$e){var Re=ke.length,Me=2*Re>$e?2*Re:$e+5,we=0;if(Re>=$e)return ke;if(En){var xe=XG(Me);if(ke.copy)ke.copy(xe);else for(;we<ke.length;++we)xe[we]=ke[we];return xe}else if(ue){var De=new Uint8Array(Me);if(De.set)De.set(ke);else for(;we<Re;++we)De[we]=ke[we];return De}return ke.length=Me,ke}function Te(ke){for(var $e=new Array(ke),Re=0;Re<ke;++Re)$e[Re]=0;return $e}function Ve(ke,$e,Re){var Me=1,we=0,xe=0,De=0,Ge=0,Ue=ke.length,Ze=ue?new Uint16Array(32):Te(32);for(xe=0;xe<32;++xe)Ze[xe]=0;for(xe=Ue;xe<Re;++xe)ke[xe]=0;Ue=ke.length;var rt=ue?new Uint16Array(Ue):Te(Ue);for(xe=0;xe<Ue;++xe)Ze[we=ke[xe]]++,Me<we&&(Me=we),rt[xe]=0;for(Ze[0]=0,xe=1;xe<=Me;++xe)Ze[xe+16]=Ge=Ge+Ze[xe-1]<<1;for(xe=0;xe<Ue;++xe)Ge=ke[xe],Ge!=0&&(rt[xe]=Ze[Ge+16]++);var _t=0;for(xe=0;xe<Ue;++xe)if(_t=ke[xe],_t!=0)for(Ge=X(rt[xe],Me)>>Me-_t,De=(1<<Me+4-_t)-1;De>=0;--De)$e[Ge|De<<_t]=_t&15|xe<<4;return Me}var Xe=ue?new Uint16Array(512):Te(512),Ke=ue?new Uint16Array(32):Te(32);if(!ue){for(var Qe=0;Qe<512;++Qe)Xe[Qe]=0;for(Qe=0;Qe<32;++Qe)Ke[Qe]=0}(function(){for(var ke=[],$e=0;$e<32;$e++)ke.push(5);Ve(ke,Ke,32);var Re=[];for($e=0;$e<=143;$e++)Re.push(8);for(;$e<=255;$e++)Re.push(9);for(;$e<=279;$e++)Re.push(7);for(;$e<=287;$e++)Re.push(8);Ve(Re,Xe,288)})();var Je=function(){for(var $e=ue?new Uint8Array(32768):[],Re=0,Me=0;Re<oe.length-1;++Re)for(;Me<oe[Re+1];++Me)$e[Me]=Re;for(;Me<32768;++Me)$e[Me]=29;var we=ue?new Uint8Array(259):[];for(Re=0,Me=0;Re<ce.length-1;++Re)for(;Me<ce[Re+1];++Me)we[Me]=Re;function xe(Ge,Ue){for(var Ze=0;Ze<Ge.length;){var rt=Math.min(65535,Ge.length-Ze),_t=Ze+rt==Ge.length;for(Ue.write_shift(1,+_t),Ue.write_shift(2,rt),Ue.write_shift(2,~rt&65535);rt-- >0;)Ue[Ue.l++]=Ge[Ze++]}return Ue.l}function De(Ge,Ue){for(var Ze=0,rt=0,_t=ue?new Uint16Array(32768):[];rt<Ge.length;){var Bt=Math.min(65535,Ge.length-rt);if(Bt<10){for(Ze=se(Ue,Ze,+(rt+Bt==Ge.length)),Ze&7&&(Ze+=8-(Ze&7)),Ue.l=Ze/8|0,Ue.write_shift(2,Bt),Ue.write_shift(2,~Bt&65535);Bt-- >0;)Ue[Ue.l++]=Ge[rt++];Ze=Ue.l*8;continue}Ze=se(Ue,Ze,+(rt+Bt==Ge.length)+2);for(var Kt=0;Bt-- >0;){var Ut=Ge[rt];Kt=(Kt<<5^Ut)&32767;var Jt=-1,jr=0;if((Jt=_t[Kt])&&(Jt|=rt&-32768,Jt>rt&&(Jt-=32768),Jt<rt))for(;Ge[Jt+jr]==Ge[rt+jr]&&jr<250;)++jr;if(jr>2){Ut=we[jr],Ut<=22?Ze=de(Ue,Ze,le[Ut+1]>>1)-1:(de(Ue,Ze,3),Ze+=5,de(Ue,Ze,le[Ut-23]>>5),Ze+=3);var on=Ut<8?0:Ut-4>>2;on>0&&(me(Ue,Ze,jr-ce[Ut]),Ze+=on),Ut=$e[rt-Jt],Ze=de(Ue,Ze,le[Ut]>>3),Ze-=3;var ln=Ut<4?0:Ut-2>>1;ln>0&&(me(Ue,Ze,rt-Jt-oe[Ut]),Ze+=ln);for(var hn=0;hn<jr;++hn)_t[Kt]=rt&32767,Kt=(Kt<<5^Ge[rt])&32767,++rt;Bt-=jr-1}else Ut<=143?Ut=Ut+48:Ze=ne(Ue,Ze,1),Ze=de(Ue,Ze,le[Ut]),_t[Kt]=rt&32767,++rt}Ze=de(Ue,Ze,0)-1}return Ue.l=(Ze+7)/8|0,Ue.l}return function(Ue,Ze){return Ue.length<8?xe(Ue,Ze):De(Ue,Ze)}}();function mt(ke){var $e=Pt(50+Math.floor(ke.length*1.1)),Re=Je(ke,$e);return $e.slice(0,Re)}var We=ue?new Uint16Array(32768):Te(32768),He=ue?new Uint16Array(32768):Te(32768),Tt=ue?new Uint16Array(128):Te(128),Ie=1,ft=1;function vt(ke,$e){var Re=fe(ke,$e)+257;$e+=5;var Me=fe(ke,$e)+1;$e+=5;var we=je(ke,$e)+4;$e+=4;for(var xe=0,De=ue?new Uint8Array(19):Te(19),Ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ue=1,Ze=ue?new Uint8Array(8):Te(8),rt=ue?new Uint8Array(8):Te(8),_t=De.length,Bt=0;Bt<we;++Bt)De[J[Bt]]=xe=Be(ke,$e),Ue<xe&&(Ue=xe),Ze[xe]++,$e+=3;var Kt=0;for(Ze[0]=0,Bt=1;Bt<=Ue;++Bt)rt[Bt]=Kt=Kt+Ze[Bt-1]<<1;for(Bt=0;Bt<_t;++Bt)(Kt=De[Bt])!=0&&(Ge[Bt]=rt[Kt]++);var Ut=0;for(Bt=0;Bt<_t;++Bt)if(Ut=De[Bt],Ut!=0){Kt=le[Ge[Bt]]>>8-Ut;for(var Jt=(1<<7-Ut)-1;Jt>=0;--Jt)Tt[Kt|Jt<<Ut]=Ut&7|Bt<<3}var jr=[];for(Ue=1;jr.length<Re+Me;)switch(Kt=Tt[ye(ke,$e)],$e+=Kt&7,Kt>>>=3){case 16:for(xe=3+Ee(ke,$e),$e+=2,Kt=jr[jr.length-1];xe-- >0;)jr.push(Kt);break;case 17:for(xe=3+Be(ke,$e),$e+=3;xe-- >0;)jr.push(0);break;case 18:for(xe=11+ye(ke,$e),$e+=7;xe-- >0;)jr.push(0);break;default:jr.push(Kt),Ue<Kt&&(Ue=Kt);break}var on=jr.slice(0,Re),ln=jr.slice(Re);for(Bt=Re;Bt<286;++Bt)on[Bt]=0;for(Bt=Me;Bt<30;++Bt)ln[Bt]=0;return Ie=Ve(on,We,286),ft=Ve(ln,He,30),$e}function et(ke,$e){if(ke[0]==3&&!(ke[1]&3))return[Sp($e),2];for(var Re=0,Me=0,we=XG($e||1<<18),xe=0,De=we.length>>>0,Ge=0,Ue=0;(Me&1)==0;){if(Me=Be(ke,Re),Re+=3,Me>>>1)Me>>1==1?(Ge=9,Ue=5):(Re=vt(ke,Re),Ge=Ie,Ue=ft);else{Re&7&&(Re+=8-(Re&7));var Ze=ke[Re>>>3]|ke[(Re>>>3)+1]<<8;if(Re+=32,Ze>0)for(!$e&&De<xe+Ze&&(we=ge(we,xe+Ze),De=we.length);Ze-- >0;)we[xe++]=ke[Re>>>3],Re+=8;continue}for(;;){!$e&&De<xe+32767&&(we=ge(we,xe+32767),De=we.length);var rt=Ae(ke,Re,Ge),_t=Me>>>1==1?Xe[rt]:We[rt];if(Re+=_t&15,_t>>>=4,(_t>>>8&255)===0)we[xe++]=_t;else{if(_t==256)break;_t-=257;var Bt=_t<8?0:_t-4>>2;Bt>5&&(Bt=0);var Kt=xe+ce[_t];Bt>0&&(Kt+=Ae(ke,Re,Bt),Re+=Bt),rt=Ae(ke,Re,Ue),_t=Me>>>1==1?Ke[rt]:He[rt],Re+=_t&15,_t>>>=4;var Ut=_t<4?0:_t-2>>1,Jt=oe[_t];for(Ut>0&&(Jt+=Ae(ke,Re,Ut),Re+=Ut),!$e&&De<Kt&&(we=ge(we,Kt+100),De=we.length);xe<Kt;)we[xe]=we[xe-Jt],++xe}}}return $e?[we,Re+7>>>3]:[we.slice(0,xe),Re+7>>>3]}function Ct(ke,$e){var Re=ke.slice(ke.l||0),Me=et(Re,$e);return ke.l+=Me[1],Me[0]}function St(ke,$e){if(ke)typeof console<"u"&&console.error($e);else throw new Error($e)}function ot(ke,$e){var Re=ke;zo(Re,0);var Me=[],we=[],xe={FileIndex:Me,FullPaths:we};T(xe,{root:$e.root});for(var De=Re.length-4;(Re[De]!=80||Re[De+1]!=75||Re[De+2]!=5||Re[De+3]!=6)&&De>=0;)--De;Re.l=De+4,Re.l+=4;var Ge=Re.read_shift(2);Re.l+=6;var Ue=Re.read_shift(4);for(Re.l=Ue,De=0;De<Ge;++De){Re.l+=20;var Ze=Re.read_shift(4),rt=Re.read_shift(4),_t=Re.read_shift(2),Bt=Re.read_shift(2),Kt=Re.read_shift(2);Re.l+=8;var Ut=Re.read_shift(4),Jt=l(Re.slice(Re.l+_t,Re.l+_t+Bt));Re.l+=_t+Bt+Kt;var jr=Re.l;Re.l=Ut+4,nr(Re,Ze,rt,xe,Jt),Re.l=jr}return xe}function nr(ke,$e,Re,Me,we){ke.l+=2;var xe=ke.read_shift(2),De=ke.read_shift(2),Ge=o(ke);if(xe&8257)throw new Error("Unsupported ZIP encryption");for(var Ue=ke.read_shift(4),Ze=ke.read_shift(4),rt=ke.read_shift(4),_t=ke.read_shift(2),Bt=ke.read_shift(2),Kt="",Ut=0;Ut<_t;++Ut)Kt+=String.fromCharCode(ke[ke.l++]);if(Bt){var Jt=l(ke.slice(ke.l,ke.l+Bt));(Jt[21589]||{}).mt&&(Ge=Jt[21589].mt),((we||{})[21589]||{}).mt&&(Ge=we[21589].mt)}ke.l+=Bt;var jr=ke.slice(ke.l,ke.l+Ze);switch(De){case 8:jr=O(ke,rt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+De)}var on=!1;xe&8&&(Ue=ke.read_shift(4),Ue==134695760&&(Ue=ke.read_shift(4),on=!0),Ze=ke.read_shift(4),rt=ke.read_shift(4)),Ze!=$e&&St(on,"Bad compressed size: "+$e+" != "+Ze),rt!=Re&&St(on,"Bad uncompressed size: "+Re+" != "+rt),$r(Me,Kt,jr,{unsafe:!0,mt:Ge})}function fr(ke,$e){var Re=$e||{},Me=[],we=[],xe=Pt(1),De=Re.compression?8:0,Ge=0,Ue=0,Ze=0,rt=0,_t=0,Bt=ke.FullPaths[0],Kt=Bt,Ut=ke.FileIndex[0],Jt=[],jr=0;for(Ue=1;Ue<ke.FullPaths.length;++Ue)if(Kt=ke.FullPaths[Ue].slice(Bt.length),Ut=ke.FileIndex[Ue],!(!Ut.size||!Ut.content||Kt=="Sh33tJ5")){var on=rt,ln=Pt(Kt.length);for(Ze=0;Ze<Kt.length;++Ze)ln.write_shift(1,Kt.charCodeAt(Ze)&127);ln=ln.slice(0,ln.l),Jt[_t]=bBe.buf(Ut.content,0);var hn=Ut.content;De==8&&(hn=K(hn)),xe=Pt(30),xe.write_shift(4,67324752),xe.write_shift(2,20),xe.write_shift(2,Ge),xe.write_shift(2,De),Ut.mt?s(xe,Ut.mt):xe.write_shift(4,0),xe.write_shift(-4,Jt[_t]),xe.write_shift(4,hn.length),xe.write_shift(4,Ut.content.length),xe.write_shift(2,ln.length),xe.write_shift(2,0),rt+=xe.length,Me.push(xe),rt+=ln.length,Me.push(ln),rt+=hn.length,Me.push(hn),xe=Pt(46),xe.write_shift(4,33639248),xe.write_shift(2,0),xe.write_shift(2,20),xe.write_shift(2,Ge),xe.write_shift(2,De),xe.write_shift(4,0),xe.write_shift(-4,Jt[_t]),xe.write_shift(4,hn.length),xe.write_shift(4,Ut.content.length),xe.write_shift(2,ln.length),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(4,0),xe.write_shift(4,on),jr+=xe.l,we.push(xe),jr+=ln.length,we.push(ln),++_t}return xe=Pt(22),xe.write_shift(4,101010256),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(2,_t),xe.write_shift(2,_t),xe.write_shift(4,jr),xe.write_shift(4,rt),xe.write_shift(2,0),bo([bo(Me),bo(we),xe])}var Zt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ft(ke,$e){if(ke.ctype)return ke.ctype;var Re=ke.name||"",Me=Re.match(/\.([^\.]+)$/);return Me&&Zt[Me[1]]||$e&&(Me=(Re=$e).match(/[\.\\]([^\.\\])+$/),Me&&Zt[Me[1]])?Zt[Me[1]]:"application/octet-stream"}function dr(ke){for(var $e=GN(ke),Re=[],Me=0;Me<$e.length;Me+=76)Re.push($e.slice(Me,Me+76));return Re.join(`\r
`)+`\r
`}function Sr(ke){var $e=ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ze){var rt=Ze.charCodeAt(0).toString(16).toUpperCase();return"="+(rt.length==1?"0"+rt:rt)});$e=$e.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),$e.charAt(0)==`
`&&($e="=0D"+$e.slice(1)),$e=$e.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Re=[],Me=$e.split(`\r
`),we=0;we<Me.length;++we){var xe=Me[we];if(xe.length==0){Re.push("");continue}for(var De=0;De<xe.length;){var Ge=76,Ue=xe.slice(De,De+Ge);Ue.charAt(Ge-1)=="="?Ge--:Ue.charAt(Ge-2)=="="?Ge-=2:Ue.charAt(Ge-3)=="="&&(Ge-=3),Ue=xe.slice(De,De+Ge),De+=Ge,De<xe.length&&(Ue+="="),Re.push(Ue)}}return Re.join(`\r
`)}function _r(ke){for(var $e=[],Re=0;Re<ke.length;++Re){for(var Me=ke[Re];Re<=ke.length&&Me.charAt(Me.length-1)=="=";)Me=Me.slice(0,Me.length-1)+ke[++Re];$e.push(Me)}for(var we=0;we<$e.length;++we)$e[we]=$e[we].replace(/[=][0-9A-Fa-f]{2}/g,function(xe){return String.fromCharCode(parseInt(xe.slice(1),16))});return Nu($e.join(`\r
`))}function Vn(ke,$e,Re){for(var Me="",we="",xe="",De,Ge=0;Ge<10;++Ge){var Ue=$e[Ge];if(!Ue||Ue.match(/^\s*$/))break;var Ze=Ue.match(/^(.*?):\s*([^\s].*)$/);if(Ze)switch(Ze[1].toLowerCase()){case"content-location":Me=Ze[2].trim();break;case"content-type":xe=Ze[2].trim();break;case"content-transfer-encoding":we=Ze[2].trim();break}}switch(++Ge,we.toLowerCase()){case"base64":De=Nu(Du($e.slice(Ge).join("")));break;case"quoted-printable":De=_r($e.slice(Ge));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+we)}var rt=$r(ke,Me.slice(Re.length),De,{unsafe:!0});xe&&(rt.ctype=xe)}function qa(ke,$e){if(Z(ke.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Re=$e&&$e.root||"",Me=(En&&Buffer.isBuffer(ke)?ke.toString("binary"):Z(ke)).split(`\r
`),we=0,xe="";for(we=0;we<Me.length;++we)if(xe=Me[we],!!/^Content-Location:/i.test(xe)&&(xe=xe.slice(xe.indexOf("file")),Re||(Re=xe.slice(0,xe.lastIndexOf("/")+1)),xe.slice(0,Re.length)!=Re))for(;Re.length>0&&(Re=Re.slice(0,Re.length-1),Re=Re.slice(0,Re.lastIndexOf("/")+1),xe.slice(0,Re.length)!=Re););var De=(Me[1]||"").match(/boundary="(.*?)"/);if(!De)throw new Error("MAD cannot find boundary");var Ge="--"+(De[1]||""),Ue=[],Ze=[],rt={FileIndex:Ue,FullPaths:Ze};T(rt);var _t,Bt=0;for(we=0;we<Me.length;++we){var Kt=Me[we];Kt!==Ge&&Kt!==Ge+"--"||(Bt++&&Vn(rt,Me.slice(_t,we),Re),_t=we)}return rt}function ar(ke,$e){var Re=$e||{},Me=Re.boundary||"SheetJS";Me="------="+Me;for(var we=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Me.slice(2)+'"',"","",""],xe=ke.FullPaths[0],De=xe,Ge=ke.FileIndex[0],Ue=1;Ue<ke.FullPaths.length;++Ue)if(De=ke.FullPaths[Ue].slice(xe.length),Ge=ke.FileIndex[Ue],!(!Ge.size||!Ge.content||De=="Sh33tJ5")){De=De.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(jr){return"_x"+jr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(jr){return"_u"+jr.charCodeAt(0).toString(16)+"_"});for(var Ze=Ge.content,rt=En&&Buffer.isBuffer(Ze)?Ze.toString("binary"):Z(Ze),_t=0,Bt=Math.min(1024,rt.length),Kt=0,Ut=0;Ut<=Bt;++Ut)(Kt=rt.charCodeAt(Ut))>=32&&Kt<128&&++_t;var Jt=_t>=Bt*4/5;we.push(Me),we.push("Content-Location: "+(Re.root||"file:///C:/SheetJS/")+De),we.push("Content-Transfer-Encoding: "+(Jt?"quoted-printable":"base64")),we.push("Content-Type: "+Ft(Ge,De)),we.push(""),we.push(Jt?Sr(rt):dr(rt))}return we.push(Me+`--\r
`),we.join(`\r
`)}function fn(ke){var $e={};return T($e,ke),$e}function $r(ke,$e,Re,Me){var we=Me&&Me.unsafe;we||T(ke);var xe=!we&&Fr.find(ke,$e);if(!xe){var De=ke.FullPaths[0];$e.slice(0,De.length)==De?De=$e:(De.slice(-1)!="/"&&(De+="/"),De=(De+$e).replace("//","/")),xe={name:a($e),type:2},ke.FileIndex.push(xe),ke.FullPaths.push(De),we||Fr.utils.cfb_gc(ke)}return xe.content=Re,xe.size=Re?Re.length:0,Me&&(Me.CLSID&&(xe.clsid=Me.CLSID),Me.mt&&(xe.mt=Me.mt),Me.ct&&(xe.ct=Me.ct)),xe}function mn(ke,$e){T(ke);var Re=Fr.find(ke,$e);if(Re){for(var Me=0;Me<ke.FileIndex.length;++Me)if(ke.FileIndex[Me]==Re)return ke.FileIndex.splice(Me,1),ke.FullPaths.splice(Me,1),!0}return!1}function In(ke,$e,Re){T(ke);var Me=Fr.find(ke,$e);if(Me){for(var we=0;we<ke.FileIndex.length;++we)if(ke.FileIndex[we]==Me)return ke.FileIndex[we].name=a(Re),ke.FullPaths[we]=Re,!0}return!1}function $n(ke){B(ke,!0)}return t.find=P,t.read=I,t.parse=d,t.write=V,t.writeFile=W,t.utils={cfb_new:fn,cfb_add:$r,cfb_del:mn,cfb_mov:In,cfb_gc:$n,ReadShift:J2,CheckField:ole,prep_blob:zo,bconcat:bo,use_zlib:R,_deflateRaw:mt,_inflateRaw:Ct,consts:z},t}();function yBe(e){return typeof e=="string"?w3(e):Array.isArray(e)?qTe(e):e}function ZC(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=w3(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Oh(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([yBe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Gp(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function wBe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Zs(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function aq(e,t){for(var r=[],n=Zs(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function C3(e){for(var t=[],r=Zs(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function E3(e){for(var t=[],r=Zs(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function NBe(e){for(var t=[],r=Zs(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var W5=new Date(1899,11,30,0,0,0);function Ji(e,t){var r=e.getTime(),n=W5.getTime()+(e.getTimezoneOffset()-W5.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var Uoe=new Date,CBe=W5.getTime()+(Uoe.getTimezoneOffset()-W5.getTimezoneOffset())*6e4,sq=Uoe.getTimezoneOffset();function j3(e){var t=new Date;return t.setTime(e*24*60*60*1e3+CBe),t.getTimezoneOffset()!==sq&&t.setTime(t.getTime()+(t.getTimezoneOffset()-sq)*6e4),t}function EBe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var iq=new Date("2017-02-19T19:06:09.000Z"),Hoe=isNaN(iq.getFullYear())?new Date("2/19/17"):iq,jBe=Hoe.getFullYear()==2017;function ss(e,t){var r=new Date(e);if(jBe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Hoe.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Rx(e,t){if(En&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Oh(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Oh(Soe(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Oh(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Oh(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function is(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=is(e[r]));return t}function qs(e,t){for(var r="";r.length<t;)r+=e;return r}function jf(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var kBe=["january","february","march","april","may","june","july","august","september","october","november","december"];function M1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&kBe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var SBe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function Qoe(e){return e?e.content&&e.type?Rx(e.content,!0):e.data?w2(e.data):e.asNodeBuffer&&En?w2(e.asNodeBuffer().toString("binary")):e.asBinary?w2(e.asBinary()):e._data&&e._data.getContent?w2(Rx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Voe(e){if(!e)return null;if(e.data)return KG(e.data);if(e.asNodeBuffer&&En)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?KG(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function _Be(e){return e&&e.name.slice(-4)===".bin"?Voe(e):Qoe(e)}function pd(e,t){for(var r=e.FullPaths||Zs(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function a7(e,t){var r=pd(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Di(e,t,r){if(!r)return _Be(a7(e,t));if(!t)return null;try{return Di(e,t)}catch{return null}}function Cu(e,t,r){if(!r)return Qoe(a7(e,t));if(!t)return null;try{return Cu(e,t)}catch{return null}}function TBe(e,t,r){return Voe(a7(e,t))}function oq(e){for(var t=e.FullPaths||Zs(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function xn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return En?n=UA(r):n=KTe(r),Fr.utils.cfb_add(e,t,n)}Fr.utils.cfb_add(e,t,r)}else e.file(t,r)}function s7(){return Fr.utils.cfb_new()}function $oe(e,t){switch(t.type){case"base64":return Fr.read(e,{type:"base64"});case"binary":return Fr.read(e,{type:"binary"});case"buffer":case"array":return Fr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function C2(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var wi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,BBe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,lq=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,IBe=/<[^>]*>/g,Ql=wi.match(lq)?lq:IBe,DBe=/<\w*:/,OBe=/<(\/?)\w+:/;function tn(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var o=e.match(BBe),l=0,c="",u=0,d="",f="",A=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(A=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+A,f.length-A),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var m=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[m]&&d.slice(l-3,l)=="ext")continue;n[m]=c,n[m.toLowerCase()]=c}}return n}function n0(e){return e.replace(OBe,"<$1")}var zoe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},i7=C3(zoe),Jn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(l,c){return zoe[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),o7=/[&<>'"]/g,PBe=/[\u0000-\u0008\u000b-\u001f]/g;function Ba(e){var t=e+"";return t.replace(o7,function(r){return i7[r]}).replace(PBe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function cq(e){return Ba(e).replace(/ /g,"_x0020_")}var Goe=/[\u0000-\u001f]/g;function l7(e){var t=e+"";return t.replace(o7,function(r){return i7[r]}).replace(/\n/g,"<br/>").replace(Goe,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function FBe(e){var t=e+"";return t.replace(o7,function(r){return i7[r]}).replace(Goe,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var uq=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function RBe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function ns(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function t6(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function dq(e){var t=Sp(2*e.length),r,n,a=1,s=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function fq(e){return UA(e,"binary").toString("utf8")}var ak="foo bar baz",Ma=En&&(fq(ak)==t6(ak)&&fq||dq(ak)==t6(ak)&&dq)||t6,Oh=En?function(e){return UA(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},KN=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),qoe=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),LBe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),MBe=/<\/?(?:vt:)?variant>/g,UBe=/<(?:vt:)([^>]*)>([\s\S]*)</;function hq(e,t){var r=tn(e),n=e.match(LBe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(MBe,"").match(UBe);o&&a.push({v:Ma(o[2]),t:o[1]})}),a}var Koe=/(^\s|\s$|\n)/;function Go(e,t){return"<"+e+(t.match(Koe)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function WN(e){return Zs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function rr(e,t,r){return"<"+e+(r!=null?WN(r):"")+(t!=null?(t.match(Koe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function BF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function HBe(e,t){switch(typeof e){case"string":var r=rr("vt:lpwstr",Ba(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return rr((e|0)==e?"vt:i4":"vt:r8",Ba(String(e)));case"boolean":return rr("vt:bool",e?"true":"false")}if(e instanceof Date)return rr("vt:filetime",BF(e));throw new Error("Unable to serialize "+e)}function c7(e){if(En&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ma(Gp(t7(e)));throw new Error("Bad input format: expected Buffer or string")}var XN=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ki={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},sv=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],xu={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function QBe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function VBe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,o=n?-t:t;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var Aq=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},mq=En?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:UA(t)})):Aq(e)}:Aq,pq=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(J0(e,a)));return n.join("").replace(sc,"")},u7=En?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(sc,""):pq(e,t,r)}:pq,gq=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},Woe=En?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):gq(e,t,r)}:gq,xq=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(kb(e,a)));return n.join("")},eE=En?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):xq(t,r,n)}:xq,Xoe=function(e,t){var r=vu(e,t);return r>0?eE(e,t+4,t+4+r-1):""},Yoe=Xoe,Joe=function(e,t){var r=vu(e,t);return r>0?eE(e,t+4,t+4+r-1):""},Zoe=Joe,ele=function(e,t){var r=2*vu(e,t);return r>0?eE(e,t+4,t+4+r-1):""},tle=ele,rle=function(t,r){var n=vu(t,r);return n>0?u7(t,r+4,r+4+n):""},nle=rle,ale=function(e,t){var r=vu(e,t);return r>0?eE(e,t+4,t+4+r):""},sle=ale,ile=function(e,t){return QBe(e,t)},X5=ile,d7=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};En&&(Yoe=function(t,r){if(!Buffer.isBuffer(t))return Xoe(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Zoe=function(t,r){if(!Buffer.isBuffer(t))return Joe(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},tle=function(t,r){if(!Buffer.isBuffer(t))return ele(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},nle=function(t,r){if(!Buffer.isBuffer(t))return rle(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},sle=function(t,r){if(!Buffer.isBuffer(t))return ale(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},X5=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):ile(t,r)},d7=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var kb=function(e,t){return e[t]},J0=function(e,t){return e[t+1]*256+e[t]},$Be=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},vu=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},$g=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},zBe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function J2(e,t){var r="",n,a,s=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,En&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(J0(this,u)),u+=2;e*=2;break;case"utf8":r=eE(this,this.l,this.l+e);break;case"utf16le":e*=2,r=u7(this,this.l,this.l+e);break;case"wstr":return J2.call(this,e,"dbcs");case"lpstr-ansi":r=Yoe(this,this.l),e=4+vu(this,this.l);break;case"lpstr-cp":r=Zoe(this,this.l),e=4+vu(this,this.l);break;case"lpwstr":r=tle(this,this.l),e=4+2*vu(this,this.l);break;case"lpp4":e=4+vu(this,this.l),r=nle(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+vu(this,this.l),r=sle(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=kb(this,this.l+e++))!==0;)s.push(nk(o));r=s.join("");break;case"_wstr":for(e=0,r="";(o=J0(this,this.l+e))!==0;)s.push(nk(o)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=kb(this,u),this.l=u+1,l=J2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(nk(J0(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=kb(this,u),this.l=u+1,l=J2.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(nk(kb(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=kb(this,this.l),this.l++,n;case 2:return n=(t==="i"?$Be:J0)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?$g:zBe)(this,this.l),this.l+=4,n):(a=vu(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=X5(this,this.l):a=X5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=Woe(this,this.l,e);break}}return this.l+=e,r}var GBe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},qBe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},KBe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function WBe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)KBe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,GBe(this,t,this.l);break;case 8:if(n=8,r==="f"){VBe(this,t,this.l);break}case 16:break;case-4:n=4,qBe(this,t,this.l);break}return this.l+=n,this}function ole(e,t){var r=Woe(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function zo(e,t){e.l=t,e.read_shift=J2,e.chk=ole,e.write_shift=WBe}function Ul(e,t){e.l+=t}function Pt(e){var t=Sp(e);return zo(t,0),t}function HA(e,t,r){if(e){var n,a,s;zo(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=rC[l]||rC[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function Hc(){var e=[],t=En?256:2048,r=function(u){var d=Pt(u);return zo(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},o=function(){return a(),bo(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:l,end:o,_bufs:e}}function Wt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=rC[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=e.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&d7(r)&&e.push(r)}}function Z2(e,t,r){var n=is(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function vq(e,t,r){var n=is(e);return n.s=Z2(n.s,t.s,r),n.e=Z2(n.e,t.s,r),n}function eN(e,t){if(e.cRel&&e.c<0)for(e=is(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=is(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Yr(e);return!e.cRel&&e.cRel!=null&&(r=JBe(r)),!e.rRel&&e.rRel!=null&&(r=XBe(r)),r}function r6(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ts(e.s.c)+":"+(e.e.cRel?"":"$")+Ts(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+vi(e.s.r)+":"+(e.e.rRel?"":"$")+vi(e.e.r):eN(e.s,t.biff)+":"+eN(e.e,t.biff)}function f7(e){return parseInt(YBe(e),10)-1}function vi(e){return""+(e+1)}function XBe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function YBe(e){return e.replace(/\$(\d+)$/,"$1")}function h7(e){for(var t=ZBe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ts(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function JBe(e){return e.replace(/^([A-Z])/,"$$$1")}function ZBe(e){return e.replace(/^\$([A-Z])/,"$1")}function eIe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Bs(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Yr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Vc(e){var t=e.indexOf(":");return t==-1?{s:Bs(e),e:Bs(e)}:{s:Bs(e.slice(0,t)),e:Bs(e.slice(t+1))}}function An(e,t){return typeof t>"u"||typeof t=="number"?An(e.s,e.e):(typeof e!="string"&&(e=Yr(e)),typeof t!="string"&&(t=Yr(t)),e==t?e:e+":"+t)}function ea(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function bq(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Td(e.z,r?Ji(t):t)}catch{}try{return e.w=Td((e.XF||{}).numFmtId||(r?14:0),r?Ji(t):t)}catch{return""+t}}function NA(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?QA[e.v]||e.v:t==null?bq(e,e.v):bq(e,t))}function qp(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function lle(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Bs(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=ea(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=t[f].length;++A)if(!(typeof t[f][A]>"u")){var m={v:t[f][A]},g=o+f,x=l+A;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][A]&&typeof t[f][A]=="object"&&!Array.isArray(t[f][A])&&!(t[f][A]instanceof Date))m=t[f][A];else if(Array.isArray(m.v)&&(m.f=t[f][A][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Kr[14],n.cellDates?(m.t="d",m.w=Td(m.z,Ji(m.v))):(m.t="n",m.v=Ji(m.v),m.w=Td(m.z,m.v))):m.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(m.z=s[g][x].z),s[g][x]=m;else{var v=Yr({c:x,r:g});s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return u.s.c<1e7&&(s["!ref"]=An(u)),s}function ky(e,t){return lle(null,e,t)}function tIe(e){return e.read_shift(4,"i")}function kf(e,t){return t||(t=Pt(4)),t.write_shift(4,e),t}function Rl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function yo(e,t){var r=!1;return t==null&&(r=!0,t=Pt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function rIe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function nIe(e,t){return t||(t=Pt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function A7(e,t){var r=e.l,n=e.read_shift(1),a=Rl(e),s=[],o={t:a,h:a};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(rIe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function aIe(e,t){var r=!1;return t==null&&(r=!0,t=Pt(15+4*e.t.length)),t.write_shift(1,0),yo(e.t,t),r?t.slice(0,t.l):t}var sIe=A7;function iIe(e,t){var r=!1;return t==null&&(r=!0,t=Pt(23+4*e.t.length)),t.write_shift(1,1),yo(e.t,t),t.write_shift(4,1),nIe({},t),r?t.slice(0,t.l):t}function Dd(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function iv(e,t){return t==null&&(t=Pt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function ov(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function lv(e,t){return t==null&&(t=Pt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var oIe=Rl,cle=yo;function m7(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Y5(e,t){var r=!1;return t==null&&(r=!0,t=Pt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var lIe=Rl,IF=m7,p7=Y5;function g7(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?X5([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):$g(t,0)>>2;return r?a/100:a}function ule(e,t){t==null&&(t=Pt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function dle(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function cIe(e,t){return t||(t=Pt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var cv=dle,Sy=cIe;function Tl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Lx(e,t){return(t||Pt(8)).write_shift(8,e,"f")}function uIe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Ax[a];u&&(t.rgb=JN(u));break;case 2:t.rgb=JN([o,l,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function J5(e,t){if(t||(t=Pt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function dIe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function fIe(e,t){t||(t=Pt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function fle(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function hIe(e){return fle(e,1)}function AIe(e){return fle(e,2)}var x7=2,Cc=3,sk=11,yq=12,Z5=19,ik=64,mIe=65,pIe=71,gIe=4108,xIe=4126,po=80,hle=81,vIe=[po,hle],DF={1:{n:"CodePage",t:x7},2:{n:"Category",t:po},3:{n:"PresentationFormat",t:po},4:{n:"ByteCount",t:Cc},5:{n:"LineCount",t:Cc},6:{n:"ParagraphCount",t:Cc},7:{n:"SlideCount",t:Cc},8:{n:"NoteCount",t:Cc},9:{n:"HiddenCount",t:Cc},10:{n:"MultimediaClipCount",t:Cc},11:{n:"ScaleCrop",t:sk},12:{n:"HeadingPairs",t:gIe},13:{n:"TitlesOfParts",t:xIe},14:{n:"Manager",t:po},15:{n:"Company",t:po},16:{n:"LinksUpToDate",t:sk},17:{n:"CharacterCount",t:Cc},19:{n:"SharedDoc",t:sk},22:{n:"HyperlinksChanged",t:sk},23:{n:"AppVersion",t:Cc,p:"version"},24:{n:"DigSig",t:mIe},26:{n:"ContentType",t:po},27:{n:"ContentStatus",t:po},28:{n:"Language",t:po},29:{n:"Version",t:po},255:{},2147483648:{n:"Locale",t:Z5},2147483651:{n:"Behavior",t:Z5},1919054434:{}},OF={1:{n:"CodePage",t:x7},2:{n:"Title",t:po},3:{n:"Subject",t:po},4:{n:"Author",t:po},5:{n:"Keywords",t:po},6:{n:"Comments",t:po},7:{n:"Template",t:po},8:{n:"LastAuthor",t:po},9:{n:"RevNumber",t:po},10:{n:"EditTime",t:ik},11:{n:"LastPrinted",t:ik},12:{n:"CreatedDate",t:ik},13:{n:"ModifiedDate",t:ik},14:{n:"PageCount",t:Cc},15:{n:"WordCount",t:Cc},16:{n:"CharCount",t:Cc},17:{n:"Thumbnail",t:pIe},18:{n:"Application",t:po},19:{n:"DocSecurity",t:Cc},255:{},2147483648:{n:"Locale",t:Z5},2147483651:{n:"Behavior",t:Z5},1919054434:{}},wq={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},bIe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function yIe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var wIe=yIe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ax=is(wIe),QA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Ale={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},PF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},ok={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function v7(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function NIe(e){var t=v7();if(!e||!e.match)return t;var r={};if((e.match(Ql)||[]).forEach(function(n){var a=tn(n);switch(a[0].replace(DBe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[PF[a.ContentType]]!==void 0&&t[PF[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Ki.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function mle(e,t){var r=NBe(PF),n=[],a;n[n.length]=wi,n[n.length]=rr("Types",null,{xmlns:Ki.CT,"xmlns:xsd":Ki.xsd,"xmlns:xsi":Ki.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return rr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=rr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:ok[c][t.bookType]||ok[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=rr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:ok[c][t.bookType]||ok[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=rr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Bn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function YN(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function tN(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Ql)||[]).forEach(function(a){var s=tn(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:C2(s.Target,t);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function c1(e){var t=[wi,rr("Relationships",null,{xmlns:Ki.RELS})];return Zs(e["!id"]).forEach(function(r){t[t.length]=rr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ka(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Bn.HLINK,Bn.XPATH,Bn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var CIe="application/vnd.oasis.opendocument.spreadsheet";function EIe(e,t){for(var r=c7(e),n,a;n=XN.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=tn(n[0],!1),a.path=="/"&&a.type!==CIe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function jIe(e){var t=[wi];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function Nq(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function kIe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function SIe(e){var t=[wi];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(Nq(e[r][0],e[r][1])),t.push(kIe("",e[r][0]));return t.push(Nq("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function ple(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+z5.version+"</meta:generator></office:meta></office:document-meta>"}var _d=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],_Ie=function(){for(var e=new Array(_d.length),t=0;t<_d.length;++t){var r=_d[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function gle(e){var t={};e=Ma(e);for(var r=0;r<_d.length;++r){var n=_d[r],a=e.match(_Ie[r]);a!=null&&a.length>0&&(t[n[1]]=Jn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=ss(t[n[1]]))}return t}function n6(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Ba(t),n[n.length]=r?rr(e,t,r):Go(e,t))}function xle(e,t){var r=t||{},n=[wi,rr("cp:coreProperties",null,{"xmlns:cp":Ki.CORE_PROPS,"xmlns:dc":Ki.dc,"xmlns:dcterms":Ki.dcterms,"xmlns:dcmitype":Ki.dcmitype,"xmlns:xsi":Ki.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&n6("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:BF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&n6("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:BF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=_d.length;++s){var o=_d[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&n6(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var mx=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],vle=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function ble(e,t,r,n){var a=[];if(typeof e=="string")a=hq(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?hq(t,n).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function TIe(e,t,r){var n={};return t||(t={}),e=Ma(e),mx.forEach(function(a){var s=(e.match(KN(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Jn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&ble(n.HeadingPairs,n.TitlesOfParts,t,r),t}function yle(e){var t=[],r=rr;return e||(e={}),e.Application="SheetJS",t[t.length]=wi,t[t.length]=rr("Properties",null,{xmlns:Ki.EXT_PROPS,"xmlns:vt":Ki.vt}),mx.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Ba(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Ba(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var BIe=/<[^>]+>[^<]*/g;function IIe(e,t){var r={},n="",a=e.match(BIe);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=tn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Jn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Jn(d);break;case"bool":r[n]=ns(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=ss(d);break;case"cy":case"error":r[n]=Jn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function wle(e){var t=[wi,rr("Properties",null,{xmlns:Ki.CUST_PROPS,"xmlns:vt":Ki.vt})];if(!e)return t.join("");var r=1;return Zs(e).forEach(function(a){++r,t[t.length]=rr("property",HBe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ba(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var FF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},a6;function DIe(e,t,r){a6||(a6=C3(FF)),t=a6[t]||t,e[t]=r}function OIe(e,t){var r=[];return Zs(FF).map(function(n){for(var a=0;a<_d.length;++a)if(_d[a][1]==n)return _d[a];for(a=0;a<mx.length;++a)if(mx[a][1]==n)return mx[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Go(FF[n[1]]||n[1],a))}}),rr("DocumentProperties",r.join(""),{xmlns:xu.o})}function PIe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Zs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var o=0;o<_d.length;++o)if(s==_d[o][1])return;for(o=0;o<mx.length;++o)if(s==mx[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=e[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(rr(cq(s),l,{"dt:dt":c}))}}),t&&Zs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(rr(cq(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+xu.o+'">'+a.join("")+"</"+n+">"}function b7(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function FIe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=Pt(8);return o.write_shift(4,n),o.write_shift(4,a),o}function Nle(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function Cle(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Ele(e,t,r){return t===31?Cle(e):Nle(e,t,r)}function RF(e,t,r){return Ele(e,t,r===!1?0:4)}function RIe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Ele(e,t,0)}function LIe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(sc,""),e.l-a&2&&(e.l+=2)}return r}function MIe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(sc,"");return r}function UIe(e){var t=e.l,r=e_(e,hle);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=e_(e,Cc);return[r,n]}function HIe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(UIe(e));return r}function Cq(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),o=e.read_shift(4);n[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(sc,"").replace(N2,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function jle(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function QIe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function e_(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==yq&&n!==t&&vIe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===yq?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Nle(e,n,4).replace(sc,"");case 31:return Cle(e);case 64:return b7(e);case 65:return jle(e);case 71:return QIe(e);case 80:return RF(e,n,!s.raw).replace(sc,"");case 81:return RIe(e,n).replace(sc,"");case 4108:return HIe(e);case 4126:case 4127:return n==4127?LIe(e):MIe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function Eq(e,t){var r=Pt(4),n=Pt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Pt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=FIe(t);break;case 31:case 80:for(n=Pt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return bo([r,n])}function jq(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+r]}s.sort(function(N,C){return N[1]-C[1]});var A={};for(o=0;o!=a;++o){if(e.l!==s[o][1]){var m=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(m=!1,e.l=s[o][1]),m)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[s[o][0]];if(A[g.n]=e_(e,g.t,{raw:!0}),g.p==="version"&&(A[g.n]=String(A[g.n]>>16)+"."+("0000"+String(A[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(A[g.n]){case 0:A[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:vf(l=A[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+A[g.n])}}else if(s[o][0]===1){if(l=A.CodePage=e_(e,x7),vf(l),c!==-1){var x=e.l;e.l=s[c][1],u=Cq(e,l),e.l=x}}else if(s[o][0]===0){if(l===0){c=o,e.l=s[o+1][1];continue}u=Cq(e,l)}else{var v=u[s[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=jle(e);break;case 30:e.l+=4,y=RF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=RF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=ci(e,4);break;case 64:e.l+=4,y=ss(b7(e));break;default:throw new Error("unparsed value: "+e[e.l])}A[v]=y}}return e.l=r+n,A}var kle=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function VIe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function kq(e,t,r){var n=Pt(8),a=[],s=[],o=8,l=0,c=Pt(8),u=Pt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!t){u=Pt(8),u.write_shift(4,0),a.unshift(u);var d=[Pt(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Pt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=bo(d),s.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(kle.indexOf(e[l][0])>-1||vle.indexOf(e[l][0])>-1)&&e[l][1]!=null){var A=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof A=="string"){var x=A.split(".");A=(+x[0]<<16)+(+x[1]||0)}c=Eq(g.t,A)}else{var v=VIe(A);v==-1&&(v=31,A=String(A)),c=Eq(v,A)}s.push(c),u=Pt(8),u.write_shift(4,t?m:2+l),a.push(u),o+=8+c.length}var y=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,y),y+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),bo([n].concat(a).concat(s))}function Sq(e,t,r){var n=e.content;if(!n)return{};zo(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Fr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=jq(n,t),A={SystemIdentifier:u};for(var m in f)A[m]=f[m];if(A.FMTID=s,a===1)return A;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=jq(n,null)}catch{}for(m in g)A[m]=g[m];return A.FMTID=[s,o],A}function _q(e,t,r,n,a,s){var o=Pt(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Fr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var c=kq(e,r,n);if(l.push(c),a){var u=kq(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return bo(l)}function km(e,t){return e.read_shift(t),null}function $Ie(e,t){t||(t=Pt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function zIe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function ci(e,t){return e.read_shift(t)===1}function Zl(e,t){return t||(t=Pt(2)),t.write_shift(2,+!!e),t}function Oi(e){return e.read_shift(2,"u")}function xd(e,t){return t||(t=Pt(2)),t.write_shift(2,e),t}function Sle(e,t){return zIe(e,t,Oi)}function GIe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function _le(e,t,r){return r||(r=Pt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function tE(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function qIe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*o),n&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function KIe(e){var t=e.t||"",r=Pt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Pt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return bo(a)}function Mx(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function rE(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Mx(e,n,r)}function uv(e,t,r){if(r.biff>5)return rE(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Tle(e,t,r){return r||(r=Pt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function WIe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function XIe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(sc,"");return n&&(e.l+=24),a}function YIe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(sc,"");return r+o}function JIe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return XIe(e);case"0303000000000000c000000000000046":return YIe(e);default:throw new Error("Unsupported Moniker "+r)}}function lk(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(sc,""):"";return r}function Tq(e,t){t||(t=Pt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function ZIe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=lk(e,r-e.l)),a&128&&(o=lk(e,r-e.l)),(a&257)===257&&(l=lk(e,r-e.l)),(a&257)===1&&(c=JIe(e,r-e.l)),a&8&&(u=lk(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=b7(e)),e.l=r;var A=o||l||c||"";A&&u&&(A+="#"+u),A||(A="#"+u),a&2&&A.charAt(0)=="/"&&A.charAt(1)!="/"&&(A="file://"+A);var m={Target:A};return d&&(m.guid=d),f&&(m.time=f),s&&(m.Tooltip=s),m}function e6e(e){var t=Pt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(s==28)n=n.slice(1),Tq(n,t);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),s&8&&Tq(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Ble(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function Ile(e,t){var r=Ble(e);return r[3]=0,r}function a0(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Ux(e,t,r,n){return n||(n=Pt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function t6e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function r6e(e,t,r){return t===0?"":uv(e,t,r)}function n6e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,s,o]}function Dle(e){var t=e.read_shift(2),r=g7(e);return[t,r]}function a6e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=tE(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function k3(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function Ole(e,t){return t||(t=Pt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Ple(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var s6e=Ple;function Fle(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function i6e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function o6e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function fl(e){e.l+=2,e.l+=e.read_shift(2)}var l6e={0:fl,4:fl,5:fl,6:fl,7:o6e,8:fl,9:fl,10:fl,11:fl,12:fl,13:i6e,14:fl,15:fl,16:fl,17:fl,18:fl,19:fl,20:fl,21:Fle};function c6e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(l6e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function ck(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function y7(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Pt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function u6e(e,t){return t===0||e.read_shift(2),1200}function d6e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=uv(e,0,r);return e.read_shift(t+n-e.l),a}function f6e(e,t){var r=!t||t.biff==8,n=Pt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function h6e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function A6e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=tE(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function m6e(e,t){var r=!t||t.biff>=8?2:1,n=Pt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function p6e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0;o!=a&&e.l<r;++o)s.push(qIe(e));return s.Count=n,s.Unique=a,s}function g6e(e,t){var r=Pt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=KIe(e[a]);var s=bo([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function x6e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function v6e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function b6e(e){var t=t6e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function y6e(e){return e.read_shift(2),e.read_shift(4)}function Bq(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function w6e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function N6e(){var e=Pt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function C6e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function E6e(e){var t=Pt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function j6e(){}function k6e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=tE(e,0,r),n}function S6e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Pt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function _6e(e){var t=a0(e);return t.isst=e.read_shift(4),t}function T6e(e,t,r,n){var a=Pt(10);return Ux(e,t,n,a),a.write_shift(4,r),a}function B6e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=a0(e);r.biff==2&&e.l++;var s=rE(e,n-e.l,r);return a.val=s,a}function I6e(e,t,r,n,a){var s=!a||a.biff==8,o=Pt(8+ +s+(1+s)*r.length);return Ux(e,t,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function D6e(e,t,r){var n=e.read_shift(2),a=uv(e,0,r);return[n,a]}function O6e(e,t,r,n){var a=r&&r.biff==5;n||(n=Pt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var P6e=uv;function Iq(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:l},e:{r:o,c}}}function F6e(e,t){var r=t.biff==8||!t.biff?4:2,n=Pt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function R6e(e){var t=e.read_shift(2),r=e.read_shift(2),n=Dle(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function L6e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(Dle(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function M6e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function U6e(e,t,r,n){var a={},s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=bIe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function H6e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=U6e(e,t,n.fStyle,r),n}function Dq(e,t,r,n){var a=r&&r.biff==5;n||(n=Pt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Q6e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function V6e(e){var t=Pt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function Oq(e,t,r){var n=a0(e);(r.biff==2||t==9)&&++e.l;var a=GIe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function $6e(e,t,r,n,a,s){var o=Pt(8);return Ux(e,t,n,o),_le(r,s,o),o}function z6e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=a0(e),a=Tl(e);return n.val=a,n}function G6e(e,t,r,n){var a=Pt(14);return Ux(e,t,n,a),Lx(r,a),a}var Pq=r6e;function q6e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=Mx(e,s),l=[];n>e.l;)l.push(rE(e));return[s,a,o,l]}function Fq(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=a6e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var K6e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Rq(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Mx(e,o,r);a&32&&(u=K6e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||l===0||!(d>0)?[]:cRe(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function Rle(e,t,r){if(r.biff<8)return W6e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(n6e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function W6e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=tE(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function X6e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=Mx(e,n,r),o=Mx(e,a,r);return[s,o]}function Y6e(e,t,r){var n=Ple(e);e.l++;var a=e.read_shift(1);return t-=8,[uRe(e,t,r),a,n]}function Lq(e,t,r){var n=s6e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,oRe(e,t,r)]}function J6e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Z6e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=uv(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,o,s]}}function eDe(e,t,r){return Z6e(e,t,r)}function tDe(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(k3(e));return r}function rDe(e){var t=Pt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Ole(e[r],t);return t}function nDe(e,t,r){if(r&&r.biff<8)return sDe(e,t,r);var n=Fle(e),a=c6e(e,t-22,n[1]);return{cmo:n,ft:a}}var aDe={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function sDe(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((aDe[n]||Ul)(e,t,r)),{cmo:[a,n,s],ft:o}}function iDe(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=WIe(e,6,r);var l=e.read_shift(2);e.read_shift(2),Oi(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Mx(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function oDe(e,t){var r=k3(e);e.l+=16;var n=ZIe(e,t-24);return[r,n]}function lDe(e){var t=Pt(24),r=Bs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return bo([t,e6e(e[1])])}function cDe(e,t){e.read_shift(2);var r=k3(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(sc,""),[r,n]}function uDe(e){var t=e[1].Tooltip,r=Pt(10+2*(t.length+1));r.write_shift(2,2048);var n=Bs(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function dDe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=wq[r]||r,r=e.read_shift(2),t[1]=wq[r]||r,t}function fDe(e){return e||(e=Pt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function hDe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Ile(e));return r}function ADe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Ile(e));return r}function mDe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Lle(e,t,r){if(!r.cellStyles)return Ul(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function pDe(e,t){var r=Pt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function gDe(e,t){var r={};return t<32||(e.l+=16,r.header=Tl(e),r.footer=Tl(e),e.l+=2),r}function xDe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function vDe(e){for(var t=Pt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var bDe=a0,yDe=Sle,wDe=rE;function NDe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function CDe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=a0(e);++e.l;var a=uv(e,t-7,r);return n.t="str",n.val=a,n}function EDe(e){var t=a0(e);++e.l;var r=Tl(e);return t.t="n",t.val=r,t}function jDe(e,t,r){var n=Pt(15);return iE(n,e,t),n.write_shift(8,r,"f"),n}function kDe(e){var t=a0(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function SDe(e,t,r){var n=Pt(9);return iE(n,e,t),n.write_shift(2,r),n}function _De(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function TDe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function BDe(e,t,r){var n=e.l+t,a=a0(e),s=e.read_shift(2),o=Mx(e,s,r);return e.l=n,a.t="str",a.val=o,a}var IDe=[2,3,48,49,131,139,140,245],LF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=C3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Sp(1);switch(c.type){case"base64":d=Nu(Du(l));break;case"binary":d=Nu(l);break;case"buffer":case"array":d=l;break}zo(d,0);var f=d.read_shift(1),A=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,A=!0;break;case 49:m=!0,A=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=d.read_shift(2));var y=d.read_shift(2),N=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(N=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var C=[],_={},j=Math.min(d.length,f==2?521:v-10-(m?264:0)),I=g?32:11;d.l<j&&d[d.l]!=13;)switch(_={},_.name=zN.utils.decode(N,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,_.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(_.offset=d.read_shift(4)),_.len=d.read_shift(1),f==2&&(_.offset=d.read_shift(2)),_.dec=d.read_shift(1),_.name.length&&C.push(_),f!=2&&(d.l+=g?13:14),_.type){case"B":(!m||_.len!=8)&&c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+_.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var T=0,k=0;for(u[0]=[],k=0;k!=C.length;++k)u[0][k]=C[k].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++T]=[],k=0,k=0;k!=C.length;++k){var B=d.slice(d.l,d.l+C[k].len);d.l+=C[k].len,zo(B,0);var M=zN.utils.decode(N,B);switch(C[k].type){case"C":M.trim().length&&(u[T][k]=M.replace(/\s+$/,""));break;case"D":M.length===8?u[T][k]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):u[T][k]=M;break;case"F":u[T][k]=parseFloat(M.trim());break;case"+":case"I":u[T][k]=g?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":u[T][k]=!0;break;case"N":case"F":u[T][k]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!A)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[T][k]="##MEMO##"+(g?parseInt(M.trim(),10):B.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(u[T][k]=+M||0);break;case"@":u[T][k]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[T][k]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[T][k]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[T][k]=-B.read_shift(-8,"f");break;case"B":if(m&&C[k].len==8){u[T][k]=B.read_shift(8,"f");break}case"G":case"P":B.l+=C[k].len;break;case"0":if(C[k].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[k].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=C,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=ky(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return qp(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&vf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Hc(),f=n_(l,{header:1,raw:!0,cellDates:!0}),A=f[0],m=f.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,N=1;for(x=0;x<A.length;++x){if(((g[x]||{}).DBF||{}).name){A[x]=g[x].DBF.name,++y;continue}if(A[x]!=null){if(++y,typeof A[x]=="number"&&(A[x]=A[x].toString(10)),typeof A[x]!="string")throw new Error("DBF Invalid column name "+A[x]+" |"+typeof A[x]+"|");if(A.indexOf(A[x])!==x){for(v=0;v<1024;++v)if(A.indexOf(A[x]+"_"+v)==-1){A[x]+="_"+v;break}}}}var C=ea(l["!ref"]),_=[],j=[],I=[];for(x=0;x<=C.e.c-C.s.c;++x){var T="",k="",B=0,M=[];for(v=0;v<m.length;++v)m[v][x]!=null&&M.push(m[v][x]);if(M.length==0||A[x]==null){_[x]="?";continue}for(v=0;v<M.length;++v){switch(typeof M[v]){case"number":k="B";break;case"string":k="C";break;case"boolean":k="L";break;case"object":k=M[v]instanceof Date?"D":"C";break;default:k="C"}B=Math.max(B,String(M[v]).length),T=T&&T!=k?"C":k}B>250&&(B=250),k=((g[x]||{}).DBF||{}).type,k=="C"&&g[x].DBF.len>B&&(B=g[x].DBF.len),T=="B"&&k=="N"&&(T="N",I[x]=g[x].DBF.dec,B=g[x].DBF.len),j[x]=T=="C"||k=="N"?B:s[T]||0,N+=j[x],_[x]=T}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,m.length),P.write_shift(2,296+32*y),P.write_shift(2,N),x=0;x<4;++x)P.write_shift(4,0);for(P.write_shift(4,0|(+t[koe]||3)<<8),x=0,v=0;x<A.length;++x)if(A[x]!=null){var S=d.next(32),L=(A[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,L,"sbcs"),S.write_shift(1,_[x]=="?"?"C":_[x],"sbcs"),S.write_shift(4,v),S.write_shift(1,j[x]||s[_[x]]||0),S.write_shift(1,I[x]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),v+=j[x]||s[_[x]]||0}var U=d.next(264);for(U.write_shift(4,13),x=0;x<65;++x)U.write_shift(4,0);for(x=0;x<m.length;++x){var q=d.next(N);for(q.write_shift(1,0),v=0;v<A.length;++v)if(A[v]!=null)switch(_[v]){case"L":q.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":q.write_shift(8,m[x][v]||0,"f");break;case"N":var H="0";for(typeof m[x][v]=="number"&&(H=m[x][v].toFixed(I[v]||0)),y=0;y<j[v]-H.length;++y)q.write_shift(1,32);q.write_shift(1,H,"sbcs");break;case"D":m[x][v]?(q.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),q.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),q.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):q.write_shift(8,"00000000","sbcs");break;case"C":var z=String(m[x][v]!=null?m[x][v]:"").slice(0,j[v]);for(q.write_shift(1,z,"sbcs"),y=0;y<j[v]-z.length;++y)q.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),Mle=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Zs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(A,m){var g=e[m];return typeof g=="number"?WG(g):g},n=function(A,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?A:WG(x)};e["|"]=254;function a(A,m){switch(m.type){case"base64":return s(Du(A),m);case"binary":return s(A,m);case"buffer":return s(En&&Buffer.isBuffer(A)?A.toString("binary"):Gp(A),m);case"array":return s(Rx(A),m)}throw new Error("Unrecognized type "+m.type)}function s(A,m){var g=A.split(/[\n\r]+/),x=-1,v=-1,y=0,N=0,C=[],_=[],j=null,I={},T=[],k=[],B=[],M=0,P;for(+m.codepage>=0&&vf(+m.codepage);y!==g.length;++y){M=0;var S=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),L=S.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),U=L[0],q;if(S.length>0)switch(U){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&_.push(S.slice(3).replace(/;;/g,";"));break;case"C":var H=!1,z=!1,W=!1,Z=!1,V=-1,Y=-1;for(N=1;N<L.length;++N)switch(L[N].charAt(0)){case"A":break;case"X":v=parseInt(L[N].slice(1))-1,z=!0;break;case"Y":for(x=parseInt(L[N].slice(1))-1,z||(v=0),P=C.length;P<=x;++P)C[P]=[];break;case"K":q=L[N].slice(1),q.charAt(0)==='"'?q=q.slice(1,q.length-1):q==="TRUE"?q=!0:q==="FALSE"?q=!1:isNaN(jf(q))?isNaN(M1(q).getDate())||(q=ss(q)):(q=jf(q),j!==null&&Ey(j)&&(q=j3(q))),H=!0;break;case"E":Z=!0;var R=u1(L[N].slice(1),{r:x,c:v});C[x][v]=[C[x][v],R];break;case"S":W=!0,C[x][v]=[C[x][v],"S5S"];break;case"G":break;case"R":V=parseInt(L[N].slice(1))-1;break;case"C":Y=parseInt(L[N].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}if(H&&(C[x][v]&&C[x][v].length==2?C[x][v][0]=q:C[x][v]=q,j=null),W){if(Z)throw new Error("SYLK shared formula cannot have own formula");var O=V>-1&&C[V][Y];if(!O||!O[1])throw new Error("SYLK shared formula cannot find base");C[x][v][1]=nce(O[1],{r:x-V,c:v-Y})}break;case"F":var K=0;for(N=1;N<L.length;++N)switch(L[N].charAt(0)){case"X":v=parseInt(L[N].slice(1))-1,++K;break;case"Y":for(x=parseInt(L[N].slice(1))-1,P=C.length;P<=x;++P)C[P]=[];break;case"M":M=parseInt(L[N].slice(1))/20;break;case"F":break;case"G":break;case"P":j=_[parseInt(L[N].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=L[N].slice(1).split(" "),P=parseInt(B[0],10);P<=parseInt(B[1],10);++P)M=parseInt(B[2],10),k[P-1]=M===0?{hidden:!0}:{wch:M},_p(k[P-1]);break;case"C":v=parseInt(L[N].slice(1))-1,k[v]||(k[v]={});break;case"R":x=parseInt(L[N].slice(1))-1,T[x]||(T[x]={}),M>0?(T[x].hpt=M,T[x].hpx=H1(M)):M===0&&(T[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}K<1&&(j=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+S)}}return T.length>0&&(I["!rows"]=T),k.length>0&&(I["!cols"]=k),m&&m.sheetRows&&(C=C.slice(0,m.sheetRows)),[C,I]}function o(A,m){var g=a(A,m),x=g[0],v=g[1],y=ky(x,m);return Zs(v).forEach(function(N){y[N]=v[N]}),y}function l(A,m){return qp(o(A,m),m)}function c(A,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(A.t){case"n":v+=A.v||0,A.f&&!A.F&&(v+=";E"+k7(A.f,{r:g,c:x}));break;case"b":v+=A.v?"TRUE":"FALSE";break;case"e":v+=A.w||A.v;break;case"d":v+='"'+(A.w||A.v)+'"';break;case"s":v+='"'+A.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(A,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=ZN(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=eC(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&A.push(v)})}function d(A,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*tC(g.hpx)+";"),v.length>2&&A.push(v+"R"+(x+1))})}function f(A,m){var g=["ID;PWXL;N;E"],x=[],v=ea(A["!ref"]),y,N=Array.isArray(A),C=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),A["!cols"]&&u(g,A["!cols"]),A["!rows"]&&d(g,A["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var _=v.s.r;_<=v.e.r;++_)for(var j=v.s.c;j<=v.e.c;++j){var I=Yr({r:_,c:j});y=N?(A[_]||[])[j]:A[I],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,A,_,j))}return g.join(C)+C+x.join(C)+C+"E"+C}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),Ule=function(){function e(s,o){switch(o.type){case"base64":return t(Du(s),o);case"binary":return t(s,o);case"buffer":return t(En&&Buffer.isBuffer(s)?s.toString("binary"):Gp(s),o);case"array":return t(Rx(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var A=l[d].trim().split(","),m=A[0],g=A[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(jf(g))?isNaN(M1(g).getDate())?f[c][u]=g:f[c][u]=ss(g):f[c][u]=jf(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return ky(e(s,o),o)}function n(s,o){return qp(r(s,o),o)}var a=function(){var s=function(c,u,d,f,A){c.push(u),c.push(d+","+f),c.push('"'+A.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=ea(c["!ref"]),f,A=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Yr({r:m,c:g});if(f=A?(c[m]||[])[g]:c[x],!f){o(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Td(f.z||Kr[14],Ji(ss(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var y=`\r
`,N=u.join(y);return N}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Hle=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,A){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var N=m[v].trim().split(":");if(N[0]==="cell"){var C=Bs(N[1]);if(y.length<=C.r)for(g=y.length;g<=C.r;++g)y[g]||(y[g]=[]);switch(g=C.r,x=C.c,N[2]){case"t":y[g][x]=e(N[3]);break;case"v":y[g][x]=+N[3];break;case"vtf":var _=N[N.length-1];case"vtc":switch(N[3]){case"nl":y[g][x]=!!+N[4];break;default:y[g][x]=+N[4];break}N[2]=="vtf"&&(y[g][x]=[y[g][x],_])}}}return A&&A.sheetRows&&(y=y.slice(0,A.sheetRows)),y}function n(f,A){return ky(r(f,A),A)}function a(f,A){return qp(n(f,A),A)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var A=[],m=[],g,x="",v=Vc(f["!ref"]),y=Array.isArray(f),N=v.s.r;N<=v.e.r;++N)for(var C=v.s.c;C<=v.e.c;++C)if(x=Yr({r:N,c:C}),g=y?(f[N]||[])[C]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var _=Ji(ss(g.v));m[2]="vtc",m[3]="nd",m[4]=""+_,m[5]=g.w||Td(g.z||Kr[14],_);break;case"e":continue}A.push(m.join(":"))}return A.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),A.push("valueformat:1:text-wiki"),A.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),U1=function(){function e(d,f,A,m,g){g.raw?f[A][m]=d:d===""||(d==="TRUE"?f[A][m]=!0:d==="FALSE"?f[A][m]=!1:isNaN(jf(d))?isNaN(M1(d).getDate())?f[A][m]=d:f[A][m]=ss(d):f[A][m]=jf(d))}function t(d,f){var A=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,N=0;N<=x;++N)y=g[N].indexOf(" "),y==-1?y=g[N].length:y++,v=Math.max(v,y);for(N=0;N<=x;++N){m[N]=[];var C=0;for(e(g[N].slice(0,v).trim(),m,N,C,A),C=1;C<=(g[N].length-v)/10+1;++C)e(g[N].slice(v+(C-1)*10,v+C*10).trim(),m,N,C,A)}return A.sheetRows&&(m=m.slice(0,A.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},A=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?A=!A:!A&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||n[x[1]]-n[v[1]]}),r[g.pop()[1]]||44}function s(d,f){var A=f||{},m="",g=A.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):A&&A.FS?m=A.FS:m=a(d.slice(0,1024));var v=0,y=0,N=0,C=0,_=0,j=m.charCodeAt(0),I=!1,T=0,k=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=A.dateNF!=null?xBe(A.dateNF):null;function M(){var P=d.slice(C,_),S={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)S.t="z";else if(A.raw)S.t="s",S.v=P;else if(P.trim().length===0)S.t="s",S.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(S.t="s",S.v=P.slice(2,-1).replace(/""/g,'"')):qPe(P)?(S.t="n",S.f=P.slice(1)):(S.t="s",S.v=P);else if(P=="TRUE")S.t="b",S.v=!0;else if(P=="FALSE")S.t="b",S.v=!1;else if(!isNaN(N=jf(P)))S.t="n",A.cellText!==!1&&(S.w=P),S.v=N;else if(!isNaN(M1(P).getDate())||B&&P.match(B)){S.z=A.dateNF||Kr[14];var L=0;B&&P.match(B)&&(P=vBe(P,A.dateNF,P.match(B)||[]),L=1),A.cellDates?(S.t="d",S.v=ss(P,L)):(S.t="n",S.v=Ji(ss(P,L))),A.cellText!==!1&&(S.w=Td(S.z,S.v instanceof Date?Ji(S.v):S.v)),A.cellNF||delete S.z}else S.t="s",S.v=P;if(S.t=="z"||(A.dense?(g[v]||(g[v]=[]),g[v][y]=S):g[Yr({c:y,r:v})]=S),C=_+1,k=d.charCodeAt(C),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),T==j)++y;else if(y=0,++v,A.sheetRows&&A.sheetRows<=v)return!0}e:for(;_<d.length;++_)switch(T=d.charCodeAt(_)){case 34:k===34&&(I=!I);break;case j:case 10:case 13:if(!I&&M())break e;break}return _-C>0&&M(),g["!ref"]=An(x),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):ky(t(d,f),f)}function l(d,f){var A="",m=f.type=="string"?[0,0,0,0]:P7(d,f);switch(f.type){case"base64":A=Du(d);break;case"binary":A=d;break;case"buffer":f.codepage==65001?A=d.toString("utf8"):f.codepage&&typeof zN<"u"||(A=En&&Buffer.isBuffer(d)?d.toString("binary"):Gp(d));break;case"array":A=Rx(d);break;case"string":A=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?A=Ma(A.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?A=Ma(A):f.type=="binary"&&typeof zN<"u",A.slice(0,19)=="socialcalc:version:"?Hle.to_sheet(f.type=="string"?A:Ma(A),f):o(A,f)}function c(d,f){return qp(l(d,f),f)}function u(d){for(var f=[],A=ea(d["!ref"]),m,g=Array.isArray(d),x=A.s.r;x<=A.e.r;++x){for(var v=[],y=A.s.c;y<=A.e.c;++y){var N=Yr({r:x,c:y});if(m=g?(d[x]||[])[y]:d[N],!m||m.v==null){v.push("          ");continue}for(var C=(m.w||(NA(m),m.w)||"").slice(0,10);C.length<10;)C+=" ";v.push(C+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function DDe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=Mle.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return U1.to_workbook(e,t)}}var px=function(){function e(R,O,K){if(R){zo(R,R.l||0);for(var J=K.Enum||V;R.l<R.length;){var ce=R.read_shift(2),oe=J[ce]||J[65535],re=R.read_shift(2),ue=R.l+re,le=oe.f&&oe.f(R,re,K);if(R.l=ue,O(le,oe,ce))return}}}function t(R,O){switch(O.type){case"base64":return r(Nu(Du(R)),O);case"binary":return r(Nu(R),O);case"buffer":case"array":return r(R,O)}throw"Unsupported type "+O.type}function r(R,O){if(!R)return R;var K=O||{},J=K.dense?[]:{},ce="Sheet1",oe="",re=0,ue={},le=[],ve=[],X={s:{r:0,c:0},e:{r:0,c:0}},Ee=K.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)K.Enum=V,e(R,function(ye,Ae,se){switch(se){case 0:K.vers=ye,ye>=4096&&(K.qpro=!0);break;case 6:X=ye;break;case 204:ye&&(oe=ye);break;case 222:oe=ye;break;case 15:case 51:K.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:se==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=K.dateNF||Kr[14],K.cellDates&&(ye[1].t="d",ye[1].v=j3(ye[1].v))),K.qpro&&ye[3]>re&&(J["!ref"]=An(X),ue[ce]=J,le.push(ce),J=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},re=ye[3],ce=oe||"Sheet"+(re+1),oe="");var ne=K.dense?(J[ye[0].r]||[])[ye[0].c]:J[Yr(ye[0])];if(ne){ne.t=ye[1].t,ne.v=ye[1].v,ye[1].z!=null&&(ne.z=ye[1].z),ye[1].f!=null&&(ne.f=ye[1].f);break}K.dense?(J[ye[0].r]||(J[ye[0].r]=[]),J[ye[0].r][ye[0].c]=ye[1]):J[Yr(ye[0])]=ye[1];break}},K);else if(R[2]==26||R[2]==14)K.Enum=Y,R[2]==14&&(K.qpro=!0,R.l=0),e(R,function(ye,Ae,se){switch(se){case 204:ce=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>re&&(J["!ref"]=An(X),ue[ce]=J,le.push(ce),J=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},re=ye[3],ce="Sheet"+(re+1)),Ee>0&&ye[0].r>=Ee)break;K.dense?(J[ye[0].r]||(J[ye[0].r]=[]),J[ye[0].r][ye[0].c]=ye[1]):J[Yr(ye[0])]=ye[1],X.e.c<ye[0].c&&(X.e.c=ye[0].c),X.e.r<ye[0].r&&(X.e.r=ye[0].r);break;case 27:ye[14e3]&&(ve[ye[14e3][0]]=ye[14e3][1]);break;case 1537:ve[ye[0]]=ye[1],ye[0]==re&&(ce=ye[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(J["!ref"]=An(X),ue[oe||ce]=J,le.push(oe||ce),!ve.length)return{SheetNames:le,Sheets:ue};for(var Be={},je=[],fe=0;fe<ve.length;++fe)ue[le[fe]]?(je.push(ve[fe]||le[fe]),Be[ve[fe]]=ue[ve[fe]]||ue[le[fe]]):(je.push(ve[fe]),Be[ve[fe]]={"!ref":"A1"});return{SheetNames:je,Sheets:Be}}function n(R,O){var K=O||{};if(+K.codepage>=0&&vf(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var J=Hc(),ce=ea(R["!ref"]),oe=Array.isArray(R),re=[];sr(J,0,s(1030)),sr(J,6,c(ce));for(var ue=Math.min(ce.e.r,8191),le=ce.s.r;le<=ue;++le)for(var ve=vi(le),X=ce.s.c;X<=ce.e.c;++X){le===ce.s.r&&(re[X]=Ts(X));var Ee=re[X]+ve,Be=oe?(R[le]||[])[X]:R[Ee];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?sr(J,13,m(le,X,Be.v)):sr(J,14,x(le,X,Be.v));else{var je=NA(Be);sr(J,15,f(le,X,je.slice(0,239)))}}return sr(J,1),J.end()}function a(R,O){var K=O||{};if(+K.codepage>=0&&vf(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var J=Hc();sr(J,0,o(R));for(var ce=0,oe=0;ce<R.SheetNames.length;++ce)(R.Sheets[R.SheetNames[ce]]||{})["!ref"]&&sr(J,27,Z(R.SheetNames[ce],oe++));var re=0;for(ce=0;ce<R.SheetNames.length;++ce){var ue=R.Sheets[R.SheetNames[ce]];if(!(!ue||!ue["!ref"])){for(var le=ea(ue["!ref"]),ve=Array.isArray(ue),X=[],Ee=Math.min(le.e.r,8191),Be=le.s.r;Be<=Ee;++Be)for(var je=vi(Be),fe=le.s.c;fe<=le.e.c;++fe){Be===le.s.r&&(X[fe]=Ts(fe));var ye=X[fe]+je,Ae=ve?(ue[Be]||[])[fe]:ue[ye];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")sr(J,23,M(Be,fe,re,Ae.v));else{var se=NA(Ae);sr(J,22,T(Be,fe,re,se.slice(0,239)))}}++re}}return sr(J,1),J.end()}function s(R){var O=Pt(2);return O.write_shift(2,R),O}function o(R){var O=Pt(26);O.write_shift(2,4096),O.write_shift(2,4),O.write_shift(4,0);for(var K=0,J=0,ce=0,oe=0;oe<R.SheetNames.length;++oe){var re=R.SheetNames[oe],ue=R.Sheets[re];if(!(!ue||!ue["!ref"])){++ce;var le=Vc(ue["!ref"]);K<le.e.r&&(K=le.e.r),J<le.e.c&&(J=le.e.c)}}return K>8191&&(K=8191),O.write_shift(2,K),O.write_shift(1,ce),O.write_shift(1,J),O.write_shift(2,0),O.write_shift(2,0),O.write_shift(1,1),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(4,0),O}function l(R,O,K){var J={s:{c:0,r:0},e:{c:0,r:0}};return O==8&&K.qpro?(J.s.c=R.read_shift(1),R.l++,J.s.r=R.read_shift(2),J.e.c=R.read_shift(1),R.l++,J.e.r=R.read_shift(2),J):(J.s.c=R.read_shift(2),J.s.r=R.read_shift(2),O==12&&K.qpro&&(R.l+=2),J.e.c=R.read_shift(2),J.e.r=R.read_shift(2),O==12&&K.qpro&&(R.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function c(R){var O=Pt(8);return O.write_shift(2,R.s.c),O.write_shift(2,R.s.r),O.write_shift(2,R.e.c),O.write_shift(2,R.e.r),O}function u(R,O,K){var J=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(J[0].c=R.read_shift(1),J[3]=R.read_shift(1),J[0].r=R.read_shift(2),R.l+=2):(J[2]=R.read_shift(1),J[0].c=R.read_shift(2),J[0].r=R.read_shift(2)),J}function d(R,O,K){var J=R.l+O,ce=u(R,O,K);if(ce[1].t="s",K.vers==20768){R.l++;var oe=R.read_shift(1);return ce[1].v=R.read_shift(oe,"utf8"),ce}return K.qpro&&R.l++,ce[1].v=R.read_shift(J-R.l,"cstr"),ce}function f(R,O,K){var J=Pt(7+K.length);J.write_shift(1,255),J.write_shift(2,O),J.write_shift(2,R),J.write_shift(1,39);for(var ce=0;ce<J.length;++ce){var oe=K.charCodeAt(ce);J.write_shift(1,oe>=128?95:oe)}return J.write_shift(1,0),J}function A(R,O,K){var J=u(R,O,K);return J[1].v=R.read_shift(2,"i"),J}function m(R,O,K){var J=Pt(7);return J.write_shift(1,255),J.write_shift(2,O),J.write_shift(2,R),J.write_shift(2,K,"i"),J}function g(R,O,K){var J=u(R,O,K);return J[1].v=R.read_shift(8,"f"),J}function x(R,O,K){var J=Pt(13);return J.write_shift(1,255),J.write_shift(2,O),J.write_shift(2,R),J.write_shift(8,K,"f"),J}function v(R,O,K){var J=R.l+O,ce=u(R,O,K);if(ce[1].v=R.read_shift(8,"f"),K.qpro)R.l=J;else{var oe=R.read_shift(2);_(R.slice(R.l,R.l+oe),ce),R.l+=oe}return ce}function y(R,O,K){var J=O&32768;return O&=-32769,O=(J?R:0)+(O>=8192?O-16384:O),(J?"":"$")+(K?Ts(O):vi(O))}var N={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _(R,O){zo(R,0);for(var K=[],J=0,ce="",oe="",re="",ue="";R.l<R.length;){var le=R[R.l++];switch(le){case 0:K.push(R.read_shift(8,"f"));break;case 1:oe=y(O[0].c,R.read_shift(2),!0),ce=y(O[0].r,R.read_shift(2),!1),K.push(oe+ce);break;case 2:{var ve=y(O[0].c,R.read_shift(2),!0),X=y(O[0].r,R.read_shift(2),!1);oe=y(O[0].c,R.read_shift(2),!0),ce=y(O[0].r,R.read_shift(2),!1),K.push(ve+X+":"+oe+ce)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(R.read_shift(2));break;case 6:{for(var Ee="";le=R[R.l++];)Ee+=String.fromCharCode(le);K.push('"'+Ee.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:ue=K.pop(),re=K.pop(),K.push(["AND","OR"][le-20]+"("+re+","+ue+")");break;default:if(le<32&&C[le])ue=K.pop(),re=K.pop(),K.push(re+C[le]+ue);else if(N[le]){if(J=N[le][1],J==69&&(J=R[R.l++]),J>K.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+K.join("|")+"|");return}var Be=K.slice(-J);K.length-=J,K.push(N[le][0]+"("+Be.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}K.length==1?O[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function j(R){var O=[{c:0,r:0},{t:"n",v:0},0];return O[0].r=R.read_shift(2),O[3]=R[R.l++],O[0].c=R[R.l++],O}function I(R,O){var K=j(R);return K[1].t="s",K[1].v=R.read_shift(O-4,"cstr"),K}function T(R,O,K,J){var ce=Pt(6+J.length);ce.write_shift(2,R),ce.write_shift(1,K),ce.write_shift(1,O),ce.write_shift(1,39);for(var oe=0;oe<J.length;++oe){var re=J.charCodeAt(oe);ce.write_shift(1,re>=128?95:re)}return ce.write_shift(1,0),ce}function k(R,O){var K=j(R);K[1].v=R.read_shift(2);var J=K[1].v>>1;if(K[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return K[1].v=J,K}function B(R,O){var K=j(R),J=R.read_shift(4),ce=R.read_shift(4),oe=R.read_shift(2);if(oe==65535)return J===0&&ce===3221225472?(K[1].t="e",K[1].v=15):J===0&&ce===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var re=oe&32768;return oe=(oe&32767)-16446,K[1].v=(1-re*2)*(ce*Math.pow(2,oe+32)+J*Math.pow(2,oe)),K}function M(R,O,K,J){var ce=Pt(14);if(ce.write_shift(2,R),ce.write_shift(1,K),ce.write_shift(1,O),J==0)return ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(2,65535),ce;var oe=0,re=0,ue=0,le=0;return J<0&&(oe=1,J=-J),re=Math.log2(J)|0,J/=Math.pow(2,re-31),le=J>>>0,(le&2147483648)==0&&(J/=2,++re,le=J>>>0),J-=le,le|=2147483648,le>>>=0,J*=Math.pow(2,32),ue=J>>>0,ce.write_shift(4,ue),ce.write_shift(4,le),re+=16383+(oe?32768:0),ce.write_shift(2,re),ce}function P(R,O){var K=B(R);return R.l+=O-14,K}function S(R,O){var K=j(R),J=R.read_shift(4);return K[1].v=J>>6,K}function L(R,O){var K=j(R),J=R.read_shift(8,"f");return K[1].v=J,K}function U(R,O){var K=L(R);return R.l+=O-10,K}function q(R,O){return R[R.l+O-1]==0?R.read_shift(O,"cstr"):""}function H(R,O){var K=R[R.l++];K>O-1&&(K=O-1);for(var J="";J.length<K;)J+=String.fromCharCode(R[R.l++]);return J}function z(R,O,K){if(!(!K.qpro||O<21)){var J=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var ce=R.read_shift(O-21,"cstr");return[J,ce]}}function W(R,O){for(var K={},J=R.l+O;R.l<J;){var ce=R.read_shift(2);if(ce==14e3){for(K[ce]=[0,""],K[ce][0]=R.read_shift(2);R[R.l];)K[ce][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return K}function Z(R,O){var K=Pt(5+R.length);K.write_shift(2,14e3),K.write_shift(2,O);for(var J=0;J<R.length;++J){var ce=R.charCodeAt(J);K[K.l++]=ce>127?95:ce}return K[K.l++]=0,K}var V={0:{n:"BOF",f:Oi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:A},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:q},222:{n:"SHEETNAMELP",f:H},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:k},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:W},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:U},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:q},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function ODe(e){var t={},r=e.match(Ql),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=tn(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=JM[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var PDe=function(){var e=KN("t"),t=KN("rPr");function r(s){var o=s.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Jn(o[1])},c=s.match(t);return c&&(l.s=ODe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),FDe=function(){var t=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),RDe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,LDe=/<(?:\w+:)?r>/,MDe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function w7(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Jn(Ma(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ma(e),r&&(n.h=l7(n.t))):e.match(LDe)&&(n.r=Ma(e),n.t=Jn(Ma((e.replace(MDe,"").match(RDe)||[]).join("").replace(Ql,""))),r&&(n.h=FDe(PDe(n.r)))),n):{t:""}}var UDe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,HDe=/<(?:\w+:)?(?:si|sstItem)>/g,QDe=/<\/(?:\w+:)?(?:si|sstItem)>/;function VDe(e,t){var r=[],n="";if(!e)return r;var a=e.match(UDe);if(a){n=a[2].replace(HDe,"").split(QDe);for(var s=0;s!=n.length;++s){var o=w7(n[s].trim(),t);o!=null&&(r[r.length]=o)}a=tn(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var $De=/^\s|\s$|[\t\n\r]/;function Qle(e,t){if(!t.bookSST)return"";var r=[wi];r[r.length]=rr("sst",null,{xmlns:sv[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match($De)&&(s+=' xml:space="preserve"'),s+=">"+Ba(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function zDe(e){return[e.read_shift(4),e.read_shift(4)]}function GDe(e,t){var r=[],n=!1;return HA(e,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function qDe(e,t){return t||(t=Pt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var KDe=aIe;function WDe(e){var t=Hc();Wt(t,159,qDe(e));for(var r=0;r<e.length;++r)Wt(t,19,KDe(e[r]));return Wt(t,160),t.end()}function Vle(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function oA(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function XDe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=oA(e,4),t.U=oA(e,4),t.W=oA(e,4),t}function YDe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function JDe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(YDe(e));return t}function ZDe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function eOe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=oA(e,4),t.U=oA(e,4),t.W=oA(e,4),t}function tOe(e){var t=eOe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function $le(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function zle(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function rOe(e){var t=oA(e);switch(t.Minor){case 2:return[t.Minor,nOe(e)];case 3:return[t.Minor,aOe()];case 4:return[t.Minor,sOe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function nOe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=$le(e,r),a=zle(e,e.length-e.l);return{t:"Std",h:n,v:a}}function aOe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function sOe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Ql,function(s){var o=tn(s);switch(n0(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function iOe(e,t){var r={},n=r.EncryptionVersionInfo=oA(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=$le(e,a),t-=a,r.EncryptionVerifier=zle(e,t),r}function oOe(e){var t={},r=t.EncryptionVersionInfo=oA(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function N7(e){var t=0,r,n=Vle(e),a=n.length+1,s,o,l,c,u;for(r=Sp(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var Gle=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=Vle(o),c=s(l),u=l.length,d=Sp(16),f=0;f!=16;++f)d[f]=0;var A,m,g;for((u&1)===1&&(A=c>>8,d[u]=a(e[0],A),--u,A=c&255,m=l[l.length-1],d[u]=a(m,A));u>0;)--u,A=c>>8,d[u]=a(l[u],A),--u,A=c&255,d[u]=a(l[u],A);for(u=15,g=15-l.length;g>0;)A=c>>8,d[u]=a(e[g],A),--u,--g,A=c&255,d[u]=a(l[u],A),--u,--g;return d}}(),lOe=function(e,t,r,n,a){a||(a=t),n||(n=Gle(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},cOe=function(e){var t=0,r=Gle(e);return function(n){var a=lOe("",n,t,r);return t=a[1],a[0]}};function uOe(e,t,r,n){var a={key:Oi(e),verificationBytes:Oi(e)};return r.password&&(a.verifier=N7(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=cOe(r.password)),a}function dOe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=oOe(e):n.Data=iOe(e,t),n}function fOe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?dOe(e,t-2,n):uOe(e,r.biff>=8?t:t-2,r,n),n}var qle=function(){function e(a,s){switch(s.type){case"base64":return t(Du(a),s);case"binary":return t(a,s);case"buffer":return t(En&&Buffer.isBuffer(a)?a.toString("binary"):Gp(a),s);case"array":return t(Rx(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var A=/\\\w+\b/g,m=0,g,x=-1;g=A.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,A.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[f][x]=y:l[Yr({r:f,c:x})]=y}break}m=A.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=An(u),l}function r(a,s){return qp(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=ea(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=Yr({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(NA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function hOe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function JN(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function AOe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),o=a-s;if(o===0)return[0,0,t];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function mOe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function t_(e,t){if(t===0)return e;var r=AOe(hOe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),JN(mOe(r))}var Kle=6,pOe=15,gOe=1,kl=Kle;function ZN(e){return Math.floor((e+Math.round(128/kl)/256)*kl)}function eC(e){return Math.floor((e-5)/kl*100+.5)/100}function r_(e){return Math.round((e*kl+5)/kl*256)/256}function s6(e){return r_(eC(ZN(e)))}function C7(e){var t=Math.abs(e-s6(e)),r=kl;if(t>.005)for(kl=gOe;kl<pOe;++kl)Math.abs(e-s6(e))<=t&&(t=Math.abs(e-s6(e)),r=kl);kl=r}function _p(e){e.width?(e.wpx=ZN(e.width),e.wch=eC(e.wpx),e.MDW=kl):e.wpx?(e.wch=eC(e.wpx),e.width=r_(e.wch),e.MDW=kl):typeof e.wch=="number"&&(e.width=r_(e.wch),e.wpx=ZN(e.width),e.MDW=kl),e.customWidth&&delete e.customWidth}var xOe=96,Wle=xOe;function tC(e){return e*96/Wle}function H1(e){return e*Wle/96}var vOe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function bOe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(Ql)||[]).forEach(function(o){var l=tn(o);switch(n0(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=ns(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=ns(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function yOe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(Ql)||[]).forEach(function(o){var l=tn(o);switch(n0(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function wOe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(Ql)||[]).forEach(function(o){var l=tn(o);switch(n0(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Ma(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?ns(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?ns(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?ns(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?ns(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?ns(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?ns(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?ns(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=JM[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=ns(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Ax[a.color.index];a.color.index==81&&(c=Ax[1]),c||(c=Ax[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=t_(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function NOe(e,t,r){t.NumberFmt=[];for(var n=Zs(Kr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Kr[n[a]];var s=e[0].match(Ql);if(s)for(a=0;a<s.length;++a){var o=tn(s[a]);switch(n0(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Jn(Ma(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}iA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function COe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=rr("numFmt",null,{numFmtId:n,formatCode:Ba(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=rr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var uk=["numFmtId","fillId","fontId","borderId","xfId"],dk=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function EOe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(Ql)||[]).forEach(function(s){var o=tn(s),l=0;switch(n0(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<uk.length;++l)n[uk[l]]&&(n[uk[l]]=parseInt(n[uk[l]],10));for(l=0;l<dk.length;++l)n[dk[l]]&&(n[dk[l]]=ns(n[dk[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=ns(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function jOe(e){var t=[];return t[t.length]=rr("cellXfs",null),e.forEach(function(r){t[t.length]=rr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=rr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var kOe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&NOe(f,d,u),(f=l.match(a))&&wOe(f,d,c,u),(f=l.match(n))&&yOe(f,d,c,u),(f=l.match(s))&&bOe(f,d,c,u),(f=l.match(r))&&EOe(f,d,u),d}}();function Xle(e,t){var r=[wi,rr("styleSheet",null,{xmlns:sv[0],"xmlns:vt":Ki.vt})],n;return e.SSF&&(n=COe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=jOe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function SOe(e,t){var r=e.read_shift(2),n=Rl(e);return[r,n]}function _Oe(e,t,r){r||(r=Pt(6+4*t.length)),r.write_shift(2,e),yo(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function TOe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=dIe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=uIe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Rl(e),n}function BOe(e,t){t||(t=Pt(153)),t.write_shift(2,e.sz*20),fIe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),J5(e.color,t);var n=0;return n=2,t.write_shift(1,n),yo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var IOe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],i6,DOe=Ul;function Mq(e,t){t||(t=Pt(84)),i6||(i6=C3(IOe));var r=i6[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(J5({auto:1},t),J5({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function OOe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Yle(e,t,r){r||(r=Pt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Rw(e,t){return t||(t=Pt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var POe=Ul;function FOe(e,t){return t||(t=Pt(51)),t.write_shift(1,0),Rw(null,t),Rw(null,t),Rw(null,t),Rw(null,t),Rw(null,t),t.length>t.l?t.slice(0,t.l):t}function ROe(e,t){return t||(t=Pt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Y5(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function LOe(e,t,r){var n=Pt(2052);return n.write_shift(4,e),Y5(t,n),Y5(r,n),n.length>n.l?n.slice(0,n.l):n}function MOe(e,t,r){var n={};n.NumberFmt=[];for(var a in Kr)n.NumberFmt[a]=Kr[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return HA(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],iA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=t_(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function UOe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Wt(e,615,kf(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Wt(e,44,_Oe(a,t[a]))}),Wt(e,616))}}function HOe(e){var t=1;Wt(e,611,kf(t)),Wt(e,43,BOe({sz:12,color:{theme:1},name:"Calibri",family:2})),Wt(e,612)}function QOe(e){var t=2;Wt(e,603,kf(t)),Wt(e,45,Mq({patternType:"none"})),Wt(e,45,Mq({patternType:"gray125"})),Wt(e,604)}function VOe(e){var t=1;Wt(e,613,kf(t)),Wt(e,46,FOe()),Wt(e,614)}function $Oe(e){var t=1;Wt(e,626,kf(t)),Wt(e,47,Yle({numFmtId:0},65535)),Wt(e,627)}function zOe(e,t){Wt(e,617,kf(t.length)),t.forEach(function(r){Wt(e,47,Yle(r,0))}),Wt(e,618)}function GOe(e){var t=1;Wt(e,619,kf(t)),Wt(e,48,ROe({xfId:0,name:"Normal"})),Wt(e,620)}function qOe(e){var t=0;Wt(e,505,kf(t)),Wt(e,506)}function KOe(e){var t=0;Wt(e,508,LOe(t,"TableStyleMedium9","PivotStyleMedium4")),Wt(e,509)}function WOe(e,t){var r=Hc();return Wt(r,278),UOe(r,e.SSF),HOe(r),QOe(r),VOe(r),$Oe(r),zOe(r,t.cellXfs),GOe(r),qOe(r),KOe(r),Wt(r,279),r.end()}var XOe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function YOe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Ql)||[]).forEach(function(a){var s=tn(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[XOe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function JOe(){}function ZOe(){}var ePe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,tPe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,rPe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function nPe(e,t,r){t.themeElements={};var n;[["clrScheme",ePe,YOe],["fontScheme",tPe,JOe],["fmtScheme",rPe,ZOe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var aPe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Jle(e,t){(!e||e.length===0)&&(e=E7());var r,n={};if(!(r=e.match(aPe)))throw new Error("themeElements not found in theme");return nPe(r[0],n,t),n.raw=e,n}function E7(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[wi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function sPe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var o;try{o=$oe(s,{type:"array"})}catch{return}var l=Cu(o,"theme/theme/theme1.xml",!0);if(l)return Jle(l,r)}}function iPe(e){return e.read_shift(4)}function oPe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=lPe(e,4);break;case 2:t.xclrValue=Ble(e);break;case 3:t.xclrValue=iPe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function lPe(e,t){return Ul(e,t)}function cPe(e,t){return Ul(e,t)}function uPe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=oPe(e);break;case 6:n[1]=cPe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function dPe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(uPe(e,r-e.l));return{ixfe:n,ext:s}}function fPe(e,t){t.forEach(function(r){r[0]})}function hPe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Rl(e)}}function APe(e){var t=Pt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),yo(e.name,t),t.slice(0,t.l)}function mPe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function pPe(e){var t=Pt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function gPe(e,t){var r=Pt(8+2*t.length);return r.write_shift(4,e),yo(t,r),r.slice(0,r.l)}function xPe(e){return e.l+=4,e.read_shift(4)!=0}function vPe(e,t){var r=Pt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function bPe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return HA(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function yPe(){var e=Hc();return Wt(e,332),Wt(e,334,kf(1)),Wt(e,335,APe({name:"XLDAPR",version:12e4,flags:3496657072})),Wt(e,336),Wt(e,339,gPe(1,"XLDAPR")),Wt(e,52),Wt(e,35,kf(514)),Wt(e,4096,kf(0)),Wt(e,4097,xd(1)),Wt(e,36),Wt(e,53),Wt(e,340),Wt(e,337,vPe(1)),Wt(e,51,pPe([[1,0]])),Wt(e,338),Wt(e,333),e.end()}function wPe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,o;return e.replace(Ql,function(l){var c=tn(l);switch(n0(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Zle(){var e=[wi];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function NPe(e){var t=[];if(!e)return t;var r=1;return(e.match(Ql)||[]).forEach(function(n){var a=tn(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function CPe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Yr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function EPe(e,t,r){var n=[];return HA(e,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function jPe(e,t,r,n){if(!e)return e;var a=n||{},s=!1;HA(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function kPe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Fb=1024;function ece(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[rr("xml",null,{"xmlns:v":xu.v,"xmlns:o":xu.o,"xmlns:x":xu.x,"xmlns:mv":xu.mv}).replace(/\/>/,">"),rr("o:shapelayout",rr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),rr("v:shapetype",[rr("v:stroke",null,{joinstyle:"miter"}),rr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Fb<e*1e3;)Fb+=1e3;return t.forEach(function(s){var o=Bs(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?rr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=rr("v:fill",c,l),d={on:"t",obscured:"t"};++Fb,a=a.concat(["<v:shape"+WN({id:"_x0000_s"+Fb,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,rr("v:shadow",null,d),rr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Go("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Go("x:AutoFill","False"),Go("x:Row",String(o.r)),Go("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function Uq(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(o){var l=Bs(o.ref);if(a?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[o.ref],!s){s={t:"z"},a?e[l.r][l.c]=s:e[o.ref]=s;var c=ea(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=An(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function SPe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=tn(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Bs(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),A=!!f&&!!f[1]&&w7(f[1])||{r:"",t:"",h:""};u.r=A.r,A.r=="<t></t>"&&(A.t=A.h=""),u.t=(A.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=A.h),n.push(u)}}}}),n}function tce(e){var t=[wi,rr("comments",null,{xmlns:sv[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=Ba(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Ba(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(Go("t",Ba(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;t.push(Go("t",Ba(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function _Pe(e,t){var r=[],n=!1,a={},s=0;return e.replace(Ql,function(l,c){var u=tn(l);switch(n0(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function TPe(e,t,r){var n=[wi,rr("ThreadedComments",null,{xmlns:Ki.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(rr("threadedComment",Go("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function BPe(e,t){var r=[],n=!1;return e.replace(Ql,function(s){var o=tn(s);switch(n0(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function IPe(e){var t=[wi,rr("personList",null,{xmlns:Ki.TCMNT,"xmlns:x":sv[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(rr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function DPe(e){var t={};t.iauthor=e.read_shift(4);var r=cv(e);return t.rfx=r.s,t.ref=Yr(r.s),e.l+=16,t}function OPe(e,t){return t==null&&(t=Pt(36)),t.write_shift(4,e[1].iauthor),Sy(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var PPe=Rl;function FPe(e){return yo(e.slice(0,54))}function RPe(e,t){var r=[],n=[],a={},s=!1;return HA(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function LPe(e){var t=Hc(),r=[];return Wt(t,628),Wt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Wt(t,632,FPe(a.a)))})}),Wt(t,631),Wt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Bs(n[0]),e:Bs(n[0])};Wt(t,635,OPe([s,a])),a.t&&a.t.length>0&&Wt(t,637,iIe(a)),Wt(t,636),delete a.iauthor})}),Wt(t,634),Wt(t,629),t.end()}var MPe="application/vnd.ms-office.vbaProject";function UPe(e){var t=Fr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Fr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Fr.write(t)}function HPe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Fr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var rce=["xlsb","xlsm","xlam","biff8","xla"];function QPe(){return{"!type":"dialog"}}function VPe(){return{"!type":"dialog"}}function $Pe(){return{"!type":"macro"}}function zPe(){return{"!type":"macro"}}var u1=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+Ts(d)+(c?"":"$")+vi(u)}return function(a,s){return t=s,a.replace(e,r)}}(),j7=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,k7=function(){return function(t,r){return t.replace(j7,function(n,a,s,o,l,c){var u=h7(o)-(s?0:r.c),d=f7(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",A=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+A})}}();function nce(e,t){return e.replace(j7,function(r,n,a,s,o,l){return n+(a=="$"?a+s:Ts(h7(s)+t.c))+(o=="$"?o+l:vi(f7(l)+t.r))})}function GPe(e,t,r){var n=Vc(t),a=n.s,s=Bs(r),o={r:s.r-a.r,c:s.c-a.c};return nce(e,o)}function qPe(e){return e.length!=1}function Hq(e){return e.replace(/_xlfn\./g,"")}function Ti(e){e.l+=1}function Tp(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function ace(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return sce(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),o=Tp(e),l=Tp(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function sce(e){var t=Tp(e),r=Tp(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function KPe(e,t,r){if(r.biff<8)return sce(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=Tp(e),o=Tp(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function ice(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return WPe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Tp(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function WPe(e){var t=Tp(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function XPe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function YPe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return JPe(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function JPe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function ZPe(e,t,r){var n=(e[e.l++]&96)>>5,a=ace(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function eFe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=ace(e,s,r);return[n,a,o]}function tFe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function rFe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function nFe(e,t,r){var n=(e[e.l++]&96)>>5,a=KPe(e,t-1,r);return[n,a]}function aFe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Qq(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function sFe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function iFe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function oFe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function lFe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function cFe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function oce(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function uFe(e){return e.read_shift(2),oce(e)}function dFe(e){return e.read_shift(2),oce(e)}function fFe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=ice(e,0,r);return[n,a]}function hFe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=YPe(e,0,r);return[n,a]}function AFe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=ice(e,0,r);return[n,a,s]}function mFe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[xRe[a],uce[a],n]}function pFe(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:gFe(e);return[a,(s[0]===0?uce:gRe)[s[1]]]}function gFe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function xFe(e,t,r){e.l+=r&&r.biff==2?3:4}function vFe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function bFe(e){return e.l++,QA[e.read_shift(1)]}function yFe(e){return e.l++,e.read_shift(2)}function wFe(e){return e.l++,e.read_shift(1)!==0}function NFe(e){return e.l++,Tl(e)}function CFe(e,t,r){return e.l++,tE(e,t-1,r)}function EFe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ci(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=QA[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Tl(e);break;case 2:r[1]=uv(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function jFe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?cv:k3)(e));return a}function kFe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=EFe(e,r.biff);return o}function SFe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function _Fe(e,t,r){if(r.biff==5)return TFe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function TFe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function BFe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function IFe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function DFe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function OFe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var PFe=Ul,FFe=Ul,RFe=Ul;function nE(e,t,r){return e.l+=2,[XPe(e)]}function S7(e){return e.l+=6,[]}var LFe=nE,MFe=S7,UFe=S7,HFe=nE;function lce(e){return e.l+=2,[Oi(e),e.read_shift(2)&1]}var QFe=nE,VFe=lce,$Fe=S7,zFe=nE,GFe=nE,qFe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function KFe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),o=qFe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:s}}function WFe(e){return e.l+=2,[e.read_shift(4)]}function XFe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function YFe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function JFe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function ZFe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function eRe(e){return e.l+=4,[0,0]}var Vq={1:{n:"PtgExp",f:vFe},2:{n:"PtgTbl",f:RFe},3:{n:"PtgAdd",f:Ti},4:{n:"PtgSub",f:Ti},5:{n:"PtgMul",f:Ti},6:{n:"PtgDiv",f:Ti},7:{n:"PtgPower",f:Ti},8:{n:"PtgConcat",f:Ti},9:{n:"PtgLt",f:Ti},10:{n:"PtgLe",f:Ti},11:{n:"PtgEq",f:Ti},12:{n:"PtgGe",f:Ti},13:{n:"PtgGt",f:Ti},14:{n:"PtgNe",f:Ti},15:{n:"PtgIsect",f:Ti},16:{n:"PtgUnion",f:Ti},17:{n:"PtgRange",f:Ti},18:{n:"PtgUplus",f:Ti},19:{n:"PtgUminus",f:Ti},20:{n:"PtgPercent",f:Ti},21:{n:"PtgParen",f:Ti},22:{n:"PtgMissArg",f:Ti},23:{n:"PtgStr",f:CFe},26:{n:"PtgSheet",f:XFe},27:{n:"PtgEndSheet",f:YFe},28:{n:"PtgErr",f:bFe},29:{n:"PtgBool",f:wFe},30:{n:"PtgInt",f:yFe},31:{n:"PtgNum",f:NFe},32:{n:"PtgArray",f:aFe},33:{n:"PtgFunc",f:mFe},34:{n:"PtgFuncVar",f:pFe},35:{n:"PtgName",f:SFe},36:{n:"PtgRef",f:fFe},37:{n:"PtgArea",f:ZPe},38:{n:"PtgMemArea",f:BFe},39:{n:"PtgMemErr",f:PFe},40:{n:"PtgMemNoMem",f:FFe},41:{n:"PtgMemFunc",f:IFe},42:{n:"PtgRefErr",f:DFe},43:{n:"PtgAreaErr",f:tFe},44:{n:"PtgRefN",f:hFe},45:{n:"PtgAreaN",f:nFe},46:{n:"PtgMemAreaN",f:JFe},47:{n:"PtgMemNoMemN",f:ZFe},57:{n:"PtgNameX",f:_Fe},58:{n:"PtgRef3d",f:AFe},59:{n:"PtgArea3d",f:eFe},60:{n:"PtgRefErr3d",f:OFe},61:{n:"PtgAreaErr3d",f:rFe},255:{}},tRe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},rRe={1:{n:"PtgElfLel",f:lce},2:{n:"PtgElfRw",f:zFe},3:{n:"PtgElfCol",f:LFe},6:{n:"PtgElfRwV",f:GFe},7:{n:"PtgElfColV",f:HFe},10:{n:"PtgElfRadical",f:QFe},11:{n:"PtgElfRadicalS",f:$Fe},13:{n:"PtgElfColS",f:MFe},15:{n:"PtgElfColSV",f:UFe},16:{n:"PtgElfRadicalLel",f:VFe},25:{n:"PtgList",f:KFe},29:{n:"PtgSxName",f:WFe},255:{}},nRe={0:{n:"PtgAttrNoop",f:eRe},1:{n:"PtgAttrSemi",f:cFe},2:{n:"PtgAttrIf",f:oFe},4:{n:"PtgAttrChoose",f:sFe},8:{n:"PtgAttrGoto",f:iFe},16:{n:"PtgAttrSum",f:xFe},32:{n:"PtgAttrBaxcel",f:Qq},33:{n:"PtgAttrBaxcel",f:Qq},64:{n:"PtgAttrSpace",f:uFe},65:{n:"PtgAttrSpaceSemi",f:dFe},128:{n:"PtgAttrIfError",f:lFe},255:{}};function aE(e,t,r,n){if(n.biff<8)return Ul(e,t);for(var a=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=kFe(e,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=jFe(e,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&s.push(Ul(e,t)),s}function sE(e,t,r){for(var n=e.l+t,a,s,o=[];n!=e.l;)t=n-e.l,s=e[e.l],a=Vq[s]||Vq[tRe[s]],(s===24||s===25)&&(a=(s===24?rRe:nRe)[e[e.l+1]]),!a||!a.f?Ul(e,t):o.push([a.n,a.f(e,t,r)]);return o}function aRe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var sRe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function iRe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function cce(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function $q(e,t,r){var n=cce(e,t,r);return n=="#REF"?n:iRe(n,r)}function Cl(e,t,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,A=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,N=e[0].length;y<N;++y){var C=e[0][y];switch(C[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=qs(" ",e[0][x][1][1]);break;case 1:v=qs("\r",e[0][x][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}l.push(u+sRe[C[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Z2(C[1][1],o,a),l.push(eN(d,s));break;case"PtgRefN":d=r?Z2(C[1][1],r,a):C[1][1],l.push(eN(d,s));break;case"PtgRef3d":f=C[1][1],d=Z2(C[1][2],o,a),g=$q(n,f,a),l.push(g+"!"+eN(d,s));break;case"PtgFunc":case"PtgFuncVar":var _=C[1][0],j=C[1][1];_||(_=0),_&=127;var I=_==0?[]:l.slice(-_);l.length-=_,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(C[1]);break;case"PtgNum":l.push(String(C[1]));break;case"PtgStr":l.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(C[1]);break;case"PtgAreaN":m=vq(C[1][1],r?{s:r}:o,a),l.push(r6(m,a));break;case"PtgArea":m=vq(C[1][1],o,a),l.push(r6(m,a));break;case"PtgArea3d":f=C[1][1],m=C[1][2],g=$q(n,f,a),l.push(g+"!"+r6(m,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":A=C[1][2];var T=(n.names||[])[A-1]||(n[0]||[])[A],k=T?T.Name:"SH33TJSNAME"+String(A);k&&k.slice(0,6)=="_xlfn."&&!a.xlfn&&(k=k.slice(6)),l.push(k);break;case"PtgNameX":var B=C[1][1];A=C[1][2];var M;if(a.biff<=5)B<0&&(B=-B),n[B]&&(M=n[B][A]);else{var P="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][A]&&n[B][A].itab>0&&(P=n.SheetNames[n[B][A].itab-1]+"!"):P=n.SheetNames[A-1]+"!"),n[B]&&n[B][A])P+=n[B][A].Name;else if(n[0]&&n[0][A])P+=n[0][A].Name;else{var S=(cce(n,B,a)||"").split(";;");S[A-1]?P=S[A-1]:P+="SH33TJSERRX"}l.push(P);break}M||(M={Name:"SH33TJSERRY"}),l.push(M.Name);break;case"PtgParen":var L="(",U=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:L=qs(" ",e[0][x][1][1])+L;break;case 3:L=qs("\r",e[0][x][1][1])+L;break;case 4:U=qs(" ",e[0][x][1][1])+U;break;case 5:U=qs("\r",e[0][x][1][1])+U;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(L+l.pop()+U);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:C[1][1],r:C[1][0]};var q={c:r.c,r:r.r};if(n.sharedf[Yr(d)]){var H=n.sharedf[Yr(d)];l.push(Cl(H,o,q,n,a))}else{var z=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Cl(u[1],o,q,n,a)),z=!0;break}z||l.push(C[1])}break;case"PtgArray":l.push("{"+aRe(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var W=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&W.indexOf(e[0][y][0])==-1){C=e[0][x];var Z=!0;switch(C[1][0]){case 4:Z=!1;case 0:v=qs(" ",C[1][1]);break;case 5:Z=!1;case 1:v=qs("\r",C[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}l.push((Z?v:"")+l.pop()+(Z?"":v)),x=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function oRe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],Ul(e,t-2)];var l=sE(e,o,r);return t!==o+a&&(s=aE(e,t-o-a,l,r)),e.l=n,[l,s]}function lRe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],Ul(e,t-2)];var l=sE(e,o,r);return t!==o+a&&(s=aE(e,t-o-a,l,r)),e.l=n,[l,s]}function cRe(e,t,r,n){var a=e.l+t,s=sE(e,n,r),o;return a!==e.l&&(o=aE(e,a-e.l,s,r)),[s,o]}function uRe(e,t,r){var n=e.l+t,a,s=e.read_shift(2),o=sE(e,s,r);return s==65535?[[],Ul(e,t-2)]:(t!==s+2&&(a=aE(e,n-s-2,o,r)),[o,a])}function dRe(e){var t;if(J0(e,e.l+6)!==65535)return[Tl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function fRe(e){if(e==null){var t=Pt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Lx(e);return Lx(0)}function o6(e,t,r){var n=e.l+t,a=a0(e);r.biff==2&&++e.l;var s=dRe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=lRe(e,n-e.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function hRe(e,t,r,n,a){var s=Ux(t,r,a),o=fRe(e.v),l=Pt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Pt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=bo([s,o,l,u]);return f}function S3(e,t,r){var n=e.read_shift(4),a=sE(e,n,r),s=e.read_shift(4),o=s>0?aE(e,s,a,r):null;return[a,o]}var ARe=S3,_3=S3,mRe=S3,pRe=S3,gRe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},uce={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},xRe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function zq(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function vRe(e){var t="of:="+e.replace(j7,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function l6(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function bRe(e){return e.replace(/\./,"!")}var rN={},d1={},nN=typeof Map<"u";function _7(e,t,r){var n=0,a=e.length;if(r){if(nN?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=nN?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(nN?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function T3(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(kl=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=eC(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=r_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function gx(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Kp(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){iA(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function dce(e,t,r,n,a,s){try{n.cellNF&&(e.z=Kr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ss(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Kr[t]==null&&iA(gBe[t]||"General",t),e.t==="e")e.w=e.w||QA[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=qN(e.v);else if(e.t==="d"){var o=Ji(e.v);(o|0)===o?e.w=o.toString(10):e.w=qN(o)}else{if(e.v===void 0)return"";e.w=Fx(e.v,d1)}else e.t==="d"?e.w=Td(t,Ji(e.v),d1):e.w=Td(t,e.v,d1)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=t_(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=t_(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function yRe(e,t,r){if(e&&e["!ref"]){var n=ea(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function wRe(e,t){var r=ea(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=An(r))}var NRe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,CRe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,ERe=/<(?:\w:)?hyperlink [^>]*>/mg,jRe=/"(\w*:\w*)"/,kRe=/<(?:\w:)?col\b[^>]*[\/]?>/g,SRe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,_Re=/<(?:\w:)?pageMargins[^>]*\/>/g,fce=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,TRe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,BRe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function IRe(e,t,r,n,a,s,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(CRe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var A=u.match(fce);A?T7(A[0],l,a,r):(A=u.match(TRe))&&ORe(A[0],A[1]||"",l,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(jRe);g&&wRe(l,g[1])}var x=u.match(BRe);x&&x[1]&&qRe(x[1],a);var v=[];if(t.cellStyles){var y=u.match(kRe);y&&QRe(v,y)}f&&XRe(f[1],l,t,c,s,o);var N=d.match(SRe);N&&(l["!autofilter"]=$Re(N[0]));var C=[],_=d.match(NRe);if(_)for(m=0;m!=_.length;++m)C[m]=ea(_[m].slice(_[m].indexOf('"')+1));var j=d.match(ERe);j&&MRe(l,j,n);var I=d.match(_Re);if(I&&(l["!margins"]=URe(tn(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=An(c)),t.sheetRows>0&&l["!ref"]){var T=ea(l["!ref"]);t.sheetRows<=+T.e.r&&(T.e.r=t.sheetRows-1,T.e.r>c.e.r&&(T.e.r=c.e.r),T.e.r<T.s.r&&(T.s.r=T.e.r),T.e.c>c.e.c&&(T.e.c=c.e.c),T.e.c<T.s.c&&(T.s.c=T.e.c),l["!fullref"]=l["!ref"],l["!ref"]=An(T))}return v.length>0&&(l["!cols"]=v),C.length>0&&(l["!merges"]=C),l}function DRe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+An(e[r])+'"/>';return t+"</mergeCells>"}function T7(e,t,r,n){var a=tn(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Jn(Ma(a.codeName)))}function ORe(e,t,r,n,a){T7(e.slice(0,e.indexOf(">")),r,n,a)}function PRe(e,t,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=Oh(Ba(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+rr("outlinePr",null,u)}!s&&!l||(a[a.length]=rr("sheetPr",l,o))}var FRe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],RRe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function LRe(e){var t={sheet:1};return FRe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),RRe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=N7(e.password).toString(16).toUpperCase()),rr("sheetProtection",null,t)}function MRe(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=tn(Ma(t[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Jn(s.location))):(s.Target="#"+Jn(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=ea(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Yr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function URe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function HRe(e){return gx(e),rr("pageMargins",null,e)}function QRe(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=tn(t[n],!0);a.hidden&&(a.hidden=ns(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,C7(a.width)),_p(a);s<=o;)e[s++]=is(a)}}function VRe(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=rr("col",null,T3(a,n)));return r[r.length]="</cols>",r.join("")}function $Re(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function zRe(e,t,r,n){var a=typeof e.ref=="string"?e.ref:An(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Vc(a);o.s.r==o.e.r&&(o.e.r=Vc(t["!ref"]).e.r,a=An(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),rr("autoFilter",null,{ref:a})}var GRe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function qRe(e,t){t.Views||(t.Views=[{}]),(e.match(GRe)||[]).forEach(function(r,n){var a=tn(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),ns(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function KRe(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),rr("sheetViews",rr("sheetView",null,a),{})}function WRe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=QA[e.v];break;case"d":n&&n.cellDates?a=ss(e.v,-1).toISOString():(e=is(e),e.t="n",a=""+(e.v=Ji(ss(e.v)))),typeof e.z>"u"&&(e.z=Kr[14]);break;default:a=e.v;break}var l=Go("v",Ba(a)),c={r:t},u=Kp(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Go("v",""+_7(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=rr("f",Ba(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),rr("c",l,c)}var XRe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=KN("v"),o=KN("f");return function(c,u,d,f,A,m){for(var g=0,x="",v=[],y=[],N=0,C=0,_=0,j="",I,T,k=0,B=0,M,P,S=0,L=0,U=Array.isArray(m.CellXf),q,H=[],z=[],W=Array.isArray(u),Z=[],V={},Y=!1,R=!!d.sheetStubs,O=c.split(t),K=0,J=O.length;K!=J;++K){x=O[K].trim();var ce=x.length;if(ce!==0){var oe=0;e:for(g=0;g<ce;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(T=tn(x.slice(oe,g),!0),k=T.r!=null?parseInt(T.r,10):k+1,B=-1,d.sheetRows&&d.sheetRows<k)continue;V={},Y=!1,T.ht&&(Y=!0,V.hpt=parseFloat(T.ht),V.hpx=H1(V.hpt)),T.hidden=="1"&&(Y=!0,V.hidden=!0),T.outlineLevel!=null&&(Y=!0,V.level=+T.outlineLevel),Y&&(Z[k-1]=V)}break;case"<":oe=g;break}if(oe>=g)break;if(T=tn(x.slice(oe,g),!0),k=T.r!=null?parseInt(T.r,10):k+1,B=-1,!(d.sheetRows&&d.sheetRows<k)){f.s.r>k-1&&(f.s.r=k-1),f.e.r<k-1&&(f.e.r=k-1),d&&d.cellStyles&&(V={},Y=!1,T.ht&&(Y=!0,V.hpt=parseFloat(T.ht),V.hpx=H1(V.hpt)),T.hidden=="1"&&(Y=!0,V.hidden=!0),T.outlineLevel!=null&&(Y=!0,V.level=+T.outlineLevel),Y&&(Z[k-1]=V)),v=x.slice(g).split(e);for(var re=0;re!=v.length&&v[re].trim().charAt(0)=="<";++re);for(v=v.slice(re),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),N=g,C=0,_=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(N=0,j=y[1],C=0;C!=j.length&&!((_=j.charCodeAt(C)-64)<1||_>26);++C)N=26*N+_;--N,B=N}else++B;for(C=0;C!=x.length&&x.charCodeAt(C)!==62;++C);if(++C,T=tn(x.slice(0,C),!0),T.r||(T.r=Yr({r:k-1,c:B})),j=x.slice(C),I={t:""},(y=j.match(s))!=null&&y[1]!==""&&(I.v=Jn(y[1])),d.cellFormula){if((y=j.match(o))!=null&&y[1]!==""){if(I.f=Jn(Ma(y[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=Hq(I.f)),y[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&H.push([ea(I.F),I.F]);else if(y[0].indexOf('t="shared"')>-1){P=tn(y[0]);var ue=Jn(Ma(y[1]));d.xlfn||(ue=Hq(ue)),z[parseInt(P.si,10)]=[P,ue,T.r]}}else(y=j.match(/<f[^>]*\/>/))&&(P=tn(y[0]),z[P.si]&&(I.f=GPe(z[P.si][1],z[P.si][2],T.r)));var le=Bs(T.r);for(C=0;C<H.length;++C)le.r>=H[C][0].s.r&&le.r<=H[C][0].e.r&&le.c>=H[C][0].s.c&&le.c<=H[C][0].e.c&&(I.F=H[C][1])}if(T.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(R)I.t="z";else continue;else I.t=T.t||"n";switch(f.s.c>B&&(f.s.c=B),f.e.c<B&&(f.e.c=B),I.t){case"n":if(I.v==""||I.v==null){if(!R)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!R)continue;I.t="z"}else M=rN[parseInt(I.v,10)],I.v=M.t,I.r=M.r,d.cellHTML&&(I.h=M.h);break;case"str":I.t="s",I.v=I.v!=null?Ma(I.v):"",d.cellHTML&&(I.h=l7(I.v));break;case"inlineStr":y=j.match(n),I.t="s",y!=null&&(M=w7(y[1]))?(I.v=M.t,d.cellHTML&&(I.h=M.h)):I.v="";break;case"b":I.v=ns(I.v);break;case"d":d.cellDates?I.v=ss(I.v,1):(I.v=Ji(ss(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=Ale[I.v];break}if(S=L=0,q=null,U&&T.s!==void 0&&(q=m.CellXf[T.s],q!=null&&(q.numFmtId!=null&&(S=q.numFmtId),d.cellStyles&&q.fillId!=null&&(L=q.fillId))),dce(I,S,L,d,A,m),d.cellDates&&U&&I.t=="n"&&Ey(Kr[S])&&(I.t="d",I.v=j3(I.v)),T.cm&&d.xlmeta){var ve=(d.xlmeta.Cell||[])[+T.cm-1];ve&&ve.type=="XLDAPR"&&(I.D=!0)}if(W){var X=Bs(T.r);u[X.r]||(u[X.r]=[]),u[X.r][X.c]=I}else u[T.r]=I}}}}Z.length>0&&(u["!rows"]=Z)}}();function YRe(e,t,r,n){var a=[],s=[],o=ea(e["!ref"]),l="",c,u="",d=[],f=0,A=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(A=o.s.c;A<=o.e.c;++A)d[A]=Ts(A);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=vi(f),A=o.s.c;A<=o.e.c;++A){c=d[A]+u;var N=g?(e[f]||[])[A]:e[c];N!==void 0&&(l=WRe(N,c,e,t))!=null&&s.push(l)}(s.length>0||m&&m[f])&&(x={r:u},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=tC(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),a[a.length]=rr("row",s.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=tC(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),a[a.length]=rr("row","",x));return a.join("")}function hce(e,t,r,n){var a=[wi,rr("worksheet",null,{xmlns:sv[0],"xmlns:r":Ki.r})],s=r.SheetNames[e],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=ea(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=An(d)}n||(n={}),c["!comments"]=[];var f=[];PRe(c,r,e,t,a),a[a.length]=rr("dimension",null,{ref:u}),a[a.length]=KRe(c,t,e,r),t.sheetFormat&&(a[a.length]=rr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=VRe(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=YRe(c,t),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=LRe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=zRe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=DRe(c["!merges"]));var A=-1,m,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=ka(n,-1,Ba(x[1].Target).replace(/#.*$/,""),Bn.HLINK),m["r:id"]="rId"+g),(A=x[1].Target.indexOf("#"))>-1&&(m.location=Ba(x[1].Target.slice(A+1))),x[1].Tooltip&&(m.tooltip=Ba(x[1].Tooltip)),a[a.length]=rr("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=HRe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Go("ignoredErrors",rr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=ka(n,-1,"../drawings/drawing"+(e+1)+".xml",Bn.DRAW),a[a.length]=rr("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=ka(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Bn.VML),a[a.length]=rr("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function JRe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function ZRe(e,t,r){var n=Pt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=tC(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,A=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Yr(u)];g&&(f<0&&(f=m),A=m)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,A))}var x=n.l;return n.l=c,n.write_shift(4,l),n.l=x,n.length>n.l?n.slice(0,n.l):n}function eLe(e,t,r,n){var a=ZRe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Wt(e,0,a)}var tLe=cv,rLe=Sy;function nLe(){}function aLe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=oIe(e),r}function sLe(e,t,r){r==null&&(r=Pt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return J5({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),cle(e,r),r.slice(0,r.l)}function iLe(e){var t=Dd(e);return[t]}function oLe(e,t,r){return r==null&&(r=Pt(8)),iv(t,r)}function lLe(e){var t=ov(e);return[t]}function cLe(e,t,r){return r==null&&(r=Pt(4)),lv(t,r)}function uLe(e){var t=Dd(e),r=e.read_shift(1);return[t,r,"b"]}function dLe(e,t,r){return r==null&&(r=Pt(9)),iv(t,r),r.write_shift(1,e.v?1:0),r}function fLe(e){var t=ov(e),r=e.read_shift(1);return[t,r,"b"]}function hLe(e,t,r){return r==null&&(r=Pt(5)),lv(t,r),r.write_shift(1,e.v?1:0),r}function ALe(e){var t=Dd(e),r=e.read_shift(1);return[t,r,"e"]}function mLe(e,t,r){return r==null&&(r=Pt(9)),iv(t,r),r.write_shift(1,e.v),r}function pLe(e){var t=ov(e),r=e.read_shift(1);return[t,r,"e"]}function gLe(e,t,r){return r==null&&(r=Pt(8)),lv(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function xLe(e){var t=Dd(e),r=e.read_shift(4);return[t,r,"s"]}function vLe(e,t,r){return r==null&&(r=Pt(12)),iv(t,r),r.write_shift(4,t.v),r}function bLe(e){var t=ov(e),r=e.read_shift(4);return[t,r,"s"]}function yLe(e,t,r){return r==null&&(r=Pt(8)),lv(t,r),r.write_shift(4,t.v),r}function wLe(e){var t=Dd(e),r=Tl(e);return[t,r,"n"]}function NLe(e,t,r){return r==null&&(r=Pt(16)),iv(t,r),Lx(e.v,r),r}function Ace(e){var t=ov(e),r=Tl(e);return[t,r,"n"]}function CLe(e,t,r){return r==null&&(r=Pt(12)),lv(t,r),Lx(e.v,r),r}function ELe(e){var t=Dd(e),r=g7(e);return[t,r,"n"]}function jLe(e,t,r){return r==null&&(r=Pt(12)),iv(t,r),ule(e.v,r),r}function kLe(e){var t=ov(e),r=g7(e);return[t,r,"n"]}function SLe(e,t,r){return r==null&&(r=Pt(8)),lv(t,r),ule(e.v,r),r}function _Le(e){var t=Dd(e),r=A7(e);return[t,r,"is"]}function TLe(e){var t=Dd(e),r=Rl(e);return[t,r,"str"]}function BLe(e,t,r){return r==null&&(r=Pt(12+4*e.v.length)),iv(t,r),yo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function ILe(e){var t=ov(e),r=Rl(e);return[t,r,"str"]}function DLe(e,t,r){return r==null&&(r=Pt(8+4*e.v.length)),lv(t,r),yo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function OLe(e,t,r){var n=e.l+t,a=Dd(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"b"];if(r.cellFormula){e.l+=2;var l=_3(e,n-e.l,r);o[3]=Cl(l,null,a,r.supbooks,r)}else e.l=n;return o}function PLe(e,t,r){var n=e.l+t,a=Dd(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"e"];if(r.cellFormula){e.l+=2;var l=_3(e,n-e.l,r);o[3]=Cl(l,null,a,r.supbooks,r)}else e.l=n;return o}function FLe(e,t,r){var n=e.l+t,a=Dd(e);a.r=r["!row"];var s=Tl(e),o=[a,s,"n"];if(r.cellFormula){e.l+=2;var l=_3(e,n-e.l,r);o[3]=Cl(l,null,a,r.supbooks,r)}else e.l=n;return o}function RLe(e,t,r){var n=e.l+t,a=Dd(e);a.r=r["!row"];var s=Rl(e),o=[a,s,"str"];if(r.cellFormula){e.l+=2;var l=_3(e,n-e.l,r);o[3]=Cl(l,null,a,r.supbooks,r)}else e.l=n;return o}var LLe=cv,MLe=Sy;function ULe(e,t){return t==null&&(t=Pt(4)),t.write_shift(4,e),t}function HLe(e,t){var r=e.l+t,n=cv(e),a=m7(e),s=Rl(e),o=Rl(e),l=Rl(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function QLe(e,t){var r=Pt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Sy({s:Bs(e[0]),e:Bs(e[0])},r),p7("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return yo(a||"",r),yo(e[1].Tooltip||"",r),yo("",r),r.slice(0,r.l)}function VLe(){}function $Le(e,t,r){var n=e.l+t,a=dle(e),s=e.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=ARe(e,n-e.l,r);o[1]=l}else e.l=n;return o}function zLe(e,t,r){var n=e.l+t,a=cv(e),s=[a];if(r.cellFormula){var o=pRe(e,n-e.l,r);s[1]=o,e.l=n}else e.l=n;return s}function GLe(e,t,r){r==null&&(r=Pt(18));var n=T3(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var mce=["left","right","top","bottom","header","footer"];function qLe(e){var t={};return mce.forEach(function(r){t[r]=Tl(e)}),t}function KLe(e,t){return t==null&&(t=Pt(48)),gx(e),mce.forEach(function(r){Lx(e[r],t)}),t}function WLe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function XLe(e,t,r){r==null&&(r=Pt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function YLe(e){var t=Pt(24);return t.write_shift(4,4),t.write_shift(4,1),Sy(e,t),t}function JLe(e,t){return t==null&&(t=Pt(66)),t.write_shift(2,e.password?N7(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function ZLe(){}function e8e(){}function t8e(e,t,r,n,a,s,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,A=!1,m,g,x,v,y,N,C,_,j,I=[];l.biff=12,l["!row"]=0;var T=0,k=!1,B=[],M={},P=l.supbooks||a.supbooks||[[]];if(P.sharedf=M,P.arrayf=B,P.SheetNames=a.SheetNames||a.Sheets.map(function(W){return W.name}),!l.supbooks&&(l.supbooks=P,a.Names))for(var S=0;S<a.Names.length;++S)P[0][S+1]=a.Names[S];var L=[],U=[],q=!1;rC[16]={n:"BrtShortReal",f:Ace};var H;if(HA(e,function(Z,V,Y){if(!A)switch(Y){case 148:u=Z;break;case 0:m=Z,l.sheetRows&&l.sheetRows<=m.r&&(A=!0),_=vi(v=m.r),l["!row"]=m.r,(Z.hidden||Z.hpt||Z.level!=null)&&(Z.hpt&&(Z.hpx=H1(Z.hpt)),U[Z.r]=Z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:Z[2]},Z[2]){case"n":g.v=Z[1];break;case"s":C=rN[Z[1]],g.v=C.t,g.r=C.r;break;case"b":g.v=!!Z[1];break;case"e":g.v=Z[1],l.cellText!==!1&&(g.w=QA[g.v]);break;case"str":g.t="s",g.v=Z[1];break;case"is":g.t="s",g.v=Z[1].t;break}if((x=o.CellXf[Z[0].iStyleRef])&&dce(g,x.numFmtId,null,l,s,o),y=Z[0].c==-1?y+1:Z[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[Ts(y)+_]=g,l.cellFormula){for(k=!1,T=0;T<B.length;++T){var R=B[T];m.r>=R[0].s.r&&m.r<=R[0].e.r&&y>=R[0].s.c&&y<=R[0].e.c&&(g.F=An(R[0]),k=!0)}!k&&Z.length>3&&(g.f=Z[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),l.cellDates&&x&&g.t=="n"&&Ey(Kr[x.numFmtId])){var O=Jg(g.v);O&&(g.t="d",g.v=new Date(O.y,O.m-1,O.d,O.H,O.M,O.S,O.u))}H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},y=Z[0].c==-1?y+1:Z[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[Ts(y)+_]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 176:I.push(Z);break;case 49:H=((l.xlmeta||{}).Cell||[])[Z-1];break;case 494:var K=n["!id"][Z.relId];for(K?(Z.Target=K.Target,Z.loc&&(Z.Target+="#"+Z.loc),Z.Rel=K):Z.relId==""&&(Z.Target="#"+Z.loc),v=Z.rfx.s.r;v<=Z.rfx.e.r;++v)for(y=Z.rfx.s.c;y<=Z.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=Z):(N=Yr({c:y,r:v}),c[N]||(c[N]={t:"z",v:void 0}),c[N].l=Z);break;case 426:if(!l.cellFormula)break;B.push(Z),j=l.dense?c[v][y]:c[Ts(y)+_],j.f=Cl(Z[1],d,{r:m.r,c:y},P,l),j.F=An(Z[0]);break;case 427:if(!l.cellFormula)break;M[Yr(Z[0].s)]=Z[1],j=l.dense?c[v][y]:c[Ts(y)+_],j.f=Cl(Z[1],d,{r:m.r,c:y},P,l);break;case 60:if(!l.cellStyles)break;for(;Z.e>=Z.s;)L[Z.e--]={width:Z.w/256,hidden:!!(Z.flags&1),level:Z.level},q||(q=!0,C7(Z.w/256)),_p(L[Z.e+1]);break;case 161:c["!autofilter"]={ref:An(Z)};break;case 476:c["!margins"]=Z;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),Z.name&&(a.Sheets[r].CodeName=Z.name),(Z.above||Z.left)&&(c["!outline"]={above:Z.above,left:Z.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),Z.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!V.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Y.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=An(u||d)),l.sheetRows&&c["!ref"]){var z=ea(c["!ref"]);l.sheetRows<=+z.e.r&&(z.e.r=l.sheetRows-1,z.e.r>d.e.r&&(z.e.r=d.e.r),z.e.r<z.s.r&&(z.s.r=z.e.r),z.e.c>d.e.c&&(z.e.c=d.e.c),z.e.c<z.s.c&&(z.s.c=z.e.c),c["!fullref"]=c["!ref"],c["!ref"]=An(z))}return I.length>0&&(c["!merges"]=I),L.length>0&&(c["!cols"]=L),U.length>0&&(c["!rows"]=U),c}function r8e(e,t,r,n,a,s,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=is(t),t.z=t.z||Kr[14],t.v=Ji(ss(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=Kp(a.cellXfs,t,a),t.l&&s["!links"].push([Yr(c),t.l]),t.c&&s["!comments"].push([Yr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=_7(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,o?Wt(e,18,yLe(t,c)):Wt(e,7,vLe(t,c))):(c.t="str",o?Wt(e,17,DLe(t,c)):Wt(e,6,BLe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Wt(e,13,SLe(t,c)):Wt(e,2,jLe(t,c)):o?Wt(e,16,CLe(t,c)):Wt(e,5,NLe(t,c)),!0;case"b":return c.t="b",o?Wt(e,15,hLe(t,c)):Wt(e,4,dLe(t,c)),!0;case"e":return c.t="e",o?Wt(e,14,gLe(t,c)):Wt(e,3,mLe(t,c)),!0}return o?Wt(e,12,cLe(t,c)):Wt(e,1,oLe(t,c)),!0}function n8e(e,t,r,n){var a=ea(t["!ref"]||"A1"),s,o="",l=[];Wt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=vi(d),eLe(e,t,a,d);var f=!1;if(d<=a.e.r)for(var A=a.s.c;A<=a.e.c;++A){d===a.s.r&&(l[A]=Ts(A)),s=l[A]+o;var m=c?(t[d]||[])[A]:t[s];if(!m){f=!1;continue}f=r8e(e,m,d,A,n,t,f)}}Wt(e,146)}function a8e(e,t){!t||!t["!merges"]||(Wt(e,177,ULe(t["!merges"].length)),t["!merges"].forEach(function(r){Wt(e,176,MLe(r))}),Wt(e,178))}function s8e(e,t){!t||!t["!cols"]||(Wt(e,390),t["!cols"].forEach(function(r,n){r&&Wt(e,60,GLe(n,r))}),Wt(e,391))}function i8e(e,t){!t||!t["!ref"]||(Wt(e,648),Wt(e,649,YLe(ea(t["!ref"]))),Wt(e,650))}function o8e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ka(r,-1,n[1].Target.replace(/#.*$/,""),Bn.HLINK);Wt(e,494,QLe(n,a))}}),delete t["!links"]}function l8e(e,t,r,n){if(t["!comments"].length>0){var a=ka(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Bn.VML);Wt(e,551,p7("rId"+a)),t["!legacy"]=a}}function c8e(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:An(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Vc(s);l.s.r==l.e.r&&(l.e.r=Vc(t["!ref"]).e.r,s=An(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Wt(e,161,Sy(ea(s))),Wt(e,162)}}function u8e(e,t,r){Wt(e,133),Wt(e,137,XLe(t,r)),Wt(e,138),Wt(e,134)}function d8e(e,t){t["!protect"]&&Wt(e,535,JLe(t["!protect"]))}function f8e(e,t,r,n){var a=Hc(),s=r.SheetNames[e],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=ea(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Wt(a,129),(r.vbaraw||o["!outline"])&&Wt(a,147,sLe(l,o["!outline"])),Wt(a,148,rLe(c)),u8e(a,o,r.Workbook),s8e(a,o),n8e(a,o,e,t),d8e(a,o),c8e(a,o,r,e),a8e(a,o),o8e(a,o,n),o["!margins"]&&Wt(a,476,KLe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&i8e(a,o),l8e(a,o,e,n),Wt(a,130),a.end()}function h8e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=Jn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function A8e(e,t,r,n,a,s){var o=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var A=h8e(f);d.s.r=d.s.c=0,d.e.c=l,u=Ts(l),A[0].forEach(function(m,g){o[u+vi(g)]={t:"n",v:m,z:A[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=An(d)),o}function m8e(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(fce);return l&&T7(l[0],s,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function p8e(e,t){e.l+=10;var r=Rl(e);return{name:r}}function g8e(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return HA(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var B7=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],x8e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],v8e=[],b8e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Gq(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=ns(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function qq(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=ns(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function pce(e){qq(e.WBProps,B7),qq(e.CalcPr,b8e),Gq(e.WBView,x8e),Gq(e.Sheets,v8e),d1.date1904=ns(e.WBProps.date1904)}function y8e(e){return!e.Workbook||!e.Workbook.WBProps?"false":ns(e.Workbook.WBProps.date1904)?"true":"false"}var w8e="][*?/\\".split("");function gce(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return w8e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function N8e(e,t,r){e.forEach(function(n,a){gce(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function C8e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];N8e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)yRe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var E8e=/<\w+:workbook/;function j8e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(e.replace(Ql,function(c,u){var d=tn(c);switch(n0(d[0])){case"<?xml":break;case"<workbook":c.match(E8e)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":B7.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=ns(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ma(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Jn(Ma(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ma(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),ns(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=Jn(Ma(e.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),sv.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return pce(r),r}function xce(e){var t=[wi];t[t.length]=rr("workbook",null,{xmlns:sv[0],"xmlns:r":Ki.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(B7.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=rr("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:Ba(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=rr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=rr("definedName",Ba(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function k8e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=IF(e),r.name=Rl(e),r}function S8e(e,t){return t||(t=Pt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),p7(e.strRelID,t),yo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function _8e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Rl(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function T8e(e,t){t||(t=Pt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),cle(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function B8e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function I8e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=lIe(e),o=mRe(e,0,r),l=m7(e);e.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function D8e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],rC[16]={n:"BrtFRTArchID$",f:B8e},HA(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Cl(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),pce(r),r.Names=s,r.supbooks=o,r}function O8e(e,t){Wt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Wt(e,156,S8e(a))}Wt(e,144)}function P8e(e,t){t||(t=Pt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return yo("SheetJS",t),yo(z5.version,t),yo(z5.version,t),yo("7262",t),t.length>t.l?t.slice(0,t.l):t}function F8e(e,t){t||(t=Pt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function R8e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Wt(e,135),Wt(e,158,F8e(a)),Wt(e,136))}}function L8e(e,t){var r=Hc();return Wt(r,131),Wt(r,128,P8e()),Wt(r,153,T8e(e.Workbook&&e.Workbook.WBProps||null)),R8e(r,e),O8e(r,e),Wt(r,132),r.end()}function M8e(e,t,r){return t.slice(-4)===".bin"?D8e(e,r):j8e(e,r)}function U8e(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?t8e(e,n,r,a,s,o,l):IRe(e,n,r,a,s,o,l)}function H8e(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?g8e(e,n,r,a,s):m8e(e,n,r,a,s)}function Q8e(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?$Pe():zPe()}function V8e(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?QPe():VPe()}function $8e(e,t,r,n){return t.slice(-4)===".bin"?MOe(e,r,n):kOe(e,r,n)}function z8e(e,t,r){return Jle(e,r)}function G8e(e,t,r){return t.slice(-4)===".bin"?GDe(e,r):VDe(e,r)}function q8e(e,t,r){return t.slice(-4)===".bin"?RPe(e,r):SPe(e,r)}function K8e(e,t,r){return t.slice(-4)===".bin"?EPe(e):NPe(e)}function W8e(e,t,r,n){return r.slice(-4)===".bin"?jPe(e,t,r,n):void 0}function X8e(e,t,r){return t.slice(-4)===".bin"?bPe(e,t,r):wPe(e,t,r)}function Y8e(e,t,r){return(t.slice(-4)===".bin"?L8e:xce)(e)}function J8e(e,t,r,n,a){return(t.slice(-4)===".bin"?f8e:hce)(e,r,n,a)}function Z8e(e,t,r){return(t.slice(-4)===".bin"?WOe:Xle)(e,r)}function eMe(e,t,r){return(t.slice(-4)===".bin"?WDe:Qle)(e,r)}function tMe(e,t,r){return(t.slice(-4)===".bin"?LPe:tce)(e)}function rMe(e){return(e.slice(-4)===".bin"?yPe:Zle)()}var vce=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,bce=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function lf(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(vce),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(bce),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function nMe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(vce),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(bce),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var aN;function aMe(e,t){var r=aN[e]||Jn(e);return r==="General"?Fx(t):Td(r,t)}function sMe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=ns(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=ss(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Jn(t)]=a}function iMe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||QA[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=qN(e.v):e.w=Fx(e.v):e.w=aMe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=aN[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Ey(n)){var a=Jg(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function oMe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=vOe[n.Pattern]||n.Pattern)}e[t.ID]=t}function lMe(e,t,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,A={};u=u||{};var m=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&m.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ns(e);break;case"String":n.t="s",n.r=uq(Jn(e)),n.v=e.indexOf("<")>-1?Jn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(ss(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Jn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Ale[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=uq(t||e));break}if(iMe(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Jn(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=u1(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=u1("RC:RC",a):n.ArrayRange&&(n.F=u1(n.ArrayRange,a),c.push([ea(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!A.patternType&&v.patternType&&(A.patternType=v.patternType)}),n.s=A),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function cMe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function c6(e,t){var r=t||{};jy();var n=w2(c7(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ma(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=is(r);return o.type="string",U1.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ae){a.indexOf("<"+Ae)>=0&&(s=!0)}),s)return KMe(n,r);aN={"General Number":"General","General Date":Kr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Kr[15],"Short Date":Kr[14],"Long Time":Kr[19],"Medium Time":Kr[18],"Short Time":Kr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Kr[2],Standard:Kr[4],Percent:Kr[10],Scientific:Kr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],A=r.dense?[]:{},m="",g={},x={},v=lf('<Data ss:Type="String">'),y=0,N=0,C=0,_={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},T="",k=0,B=[],M={},P={},S=0,L=[],U=[],q={},H=[],z,W=!1,Z=[],V=[],Y={},R=0,O=0,K={Sheets:[],WBProps:{date1904:!1}},J={};XN.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ce="";l=XN.exec(n);)switch(l[3]=(ce=l[3]).toLowerCase()){case"data":if(ce=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?lMe(n.slice(y,l.index),T,v,c[c.length-1][0]=="comment"?q:g,{c:N,r:C},j,H[N],x,Z,r):(T="",v=lf(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(U.length>0&&(g.c=U),(!r.sheetRows||r.sheetRows>C)&&g.v!==void 0&&(r.dense?(A[C]||(A[C]=[]),A[C][N]=g):A[Ts(N)+vi(C)]=g),g.HRef&&(g.l={Target:Jn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(R=N+(parseInt(g.MergeAcross,10)|0),O=C+(parseInt(g.MergeDown,10)|0),B.push({s:{c:N,r:C},e:{c:R,r:O}})),!r.sheetStubs)g.MergeAcross?N=R+1:++N;else if(g.MergeAcross||g.MergeDown){for(var oe=N;oe<=R;++oe)for(var re=C;re<=O;++re)(oe>N||re>C)&&(r.dense?(A[re]||(A[re]=[]),A[re][oe]={t:"z"}):A[Ts(oe)+vi(re)]={t:"z"});N=R+1}else++N;else g=nMe(l[0]),g.Index&&(N=+g.Index-1),N<_.s.c&&(_.s.c=N),N>_.e.c&&(_.e.c=N),l[0].slice(-2)==="/>"&&++N,U=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(C<_.s.r&&(_.s.r=C),C>_.e.r&&(_.e.r=C),l[0].slice(-2)==="/>"&&(x=lf(l[0]),x.Index&&(C=+x.Index-1)),N=0,++C):(x=lf(l[0]),x.Index&&(C=+x.Index-1),Y={},(x.AutoFitHeight=="0"||x.Height)&&(Y.hpx=parseInt(x.Height,10),Y.hpt=tC(Y.hpx),V[C]=Y),x.Hidden=="1"&&(Y.hidden=!0,V[C]=Y));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(m),_.s.r<=_.e.r&&_.s.c<=_.e.c&&(A["!ref"]=An(_),r.sheetRows&&r.sheetRows<=_.e.r&&(A["!fullref"]=A["!ref"],_.e.r=r.sheetRows-1,A["!ref"]=An(_))),B.length&&(A["!merges"]=B),H.length>0&&(A["!cols"]=H),V.length>0&&(A["!rows"]=V),d[m]=A}else _={s:{r:2e6,c:2e6},e:{r:0,c:0}},C=N=0,c.push([l[3],!1]),u=lf(l[0]),m=Jn(u.Name),A=r.dense?[]:{},B=[],Z=[],V=[],J={name:m,Hidden:0},K.Sheets.push(J);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),H=[],W=!1}break;case"style":l[1]==="/"?oMe(j,I,r):I=lf(l[0]);break;case"numberformat":I.nf=Jn(lf(l[0]).Format||"General"),aN[I.nf]&&(I.nf=aN[I.nf]);for(var ue=0;ue!=392&&Kr[ue]!=I.nf;++ue);if(ue==392){for(ue=57;ue!=392;++ue)if(Kr[ue]==null){iA(I.nf,ue);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(z=lf(l[0]),z.Hidden&&(z.hidden=!0,delete z.Hidden),z.Width&&(z.wpx=parseInt(z.Width,10)),!W&&z.wpx>10){W=!0,kl=Kle;for(var le=0;le<H.length;++le)H[le]&&_p(H[le])}W&&_p(z),H[z.Index-1||H.length]=z;for(var ve=0;ve<+z.Span;++ve)H[H.length]=is(z);break;case"namedrange":if(l[1]==="/")break;K.Names||(K.Names=[]);var X=tn(l[0]),Ee={Name:X.Name,Ref:u1(X.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(Ee.Sheet=K.Sheets.length-1),K.Names.push(Ee);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?T+=n.slice(k,l.index):k=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=lf(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?DIe(M,ce,n.slice(S,l.index)):S=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));cMe(q),U.push(q)}else c.push([l[3],!1]),u=lf(l[0]),q={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Be=lf(l[0]);A["!autofilter"]={ref:u1(Be.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return Jq(n,r);var je=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:je=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:je=!1}break;case"excelworkbook":switch(l[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:je=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:je=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(S,l.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else S=l.index+l[0].length;break;case"header":A["!margins"]||gx(A["!margins"]={},"xlml"),isNaN(+tn(l[0]).Margin)||(A["!margins"].header=+tn(l[0]).Margin);break;case"footer":A["!margins"]||gx(A["!margins"]={},"xlml"),isNaN(+tn(l[0]).Margin)||(A["!margins"].footer=+tn(l[0]).Margin);break;case"pagemargins":var fe=tn(l[0]);A["!margins"]||gx(A["!margins"]={},"xlml"),isNaN(+fe.Top)||(A["!margins"].top=+fe.Top),isNaN(+fe.Left)||(A["!margins"].left=+fe.Left),isNaN(+fe.Right)||(A["!margins"].right=+fe.Right),isNaN(+fe.Bottom)||(A["!margins"].bottom=+fe.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:je=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:je=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:je=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:je=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:je=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:je=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:je=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:je=!1}break;case"smarttags":break;default:je=!1;break}if(je||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?sMe(P,ce,L,n.slice(S,l.index)):(L=l,S=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ye={};return!r.bookSheets&&!r.bookProps&&(ye.Sheets=d),ye.SheetNames=f,ye.Workbook=K,ye.SSF=is(Kr),ye.Props=M,ye.Custprops=P,ye}function MF(e,t){switch(D7(t=t||{}),t.type||"base64"){case"base64":return c6(Du(e),t);case"binary":case"buffer":case"file":return c6(e,t);case"array":return c6(Gp(e),t)}}function uMe(e,t){var r=[];return e.Props&&r.push(OIe(e.Props,t)),e.Custprops&&r.push(PIe(e.Props,e.Custprops)),r.join("")}function dMe(){return""}function fMe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(rr("NumberFormat",null,{"ss:Format":Ba(Kr[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(rr("Style",s.join(""),o))}),rr("Styles",r.join(""))}function yce(e){return rr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+k7(e.Ref,{r:0,c:0})})}function hMe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(yce(a)))}return rr("Names",r.join(""))}function AMe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(yce(l)))}return s.join("")}function mMe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(rr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(rr("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(rr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(rr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Go("ProtectContents","True")),e["!protect"].objects&&a.push(Go("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Go("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Go("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Go("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":rr("WorksheetOptions",a.join(""),{xmlns:xu.x})}function pMe(e){return e.map(function(t){var r=RBe(t.t||""),n=rr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return rr("Comment",n,{"ss:Author":t.a})}).join("")}function gMe(e,t,r,n,a,s,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Ba(k7(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Bs(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Ba(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Ba(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",A="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",A=String(e.v);break;case"b":f="Boolean",A=e.v?"1":"0";break;case"e":f="Error",A=QA[e.v];break;case"d":f="DateTime",A=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Kr[14]);break;case"s":f="String",A=FBe(e.v||"");break}var m=Kp(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var g=e.v!=null?A:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=pMe(e.c)),rr("Cell",x,l)}function xMe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=H1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function vMe(e,t,r,n){if(!e["!ref"])return"";var a=ea(e["!ref"]),s=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){_p(v);var N=!!v.width,C=T3(y,v),_={"ss:Index":y+1};N&&(_["ss:Width"]=ZN(C.width)),v.hidden&&(_["ss:Hidden"]="1"),l.push(rr("Column",null,_))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[xMe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var A=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(A=!0);break}if(!A){var m={r:u,c:f},g=Yr(m),x=c?(e[u]||[])[f]:e[g];d.push(gMe(x,g,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function bMe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],o=s?AMe(s,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?vMe(s,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(mMe(s,t,e,r)),n.join("")}function yMe(e,t){t||(t={}),e.SSF||(e.SSF=is(Kr)),e.SSF&&(jy(),N3(e.SSF),t.revssf=E3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Kp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(uMe(e,t)),r.push(dMe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(rr("Worksheet",bMe(n,t,e),{"ss:Name":Ba(e.SheetNames[n])}));return r[2]=fMe(e,t),r[3]=hMe(e),wi+rr("Workbook",r.join(""),{xmlns:xu.ss,"xmlns:o":xu.o,"xmlns:x":xu.x,"xmlns:ss":xu.ss,"xmlns:dt":xu.dt,"xmlns:html":xu.html})}function wMe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=hIe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=AIe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var NMe=[60,1084,2066,2165,2175];function CMe(e,t,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=J0(r,r.l),u=UF[c],d=0;u!=null&&NMe.indexOf(c)>-1;)s=J0(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=UF[c=J0(r,r.l)];var f=bo(o);zo(f,0);var A=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(A),A+=o[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function gh(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Kr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||QA[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=qN(e.v):e.w=Fx(e.v):e.w=Td(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&Ey(Kr[n]||String(n))){var a=Jg(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function fk(e,t,r){return{v:e,ixfe:t,t:r}}function EMe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,A="",m,g,x,v,y={},N=[],C,_,j=[],I=[],T={Sheets:[],WBProps:{date1904:!1},Views:[{}]},k={},B=function(mt){return mt<8?Ax[mt]:mt<64&&I[mt-8]||Ax[mt]},M=function(mt,We,He){var Tt=We.XF.data;if(!(!Tt||!Tt.patternType||!He||!He.cellStyles)){We.s={},We.s.patternType=Tt.patternType;var Ie;(Ie=JN(B(Tt.icvFore)))&&(We.s.fgColor={rgb:Ie}),(Ie=JN(B(Tt.icvBack)))&&(We.s.bgColor={rgb:Ie})}},P=function(mt,We,He){if(!(Y>1)&&!(He.sheetRows&&mt.r>=He.sheetRows)){if(He.cellStyles&&We.XF&&We.XF.data&&M(mt,We,He),delete We.ixfe,delete We.XF,f=mt,A=Yr(mt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),mt.r<o.s.r&&(o.s.r=mt.r),mt.c<o.s.c&&(o.s.c=mt.c),mt.r+1>o.e.r&&(o.e.r=mt.r+1),mt.c+1>o.e.c&&(o.e.c=mt.c+1),He.cellFormula&&We.f){for(var Tt=0;Tt<N.length;++Tt)if(!(N[Tt][0].s.c>mt.c||N[Tt][0].s.r>mt.r)&&!(N[Tt][0].e.c<mt.c||N[Tt][0].e.r<mt.r)){We.F=An(N[Tt][0]),(N[Tt][0].s.c!=mt.c||N[Tt][0].s.r!=mt.r)&&delete We.f,We.f&&(We.f=""+Cl(N[Tt][1],o,mt,Z,S));break}}He.dense?(a[mt.r]||(a[mt.r]=[]),a[mt.r][mt.c]=We):a[A]=We}},S={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:N,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(S.password=t.password);var L,U=[],q=[],H=[],z=[],W=!1,Z=[];Z.SheetNames=S.snames,Z.sharedf=S.sharedf,Z.arrayf=S.arrayf,Z.names=[],Z.XTI=[];var V=0,Y=0,R=0,O=[],K=[],J;S.codepage=1200,vf(1200);for(var ce=!1;e.l<e.length-1;){var oe=e.l,re=e.read_shift(2);if(re===0&&V===10)break;var ue=e.l===e.length?0:e.read_shift(2),le=UF[re];if(le&&le.f){if(t.bookSheets&&V===133&&re!==133)break;if(V=re,le.r===2||le.r==12){var ve=e.read_shift(2);if(ue-=2,!S.enc&&ve!==re&&((ve&255)<<8|ve>>8)!==re)throw new Error("rt mismatch: "+ve+"!="+re);le.r==12&&(e.l+=10,ue-=10)}var X={};if(re===10?X=le.f(e,ue,S):X=CMe(re,le,e,ue,S),Y==0&&[9,521,1033,2057].indexOf(V)===-1)continue;switch(re){case 34:r.opts.Date1904=T.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(S.enc||(e.l=0),S.enc=X,!t.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:S.lastuser=X;break;case 66:var Ee=Number(X);switch(Ee){case 21010:Ee=1200;break;case 32768:Ee=1e4;break;case 32769:Ee=1252;break}vf(S.codepage=Ee),ce=!0;break;case 317:S.rrtabid=X;break;case 25:S.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:S.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(a["!type"]="dialog"),X.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),X.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(X);break;case 430:Z.push([X]),Z[Z.length-1].XTI=[];break;case 35:case 547:Z[Z.length-1].push(X);break;case 24:case 536:J={Name:X.Name,Ref:Cl(X.rgce,o,null,Z,S)},X.itab>0&&(J.Sheet=X.itab-1),Z.names.push(J),Z[0]||(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(K[X.itab-1]={ref:An(X.rgce[0][0][1][2])});break;case 22:S.ExternCount=X;break;case 23:Z.length==0&&(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].XTI=Z[Z.length-1].XTI.concat(X),Z.XTI=Z.XTI.concat(X);break;case 2196:if(S.biff<8)break;J!=null&&(J.Comment=X[1]);break;case 18:a["!protect"]=X;break;case 19:X!==0&&S.WTF&&console.error("Password verifier: "+X);break;case 133:s[X.pos]=X,S.snames.push(X.name);break;case 10:{if(--Y)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=An(o),t.sheetRows&&t.sheetRows<=o.e.r){var Be=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=An(o),o.e.r=Be}o.e.r++,o.e.c++}U.length>0&&(a["!merges"]=U),q.length>0&&(a["!objects"]=q),H.length>0&&(a["!cols"]=H),z.length>0&&(a["!rows"]=z),T.Sheets.push(k)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(S.biff===8&&(S.biff={9:2,521:3,1033:4}[re]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),S.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(S.biff=5,ce=!0,vf(S.codepage=28591)),S.biff==8&&X.BIFFVer==0&&X.dt==16&&(S.biff=2),Y++)break;if(a=t.dense?[]:{},S.biff<8&&!ce&&(ce=!0,vf(S.codepage=t.codepage||1252)),S.biff<5||X.BIFFVer==0&&X.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var je={pos:e.l-ue,name:u};s[je.pos]=je,S.snames.push(u)}else u=(s[oe]||{name:""}).name;X.dt==32&&(a["!type"]="chart"),X.dt==64&&(a["!type"]="macro"),U=[],q=[],S.arrayf=N=[],H=[],z=[],W=!1,k={Hidden:(s[oe]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[X.r]||[])[X.c]:a[Yr({c:X.c,r:X.r})])&&++X.c,C={ixfe:X.ixfe,XF:j[X.ixfe]||{},v:X.val,t:"n"},R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 5:case 517:C={ixfe:X.ixfe,XF:j[X.ixfe],v:X.val,t:X.t},R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 638:C={ixfe:X.ixfe,XF:j[X.ixfe],v:X.rknum,t:"n"},R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 189:for(var fe=X.c;fe<=X.C;++fe){var ye=X.rkrec[fe-X.c][0];C={ixfe:ye,XF:j[ye],v:X.rkrec[fe-X.c][1],t:"n"},R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P({c:fe,r:X.r},C,t)}break;case 6:case 518:case 1030:{if(X.val=="String"){l=X;break}if(C=fk(X.val,X.cell.ixfe,X.tt),C.XF=j[C.ixfe],t.cellFormula){var Ae=X.formula;if(Ae&&Ae[0]&&Ae[0][0]&&Ae[0][0][0]=="PtgExp"){var se=Ae[0][0][1][0],ne=Ae[0][0][1][1],de=Yr({r:se,c:ne});y[de]?C.f=""+Cl(X.formula,o,X.cell,Z,S):C.F=((t.dense?(a[se]||[])[ne]:a[de])||{}).F}else C.f=""+Cl(X.formula,o,X.cell,Z,S)}R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P(X.cell,C,t),l=X}break;case 7:case 519:if(l)l.val=X,C=fk(X,l.cell.ixfe,"s"),C.XF=j[C.ixfe],t.cellFormula&&(C.f=""+Cl(l.formula,o,l.cell,Z,S)),R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P(l.cell,C,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{N.push(X);var me=Yr(X[0].s);if(m=t.dense?(a[X[0].s.r]||[])[X[0].s.c]:a[me],t.cellFormula&&m){if(!l||!me||!m)break;m.f=""+Cl(X[1],o,X[0],Z,S),m.F=An(X[0])}}break;case 1212:{if(!t.cellFormula)break;if(A){if(!l)break;y[Yr(l.cell)]=X[0],m=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[Yr(l.cell)],(m||{}).f=""+Cl(X[0],o,f,Z,S)}}break;case 253:C=fk(c[X.isst].t,X.ixfe,"s"),c[X.isst].h&&(C.h=c[X.isst].h),C.XF=j[C.ixfe],R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 513:t.sheetStubs&&(C={ixfe:X.ixfe,XF:j[X.ixfe],t:"z"},R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t));break;case 190:if(t.sheetStubs)for(var ge=X.c;ge<=X.C;++ge){var Te=X.ixfe[ge-X.c];C={ixfe:Te,XF:j[Te],t:"z"},R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P({c:ge,r:X.r},C,t)}break;case 214:case 516:case 4:C=fk(X.val,X.ixfe,"s"),C.XF=j[C.ixfe],R>0&&(C.z=O[C.ixfe>>8&63]),gh(C,t,r.opts.Date1904),P({c:X.c,r:X.r},C,t);break;case 0:case 512:Y===1&&(o=X);break;case 252:c=X;break;case 1054:if(S.biff==4){O[R++]=X[1];for(var Ve=0;Ve<R+163&&Kr[Ve]!=X[1];++Ve);Ve>=163&&iA(X[1],R+163)}else iA(X[1],X[0]);break;case 30:{O[R++]=X;for(var Xe=0;Xe<R+163&&Kr[Xe]!=X;++Xe);Xe>=163&&iA(X,R+163)}break;case 229:U=U.concat(X);break;case 93:q[X.cmo[0]]=S.lastobj=X;break;case 438:S.lastobj.TxO=X;break;case 127:S.lastobj.ImData=X;break;case 440:for(v=X[0].s.r;v<=X[0].e.r;++v)for(x=X[0].s.c;x<=X[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Yr({c:x,r:v})],m&&(m.l=X[1]);break;case 2048:for(v=X[0].s.r;v<=X[0].e.r;++v)for(x=X[0].s.c;x<=X[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Yr({c:x,r:v})],m&&m.l&&(m.l.Tooltip=X[1]);break;case 28:{if(S.biff<=5&&S.biff>=2)break;m=t.dense?(a[X[0].r]||[])[X[0].c]:a[Yr(X[0])];var Ke=q[X[2]];m||(t.dense?(a[X[0].r]||(a[X[0].r]=[]),m=a[X[0].r][X[0].c]={t:"z"}):m=a[Yr(X[0])]={t:"z"},o.e.r=Math.max(o.e.r,X[0].r),o.s.r=Math.min(o.s.r,X[0].r),o.e.c=Math.max(o.e.c,X[0].c),o.s.c=Math.min(o.s.c,X[0].c)),m.c||(m.c=[]),g={a:X[1],t:Ke.TxO.t},m.c.push(g)}break;case 2173:fPe(j[X.ixfe],X.ext);break;case 125:{if(!S.cellStyles)break;for(;X.e>=X.s;)H[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},W||(W=!0,C7(X.w/256)),_p(H[X.e+1])}break;case 520:{var Qe={};X.level!=null&&(z[X.r]=Qe,Qe.level=X.level),X.hidden&&(z[X.r]=Qe,Qe.hidden=!0),X.hpt&&(z[X.r]=Qe,Qe.hpt=X.hpt,Qe.hpx=H1(X.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||gx(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[re]]=X;break;case 161:a["!margins"]||gx(a["!margins"]={}),a["!margins"].header=X.header,a["!margins"].footer=X.footer;break;case 574:X.RTL&&(T.Views[0].RTL=!0);break;case 146:I=X;break;case 2198:L=X;break;case 140:_=X;break;case 442:u?k.CodeName=X||k.name:T.WBProps.CodeName=X||"ThisWorkbook";break}}else le||console.error("Missing Info for XLS Record 0x"+re.toString(16)),e.l+=ue}return r.SheetNames=Zs(s).sort(function(Je,mt){return Number(Je)-Number(mt)}).map(function(Je){return s[Je].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&K.forEach(function(Je,mt){r.Sheets[r.SheetNames[mt]]["!autofilter"]=Je}),r.Strings=c,r.SSF=is(Kr),S.enc&&(r.Encryption=S.enc),L&&(r.Themes=L),r.Metadata={},_!==void 0&&(r.Metadata.Country=_),Z.names.length>0&&(T.Names=Z.names),r.Workbook=T,r}var sN={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function jMe(e,t,r){var n=Fr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=Sq(n,DF,sN.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var o=Fr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=Sq(o,OF,sN.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(ble(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function kMe(e,t){var r=[],n=[],a=[],s=0,o,l=aq(DF,"n"),c=aq(OF,"n");if(e.Props)for(o=Zs(e.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Props[o[s]]]);if(e.Custprops)for(o=Zs(e.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)kle.indexOf(a[s][0])>-1||vle.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Fr.utils.cfb_add(t,"/SummaryInformation",_q(n,sN.SI,c,OF)),(r.length||u.length)&&Fr.utils.cfb_add(t,"/DocumentSummaryInformation",_q(r,sN.DSI,l,DF,u.length?u:null,sN.UDI))}function wce(e,t){t||(t={}),D7(t),e7(),t.codepage&&ZM(t.codepage);var r,n;if(e.FullPaths){if(Fr.find(e,"/encryption"))throw new Error("File is password-protected");r=Fr.find(e,"!CompObj"),n=Fr.find(e,"/Workbook")||Fr.find(e,"/Book")}else{switch(t.type){case"base64":e=Nu(Du(e));break;case"binary":e=Nu(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}zo(e,0),n={content:e}}var a,s;if(r&&wMe(r),t.bookProps&&!t.bookSheets)a={};else{var o=En?"buffer":"array";if(n&&n.content)a=EMe(n.content,t);else if((s=Fr.find(e,"PerfectOffice_MAIN"))&&s.content)a=px.to_workbook(s.content,(t.type=o,t));else if((s=Fr.find(e,"NativeContent_MAIN"))&&s.content)a=px.to_workbook(s.content,(t.type=o,t));else throw(s=Fr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Fr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=UPe(e))}var l={};return e.FullPaths&&jMe(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}function SMe(e,t){var r=t||{},n=Fr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Fr.utils.cfb_add(n,a,Nce(e,r)),r.biff==8&&(e.Props||e.Custprops)&&kMe(e,n),r.biff==8&&e.vbaraw&&HPe(n,Fr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var rC={0:{f:JRe},1:{f:iLe},2:{f:ELe},3:{f:ALe},4:{f:uLe},5:{f:wLe},6:{f:TLe},7:{f:xLe},8:{f:RLe},9:{f:FLe},10:{f:OLe},11:{f:PLe},12:{f:lLe},13:{f:kLe},14:{f:pLe},15:{f:fLe},16:{f:Ace},17:{f:ILe},18:{f:bLe},19:{f:A7},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:I8e},40:{},42:{},43:{f:TOe},44:{f:SOe},45:{f:DOe},46:{f:POe},47:{f:OOe},48:{},49:{f:tIe},50:{},51:{f:mPe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Lle},62:{f:_Le},63:{f:CPe},64:{f:ZLe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ul,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:WLe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:aLe},148:{f:tLe,p:16},151:{f:VLe},152:{},153:{f:_8e},154:{},155:{},156:{f:k8e},157:{},158:{},159:{T:1,f:zDe},160:{T:-1},161:{T:1,f:cv},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:LLe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:hPe},336:{T:-1},337:{f:xPe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:IF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Rle},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:$Le},427:{f:zLe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:qLe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:nLe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:HLe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:IF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:PPe},633:{T:1},634:{T:-1},635:{T:1,f:DPe},636:{T:-1},637:{f:sIe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:p8e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:e8e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},UF={6:{f:o6},10:{f:km},12:{f:Oi},13:{f:Oi},14:{f:ci},15:{f:ci},16:{f:Tl},17:{f:ci},18:{f:ci},19:{f:Oi},20:{f:Pq},21:{f:Pq},23:{f:Rle},24:{f:Rq},25:{f:ci},26:{},27:{},28:{f:eDe},29:{},34:{f:ci},35:{f:Fq},38:{f:Tl},39:{f:Tl},40:{f:Tl},41:{f:Tl},42:{f:ci},43:{f:ci},47:{f:fOe},49:{f:k6e},51:{f:Oi},60:{},61:{f:w6e},64:{f:ci},65:{f:j6e},66:{f:Oi},77:{},80:{},81:{},82:{},85:{f:Oi},89:{},90:{},91:{},92:{f:d6e},93:{f:nDe},94:{},95:{f:ci},96:{},97:{},99:{f:ci},125:{f:Lle},128:{f:Q6e},129:{f:h6e},130:{f:Oi},131:{f:ci},132:{f:ci},133:{f:A6e},134:{},140:{f:dDe},141:{f:Oi},144:{},146:{f:ADe},151:{},152:{},153:{},154:{},155:{},156:{f:Oi},157:{},158:{},160:{f:yDe},161:{f:gDe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:L6e},190:{f:M6e},193:{f:km},197:{},198:{},199:{},200:{},201:{},202:{f:ci},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Oi},220:{},221:{f:ci},222:{},224:{f:H6e},225:{f:u6e},226:{f:km},227:{},229:{f:tDe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:p6e},253:{f:_6e},255:{f:x6e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Sle},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ci},353:{f:km},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:q6e},431:{f:ci},432:{},433:{},434:{},437:{},438:{f:iDe},439:{f:ci},440:{f:oDe},441:{},442:{f:rE},443:{},444:{f:Oi},445:{},446:{},448:{f:km},449:{f:y6e,r:2},450:{f:km},512:{f:Iq},513:{f:bDe},515:{f:z6e},516:{f:B6e},517:{f:Oq},519:{f:wDe},520:{f:v6e},523:{},545:{f:Lq},549:{f:Bq},566:{},574:{f:C6e},638:{f:R6e},659:{},1048:{},1054:{f:D6e},1084:{},1212:{f:Y6e},2048:{f:cDe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:ck},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:km},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:mDe,r:12},2173:{f:dPe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ci,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:X6e,r:12},2197:{},2198:{f:sPe,r:12},2199:{},2200:{},2201:{},2202:{f:J6e,r:12},2203:{f:km},2204:{},2205:{},2206:{},2207:{},2211:{f:b6e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Oi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:xDe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:hDe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Iq},1:{},2:{f:kDe},3:{f:EDe},4:{f:CDe},5:{f:Oq},7:{f:_De},8:{},9:{f:ck},11:{},22:{f:Oi},30:{f:P6e},31:{},32:{},33:{f:Lq},36:{},37:{f:Bq},50:{f:TDe},62:{},52:{},67:{},68:{f:Oi},69:{},86:{},126:{},127:{f:NDe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:BDe},223:{},234:{},354:{},421:{},518:{f:o6},521:{f:ck},536:{f:Rq},547:{f:Fq},561:{},579:{},1030:{f:o6},1033:{f:ck},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function sr(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&d7(r)&&e.push(r)}}function _Me(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return sr(e,t,r,a);var s=t;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function iE(e,t,r){return e||(e=Pt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function TMe(e,t,r,n){var a=Pt(9);return iE(a,e,t),_le(r,n||"b",a),a}function BMe(e,t,r){var n=Pt(8+2*r.length);return iE(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function IMe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Ji(ss(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?sr(e,2,SDe(r,n,a)):sr(e,3,jDe(r,n,a));return;case"b":case"e":sr(e,5,TMe(r,n,t.v,t.t));return;case"s":case"str":sr(e,4,BMe(r,n,(t.v||"").slice(0,255)));return}sr(e,1,iE(null,r,n))}function DMe(e,t,r,n){var a=Array.isArray(t),s=ea(t["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=An(s)}for(var u=s.s.r;u<=s.e.r;++u){l=vi(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Ts(d)),o=c[d]+l;var f=a?(t[u]||[])[d]:t[o];f&&IMe(e,f,u,d)}}}function OMe(e,t){for(var r=t||{},n=Hc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return sr(n,r.biff==4?1033:r.biff==3?521:9,y7(e,16,r)),DMe(n,e.Sheets[e.SheetNames[a]],a,r),sr(n,10),n.end()}function PMe(e,t,r){sr(e,49,S6e({sz:12,name:"Arial"},r))}function FMe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&sr(e,1054,O6e(a,t[a],r))})}function RMe(e,t){var r=Pt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),sr(e,2151,r),r=Pt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Ole(ea(t["!ref"]||"A1"),r),r.write_shift(4,4),sr(e,2152,r)}function LMe(e,t){for(var r=0;r<16;++r)sr(e,224,Dq({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){sr(e,224,Dq(n,0,t))})}function MMe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];sr(e,440,lDe(n)),n[1].Tooltip&&sr(e,2048,uDe(n))}delete t["!links"]}function UMe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&sr(e,125,pDe(T3(a,n),a))})}}function HMe(e,t,r,n,a){var s=16+Kp(a.cellXfs,t,a);if(t.v==null&&!t.bf){sr(e,513,Ux(r,n,s));return}if(t.bf)sr(e,6,hRe(t,r,n,a,s));else switch(t.t){case"d":case"n":var o=t.t=="d"?Ji(ss(t.v)):t.v;sr(e,515,G6e(r,n,o,s));break;case"b":case"e":sr(e,517,$6e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var l=_7(a.Strings,t.v,a.revStrings);sr(e,253,T6e(r,n,l,s))}else sr(e,516,I6e(r,n,(t.v||"").slice(0,255),s,a));break;default:sr(e,513,Ux(r,n,s))}}function QMe(e,t,r){var n=Hc(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",A=[],m=ea(s["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}sr(n,2057,y7(r,16,t)),sr(n,13,xd(1)),sr(n,12,xd(100)),sr(n,15,Zl(!0)),sr(n,17,Zl(!1)),sr(n,16,Lx(.001)),sr(n,95,Zl(!0)),sr(n,42,Zl(!1)),sr(n,43,Zl(!1)),sr(n,130,xd(1)),sr(n,128,V6e()),sr(n,131,Zl(!1)),sr(n,132,Zl(!1)),u&&UMe(n,s["!cols"]),sr(n,512,F6e(m,t)),u&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=vi(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(A[v]=Ts(v)),d=A[v]+f;var y=c?(s[x]||[])[v]:s[d];y&&(HMe(n,y,x,v,t),u&&y.l&&s["!links"].push([d,y.l]))}}var N=l.CodeName||l.name||a;return u&&sr(n,574,E6e((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&sr(n,229,rDe(s["!merges"])),u&&MMe(n,s),sr(n,442,Tle(N)),u&&RMe(n,s),sr(n,10),n.end()}function VMe(e,t,r){var n=Hc(),a=(e||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(sr(n,2057,y7(e,5,r)),r.bookType=="xla"&&sr(n,135),sr(n,225,l?xd(1200):null),sr(n,193,$Ie(2)),c&&sr(n,191),c&&sr(n,192),sr(n,226),sr(n,92,f6e("SheetJS",r)),sr(n,66,xd(l?1200:1252)),l&&sr(n,353,xd(0)),l&&sr(n,448),sr(n,317,vDe(e.SheetNames.length)),l&&e.vbaraw&&sr(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";sr(n,442,Tle(u))}sr(n,156,xd(17)),sr(n,25,Zl(!1)),sr(n,18,Zl(!1)),sr(n,19,xd(0)),l&&sr(n,431,Zl(!1)),l&&sr(n,444,xd(0)),sr(n,61,N6e()),sr(n,64,Zl(!1)),sr(n,141,xd(0)),sr(n,34,Zl(y8e(e)=="true")),sr(n,14,Zl(!0)),l&&sr(n,439,Zl(!1)),sr(n,218,xd(0)),PMe(n,e,r),FMe(n,e.SSF,r),LMe(n,r),l&&sr(n,352,Zl(!1));var d=n.end(),f=Hc();l&&sr(f,140,fDe()),l&&r.Strings&&_Me(f,252,g6e(r.Strings)),sr(f,10);var A=f.end(),m=Hc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=d.length+g+A.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};sr(m,133,m6e({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var N=m.end();if(g!=N.length)throw new Error("BS8 "+g+" != "+N.length);var C=[];return d.length&&C.push(d),N.length&&C.push(N),A.length&&C.push(A),bo(C)}function $Me(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=is(Kr)),e&&e.SSF&&(jy(),N3(e.SSF),r.revssf=E3(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,O7(r),r.cellXfs=[],Kp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=QMe(a,r,e);return n.unshift(VMe(e,n,r)),bo(n)}function Nce(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Vc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return $Me(e,t);case 4:case 3:case 2:return OMe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Kq(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=a.index,l=s&&s.index||e.length,c=SBe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,A=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var x=c[o].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var N=y[l].trim();if(N.match(/<t[dh]/i)){for(var C=N,_=0;C.charAt(0)=="<"&&(_=C.indexOf(">"))>-1;)C=C.slice(_+1);for(var j=0;j<g.length;++j){var I=g[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var T=tn(N.slice(0,N.indexOf(">")));A=T.colspan?+T.colspan:1,((f=+T.rowspan)>1||A>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+A-1}});var k=T.t||T["data-t"]||"";if(!C.length){d+=A;continue}if(C=qoe(C),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!C.length){d+=A;continue}var B={t:"s",v:C};r.raw||!C.trim().length||k=="s"||(C==="TRUE"?B={t:"b",v:!0}:C==="FALSE"?B={t:"b",v:!1}:isNaN(jf(C))?isNaN(M1(C).getDate())||(B={t:"d",v:ss(C)},r.cellDates||(B={t:"n",v:Ji(B.v)}),B.z=r.dateNF||Kr[14]):B={t:"n",v:jf(C)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=B):n[Yr({r:u,c:d})]=B,d+=A}}}}return n["!ref"]=An(m),g.length&&(n["!merges"]=g),n}function zMe(e,t,r,n){for(var a=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Yr({r,c:o}),f=n.dense?(e[r]||[])[o]:e[d],A=f&&f.v!=null&&(f.h||l7(f.w||(NA(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?A='<span contenteditable="true">'+A+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(A='<a href="'+f.l.Target+'">'+A+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(rr("td",A,m))}}var g="<tr>";return g+s.join("")+"</tr>"}var GMe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',qMe="</body></html>";function KMe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return qp(Kq(r[0],t),t);var n=R7();return r.forEach(function(a,s){L7(n,Kq(a,t),"Sheet"+(s+1))}),n}function WMe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Cce(e,t){var r=t||{},n=r.header!=null?r.header:GMe,a=r.footer!=null?r.footer:qMe,s=[n],o=Vc(e["!ref"]);r.dense=Array.isArray(e),s.push(WMe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(zMe(e,o,l,r));return s.push("</table>"+a),s.join("")}function Ece(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?Bs(n.origin):n.origin;a=o.r,s=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Vc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],A=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,N=0,C=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var _=l[g];if(Wq(_)){if(n.display)continue;m[x]={hidden:!0}}var j=_.children;for(v=y=0;v<j.length;++v){var I=j[v];if(!(n.display&&Wq(I))){var T=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):qoe(I.innerHTML),k=I.getAttribute("data-z")||I.getAttribute("z");for(A=0;A<f.length;++A){var B=f[A];B.s.c==y+s&&B.s.r<x+a&&x+a<=B.e.r&&(y=B.e.c+1-s,A=-1)}C=+I.getAttribute("colspan")||1,((N=+I.getAttribute("rowspan")||1)>1||C>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(N||1)-1,c:y+s+(C||1)-1}});var M={t:"s",v:T},P=I.getAttribute("data-t")||I.getAttribute("t")||"";T!=null&&(T.length==0?M.t=P||"z":n.raw||T.trim().length==0||P=="s"||(T==="TRUE"?M={t:"b",v:!0}:T==="FALSE"?M={t:"b",v:!1}:isNaN(jf(T))?isNaN(M1(T).getDate())||(M={t:"d",v:ss(T)},n.cellDates||(M={t:"n",v:Ji(M.v)}),M.z=n.dateNF||Kr[14]):M={t:"n",v:jf(T)})),M.z===void 0&&k!=null&&(M.z=k);var S="",L=I.getElementsByTagName("A");if(L&&L.length)for(var U=0;U<L.length&&!(L[U].hasAttribute("href")&&(S=L[U].getAttribute("href"),S.charAt(0)!="#"));++U);S&&S.charAt(0)!="#"&&(M.l={Target:S}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=M):e[Yr({c:y+s,r:x+a})]=M,u.e.c<y+s&&(u.e.c=y+s),y+=C}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=An(u),x>=c&&(e["!fullref"]=An((u.e.r=l.length-g+x-1+a,u))),e}function jce(e,t){var r=t||{},n=r.dense?[]:{};return Ece(n,e,t)}function XMe(e,t){return qp(jce(e,t),t)}function Wq(e){var t="",r=YMe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function YMe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function JMe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Jn(t.replace(/<[^>]*>/g,""));return[r]}var Xq={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function kce(e,t){var r=t||{},n=c7(e),a=[],s,o,l={name:""},c="",u=0,d,f,A={},m=[],g=r.dense?[]:{},x,v,y={value:""},N="",C=0,_=[],j=-1,I=-1,T={s:{r:1e6,c:1e7},e:{r:0,c:0}},k=0,B={},M=[],P={},S=0,L=0,U=[],q=1,H=1,z=[],W={Names:[]},Z={},V=["",""],Y=[],R={},O="",K=0,J=!1,ce=!1,oe=0;for(XN.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=XN.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"":x[1]==="/"?(T.e.c>=T.s.c&&T.e.r>=T.s.r?g["!ref"]=An(T):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=T.e.r&&(g["!fullref"]=g["!ref"],T.e.r=r.sheetRows-1,g["!ref"]=An(T)),M.length&&(g["!merges"]=M),U.length&&(g["!rows"]=U),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),A[d.name]=g,ce=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=tn(x[0],!1),j=I=-1,T.s.r=T.s.c=1e7,T.e.r=T.e.c=0,g=r.dense?[]:{},M=[],U=[],ce=!0);break;case"table-row-group":x[1]==="/"?--k:++k;break;case"table-row":case"":if(x[1]==="/"){j+=q,q=1;break}if(f=tn(x[0],!1),f.?j=f.-1:j==-1&&(j=0),q=+f["number-rows-repeated"]||1,q<10)for(oe=0;oe<q;++oe)k>0&&(U[j+oe]={level:k});I=-1;break;case"covered-table-cell":x[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(g[j]||(g[j]=[]),g[j][I]={t:"z"}):g[Yr({r:j,c:I})]={t:"z"}),N="",_=[];break;case"table-cell":case"":if(x[0].charAt(x[0].length-2)==="/")++I,y=tn(x[0],!1),H=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=zq(Jn(y.formula))),(y.||y["value-type"])=="string"&&(v.t="s",v.v=Jn(y["string-value"]||""),r.dense?(g[j]||(g[j]=[]),g[j][I]=v):g[Yr({r:j,c:I})]=v),I+=H-1;else if(x[1]!=="/"){++I,N="",C=0,_=[],H=1;var re=q?j+q-1:j;if(I>T.e.c&&(T.e.c=I),I<T.s.c&&(T.s.c=I),j<T.s.r&&(T.s.r=j),re>T.e.r&&(T.e.r=re),y=tn(x[0],!1),Y=[],R={},v={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Jn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(S=parseInt(y["number-matrix-rows-spanned"],10)||0,L=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+S-1,c:I+L-1}},v.F=An(P),z.push([P,v.F])),y.formula)v.f=zq(y.formula);else for(oe=0;oe<z.length;++oe)j>=z[oe][0].s.r&&j<=z[oe][0].e.r&&I>=z[oe][0].s.c&&I<=z[oe][0].e.c&&(v.F=z[oe][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(S=parseInt(y["number-rows-spanned"],10)||0,L=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+S-1,c:I+L-1}},M.push(P)),y["number-columns-repeated"]&&(H=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=ns(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=ss(y["date-value"]),r.cellDates||(v.t="n",v.v=Ji(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=EBe(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=j3(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(N=Jn(y["string-value"]),_=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(J=!1,v.t==="s"&&(v.v=N||"",_.length&&(v.R=_),J=C==0),Z.Target&&(v.l=Z),Y.length>0&&(v.c=Y,Y=[]),N&&r.cellText!==!1&&(v.w=N),J&&(v.t="z",delete v.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var ue=0;ue<q;++ue){if(H=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[j+ue]||(g[j+ue]=[]),g[j+ue][I]=ue==0?v:is(v);--H>0;)g[j+ue][I+H]=is(v);else for(g[Yr({r:j+ue,c:I})]=v;--H>0;)g[Yr({r:j+ue,c:I+H})]=is(v);T.e.c<=I&&(T.e.c=I)}H=parseInt(y["number-columns-repeated"]||"1",10),I+=H-1,H=0,v={},N="",_=[]}Z={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;R.t=N,_.length&&(R.R=_),R.a=O,Y.push(R)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);O="",K=0,N="",C=0,_=[];break;case"creator":x[1]==="/"?O=n.slice(K,x.index):K=x.index+x[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);N="",C=0,_=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(B[l.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=tn(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=tn(x[0],!1),c+=Xq[x[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=tn(x[0],!1),c+=Xq[x[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":o=tn(x[0],!1),V=l6(o["cell-range-address"]);var le={Name:o.name,Ref:V[0]+"!"+V[1]};ce&&(le.Sheet=m.length),W.Names.push(le);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var ve=JMe(n.slice(C,x.index));N=(N.length>0?N+`
`:"")+ve[0]}else tn(x[0],!1),C=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{V=l6(tn(x[0])["target-range-address"]),A[V[0]]["!autofilter"]={ref:V[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(Z=tn(x[0],!1),!Z.href)break;Z.Target=Jn(Z.href),delete Z.href,Z.Target.charAt(0)=="#"&&Z.Target.indexOf(".")>-1?(V=l6(Z.Target.slice(1)),Z.Target="#"+V[0]+"!"+V[1]):Z.Target.match(/^\.\.[\\\/]/)&&(Z.Target=Z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(x)}}var X={Sheets:A,SheetNames:m,Workbook:W};return r.bookSheets&&delete X.Sheets,X}function Yq(e,t){t=t||{},pd(e,"META-INF/manifest.xml")&&EIe(Di(e,"META-INF/manifest.xml"),t);var r=Cu(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=kce(Ma(r),t);return pd(e,"meta.xml")&&(n.Props=gle(Di(e,"meta.xml"))),n}function Jq(e,t){return kce(e,t)}var ZMe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+WN({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return wi+t}}(),Zq=function(){var e=function(s){return Ba(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+Ba(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Vc(s["!ref"]||"A1"),A=s["!merges"]||[],m=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,N={},C="";for(m=0;m!=A.length;++m)if(!(A[m].s.c>d)&&!(A[m].s.r>u)&&!(A[m].e.c<d)&&!(A[m].e.r<u)){(A[m].s.c!=d||A[m].s.r!=u)&&(y=!0),N["table:number-columns-spanned"]=A[m].e.c-A[m].s.c+1,N["table:number-rows-spanned"]=A[m].e.r-A[m].s.r+1;break}if(y){c.push(r);continue}var _=Yr({r:u,c:d}),j=g?(s[u]||[])[d]:s[_];if(j&&j.f&&(N["table:formula"]=Ba(vRe(j.f)),j.F&&j.F.slice(0,_.length)==_)){var I=Vc(j.F);N["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,N["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(t);continue}switch(j.t){case"b":C=j.v?"TRUE":"FALSE",N["office:value-type"]="boolean",N["office:boolean-value"]=j.v?"true":"false";break;case"n":C=j.w||String(j.v||0),N["office:value-type"]="float",N["office:value"]=j.v||0;break;case"s":case"str":C=j.v==null?"":j.v,N["office:value-type"]="string";break;case"d":C=j.w||ss(j.v).toISOString(),N["office:value-type"]="date",N["office:date-value"]=ss(j.v).toISOString(),N["table:style-name"]="ce1";break;default:c.push(t);continue}var T=e(C);if(j.l&&j.l.Target){var k=j.l.Target;k=k.charAt(0)=="#"?"#"+bRe(k.slice(1)):k,k.charAt(0)!="#"&&!k.match(/^\w+:/)&&(k="../"+k),T=rr("text:a",T,{"xlink:href":k.replace(/&/g,"&amp;")})}c.push("          "+rr("table:table-cell",rr("text:p",T,{}),N)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;_p(f),f.ods=l;var A=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[wi],u=WN({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=WN({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(ple().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Sce(e,t){if(t.bookType=="fods")return Zq(e,t);var r=s7(),n="",a=[],s=[];return n="mimetype",xn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",xn(r,n,Zq(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",xn(r,n,ZMe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",xn(r,n,wi+ple()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",xn(r,n,SIe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",xn(r,n,jIe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Hx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function HF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ma(Gp(e))}function e7e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Nu(Oh(e))}function t7e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Bp(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function eK(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function r7e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function n7e(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function nC(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ja(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Js(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ia(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=nC(e,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=nC(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Lo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ja(n*8+a.type)),a.type==2&&t.push(ja(a.data.length)),t.push(a.data))})}),Bp(t)}function I7(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function fd(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=nC(e,n),s=ia(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:Js(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=ia(l.data),u=Js(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(o.merge=Js(s[3][0].data)>>>0>0),r.push(o)}return r}function Xv(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ja(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ja(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:ja(o.data.length)}],n[2].push({data:Lo(o.meta),type:2})});var s=Lo(n);t.push(ja(s.length)),t.push(s),a.forEach(function(o){return t.push(o)})}),Bp(t)}function a7e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=nC(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Bp(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Bp(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function hd(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(a7e(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Bp(t)}function Yv(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=ja(n),o=s.length;t.push(s),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return Bp(t)}function s7e(e,t,r,n){var a=Hx(e),s=a.getUint32(4,!0),o=(n>1?12:8)+eK(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=eK(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function i7e(e,t,r){var n=Hx(e),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=r7e(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function u6(e,t){var r=new Uint8Array(32),n=Hx(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,n7e(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function d6(e,t){var r=new Uint8Array(32),n=Hx(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function o7e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return s7e(e,t,r,e[0]);case 5:return i7e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function wl(e){var t=ia(e);return nC(t[1][0].data)}function tK(e,t){var r=ia(t.data),n=Js(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=ia(o.data),c=Js(l[1][0].data)>>>0;switch(n){case 1:s[c]=HF(l[3][0].data);break;case 8:{var u=e[wl(l[9][0].data)][0],d=ia(u.data),f=e[wl(d[1][0].data)][0],A=Js(f.meta[1][0].data);if(A!=2001)throw new Error("2000 unexpected reference to ".concat(A));var m=ia(f.data);s[c]=m[3].map(function(g){return HF(g.data)}).join("")}break}}),s}function l7e(e,t){var r,n,a,s,o,l,c,u,d,f,A,m,g,x,v=ia(e),y=Js(v[1][0].data)>>>0,N=Js(v[2][0].data)>>>0,C=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Js(v[8][0].data)>0||!1,_,j;if((s=(a=v[7])==null?void 0:a[0])!=null&&s.data&&t!=0)_=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,j=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)_=(m=(A=v[4])==null?void 0:A[0])==null?void 0:m.data,j=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var I=C?4:1,T=Hx(_),k=[],B=0;B<_.length/2;++B){var M=T.getUint16(B*2,!0);M<65535&&k.push([B,M])}if(k.length!=N)throw"Expected ".concat(N," cells, found ").concat(k.length);var P=[];for(B=0;B<k.length-1;++B)P[k[B][0]]=j.subarray(k[B][1]*I,k[B+1][1]*I);return k.length>=1&&(P[k[k.length-1][0]]=j.subarray(k[k.length-1][1]*I)),{R:y,cells:P}}function c7e(e,t){var r,n=ia(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Js(n[7][0].data)>>>0>0?1:0:-1,s=I7(n[5],function(o){return l7e(o,a)});return{nrows:Js(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function u7e(e,t,r){var n,a=ia(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Js(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Js(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=An(s);var o=ia(a[4][0].data),l=tK(e,e[wl(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?tK(e,e[wl(o[17][0].data)][0]):[],u=ia(o[3][0].data),d=0;u[1].forEach(function(f){var A=ia(f.data),m=e[wl(A[2][0].data)][0],g=Js(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=c7e(e,m);x.data.forEach(function(v,y){v.forEach(function(N,C){var _=Yr({r:d+y,c:C}),j=o7e(N,l,c);j&&(r[_]=j)})}),d+=x.nrows})}function d7e(e,t){var r=ia(t.data),n={"!ref":"A1"},a=e[wl(r[2][0].data)],s=Js(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return u7e(e,a[0],n),n}function f7e(e,t){var r,n=ia(t.data),a={name:(r=n[1])!=null&&r[0]?HF(n[1][0].data):"",sheets:[]},s=I7(n[2],wl);return s.forEach(function(o){e[o].forEach(function(l){var c=Js(l.meta[1][0].data);c==6e3&&a.sheets.push(d7e(e,l))})}),a}function h7e(e,t){var r=R7(),n=ia(t.data),a=I7(n[1],wl);if(a.forEach(function(s){e[s].forEach(function(o){var l=Js(o.meta[1][0].data);if(l==2){var c=f7e(e,o);c.sheets.forEach(function(u,d){L7(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function f6(e){var t,r,n,a,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=hd(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=fd(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Js(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=Js(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return h7e(s,l)}function A7e(e,t,r){var n,a,s,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=e[8])==null?void 0:s[0])==null?void 0:o.data)&&Js(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Hx(e[7][0].data),d=0,f=[],A=Hx(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),A.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),A.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=u6({t:"s",v:t[x]},r),y=d6({t:"s",v:t[x]},r);break;case"number":v=u6({t:"n",v:t[x]},r),y=d6({t:"n",v:t[x]},r);break;case"boolean":v=u6({t:"b",v:t[x]},r),y=d6({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=ja(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),A.setUint16(x*2,65535,!0);return e[6][0].data=Bp(f),e[3][0].data=Bp(g),c}function m7e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Vc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(An(n)));var s=n_(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(O){return O.forEach(function(K){typeof K=="string"&&o.push(K)})});var l={},c=[],u=Fr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(O,K){return[O,u.FullPaths[K]]}).forEach(function(O){var K=O[0],J=O[1];if(K.type==2&&K.name.match(/\.iwa/)){var ce=K.content,oe=hd(ce),re=fd(oe);re.forEach(function(ue){c.push(ue.id),l[ue.id]={deps:[],location:J,type:Js(ue.messages[0].meta[1][0].data)}})}}),c.sort(function(O,K){return O-K});var d=c.filter(function(O){return O>1}).map(function(O){return[O,ja(O)]});u.FileIndex.map(function(O,K){return[O,u.FullPaths[K]]}).forEach(function(O){var K=O[0];if(O[1],!!K.name.match(/\.iwa/)){var J=fd(hd(K.content));J.forEach(function(ce){ce.messages.forEach(function(oe){d.forEach(function(re){ce.messages.some(function(ue){return Js(ue.meta[1][0].data)!=11006&&t7e(ue.data,re[1])})&&l[re[0]].deps.push(ce.id)})})})}});for(var f=Fr.find(u,l[1].location),A=fd(hd(f.content)),m,g=0;g<A.length;++g){var x=A[g];x.id==1&&(m=x)}var v=wl(ia(m.messages[0].data)[1][0].data);for(f=Fr.find(u,l[v].location),A=fd(hd(f.content)),g=0;g<A.length;++g)x=A[g],x.id==v&&(m=x);for(v=wl(ia(m.messages[0].data)[2][0].data),f=Fr.find(u,l[v].location),A=fd(hd(f.content)),g=0;g<A.length;++g)x=A[g],x.id==v&&(m=x);for(v=wl(ia(m.messages[0].data)[2][0].data),f=Fr.find(u,l[v].location),A=fd(hd(f.content)),g=0;g<A.length;++g)x=A[g],x.id==v&&(m=x);var y=ia(m.messages[0].data);{y[6][0].data=ja(n.e.r+1),y[7][0].data=ja(n.e.c+1);var N=wl(y[46][0].data),C=Fr.find(u,l[N].location),_=fd(hd(C.content));{for(var j=0;j<_.length&&_[j].id!=N;++j);if(_[j].id!=N)throw"Bad ColumnRowUIDMapArchive";var I=ia(_[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var T=0;T<=n.e.c;++T){var k=[];k[1]=k[2]=[{type:0,data:ja(T+420690)}],I[1].push({type:2,data:Lo(k)}),I[2].push({type:0,data:ja(T)}),I[3].push({type:0,data:ja(T)})}I[4]=[],I[5]=[],I[6]=[];for(var B=0;B<=n.e.r;++B)k=[],k[1]=k[2]=[{type:0,data:ja(B+726270)}],I[4].push({type:2,data:Lo(k)}),I[5].push({type:0,data:ja(B)}),I[6].push({type:0,data:ja(B)});_[j].messages[0].data=Lo(I)}C.content=Yv(Xv(_)),C.size=C.content.length,delete y[46];var M=ia(y[4][0].data);{M[7][0].data=ja(n.e.r+1);var P=ia(M[1][0].data),S=wl(P[2][0].data);C=Fr.find(u,l[S].location),_=fd(hd(C.content));{if(_[0].id!=S)throw"Bad HeaderStorageBucket";var L=ia(_[0].messages[0].data);for(B=0;B<s.length;++B){var U=ia(L[2][0].data);U[1][0].data=ja(B),U[4][0].data=ja(s[B].length),L[2][B]={type:L[2][0].type,data:Lo(U)}}_[0].messages[0].data=Lo(L)}C.content=Yv(Xv(_)),C.size=C.content.length;var q=wl(M[2][0].data);C=Fr.find(u,l[q].location),_=fd(hd(C.content));{if(_[0].id!=q)throw"Bad HeaderStorageBucket";for(L=ia(_[0].messages[0].data),T=0;T<=n.e.c;++T)U=ia(L[2][0].data),U[1][0].data=ja(T),U[4][0].data=ja(n.e.r+1),L[2][T]={type:L[2][0].type,data:Lo(U)};_[0].messages[0].data=Lo(L)}C.content=Yv(Xv(_)),C.size=C.content.length;var H=wl(M[4][0].data);(function(){for(var O=Fr.find(u,l[H].location),K=fd(hd(O.content)),J,ce=0;ce<K.length;++ce){var oe=K[ce];oe.id==H&&(J=oe)}var re=ia(J.messages[0].data);{re[3]=[];var ue=[];o.forEach(function(X,Ee){ue[1]=[{type:0,data:ja(Ee)}],ue[2]=[{type:0,data:ja(1)}],ue[3]=[{type:2,data:e7e(X)}],re[3].push({type:2,data:Lo(ue)})})}J.messages[0].data=Lo(re);var le=Xv(K),ve=Yv(le);O.content=ve,O.size=O.content.length})();var z=ia(M[3][0].data);{var W=z[1][0];delete z[2];var Z=ia(W.data);{var V=wl(Z[2][0].data);(function(){for(var O=Fr.find(u,l[V].location),K=fd(hd(O.content)),J,ce=0;ce<K.length;++ce){var oe=K[ce];oe.id==V&&(J=oe)}var re=ia(J.messages[0].data);{delete re[6],delete z[7];var ue=new Uint8Array(re[5][0].data);re[5]=[];for(var le=0,ve=0;ve<=n.e.r;++ve){var X=ia(ue);le+=A7e(X,s[ve],o),X[1][0].data=ja(ve),re[5].push({data:Lo(X),type:2})}re[1]=[{type:0,data:ja(n.e.c+1)}],re[2]=[{type:0,data:ja(n.e.r+1)}],re[3]=[{type:0,data:ja(le)}],re[4]=[{type:0,data:ja(n.e.r+1)}]}J.messages[0].data=Lo(re);var Ee=Xv(K),Be=Yv(Ee);O.content=Be,O.size=O.content.length})()}W.data=Lo(Z)}M[3][0].data=Lo(z)}y[4][0].data=Lo(M)}m.messages[0].data=Lo(y);var Y=Xv(A),R=Yv(Y);return f.content=R,f.size=f.content.length,u}function _ce(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function D7(e){_ce([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function O7(e){_ce([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function p7e(e){return Bn.WS.indexOf(e)>-1?"sheet":e==Bn.CS?"chart":e==Bn.DS?"dialog":e==Bn.MS?"macro":e&&e.length?e:"sheet"}function g7e(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,p7e(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function x7e(e,t,r,n,a,s,o,l,c,u,d,f){try{s[n]=tN(Cu(e,r,!0),t);var A=Di(e,t),m;switch(l){case"sheet":m=U8e(A,t,a,c,s[n],u,d,f);break;case"chart":if(m=H8e(A,t,a,c,s[n],u,d,f),!m||!m["!drawel"])break;var g=C2(m["!drawel"].Target,t),x=YN(g),v=kPe(Cu(e,g,!0),tN(Cu(e,x,!0),g)),y=C2(v,g),N=YN(y);m=A8e(Cu(e,y,!0),y,c,tN(Cu(e,N,!0),y),u,m);break;case"macro":m=Q8e(A,t,a,c,s[n],u,d,f);break;case"dialog":m=V8e(A,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=m;var C=[];s&&s[n]&&Zs(s[n]).forEach(function(_){var j="";if(s[n][_].Type==Bn.CMNT){j=C2(s[n][_].Target,t);var I=q8e(Di(e,j,!0),j,c);if(!I||!I.length)return;Uq(m,I,!1)}s[n][_].Type==Bn.TCMNT&&(j=C2(s[n][_].Target,t),C=C.concat(_Pe(Di(e,j,!0),c)))}),C&&C.length&&Uq(m,C,!0,c.people||[])}catch(_){if(c.WTF)throw _}}function sd(e){return e.charAt(0)=="/"?e.slice(1):e}function v7e(e,t){if(jy(),t=t||{},D7(t),pd(e,"META-INF/manifest.xml")||pd(e,"objectdata.xml"))return Yq(e,t);if(pd(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof f6<"u"){if(e.FileIndex)return f6(e);var r=Fr.utils.cfb_new();return oq(e).forEach(function(U){xn(r,U,TBe(e,U))}),f6(r)}throw new Error("Unsupported NUMBERS file")}if(!pd(e,"[Content_Types].xml"))throw pd(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):pd(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=oq(e),a=NIe(Cu(e,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Di(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Di(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(rN=[],a.sst)try{rN=G8e(Di(e,sd(a.sst)),a.sst,t)}catch(U){if(t.WTF)throw U}t.cellStyles&&a.themes.length&&(c=z8e(Cu(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=$8e(Di(e,sd(a.style)),a.style,c,t))}a.links.map(function(U){try{var q=tN(Cu(e,YN(sd(U))),U);return W8e(Di(e,sd(U)),q,U,t)}catch{}});var d=M8e(Di(e,sd(a.workbooks[0])),a.workbooks[0],t),f={},A="";a.coreprops.length&&(A=Di(e,sd(a.coreprops[0]),!0),A&&(f=gle(A)),a.extprops.length!==0&&(A=Di(e,sd(a.extprops[0]),!0),A&&TIe(A,f,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(A=Cu(e,sd(a.custprops[0]),!0),A&&(m=IIe(A,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(q){return q.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var x={};t.bookDeps&&a.calcchain&&(x=K8e(Di(e,sd(a.calcchain)),a.calcchain));var v=0,y={},N,C;{var _=d.Sheets;f.Worksheets=_.length,f.SheetNames=[];for(var j=0;j!=_.length;++j)f.SheetNames[j]=_[j].name}var I=s?"bin":"xml",T=a.workbooks[0].lastIndexOf("/"),k=(a.workbooks[0].slice(0,T+1)+"_rels/"+a.workbooks[0].slice(T+1)+".rels").replace(/^\//,"");pd(e,k)||(k="xl/_rels/workbook."+I+".rels");var B=tN(Cu(e,k,!0),k.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=X8e(Di(e,sd(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=BPe(Di(e,sd(a.people[0])),t)),B&&(B=g7e(B,d.Sheets));var M=Di(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var P="sheet";if(B&&B[v]?(N="xl/"+B[v][1].replace(/[\/]?xl\//,""),pd(e,N)||(N=B[v][1]),pd(e,N)||(N=k.replace(/_rels\/.*$/,"")+B[v][1]),P=B[v][2]):(N="xl/worksheets/sheet"+(v+1-M)+"."+I,N=N.replace(/sheet0\./,"sheet.")),C=N.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var S=!1,L=0;L!=t.sheets.length;++L)typeof t.sheets[L]=="number"&&t.sheets[L]==v&&(S=1),typeof t.sheets[L]=="string"&&t.sheets[L].toLowerCase()==f.SheetNames[v].toLowerCase()&&(S=1);if(!S)continue e}}x7e(e,N,C,f.SheetNames[v],v,y,o,P,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:m,Deps:x,Sheets:o,SheetNames:f.SheetNames,Strings:rN,Styles:u,Themes:c,SSF:is(Kr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(U,q){U=U.replace(/^Root Entry[\/]/,""),g.keys.push(U),g.files[U]=e.FileIndex[q]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=Di(e,sd(a.vba[0]),!0):a.defaults&&a.defaults.bin===MPe&&(g.vbaraw=Di(e,"xl/vbaProject.bin",!0))),g}function b7e(e,t){var r=t||{},n="Workbook",a=Fr.find(e,n);try{if(n="/!DataSpaces/Version",a=Fr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(XDe(a.content),n="/!DataSpaces/DataSpaceMap",a=Fr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=JDe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Fr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=ZDe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Fr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);tOe(a.content)}catch{}if(n="/EncryptionInfo",a=Fr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=rOe(a.content);if(n="/EncryptedPackage",a=Fr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function y7e(e,t){return t.bookType=="ods"?Sce(e,t):t.bookType=="numbers"?m7e(e,t):t.bookType=="xlsb"?w7e(e,t):N7e(e,t)}function w7e(e,t){Fb=1024,e&&!e.SSF&&(e.SSF=is(Kr)),e&&e.SSF&&(jy(),N3(e.SSF),t.revssf=E3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,nN?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=rce.indexOf(t.bookType)>-1,a=v7();O7(t=t||{});var s=s7(),o="",l=0;if(t.cellXfs=[],Kp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",xn(s,o,xle(e.Props,t)),a.coreprops.push(o),ka(t.rels,2,o,Bn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,xn(s,o,yle(e.Props)),a.extprops.push(o),ka(t.rels,3,o,Bn.EXT_PROPS),e.Custprops!==e.Props&&Zs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",xn(s,o,wle(e.Custprops)),a.custprops.push(o),ka(t.rels,4,o,Bn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],A=(f||{})["!type"]||"sheet";switch(A){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,xn(s,o,J8e(l-1,o,t,e,d)),a.sheets.push(o),ka(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Bn.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,xn(s,x,tMe(m,x)),a.comments.push(x),ka(d,-1,"../comments"+l+"."+r,Bn.CMNT),g=!0),f["!legacy"]&&g&&xn(s,"xl/drawings/vmlDrawing"+l+".vml",ece(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&xn(s,YN(o),c1(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,xn(s,o,eMe(t.Strings,o,t)),a.strs.push(o),ka(t.wbrels,-1,"sharedStrings."+r,Bn.SST)),o="xl/workbook."+r,xn(s,o,Y8e(e,o)),a.workbooks.push(o),ka(t.rels,1,o,Bn.WB),o="xl/theme/theme1.xml",xn(s,o,E7(e.Themes,t)),a.themes.push(o),ka(t.wbrels,-1,"theme/theme1.xml",Bn.THEME),o="xl/styles."+r,xn(s,o,Z8e(e,o,t)),a.styles.push(o),ka(t.wbrels,-1,"styles."+r,Bn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",xn(s,o,e.vbaraw),a.vba.push(o),ka(t.wbrels,-1,"vbaProject.bin",Bn.VBA)),o="xl/metadata."+r,xn(s,o,rMe(o)),a.metadata.push(o),ka(t.wbrels,-1,"metadata."+r,Bn.XLMETA),xn(s,"[Content_Types].xml",mle(a,t)),xn(s,"_rels/.rels",c1(t.rels)),xn(s,"xl/_rels/workbook."+r+".rels",c1(t.wbrels)),delete t.revssf,delete t.ssf,s}function N7e(e,t){Fb=1024,e&&!e.SSF&&(e.SSF=is(Kr)),e&&e.SSF&&(jy(),N3(e.SSF),t.revssf=E3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,nN?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=rce.indexOf(t.bookType)>-1,a=v7();O7(t=t||{});var s=s7(),o="",l=0;if(t.cellXfs=[],Kp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",xn(s,o,xle(e.Props,t)),a.coreprops.push(o),ka(t.rels,2,o,Bn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,xn(s,o,yle(e.Props)),a.extprops.push(o),ka(t.rels,3,o,Bn.EXT_PROPS),e.Custprops!==e.Props&&Zs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",xn(s,o,wle(e.Custprops)),a.custprops.push(o),ka(t.rels,4,o,Bn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},A=e.Sheets[e.SheetNames[l-1]],m=(A||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,xn(s,o,hce(l-1,t,e,f)),a.sheets.push(o),ka(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Bn.WS[0])}if(A){var g=A["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(N){N[1].forEach(function(C){C.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,xn(s,v,TPe(g,d,t)),a.threadedcomments.push(v),ka(f,-1,"../threadedComments/threadedComment"+l+"."+r,Bn.TCMNT)),v="xl/comments"+l+"."+r,xn(s,v,tce(g)),a.comments.push(v),ka(f,-1,"../comments"+l+"."+r,Bn.CMNT),x=!0}A["!legacy"]&&x&&xn(s,"xl/drawings/vmlDrawing"+l+".vml",ece(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}f["!id"].rId1&&xn(s,YN(o),c1(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,xn(s,o,Qle(t.Strings,t)),a.strs.push(o),ka(t.wbrels,-1,"sharedStrings."+r,Bn.SST)),o="xl/workbook."+r,xn(s,o,xce(e)),a.workbooks.push(o),ka(t.rels,1,o,Bn.WB),o="xl/theme/theme1.xml",xn(s,o,E7(e.Themes,t)),a.themes.push(o),ka(t.wbrels,-1,"theme/theme1.xml",Bn.THEME),o="xl/styles."+r,xn(s,o,Xle(e,t)),a.styles.push(o),ka(t.wbrels,-1,"styles."+r,Bn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",xn(s,o,e.vbaraw),a.vba.push(o),ka(t.wbrels,-1,"vbaProject.bin",Bn.VBA)),o="xl/metadata."+r,xn(s,o,Zle()),a.metadata.push(o),ka(t.wbrels,-1,"metadata."+r,Bn.XLMETA),d.length>1&&(o="xl/persons/person.xml",xn(s,o,IPe(d)),a.people.push(o),ka(t.wbrels,-1,"persons/person.xml",Bn.PEOPLE)),xn(s,"[Content_Types].xml",mle(a,t)),xn(s,"_rels/.rels",c1(t.rels)),xn(s,"xl/_rels/workbook."+r+".rels",c1(t.wbrels)),delete t.revssf,delete t.ssf,s}function P7(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Du(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function C7e(e,t){return Fr.find(e,"EncryptedPackage")?b7e(e,t):wce(e,t)}function E7e(e,t){var r,n=e,a=t||{};return a.type||(a.type=En&&Buffer.isBuffer(e)?"buffer":"base64"),r=$oe(n,a),v7e(r,a)}function Tce(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return MF(e.slice(r),t);default:break e}return U1.to_workbook(e,t)}function j7e(e,t){var r="",n=P7(e,t);switch(t.type){case"base64":r=Du(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Rx(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ma(r)),t.type="binary",Tce(r,t)}function k7e(e,t){var r=e;return t.type=="base64"&&(r=Du(r)),r=zN.utils.decode(1200,r.slice(2),"str"),t.type="binary",Tce(r,t)}function S7e(e){return e.match(/[^\x00-\x7F]/)?Oh(e):e}function h6(e,t,r,n){return n?(r.type="string",U1.to_workbook(e,r)):U1.to_workbook(t,r)}function Q1(e,t){e7();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Q1(new Uint8Array(e),(r=is(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),d1={},r.dateNF&&(d1.dateNF=r.dateNF),r.type||(r.type=En&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=En?"buffer":"binary",n=wBe(e),typeof Uint8Array<"u"&&!En&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=S7e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=is(r),r.type="array",Q1(t7(n),r)}switch((a=P7(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return C7e(Fr.read(n,r),r);break;case 9:if(a[1]<=8)return wce(n,r);break;case 60:return MF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return DDe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Ule.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?E7e(n,r):h6(e,n,r,s);case 239:return a[3]===60?MF(n,r):h6(e,n,r,s);case 255:if(a[1]===254)return k7e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return px.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return px.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return LF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return qle.to_workbook(n,r);break;case 10:case 13:case 32:return j7e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return IDe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?LF.to_workbook(n,r):h6(e,n,r,s)}function Bce(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return ZC(t.file,Fr.write(e,{type:En?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Fr.write(e,t)}function _7e(e,t){var r=is(t||{}),n=y7e(e,r);return T7e(n,r)}function T7e(e,t){var r={},n=En?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Fr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(w3(a))}return t.password&&typeof encrypt_agile<"u"?Bce(encrypt_agile(a,t.password),t):t.type==="file"?ZC(t.file,a):t.type=="string"?Ma(a):a}function B7e(e,t){var r=t||{},n=SMe(e,r);return Bce(n,r)}function yh(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return GN(Oh(n));case"binary":return Oh(n);case"string":return e;case"file":return ZC(t.file,n,"utf8");case"buffer":return En?UA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):yh(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function I7e(e,t){switch(t.type){case"base64":return GN(e);case"binary":return e;case"string":return e;case"file":return ZC(t.file,e,"binary");case"buffer":return En?UA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function hk(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?GN(r):t.type=="string"?Ma(r):r;case"file":return ZC(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Ice(e,t){e7(),C8e(e);var r=is(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Ice(e,r);return r.type="array",w3(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return yh(yMe(e,r),r);case"slk":case"sylk":return yh(Mle.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return yh(Cce(e.Sheets[e.SheetNames[a]],r),r);case"txt":return I7e(Dce(e.Sheets[e.SheetNames[a]],r),r);case"csv":return yh(F7(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return yh(Ule.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return hk(LF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return yh(U1.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return yh(qle.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return yh(Hle.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return yh(Sce(e,r),r);case"wk1":return hk(px.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return hk(px.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),hk(Nce(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),B7e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return _7e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function D7e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function _y(e,t,r){var n={};return n.type="file",n.file=t,D7e(n),Ice(e,n)}function O7e(e,t,r,n,a,s,o,l){var c=vi(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,A=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:r,enumerable:!1})}catch{A.__rowNum__=r}else A.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[n[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[m]!=null&&(A[s[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[m]!=null){if(x==null)if(g.t=="e"&&x===null)A[s[m]]=null;else if(u!==void 0)A[s[m]]=u;else if(d&&x===null)A[s[m]]=null;else continue;else A[s[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:NA(g,x,l);x!=null&&(f=!1)}}return{row:A,isempty:f}}function n_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=ea(d);break;case"number":c=ea(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=vi(c.s.r),A=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,N=0,C={};v&&!e[y]&&(e[y]=[]);var _=u.skipHidden&&e["!cols"]||[],j=u.skipHidden&&e["!rows"]||[];for(N=c.s.c;N<=c.e.c;++N)if(!(_[N]||{}).hidden)switch(A[N]=Ts(N),r=v?e[y][N]:e[A[N]+f],n){case 1:s[N]=N-c.s.c;break;case 2:s[N]=A[N];break;case 3:s[N]=u.header[N-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=NA(r,null,u),x=C[o]||0,!x)C[o]=1;else{do l=o+"_"+x++;while(C[l]);C[o]=x,C[l]=1}s[N]=l}for(y=c.s.r+a;y<=c.e.r;++y)if(!(j[y]||{}).hidden){var I=O7e(e,c,y,A,n,s,v,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=I.row)}return m.length=g,m}var rK=/"/g;function P7e(e,t,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=vi(r),A=t.s.c;A<=t.e.c;++A)if(n[A]){var m=l.dense?(e[r]||[])[A]:e[n[A]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:NA(m,null,l));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||l.forceQuotes){d='"'+d.replace(rK,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(rK,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function F7(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=ea(e["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var A=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(A[g]||{}).hidden||(f[g]=Ts(g));for(var x=0,v=a.s.r;v<=a.e.r;++v)(m[v]||{}).hidden||(d=P7e(e,a,v,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?l:"")+d)));return delete n.dense,r.join("")}function Dce(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=F7(e,t);return r}function F7e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=ea(e["!ref"]),s="",o=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=Ts(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=vi(d),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+s,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function Oce(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Bs(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(s["!ref"]){var f=ea(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var A=n.header||[],m=0;t.forEach(function(x,v){Zs(x).forEach(function(y){(m=A.indexOf(y))==-1&&(A[m=A.length]=y);var N=x[y],C="z",_="",j=Yr({c:l+m,r:o+v+a});u=aC(s,j),N&&typeof N=="object"&&!(N instanceof Date)?s[j]=N:(typeof N=="number"?C="n":typeof N=="boolean"?C="b":typeof N=="string"?C="s":N instanceof Date?(C="d",n.cellDates||(C="n",N=Ji(N)),_=n.dateNF||Kr[14]):N===null&&n.nullError&&(C="e",N=0),u?(u.t=C,u.v=N,delete u.w,delete u.R,_&&(u.z=_)):s[j]=u={t:C,v:N},_&&(u.z=_))})}),d.e.c=Math.max(d.e.c,l+A.length-1);var g=vi(o);if(a)for(m=0;m<A.length;++m)s[Ts(m+l)+g]={t:"s",v:A[m]};return s["!ref"]=An(d),s}function R7e(e,t){return Oce(null,e,t)}function aC(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Bs(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?aC(e,Yr(t)):aC(e,Yr({r:t,c:r||0}))}function L7e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function R7(){return{SheetNames:[],Sheets:{}}}function L7(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(gce(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function M7e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=L7e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function U7e(e,t){return e.z=t,e}function Pce(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function H7e(e,t,r){return Pce(e,"#"+t,r)}function Q7e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function V7e(e,t,r,n){for(var a=typeof t!="string"?t:ea(t),s=typeof t=="string"?t:An(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=aC(e,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Ws={encode_col:Ts,encode_row:vi,encode_cell:Yr,encode_range:An,decode_col:h7,decode_row:f7,split_cell:eIe,decode_cell:Bs,decode_range:Vc,format_cell:NA,sheet_add_aoa:lle,sheet_add_json:Oce,sheet_add_dom:Ece,aoa_to_sheet:ky,json_to_sheet:R7e,table_to_sheet:jce,table_to_book:XMe,sheet_to_csv:F7,sheet_to_txt:Dce,sheet_to_json:n_,sheet_to_html:Cce,sheet_to_formulae:F7e,sheet_to_row_object_array:n_,sheet_get_cell:aC,book_new:R7,book_append_sheet:L7,book_set_sheet_visibility:M7e,cell_set_number_format:U7e,cell_set_hyperlink:Pce,cell_set_internal_link:H7e,cell_add_comment:Q7e,sheet_set_array_formula:V7e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function $7e({data:e,fileName:t,sheetName:r="Sheet 1"}){try{const n=Ws.book_new(),a=Ws.json_to_sheet(e);Ws.book_append_sheet(n,a,r),_y(n,`${t}.xlsx`)}catch(n){console.error("Error exporting to Excel:",n),alert("Hubo un error al generar el archivo de Excel. Por favor, intente de nuevo.")}}const z7e=Array.from({length:zs.length},(e,t)=>t+1),nK={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},G7e=e=>{const[t,r]=w.useState([]),[n,a]=w.useState(!0),[s,o]=w.useState(null);w.useEffect(()=>e?HTe(e,f=>{r(f),a(!1)}):void 0,[e]);const l=w.useCallback(async d=>{try{return o(null),await MTe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=w.useCallback(async d=>{try{o(null),await UTe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=w.useCallback(async d=>{try{return o(null),d.trim()?await VTe(e,d):t}catch(f){return o(f instanceof Error?f.message:"Error en la bsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:l,remove:c,search:u}},q7e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!0);w.useEffect(()=>QTe(o=>{t(o),n(!1)}),[]);const a=w.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Jv=({label:e,icon:t,children:r})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),i.jsxs("div",{className:"relative",children:[t&&i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),K7e="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",W7e="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",X7e="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",Sm=({title:e,value:t,icon:r})=>i.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),i.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),Y7e=({data:e,title:t,period:r})=>{const n=Math.max(1,...e.map(s=>s.value)),a=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[i.jsx(Dl,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:t||`Reemplazos / Inasistencias por curso (${r==="month"?"mes":"total"})`})]}),e.length===0?i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["No hay registros ",r==="month"?"este mes":"en el perodo seleccionado","."]}):i.jsx("div",{className:"grid gap-3",children:e.map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${a[o%a.length]}`,style:{width:`${s.value/n*100}%`}})})]},s.label))})]})},A6=({title:e,data:t,icon:r})=>{const n=Math.max(1,...t.map(s=>s.value)),a=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r,i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:e})]}),t.length===0?i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros para mostrar."}):i.jsx("div",{className:"grid gap-3",children:t.slice(0,5).map((s,o)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:s.label}),i.jsx("span",{children:s.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${a[o%a.length]}`,style:{width:`${s.value/n*100}%`}})})]},s.label))})]})},J7e=({reemplazos:e,period:t})=>{const r=w.useMemo(()=>{if(t==="month"){const a=new Date,s=a.getMonth(),o=a.getFullYear();return(e||[]).filter(l=>{if(!l.diaAusencia)return!1;const c=new Date(l.diaAusencia+"T00:00:00");return c.getMonth()===s&&c.getFullYear()===o})}return e},[e,t]),n=w.useMemo(()=>{const a=r.length,s=r.filter(u=>u.resultado==="Hora realizada").length,o=a-s,l=a>0?s/a*100:0,c=u=>Object.entries(r.reduce((d,f)=>{const A=f[u];return A&&(d[A]=(d[A]||0)+1),d},{})).map(([d,f])=>({label:d,value:f})).sort((d,f)=>f.value-d.value);return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:o,porcentajeRealizadas:l,setAusentes:new Set(r.map(u=>u.docenteAusente).filter(Boolean)),setReemplazan:new Set(r.map(u=>u.docenteReemplazante).filter(Boolean)),setCursos:new Set(r.map(u=>u.curso).filter(Boolean)),setAsigAusentes:new Set(r.map(u=>u.asignaturaAusente).filter(Boolean)),ausenciasPorProfesor:c("docenteAusente"),reemplazosPorProfesor:c("docenteReemplazante"),ausenciasPorAsignatura:c("asignaturaAusente")}},[r]);return n?i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(Sm,{title:"Total Reemplazos",value:n.totalReemplazos,icon:i.jsx(Y5e,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Horas Realizadas",value:n.horasRealizadas,icon:i.jsx(va,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Horas Cubiertas",value:n.horasCubiertas,icon:i.jsx(y2,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Efectividad",value:`${n.porcentajeRealizadas.toFixed(1)}%`,icon:i.jsx(a3e,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(Sm,{title:"Profesores ausentes (nicos)",value:n.setAusentes.size,icon:i.jsx(LG,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Reemplazantes (nicos)",value:n.setReemplazan.size,icon:i.jsx(V5,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Cursos (nicos)",value:n.setCursos.size,icon:i.jsx(Ys,{className:"h-6 w-6"})}),i.jsx(Sm,{title:"Asignaturas ausentes (nicas)",value:n.setAsigAusentes.size,icon:i.jsx(ys,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsx(A6,{title:`Profesores con ms ausencias (${t==="month"?"mes":"total"})`,data:n.ausenciasPorProfesor,icon:i.jsx(LG,{className:"h-5 w-5 text-slate-400"})}),i.jsx(A6,{title:`Profesores que ms reemplazan (${t==="month"?"mes":"total"})`,data:n.reemplazosPorProfesor,icon:i.jsx(V5,{className:"h-5 w-5 text-slate-400"})})]}),i.jsx("div",{className:"grid gap-4",children:i.jsx(A6,{title:`Asignaturas con ms ausencias (${t==="month"?"mes":"total"})`,data:n.ausenciasPorAsignatura,icon:i.jsx(ys,{className:"h-5 w-5 text-slate-400"})})})]}):i.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[i.jsx(ks,{className:"h-5 w-5 animate-spin"}),"Calculando estadsticas"]})})},Z7e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:o,error:l}=G7e(t),{profesorNames:c,loading:u}=q7e(),[d,f]=w.useState(nK),[A,m]=w.useState(""),[g,x]=w.useState([]),[v,y]=w.useState(null),[N,C]=w.useState(!1),[_,j]=w.useState(!1),[I,T]=w.useState("month"),[k,B]=w.useState(null);w.useEffect(()=>{(async()=>{if(!A.trim()){x(r);return}j(!0);try{const Z=await s(A);x(Z)}finally{j(!1)}})()},[r,A,s]);const M=w.useMemo(()=>{let W=[...g];return k!==null&&W.sort((Z,V)=>{const Y=k.key,R=Z[Y],O=V[Y];if(R==null)return 1;if(O==null)return-1;let K=0;if(Y==="bloquesAfectados"){const J=R,ce=O;J.length<ce.length?K=-1:J.length>ce.length&&(K=1)}else{const J=String(R),ce=String(O);K=J.localeCompare(ce,"es",{numeric:!0})}return k.direction==="ascending"?K:-K}),W},[g,k]),P=W=>{let Z="ascending";k&&k.key===W&&k.direction==="ascending"&&(Z="descending"),B({key:W,direction:Z})},S=w.useCallback(W=>{const{name:Z,value:V}=W.target;f(Y=>({...Y,[Z]:V}))},[]),L=w.useCallback(W=>{f(Z=>{const Y=Z.bloquesAfectados.includes(W)?Z.bloquesAfectados.filter(R=>R!==W):[...Z.bloquesAfectados,W].sort((R,O)=>R-O);return{...Z,bloquesAfectados:Y}})},[]),U=w.useCallback(async W=>{W.preventDefault(),y(null),C(!0);const{docenteAusente:Z,asignaturaAusente:V,curso:Y,diaAusencia:R,bloquesAfectados:O,docenteReemplazante:K,asignaturaReemplazante:J}=d;if(!Z||!V||!Y||!R||!K||!J||O.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),C(!1);return}if(Z===K){y("El docente ausente y el reemplazante no pueden ser la misma persona."),C(!1);return}try{const ce=V.trim().toLowerCase()===J.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",oe={...d,resultado:ce};await n(oe),f(nK);const re=document.createElement("div");re.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",re.textContent=ce==="Hora realizada"?" Reemplazo registrado  Hora realizada":" Reemplazo registrado  Hora cubierta, no realizada",document.body.appendChild(re),setTimeout(()=>{document.body.contains(re)&&document.body.removeChild(re)},2500)}catch(ce){console.error(ce),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{C(!1)}},[d,n]),q=w.useCallback(async W=>{if(window.confirm("Eliminar este registro?"))try{await a(W)}catch(Z){console.error(Z),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),H=w.useMemo(()=>{const W=I==="month"?r.filter(V=>{if(!V.diaAusencia)return!1;const Y=new Date(V.diaAusencia+"T00:00:00"),R=new Date;return Y.getMonth()===R.getMonth()&&Y.getFullYear()===R.getFullYear()}):r,Z={};for(const V of W){const Y=V.curso||"Sin curso";Z[Y]=(Z[Y]||0)+1}return Object.entries(Z).sort(([V],[Y])=>V.localeCompare(Y,"es")).map(([V,Y])=>({label:V,value:Y}))},[r,I]),z="w-full rounded-lg border bg-white pl-10 pr-4 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!(e!=null&&e.id)&&!(e!=null&&e.email)?i.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadsticas"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando datos para: ",I==="month"?"Mes Actual":"Total"]})]}),i.jsxs("div",{className:"flex items-center rounded-lg bg-slate-100 p-1 dark:bg-slate-700",children:[i.jsx("button",{onClick:()=>T("month"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${I==="month"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Mes"}),i.jsx("button",{onClick:()=>T("total"),className:`px-3 py-1 text-sm font-semibold rounded-md transition-colors ${I==="total"?"bg-white text-slate-800 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-600 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white"}`,children:"Total"})]})]}),i.jsx(J7e,{reemplazos:r,period:I})]}),i.jsx(Y7e,{data:H,title:`Reemplazos / Inasistencias por curso (${I==="month"?"mes":"total"})`,period:I}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[i.jsx(ks,{className:"h-5 w-5 animate-spin"})," Cargando profesores"]}):i.jsxs("form",{onSubmit:U,className:"space-y-8",children:[i.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ys,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),i.jsx(Jv,{label:"Nombre",icon:i.jsx(wA,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(W=>i.jsx("option",{value:W,children:W},W))]})}),i.jsx(Jv,{label:"Asignatura",icon:i.jsx(ys,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),xa.map(W=>i.jsx("option",{value:W,children:W},W))]})}),i.jsx(Jv,{label:"Curso",icon:i.jsx(Ys,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"curso",value:d.curso,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),Sa.map(W=>i.jsx("option",{value:W,children:W},W))]})}),i.jsx(Jv,{label:"Da de ausencia",icon:i.jsx(Yo,{className:"h-5 w-5"}),children:i.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:S,className:z,required:!0,disabled:N})}),i.jsxs("div",{children:[i.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[i.jsx(Dc,{className:"h-5 w-5 text-slate-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),i.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:z7e.map(W=>{const Z=d.bloquesAfectados.includes(W);return i.jsx("button",{type:"button",onClick:()=>L(W),disabled:N,className:`${K7e} ${Z?W7e:X7e}`,"aria-pressed":Z,children:W},W)})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ys,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),i.jsx(Jv,{label:"Nombre",icon:i.jsx(wA,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(W=>i.jsx("option",{value:W,children:W},W))]})}),i.jsx(Jv,{label:"Asignatura",icon:i.jsx(ys,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:S,className:z,required:!0,disabled:N,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),xa.map(W=>i.jsx("option",{value:W,children:W},W))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&i.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[i.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(va,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&i.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:N||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:N?i.jsxs(i.Fragment,{children:[i.jsx(ks,{className:"h-4 w-4 animate-spin"})," Registrando"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ml,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Mostrando ",M.length," de ",r.length," registros."]})]}),i.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-2",children:[i.jsxs("div",{className:"relative w-full max-w-md",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:_?i.jsx(ks,{className:"h-5 w-5 animate-spin"}):i.jsx(Cy,{className:"h-5 w-5"})}),i.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)",value:A,onChange:W=>m(W.target.value),className:z+" pl-10",disabled:_})]}),i.jsxs("button",{onClick:()=>$7e({data:M.map(W=>({Fecha:W.diaAusencia,Curso:W.curso,"Docente Ausente":W.docenteAusente,"Asignatura Ausente":W.asignaturaAusente,"Docente Reemplazante":W.docenteReemplazante,"Asignatura Reemplazante":W.asignaturaReemplazante,"Bloques Afectados":W.bloquesAfectados.join(", "),Resultado:W.resultado})),fileName:`Historial_Reemplazos_${new Date().toISOString().split("T")[0]}`,sheetName:"Reemplazos"}),disabled:M.length===0,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-50",title:"Descargar datos filtrados a Excel",children:[i.jsx(r4e,{className:"h-4 w-4"}),i.jsx("span",{children:"Excel"})]})]})]}),o?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[i.jsx(ks,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos"]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[[{label:"Fecha",key:"diaAusencia"},{label:"Curso",key:"curso"},{label:"Docente Ausente",key:"docenteAusente"},{label:"Docente Reemplazante",key:"docenteReemplazante"},{label:"Bloques",key:"bloquesAfectados"},{label:"Resultado",key:"resultado"}].map(W=>i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:i.jsxs("button",{onClick:()=>P(W.key),className:"flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-200",children:[W.label,i.jsx(q5e,{className:"h-3 w-3"})]})},W.key)),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:M.length>0?M.map(W=>i.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(W.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:W.curso}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[W.docenteAusente,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:W.asignaturaAusente})]}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[W.docenteReemplazante,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:W.asignaturaReemplazante})]}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:W.bloquesAfectados.join(", ")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${W.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(va,{className:"h-4 w-4"}),W.resultado]})}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsx("button",{onClick:()=>q(W.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:N,children:i.jsx(Qn,{className:"h-4 w-4"})})})]},W.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:A?"No se encontraron resultados para tu bsqueda.":"An no hay registros."})})})]}),M.length>0&&!A&&i.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los ltimos ",M.length," registros"]})]})]})]})},eUe=e=>{console.log(" Iniciando suscripcin a todos los reemplazos...");try{const t=pt(xr,"reemplazos"),r=Lt(t,tr("fecha","desc"));return hr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar reemplazos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a reemplazos:",t),t}},tUe=e=>{console.log(" Iniciando suscripcin a todos los acompaamientos...");try{const t=pt(xr,"acompanamientos"),r=Lt(t,tr("fecha","desc"));return hr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Acompaamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar acompaamientos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a acompaamientos:",t),t}},rUe=e=>{console.log(" Iniciando suscripcin a todos los eventos del calendario...");try{const t=pt(xr,"calendar_events"),r=Lt(t,tr("date","asc"));return hr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a eventos del calendario:",t),t}},xh=({title:e,value:t,description:r,isLoading:n=!1})=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Sg=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=w.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),o=w.useMemo(()=>Math.max(...s,1),[s]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):i.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const u=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(l.value)})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/o*100}%`}})})]},l.label+c)}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},nUe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null);return w.useEffect(()=>{console.log(" Iniciando carga de datos del dashboard...");let d=0;const f=3,A=()=>{d++,d>=f&&(l(!1),console.log(" Todos los datos del dashboard cargados"))};try{const m=eUe(v=>{t(v),A()}),g=tUe(v=>{n(v),A()}),x=rUe(v=>{s(v),A()});return()=>{m(),g(),x()}}catch(m){console.error(" Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:o,error:c}},aUe=({currentUser:e})=>{var f,A;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log(" Dashboard - currentUser completo:",e),console.log(" Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log(" Dashboard - Verificacin de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log(" Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log(" Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log(" Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - Comparacin con trim:",((A=e==null?void 0:e.profile)==null?void 0:A.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=nUe(),[o,l]=w.useState(Y2);if(console.log(" Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),w.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):Y2)}catch(m){console.error("Error al leer rbrica personalizada",m),l(Y2)}},[]),console.log(" Dashboard - Verificando permisos..."),console.log(" Dashboard - currentUser existe:",!!e),console.log(" Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - comparacin exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log(" Dashboard - currentUser es null/undefined"),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log(" Dashboard - Perfil no autorizado:",e.profile),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard est disponible solo para usuarios con perfil de Subdireccin."}),i.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[i.jsx("p",{children:i.jsx("strong",{children:"Debug Info:"})}),i.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),i.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),i.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log(" Dashboard - Permisos verificados correctamente"),s)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),i.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Pgina"})]});const c=w.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(j=>j.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(j,I)=>j.reduce((T,k)=>{const B=k[I];return typeof B=="string"&&(T[B]=(T[B]||0)+1),T},{}),N=y(t,"docenteAusente"),C=y(t,"docenteReemplazante"),_=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(N).map(([j,I])=>({label:j,value:I})),reemplazosPorDocente:Object.entries(C).map(([j,I])=>({label:j,value:I})),inasistenciasPorCurso:Object.entries(_).map(([j,I])=>({label:j,value:I})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=w.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;o.forEach(I=>{I.criteria.forEach(T=>{g.set(T.name,I.domain)})});let x=0,v=0;const y={},N={};r.forEach(I=>{y[I.docente]||(y[I.docente]={total:0,count:0}),Object.entries(I.rubricaResultados).forEach(([T,k])=>{x+=k,v++,y[I.docente].total+=k,y[I.docente].count++;const B=g.get(T);B&&(N[B]||(N[B]={total:0,count:0}),N[B].total+=k,N[B].count++)})});const C=v>0?(x/v).toFixed(2):"N/A",_=Object.entries(y).map(([I,T])=>({label:I,value:T.count>0?(T.total/T.count).toFixed(2):0})),j=Object.entries(N).map(([I,T])=>({label:I,value:T.count>0?(T.total/T.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:C,desempenoPorDocente:_,desempenoPorDominio:j}},[r,o]),d=w.useMemo(()=>{const m={[vn.EVALUACION]:0,[vn.ACTO]:0,[vn.ACTIVIDAD_FOCALIZADA]:0,[vn.SALIDA_PEDAGOGICA]:0};for(const x of n)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:o1[x].label,value:v}));return{totalEvaluaciones:m[vn.EVALUACION],totalActos:m[vn.ACTO],totalActividadesFocalizadas:m[vn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[vn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdireccin"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"An no hay datos para mostrar. Comience por aadir registros en los mdulos correspondientes."}),i.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[i.jsx("p",{children:" Mdulo de Inasistencias y Reemplazos"}),i.jsx("p",{children:" Mdulo de Acompaamiento Docente"}),i.jsx("p",{children:" Calendario Acadmico"})]})]}):i.jsxs("div",{className:"space-y-12 animate-fade-in",children:[i.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdireccin"}),i.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),i.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["ltima actualizacin: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Inasistencias y Reemplazos"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(xh,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),i.jsx(xh,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),i.jsx(xh,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),i.jsx(xh,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(Sg,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),i.jsx(Sg,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),i.jsx(Sg,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),i.jsx(Sg,{title:"Distribucin de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Acompaamiento Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(xh,{title:"Total Acompaamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),i.jsx(xh,{title:"Promedio General",value:u.promedioGeneral,description:"Calificacin promedio (1-4)",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(Sg,{title:"Desempeo Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a}),i.jsx(Sg,{title:"Desempeo Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a})]})]}),n.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Resumen del Calendario Acadmico"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(xh,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),i.jsx(xh,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),i.jsx(xh,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),i.jsx(xh,{title:"Salidas Pedaggicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(Sg,{title:"Distribucin de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Prximos Eventos"}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return i.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin ttulo"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&i.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[" ",m.ubicacion]})]}),i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=o1[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=o1[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos prximos programados"})]})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:" Resumen Ejecutivo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),i.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[i.jsx("p",{children:"Dashboard de Subdireccin - Sistema de Gestin Pedaggica"}),i.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},QF="carga_horaria_asignaciones",Fce="usuarios",sUe=e=>{const t=e.data();return{id:e.id,...t}},iUe=e=>{const t=Lt(pt(dt,Fce),ur("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),tr("nombreCompleto","asc"));return hr(t,n=>{const a=n.docs.map(s=>{const o=s.data();return{id:s.id,nombre:o.nombreCompleto||o.nombre||o.email||"Sin nombre",departamento:o.departamento||"General",horasContrato:o.horasContrato||44,perfil:o.profile||"PROFESORADO",email:o.email}});e(a)},n=>{console.error("Error al suscribirse a los docentes:",n),e([])})},oUe=async e=>{try{return(await dn(pt(dt,Fce),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:Xn()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},lUe=e=>{const t=Lt(pt(dt,QF),tr("docenteNombre","asc"));return hr(t,n=>{const a=n.docs.map(s=>sUe(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},cUe=async(e,t=!1)=>{try{if(t){const a=(await Rr(pt(dt,QF))).docs.map(s=>fa(s.ref));await Promise.all(a),console.log(`Se eliminaron ${a.length} asignaciones existentes`)}const r=e.map(n=>dn(pt(dt,QF),{...n,createdAt:Xn(),updatedAt:Xn()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},a_=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},E2=e=>{const t=a_(e);return e-t},FS=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),Rce=(e,t)=>{const r=a_(e.horasContrato),n=E2(e.horasContrato),a=t.filter(m=>m.docenteId===e.id),s=a.reduce((m,g)=>m+FS(g.horasPorCurso),0),o=a.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=s+o,c=0,u=r-l,d=n-c,f=[],A=[];return l>r&&f.push(`Excede horas lectivas: ${l}/${r}`),c>n&&f.push(`Excede horas no lectivas: ${c}/${n}`),l<r&&l>0&&A.push(`Faltan ${u} horas lectivas`),{HA:r,HB:n,sumCursos:s,sumFunciones:c,sumFuncionesLectivas:o,totalHorasLectivas:l,restantesHA:u,restantesHB:d,horasContrato:e.horasContrato,valido:f.length===0,warnings:A,errors:f}},uUe=(e,t)=>{const r=Rce(e,t),n=[];return r.errors.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${a}`})}),r.warnings.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${a}`})}),n},dUe=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}${t[2].toUpperCase()}`:e},Lce="horarios_generados",fUe=async e=>{try{const t=er(dt,Lce,"global");await yi(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},Mce=e=>{const t=er(dt,Lce,"global");return hr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})};var aK;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(aK||(aK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sK;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(sK||(sK={}));var iK;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(iK||(iK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK=["user","model","function","system"];var lK;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(lK||(lK={}));var cK;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(cK||(cK={}));var uK;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(uK||(uK={}));var dK;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(dK||(dK={}));var iN;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(iN||(iN={}));var fK;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(fK||(fK={}));var hK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(hK||(hK={}));var AK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(AK||(AK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Zv extends Bl{constructor(t,r){super(t),this.response=r}}class Uce extends Bl{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class Ap extends Bl{}class Hce extends Bl{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hUe="https://generativelanguage.googleapis.com",AUe="v1beta",mUe="0.24.1",pUe="genai-js";var Qx;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Qx||(Qx={}));class gUe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||AUe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||hUe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function xUe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${pUe}/${mUe}`),t.join(" ")}async function vUe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",xUe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new Ap(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new Ap(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Ap(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function bUe(e,t,r,n,a,s){const o=new gUe(e,t,r,n,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},CUe(s)),{method:"POST",headers:await vUe(o),body:a})}}async function oE(e,t,r,n,a,s={},o=fetch){const{url:l,fetchOptions:c}=await bUe(e,t,r,n,a,s);return yUe(l,c,o)}async function yUe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){wUe(a,e)}return n.ok||await NUe(n,e),n}function wUe(e,t){let r=e;throw r.name==="AbortError"?(r=new Hce(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof Uce||e instanceof Ap||(r=new Bl(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function NUe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new Uce(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function CUe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),RS(e.candidates[0]))throw new Zv(`${Hm(e)}`,e);return EUe(e)}else if(e.promptFeedback)throw new Zv(`Text not available. ${Hm(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),RS(e.candidates[0]))throw new Zv(`${Hm(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),mK(e)[0]}else if(e.promptFeedback)throw new Zv(`Function call not available. ${Hm(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),RS(e.candidates[0]))throw new Zv(`${Hm(e)}`,e);return mK(e)}else if(e.promptFeedback)throw new Zv(`Function call not available. ${Hm(e)}`,e)},e}function EUe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function mK(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const jUe=[iN.RECITATION,iN.SAFETY,iN.LANGUAGE];function RS(e){return!!e.finishReason&&jUe.includes(e.finishReason)}function Hm(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];RS(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function sC(e){return this instanceof sC?(this.v=e,this):new sC(e)}function kUe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(A){n[A]&&(a[A]=function(m){return new Promise(function(g,x){s.push([A,m,g,x])>1||l(A,m)})})}function l(A,m){try{c(n[A](m))}catch(g){f(s[0][3],g)}}function c(A){A.value instanceof sC?Promise.resolve(A.value.v).then(u,d):f(s[0][2],A)}function u(A){l("next",A)}function d(A){l("throw",A)}function f(A,m){A(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pK=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function SUe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=BUe(t),[n,a]=r.tee();return{stream:TUe(n),response:_Ue(a)}}async function _Ue(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return M7(IUe(t));t.push(a)}}function TUe(e){return kUe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield sC(r.read());if(a)break;yield yield sC(M7(n))}})}function BUe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:o,done:l})=>{if(l){if(a.trim()){n.error(new Bl("Failed to parse stream"));return}n.close();return}a+=o;let c=a.match(pK),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new Bl(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(pK)}return s()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new Hce("Request aborted when reading from the stream"):l=new Bl("Error reading from the stream"),l})}}})}function IUe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const o={};for(const l of s.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),r.candidates[a].content.parts.push(o)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qce(e,t,r,n){const a=await oE(t,Qx.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return SUe(a)}async function Vce(e,t,r,n){const s=await(await oE(t,Qx.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:M7(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ce(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function iC(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return DUe(t)}function DUe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new Bl("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Bl("No content is provided for sending chat message.");return n?t:r}function OUe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new Ap("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=iC(e);n.contents=[s]}return{generateContentRequest:n}}function gK(e){let t;return e.contents?t=e:t={contents:[iC(e)]},e.systemInstruction&&(t.systemInstruction=$ce(e.systemInstruction)),t}function PUe(e){return typeof e=="string"||Array.isArray(e)?{content:iC(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],FUe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function RUe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new Bl(`First content should be with role 'user', got ${n}`);if(!oK.includes(n))throw new Bl(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(oK)}`);if(!Array.isArray(a))throw new Bl("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Bl("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of a)for(const c of xK)c in l&&(s[c]+=1);const o=FUe[n];for(const l of xK)if(!o.includes(l)&&s[l]>0)throw new Bl(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function vK(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK="SILENT_ERROR";class LUe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(RUe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=iC(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let A;return this._sendPromise=this._sendPromise.then(()=>Vce(this._apiKey,this.model,d,f)).then(m=>{var g;if(vK(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=Hm(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}A=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,A}async sendMessageStream(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=iC(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),A=Qce(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>A).catch(m=>{throw new Error(bK)}).then(m=>m.response).then(m=>{if(vK(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=Hm(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==bK&&console.error(m)}),A}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MUe(e,t,r,n){return(await oE(t,Qx.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UUe(e,t,r,n){return(await oE(t,Qx.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function HUe(e,t,r,n){const a=r.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await oE(t,Qx.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=$ce(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=gK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Vce(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=gK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Qce(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new LUe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=OUe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return MUe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=PUe(t),a=Object.assign(Object.assign({},this._requestOptions),r);return UUe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return HUe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Bl("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new yK(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new Ap("Cached content must contain a `name` field.");if(!t.model)throw new Ap("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const o of a)if(r!=null&&r[o]&&t[o]&&(r==null?void 0:r[o])!==t[o]){if(o==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new Ap(`Different value for "${o}" specified in modelParams (${r[o]}) and cachedContent (${t[o]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new yK(this.apiKey,s,n)}}const QUe=[{model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}},{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}}],zce=()=>(console.warn("No se encontr la API key de Gemini"),null);async function VUe(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function oC(){const e=zce();if(!e)return null;for(const t of QUe){const r=await VUe(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontr ningn modelo de Gemini disponible"),null}function Gce(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function $Ue(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function zUe(e,t=3){var n;const r=await oC();if(!r)return m6(e,t);try{const a=`Genera ${t} preguntas de seleccin mltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "Pregunta 1?",
          "opciones": ["Opcin 1", "Opcin 2", "Opcin 3", "Opcin 4"]
        }
      ]
    }`,o=(await r.generateContent(a)).response.text(),l=Gce(o);return(n=l==null?void 0:l.preguntas)!=null&&n.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",o),m6(e,t))}catch(a){return console.error("Error al generar preguntas:",a),m6(e,t)}}async function GUe(e,t=30){var n;const r=await oC();if(!r)return p6(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos ms relevantes.`,l=(await r.generateContent(s)).response.text(),c=Gce(l);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),p6(e))}catch(a){return console.error("Error al analizar respuestas:",a),p6(e)}}function m6(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:$Ue(r).slice(0,4)}))}function p6(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}async function qUe(){const e=zce();if(!e)return null;const t={model:"gemini-2.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}};try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),console.log(`Usando modelo optimizado: ${t.model}`),r}catch(r){return console.warn("Modelo Pro no disponible, usando fallback:",r),oC()}}async function U7(e,t=2,r=!0,n="General"){var d,f;const a=e.substring(0,50).replace(/\n/g," ")+"...";console.log(`Iniciando generacin con IA. Prompt: "${a}"`),console.log(`Configuracin: maxRetries=${t}, useProModel=${r}`);try{const m=await Nl(Ox,"callGeminiGeneric")({prompt:e,module:n});if((d=m==null?void 0:m.data)!=null&&d.success&&typeof m.data.response=="string"&&m.data.response.length>0)return console.log("Respuesta obtenida va Cloud Function (genrica)."),m.data.response;const x=await Nl(Ox,"callGeminiAI")({prompt:e,module:n});if((f=x==null?void 0:x.data)!=null&&f.success&&typeof x.data.response=="string"&&x.data.response.length>0)return console.log("Respuesta obtenida va Cloud Function (secreto en backend)."),x.data.response}catch(A){const m=(A==null?void 0:A.message)||String(A);console.warn("Fallo llamada a Cloud Function callGeminiAI, intentando otras rutas:",m)}let s;try{if(r?(console.log("Intentando usar modelo Pro prioritariamente..."),s=await qUe(),s||(console.warn("Modelo Pro no disponible, intentando fallback a modelos alternativos"),s=await oC())):s=await oC(),!s)throw console.warn("IA en cliente no disponible (sin API key en frontend o sin conectividad). Usar fallback."),new Error("IA_NOT_AVAILABLE")}catch(A){throw console.warn("Inicializacin de IA fallida, continuando con fallback:",A),new Error("IA_NOT_AVAILABLE")}let o=0,l,c="",u=0;for(;o<=t;){try{console.log(`Intento ${o+1}/${t+1} de generacin con IA`);const A=e+`

IMPORTANTE: Devuelve SOLO el JSON estructurado sin comentarios adicionales. El JSON debe ser vlido y parseable.`,m=await s.generateContent(A);if(m!=null&&m.response&&typeof m.response.text=="function"){const g=m.response.text();if(g&&g.length>100){if(console.log(`Respuesta generada exitosamente (${g.length} caracteres)`),g.includes("{")&&g.includes("}")||g.includes("[")&&g.includes("]"))return console.log("La respuesta contiene estructuras JSON"),g;if(console.warn("La respuesta no parece contener JSON vlido"),g.length>u&&(c=g,u=g.length),o===t)return console.log("Usando la mejor respuesta disponible en el ltimo intento"),c}else console.warn("Respuesta de IA demasiado corta, reintentando...")}else if(m){const g=typeof m=="string"?m:JSON.stringify(m);return console.warn("Formato de respuesta inesperado, usando fallback a string"),g}else console.warn("No se recibi respuesta vlida del modelo")}catch(A){console.error(`Error en intento ${o+1}:`,A),l=A,A.message&&(A.message.includes("token")||A.message.includes("length")||A.message.includes("limit"))&&(console.log("Error relacionado con lmites de tokens, intentando simplificar el prompt"),e=e.substring(0,Math.floor(e.length*.75)))}if(o++,o<=t){const A=Math.min(1e3*Math.pow(2,o),8e3);console.log(`Esperando ${A}ms antes de reintentar...`),await new Promise(m=>setTimeout(m,A))}}if(c)return console.log("Devolviendo la mejor respuesta disponible despus de agotar reintentos"),c;throw console.error(`Todos los intentos de generacin fallaron despus de ${t+1} intentos`),l||new Error("No se pudo generar contenido despus de mltiples intentos. Por favor, intente nuevamente.")}const i_=e=>{const[t,r]=e.split(":").map(Number);return t*60+r},KUe=e=>e==="Viernes",wK=(e,t)=>{if(!KUe(e))return!0;const r=zs.find(n=>n.bloque===t);return!!r&&i_(r.fin)<=i_("13:00")},j2=e=>{const t=(e||"").toLowerCase();return["mecnica","mecanica","taller","mquinas","maquinas","automotriz","electromecnica","electromecanica","metal","soldadura","tp"].some(r=>t.includes(r))},zg=e=>{const t=(e||"").toLowerCase();return["lenguaje","matem","historia","ingls","ingles","ciencias","biologa","biologia","qumica","quimica","fsica","fisica","ed. fsica","educacin fsica","ciudadana","ciudadania"].some(r=>t.includes(r))},VF=e=>{const t=(e||"").toLowerCase();return["taller","prctica","practica","laboratorio","mecnica","mecanica","electr","maquin","tp"].some(r=>t.includes(r))},$F=e=>{const t=zs.find(r=>r.bloque===e);return t?i_(t.inicio)>=i_("13:40"):!1};function H7(){const e={};for(const t of Gh){e[t]={};for(const r of zs){const n=String(r.bloque);e[t][n]={}}}return e}function qce(e){const t=[];for(const r of Object.keys(e)){const n=e[r];for(const a of Object.keys(n)){const s=n[a],o=new Map;for(const l of Object.keys(s)){const c=s[l];if(c!=null&&c.profesor){const u=o.get(c.profesor)||[];u.push(l),o.set(c.profesor,u)}}for(const[l,c]of o.entries())c.length>1&&t.push(`Tope docente ${l} el ${r} bloque ${a} en cursos: ${c.join(", ")}`)}}return t}function WUe(e,t){const r=H7();for(const n of e){if(!r[n.dia])continue;const a=String(n.bloque);r[n.dia][a]&&t.includes(n.curso)&&(r[n.dia][a][n.curso]={asignatura:n.asignatura,profesor:n.docente})}return r}function XUe(e,t,r){var d,f,A,m;const n=H7(),a=e.map(g=>({...g})),s={},o={},l=(g,x)=>`${g}|${x}`;for(const g of t)s[g]={};a.sort((g,x)=>x.horas-g.horas);const c=(g,x)=>zs.map(v=>v.bloque).filter(v=>!!n[x][String(v)][g]);for(const g of a){let x=g.horas;e:for(;x>0;){let v=!1;const y=[...Gh].sort((N,C)=>{const _=c(g.curso,N).length;return c(g.curso,C).length-_});for(const N of y)if(!(r.terceroSoloPlanGeneral&&typeof g.curso=="string"&&g.curso.trim().startsWith("3")&&!zg(g.asignatura)))for(let C=0;C<zs.length;C++){const j=zs[C].bloque;if(!wK(N,j)||r.practicasPM&&VF(g.asignatura)&&!$F(j))continue;const I=l(N,j),T=(d=s[g.curso])==null?void 0:d[I],k=(f=o[g.docente])==null?void 0:f[I],B=n[N][String(j)][g.curso];if(!T&&!k&&!B){const M=j2(g.asignatura),P=zg(g.asignatura),S=Math.max(1,Math.min(10,r.maxConsecutivasMecanica??10)),L=Math.max(1,Math.min(3,r.maxConsecutivasPlanGeneral??3)),U=H=>{const z=Z=>H==="mec"?j2(Z):zg(Z);let W=0;for(let Z=C-1;Z>=0;Z--){const V=zs[Z].bloque,Y=n[N][String(V)][g.curso];if(!Y)break;if(z(Y.asignatura))W++;else break}for(let Z=C+1;Z<zs.length;Z++){const V=zs[Z].bloque,Y=n[N][String(V)][g.curso];if(!Y)break;if(z(Y.asignatura))W++;else break}return W};if(M&&U("mec")+1>S||P&&U("pg")+1>L)continue;if(n[N][String(j)][g.curso]={asignatura:g.asignatura,profesor:g.docente},s[g.curso][I]=!0,o[g.docente]=o[g.docente]||{},o[g.docente][I]=!0,x--,v=!0,x===0)break e;const q=zs[C+1];if(q&&wK(N,q.bloque)){const H=l(N,q.bloque),z=n[N][String(q.bloque)][g.curso],W=(A=o[g.docente])==null?void 0:A[H],Z=()=>{if(r.practicasPM&&VF(g.asignatura)&&!$F(q.bloque))return!1;const V=j2(g.asignatura),Y=zg(g.asignatura),R=O=>{const K=ce=>O==="mec"?j2(ce):zg(ce);let J=1;for(let ce=C-1;ce>=0;ce--){const oe=zs[ce].bloque,re=n[N][String(oe)][g.curso];if(!re)break;if(K(re.asignatura))J++;else break}return J++,J};return!(V&&R("mec")>(r.maxConsecutivasMecanica??10)||Y&&R("pg")>(r.maxConsecutivasPlanGeneral??3))};if(x>0&&!((m=s[g.curso])!=null&&m[H])&&!W&&!z&&Z()&&(n[N][String(q.bloque)][g.curso]={asignatura:g.asignatura,profesor:g.docente},s[g.curso][H]=!0,o[g.docente][H]=!0,x--,x===0))break e}}}if(!v)break}}const u=[];for(const g of a){let x=0;for(const y of Gh)for(const N of zs){const C=n[y][String(N.bloque)][g.curso];C&&C.asignatura===g.asignatura&&C.profesor===g.docente&&x++}const v=g.horas-x;v>0&&u.push(`No se pudieron ubicar ${v} bloque(s) para ${g.asignatura} (${g.curso}) con ${g.docente}`)}for(const g of t)for(const x of Gh){const v=zs.map(y=>y.bloque).filter(y=>!!n[x][String(y)][g]);if(v.length>0){const y=Math.min(...v),N=Math.max(...v);for(let C=y;C<=N;C++)if(!n[x][String(C)][g]){u.push(`Ventana detectada en ${g} el ${x} entre bloques ${y}${N}`);break}}}return u.push(...qce(n)),{horarios:n,conflictos:u,fuente:"fallback"}}async function YUe(e,t,r,n){var o,l;const a={maxConsecutivasMecanica:(n==null?void 0:n.maxConsecutivasMecanica)??10,maxConsecutivasPlanGeneral:(n==null?void 0:n.maxConsecutivasPlanGeneral)??3,practicasPM:(n==null?void 0:n.practicasPM)??!1,terceroSoloPlanGeneral:(n==null?void 0:n.terceroSoloPlanGeneral)??!1},s=[];for(const c of e){const u=c.docenteNombre||((o=t.find(d=>d.id===c.docenteId))==null?void 0:o.nombre)||"Docente";for(const[d,f]of Object.entries(c.horasPorCurso||{})){const A=typeof f=="number"?f:0;A>0&&d&&s.push({curso:d,asignatura:c.asignaturaOModulo||"Asignatura",docente:u,horas:A})}}if(s.length===0)return{horarios:H7(),conflictos:[],fuente:"fallback"};try{const c={dias:Gh,bloques:zs,cursos:r,demanda:s},u=`Genera un horario semanal sin topes de profesor entre cursos.
Reglas:
- Un docente no puede estar en ms de un curso en el mismo da y bloque.
- Cada item de demanda representa cuntos bloques deben ubicarse.
- Usa solamente los das y bloques provistos.
- Distribuye equilibradamente a lo largo de la semana evitando ventanas (huecos) y procurando no dejar das completamente vacos por curso.
- El da Viernes no se pueden asignar bloques que terminen despus de las 13:00.
 - Mximo de bloques consecutivos de asignaturas de mecnica: ${a.maxConsecutivasMecanica}.
 - Mximo de bloques consecutivos de asignaturas de plan general: ${a.maxConsecutivasPlanGeneral}.
 - ${a.practicasPM?"Las asignaturas prcticas (taller/prctica/laboratorio/TP) deben ubicarse en horario PM (desde 13:40).":"Preferir, si es posible, las asignaturas prcticas en PM, pero no obligatorio."}
 - ${a.terceroSoloPlanGeneral?"Para cursos de 3 medio (3A, 3B, etc.), solo ubicar asignaturas de plan general.":"Sin restriccin especial para 3 medio."}

Entrada JSON:
${JSON.stringify(c,null,2)}

Devuelve SOLO JSON vlido con el formato:
{
	"sesiones": [
		{ "curso": "1A", "dia": "Lunes", "bloque": 1, "asignatura": "Matemtica", "docente": "Nombre" }
	]
}`,d=await U7(u,2,!0,"Horarios"),f=typeof window<"u"&&typeof localStorage<"u"&&localStorage.getItem("DEBUG_HORARIO_AI")==="1";if(f)try{localStorage.setItem("HORARIO_AI_RAW",typeof d=="string"?d:String(d)),console.debug("[HORARIO_AI] RAW respuesta IA guardada en localStorage.HORARIO_AI_RAW")}catch{}const m=(y=>{let N=(y==null?void 0:y.trim())||"";const C=N.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);if(C&&C[1]&&(N=C[1].trim()),!(N.startsWith("{")&&N.endsWith("}"))){const U=N.indexOf("{"),q=N.lastIndexOf("}");U!==-1&&q!==-1&&q>U&&(N=N.slice(U,q+1))}if(N=N.replace(/[]/g,'"').replace(/[]/g,"'").replace(/\/(\/[^\n]*\n)/g,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/,\s*([}\]])/g,"$1"),f)try{localStorage.setItem("HORARIO_AI_JSON_CANDIDATE",N),console.debug("[HORARIO_AI] JSON candidato guardado en localStorage.HORARIO_AI_JSON_CANDIDATE")}catch{}const _=JSON.parse(N),j=U=>U.normalize("NFD").replace(/[\u0300-\u036f]/g,""),I=U=>{if(!U||typeof U!="string")return null;const q=j(U.toLowerCase().trim());return{lunes:"Lunes",martes:"Martes",miercoles:"Mircoles",jueves:"Jueves",viernes:"Viernes",monday:"Lunes",tuesday:"Martes",wednesday:"Mircoles",thursday:"Jueves",friday:"Viernes",lun:"Lunes",mar:"Martes",mie:"Mircoles",mier:"Mircoles",jue:"Jueves",vie:"Viernes"}[q]||null},T=U=>j(U.toLowerCase().replace(/[]/g,"").replace(/\s+/g,"")),k=new Map;(Array.isArray(r)?r:[]).forEach(U=>k.set(T(String(U)),String(U)));const B=U=>{if(!U||typeof U!="string")return null;let q=U.trim();q=q.replace("",""),q=q.replace(/\s+/g,""),q=q.replace(/\s+/g,q.includes("")?"":" ");const H=T(q);if(k.has(H))return k.get(H);const z=q.match(/(\d{1,2})\s*?\s*([A-Za-z])/);if(z){const W=`${z[1]}${z[2].toUpperCase()}`,Z=T(W);if(k.has(Z))return k.get(Z)}return q},M=new Set(zs.map(U=>U.bloque)),P=new Set(Array.isArray(r)?r:[]),L=(U=>{if(!U)return[];let q=[];Array.isArray(U)?q=U:Array.isArray(U.sesiones)?q=U.sesiones:U.horario&&Array.isArray(U.horario.sesiones)?q=U.horario.sesiones:U.schedule&&Array.isArray(U.schedule.sessions)?q=U.schedule.sessions:Array.isArray(U.clases)?q=U.clases:Array.isArray(U.asignaciones)?q=U.asignaciones:Array.isArray(U.data)?q=U.data:Array.isArray(U.output)?q=U.output:Array.isArray(U.result)&&(q=U.result);const H=[],z=W=>{if(!W||typeof W!="object")return;const Z=B(W.curso||W.cursoId||W.course||W.class||W.grupo),V=I(W.dia||W.da||W.day||W.weekday);let Y=W.bloque??W.block??W.slot??W.periodo??W.period;if(typeof Y=="string"){const K=Y.match(/(\d{1,2})/);K&&(Y=parseInt(K[1],10))}const R=(W.asignatura||W.materia||W.subject||W.asig||"").toString(),O=(W.docente||W.profesor||W.teacher||W.profe||"").toString();!Z||!V||!Y||!M.has(Y)||P.size&&!P.has(Z)||H.push({curso:Z,dia:V,bloque:Y,asignatura:R,docente:O})};if(q.length>0)for(const W of q)z(W);else{if(U.horario&&typeof U.horario=="object")for(const W of Object.keys(U.horario)){const Z=I(W);if(!Z)continue;const V=U.horario[W];if(!(!V||typeof V!="object"))for(const Y of Object.keys(V)){let R=Y;if(typeof R=="string"){const K=R.match(/(\d{1,2})/);K&&(R=parseInt(K[1],10))}if(!M.has(R))continue;const O=V[Y];if(Array.isArray(O))for(const K of O)z({...K||{},dia:Z,bloque:R});else if(O&&typeof O=="object")for(const K of Object.keys(O)){const J=B(K),ce=O[K];ce&&typeof ce=="object"&&z({curso:J,dia:Z,bloque:R,asignatura:ce.asignatura,docente:ce.docente||ce.profesor||ce.teacher})}}}for(const W of Object.keys(U)){const Z=U[W];if(Array.isArray(Z))for(const V of Z)z(V)}}return H})(_);if(f)try{localStorage.setItem("HORARIO_AI_SESIONES_COUNT",String(L.length))}catch{}return{sesiones:L}})(d);if(!((l=m==null?void 0:m.sesiones)!=null&&l.length))throw new Error("Respuesta IA sin sesiones");const g=WUe(m.sesiones,r),x=qce(g),v=[];for(const y of r)for(const N of Gh){let C=0,_=0;for(const j of zs){const I=g[N][String(j.bloque)][y];I&&(j2(I.asignatura)?C++:C=0,zg(I.asignatura)?_++:_=0,C>(a.maxConsecutivasMecanica??10)&&v.push(`Exceso mecnica consecutiva en ${y} ${N}`),_>(a.maxConsecutivasPlanGeneral??3)&&v.push(`Exceso plan general consecutiva en ${y} ${N}`),a.practicasPM&&VF(I.asignatura)&&!$F(j.bloque)&&v.push(`Prctica fuera de PM en ${y} ${N} bloque ${j.bloque}`),a.terceroSoloPlanGeneral&&y.trim().startsWith("3")&&!zg(I.asignatura)&&v.push(`3 medio con asignatura no plan general en ${y} ${N} bloque ${j.bloque}`))}}return{horarios:g,conflictos:[...x,...v],fuente:"IA"}}catch(c){return c instanceof Error&&c.message==="IA_NOT_AVAILABLE"?console.warn("IA no disponible. Generando horario con algoritmo fallback."):console.warn("Falla IA en generacin de horario, usando fallback:",c),XUe(s,r,a)}}const JUe=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,ZUe=()=>{w.useEffect(()=>{const Ae=document.createElement("style");return Ae.innerHTML=JUe,document.head.appendChild(Ae),()=>{document.head.removeChild(Ae)}},[]);const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[o,l]=w.useState(!1),[c,u]=w.useState("docentes"),[d,f]=w.useState([]),[A,m]=w.useState(!1),[g,x]=w.useState(null),[v,y]=w.useState(null),[N,C]=w.useState([]),[_,j]=w.useState(null),[I,T]=w.useState(Sa[0]||""),[k,B]=w.useState(!1),[M,P]=w.useState({maxConsecutivasMecanica:10,maxConsecutivasPlanGeneral:3,practicasPM:!1,terceroSoloPlanGeneral:!1}),[S,L]=w.useState(!1),[U,q]=w.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[H,z]=w.useState("");w.useEffect(()=>iUe(se=>t(se)),[]),w.useEffect(()=>lUe(se=>{const ne=se.map(de=>{let me=de.funcionesLectivas||[];!me.length&&de.funcionesNoLectivas&&de.funcionesNoLectivas.length?me=de.funcionesNoLectivas:!me.length&&de.otraFuncion&&(me=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:de.otraFuncion,horas:parseInt(de.otraFuncion)||0}]);const{funcionesNoLectivas:ge,otraFuncion:Te,...Ve}=de;return{...Ve,funcionesLectivas:me}});n(ne)}),[]),w.useEffect(()=>Mce(se=>{x(se&&Object.keys(se).length>0?se:null)}),[]);const W=w.useMemo(()=>{const Ae={};return e.forEach(se=>{const ne=r.filter(de=>de.docenteId===se.id);Ae[se.id]=Rce(se,ne)}),Ae},[e,r]);w.useEffect(()=>{const Ae=[];e.forEach(se=>Ae.push(...uUe(se,r))),f(Ae)},[e,r]);const Z=w.useMemo(()=>H?e.filter(Ae=>{var se;return Ae.nombre.toLowerCase().includes(H.toLowerCase())||((se=Ae.email)==null?void 0:se.toLowerCase().includes(H.toLowerCase()))}):e,[e,H]),V=w.useMemo(()=>r.filter(se=>{const ne=e.find(de=>de.id===se.docenteId);return!(!ne||a.busqueda&&!ne.nombre.toLowerCase().includes(a.busqueda.toLowerCase())||a.asignatura&&se.asignaturaOModulo!==a.asignatura||a.departamento&&ne.departamento!==a.departamento||a.curso&&!Object.keys(se.horasPorCurso).includes(a.curso))}).sort((se,ne)=>se.docenteId!==ne.docenteId?se.docenteId.localeCompare(ne.docenteId):(se.asignaturaOModulo||"").localeCompare(ne.asignaturaOModulo||"")),[r,e,a]),Y=async()=>{try{if(m(!0),!U.nombre||!U.email){alert("El nombre y email son obligatorios"),m(!1);return}await oUe(U),L(!1),q({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(Ae){console.error(Ae),alert("Error al crear docente")}finally{m(!1)}},R=w.useCallback(()=>{if(e.length===0)return;const Ae={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:xa[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(se=>[...se,Ae])},[e]),O=w.useCallback((Ae,se)=>{const ne=r.filter(ge=>ge.docenteId===Ae).map(ge=>ge.asignaturaOModulo);let de=xa[0];for(const ge of xa)if(!ne.includes(ge)){de=ge;break}const me={id:`asig_${Date.now()}`,docenteId:Ae,docenteNombre:se,asignaturaOModulo:de,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(ge=>[...ge,me])},[r]),K=w.useCallback(Ae=>n(se=>se.filter(ne=>ne.id!==Ae)),[]),J=w.useCallback(Ae=>{n(se=>se.map(ne=>{if(ne.id!==Ae)return ne;const de={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...ne,funcionesLectivas:[...ne.funcionesLectivas||[],de]}}))},[]),ce=w.useCallback((Ae,se,ne,de)=>{n(me=>me.map(ge=>{if(ge.id!==Ae)return ge;const Te=(ge.funcionesLectivas||[]).map(Ve=>Ve.id===se?{...Ve,[ne]:de}:Ve);return{...ge,funcionesLectivas:Te}}))},[]),oe=w.useCallback((Ae,se)=>{n(ne=>ne.map(de=>{if(de.id!==Ae)return de;const me=(de.funcionesLectivas||[]).filter(ge=>ge.id!==se);return{...de,funcionesLectivas:me}}))},[]),re=w.useCallback((Ae,se,ne)=>{n(de=>de.map(me=>{if(me.id!==Ae)return me;const ge={...me,[se]:ne};if(se==="docenteId"){const Te=e.find(Ve=>Ve.id===ne);Te&&(ge.docenteNombre=Te.nombre)}return se==="horasPorCurso"&&(ge.horasXAsig=FS(ne)),ge}))},[e]),ue=w.useCallback((Ae,se,ne)=>{n(de=>de.map(me=>{if(me.id!==Ae)return me;const ge={...me.horasPorCurso};return ne===0?delete ge[se]:ge[se]=ne,{...me,horasPorCurso:ge,horasXAsig:FS(ge)}}))},[]),le=w.useCallback(Ae=>{m(!0);const se=new FileReader;se.onload=ne=>{var de;try{const me=new Uint8Array((de=ne.target)==null?void 0:de.result),ge=Q1(me,{type:"array"}),Te=ge.Sheets["Docentes 2025"]||ge.Sheets[ge.SheetNames[0]],Ve=Ws.sheet_to_json(Te,{header:1});let Xe=-1;for(let Je=0;Je<Ve.length;Je++){const mt=Ve[Je];if(mt&&mt.some(We=>typeof We=="string"&&(We.includes("Docente")||We.includes("ASIGNATURA")||Sa.some(He=>We.includes(He.replace("","")))))){Xe=Je;break}}if(Xe===-1){alert("No se encontr la fila de encabezado en el archivo");return}const Ke=Ve[Xe],Qe=[];for(let Je=Xe+1;Je<Ve.length;Je++){const mt=Ve[Je];if(!mt||mt.length===0)continue;const We=mt[Ke.indexOf("Docente")]||"";if(!We)continue;const He=e.find(et=>et.nombre.toLowerCase().includes(We.toLowerCase()));if(!He)continue;const Tt={};Ke.forEach((et,Ct)=>{if(typeof et=="string"){const St=dUe(et.trim());if(Sa.includes(St)){const ot=parseInt(mt[Ct])||0;ot>0&&(Tt[St]=ot)}}});let Ie=[];const ft=mt[Ke.indexOf("FUNCIONES LECTIVAS")]||mt[Ke.indexOf("FUNCIONES NO LECTIVAS")]||mt[Ke.indexOf("OTRA FUNCIN")]||"";typeof ft=="string"&&ft.includes(":")?Ie=ft.split(",").map(et=>{const[Ct,St]=et.split(":").map(ot=>ot.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Ct,horas:parseInt(St)||0}}):ft&&(Ie=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:ft,horas:0}]);const vt={id:`import_${Date.now()}_${Je}`,docenteId:He.id,docenteNombre:He.nombre,asignaturaOModulo:mt[Ke.indexOf("ASIGNATURA O MDULO")]||"",funcionesLectivas:Ie,horasPorCurso:Tt,horasXAsig:FS(Tt)};Qe.push(vt)}n(Qe),alert(`Se importaron ${Qe.length} asignaciones exitosamente`)}catch(me){console.error("Error al importar:",me),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},se.readAsArrayBuffer(Ae)},[e]),ve=w.useCallback(()=>{const Ae=r.map(de=>{const me=e.find(Xe=>Xe.id===de.docenteId),ge=W[de.docenteId];let Te="";de.funcionesLectivas&&de.funcionesLectivas.length>0?Te=de.funcionesLectivas.map(Xe=>`${Xe.nombre}: ${Xe.horas}h`).join(", "):de.funcionesNoLectivas&&de.funcionesNoLectivas.length>0?Te=de.funcionesNoLectivas.map(Xe=>`${Xe.nombre}: ${Xe.horas}h`).join(", "):de.otraFuncion&&(Te=de.otraFuncion);const Ve={Docente:de.docenteNombre,"ASIGNATURA O MDULO":de.asignaturaOModulo||"","FUNCIONES LECTIVAS":Te,"HORAS X ASIG.":de.horasXAsig||0};return Sa.forEach(Xe=>Ve[Xe]=de.horasPorCurso[Xe]||0),ge&&(Ve["HORAS LECTIVAS (HA)"]=ge.HA,Ve["HORAS NO LECTIVAS (HB)"]=ge.HB,Ve["HORAS CONTRATO"]=(me==null?void 0:me.horasContrato)||0),Ve}),se=Ws.json_to_sheet(Ae),ne=Ws.book_new();Ws.book_append_sheet(ne,se,"Horarios"),_y(ne,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,W]),X=w.useCallback(async()=>{try{m(!0);const Ae=Sa,se=await YUe(r,e,Ae,M);y(se.horarios),C(se.conflictos||[]),j(se.fuente),!I&&Ae.length&&T(Ae[0])}catch(Ae){console.error("Error al generar horario:",Ae),alert("No se pudo generar el horario.")}finally{m(!1)}},[r,e,I,M]),Ee=w.useCallback(async()=>{if(!v){alert("No hay un horario generado para guardar.");return}try{m(!0),await fUe(v),alert("Horario guardado exitosamente"),x(v)}catch(Ae){console.error("Error al guardar horario:",Ae),alert("Error al guardar el horario")}finally{m(!1)}},[v]),Be=w.useCallback(()=>{y(null),C([]),j(null)},[]),je=w.useCallback(async()=>{if(d.filter(se=>se.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const se=[],ne=[];r.forEach(me=>{let ge=me.funcionesLectivas||[];me.funcionesNoLectivas&&me.funcionesNoLectivas.length>0&&ge.length===0?ge=me.funcionesNoLectivas.map(Qe=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Qe.nombre,horas:Qe.horas})):me.otraFuncion&&ge.length===0&&(ge=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:me.otraFuncion,horas:parseInt(me.otraFuncion)||0}]);const{funcionesNoLectivas:Te,otraFuncion:Ve,...Xe}=me,Ke={...Xe,funcionesLectivas:ge};if(me.id.startsWith("asig_")||me.id.startsWith("import_")){const{id:Qe,...Je}=Ke;ne.push(Je)}else se.push(Ke)});const de=[...se.map(({id:me,...ge})=>ge),...ne];await cUe(de,!0),alert("Horarios guardados exitosamente")}catch(se){console.error("Error al guardar horarios:",se),alert("Error al guardar los horarios")}finally{m(!1)}},[d,r]),fe=Ae=>{const se=W[Ae];return se?se.errors.length>0?"red":se.warnings.length>0?"yellow":"green":"gray"},ye=()=>S?i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[i.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[i.jsx(V5,{className:"w-5 h-5"}),"Aadir Nuevo Docente"]}),i.jsx("button",{onClick:()=>L(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:A,children:i.jsx(No,{className:"w-5 h-5"})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:U.nombre,onChange:Ae=>q({...U,nombre:Ae.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"email",value:U.email,onChange:Ae=>q({...U,email:Ae.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:U.departamento,onChange:Ae=>q({...U,departamento:Ae.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemticas, Lenguaje, etc."})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:U.horasContrato,onChange:Ae=>q({...U,horasContrato:parseInt(Ae.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:U.perfil,onChange:Ae=>q({...U,perfil:Ae.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[i.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),i.jsx("option",{value:"SUBDIRECCION",children:"Subdireccin"}),i.jsx("option",{value:"COORDINACION_TP",children:"Coordinacin TP"})]}),i.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:i.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),i.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:A,children:"Cancelar"}),i.jsx("button",{onClick:Y,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:A||!U.nombre||!U.email,children:A?i.jsxs(i.Fragment,{children:[i.jsx(ks,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Guardando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(hoe,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar"})]})})]})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Aoe,{className:"w-3.5 h-3.5"}),i.jsxs("span",{children:["Los campos marcados con ",i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[i.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),i.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[i.jsx(Yo,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),i.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestin de carga horaria docente con validacin 65%/35% y visualizacin en tiempo real"})]}),i.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[i.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[i.jsx(s1,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver estadsticas"})]}),i.jsxs("button",{onClick:je,disabled:d.some(Ae=>Ae.tipo==="error")||A,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[i.jsx(Ml,{className:"w-4 h-4"}),i.jsx("span",{children:A?"Guardando...":"Guardar cambios"})]})]})]})})]}),i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[i.jsx(JC,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[i.jsx("div",{className:"flex-1 md:max-w-xs",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Cy,{className:"text-gray-400 w-4 h-4"})}),i.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:H,onChange:Ae=>z(Ae.target.value)})]})}),i.jsxs("div",{className:"flex gap-3 flex-wrap",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Dh,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:a.curso,onChange:Ae=>s(se=>({...se,curso:Ae.target.value})),children:[i.jsx("option",{value:"",children:"Todos los cursos"}),Sa.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(ys,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:a.asignatura,onChange:Ae=>s(se=>({...se,asignatura:Ae.target.value})),children:[i.jsx("option",{value:"",children:"Todas las asignaturas"}),xa.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("button",{onClick:()=>L(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(V5,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),i.jsxs("button",{onClick:R,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(xi,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),i.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[i.jsx(av,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:Ae=>{var se;return((se=Ae.target.files)==null?void 0:se[0])&&le(Ae.target.files[0])}})]}),i.jsxs("button",{onClick:ve,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(p3,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),i.jsxs("button",{onClick:()=>B(!0),disabled:A||r.length===0,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-cyan-500 to-sky-600 hover:from-cyan-600 hover:to-sky-700 text-white rounded-lg transition-all duration-200 shadow-sm group disabled:opacity-50",title:"Generar horario semanal automticamente (IA)",children:[A?i.jsx(ks,{className:"w-5 h-5 animate-spin"}):i.jsx(zh,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Generar horario (IA)"})]}),i.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(Dl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),i.jsxs("button",{onClick:je,disabled:d.some(Ae=>Ae.tipo==="error")||A,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[A?i.jsx(ks,{className:"w-5 h-5 animate-spin"}):i.jsx(Ml,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:A?"Guardando...":"Guardar"})]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),i.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",d.length,")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(Sh,{className:"w-3 h-3"})," ",d.filter(Ae=>Ae.tipo==="error").length," Errores"]}),i.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(L1,{className:"w-3 h-3"})," ",d.filter(Ae=>Ae.tipo==="warning").length," Advertencias"]})]})]}),i.jsx("div",{className:"p-5",children:i.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map((Ae,se)=>i.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${Ae.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[Ae.tipo==="error"?i.jsx(Sh,{className:"w-5 h-5 shrink-0"}):i.jsx(L1,{className:"w-5 h-5 shrink-0"}),i.jsx("span",{className:"text-sm",children:Ae.mensaje})]},se))})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(F1,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),i.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:i.jsxs("table",{className:"w-full min-w-[1000px]",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),i.jsx("span",{children:"Estado"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Ys,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Docente"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(ys,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Asignatura"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(RG,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Func. Lectivas"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(Dc,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Hrs"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:Sa.length,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[i.jsx(Dh,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Cursos"}),i.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(s1,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"HA/HB"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsx("div",{className:"flex items-center justify-center gap-1.5",children:i.jsx("span",{children:"Acciones"})})})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:V.map((Ae,se)=>{const ne=W[Ae.docenteId],de=fe(Ae.docenteId),me=se===0||V[se-1].docenteId!==Ae.docenteId,ge=se===V.length-1||V[se+1].docenteId!==Ae.docenteId,Te=V.filter(Ke=>Ke.docenteId===Ae.docenteId),Ve=Te.length>1;let Xe="hover:bg-gray-50 dark:hover:bg-gray-750 ";return Ve&&(me?Xe+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":Xe+="bg-blue-50 dark:bg-blue-900/10 ",ge&&(Xe+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),i.jsxs("tr",{className:Xe,children:[i.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${de==="green"?"bg-green-500":de==="yellow"?"bg-yellow-500":de==="red"?"bg-red-500":"bg-gray-500"}`}),Ve&&me&&i.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:Te.length})]})}),i.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!Ve||me?i.jsxs("div",{children:[i.jsx("select",{value:Ae.docenteId,onChange:Ke=>re(Ae.id,"docenteId",Ke.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${Ve?"font-medium":""}`,children:(Z.length>0?Z:e).map(Ke=>i.jsx("option",{value:Ke.id,children:Ke.nombre},Ke.id))}),Ve&&i.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[Te.length," asig."]})]}):i.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:" Mismo"})}),i.jsxs("td",{className:"px-1 py-2",children:[i.jsxs("select",{value:Ae.asignaturaOModulo||"",onChange:Ke=>re(Ae.id,"asignaturaOModulo",Ke.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${Ve?"border-blue-300 dark:border-blue-700":""}`,children:[i.jsx("option",{value:"",children:"Seleccionar..."}),xa.map(Ke=>i.jsx("option",{value:Ke,children:Ke},Ke))]}),Ve&&!me&&i.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),i.jsx("td",{className:"px-1 py-2",children:i.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(Ae.funcionesLectivas||[]).map(Ke=>i.jsxs("div",{className:"flex gap-1 items-center",children:[i.jsx("input",{type:"text",value:Ke.nombre,onChange:Qe=>ce(Ae.id,Ke.id,"nombre",Qe.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),i.jsx("input",{type:"number",value:Ke.horas,onChange:Qe=>ce(Ae.id,Ke.id,"horas",parseInt(Qe.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),i.jsx("button",{onClick:()=>oe(Ae.id,Ke.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar funcin",children:i.jsx(Qn,{className:"w-3 h-3"})})]},Ke.id)),!Ae.funcionesLectivas&&i.jsx("div",{className:"flex gap-1 items-center",children:i.jsx("input",{type:"text",value:Ae.otraFuncion||"",onChange:Ke=>re(Ae.id,"otraFuncion",Ke.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),i.jsxs("button",{onClick:()=>J(Ae.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[i.jsx(xi,{className:"w-3 h-3"})," ",i.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),i.jsx("td",{className:"px-1 py-2 text-center",children:i.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:Ae.horasXAsig||0})}),i.jsx("td",{className:"px-1 py-2",children:i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:Sa.map(Ke=>i.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:Ke}),i.jsx("input",{type:"number",min:0,value:Ae.horasPorCurso[Ke]||"",onChange:Qe=>ue(Ae.id,Ke,parseInt(Qe.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},Ke))})}),i.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:ne&&i.jsxs("div",{className:"space-y-0",children:[i.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",ne.HA," (",ne.restantesHA>=0?"+":"",ne.restantesHA,")"]}),i.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",ne.HB," (",ne.restantesHB>=0?"+":"",ne.restantesHB,")"]})]})}),i.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("button",{onClick:()=>O(Ae.docenteId,Ae.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:i.jsx(xi,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>K(Ae.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignacin",children:i.jsx(Qn,{className:"w-3.5 h-3.5"})})]})})]},Ae.id)})})]})})]}),o&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),i.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(No,{})})]}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"flex -mb-px px-6",children:[i.jsx("button",{onClick:()=>u("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),i.jsx("button",{onClick:()=>u("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),i.jsx("button",{onClick:()=>u("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Funcin"}),i.jsx("button",{onClick:()=>u("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),i.jsx("div",{className:"grid gap-4",children:e.map(Ae=>{const se=W[Ae.id],ne=r.filter(de=>de.docenteId===Ae.id);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:Ae.nombre}),i.jsx("div",{className:`w-3 h-3 rounded-full ${fe(Ae.id)==="green"?"bg-green-500":fe(Ae.id)==="yellow"?"bg-yellow-500":fe(Ae.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),se&&i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[Ae.horasContrato,"h"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),i.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[se.sumCursos,"/",se.HA]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),i.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[se.sumFunciones,"/",se.HB]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),i.jsx("span",{className:"ml-1 font-medium",children:ne.length})]})]}),ne.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ne.map(de=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:de.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[de.horasXAsig||0,"h"]})]},de.id))})]}),i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribucin por curso:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:Sa.filter(de=>ne.some(me=>me.horasPorCurso[de])).map(de=>{const me=ne.reduce((ge,Te)=>ge+(Te.horasPorCurso[de]||0),0);return i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:de}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[me,"h"]})]},de)})})]})]}),ne.some(de=>(de.funcionesLectivas||[]).length>0)&&i.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:ne.flatMap(de=>(de.funcionesLectivas||[]).map(me=>({id:`${de.id}_${me.id}`,nombre:me.nombre,horas:me.horas}))).map(de=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:de.nombre||"Sin nombre"}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[de.horas,"h"]})]},de.id))})]})]})]},Ae.id)})})]}),c==="cursos"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),i.jsx("div",{className:"grid gap-4",children:Sa.filter(Ae=>r.some(se=>se.horasPorCurso[Ae])).map(Ae=>{const se=r.filter(me=>me.horasPorCurso[Ae]),ne=[];se.forEach(me=>{const ge=ne.findIndex(Te=>Te.id===me.docenteId);ge===-1?ne.push({id:me.docenteId,nombre:me.docenteNombre,asignaciones:[me]}):ne[ge].asignaciones.push(me)});const de=se.reduce((me,ge)=>me+(ge.horasPorCurso[Ae]||0),0);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:Ae}),i.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",de,"h"]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("div",{className:"grid gap-2",children:ne.map(me=>i.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:me.nombre}),i.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[me.asignaciones.reduce((ge,Te)=>ge+(Te.horasPorCurso[Ae]||0),0),"h"]})]}),i.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:me.asignaciones.filter(ge=>ge.horasPorCurso[Ae]).map(ge=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:ge.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{children:[ge.horasPorCurso[Ae],"h"]})]},ge.id))})]},me.id))})]})]},Ae)})})]}),c==="funciones"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const Ae=[];return r.forEach(se=>{(se.funcionesLectivas||[]).forEach(ne=>{if(!ne.nombre)return;const de=Ae.find(me=>me.nombre===ne.nombre);if(!de)Ae.push({nombre:ne.nombre,docentes:[{id:se.docenteId,nombre:se.docenteNombre,horas:ne.horas}],totalHoras:ne.horas});else{const me=de.docentes.find(ge=>ge.id===se.docenteId);me?me.horas+=ne.horas:de.docentes.push({id:se.docenteId,nombre:se.docenteNombre,horas:ne.horas}),de.totalHoras+=ne.horas}})}),Ae.sort((se,ne)=>ne.totalHoras-se.totalHoras),Ae.length===0?i.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):i.jsx("div",{className:"grid gap-4",children:Ae.map((se,ne)=>i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:se.nombre}),i.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",se.totalHoras,"h"]})]}),i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:se.docentes.sort((de,me)=>me.horas-de.horas).map(de=>i.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[i.jsx("span",{children:de.nombre}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[de.horas,"h"]})]},de.id))})]},ne))})})()]}),c==="totales"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let Ae=0;return r.forEach(se=>{se.horasPorCurso&&Object.values(se.horasPorCurso).forEach(ne=>typeof ne=="number"&&(Ae+=ne)),(se.funcionesLectivas||[]).forEach(ne=>typeof ne.horas=="number"&&(Ae+=ne.horas))}),Ae})()}),i.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let Ae=0;return e.forEach(se=>{const ne=typeof se.horasContrato=="number"?se.horasContrato:0;Ae+=E2(ne)}),Ae})()}),i.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((se,ne)=>{const de=typeof ne.horasContrato=="number"?ne.horasContrato:0;return se+de},0)}),i.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribucin de Horas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribucin Porcentual"}),(()=>{let Ae=0,se=0;r.forEach(ge=>{ge.horasPorCurso&&Object.values(ge.horasPorCurso).forEach(Te=>typeof Te=="number"&&(Ae+=Te)),(ge.funcionesLectivas||[]).forEach(Te=>typeof Te.horas=="number"&&(Ae+=Te.horas))}),e.forEach(ge=>{const Te=typeof ge.horasContrato=="number"?ge.horasContrato:0;se+=E2(Te)});const ne=Ae+se,de=ne>0?Math.round(Ae/ne*100):0,me=ne>0?Math.round(se/ne*100):0;return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),i.jsxs("span",{className:"font-bold",children:[de,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${de}%`}})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),i.jsxs("span",{className:"font-bold",children:[me,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${me}%`}})})]}),i.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[i.jsx("p",{children:i.jsx("strong",{children:"Distribucin Objetivo:"})}),i.jsx("p",{children:" Horas Lectivas (HA): 65% del contrato"}),i.jsx("p",{children:" Horas No Lectivas (HB): 35% del contrato"}),i.jsx("p",{children:" Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),i.jsx("div",{className:"mt-2",children:Math.abs(de-65)<=5?i.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:" La distribucin est dentro de los parmetros recomendados"}):i.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:" La distribucin difiere de los parmetros recomendados"})})]})]})})()]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadsticas Generales"}),i.jsxs("ul",{className:"space-y-3 text-sm",children:[i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),i.jsx("span",{className:"font-semibold",children:e.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),i.jsx("span",{className:"font-semibold",children:r.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),i.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((Ae,se)=>Ae+(typeof se.horasContrato=="number"?se.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",d.length,")"]}),i.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[d.slice(0,5).map((Ae,se)=>i.jsxs("li",{className:"flex items-center gap-1",children:[Ae.tipo==="error"?"":"",i.jsx("span",{children:Ae.mensaje})]},se)),d.length>5&&i.jsxs("li",{className:"italic",children:["Y ",d.length-5," ms..."]})]})})]})]})]})]})]})]})]})}),i.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yo,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Generacin de Horario Semanal"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"relative",children:i.jsx("select",{className:"pl-3 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm",value:I,onChange:Ae=>T(Ae.target.value),children:Sa.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))})}),v&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:Ee,disabled:A,className:"px-3 py-2 bg-emerald-500 hover:bg-emerald-600 text-white text-sm rounded-lg transition-all duration-200 shadow-sm",children:"Guardar horario"}),i.jsx("button",{onClick:Be,disabled:A,className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 text-sm rounded-lg transition-all duration-200",children:"Descartar"})]})]})]}),i.jsxs("div",{className:"p-5 space-y-4",children:[_&&i.jsxs("div",{className:`px-4 py-3 rounded-lg text-sm ${_==="IA"?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300"}`,children:["Fuente: ",_==="IA"?"Generado por IA":"Generado por algoritmo (fallback)"]}),N.length>0&&i.jsxs("div",{className:"px-4 py-3 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 text-sm",children:[i.jsxs("div",{className:"font-medium mb-1",children:["Conflictos detectados (",N.length,"):"]}),i.jsx("ul",{className:"list-disc ml-5 space-y-1",children:N.map((Ae,se)=>i.jsx("li",{children:Ae},se))})]}),v||g?i.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:i.jsxs("table",{className:"w-full min-w-[800px] border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:"Bloque"}),Gh.map(Ae=>i.jsx("th",{className:"px-3 py-2 text-center text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:Ae},Ae))]})}),i.jsx("tbody",{children:(()=>{const Ae=ne=>{const[de,me]=ne.split(":").map(Number);return de*60+me},se=[];for(let ne=0;ne<zs.length;ne++){const de=zs[ne];se.push({type:"block",label:`Bloque ${de.bloque}`,start:de.inicio,end:de.fin,bloque:de.bloque});const me=zs[ne+1];if(me&&Ae(me.inicio)-Ae(de.fin)>0){const Te=de.fin==="13:00"&&me.inicio==="13:40";se.push({type:"break",label:Te?"Almuerzo":"Recreo",start:de.fin,end:me.inicio})}}return se.map((ne,de)=>{if(ne.type==="break")return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[i.jsxs("td",{className:`px-3 py-2 text-sm font-medium whitespace-nowrap ${ne.label==="Almuerzo"?"text-amber-700":"text-slate-600"}`,children:[ne.label," ",ne.start&&ne.end?`(${ne.start}  ${ne.end})`:""]}),Gh.map(ge=>i.jsx("td",{className:`px-3 py-2 align-top ${ne.label==="Almuerzo"?"bg-amber-50 dark:bg-amber-900/20":"bg-slate-50 dark:bg-slate-800/50"}`},`${ge}_break_${de}`))]},`break_${de}`);const me=zs.find(ge=>ge.bloque===ne.bloque);return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[i.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700 dark:text-gray-300 whitespace-nowrap",children:[ne.bloque,". ",ne.start," - ",ne.end]}),Gh.map(ge=>{var Xe,Ke,Qe;const Te=(Qe=(Ke=(Xe=v||g)==null?void 0:Xe[ge])==null?void 0:Ke[String(ne.bloque)])==null?void 0:Qe[I],Ve=ge==="Viernes"&&me&&me.fin>"13:00";return i.jsx("td",{className:`px-3 py-2 align-top ${Ve?"bg-red-50 dark:bg-red-900/20":""}`,title:Ve?"No permitido (Viernes > 13:00)":"",children:Te&&(Te.asignatura||Te.profesor)?i.jsxs("div",{className:`p-2 rounded border ${Ve?"border-red-300 dark:border-red-700 bg-red-50/60 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750"}`,children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:Te.asignatura}),i.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:Te.profesor})]}):i.jsx("div",{className:`h-10 rounded ${Ve?"bg-red-50/60 dark:bg-red-900/10 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-dashed border-gray-200 dark:border-gray-700"}`})},`${ge}_${ne.bloque}`)})]},`block_${ne.bloque}`)})})()})]})}):i.jsx("div",{className:"px-4 py-3 rounded-lg bg-gray-50 dark:bg-gray-750 text-gray-600 dark:text-gray-300 text-sm",children:'An no hay un horario guardado ni generado. Usa "Generar horario (IA)" para crear una propuesta.'})]})]}),i.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[i.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(s1,{className:"w-5 h-5"}),i.jsx("h4",{className:"font-medium",children:"Informacin sobre Distribucin de Horas"})]})}),i.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:i.jsx(Dh,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Segn tabla oficial (ej: 44h  ",a_(44),"h, 30h  ",a_(30),"h)"]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:i.jsx(F1,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:i.jsx(RG,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h  ",E2(44),"h, 30h  ",E2(30),"h)"]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Frmulas de clculo"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Gua de semforos"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede lmites"})]})]})]})]})]})]}),i.jsx(ye,{}),k&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-scaleIn",children:[i.jsxs("div",{className:"p-5 bg-gradient-to-r from-cyan-500 to-sky-600 text-white flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Reglas para generar horario"}),i.jsx("button",{onClick:()=>B(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",children:i.jsx(No,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mximo de horas de mecnica juntas"}),i.jsx("select",{value:M.maxConsecutivasMecanica,onChange:Ae=>P(se=>({...se,maxConsecutivasMecanica:parseInt(Ae.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:Array.from({length:10},(Ae,se)=>se+1).map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mximo de horas de plan general juntas"}),i.jsx("select",{value:M.maxConsecutivasPlanGeneral,onChange:Ae=>P(se=>({...se,maxConsecutivasPlanGeneral:parseInt(Ae.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[1,2,3].map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Asignaturas prcticas en horario P.M."}),i.jsx("p",{className:"text-xs text-gray-500",children:"Ubica taller/prctica/laboratorio en bloques desde 13:40"})]}),i.jsx("input",{type:"checkbox",checked:!!M.practicasPM,onChange:Ae=>P(se=>({...se,practicasPM:Ae.target.checked})),className:"w-5 h-5"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"3 medio slo horas de plan general"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Para cursos 3*, restringe a asignaturas de plan general"})]}),i.jsx("input",{type:"checkbox",checked:!!M.terceroSoloPlanGeneral,onChange:Ae=>P(se=>({...se,terceroSoloPlanGeneral:Ae.target.checked})),className:"w-5 h-5"})]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200",children:"Cancelar"}),i.jsxs("button",{onClick:async()=>{B(!1),await X()},className:"px-4 py-2 rounded-lg bg-cyan-600 hover:bg-cyan-700 text-white flex items-center gap-2",children:[i.jsx(zh,{className:"w-4 h-4"})," Generar con estas reglas"]})]})]})}),A&&i.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),i.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),i.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},B3="acciones_pedagogicas",e9e=(e,t)=>{var a,s,o,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(o=r.creadoTs)==null?void 0:o.toMillis)==null?void 0:l.call(o))??Date.now()}};async function t9e(){const e=[];try{const t=Lt(pt(dt,B3),tr("creadoTs","desc"));(await Rr(t)).docs.forEach(n=>e.push(e9e(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function r9e(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:wr.now()};await dn(pt(dt,B3),t)}async function n9e(e,t){const r=er(pt(dt,B3),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await Zi(r,n)}async function a9e(e){const t=er(pt(dt,B3),e);await fa(t)}function Kce(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Kce(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function bn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Kce(e))&&(n&&(n+=" "),n+=t);return n}var g6={},x6={},NK;function s9e(){return NK||(NK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(x6)),x6}var v6={},CK;function Wce(){return CK||(CK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(v6)),v6}var b6={},EK;function Xce(){return EK||(EK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(b6)),b6}var y6={},jK;function Q7(){return jK||(jK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];l?u==="\\"&&s+1<a?(s++,o+=r[s]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,s++}return o&&n.push(o),n}e.toPath=t}(y6)),y6}var kK;function V7(){return kK||(kK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s9e(),r=Wce(),n=Xce(),a=Q7();function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(g6)),g6}var w6,SK;function i9e(){return SK||(SK=1,w6=V7().get),w6}var o9e=i9e();const Ip=oc(o9e);var N6={exports:{}},ma={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _K;function l9e(){if(_K)return ma;_K=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,A=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function C(j){if(typeof j=="object"&&j!==null){var I=j.$$typeof;switch(I){case t:switch(j=j.type,j){case c:case u:case n:case s:case a:case f:return j;default:switch(j=j&&j.$$typeof,j){case l:case d:case g:case m:case o:return j;default:return I}}case r:return I}}}function _(j){return C(j)===u}return ma.AsyncMode=c,ma.ConcurrentMode=u,ma.ContextConsumer=l,ma.ContextProvider=o,ma.Element=t,ma.ForwardRef=d,ma.Fragment=n,ma.Lazy=g,ma.Memo=m,ma.Portal=r,ma.Profiler=s,ma.StrictMode=a,ma.Suspense=f,ma.isAsyncMode=function(j){return _(j)||C(j)===c},ma.isConcurrentMode=_,ma.isContextConsumer=function(j){return C(j)===l},ma.isContextProvider=function(j){return C(j)===o},ma.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===t},ma.isForwardRef=function(j){return C(j)===d},ma.isFragment=function(j){return C(j)===n},ma.isLazy=function(j){return C(j)===g},ma.isMemo=function(j){return C(j)===m},ma.isPortal=function(j){return C(j)===r},ma.isProfiler=function(j){return C(j)===s},ma.isStrictMode=function(j){return C(j)===a},ma.isSuspense=function(j){return C(j)===f},ma.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===u||j===s||j===a||j===f||j===A||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===m||j.$$typeof===o||j.$$typeof===l||j.$$typeof===d||j.$$typeof===v||j.$$typeof===y||j.$$typeof===N||j.$$typeof===x)},ma.typeOf=C,ma}var TK;function c9e(){return TK||(TK=1,N6.exports=l9e()),N6.exports}var u9e=c9e(),wo=e=>e===0?0:e>0?1:-1,$c=e=>typeof e=="number"&&e!=+e,Zg=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,mr=e=>(typeof e=="number"||e instanceof Number)&&!$c(e),t0=e=>mr(e)||typeof e=="string",d9e=0,lC=e=>{var t=++d9e;return"".concat(e||"").concat(t)},ic=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mr(t)&&typeof t!="string")return n;var s;if(Zg(t)){if(r==null)return n;var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return $c(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Yce=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},Rb=(e,t)=>mr(e)&&mr(t)?r=>e+r*(t-e):()=>t;function vd(e,t,r){return mr(e)&&mr(t)?e+r*(t-e):t}function Jce(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ip(n,t))===r)}var es=e=>e===null||typeof e>"u",lE=e=>es(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),f9e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $7(e){if(typeof e!="string")return!1;var t=f9e;return t.includes(e)}var h9e=["viewBox","children"],BK=["points","pathLength"],C6={svg:h9e,polygon:BK,polyline:BK},z7=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{$7(a)&&(n[a]=s=>r[a](r,s))}),n},A9e=(e,t,r)=>n=>(e(t,r,n),null),dv=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];$7(a)&&typeof s=="function"&&(n||(n={}),n[a]=A9e(s,t,r))}),n},m9e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Zce(e){if(typeof e!="string")return!1;var t=m9e;return t.includes(e)}function Eo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Zce(n)});return Object.fromEntries(t)}var IK=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",DK=null,E6=null,eue=e=>{if(e===DK&&Array.isArray(E6))return E6;var t=[];return w.Children.forEach(e,r=>{es(r)||(u9e.isFragment(r)?t=t.concat(eue(r.props.children)):t.push(r))}),E6=t,DK=e,t};function cE(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>IK(a)):n=[IK(t)],eue(e).forEach(a=>{var s=Ip(a,"type.displayName")||Ip(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var tue=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,p9e=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(C6==null?void 0:C6[n]))!==null&&a!==void 0?a:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!n&&s.includes(t)||Zce(t)),c=!!r&&$7(t);return o||l||c},Wn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(w.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var o;p9e((o=n)===null||o===void 0?void 0:o[s],s,t,r)&&(a[s]=n[s])}),a},g9e=["children","width","height","viewBox","className","style","title","desc"];function zF(){return zF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zF.apply(null,arguments)}function x9e(e,t){if(e==null)return{};var r,n,a=v9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function v9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var G7=w.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=e,d=x9e(e,g9e),f=s||{width:n,height:a,x:0,y:0},A=bn("recharts-surface",o);return w.createElement("svg",zF({},Wn(d,!0,"svg"),{className:A,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),w.createElement("title",null,c),w.createElement("desc",null,u),r)}),b9e=["children","className"];function GF(){return GF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GF.apply(null,arguments)}function y9e(e,t){if(e==null)return{};var r,n,a=w9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ua=w.forwardRef((e,t)=>{var{children:r,className:n}=e,a=y9e(e,b9e),s=bn("recharts-layer",n);return w.createElement("g",GF({className:s},Wn(a,!0),{ref:t}),r)}),q7=tae(),rue=w.createContext(null),N9e=()=>w.useContext(rue);function Ja(e){return function(){return e}}const nue=Math.cos,o_=Math.sin,Lf=Math.sqrt,l_=Math.PI,I3=2*l_,qF=Math.PI,KF=2*qF,Pg=1e-6,C9e=KF-Pg;function aue(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function E9e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return aue;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class j9e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?aue:E9e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(A>Pg)if(!(Math.abs(f*c-u*d)>Pg)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),N=Math.sqrt(A),C=s*Math.tan((qF-Math.acos((x+A-v)/(2*y*N)))/2),_=C/N,j=C/y;Math.abs(_-1)>Pg&&this._append`L${t+_*d},${r+_*f}`,this._append`A${s},${s},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,A=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Pg||Math.abs(this._y1-d)>Pg)&&this._append`L${u},${d}`,n&&(A<0&&(A=A%KF+KF),A>C9e?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:A>Pg&&this._append`A${n},${n},0,${+(A>=qF)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function K7(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new j9e(t)}function W7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sue(e){this._context=e}sue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function D3(e){return new sue(e)}function iue(e){return e[0]}function oue(e){return e[1]}function lue(e,t){var r=Ja(!0),n=null,a=D3,s=null,o=K7(l);e=typeof e=="function"?e:e===void 0?iue:Ja(e),t=typeof t=="function"?t:t===void 0?oue:Ja(t);function l(c){var u,d=(c=W7(c)).length,f,A=!1,m;for(n==null&&(s=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===A&&((A=!A)?s.lineStart():s.lineEnd()),A&&s.point(+e(f,u,c),+t(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ja(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ja(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ja(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function Ak(e,t,r){var n=null,a=Ja(!0),s=null,o=D3,l=null,c=K7(u);e=typeof e=="function"?e:e===void 0?iue:Ja(+e),t=typeof t=="function"?t:Ja(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?oue:Ja(+r);function u(f){var A,m,g,x=(f=W7(f)).length,v,y=!1,N,C=new Array(x),_=new Array(x);for(s==null&&(l=o(N=c())),A=0;A<=x;++A){if(!(A<x&&a(v=f[A],A,f))===y)if(y=!y)m=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=A-1;g>=m;--g)l.point(C[g],_[g]);l.lineEnd(),l.areaEnd()}y&&(C[A]=+e(v,A,f),_[A]=+t(v,A,f),l.point(n?+n(v,A,f):C[A],r?+r(v,A,f):_[A]))}if(N)return l=null,N+""||null}function d(){return lue().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ja(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ja(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ja(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ja(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ja(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ja(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ja(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class cue{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function k9e(e){return new cue(e,!0)}function S9e(e){return new cue(e,!1)}const X7={draw(e,t){const r=Lf(t/l_);e.moveTo(r,0),e.arc(0,0,r,0,I3)}},_9e={draw(e,t){const r=Lf(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},uue=Lf(1/3),T9e=uue*2,B9e={draw(e,t){const r=Lf(t/T9e),n=r*uue;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},I9e={draw(e,t){const r=Lf(t),n=-r/2;e.rect(n,n,r,r)}},D9e=.8908130915292852,due=o_(l_/10)/o_(7*l_/10),O9e=o_(I3/10)*due,P9e=-nue(I3/10)*due,F9e={draw(e,t){const r=Lf(t*D9e),n=O9e*r,a=P9e*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const o=I3*s/5,l=nue(o),c=o_(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},j6=Lf(3),R9e={draw(e,t){const r=-Lf(t/(j6*3));e.moveTo(0,r*2),e.lineTo(-j6*r,-r),e.lineTo(j6*r,-r),e.closePath()}},id=-.5,od=Lf(3)/2,WF=1/Lf(12),L9e=(WF/2+1)*3,M9e={draw(e,t){const r=Lf(t/L9e),n=r/2,a=r*WF,s=n,o=r*WF+r,l=-s,c=o;e.moveTo(n,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(id*n-od*a,od*n+id*a),e.lineTo(id*s-od*o,od*s+id*o),e.lineTo(id*l-od*c,od*l+id*c),e.lineTo(id*n+od*a,id*a-od*n),e.lineTo(id*s+od*o,id*o-od*s),e.lineTo(id*l+od*c,id*c-od*l),e.closePath()}};function U9e(e,t){let r=null,n=K7(a);e=typeof e=="function"?e:Ja(e||X7),t=typeof t=="function"?t:Ja(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Ja(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Ja(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function c_(){}function u_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function fue(e){this._context=e}fue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:u_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:u_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function H9e(e){return new fue(e)}function hue(e){this._context=e}hue.prototype={areaStart:c_,areaEnd:c_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:u_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Q9e(e){return new hue(e)}function Aue(e){this._context=e}Aue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:u_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function V9e(e){return new Aue(e)}function mue(e){this._context=e}mue.prototype={areaStart:c_,areaEnd:c_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function $9e(e){return new mue(e)}function OK(e){return e<0?-1:1}function PK(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(OK(s)+OK(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function FK(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function k6(e,t,r){var n=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,o-l*r,s,o)}function d_(e){this._context=e}d_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:k6(this,this._t0,FK(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,k6(this,FK(this,r=PK(this,e,t)),r);break;default:k6(this,this._t0,r=PK(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function pue(e){this._context=new gue(e)}(pue.prototype=Object.create(d_.prototype)).point=function(e,t){d_.prototype.point.call(this,t,e)};function gue(e){this._context=e}gue.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function z9e(e){return new d_(e)}function G9e(e){return new pue(e)}function xue(e){this._context=e}xue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=RK(e),a=RK(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function RK(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function q9e(e){return new xue(e)}function O3(e,t){this._context=e,this._t=t}O3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function K9e(e){return new O3(e,.5)}function W9e(e){return new O3(e,0)}function X9e(e){return new O3(e,1)}function V1(e,t){if((o=e.length)>1)for(var r=1,n,a,s=e[t[0]],o,l=s.length;r<o;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function XF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Y9e(e,t){return e[t]}function J9e(e){const t=[];return t.key=e,t}function Z9e(){var e=Ja([]),t=XF,r=V1,n=Y9e;function a(s){var o=Array.from(e.apply(this,arguments),J9e),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=W7(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Ja(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Ja(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?XF:typeof s=="function"?s:Ja(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??V1,a):r},a}function eHe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}V1(e,t)}}function tHe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}V1(e,t)}}function rHe(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,A=d[n-1][1]||0,m=(f-A)/2,g=0;g<l;++g){var x=e[t[g]],v=x[n][1]||0,y=x[n-1][1]||0;m+=v-y}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,V1(e,t)}}var nHe=["type","size","sizeType"];function YF(){return YF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YF.apply(null,arguments)}function LK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LK(Object(r),!0).forEach(function(n){aHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aHe(e,t,r){return(t=sHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sHe(e){var t=iHe(e,"string");return typeof t=="symbol"?t:t+""}function iHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oHe(e,t){if(e==null)return{};var r,n,a=lHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vue={symbolCircle:X7,symbolCross:_9e,symbolDiamond:B9e,symbolSquare:I9e,symbolStar:F9e,symbolTriangle:R9e,symbolWye:M9e},cHe=Math.PI/180,uHe=e=>{var t="symbol".concat(lE(e));return vue[t]||X7},dHe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*cHe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},fHe=(e,t)=>{vue["symbol".concat(lE(e))]=t},Y7=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=oHe(e,nHe),s=MK(MK({},a),{},{type:t,size:r,sizeType:n}),o=()=>{var f=uHe(t),A=U9e().type(f).size(dHe(r,n,t));return A()},{className:l,cx:c,cy:u}=s,d=Wn(s,!0);return c===+c&&u===+u&&r===+r?w.createElement("path",YF({},d,{className:bn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};Y7.registerSymbol=fHe;function JF(){return JF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JF.apply(null,arguments)}function UK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hHe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UK(Object(r),!0).forEach(function(n){J7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J7(e,t,r){return(t=AHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AHe(e){var t=mHe(e,"string");return typeof t=="symbol"?t:t+""}function mHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ld=32;class Z7 extends w.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=ld/2,s=ld/6,o=ld/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:ld,y2:a,className:"recharts-legend-icon"});if(c==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(ld,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return w.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ld/8,"h").concat(ld,"v").concat(ld*3/4,"h").concat(-ld,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var u=hHe({},t);return delete u.legendIcon,w.cloneElement(t.legendIcon,u)}return w.createElement(Y7,{fill:l,cx:a,cy:a,size:ld,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=this.props,l={x:0,y:0,width:ld,height:ld},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var A=d.formatter||a,m=bn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=A?A(d.value,d,f):d.value;return w.createElement("li",JF({className:m,style:c,key:"legend-item-".concat(f)},dv(this.props,d,f)),w.createElement(G7,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,o)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}J7(Z7,"displayName","Legend");J7(Z7,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var S6={},_6={},HK;function pHe(){return HK||(HK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t}(_6)),_6}var T6={},QK;function P3(){return QK||(QK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(T6)),T6}var B6={},I6={},D6={},VK;function gHe(){return VK||(VK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(D6)),D6}var $K;function eU(){return $K||($K=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gHe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(I6)),I6}var O6={},zK;function xHe(){return zK||(zK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(O6)),O6}var GK;function vHe(){return GK||(GK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eU(),r=xHe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(B6)),B6}var P6={},F6={},qK;function bHe(){return qK||(qK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V7();function r(n){return function(a){return t.get(a,n)}}e.property=r}(F6)),F6}var R6={},L6={},M6={},U6={},KK;function bue(){return KK||(KK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(U6)),U6}var H6={},WK;function yue(){return WK||(WK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(H6)),H6}var Q6={},XK;function tU(){return XK||(XK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(Q6)),Q6}var YK;function yHe(){return YK||(YK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rU(),r=bue(),n=yue(),a=tU();function s(f,A,m){return typeof m!="function"?t.isMatch(f,A):o(f,A,function g(x,v,y,N,C,_){const j=m(x,v,y,N,C,_);return j!==void 0?!!j:o(x,v,g,_)},new Map)}function o(f,A,m,g){if(A===f)return!0;switch(typeof A){case"object":return l(f,A,m,g);case"function":return Object.keys(A).length>0?o(f,{...A},m,g):a.eq(f,A);default:return r.isObject(f)?typeof A=="string"?A==="":!0:a.eq(f,A)}}function l(f,A,m,g){if(A==null)return!0;if(Array.isArray(A))return u(f,A,m,g);if(A instanceof Map)return c(f,A,m,g);if(A instanceof Set)return d(f,A,m,g);const x=Object.keys(A);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(A))return g.get(A)===f;g&&g.set(A,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!n.isPrimitive(f)&&!(y in f)||A[y]===void 0&&f[y]!==void 0||A[y]===null&&f[y]!==null||!m(f[y],A[y],y,f,A,g))return!1}return!0}finally{g&&g.delete(A)}}function c(f,A,m,g){if(A.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of A.entries()){const y=f.get(x);if(m(y,v,x,f,A,g)===!1)return!1}return!0}function u(f,A,m,g){if(A.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<A.length;v++){const y=A[v];let N=!1;for(let C=0;C<f.length;C++){if(x.has(C))continue;const _=f[C];let j=!1;if(m(_,y,v,f,A,g)&&(j=!0),j){x.add(C),N=!0;break}}if(!N)return!1}return!0}function d(f,A,m,g){return A.size===0?!0:f instanceof Set?u([...f],[...A],m,g):!1}e.isMatchWith=s,e.isSetMatch=d}(M6)),M6}var JK;function rU(){return JK||(JK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yHe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(L6)),L6}var V6={},$6={},z6={},ZK;function wue(){return ZK||(ZK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(z6)),z6}var G6={},eW;function nU(){return eW||(eW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(G6)),G6}var q6={},tW;function aU(){return tW||(tW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",A="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",N="[object Uint16Array]",C="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",T="[object Int32Array]",k="[object BigInt64Array]",B="[object Float32Array]",M="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=A,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=_,e.booleanTag=a,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=B,e.float64ArrayTag=M,e.functionTag=f,e.int16ArrayTag=I,e.int32ArrayTag=T,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=N,e.uint32ArrayTag=C,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(q6)),q6}var K6={},rW;function wHe(){return rW||(rW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(K6)),K6}var nW;function Nue(){return nW||(nW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wue(),r=nU(),n=aU(),a=yue(),s=wHe();function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,A,m=new Map,g=void 0){const x=g==null?void 0:g(d,f,A,m);if(x!=null)return x;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,A,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,N]of d)v.set(y,l(N,y,A,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(l(y,void 0,A,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,A,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,A,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,A,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,A,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,A,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,A,m,g),v}return d}function c(d,f,A=d,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],N=Object.getOwnPropertyDescriptor(d,y);(N==null||N.writable)&&(d[y]=l(f[y],y,A,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}($6)),$6}var aW;function NHe(){return aW||(aW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nue();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(V6)),V6}var sW;function CHe(){return sW||(sW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rU(),r=NHe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(R6)),R6}var W6={},X6={},Y6={},iW;function EHe(){return iW||(iW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nue(),r=aU();function n(a,s){return t.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(Y6)),Y6}var oW;function jHe(){return oW||(oW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EHe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(X6)),X6}var J6={},Z6={},lW;function Cue(){return lW||(lW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(Z6)),Z6}var eD={},cW;function kHe(){return cW||(cW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nU();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(eD)),eD}var uW;function SHe(){return uW||(uW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wce(),r=Cue(),n=kHe(),a=Q7();function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(J6)),J6}var dW;function _He(){return dW||(dW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rU(),r=Xce(),n=jHe(),a=V7(),s=SHe();function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o}(W6)),W6}var fW;function sU(){return fW||(fW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P3(),r=bHe(),n=CHe(),a=_He();function s(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=s}(P6)),P6}var hW;function THe(){return hW||(hW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pHe(),r=P3(),n=vHe(),a=sU();function s(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=s}(S6)),S6}var tD,AW;function BHe(){return AW||(AW=1,tD=THe().uniqBy),tD}var IHe=BHe();const mW=oc(IHe);function Eue(e,t,r){return t===!0?mW(e,r):typeof t=="function"?mW(e,t):e}var rD={exports:{}},nD={},aD={exports:{}},sD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pW;function DHe(){if(pW)return sD;pW=1;var e=fy();function t(f,A){return f===A&&(f!==0||1/f===1/A)||f!==f&&A!==A}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(f,A){var m=A(),g=n({inst:{value:m,getSnapshot:A}}),x=g[0].inst,v=g[1];return s(function(){x.value=m,x.getSnapshot=A,c(x)&&v({inst:x})},[f,m,A]),a(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),o(m),m}function c(f){var A=f.getSnapshot;f=f.value;try{var m=A();return!r(f,m)}catch{return!0}}function u(f,A){return A()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return sD.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,sD}var gW;function OHe(){return gW||(gW=1,aD.exports=DHe()),aD.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xW;function PHe(){if(xW)return nD;xW=1;var e=fy(),t=OHe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return nD.useSyncExternalStoreWithSelector=function(u,d,f,A,m){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(I){if(!N){if(N=!0,C=I,I=A(I),m!==void 0&&x.hasValue){var T=x.value;if(m(T,I))return _=T}return _=I}if(T=_,n(C,I))return T;var k=A(I);return m!==void 0&&m(T,k)?(C=I,T):(C=I,_=k)}var N=!1,C,_,j=f===void 0?null:f;return[function(){return y(d())},j===null?void 0:function(){return y(j())}]},[d,f,A,m]);var v=a(u,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},nD}var vW;function FHe(){return vW||(vW=1,rD.exports=PHe()),rD.exports}var jue=FHe();const RHe=oc(jue);var iU=w.createContext(null),LHe=e=>e,cs=()=>{var e=w.useContext(iU);return e?e.store.dispatch:LHe},LS=()=>{},MHe=()=>LS,UHe=(e,t)=>e===t;function gr(e){var t=w.useContext(iU);return jue.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:MHe,t?t.store.getState:LS,t?t.store.getState:LS,t?e:LS,UHe)}function HHe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function QHe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function VHe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var bW=e=>Array.isArray(e)?e:[e];function $He(e){const t=Array.isArray(e[0])?e[0]:e;return VHe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function zHe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var GHe=class{constructor(e){this.value=e}deref(){return this.value}},qHe=typeof WeakRef<"u"?WeakRef:GHe,KHe=0,yW=1;function mk(){return{s:KHe,v:void 0,o:null,p:null}}function kue(e,t={}){let r=mk();const{resultEqualityCheck:n}=t;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let A=0,m=c;A<m;A++){const g=arguments[A];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=mk(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=mk(),x.set(g,l)):l=v}}const u=l;let d;if(l.s===yW)d=l.v;else if(d=e.apply(null,arguments),s++,n){const A=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;A!=null&&n(A,d)&&(d=A,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new qHe(d):d}return u.s=yW,u.v=d,d}return o.clearCache=()=>{r=mk(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function WHe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),HHe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:A=[],argsMemoize:m=kue,argsMemoizeOptions:g=[]}=d,x=bW(A),v=bW(g),y=$He(a),N=f(function(){return s++,u.apply(null,arguments)},...x),C=m(function(){o++;const j=zHe(y,arguments);return l=N.apply(null,j),l},...v);return Object.assign(C,{resultFunc:u,memoizedResultFunc:N,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var Nt=WHe(kue),XHe=Object.assign((e,t=Nt)=>{QHe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>XHe}),iD={},oD={},lD={},wW;function YHe(){return wW||(wW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};e.compareValues=r}(lD)),lD}var cD={},uD={},NW;function Sue(){return NW||(NW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(uD)),uD}var CW;function JHe(){return CW||(CW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sue(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}e.isKey=a}(cD)),cD}var EW;function ZHe(){return EW||(EW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YHe(),r=JHe(),n=Q7();function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a}(oD)),oD}var dD={},jW;function eQe(){return jW||(jW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t}(dD)),dD}var fD={},kW;function _ue(){return kW||(kW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cue(),r=eU(),n=bue(),a=tU();function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=s}(fD)),fD}var SW;function tQe(){return SW||(SW=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZHe(),r=eQe(),n=_ue();function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(s,r.flatten(o),["asc"])}e.sortBy=a}(iD)),iD}var hD,_W;function rQe(){return _W||(_W=1,hD=tQe().sortBy),hD}var nQe=rQe();const F3=oc(nQe);var Tue=e=>e.legend.settings,aQe=e=>e.legend.size,sQe=e=>e.legend.payload,iQe=Nt([sQe,Tue],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?F3(n,r):n});function oQe(){return gr(iQe)}var pk=1;function Bue(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=w.useState({height:0,left:0,top:0,width:0}),n=w.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-t.height)>pk||Math.abs(o.left-t.left)>pk||Math.abs(o.top-t.top)>pk||Math.abs(o.width-t.width)>pk)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Mo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var lQe=typeof Symbol=="function"&&Symbol.observable||"@@observable",TW=lQe,AD=()=>Math.random().toString(36).substring(7).split("").join("."),cQe={INIT:`@@redux/INIT${AD()}`,REPLACE:`@@redux/REPLACE${AD()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${AD()}`},f_=cQe;function oU(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Iue(e,t,r){if(typeof e!="function")throw new Error(Mo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Mo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Mo(1));return r(Iue)(e,t)}let n=e,a=t,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((v,y)=>{o.set(y,v)}))}function d(){if(c)throw new Error(Mo(3));return a}function f(v){if(typeof v!="function")throw new Error(Mo(4));if(c)throw new Error(Mo(5));let y=!0;u();const N=l++;return o.set(N,v),function(){if(y){if(c)throw new Error(Mo(6));y=!1,u(),o.delete(N),s=null}}}function A(v){if(!oU(v))throw new Error(Mo(7));if(typeof v.type>"u")throw new Error(Mo(8));if(typeof v.type!="string")throw new Error(Mo(17));if(c)throw new Error(Mo(9));try{c=!0,a=n(a,v)}finally{c=!1}return(s=o).forEach(N=>{N()}),v}function m(v){if(typeof v!="function")throw new Error(Mo(10));n=v,A({type:f_.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Mo(11));function N(){const _=y;_.next&&_.next(d())}return N(),{unsubscribe:v(N)}},[TW](){return this}}}return A({type:f_.INIT}),{dispatch:A,subscribe:f,getState:d,replaceReducer:m,[TW]:g}}function uQe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:f_.INIT})>"u")throw new Error(Mo(12));if(typeof r(void 0,{type:f_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mo(13))})}function Due(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{uQe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],A=r[f],m=o[f],g=A(m,l);if(typeof g>"u")throw l&&l.type,new Error(Mo(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function h_(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function dQe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(Mo(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(o));return s=h_(...l)(a.dispatch),{...a,dispatch:s}}}function Oue(e){return oU(e)&&"type"in e&&typeof e.type=="string"}var Pue=Symbol.for("immer-nothing"),BW=Symbol.for("immer-draftable"),Ou=Symbol.for("immer-state");function mf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $1=Object.getPrototypeOf;function Vx(e){return!!e&&!!e[Ou]}function CA(e){var t;return e?Fue(e)||Array.isArray(e)||!!e[BW]||!!((t=e.constructor)!=null&&t[BW])||L3(e)||M3(e):!1}var fQe=Object.prototype.constructor.toString();function Fue(e){if(!e||typeof e!="object")return!1;const t=$1(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===fQe}function A_(e,t){R3(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function R3(e){const t=e[Ou];return t?t.type_:Array.isArray(e)?1:L3(e)?2:M3(e)?3:0}function ZF(e,t){return R3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Rue(e,t,r){const n=R3(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function hQe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function L3(e){return e instanceof Map}function M3(e){return e instanceof Set}function Fg(e){return e.copy_||e.base_}function eR(e,t){if(L3(e))return new Map(e);if(M3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Fue(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ou];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create($1(e),n)}else{const n=$1(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function lU(e,t=!1){return U3(e)||Vx(e)||!CA(e)||(R3(e)>1&&(e.set=e.add=e.clear=e.delete=AQe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>lU(n,!0))),e}function AQe(){mf(2)}function U3(e){return Object.isFrozen(e)}var mQe={};function $x(e){const t=mQe[e];return t||mf(0,e),t}var cC;function Lue(){return cC}function pQe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function IW(e,t){t&&($x("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function tR(e){rR(e),e.drafts_.forEach(gQe),e.drafts_=null}function rR(e){e===cC&&(cC=e.parent_)}function DW(e){return cC=pQe(cC,e)}function gQe(e){const t=e[Ou];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function OW(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ou].modified_&&(tR(t),mf(4)),CA(e)&&(e=m_(t,e),t.parent_||p_(t,e)),t.patches_&&$x("Patches").generateReplacementPatches_(r[Ou].base_,e,t.patches_,t.inversePatches_)):e=m_(t,r,[]),tR(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Pue?e:void 0}function m_(e,t,r){if(U3(t))return t;const n=t[Ou];if(!n)return A_(t,(a,s)=>PW(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return p_(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),A_(s,(l,c)=>PW(e,n,a,l,c,r,o)),p_(e,a,!1),r&&e.patches_&&$x("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function PW(e,t,r,n,a,s,o){if(Vx(a)){const l=s&&t&&t.type_!==3&&!ZF(t.assigned_,n)?s.concat(n):void 0,c=m_(e,a,l);if(Rue(r,n,c),Vx(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(CA(a)&&!U3(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;m_(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&p_(e,a)}}function p_(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lU(t,r)}function xQe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Lue(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=cU;r&&(a=[n],s=uC);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var cU={get(e,t){if(t===Ou)return e;const r=Fg(e);if(!ZF(r,t))return vQe(e,r,t);const n=r[t];return e.finalized_||!CA(n)?n:n===mD(e.base_,t)?(pD(e),e.copy_[t]=aR(n,e)):n},has(e,t){return t in Fg(e)},ownKeys(e){return Reflect.ownKeys(Fg(e))},set(e,t,r){const n=Mue(Fg(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=mD(Fg(e),t),s=a==null?void 0:a[Ou];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(hQe(r,a)&&(r!==void 0||ZF(e.base_,t)))return!0;pD(e),nR(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return mD(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,pD(e),nR(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Fg(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){mf(11)},getPrototypeOf(e){return $1(e.base_)},setPrototypeOf(){mf(12)}},uC={};A_(cU,(e,t)=>{uC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});uC.deleteProperty=function(e,t){return uC.set.call(this,e,t,void 0)};uC.set=function(e,t,r){return cU.set.call(this,e[0],t,r,e[0])};function mD(e,t){const r=e[Ou];return(r?Fg(r):e)[t]}function vQe(e,t,r){var a;const n=Mue(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Mue(e,t){if(!(t in e))return;let r=$1(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=$1(r)}}function nR(e){e.modified_||(e.modified_=!0,e.parent_&&nR(e.parent_))}function pD(e){e.copy_||(e.copy_=eR(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bQe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&mf(6),n!==void 0&&typeof n!="function"&&mf(7);let a;if(CA(t)){const s=DW(this),o=aR(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?tR(s):rR(s)}return IW(s,n),OW(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Pue&&(a=void 0),this.autoFreeze_&&lU(a,!0),n){const s=[],o=[];$x("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else mf(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){CA(e)||mf(8),Vx(e)&&(e=lA(e));const t=DW(this),r=aR(e,void 0);return r[Ou].isManual_=!0,rR(t),r}finishDraft(e,t){const r=e&&e[Ou];(!r||!r.isManual_)&&mf(9);const{scope_:n}=r;return IW(n,t),OW(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=$x("Patches").applyPatches_;return Vx(e)?n(e,t):this.produce(e,a=>n(a,t))}};function aR(e,t){const r=L3(e)?$x("MapSet").proxyMap_(e,t):M3(e)?$x("MapSet").proxySet_(e,t):xQe(e,t);return(t?t.scope_:Lue()).drafts_.push(r),r}function lA(e){return Vx(e)||mf(10,e),Uue(e)}function Uue(e){if(!CA(e)||U3(e))return e;const t=e[Ou];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=eR(e,t.scope_.immer_.useStrictShallowCopy_)}else r=eR(e,!0);return A_(r,(n,a)=>{Rue(r,n,Uue(a))}),t&&(t.finalized_=!1),r}var Pu=new bQe,Hue=Pu.produce;Pu.produceWithPatches.bind(Pu);Pu.setAutoFreeze.bind(Pu);Pu.setUseStrictShallowCopy.bind(Pu);Pu.applyPatches.bind(Pu);Pu.createDraft.bind(Pu);Pu.finishDraft.bind(Pu);function Que(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var yQe=Que(),wQe=Que,NQe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?h_:h_.apply(null,arguments)};function Bd(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(_u(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Oue(n)&&n.type===e,r}var Vue=class k2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,k2.prototype)}static get[Symbol.species](){return k2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new k2(...t[0].concat(this)):new k2(...t.concat(this))}};function FW(e){return CA(e)?Hue(e,()=>{}):e}function gk(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function CQe(e){return typeof e=="boolean"}var EQe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new Vue;return r&&(CQe(r)?o.push(yQe):o.push(wQe(r.extraArgument))),o},jQe="RTK_autoBatch",RW=e=>t=>{setTimeout(t,e)},kQe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:RW(10):e.type==="callback"?e.queueNotification:RW(e.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),A=n.subscribe(f);return l.add(d),()=>{A(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[jQe]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},SQe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Vue(e);return n&&a.push(kQe(typeof n=="object"?n:void 0)),a};function _Qe(e){const t=EQe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(oU(r))l=Due(r);else throw new Error(_u(1));let c;typeof n=="function"?c=n(t):c=t();let u=h_;a&&(u=NQe({trace:!1,...typeof a=="object"&&a}));const d=dQe(...c),f=SQe(d);let A=typeof o=="function"?o(f):f();const m=u(...A);return Iue(l,s,m)}function $ue(e){const t={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(_u(28));if(l in t)throw new Error(_u(29));return t[l]=o,a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function TQe(e){return typeof e=="function"}function BQe(e,t){let[r,n,a]=$ue(t),s;if(TQe(e))s=()=>FW(e());else{const l=FW(e);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(Vx(d)){const m=f(d,c);return m===void 0?d:m}else{if(CA(d))return Hue(d,A=>f(A,c));{const A=f(d,c);if(A===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return d},l)}return o.getInitialState=s,o}var IQe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",DQe=(e=21)=>{let t="",r=e;for(;r--;)t+=IQe[Math.random()*64|0];return t},OQe=Symbol.for("rtk-slice-createasyncthunk");function PQe(e,t){return`${e}/${t}`}function FQe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[OQe];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(_u(11));const l=(typeof a.reducers=="function"?a.reducers(LQe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const I=typeof _=="string"?_:_.type;if(!I)throw new Error(_u(12));if(I in u.sliceCaseReducersByType)throw new Error(_u(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=l[_],I={reducerName:_,type:PQe(s,_),createNotation:typeof a.reducers=="function"};UQe(j)?QQe(I,j,d,t):MQe(I,j,d)});function f(){const[_={},j=[],I=void 0]=typeof a.extraReducers=="function"?$ue(a.extraReducers):[a.extraReducers],T={..._,...u.sliceCaseReducersByType};return BQe(a.initialState,k=>{for(let B in T)k.addCase(B,T[B]);for(let B of u.sliceMatchers)k.addMatcher(B.matcher,B.reducer);for(let B of j)k.addMatcher(B.matcher,B.reducer);I&&k.addDefaultCase(I)})}const A=_=>_,m=new Map,g=new WeakMap;let x;function v(_,j){return x||(x=f()),x(_,j)}function y(){return x||(x=f()),x.getInitialState()}function N(_,j=!1){function I(k){let B=k[_];return typeof B>"u"&&j&&(B=gk(g,I,y)),B}function T(k=A){const B=gk(m,j,()=>new WeakMap);return gk(B,k,()=>{const M={};for(const[P,S]of Object.entries(a.selectors??{}))M[P]=RQe(S,k,()=>gk(g,k,y),j);return M})}return{reducerPath:_,getSelectors:T,get selectors(){return T(I)},selectSlice:I}}const C={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...N(o),injectInto(_,{reducerPath:j,...I}={}){const T=j??o;return _.inject({reducerPath:T,reducer:v},I),{...C,...N(T,!0)}}};return C}}function RQe(e,t,r,n){function a(s,...o){let l=t(s);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var Lu=FQe();function LQe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function MQe({type:e,reducerName:t,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!HQe(n))throw new Error(_u(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Bd(e,o):Bd(e))}function UQe(e){return e._reducerDefinitionType==="asyncThunk"}function HQe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function QQe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(_u(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||xk,pending:l||xk,rejected:c||xk,settled:u||xk})}function xk(){}var VQe="task",zue="listener",Gue="completed",uU="cancelled",$Qe=`task-${uU}`,zQe=`task-${Gue}`,sR=`${zue}-${uU}`,GQe=`${zue}-${Gue}`,H3=class{constructor(e){CI(this,"name","TaskAbortError");CI(this,"message");this.code=e,this.message=`${VQe} ${uU} (reason: ${e})`}},dU=(e,t)=>{if(typeof e!="function")throw new TypeError(_u(32))},g_=()=>{},que=(e,t=g_)=>(e.catch(t),e),Kue=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),xx=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},vx=e=>{if(e.aborted){const{reason:t}=e;throw new H3(t)}};function Wue(e,t){let r=g_;return new Promise((n,a)=>{const s=()=>a(new H3(e.reason));if(e.aborted){s();return}r=Kue(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=g_})}var qQe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof H3?"cancelled":"rejected",error:r}}finally{t==null||t()}},x_=e=>t=>que(Wue(e,t).then(r=>(vx(e),r))),Xue=e=>{const t=x_(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:f1}=Object,LW={},Q3="listenerMiddleware",KQe=(e,t)=>{const r=n=>Kue(e,()=>xx(n,e.reason));return(n,a)=>{dU(n);const s=new AbortController;r(s);const o=qQe(async()=>{vx(e),vx(s.signal);const l=await n({pause:x_(s.signal),delay:Xue(s.signal),signal:s.signal});return vx(s.signal),l},()=>xx(s,zQe));return a!=null&&a.autoJoin&&t.push(o.catch(g_)),{result:x_(e)(o),cancel(){xx(s,$Qe)}}}},WQe=(e,t)=>{const r=async(n,a)=>{vx(t);let s=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,A)=>{A.unsubscribe(),c([f,A.getState(),A.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Wue(t,Promise.race(l));return vx(t),c}finally{s()}};return(n,a)=>que(r(n,a))},Yue=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Bd(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(_u(21));return dU(s),{predicate:a,type:t,effect:s}},Jue=f1(e=>{const{type:t,predicate:r,effect:n}=Yue(e);return{id:DQe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(_u(22))}}},{withTypes:()=>Jue}),MW=(e,t)=>{const{type:r,effect:n,predicate:a}=Yue(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},iR=e=>{e.pending.forEach(t=>{xx(t,sR)})},XQe=e=>()=>{e.forEach(iR),e.clear()},UW=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Zue=f1(Bd(`${Q3}/add`),{withTypes:()=>Zue}),YQe=Bd(`${Q3}/removeAll`),ede=f1(Bd(`${Q3}/remove`),{withTypes:()=>ede}),JQe=(...e)=>{console.error(`${Q3}/error`,...e)},uE=(e={})=>{const t=new Map,{extra:r,onError:n=JQe}=e;dU(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&iR(d)}),s=d=>{const f=MW(t,d)??Jue(d);return a(f)};f1(s,{withTypes:()=>s});const o=d=>{const f=MW(t,d);return f&&(f.unsubscribe(),d.cancelActive&&iR(f)),!!f};f1(o,{withTypes:()=>o});const l=async(d,f,A,m)=>{const g=new AbortController,x=WQe(s,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,f1({},A,{getOriginalState:m,condition:(y,N)=>x(y,N).then(Boolean),take:x,delay:Xue(g.signal),pause:x_(g.signal),extra:r,signal:g.signal,fork:KQe(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,N,C)=>{y!==g&&(xx(y,sR),C.delete(y))})},cancel:()=>{xx(g,sR),d.pending.delete(g)},throwIfCancelled:()=>{vx(g.signal)}})))}catch(y){y instanceof H3||UW(n,y,{raisedBy:"effect"})}finally{await Promise.all(v),xx(g,GQe),d.pending.delete(g)}},c=XQe(t);return{middleware:d=>f=>A=>{if(!Oue(A))return f(A);if(Zue.match(A))return s(A.payload);if(YQe.match(A)){c();return}if(ede.match(A))return o(A.payload);let m=d.getState();const g=()=>{if(m===LW)throw new Error(_u(23));return m};let x;try{if(x=f(A),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const N of y){let C=!1;try{C=N.predicate(A,v,m)}catch(_){C=!1,UW(n,_,{raisedBy:"predicate"})}C&&l(N,A,d,g)}}}finally{m=LW}return x},startListening:s,stopListening:o,clearListeners:c}};function _u(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ZQe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},tde=Lu({name:"chartLayout",initialState:ZQe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:eVe,setLayout:tVe,setChartSize:rVe,setScale:nVe}=tde.actions,aVe=tde.reducer;function HW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HW(Object(r),!0).forEach(function(n){sVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sVe(e,t,r){return(t=iVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iVe(e){var t=oVe(e,"string");return typeof t=="symbol"?t:t+""}function oVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v_=Math.PI/180,lVe=e=>e*180/Math.PI,da=(e,t,r,n)=>({x:e+Math.cos(-v_*n)*r,y:t+Math.sin(-v_*n)*r}),rde=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},cVe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},uVe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,o=cVe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:lVe(c),angleInRadian:c}},dVe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},fVe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return e+o*360},hVe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=uVe({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=dVe(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?QW(QW({},t),{},{radius:a,angle:fVe(d,t)}):null},nde=e=>!w.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function ade(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function VW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VW(Object(r),!0).forEach(function(n){AVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AVe(e,t,r){return(t=mVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mVe(e){var t=pVe(e,"string");return typeof t=="symbol"?t:t+""}function pVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ta(e,t,r){return es(e)||es(t)?r:t0(t)?Ip(e,t,r):typeof t=="function"?t(e):r}var gVe=(e,t,r,n,a)=>{var s,o=-1,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,A=void 0;if(wo(d-u)!==wo(f-d)){var m=[];if(wo(f-d)===wo(a[1]-a[0])){A=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{A=u;var x=f+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(A+d)/2),Math.max(d,(A+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var y=Math.min(u,f),N=Math.max(u,f);if(e>(y+d)/2&&e<=(N+d)/2){({index:o}=r[c]);break}}}else if(t){for(var C=0;C<l;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<l-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===l-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:o}=t[C]);break}}return o},xVe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&mr(e[s]))return bd(bd({},e),{},{[s]:e[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&mr(e[o]))return bd(bd({},e),{},{[o]:e[o]+(a||0)})}return e},s0=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",sde=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,s,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||o.push(t),s||o.push(r),o},ide=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:A,axisType:m}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=a==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=m==="angleAxis"&&s&&s.length>=2?wo(s[0]-s[1])*2*x:x,f||A){var v=(f||A||[]).map((y,N)=>{var C=n?n.indexOf(y):y;return{coordinate:o(C)+x,value:y,offset:x,index:N}});return v.filter(y=>!$c(y.coordinate))}return c&&u?u.map((y,N)=>({coordinate:o(y)+x,value:y,index:N,offset:x})):o.ticks&&d!=null?o.ticks(d).map((y,N)=>({coordinate:o(y)+x,value:y,offset:x,index:N})):o.domain().map((y,N)=>({coordinate:o(y)+x,value:n?n[y]:y,index:N,offset:x}))},$W=1e-4,vVe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-$W,s=Math.max(n[0],n[1])+$W,o=e(t[0]),l=e(t[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},bVe=(e,t)=>{if(!t||t.length!==2||!mr(t[0])||!mr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!mr(e[0])||e[0]<r)&&(a[0]=r),(!mr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},yVe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,o=0;o<t;++o){var l=$c(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},wVe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var o=$c(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},NVe={sign:yVe,expand:eHe,none:V1,silhouette:tHe,wiggle:rHe,positive:wVe},CVe=(e,t,r)=>{var n=NVe[r],a=Z9e().keys(t).value((s,o)=>+Ta(s,o,0)).order(XF).offset(n);return a(e)};function ode(e){return e==null?void 0:String(e)}function zW(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:s,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!es(a[t.dataKey])){var l=Jce(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=Ta(a,es(o)?t.dataKey:o);return es(c)?null:t.scale(c)}var GW=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Ta(s,t.dataKey,t.scale.domain()[o]);return es(l)?null:t.scale(l)-a/2+n},EVe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},jVe=e=>{var t=e.flat(2).filter(mr);return[Math.min(...t),Math.max(...t)]},kVe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],SVe=(e,t,r)=>{if(e!=null)return kVe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:o}=s,l=o.reduce((c,u)=>{var d=ade(u,t,r),f=jVe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},qW=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KW=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zx=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=F3(t,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function WW(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return bd(bd({},t),{},{dataKey:r,payload:n,value:a,name:s})}function Wp(e,t){if(e)return String(e);if(typeof t=="string")return t}function _Ve(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?hVe({x:e,y:t},n):null}var TVe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:o}=n;return bd(bd(bd({},n),da(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return bd(bd(bd({},n),da(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},BVe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,VA=e=>e.layout.width,$A=e=>e.layout.height,IVe=e=>e.layout.scale,lde=e=>e.layout.margin,fU=Nt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),hU=Nt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),cde="data-recharts-item-index",ude="data-recharts-item-data-key",V3=60;function XW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XW(Object(r),!0).forEach(function(n){DVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DVe(e,t,r){return(t=OVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OVe(e){var t=PVe(e,"string");return typeof t=="symbol"?t:t+""}function PVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FVe=e=>e.brush.height,eo=Nt([VA,$A,lde,FVe,fU,hU,Tue,aQe],(e,t,r,n,a,s,o,l)=>{var c=s.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:V3;return _m(_m({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?_m(_m({},g),{},{[v]:Ip(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=_m(_m({},u),c),f=d.bottom;d.bottom+=n,d=xVe(d,o,l);var A=e-d.left-d.right,m=t-d.top-d.bottom;return _m(_m({brushBottom:f},d),{},{width:Math.max(A,0),height:Math.max(m,0)})}),RVe=Nt(eo,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),dde=Nt(VA,$A,(e,t)=>({x:0,y:0,width:e,height:t})),LVe=w.createContext(null),Vl=()=>w.useContext(LVe)!=null,$3=e=>e.brush,z3=Nt([$3,eo,lde],(e,t,r)=>({height:e.height,x:mr(e.x)?e.x:t.left,y:mr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:mr(e.width)?e.width:t.width})),AU=()=>{var e,t=Vl(),r=gr(RVe),n=gr(z3),a=(e=gr($3))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},MVe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},fde=()=>{var e;return(e=gr(eo))!==null&&e!==void 0?e:MVe},mU=()=>gr(VA),pU=()=>gr($A),UVe={top:0,right:0,bottom:0,left:0},HVe=()=>{var e;return(e=gr(t=>t.layout.margin))!==null&&e!==void 0?e:UVe},jn=e=>e.layout.layoutType,G3=()=>gr(jn),QVe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},hde=Lu({name:"legend",initialState:QVe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=lA(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:YW,setLegendSettings:VVe,addLegendPayload:Ade,removeLegendPayload:mde}=hde.actions,$Ve=hde.reducer,zVe=["contextPayload"];function oR(){return oR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oR.apply(null,arguments)}function JW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JW(Object(r),!0).forEach(function(n){gU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gU(e,t,r){return(t=GVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GVe(e){var t=qVe(e,"string");return typeof t=="symbol"?t:t+""}function qVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KVe(e,t){if(e==null)return{};var r,n,a=WVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function XVe(e){return e.value}function YVe(e){var{contextPayload:t}=e,r=KVe(e,zVe),n=Eue(t,e.payloadUniqBy,XVe),a=z1(z1({},r),{},{payload:n});return w.isValidElement(e.content)?w.cloneElement(e.content,a):typeof e.content=="function"?w.createElement(e.content,a):w.createElement(Z7,a)}function JVe(e,t,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),z1(z1({},u),d)}function ZVe(e){var t=cs();return w.useEffect(()=>{t(VVe(e))},[t,e]),null}function e$e(e){var t=cs();return w.useEffect(()=>(t(YW(e)),()=>{t(YW({width:0,height:0}))}),[t,e]),null}function t$e(e){var t=oQe(),r=N9e(),n=HVe(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[c,u]=Bue([t]),d=mU(),f=pU(),A=d-(n.left||0)-(n.right||0),m=Xp.getWidthOrHeight(e.layout,s,a,A),g=l?o:z1(z1({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||s||"auto"},JVe(o,e,n,d,f,c)),o),x=l??r;if(x==null)return null;var v=w.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},w.createElement(ZVe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),w.createElement(e$e,{width:c.width,height:c.height}),w.createElement(YVe,oR({},e,m,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return q7.createPortal(v,x)}class Xp extends w.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&mr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return w.createElement(t$e,this.props)}}gU(Xp,"displayName","Legend");gU(Xp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function lR(){return lR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lR.apply(null,arguments)}function ZW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZW(Object(r),!0).forEach(function(n){r$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r$e(e,t,r){return(t=n$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n$e(e){var t=a$e(e,"string");return typeof t=="symbol"?t:t+""}function a$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s$e(e){return Array.isArray(e)&&t0(e[0])&&t0(e[1])?e.join(" ~ "):e}var i$e=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:A=!1}=e,m=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?F3(s,l):s).map((T,k)=>{if(T.type==="none")return null;var B=T.formatter||o||s$e,{value:M,name:P}=T,S=M,L=P;if(B){var U=B(M,P,T,k,s);if(Array.isArray(U))[S,L]=U;else if(U!=null)S=U;else return null}var q=gD({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},n);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:q},t0(L)?w.createElement("span",{className:"recharts-tooltip-item-name"},L):null,t0(L)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},S),w.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},g=gD({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=gD({margin:0},a),v=!es(d),y=v?d:"",N=bn("recharts-default-tooltip",c),C=bn("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var _=A?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",lR({className:N,style:g},_),w.createElement("p",{className:C,style:x},w.isValidElement(y)?y:"".concat(y)),m())},Lw="recharts-tooltip-wrapper",o$e={visibility:"hidden"};function l$e(e){var{coordinate:t,translateX:r,translateY:n}=e;return bn(Lw,{["".concat(Lw,"-right")]:mr(r)&&t&&mr(t.x)&&r>=t.x,["".concat(Lw,"-left")]:mr(r)&&t&&mr(t.x)&&r<t.x,["".concat(Lw,"-bottom")]:mr(n)&&t&&mr(t.y)&&n>=t.y,["".concat(Lw,"-top")]:mr(n)&&t&&mr(t.y)&&n<t.y})}function eX(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(s&&mr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var A=c[n];if(A==null)return 0;if(o[n]){var m=d,g=A;return m<g?Math.max(f,A):Math.max(d,A)}if(u==null)return 0;var x=f+l,v=A+u;return x>v?Math.max(d,A):Math.max(f,A)}function c$e(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function u$e(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=eX({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=eX({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=c$e({translateX:d,translateY:f,useTranslate3d:l})):u=o$e,{cssProperties:u,cssClasses:l$e({translateX:d,translateY:f,coordinate:r})}}function tX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tX(Object(r),!0).forEach(function(n){cR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cR(e,t,r){return(t=d$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d$e(e){var t=f$e(e,"string");return typeof t=="symbol"?t:t+""}function f$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class h$e extends w.PureComponent{constructor(){super(...arguments),cR(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),cR(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:A,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:N,cssProperties:C}=u$e({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:A,viewBox:m}),_=y?{}:vk(vk({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=vk(vk({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:j,ref:v},s)}}var A$e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Yp={isSsr:A$e()},pde=()=>gr(e=>e.rootProps.accessibilityLayer);function Jo(e){return Number.isFinite(e)}function G1(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function uR(){return uR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uR.apply(null,arguments)}function rX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rX(Object(r),!0).forEach(function(n){m$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m$e(e,t,r){return(t=p$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p$e(e){var t=g$e(e,"string");return typeof t=="symbol"?t:t+""}function g$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aX={curveBasisClosed:Q9e,curveBasisOpen:V9e,curveBasis:H9e,curveBumpX:k9e,curveBumpY:S9e,curveLinearClosed:$9e,curveLinear:D3,curveMonotoneX:z9e,curveMonotoneY:G9e,curveNatural:q9e,curveStep:K9e,curveStepAfter:X9e,curveStepBefore:W9e},bk=e=>Jo(e.x)&&Jo(e.y),Mw=e=>e.x,Uw=e=>e.y,x$e=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(lE(e));return(r==="curveMonotone"||r==="curveBump")&&t?aX["".concat(r).concat(t==="vertical"?"Y":"X")]:aX[r]||D3},v$e=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,o=x$e(t,a),l=s?r.filter(bk):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>bk(f)):n,d=l.map((f,A)=>nX(nX({},f),{},{base:u[A]}));return a==="vertical"?c=Ak().y(Uw).x1(Mw).x0(f=>f.base.x):c=Ak().x(Mw).y1(Uw).y0(f=>f.base.y),c.defined(bk).curve(o),c(d)}return a==="vertical"&&mr(n)?c=Ak().y(Uw).x1(Mw).x0(n):mr(n)?c=Ak().x(Mw).y1(Uw).y0(n):c=lue().x(Mw).y(Uw),c.defined(bk).curve(o),c(l)},oN=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?v$e(e):n;return w.createElement("path",uR({},Eo(e),z7(e),{className:bn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},b$e=["x","y","top","left","width","height","className"];function dR(){return dR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dR.apply(null,arguments)}function sX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y$e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sX(Object(r),!0).forEach(function(n){w$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w$e(e,t,r){return(t=N$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N$e(e){var t=C$e(e,"string");return typeof t=="symbol"?t:t+""}function C$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E$e(e,t){if(e==null)return{};var r,n,a=j$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function j$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var k$e=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),S$e=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=e,c=E$e(e,b$e),u=y$e({x:t,y:r,top:n,left:a,width:s,height:o},c);return!mr(t)||!mr(r)||!mr(s)||!mr(o)||!mr(n)||!mr(a)?null:w.createElement("path",dR({},Wn(u,!0),{className:bn("recharts-cross",l),d:k$e(t,r,s,o,n,a)}))};function _$e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function iX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T$e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iX(Object(r),!0).forEach(function(n){B$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B$e(e,t,r){return(t=I$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I$e(e){var t=D$e(e,"string");return typeof t=="symbol"?t:t+""}function D$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gc(e,t){var r=T$e({},e),n=t,a=Object.keys(t),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}var xD={},vD={},bD={},oX;function O$e(){return oX||(oX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(bD)),bD}var lX;function P$e(){return lX||(lX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O$e(),r=wue(),n=nU(),a=aU(),s=tU();function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,A,m,g,x){const v=x(u,d,f,A,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,A){if(Object.is(u,d))return!0;let m=n.getTag(u),g=n.getTag(d);if(m===a.argumentsTag&&(m=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),m!==g)return!1;switch(m){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),N=d.valueOf();return s.eq(y,N)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),v=f.get(d);if(x!=null&&v!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,N]of u.entries())if(!d.has(y)||!l(N,d.get(y),y,u,d,f,A))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),N=Array.from(d.values());for(let C=0;C<y.length;C++){const _=y[C],j=N.findIndex(I=>l(_,I,void 0,u,d,f,A));if(j===-1)return!1;N.splice(j,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],d[y],y,u,d,f,A))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,A);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,A);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,A)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const N=[...Object.keys(u),...r.getSymbols(u)],C=[...Object.keys(d),...r.getSymbols(d)];if(N.length!==C.length)return!1;for(let _=0;_<N.length;_++){const j=N[_],I=u[j];if(!Object.hasOwn(d,j))return!1;const T=d[j];if(!l(I,T,j,u,d,f,A))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o}(vD)),vD}var yD={},cX;function F$e(){return cX||(cX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(yD)),yD}var uX;function R$e(){return uX||(uX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P$e(),r=F$e();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(xD)),xD}var wD,dX;function L$e(){return dX||(dX=1,wD=R$e().isEqual),wD}var M$e=L$e();const U$e=oc(M$e);var b_=1e-4,gde=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],xde=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),fX=(e,t)=>r=>{var n=gde(e,t);return xde(n,r)},H$e=(e,t)=>r=>{var n=gde(e,t),a=[...n.map((s,o)=>s*o).slice(1),0];return xde(a,r)},hX=function(){for(var t,r,n,a,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,n,r,a]=o);var u=fX(t,r),d=fX(n,a),f=H$e(t,r),A=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var N=u(v)-x,C=f(v);if(Math.abs(N-x)<b_||C<b_)return d(v);v=A(v-N/C)}return d(v)};return m.isStepper=!1,m},Q$e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,A=c*a/1e3+o;return Math.abs(A-l)<b_&&Math.abs(f)<b_?[l,0]:[A,f]};return s.isStepper=!0,s.dt=a,s},vde=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return hX(e);case"spring":return Q$e();default:if(e.split("(")[0]==="cubic-bezier")return hX(e)}return typeof e=="function"?e:null};function AX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AX(Object(r),!0).forEach(function(n){V$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V$e(e,t,r){return(t=$$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $$e(e){var t=z$e(e,"string");return typeof t=="symbol"?t:t+""}function z$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G$e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),q$e=(e,t,r)=>e.map(n=>"".concat(G$e(n)," ").concat(t,"ms ").concat(r)).join(","),K$e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),dC=(e,t)=>Object.keys(t).reduce((r,n)=>mX(mX({},r),{},{[n]:e(n,t[n])}),{});function pX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pX(Object(r),!0).forEach(function(n){W$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W$e(e,t,r){return(t=X$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X$e(e){var t=Y$e(e,"string");return typeof t=="symbol"?t:t+""}function Y$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y_=(e,t,r)=>e+(t-e)*r,fR=e=>{var{from:t,to:r}=e;return t!==r},bde=(e,t,r)=>{var n=dC((a,s)=>{if(fR(s)){var[o,l]=e(s.from,s.to,s.velocity);return $o($o({},s),{},{from:o,velocity:l})}return s},t);return r<1?dC((a,s)=>fR(s)?$o($o({},s),{},{velocity:y_(s.velocity,n[a].velocity,r),from:y_(s.from,n[a].from,r)}):s,t):bde(e,n,r-1)};function J$e(e,t,r,n,a,s){var o,l=n.reduce((A,m)=>$o($o({},A),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>dC((A,m)=>m.from,l),u=()=>!Object.values(l).filter(fR).length,d=null,f=A=>{o||(o=A);var m=A-o,g=m/r.dt;l=bde(r,l,g),a($o($o($o({},e),t),c())),o=A,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function Z$e(e,t,r,n,a,s,o){var l=null,c=a.reduce((f,A)=>$o($o({},f),{},{[A]:[e[A],t[A]]}),{}),u,d=f=>{u||(u=f);var A=(f-u)/n,m=dC((x,v)=>y_(...v,r(A)),c);if(s($o($o($o({},e),t),m)),A<1)l=o.setTimeout(d);else{var g=dC((x,v)=>y_(...v,r(1)),c);s($o($o($o({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{l()})}const yde=(e,t,r,n,a,s)=>{var o=K$e(e,t);return r.isStepper===!0?J$e(e,t,r,o,a,s):Z$e(e,t,r,n,o,a,s)};function eze(e){var t,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class tze{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function rze(){return eze(new tze)}var nze=w.createContext(rze);function wde(e,t){var r=w.useContext(nze);return w.useMemo(()=>t??r(e),[e,t,r])}var aze=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function hR(){return hR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hR.apply(null,arguments)}function sze(e,t){if(e==null)return{};var r,n,a=ize(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ize(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function gX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gX(Object(r),!0).forEach(function(n){ex(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gX(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ex(e,t,r){return(t=oze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oze(e){var t=lze(e,"string");return typeof t=="symbol"?t:t+""}function lze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class xU extends w.PureComponent{constructor(t,r){super(t,r),ex(this,"mounted",!1),ex(this,"manager",void 0),ex(this,"stopJSAnimation",null),ex(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:o}:o};this.state&&c&&(a&&c[a]!==o||!a&&c!==o)&&this.setState(u);return}if(!(U$e(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?l:t.to;if(this.state&&c){var A={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(A)}this.runAnimation(Tm(Tm({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=yde(r,n,vde(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=q$e(Object.keys(d),n,o);this.manager.start([l,r,Tm(Tm({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:A,onAnimationReStart:m,animationManager:g}=t,x=sze(t,aze),v=w.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||a<=0)return r;var N=C=>{var{style:_={},className:j}=C.props,I=w.cloneElement(C,Tm(Tm({},x),{},{style:Tm(Tm({},_),y),className:j}));return I};return v===1?N(w.Children.only(r)):w.createElement("div",null,w.Children.map(r,C=>N(C)))}}ex(xU,"displayName","Animate");ex(xU,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function w_(e){var t,r=wde((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return w.createElement(xU,hR({},e,{animationManager:r}))}function N_(){return N_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N_.apply(null,arguments)}var xX=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,A=4;f<A;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);u="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},cze={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Nde=e=>{var t=Gc(e,cze),r=w.useRef(null),[n,a]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:A,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var v=bn("recharts-rectangle",d);return x?w.createElement(w_,{canBegin:n>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:A,animationEasing:f,isActive:x},y=>{var{width:N,height:C,x:_,y:j}=y;return w.createElement(w_,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:A,isActive:g,easing:f},w.createElement("path",N_({},Wn(t,!0),{className:v,d:xX(_,j,N,C,u),ref:r})))}):w.createElement("path",N_({},Wn(t,!0),{className:v,d:xX(s,o,l,c,u)}))};function Cde(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,o=da(t,r,n,a),l=da(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function AR(){return AR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AR.apply(null,arguments)}var uze=(e,t)=>{var r=wo(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},yk=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/v_,f=c?a:a+s*d,A=da(t,r,u,f),m=da(t,r,n,f),g=c?a-s*d:a,x=da(t,r,u*Math.cos(d*v_),g);return{center:A,circleTangency:m,lineTangency:x,theta:d}},Ede=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=e,l=uze(s,o),c=s+l,u=da(t,r,a,s),d=da(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var A=da(t,r,n,s),m=da(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(A.x,",").concat(A.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},dze=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=wo(u-c),{circleTangency:f,lineTangency:A,theta:m}=yk({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=yk({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),y=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return o?"M ".concat(A.x,",").concat(A.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Ede({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var N="M ".concat(A.x,",").concat(A.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:_,theta:j}=yk({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:T,theta:k}=yk({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),B=l?Math.abs(c-u):Math.abs(c-u)-j-k;if(B<0&&s===0)return"".concat(N,"L").concat(t,",").concat(r,"Z");N+="L".concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else N+="L".concat(t,",").concat(r,"Z");return N},fze={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jde=e=>{var t=Gc(e,fze),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var A=bn("recharts-sector",f),m=s-a,g=ic(o,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=dze({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=Ede({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),w.createElement("path",AR({},Wn(t,!0),{className:A,d:x}))};function hze(e,t,r){var n,a,s,o;if(e==="horizontal")n=t.x,s=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,A=da(l,c,u,f),m=da(l,c,d,f);n=A.x,a=A.y,s=m.x,o=m.y}else return Cde(t);return[{x:n,y:a},{x:s,y:o}]}var ND={},CD={},ED={},vX;function Aze(){return vX||(vX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sue();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(ED)),ED}var bX;function mze(){return bX||(bX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Aze();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(CD)),CD}var yX;function pze(){return yX||(yX=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_ue(),r=mze();function n(a,s,o){o&&typeof o!="number"&&t.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}e.range=n}(ND)),ND}var jD,wX;function gze(){return wX||(wX=1,jD=pze().range),jD}var xze=gze();const kde=oc(xze);function mp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vze(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vU(e){let t,r,n;e.length!==2?(t=mp,r=(l,c)=>mp(e(l),c),n=(l,c)=>e(l)-c):(t=e===mp||e===vze?e:bze,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function bze(){return 0}function Sde(e){return e===null?NaN:+e}function*yze(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const wze=vU(mp),dE=wze.right;vU(Sde).center;class NX extends Map{constructor(t,r=Eze){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(CX(this,t))}has(t){return super.has(CX(this,t))}set(t,r){return super.set(Nze(this,t),r)}delete(t){return super.delete(Cze(this,t))}}function CX({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Nze({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Cze({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Eze(e){return e!==null&&typeof e=="object"?e.valueOf():e}function jze(e=mp){if(e===mp)return _de;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function _de(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const kze=Math.sqrt(50),Sze=Math.sqrt(10),_ze=Math.sqrt(2);function C_(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=kze?10:s>=Sze?5:s>=_ze?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?C_(e,t,r*2):[l,c,u]}function mR(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,o]=n?C_(t,e,r):C_(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function pR(e,t,r){return t=+t,e=+e,r=+r,C_(e,t,r)[2]}function gR(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?pR(t,e,r):pR(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function EX(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function jX(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Tde(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?_de:jze(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+A)),g=Math.min(n,Math.floor(t+(c-u)*f/c+A));Tde(e,t,m,g,a)}const s=e[t];let o=r,l=n;for(Hw(e,r,t),a(e[n],s)>0&&Hw(e,r,n);o<l;){for(Hw(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?Hw(e,r,l):(++l,Hw(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Hw(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Tze(e,t,r){if(e=Float64Array.from(yze(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return jX(e);if(t>=1)return EX(e);var n,a=(n-1)*t,s=Math.floor(a),o=EX(Tde(e,s).subarray(0,s+1)),l=jX(e.subarray(s+1));return o+(l-o)*(a-s)}}function Bze(e,t,r=Sde){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function Ize(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function Od(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function zA(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const xR=Symbol("implicit");function q3(){var e=new NX,t=[],r=[],n=xR;function a(s){let o=e.get(s);if(o===void 0){if(n!==xR)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new NX;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return q3(t,r).unknown(n)},Od.apply(a,arguments),a}function bU(){var e=q3().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var A=t().length,m=a<n,g=m?a:n,x=m?n:a;s=(x-g)/Math.max(1,A-c+u*2),l&&(s=Math.floor(s)),g+=(x-g-s*(A-c))*d,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=Ize(A).map(function(y){return g+s*y});return r(m?v.reverse():v)}return e.domain=function(A){return arguments.length?(t(A),f()):t()},e.range=function(A){return arguments.length?([n,a]=A,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(A){return[n,a]=A,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(A){return arguments.length?(l=!!A,f()):l},e.padding=function(A){return arguments.length?(c=Math.min(1,u=+A),f()):c},e.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},e.paddingOuter=function(A){return arguments.length?(u=+A,f()):u},e.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},e.copy=function(){return bU(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Od.apply(f(),arguments)}function Bde(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Bde(t())},e}function Dze(){return Bde(bU.apply(null,arguments).paddingInner(1))}function yU(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ide(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function fE(){}var fC=.7,E_=1/fC,h1="\\s*([+-]?\\d+)\\s*",hC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Oze=/^#([0-9a-f]{3,8})$/,Pze=new RegExp(`^rgb\\(${h1},${h1},${h1}\\)$`),Fze=new RegExp(`^rgb\\(${qh},${qh},${qh}\\)$`),Rze=new RegExp(`^rgba\\(${h1},${h1},${h1},${hC}\\)$`),Lze=new RegExp(`^rgba\\(${qh},${qh},${qh},${hC}\\)$`),Mze=new RegExp(`^hsl\\(${hC},${qh},${qh}\\)$`),Uze=new RegExp(`^hsla\\(${hC},${qh},${qh},${hC}\\)$`),kX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yU(fE,Gx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:SX,formatHex:SX,formatHex8:Hze,formatHsl:Qze,formatRgb:_X,toString:_X});function SX(){return this.rgb().formatHex()}function Hze(){return this.rgb().formatHex8()}function Qze(){return Dde(this).formatHsl()}function _X(){return this.rgb().formatRgb()}function Gx(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Oze.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?TX(t):r===3?new Fc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?wk(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?wk(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Pze.exec(e))?new Fc(t[1],t[2],t[3],1):(t=Fze.exec(e))?new Fc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Rze.exec(e))?wk(t[1],t[2],t[3],t[4]):(t=Lze.exec(e))?wk(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Mze.exec(e))?DX(t[1],t[2]/100,t[3]/100,1):(t=Uze.exec(e))?DX(t[1],t[2]/100,t[3]/100,t[4]):kX.hasOwnProperty(e)?TX(kX[e]):e==="transparent"?new Fc(NaN,NaN,NaN,0):null}function TX(e){return new Fc(e>>16&255,e>>8&255,e&255,1)}function wk(e,t,r,n){return n<=0&&(e=t=r=NaN),new Fc(e,t,r,n)}function Vze(e){return e instanceof fE||(e=Gx(e)),e?(e=e.rgb(),new Fc(e.r,e.g,e.b,e.opacity)):new Fc}function vR(e,t,r,n){return arguments.length===1?Vze(e):new Fc(e,t,r,n??1)}function Fc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}yU(Fc,vR,Ide(fE,{brighter(e){return e=e==null?E_:Math.pow(E_,e),new Fc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fC:Math.pow(fC,e),new Fc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fc(bx(this.r),bx(this.g),bx(this.b),j_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BX,formatHex:BX,formatHex8:$ze,formatRgb:IX,toString:IX}));function BX(){return`#${tx(this.r)}${tx(this.g)}${tx(this.b)}`}function $ze(){return`#${tx(this.r)}${tx(this.g)}${tx(this.b)}${tx((isNaN(this.opacity)?1:this.opacity)*255)}`}function IX(){const e=j_(this.opacity);return`${e===1?"rgb(":"rgba("}${bx(this.r)}, ${bx(this.g)}, ${bx(this.b)}${e===1?")":`, ${e})`}`}function j_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tx(e){return e=bx(e),(e<16?"0":"")+e.toString(16)}function DX(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new pf(e,t,r,n)}function Dde(e){if(e instanceof pf)return new pf(e.h,e.s,e.l,e.opacity);if(e instanceof fE||(e=Gx(e)),!e)return new pf;if(e instanceof pf)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new pf(o,l,c,e.opacity)}function zze(e,t,r,n){return arguments.length===1?Dde(e):new pf(e,t,r,n??1)}function pf(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}yU(pf,zze,Ide(fE,{brighter(e){return e=e==null?E_:Math.pow(E_,e),new pf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fC:Math.pow(fC,e),new pf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Fc(kD(e>=240?e-240:e+120,a,n),kD(e,a,n),kD(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new pf(OX(this.h),Nk(this.s),Nk(this.l),j_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=j_(this.opacity);return`${e===1?"hsl(":"hsla("}${OX(this.h)}, ${Nk(this.s)*100}%, ${Nk(this.l)*100}%${e===1?")":`, ${e})`}`}}));function OX(e){return e=(e||0)%360,e<0?e+360:e}function Nk(e){return Math.max(0,Math.min(1,e||0))}function kD(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const wU=e=>()=>e;function Gze(e,t){return function(r){return e+r*t}}function qze(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Kze(e){return(e=+e)==1?Ode:function(t,r){return r-t?qze(t,r,e):wU(isNaN(t)?r:t)}}function Ode(e,t){var r=t-e;return r?Gze(e,r):wU(isNaN(e)?t:e)}const k_=function e(t){var r=Kze(t);function n(a,s){var o=r((a=vR(a)).r,(s=vR(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Ode(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function Wze(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function Xze(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Yze(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=Ty(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function Jze(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Af(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Zze(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Ty(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var bR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SD=new RegExp(bR.source,"g");function eGe(e){return function(){return e}}function tGe(e){return function(t){return e(t)+""}}function Pde(e,t){var r=bR.lastIndex=SD.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=bR.exec(e))&&(a=SD.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Af(n,a)})),r=SD.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?tGe(c[0].x):eGe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Ty(e,t){var r=typeof t,n;return t==null||r==="boolean"?wU(t):(r==="number"?Af:r==="string"?(n=Gx(t))?(t=n,k_):Pde:t instanceof Gx?k_:t instanceof Date?Jze:Xze(t)?Wze:Array.isArray(t)?Yze:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Zze:Af)(e,t)}function NU(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var PX=180/Math.PI,yR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fde(e,t,r,n,a,s){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,c/=l),e*n<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*PX,skewX:Math.atan(c)*PX,scaleX:o,scaleY:l}}var Ck;function rGe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?yR:Fde(t.a,t.b,t.c,t.d,t.e,t.f)}function nGe(e){return e==null||(Ck||(Ck=document.createElementNS("http://www.w3.org/2000/svg","g")),Ck.setAttribute("transform",e),!(e=Ck.transform.baseVal.consolidate()))?yR:(e=e.matrix,Fde(e.a,e.b,e.c,e.d,e.e,e.f))}function Rde(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,A,m,g){if(u!==f||d!==A){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:Af(u,f)},{i:x-2,x:Af(d,A)})}else(f||A)&&m.push("translate("+f+t+A+r)}function o(u,d,f,A){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),A.push({i:f.push(a(f)+"rotate(",null,n)-2,x:Af(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function l(u,d,f,A){u!==d?A.push({i:f.push(a(f)+"skewX(",null,n)-2,x:Af(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,A,m,g){if(u!==f||d!==A){var x=m.push(a(m)+"scale(",null,",",null,")");g.push({i:x-4,x:Af(u,f)},{i:x-2,x:Af(d,A)})}else(f!==1||A!==1)&&m.push(a(m)+"scale("+f+","+A+")")}return function(u,d){var f=[],A=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,A),o(u.rotate,d.rotate,f,A),l(u.skewX,d.skewX,f,A),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,A),u=d=null,function(m){for(var g=-1,x=A.length,v;++g<x;)f[(v=A[g]).i]=v.x(m);return f.join("")}}}var aGe=Rde(rGe,"px, ","px)","deg)"),sGe=Rde(nGe,", ",")",")"),iGe=1e-12;function FX(e){return((e=Math.exp(e))+1/e)/2}function oGe(e){return((e=Math.exp(e))-1/e)/2}function lGe(e){return((e=Math.exp(2*e))-1)/(e+1)}const cGe=function e(t,r,n){function a(s,o){var l=s[0],c=s[1],u=s[2],d=o[0],f=o[1],A=o[2],m=d-l,g=f-c,x=m*m+g*g,v,y;if(x<iGe)y=Math.log(A/u)/t,v=function(T){return[l+T*m,c+T*g,u*Math.exp(t*T*y)]};else{var N=Math.sqrt(x),C=(A*A-u*u+n*x)/(2*u*r*N),_=(A*A-u*u-n*x)/(2*A*r*N),j=Math.log(Math.sqrt(C*C+1)-C),I=Math.log(Math.sqrt(_*_+1)-_);y=(I-j)/t,v=function(T){var k=T*y,B=FX(j),M=u/(r*N)*(B*lGe(t*k+j)-oGe(j));return[l+M*m,c+M*g,u*B/FX(t*k+j)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return a.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return e(o,l,c)},a}(Math.SQRT2,2,4);function uGe(e,t){t===void 0&&(t=e,e=Ty);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function dGe(e){return function(){return e}}function S_(e){return+e}var RX=[0,1];function rc(e){return e}function wR(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:dGe(isNaN(t)?NaN:.5)}function fGe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function hGe(e,t,r){var n=e[0],a=e[1],s=t[0],o=t[1];return a<n?(n=wR(a,n),s=r(o,s)):(n=wR(n,a),s=r(s,o)),function(l){return s(n(l))}}function AGe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=wR(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=dE(e,l,1,n)-1;return s[c](a[c](l))}}function hE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function K3(){var e=RX,t=RX,r=Ty,n,a,s,o=rc,l,c,u;function d(){var A=Math.min(e.length,t.length);return o!==rc&&(o=fGe(e[0],e[A-1])),l=A>2?AGe:hGe,c=u=null,f}function f(A){return A==null||isNaN(A=+A)?s:(c||(c=l(e.map(n),t,r)))(n(o(A)))}return f.invert=function(A){return o(a((u||(u=l(t,e.map(n),Af)))(A)))},f.domain=function(A){return arguments.length?(e=Array.from(A,S_),d()):e.slice()},f.range=function(A){return arguments.length?(t=Array.from(A),d()):t.slice()},f.rangeRound=function(A){return t=Array.from(A),r=NU,d()},f.clamp=function(A){return arguments.length?(o=A?!0:rc,d()):o!==rc},f.interpolate=function(A){return arguments.length?(r=A,d()):r},f.unknown=function(A){return arguments.length?(s=A,f):s},function(A,m){return n=A,a=m,d()}}function CU(){return K3()(rc,rc)}function mGe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function __(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function q1(e){return e=__(Math.abs(e)),e?e[1]:NaN}function pGe(e,t){return function(r,n){for(var a=r.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function gGe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var xGe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function AC(e){if(!(t=xGe.exec(e)))throw new Error("invalid format: "+e);var t;return new EU({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}AC.prototype=EU.prototype;function EU(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}EU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vGe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Lde;function bGe(e,t){var r=__(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(Lde=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+__(e,Math.max(0,t+s-1))[0]}function LX(e,t){var r=__(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const MX={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mGe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>LX(e*100,t),r:LX,s:bGe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function UX(e){return e}var HX=Array.prototype.map,QX=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function yGe(e){var t=e.grouping===void 0||e.thousands===void 0?UX:pGe(HX.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?UX:gGe(HX.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=AC(f);var A=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,N=f.comma,C=f.precision,_=f.trim,j=f.type;j==="n"?(N=!0,j="g"):MX[j]||(C===void 0&&(C=12),_=!0,j="g"),(v||A==="0"&&m==="=")&&(v=!0,A="0",m="=");var I=x==="$"?r:x==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",T=x==="$"?n:/[%p]/.test(j)?o:"",k=MX[j],B=/[defgprs%]/.test(j);C=C===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function M(P){var S=I,L=T,U,q,H;if(j==="c")L=k(P)+L,P="";else{P=+P;var z=P<0||1/P<0;if(P=isNaN(P)?c:k(Math.abs(P),C),_&&(P=vGe(P)),z&&+P==0&&g!=="+"&&(z=!1),S=(z?g==="("?g:l:g==="-"||g==="("?"":g)+S,L=(j==="s"?QX[8+Lde/3]:"")+L+(z&&g==="("?")":""),B){for(U=-1,q=P.length;++U<q;)if(H=P.charCodeAt(U),48>H||H>57){L=(H===46?a+P.slice(U+1):P.slice(U))+L,P=P.slice(0,U);break}}}N&&!v&&(P=t(P,1/0));var W=S.length+P.length+L.length,Z=W<y?new Array(y-W+1).join(A):"";switch(N&&v&&(P=t(Z+P,Z.length?y-L.length:1/0),Z=""),m){case"<":P=S+P+L+Z;break;case"=":P=S+Z+P+L;break;case"^":P=Z.slice(0,W=Z.length>>1)+S+P+L+Z.slice(W);break;default:P=Z+S+P+L;break}return s(P)}return M.toString=function(){return f+""},M}function d(f,A){var m=u((f=AC(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(q1(A)/3)))*3,x=Math.pow(10,-g),v=QX[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var Ek,jU,Mde;wGe({thousands:",",grouping:[3],currency:["$",""]});function wGe(e){return Ek=yGe(e),jU=Ek.format,Mde=Ek.formatPrefix,Ek}function NGe(e){return Math.max(0,-q1(Math.abs(e)))}function CGe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(q1(t)/3)))*3-q1(Math.abs(e)))}function EGe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,q1(t)-q1(e))+1}function Ude(e,t,r,n){var a=gR(e,t,r),s;switch(n=AC(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=CGe(a,o))&&(n.precision=s),Mde(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=EGe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=NGe(a))&&(n.precision=s-(n.type==="%")*2);break}}return jU(n)}function Jp(e){var t=e.domain;return e.ticks=function(r){var n=t();return mR(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Ude(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=pR(o,l,r),u===c)return n[a]=o,n[s]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Hde(){var e=CU();return e.copy=function(){return hE(e,Hde())},Od.apply(e,arguments),Jp(e)}function Qde(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,S_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Qde(e).unknown(t)},e=arguments.length?Array.from(e,S_):[0,1],Jp(r)}function Vde(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),e[r]=t.floor(a),e[n]=t.ceil(s),e}function VX(e){return Math.log(e)}function $X(e){return Math.exp(e)}function jGe(e){return-Math.log(-e)}function kGe(e){return-Math.exp(-e)}function SGe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _Ge(e){return e===10?SGe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function TGe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function zX(e){return(t,r)=>-e(-t,r)}function kU(e){const t=e(VX,$X),r=t.domain;let n=10,a,s;function o(){return a=TGe(n),s=_Ge(n),r()[0]<0?(a=zX(a),s=zX(s),e(jGe,kGe)):e(VX,$X),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let A=a(u),m=a(d),g,x;const v=l==null?10:+l;let y=[];if(!(n%1)&&m-A<v){if(A=Math.floor(A),m=Math.ceil(m),u>0){for(;A<=m;++A)for(g=1;g<n;++g)if(x=A<0?g/s(-A):g*s(A),!(x<u)){if(x>d)break;y.push(x)}}else for(;A<=m;++A)for(g=n-1;g>=1;--g)if(x=A>0?g/s(-A):g*s(A),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=mR(u,d,v))}else y=mR(A,m,Math.min(m-A,v)).map(s);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=AC(c)).precision==null&&(c.trim=!0),c=jU(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(Vde(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function $de(){const e=kU(K3()).domain([1,10]);return e.copy=()=>hE(e,$de()).base(e.base()),Od.apply(e,arguments),e}function GX(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function qX(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function SU(e){var t=1,r=e(GX(t),qX(t));return r.constant=function(n){return arguments.length?e(GX(t=+n),qX(t)):t},Jp(r)}function zde(){var e=SU(K3());return e.copy=function(){return hE(e,zde()).constant(e.constant())},Od.apply(e,arguments)}function KX(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function BGe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function IGe(e){return e<0?-e*e:e*e}function _U(e){var t=e(rc,rc),r=1;function n(){return r===1?e(rc,rc):r===.5?e(BGe,IGe):e(KX(r),KX(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Jp(t)}function TU(){var e=_U(K3());return e.copy=function(){return hE(e,TU()).exponent(e.exponent())},Od.apply(e,arguments),e}function DGe(){return TU.apply(null,arguments).exponent(.5)}function WX(e){return Math.sign(e)*e*e}function OGe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Gde(){var e=CU(),t=[0,1],r=!1,n;function a(s){var o=OGe(e(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return e.invert(WX(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,S_)).map(WX)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Gde(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Od.apply(a,arguments),Jp(a)}function qde(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Bze(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[dE(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(mp),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return qde().domain(e).range(t).unknown(n)},Od.apply(s,arguments)}function Kde(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[dE(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Kde().domain([e,t]).range(a).unknown(s)},Od.apply(Jp(o),arguments)}function Wde(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[dE(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Wde().domain(e).range(t).unknown(r)},Od.apply(a,arguments)}const _D=new Date,TD=new Date;function to(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>to(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(a.count=(s,o)=>(_D.setTime(+s),TD.setTime(+o),e(_D),e(TD),Math.floor(r(_D,TD))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const T_=to(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);T_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?to(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):T_);T_.range;const Z0=1e3,Cd=Z0*60,eA=Cd*60,EA=eA*24,BU=EA*7,XX=EA*30,BD=EA*365,rx=to(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Z0)},(e,t)=>(t-e)/Z0,e=>e.getUTCSeconds());rx.range;const IU=to(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Z0)},(e,t)=>{e.setTime(+e+t*Cd)},(e,t)=>(t-e)/Cd,e=>e.getMinutes());IU.range;const DU=to(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Cd)},(e,t)=>(t-e)/Cd,e=>e.getUTCMinutes());DU.range;const OU=to(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Z0-e.getMinutes()*Cd)},(e,t)=>{e.setTime(+e+t*eA)},(e,t)=>(t-e)/eA,e=>e.getHours());OU.range;const PU=to(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*eA)},(e,t)=>(t-e)/eA,e=>e.getUTCHours());PU.range;const AE=to(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Cd)/EA,e=>e.getDate()-1);AE.range;const W3=to(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/EA,e=>e.getUTCDate()-1);W3.range;const Xde=to(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/EA,e=>Math.floor(e/EA));Xde.range;function fv(e){return to(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Cd)/BU)}const X3=fv(0),B_=fv(1),PGe=fv(2),FGe=fv(3),K1=fv(4),RGe=fv(5),LGe=fv(6);X3.range;B_.range;PGe.range;FGe.range;K1.range;RGe.range;LGe.range;function hv(e){return to(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/BU)}const Y3=hv(0),I_=hv(1),MGe=hv(2),UGe=hv(3),W1=hv(4),HGe=hv(5),QGe=hv(6);Y3.range;I_.range;MGe.range;UGe.range;W1.range;HGe.range;QGe.range;const FU=to(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());FU.range;const RU=to(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());RU.range;const jA=to(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());jA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:to(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});jA.range;const kA=to(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());kA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:to(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});kA.range;function Yde(e,t,r,n,a,s){const o=[[rx,1,Z0],[rx,5,5*Z0],[rx,15,15*Z0],[rx,30,30*Z0],[s,1,Cd],[s,5,5*Cd],[s,15,15*Cd],[s,30,30*Cd],[a,1,eA],[a,3,3*eA],[a,6,6*eA],[a,12,12*eA],[n,1,EA],[n,2,2*EA],[r,1,BU],[t,1,XX],[t,3,3*XX],[e,1,BD]];function l(u,d,f){const A=d<u;A&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return A?g.reverse():g}function c(u,d,f){const A=Math.abs(d-u)/f,m=vU(([,,v])=>v).right(o,A);if(m===o.length)return e.every(gR(u/BD,d/BD,f));if(m===0)return T_.every(Math.max(gR(u,d,f),1));const[g,x]=o[A/o[m-1][2]<o[m][2]/A?m-1:m];return g.every(x)}return[l,c]}const[VGe,$Ge]=Yde(kA,RU,Y3,Xde,PU,DU),[zGe,GGe]=Yde(jA,FU,X3,AE,OU,IU);function ID(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function DD(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Qw(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function qGe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Vw(a),d=$w(a),f=Vw(s),A=$w(s),m=Vw(o),g=$w(o),x=Vw(l),v=$w(l),y=Vw(c),N=$w(c),C={a:z,A:W,b:Z,B:V,c:null,d:rY,e:rY,f:pqe,g:jqe,G:Sqe,H:hqe,I:Aqe,j:mqe,L:Jde,m:gqe,M:xqe,p:Y,q:R,Q:sY,s:iY,S:vqe,u:bqe,U:yqe,V:wqe,w:Nqe,W:Cqe,x:null,X:null,y:Eqe,Y:kqe,Z:_qe,"%":aY},_={a:O,A:K,b:J,B:ce,c:null,d:nY,e:nY,f:Dqe,g:Vqe,G:zqe,H:Tqe,I:Bqe,j:Iqe,L:efe,m:Oqe,M:Pqe,p:oe,q:re,Q:sY,s:iY,S:Fqe,u:Rqe,U:Lqe,V:Mqe,w:Uqe,W:Hqe,x:null,X:null,y:Qqe,Y:$qe,Z:Gqe,"%":aY},j={a:M,A:P,b:S,B:L,c:U,d:eY,e:eY,f:cqe,g:ZX,G:JX,H:tY,I:tY,j:sqe,L:lqe,m:aqe,M:iqe,p:B,q:nqe,Q:dqe,s:fqe,S:oqe,u:JGe,U:ZGe,V:eqe,w:YGe,W:tqe,x:q,X:H,y:ZX,Y:JX,Z:rqe,"%":uqe};C.x=I(r,C),C.X=I(n,C),C.c=I(t,C),_.x=I(r,_),_.X=I(n,_),_.c=I(t,_);function I(ue,le){return function(ve){var X=[],Ee=-1,Be=0,je=ue.length,fe,ye,Ae;for(ve instanceof Date||(ve=new Date(+ve));++Ee<je;)ue.charCodeAt(Ee)===37&&(X.push(ue.slice(Be,Ee)),(ye=YX[fe=ue.charAt(++Ee)])!=null?fe=ue.charAt(++Ee):ye=fe==="e"?" ":"0",(Ae=le[fe])&&(fe=Ae(ve,ye)),X.push(fe),Be=Ee+1);return X.push(ue.slice(Be,Ee)),X.join("")}}function T(ue,le){return function(ve){var X=Qw(1900,void 0,1),Ee=k(X,ue,ve+="",0),Be,je;if(Ee!=ve.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(le&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(Be=DD(Qw(X.y,0,1)),je=Be.getUTCDay(),Be=je>4||je===0?I_.ceil(Be):I_(Be),Be=W3.offset(Be,(X.V-1)*7),X.y=Be.getUTCFullYear(),X.m=Be.getUTCMonth(),X.d=Be.getUTCDate()+(X.w+6)%7):(Be=ID(Qw(X.y,0,1)),je=Be.getDay(),Be=je>4||je===0?B_.ceil(Be):B_(Be),Be=AE.offset(Be,(X.V-1)*7),X.y=Be.getFullYear(),X.m=Be.getMonth(),X.d=Be.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),je="Z"in X?DD(Qw(X.y,0,1)).getUTCDay():ID(Qw(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(je+5)%7:X.w+X.U*7-(je+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,DD(X)):ID(X)}}function k(ue,le,ve,X){for(var Ee=0,Be=le.length,je=ve.length,fe,ye;Ee<Be;){if(X>=je)return-1;if(fe=le.charCodeAt(Ee++),fe===37){if(fe=le.charAt(Ee++),ye=j[fe in YX?le.charAt(Ee++):fe],!ye||(X=ye(ue,ve,X))<0)return-1}else if(fe!=ve.charCodeAt(X++))return-1}return X}function B(ue,le,ve){var X=u.exec(le.slice(ve));return X?(ue.p=d.get(X[0].toLowerCase()),ve+X[0].length):-1}function M(ue,le,ve){var X=m.exec(le.slice(ve));return X?(ue.w=g.get(X[0].toLowerCase()),ve+X[0].length):-1}function P(ue,le,ve){var X=f.exec(le.slice(ve));return X?(ue.w=A.get(X[0].toLowerCase()),ve+X[0].length):-1}function S(ue,le,ve){var X=y.exec(le.slice(ve));return X?(ue.m=N.get(X[0].toLowerCase()),ve+X[0].length):-1}function L(ue,le,ve){var X=x.exec(le.slice(ve));return X?(ue.m=v.get(X[0].toLowerCase()),ve+X[0].length):-1}function U(ue,le,ve){return k(ue,t,le,ve)}function q(ue,le,ve){return k(ue,r,le,ve)}function H(ue,le,ve){return k(ue,n,le,ve)}function z(ue){return o[ue.getDay()]}function W(ue){return s[ue.getDay()]}function Z(ue){return c[ue.getMonth()]}function V(ue){return l[ue.getMonth()]}function Y(ue){return a[+(ue.getHours()>=12)]}function R(ue){return 1+~~(ue.getMonth()/3)}function O(ue){return o[ue.getUTCDay()]}function K(ue){return s[ue.getUTCDay()]}function J(ue){return c[ue.getUTCMonth()]}function ce(ue){return l[ue.getUTCMonth()]}function oe(ue){return a[+(ue.getUTCHours()>=12)]}function re(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var le=I(ue+="",C);return le.toString=function(){return ue},le},parse:function(ue){var le=T(ue+="",!1);return le.toString=function(){return ue},le},utcFormat:function(ue){var le=I(ue+="",_);return le.toString=function(){return ue},le},utcParse:function(ue){var le=T(ue+="",!0);return le.toString=function(){return ue},le}}}var YX={"-":"",_:" ",0:"0"},jo=/^\s*\d+/,KGe=/^%/,WGe=/[\\^$*+?|[\]().{}]/g;function oa(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function XGe(e){return e.replace(WGe,"\\$&")}function Vw(e){return new RegExp("^(?:"+e.map(XGe).join("|")+")","i")}function $w(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function YGe(e,t,r){var n=jo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function JGe(e,t,r){var n=jo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function ZGe(e,t,r){var n=jo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function eqe(e,t,r){var n=jo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function tqe(e,t,r){var n=jo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function JX(e,t,r){var n=jo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ZX(e,t,r){var n=jo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function rqe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function nqe(e,t,r){var n=jo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function aqe(e,t,r){var n=jo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function eY(e,t,r){var n=jo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function sqe(e,t,r){var n=jo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function tY(e,t,r){var n=jo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function iqe(e,t,r){var n=jo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function oqe(e,t,r){var n=jo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function lqe(e,t,r){var n=jo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function cqe(e,t,r){var n=jo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function uqe(e,t,r){var n=KGe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function dqe(e,t,r){var n=jo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function fqe(e,t,r){var n=jo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function rY(e,t){return oa(e.getDate(),t,2)}function hqe(e,t){return oa(e.getHours(),t,2)}function Aqe(e,t){return oa(e.getHours()%12||12,t,2)}function mqe(e,t){return oa(1+AE.count(jA(e),e),t,3)}function Jde(e,t){return oa(e.getMilliseconds(),t,3)}function pqe(e,t){return Jde(e,t)+"000"}function gqe(e,t){return oa(e.getMonth()+1,t,2)}function xqe(e,t){return oa(e.getMinutes(),t,2)}function vqe(e,t){return oa(e.getSeconds(),t,2)}function bqe(e){var t=e.getDay();return t===0?7:t}function yqe(e,t){return oa(X3.count(jA(e)-1,e),t,2)}function Zde(e){var t=e.getDay();return t>=4||t===0?K1(e):K1.ceil(e)}function wqe(e,t){return e=Zde(e),oa(K1.count(jA(e),e)+(jA(e).getDay()===4),t,2)}function Nqe(e){return e.getDay()}function Cqe(e,t){return oa(B_.count(jA(e)-1,e),t,2)}function Eqe(e,t){return oa(e.getFullYear()%100,t,2)}function jqe(e,t){return e=Zde(e),oa(e.getFullYear()%100,t,2)}function kqe(e,t){return oa(e.getFullYear()%1e4,t,4)}function Sqe(e,t){var r=e.getDay();return e=r>=4||r===0?K1(e):K1.ceil(e),oa(e.getFullYear()%1e4,t,4)}function _qe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+oa(t/60|0,"0",2)+oa(t%60,"0",2)}function nY(e,t){return oa(e.getUTCDate(),t,2)}function Tqe(e,t){return oa(e.getUTCHours(),t,2)}function Bqe(e,t){return oa(e.getUTCHours()%12||12,t,2)}function Iqe(e,t){return oa(1+W3.count(kA(e),e),t,3)}function efe(e,t){return oa(e.getUTCMilliseconds(),t,3)}function Dqe(e,t){return efe(e,t)+"000"}function Oqe(e,t){return oa(e.getUTCMonth()+1,t,2)}function Pqe(e,t){return oa(e.getUTCMinutes(),t,2)}function Fqe(e,t){return oa(e.getUTCSeconds(),t,2)}function Rqe(e){var t=e.getUTCDay();return t===0?7:t}function Lqe(e,t){return oa(Y3.count(kA(e)-1,e),t,2)}function tfe(e){var t=e.getUTCDay();return t>=4||t===0?W1(e):W1.ceil(e)}function Mqe(e,t){return e=tfe(e),oa(W1.count(kA(e),e)+(kA(e).getUTCDay()===4),t,2)}function Uqe(e){return e.getUTCDay()}function Hqe(e,t){return oa(I_.count(kA(e)-1,e),t,2)}function Qqe(e,t){return oa(e.getUTCFullYear()%100,t,2)}function Vqe(e,t){return e=tfe(e),oa(e.getUTCFullYear()%100,t,2)}function $qe(e,t){return oa(e.getUTCFullYear()%1e4,t,4)}function zqe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?W1(e):W1.ceil(e),oa(e.getUTCFullYear()%1e4,t,4)}function Gqe(){return"+0000"}function aY(){return"%"}function sY(e){return+e}function iY(e){return Math.floor(+e/1e3)}var eb,rfe,nfe;qqe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qqe(e){return eb=qGe(e),rfe=eb.format,eb.parse,nfe=eb.utcFormat,eb.utcParse,eb}function Kqe(e){return new Date(e)}function Wqe(e){return e instanceof Date?+e:+new Date(+e)}function LU(e,t,r,n,a,s,o,l,c,u){var d=CU(),f=d.invert,A=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),N=u("%b %d"),C=u("%B"),_=u("%Y");function j(I){return(c(I)<I?m:l(I)<I?g:o(I)<I?x:s(I)<I?v:n(I)<I?a(I)<I?y:N:r(I)<I?C:_)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?A(Array.from(I,Wqe)):A().map(Kqe)},d.ticks=function(I){var T=A();return e(T[0],T[T.length-1],I??10)},d.tickFormat=function(I,T){return T==null?j:u(T)},d.nice=function(I){var T=A();return(!I||typeof I.range!="function")&&(I=t(T[0],T[T.length-1],I??10)),I?A(Vde(T,I)):d},d.copy=function(){return hE(d,LU(e,t,r,n,a,s,o,l,c,u))},d}function Xqe(){return Od.apply(LU(zGe,GGe,jA,FU,X3,AE,OU,IU,rx,rfe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Yqe(){return Od.apply(LU(VGe,$Ge,kA,RU,Y3,W3,PU,DU,rx,nfe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function J3(){var e=0,t=1,r,n,a,s,o=rc,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(A){var m,g;return arguments.length?([m,g]=A,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(Ty),u.rangeRound=d(NU),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Zp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function afe(){var e=Jp(J3()(rc));return e.copy=function(){return Zp(e,afe())},zA.apply(e,arguments)}function sfe(){var e=kU(J3()).domain([1,10]);return e.copy=function(){return Zp(e,sfe()).base(e.base())},zA.apply(e,arguments)}function ife(){var e=SU(J3());return e.copy=function(){return Zp(e,ife()).constant(e.constant())},zA.apply(e,arguments)}function MU(){var e=_U(J3());return e.copy=function(){return Zp(e,MU()).exponent(e.exponent())},zA.apply(e,arguments)}function Jqe(){return MU.apply(null,arguments).exponent(.5)}function ofe(){var e=[],t=rc;function r(n){if(n!=null&&!isNaN(n=+n))return t((dE(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(mp),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>Tze(e,s/n))},r.copy=function(){return ofe(t).domain(e)},zA.apply(r,arguments)}function Z3(){var e=0,t=.5,r=1,n=1,a,s,o,l,c,u=rc,d,f=!1,A;function m(x){return isNaN(x=+x)?A:(x=.5+((x=+d(x))-s)*(n*x<n*s?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,N,C;return arguments.length?([y,N,C]=v,u=uGe(x,[y,N,C]),m):[u(0),u(.5),u(1)]}}return m.range=g(Ty),m.rangeRound=g(NU),m.unknown=function(x){return arguments.length?(A=x,m):A},function(x){return d=x,a=x(e),s=x(t),o=x(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m}}function lfe(){var e=Jp(Z3()(rc));return e.copy=function(){return Zp(e,lfe())},zA.apply(e,arguments)}function cfe(){var e=kU(Z3()).domain([.1,1,10]);return e.copy=function(){return Zp(e,cfe()).base(e.base())},zA.apply(e,arguments)}function ufe(){var e=SU(Z3());return e.copy=function(){return Zp(e,ufe()).constant(e.constant())},zA.apply(e,arguments)}function UU(){var e=_U(Z3());return e.copy=function(){return Zp(e,UU()).exponent(e.exponent())},zA.apply(e,arguments)}function Zqe(){return UU.apply(null,arguments).exponent(.5)}const S2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bU,scaleDiverging:lfe,scaleDivergingLog:cfe,scaleDivergingPow:UU,scaleDivergingSqrt:Zqe,scaleDivergingSymlog:ufe,scaleIdentity:Qde,scaleImplicit:xR,scaleLinear:Hde,scaleLog:$de,scaleOrdinal:q3,scalePoint:Dze,scalePow:TU,scaleQuantile:qde,scaleQuantize:Kde,scaleRadial:Gde,scaleSequential:afe,scaleSequentialLog:sfe,scaleSequentialPow:MU,scaleSequentialQuantile:ofe,scaleSequentialSqrt:Jqe,scaleSequentialSymlog:ife,scaleSqrt:DGe,scaleSymlog:zde,scaleThreshold:Wde,scaleTime:Xqe,scaleUtc:Yqe,tickFormat:Ude},Symbol.toStringTag,{value:"Module"}));var eg=e=>e.chartData,eT=Nt([eg],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),tT=(e,t,r,n)=>n?eT(e):eg(e);function X1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Jo(t)&&Jo(r))return!0}return!1}function oY(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function eKe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Jo(r))a=r;else if(typeof r=="function")return;if(Jo(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(X1(o))return o}}function tKe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(X1(n))return oY(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(mr(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&qW.test(a)){var c=qW.exec(a);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(mr(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&KW.test(s)){var d=KW.exec(s);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var A=[o,l];if(X1(A))return t==null?A:oY(A,t,r)}}}var By=1e9,rKe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},QU,bs=!0,Id="[DecimalError] ",yx=Id+"Invalid argument: ",HU=Id+"Exponent out of range: ",Iy=Math.floor,Rg=Math.pow,nKe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Eu,go=1e7,rs=7,dfe=9007199254740991,D_=Iy(dfe/rs),Nr={};Nr.absoluteValue=Nr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Nr.comparedTo=Nr.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Nr.decimalPlaces=Nr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*rs;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Nr.dividedBy=Nr.div=function(e){return cA(this,new this.constructor(e))};Nr.dividedToIntegerBy=Nr.idiv=function(e){var t=this,r=t.constructor;return za(cA(t,new r(e),0,1),r.precision)};Nr.equals=Nr.eq=function(e){return!this.cmp(e)};Nr.exponent=function(){return Ui(this)};Nr.greaterThan=Nr.gt=function(e){return this.cmp(e)>0};Nr.greaterThanOrEqualTo=Nr.gte=function(e){return this.cmp(e)>=0};Nr.isInteger=Nr.isint=function(){return this.e>this.d.length-2};Nr.isNegative=Nr.isneg=function(){return this.s<0};Nr.isPositive=Nr.ispos=function(){return this.s>0};Nr.isZero=function(){return this.s===0};Nr.lessThan=Nr.lt=function(e){return this.cmp(e)<0};Nr.lessThanOrEqualTo=Nr.lte=function(e){return this.cmp(e)<1};Nr.logarithm=Nr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Eu))throw Error(Id+"NaN");if(r.s<1)throw Error(Id+(r.s?"NaN":"-Infinity"));return r.eq(Eu)?new n(0):(bs=!1,t=cA(mC(r,s),mC(e,s),s),bs=!0,za(t,a))};Nr.minus=Nr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Afe(t,e):ffe(t,(e.s=-e.s,e))};Nr.modulo=Nr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Id+"NaN");return r.s?(bs=!1,t=cA(r,e,0,1).times(e),bs=!0,r.minus(t)):za(new n(r),a)};Nr.naturalExponential=Nr.exp=function(){return hfe(this)};Nr.naturalLogarithm=Nr.ln=function(){return mC(this)};Nr.negated=Nr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Nr.plus=Nr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ffe(t,e):Afe(t,(e.s=-e.s,e))};Nr.precision=Nr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(yx+e);if(t=Ui(a)+1,n=a.d.length-1,r=n*rs+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Nr.squareRoot=Nr.sqrt=function(){var e,t,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Id+"NaN")}for(e=Ui(l),bs=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Ph(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Iy((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(cA(l,s,o+2)).times(.5),Ph(s.d).slice(0,o)===(t=Ph(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(za(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return bs=!0,za(n,r)};Nr.times=Nr.mul=function(e){var t,r,n,a,s,o,l,c,u,d=this,f=d.constructor,A=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=A.length,u=m.length,c<u&&(s=A,A=m,m=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+m[n]*A[a-n-1]+t,s[a--]=l%go|0,t=l/go|0;s[a]=(s[a]+t)%go|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,bs?za(e,f.precision):e};Nr.toDecimalPlaces=Nr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(r0(e,0,By),t===void 0?t=n.rounding:r0(t,0,8),za(r,e+Ui(r)+1,t))};Nr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=qx(n,!0):(r0(e,0,By),t===void 0?t=a.rounding:r0(t,0,8),n=za(new a(n),e+1,t),r=qx(n,!0,e+1)),r};Nr.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?qx(a):(r0(e,0,By),t===void 0?t=s.rounding:r0(t,0,8),n=za(new s(a),e+Ui(a)+1,t),r=qx(n.abs(),!1,e+Ui(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Nr.toInteger=Nr.toint=function(){var e=this,t=e.constructor;return za(new t(e),Ui(e)+1,t.rounding)};Nr.toNumber=function(){return+this};Nr.toPower=Nr.pow=function(e){var t,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Eu);if(l=new c(l),!l.s){if(e.s<1)throw Error(Id+"Infinity");return l}if(l.eq(Eu))return l;if(n=c.precision,e.eq(Eu))return za(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=dfe){for(a=new c(Eu),t=Math.ceil(n/rs+4),bs=!1;r%2&&(a=a.times(l),cY(a.d,t)),r=Iy(r/2),r!==0;)l=l.times(l),cY(l.d,t);return bs=!0,e.s<0?new c(Eu).div(a):za(a,n)}}else if(s<0)throw Error(Id+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,bs=!1,a=e.times(mC(l,n+u)),bs=!0,a=hfe(a),a.s=s,a};Nr.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=Ui(a),n=qx(a,r<=s.toExpNeg||r>=s.toExpPos)):(r0(e,1,By),t===void 0?t=s.rounding:r0(t,0,8),a=za(new s(a),e,t),r=Ui(a),n=qx(a,e<=r||r<=s.toExpNeg,e)),n};Nr.toSignificantDigits=Nr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(r0(e,1,By),t===void 0?t=n.rounding:r0(t,0,8)),za(new n(r),e,t)};Nr.toString=Nr.valueOf=Nr.val=Nr.toJSON=Nr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ui(e),r=e.constructor;return qx(e,t<=r.toExpNeg||t>=r.toExpPos)};function ffe(e,t){var r,n,a,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),bs?za(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/rs),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/go|0,c[s]%=go;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,bs?za(t,f):t}function r0(e,t,r){if(e!==~~e||e<t||e>r)throw Error(yx+e)}function Ph(e){var t,r,n,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)n=e[t]+"",r=rs-n.length,r&&(s+=Qm(r)),s+=n;o=e[t],n=o+"",r=rs-n.length,r&&(s+=Qm(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var cA=function(){function e(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%go|0,o=s/go|0;return o&&n.unshift(o),n}function t(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*go+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,A,m,g,x,v,y,N,C,_,j,I,T,k,B=n.constructor,M=n.s==a.s?1:-1,P=n.d,S=a.d;if(!n.s)return new B(n);if(!a.s)throw Error(Id+"Division by zero");for(c=n.e-a.e,T=S.length,j=P.length,m=new B(M),g=m.d=[],u=0;S[u]==(P[u]||0);)++u;if(S[u]>(P[u]||0)&&--c,s==null?N=s=B.precision:o?N=s+(Ui(n)-Ui(a))+1:N=s,N<0)return new B(0);if(N=N/rs+2|0,u=0,T==1)for(d=0,S=S[0],N++;(u<j||d)&&N--;u++)C=d*go+(P[u]||0),g[u]=C/S|0,d=C%S|0;else{for(d=go/(S[0]+1)|0,d>1&&(S=e(S,d),P=e(P,d),T=S.length,j=P.length),_=T,x=P.slice(0,T),v=x.length;v<T;)x[v++]=0;k=S.slice(),k.unshift(0),I=S[0],S[1]>=go/2&&++I;do d=0,l=t(S,x,T,v),l<0?(y=x[0],T!=v&&(y=y*go+(x[1]||0)),d=y/I|0,d>1?(d>=go&&(d=go-1),f=e(S,d),A=f.length,v=x.length,l=t(f,x,A,v),l==1&&(d--,r(f,T<A?k:S,A))):(d==0&&(l=d=1),f=S.slice()),A=f.length,A<v&&f.unshift(0),r(x,f,v),l==-1&&(v=x.length,l=t(S,x,T,v),l<1&&(d++,r(x,T<v?k:S,v))),v=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[v++]=P[_]||0:(x=[P[_]],v=1);while((_++<j||x[0]!==void 0)&&N--)}return g[0]||g.shift(),m.e=c,za(m,o?s+Ui(m)+1:s)}}();function hfe(e,t){var r,n,a,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Ui(e)>16)throw Error(HU+Ui(e));if(!e.s)return new d(Eu);for(bs=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Rg(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Eu),d.precision=l;;){if(a=za(a.times(e),l),r=r.times(++c),o=s.plus(cA(a,r,l)),Ph(o.d).slice(0,l)===Ph(s.d).slice(0,l)){for(;u--;)s=za(s.times(s),l);return d.precision=f,t==null?(bs=!0,za(s,f)):s}s=o}}function Ui(e){for(var t=e.e*rs,r=e.d[0];r>=10;r/=10)t++;return t}function OD(e,t,r){if(t>e.LN10.sd())throw bs=!0,r&&(e.precision=r),Error(Id+"LN10 precision limit exceeded");return za(new e(e.LN10),t)}function Qm(e){for(var t="";e--;)t+="0";return t}function mC(e,t){var r,n,a,s,o,l,c,u,d,f=1,A=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(Id+(m.s?"NaN":"-Infinity"));if(m.eq(Eu))return new x(0);if(t==null?(bs=!1,u=v):u=t,m.eq(10))return t==null&&(bs=!0),OD(x,u);if(u+=A,x.precision=u,r=Ph(g),n=r.charAt(0),s=Ui(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Ph(m.d),n=r.charAt(0),f++;s=Ui(m),n>1?(m=new x("0."+r),s++):m=new x(n+"."+r.slice(1))}else return c=OD(x,u+2,v).times(s+""),m=mC(new x(n+"."+r.slice(1)),u-A).plus(c),x.precision=v,t==null?(bs=!0,za(m,v)):m;for(l=o=m=cA(m.minus(Eu),m.plus(Eu),u),d=za(m.times(m),u),a=3;;){if(o=za(o.times(d),u),c=l.plus(cA(o,new x(a),u)),Ph(c.d).slice(0,u)===Ph(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(OD(x,u+2,v).times(s+""))),l=cA(l,new x(f),u),x.precision=v,t==null?(bs=!0,za(l,v)):l;l=c,a+=2}}function lY(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Iy(r/rs),e.d=[],n=(r+1)%rs,r<0&&(n+=rs),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=rs;n<a;)e.d.push(+t.slice(n,n+=rs));t=t.slice(n),n=rs-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),bs&&(e.e>D_||e.e<-D_))throw Error(HU+r)}else e.s=0,e.e=0,e.d=[0];return e}function za(e,t,r){var n,a,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=rs,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/rs),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=rs,a=n-rs+o}if(r!==void 0&&(s=Rg(10,o-a-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Rg(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=Ui(e),f.length=1,t=t-s-1,f[0]=Rg(10,(rs-t%rs)%rs),e.e=Iy(-t/rs)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Rg(10,rs-n),f[d]=a>0?(u/Rg(10,o-a)%Rg(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==go&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=go)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(bs&&(e.e>D_||e.e<-D_))throw Error(HU+Ui(e));return e}function Afe(e,t){var r,n,a,s,o,l,c,u,d,f,A=e.constructor,m=A.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new A(e),bs?za(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/rs),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=go-1;--c[s],c[a]+=go}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,bs?za(t,m):t):new A(0)}function qx(e,t,r){var n,a=Ui(e),s=Ph(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+Qm(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Qm(-a-1)+s,r&&(n=r-o)>0&&(s+=Qm(n))):a>=o?(s+=Qm(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+Qm(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=Qm(n))),e.s<0?"-"+s:s}function cY(e,t){if(e.length>t)return e.length=t,!0}function mfe(e){var t,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(yx+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return lY(o,s.toString())}else if(typeof s!="string")throw Error(yx+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,nKe.test(s))lY(o,s);else throw Error(yx+s)}if(a.prototype=Nr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=mfe,a.config=a.set=aKe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function aKe(e){if(!e||typeof e!="object")throw Error(Id+"Object expected");var t,r,n,a=["precision",1,By,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Iy(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(yx+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(yx+r+": "+n);return this}var QU=mfe(rKe);Eu=new QU(1);const _a=QU;var sKe=e=>e,pfe={},gfe=e=>e===pfe,uY=e=>function t(){return arguments.length===0||arguments.length===1&&gfe(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},xfe=(e,t)=>e===1?t:uY(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==pfe).length;return s>=e?t(...n):xfe(e-s,uY(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>gfe(d)?l.shift():d);return t(...u,...l)}))}),rT=e=>xfe(e.length,e),NR=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},iKe=rT((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),oKe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return sKe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}},CR=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),vfe=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=a,r=e(...a)),r}};function bfe(e){var t;return e===0?t=1:t=Math.floor(new _a(e).abs().log(10).toNumber())+1,t}function yfe(e,t,r){for(var n=new _a(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}rT((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});rT((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});rT((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var wfe=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Nfe=(e,t,r)=>{if(e.lte(0))return new _a(0);var n=bfe(e.toNumber()),a=new _a(10).pow(n),s=e.div(a),o=n!==1?.05:.1,l=new _a(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new _a(c.toNumber()):new _a(Math.ceil(c.toNumber()))},lKe=(e,t,r)=>{var n=new _a(1),a=new _a(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new _a(10).pow(bfe(e)-1),a=new _a(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new _a(Math.floor(e)))}else e===0?a=new _a(Math.floor((t-1)/2)):r||(a=new _a(Math.floor(e)));var o=Math.floor((t-1)/2),l=oKe(iKe(c=>a.add(new _a(c-o).mul(n)).toNumber()),NR);return l(0,t)},Cfe=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new _a(0),tickMin:new _a(0),tickMax:new _a(0)};var o=Nfe(new _a(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new _a(0):(l=new _a(t).add(r).div(2),l=l.sub(new _a(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new _a(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?Cfe(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new _a(c).mul(o)),tickMax:l.add(new _a(u).mul(o))})};function cKe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[o,l]=wfe([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...NR(0,n-1).map(()=>1/0)]:[...NR(0,n-1).map(()=>-1/0),l];return t>r?CR(c):c}if(o===l)return lKe(o,n,a);var{step:u,tickMin:d,tickMax:f}=Cfe(o,l,s,a,0),A=yfe(d,f.add(new _a(.1).mul(u)),u);return t>r?CR(A):A}function uKe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=wfe([r,n]);if(s===-1/0||o===1/0)return[r,n];if(s===o)return[s];var l=Math.max(t,2),c=Nfe(new _a(o).sub(s).div(l-1),a,0),u=[...yfe(new _a(s),new _a(o),c),o];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?CR(u):u}var dKe=vfe(cKe),fKe=vfe(uKe),Efe=e=>e.rootProps.maxBarSize,hKe=e=>e.rootProps.barGap,jfe=e=>e.rootProps.barCategoryGap,AKe=e=>e.rootProps.barSize,mE=e=>e.rootProps.stackOffset,VU=e=>e.options.chartName,$U=e=>e.rootProps.syncId,kfe=e=>e.rootProps.syncMethod,zU=e=>e.options.eventEmitter,_h={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},_c={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},nT=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},mKe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:_h.angleAxisId,includeHidden:!1,name:void 0,reversed:_h.reversed,scale:_h.scale,tick:_h.tick,tickCount:void 0,ticks:void 0,type:_h.type,unit:void 0},pKe={allowDataOverflow:_c.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_c.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_c.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_c.scale,tick:_c.tick,tickCount:_c.tickCount,ticks:void 0,type:_c.type,unit:void 0},gKe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:_h.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_h.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_h.scale,tick:_h.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},xKe={allowDataOverflow:_c.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_c.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_c.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_c.scale,tick:_c.tick,tickCount:_c.tickCount,ticks:void 0,type:"category",unit:void 0},Dy=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?gKe:mKe,pE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?xKe:pKe,aT=e=>e.polarOptions,GU=Nt([VA,$A,eo],rde),Sfe=Nt([aT,GU],(e,t)=>{if(e!=null)return ic(e.innerRadius,t,0)}),_fe=Nt([aT,GU],(e,t)=>{if(e!=null)return ic(e.outerRadius,t,t*.8)}),vKe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Tfe=Nt([aT],vKe),bKe=Nt([Dy,Tfe],nT),Bfe=Nt([GU,Sfe,_fe],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),yKe=Nt([pE,Bfe],nT),Oy=Nt([jn,aT,Sfe,_fe,VA,$A],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:ic(o,a,a/2),cy:ic(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ga=(e,t)=>t,gE=(e,t,r)=>r;function sT(e){return e==null?void 0:e.id}var ro=e=>{var t=jn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Py=e=>e.tooltip.settings.axisId,no=e=>{var t=ro(e),r=Py(e);return Fy(e,t,r)};function Ife(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var u=sT(o);c.forEach((d,f)=>{var A=a==null?f:String(Ta(d,a,null)),m=Ta(d,o.dataKey,0),g;s.has(A)?g=s.get(A):g={},Object.assign(g,{[u]:m}),s.set(A,g)})}}),Array.from(s.values())}function iT(e){return e.stackId!=null&&e.dataKey!=null}function dY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dY(Object(r),!0).forEach(function(n){wKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wKe(e,t,r){return(t=NKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NKe(e){var t=CKe(e,"string");return typeof t=="symbol"?t:t+""}function CKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ER=[0,"auto"],Au={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},GA=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Au},mu={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ER,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:V3},tg=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??mu},EKe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qU=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??EKe},Ni=(e,t,r)=>{switch(t){case"xAxis":return GA(e,r);case"yAxis":return tg(e,r);case"zAxis":return qU(e,r);case"angleAxis":return Dy(e,r);case"radiusAxis":return pE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},jKe=(e,t,r)=>{switch(t){case"xAxis":return GA(e,r);case"yAxis":return tg(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Fy=(e,t,r)=>{switch(t){case"xAxis":return GA(e,r);case"yAxis":return tg(e,r);case"angleAxis":return Dy(e,r);case"radiusAxis":return pE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Dfe=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function KU(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var oT=e=>e.graphicalItems.cartesianItems,kKe=Nt([Ga,gE],KU),WU=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),xE=Nt([oT,Ni,kKe],WU),Ofe=Nt([xE],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(iT)),Pfe=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Ffe=Nt([xE],Pfe),XU=e=>e.map(t=>t.data).filter(Boolean).flat(1),SKe=Nt([xE],XU),YU=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},JU=Nt([SKe,tT],YU),ZU=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ta(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Ta(a,n)}))):e.map(n=>({value:n})),lT=Nt([JU,Ni,xE],ZU);function Rfe(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Av(e){return e.filter(t=>t0(t)||t instanceof Date).map(Number).filter(t=>$c(t)===!1)}function _Ke(e,t,r){return!r||typeof t!="number"||$c(t)?[]:r.length?Av(r.flatMap(n=>{var a=Ta(e,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!Jo(s)||!Jo(o)))return[t-s,t+o]})):[]}var TKe=Nt([Ofe,tT,no],Ife),Lfe=(e,t,r)=>{var n={},a=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=l.map(sT);return[o,{stackedData:CVe(e,c,r),graphicalItems:l}]}))},pC=Nt([TKe,Ofe,mE],Lfe),Mfe=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=SVe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},BKe=Nt([pC,eg,Ga],Mfe),Ufe=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(o=>{var l,c,u=(l=n[o.id])===null||l===void 0?void 0:l.filter(f=>Rfe(a,f)),d=Ta(s,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:_Ke(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ta(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),cT=e=>e.errorBars,Hfe=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Rfe(r,n));Nt([Ffe,cT,Ga],Hfe);var IKe=Nt([JU,Ni,Ffe,cT,Ga],Ufe);function DKe(e){var{value:t}=e;if(t0(t)||t instanceof Date)return t}var fY=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Av(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},OKe=(e,t,r)=>{var n=e.map(DKe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Yce(n))?kde(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},e9=e=>{var t;if(e==null||!("domain"in e))return ER;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Av(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ER},P_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},Qfe=e=>e.referenceElements.dots,Ry=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),PKe=Nt([Qfe,Ga,gE],Ry),Vfe=e=>e.referenceElements.areas,FKe=Nt([Vfe,Ga,gE],Ry),$fe=e=>e.referenceElements.lines,RKe=Nt([$fe,Ga,gE],Ry),zfe=(e,t)=>{var r=Av(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},LKe=Nt(PKe,Ga,zfe),Gfe=(e,t)=>{var r=Av(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},MKe=Nt([FKe,Ga],Gfe),qfe=(e,t)=>{var r=Av(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},UKe=Nt(RKe,Ga,qfe),HKe=Nt(LKe,UKe,MKe,(e,t,r)=>P_(e,r,t)),Kfe=Nt([Ni],e9),t9=(e,t,r,n,a,s,o)=>{var l=eKe(t,e.allowDataOverflow);if(l!=null)return l;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?P_(r,a,fY(n)):P_(a,fY(n));return tKe(t,u,e.allowDataOverflow)},QKe=Nt([Ni,Kfe,BKe,IKe,HKe,jn,Ga],t9),VKe=[0,1],r9=(e,t,r,n,a,s,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=s0(t,s);return u&&l==null?kde(0,r.length):c==="category"?OKe(n,e,u):a==="expand"?VKe:o}},n9=Nt([Ni,jn,JU,lT,mE,Ga,QKe],r9),Wfe=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:o}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(lE(s));return l in S2?l:"point"}}},rg=Nt([Ni,jn,Dfe,VU,Ga],Wfe);function $Ke(e){if(e!=null){if(e in S2)return S2[e]();var t="scale".concat(lE(e));if(t in S2)return S2[t]()}}function uT(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=$Ke(t);if(a!=null){var s=a.domain(r).range(n);return vVe(s),s}}}var a9=(e,t,r)=>{var n=e9(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&X1(e))return dKe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&X1(e))return fKe(e,t.tickCount,t.allowDecimals)}},s9=Nt([n9,Fy,rg],a9),i9=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&X1(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return t},zKe=Nt([Ni,n9,s9,Ga],i9),GKe=Nt(lT,Ni,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Av(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var o=n[s+1]-n[s];r=Math.min(r,o)}return r/a}}),Xfe=Nt(GKe,jn,jfe,eo,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Jo(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var o=ic(r,e*s),l=e*s/2;return l-o-(l-o)/s*o}return 0}),qKe=(e,t)=>{var r=GA(e,t);return r==null||typeof r.padding!="string"?0:Xfe(e,"xAxis",t,r.padding)},KKe=(e,t)=>{var r=tg(e,t);return r==null||typeof r.padding!="string"?0:Xfe(e,"yAxis",t,r.padding)},WKe=Nt(GA,qKe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),XKe=Nt(tg,KKe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),YKe=Nt([eo,WKe,z3,$3,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),JKe=Nt([eo,jn,XKe,z3,$3,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),vE=(e,t,r,n)=>{var a;switch(t){case"xAxis":return YKe(e,r,n);case"yAxis":return JKe(e,r,n);case"zAxis":return(a=qU(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Tfe(e);case"radiusAxis":return Bfe(e,r);default:return}},Yfe=Nt([Ni,vE],nT),Ly=Nt([Ni,rg,zKe,Yfe],uT);Nt([xE,cT,Ga],Hfe);function Jfe(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dT=(e,t)=>t,fT=(e,t,r)=>r,ZKe=Nt(fU,dT,fT,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Jfe)),eWe=Nt(hU,dT,fT,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Jfe)),Zfe=(e,t)=>({width:e.width,height:t.height}),tWe=(e,t)=>{var r=typeof t.width=="number"?t.width:V3;return{width:r,height:e.height}},ehe=Nt(eo,GA,Zfe),rWe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},nWe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},aWe=Nt($A,eo,ZKe,dT,fT,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=Zfe(t,l);o==null&&(o=rWe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),sWe=Nt(VA,eo,eWe,dT,fT,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=tWe(t,l);o==null&&(o=nWe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),iWe=(e,t)=>{var r=eo(e),n=GA(e,t);if(n!=null){var a=aWe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},oWe=(e,t)=>{var r=eo(e),n=tg(e,t);if(n!=null){var a=sWe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},the=Nt(eo,tg,(e,t)=>{var r=typeof t.width=="number"?t.width:V3;return{width:r,height:e.height}}),hY=(e,t,r)=>{switch(t){case"xAxis":return ehe(e,r).width;case"yAxis":return the(e,r).height;default:return}},rhe=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=s0(e,n),c=t.map(u=>u.value);if(o&&l&&s==="category"&&a&&Yce(c))return c}},bE=Nt([jn,lT,Ni,Ga],rhe),o9=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=s0(e,n);if(o&&(a==="number"||s!=="auto"))return t.map(l=>l.value)}},l9=Nt([jn,lT,Fy,Ga],o9),AY=Nt([jn,jKe,rg,Ly,bE,l9,vE,s9,Ga],(e,t,r,n,a,s,o,l,c)=>{if(t==null)return null;var u=s0(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),nhe=(e,t,r,n,a,s,o,l,c)=>{if(!(t==null||n==null)){var u=s0(e,c),{type:d,ticks:f,tickCount:A}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&s!=null&&s.length>=2?wo(s[0]-s[1])*2*g:g;var x=f||a;if(x){var v=x.map((y,N)=>{var C=o?o.indexOf(y):y;return{index:N,coordinate:n(C)+g,value:y,offset:g}});return v.filter(y=>!$c(y.coordinate))}return u&&l?l.map((y,N)=>({coordinate:n(y)+g,value:y,index:N,offset:g})):n.ticks?n.ticks(A).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,N)=>({coordinate:n(y)+g,value:o?o[y]:y,index:N,offset:g}))}},ahe=Nt([jn,Fy,rg,Ly,s9,vE,bE,l9,Ga],nhe),she=(e,t,r,n,a,s,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=s0(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?wo(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Dp=Nt([jn,Fy,Ly,vE,bE,l9,Ga],she),Op=Nt(Ni,Ly,(e,t)=>{if(!(e==null||t==null))return O_(O_({},e),{},{scale:t})}),lWe=Nt([Ni,rg,n9,Yfe],uT);Nt((e,t,r)=>qU(e,r),lWe,(e,t)=>{if(!(e==null||t==null))return O_(O_({},e),{},{scale:t})});var cWe=Nt([jn,fU,hU],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ihe=e=>e.options.defaultTooltipEventType,ohe=e=>e.options.validateTooltipEventTypes;function lhe(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function c9(e,t){var r=ihe(e),n=ohe(e);return lhe(t,r,n)}function uWe(e){return gr(t=>c9(t,e))}var che=(e,t)=>{var r,n=Number(t);if(!($c(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},dWe=e=>e.tooltip.settings,Wm={active:!1,index:null,dataKey:void 0,coordinate:void 0},fWe={itemInteraction:{click:Wm,hover:Wm},axisInteraction:{click:Wm,hover:Wm},keyboardInteraction:Wm,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},uhe=Lu({name:"tooltip",initialState:fWe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=lA(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:hWe,removeTooltipEntrySettings:AWe,setTooltipSettingsState:mWe,setActiveMouseOverItemIndex:dhe,mouseLeaveItem:pWe,mouseLeaveChart:fhe,setActiveClickItemIndex:gWe,setMouseOverAxisIndex:hhe,setMouseClickAxisIndex:xWe,setSyncInteraction:jR,setKeyboardInteraction:kR}=uhe.actions,vWe=uhe.reducer;function mY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mY(Object(r),!0).forEach(function(n){bWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bWe(e,t,r){return(t=yWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yWe(e){var t=wWe(e,"string");return typeof t=="symbol"?t:t+""}function wWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NWe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function CWe(e){return e.index!=null}var Ahe=(e,t,r,n)=>{if(t==null)return Wm;var a=NWe(e,t,r);if(a==null)return Wm;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(CWe(a)){if(s)return jk(jk({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return jk(jk({},Wm),{},{coordinate:a.coordinate})},u9=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Jo(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},mhe=(e,t,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},phe=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===a})},yE=e=>e.options.tooltipPayloadSearcher,My=e=>e.tooltip;function pY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pY(Object(r),!0).forEach(function(n){EWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EWe(e,t,r){return(t=jWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jWe(e){var t=kWe(e,"string");return typeof t=="symbol"?t:t+""}function kWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SWe(e,t){return e??t}var ghe=(e,t,r,n,a,s,o)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((A,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=SWe(x,l),N=Array.isArray(y)?ade(y,u,d):y,C=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,_=v==null?void 0:v.nameKey,j;if(n!=null&&n.dataKey&&Array.isArray(N)&&!Array.isArray(N[0])&&o==="axis"?j=Jce(N,n.dataKey,a):j=s(N,t,c,_),Array.isArray(j))j.forEach(T=>{var k=gY(gY({},v),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});A.push(WW({tooltipEntrySettings:k,dataKey:T.dataKey,payload:T.payload,value:Ta(T.payload,T.dataKey),name:T.name}))});else{var I;A.push(WW({tooltipEntrySettings:v,dataKey:C,payload:j,value:Ta(j,C),name:(I=Ta(j,_))!==null&&I!==void 0?I:v==null?void 0:v.name}))}return A},f)}},d9=Nt([no,jn,Dfe,VU,ro],Wfe),_We=Nt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),TWe=Nt([ro,Py],KU),wE=Nt([_We,no,TWe],WU),BWe=Nt([wE],e=>e.filter(iT)),IWe=Nt([wE],XU),Uy=Nt([IWe,eg],YU),DWe=Nt([BWe,eg,no],Ife),f9=Nt([Uy,no,wE],ZU),OWe=Nt([no],e9),PWe=Nt([wE],e=>e.filter(iT)),FWe=Nt([DWe,PWe,mE],Lfe),RWe=Nt([FWe,eg,ro],Mfe),LWe=Nt([wE],Pfe),MWe=Nt([Uy,no,LWe,cT,ro],Ufe),UWe=Nt([Qfe,ro,Py],Ry),HWe=Nt([UWe,ro],zfe),QWe=Nt([Vfe,ro,Py],Ry),VWe=Nt([QWe,ro],Gfe),$We=Nt([$fe,ro,Py],Ry),zWe=Nt([$We,ro],qfe),GWe=Nt([HWe,zWe,VWe],P_),qWe=Nt([no,OWe,RWe,MWe,GWe,jn,ro],t9),xhe=Nt([no,jn,Uy,f9,mE,ro,qWe],r9),KWe=Nt([xhe,no,d9],a9),WWe=Nt([no,xhe,KWe,ro],i9),vhe=e=>{var t=ro(e),r=Py(e),n=!1;return vE(e,t,r,n)},bhe=Nt([no,vhe],nT),yhe=Nt([no,d9,WWe,bhe],uT),XWe=Nt([jn,f9,no,ro],rhe),YWe=Nt([jn,f9,no,ro],o9),JWe=(e,t,r,n,a,s,o,l)=>{if(t){var{type:c}=t,u=s0(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?wo(a[0]-a[1])*2*f:f,u&&o?o.map((A,m)=>({coordinate:n(A)+f,value:A,index:m,offset:f})):n.domain().map((A,m)=>({coordinate:n(A)+f,value:s?s[A]:A,index:m,offset:f}))}}},qA=Nt([jn,no,d9,yhe,vhe,XWe,YWe,ro],JWe),h9=Nt([ihe,ohe,dWe],(e,t,r)=>lhe(r.shared,e,t)),whe=e=>e.tooltip.settings.trigger,A9=e=>e.tooltip.settings.defaultIndex,hT=Nt([My,h9,whe,A9],Ahe),Pp=Nt([hT,Uy],u9),Nhe=Nt([qA,Pp],che),Che=Nt([hT],e=>{if(e)return e.dataKey}),Ehe=Nt([My,h9,whe,A9],phe),ZWe=Nt([VA,$A,jn,eo,qA,A9,Ehe,yE],mhe),eXe=Nt([hT,ZWe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),tXe=Nt([hT],e=>e.active),rXe=Nt([Ehe,Pp,eg,no,Nhe,yE,h9],ghe),nXe=Nt([rXe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function xY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xY(Object(r),!0).forEach(function(n){aXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aXe(e,t,r){return(t=sXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sXe(e){var t=iXe(e,"string");return typeof t=="symbol"?t:t+""}function iXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oXe=()=>gr(no),lXe=()=>{var e=oXe(),t=gr(qA),r=gr(yhe);return zx(vY(vY({},e),{},{scale:r}),t)},jhe=()=>gr(VU),m9=(e,t)=>t,khe=(e,t,r)=>r,p9=(e,t,r,n)=>n,cXe=Nt(qA,e=>F3(e,t=>t.coordinate)),g9=Nt([My,m9,khe,p9],Ahe),She=Nt([g9,Uy],u9),uXe=(e,t,r)=>{if(t!=null){var n=My(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},_he=Nt([My,m9,khe,p9],phe),F_=Nt([VA,$A,jn,eo,qA,p9,_he,yE],mhe),dXe=Nt([g9,F_],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),The=Nt(qA,She,che),fXe=Nt([_he,She,eg,no,The,yE,m9],ghe),hXe=Nt([g9],e=>({isActive:e.active,activeIndex:e.index})),AXe=(e,t,r,n,a,s,o,l)=>{if(!(!e||!t||!n||!a||!s)){var c=_Ve(e.chartX,e.chartY,t,r,l);if(c){var u=BVe(c,t),d=gVe(u,o,s,n,a),f=TVe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function SR(){return SR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SR.apply(null,arguments)}function bY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bY(Object(r),!0).forEach(function(n){mXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mXe(e,t,r){return(t=pXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pXe(e){var t=gXe(e,"string");return typeof t=="symbol"?t:t+""}function gXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xXe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,A=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=S$e;else if(u==="BarChart")m=_$e(o,d,a,s),g=Nde;else if(o==="radial"){var{cx:x,cy:v,radius:y,startAngle:N,endAngle:C}=Cde(d);m={cx:x,cy:v,startAngle:N,endAngle:C,innerRadius:y,outerRadius:y},g=jde}else m={points:hze(o,d,a)},g=oN;var _=typeof l=="object"&&"className"in l?l.className:void 0,j=kk(kk(kk(kk({stroke:"#ccc",pointerEvents:"none"},a),m),Wn(l,!1)),{},{payload:f,payloadIndex:A,className:bn("recharts-tooltip-cursor",_)});return w.isValidElement(l)?w.cloneElement(l,j):w.createElement(g,j)}function vXe(e){var t=lXe(),r=fde(),n=G3(),a=jhe();return w.createElement(xXe,SR({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var Bhe=w.createContext(null),bXe=()=>w.useContext(Bhe),PD={exports:{}},yY;function yXe(){return yY||(yY=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,A),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,m=f.length,g=new Array(m);A<m;A++)g[A]=f[A].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,A,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,N,C;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,A),!0;case 5:return v.fn.call(v.context,d,f,A,m),!0;case 6:return v.fn.call(v.context,d,f,A,m,g),!0}for(C=1,N=new Array(y-1);C<y;C++)N[C-1]=arguments[C];v.fn.apply(v.context,N)}else{var _=v.length,j;for(C=0;C<_;C++)switch(v[C].once&&this.removeListener(u,v[C].fn,void 0,!0),y){case 1:v[C].fn.call(v[C].context);break;case 2:v[C].fn.call(v[C].context,d);break;case 3:v[C].fn.call(v[C].context,d,f);break;case 4:v[C].fn.call(v[C].context,d,f,A);break;default:if(!N)for(j=1,N=new Array(y-1);j<y;j++)N[j-1]=arguments[j];v[C].fn.apply(v[C].context,N)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,A){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!A||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||A&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(PD)),PD.exports}var wXe=yXe();const NXe=oc(wXe);var gC=new NXe,_R="recharts.syncEvent.tooltip",wY="recharts.syncEvent.brush";function AT(e,t){if(t){var r=Number.parseInt(t,10);if(!$c(r))return e==null?void 0:e[r]}}var CXe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Ihe=Lu({name:"options",initialState:CXe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),EXe=Ihe.reducer,{createEventEmitter:jXe}=Ihe.actions;function kXe(e){return e.tooltip.syncInteraction}var SXe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Dhe=Lu({name:"chartData",initialState:SXe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:NY,setDataStartEndIndexes:_Xe,setComputedData:HSt}=Dhe.actions,TXe=Dhe.reducer,Ohe=()=>{};function BXe(){var e=gr($U),t=gr(zU),r=cs(),n=gr(kfe),a=gr(qA),s=G3(),o=AU(),l=gr(c=>c.rootProps.className);w.useEffect(()=>{if(e==null)return Ohe;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var A;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,m);A=a[g]}else n==="value"&&(A=a.find(I=>String(I.value)===d.payload.label));var{coordinate:x}=d.payload;if(A==null||d.payload.active===!1||x==null||o==null){r(jR({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,N=Math.min(v,o.x+o.width),C=Math.min(y,o.y+o.height),_={x:s==="horizontal"?A.coordinate:N,y:s==="horizontal"?C:A.coordinate},j=jR({active:d.payload.active,coordinate:_,dataKey:d.payload.dataKey,index:String(A.index),label:d.payload.label});r(j)}}};return gC.on(_R,c),()=>{gC.off(_R,c)}},[l,r,t,e,n,a,s,o])}function IXe(){var e=gr($U),t=gr(zU),r=cs();w.useEffect(()=>{if(e==null)return Ohe;var n=(a,s,o)=>{t!==o&&e===a&&r(_Xe(s))};return gC.on(wY,n),()=>{gC.off(wY,n)}},[r,t,e])}function DXe(){var e=cs();w.useEffect(()=>{e(jXe())},[e]),BXe(),IXe()}function OXe(e,t,r,n,a,s){var o=gr(A=>uXe(A,e,t)),l=gr(zU),c=gr($U),u=gr(kfe),d=gr(kXe),f=d==null?void 0:d.active;w.useEffect(()=>{if(!f&&c!=null&&l!=null){var A=jR({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});gC.emit(_R,c,A,l)}},[f,r,o,a,n,l,c,u,s])}function CY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CY(Object(r),!0).forEach(function(n){PXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PXe(e,t,r){return(t=FXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FXe(e){var t=RXe(e,"string");return typeof t=="symbol"?t:t+""}function RXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LXe(e){return e.dataKey}function MXe(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(i$e,t)}var jY=[],UXe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Yp.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function qo(e){var t=Gc(e,UXe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:A,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:N,portal:C,axisId:_}=t,j=cs(),I=typeof N=="number"?String(N):N;w.useEffect(()=>{j(mWe({shared:v,trigger:y,axisId:_,active:r,defaultIndex:I}))},[j,v,y,_,r,I]);var T=AU(),k=pde(),B=uWe(v),{activeIndex:M,isActive:P}=gr(J=>hXe(J,B,y,I)),S=gr(J=>fXe(J,B,y,I)),L=gr(J=>The(J,B,y,I)),U=gr(J=>dXe(J,B,y,I)),q=S,H=bXe(),z=r??P,[W,Z]=Bue([q,z]),V=B==="axis"?L:void 0;OXe(B,y,U,V,M,z);var Y=C??H;if(Y==null)return null;var R=q??jY;z||(R=jY),l&&R.length&&(R=Eue(q.filter(J=>J.value!=null&&(J.hide!==!0||t.includeHidden)),d,LXe));var O=R.length>0,K=w.createElement(h$e,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:z,coordinate:U,hasPayload:O,offset:u,position:f,reverseDirection:A,useTranslate3d:m,viewBox:T,wrapperStyle:g,lastBoundingBox:W,innerRef:Z,hasPortalFromProps:!!C},MXe(o,EY(EY({},t),{},{payload:R,label:V,active:z,coordinate:U,accessibilityLayer:k})));return w.createElement(w.Fragment,null,q7.createPortal(K,Y),z&&w.createElement(vXe,{cursor:x,tooltipEventType:B,coordinate:U,payload:q,index:M}))}var FD={},RD={},LD={},kY;function HXe(){return kY||(kY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),x()};let A=null;const m=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},n)},g=()=>{A!==null&&(clearTimeout(A),A=null)},x=()=>{g(),o=void 0,l=null},v=()=>{d()},y=function(...N){if(a!=null&&a.aborted)return;o=this,l=N;const C=A==null;m(),c&&C&&d()};return y.schedule=m,y.cancel=x,y.flush=v,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(LD)),LD}var SY;function QXe(){return SY||(SY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HXe();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const A=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),A.cancel(),A.schedule(),d):(A.apply(this,x),d)},g=()=>(A.flush(),d);return m.cancel=A.cancel,m.flush=g,m}e.debounce=r}(RD)),RD}var _Y;function VXe(){return _Y||(_Y=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QXe();function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r}(FD)),FD}var MD,TY;function $Xe(){return TY||(TY=1,MD=VXe().throttle),MD}var zXe=$Xe();const GXe=oc(zXe);var lN=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function BY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BY(Object(r),!0).forEach(function(n){qXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qXe(e,t,r){return(t=KXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KXe(e){var t=WXe(e,"string");return typeof t=="symbol"?t:t+""}function WXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ko=w.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:A,onResize:m,style:g={}}=e,x=w.useRef(null),v=w.useRef();v.current=m,w.useImperativeHandle(t,()=>x.current);var[y,N]=w.useState({containerWidth:n.width,containerHeight:n.height}),C=w.useCallback((j,I)=>{N(T=>{var k=Math.round(j),B=Math.round(I);return T.containerWidth===k&&T.containerHeight===B?T:{containerWidth:k,containerHeight:B}})},[]);w.useEffect(()=>{var j=B=>{var M,{width:P,height:S}=B[0].contentRect;C(P,S),(M=v.current)===null||M===void 0||M.call(v,P,S)};d>0&&(j=GXe(j,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(j),{width:T,height:k}=x.current.getBoundingClientRect();return C(T,k),I.observe(x.current),()=>{I.disconnect()}},[C,d]);var _=w.useMemo(()=>{var{containerWidth:j,containerHeight:I}=y;if(j<0||I<0)return null;lN(Zg(a)||Zg(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),lN(!r||r>0,"The aspect(%s) must be greater than zero.",r);var T=Zg(a)?j:a,k=Zg(s)?I:s;return r&&r>0&&(T?k=T/r:k&&(T=k*r),c&&k>c&&(k=c)),lN(T>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,k,a,s,o,l,r),w.Children.map(u,B=>w.cloneElement(B,{width:T,height:k,style:UD({width:T,height:k},B.props.style)}))},[r,u,s,c,l,o,y,a]);return w.createElement("div",{id:f?"".concat(f):void 0,className:bn("recharts-responsive-container",A),style:UD(UD({},g),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:x},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},_))}),SA=e=>null;SA.displayName="Cell";function XXe(e,t,r){return(t=YXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YXe(e){var t=JXe(e,"string");return typeof t=="symbol"?t:t+""}function JXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ZXe{constructor(t){XXe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function IY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eYe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IY(Object(r),!0).forEach(function(n){tYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tYe(e,t,r){return(t=rYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rYe(e){var t=nYe(e,"string");return typeof t=="symbol"?t:t+""}function nYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aYe={cacheSize:2e3,enableCache:!0},Phe=eYe({},aYe),DY=new ZXe(Phe.cacheSize),sYe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},OY="recharts_measurement_span";function iYe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var PY=(e,t)=>{try{var r=document.getElementById(OY);r||(r=document.createElement("span"),r.setAttribute("id",OY),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,sYe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},cN=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Yp.isSsr)return{width:0,height:0};if(!Phe.enableCache)return PY(t,r);var n=iYe(t,r),a=DY.get(n);if(a)return a;var s=PY(t,r);return DY.set(n,s),s},FY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oYe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,lYe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Fhe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},cYe=Object.keys(Fhe),Lb="NaN";function uYe(e,t){return e*Fhe[t]}class Ec{static parse(t){var r,[,n,a]=(r=lYe.exec(t))!==null&&r!==void 0?r:[];return new Ec(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,$c(t)&&(this.unit=""),r!==""&&!oYe.test(r)&&(this.num=NaN,this.unit=""),cYe.includes(r)&&(this.num=uYe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ec(NaN,""):new Ec(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ec(NaN,""):new Ec(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ec(NaN,""):new Ec(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ec(NaN,""):new Ec(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return $c(this.num)}}function Rhe(e){if(e.includes(Lb))return Lb;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=FY.exec(t))!==null&&r!==void 0?r:[],o=Ec.parse(n??""),l=Ec.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Lb;t=t.replace(FY,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,A]=(u=RY.exec(t))!==null&&u!==void 0?u:[],m=Ec.parse(d??""),g=Ec.parse(A??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return Lb;t=t.replace(RY,x.toString())}return t}var LY=/\(([^()]*)\)/;function dYe(e){for(var t=e,r;(r=LY.exec(t))!=null;){var[,n]=r;t=t.replace(LY,Rhe(n))}return t}function fYe(e){var t=e.replace(/\s+/g,"");return t=dYe(t),t=Rhe(t),t}function hYe(e){try{return fYe(e)}catch{return Lb}}function HD(e){var t=hYe(e.slice(5,-1));return t===Lb?"":t}var AYe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],mYe=["dx","dy","angle","className","breakAll"];function TR(){return TR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TR.apply(null,arguments)}function MY(e,t){if(e==null)return{};var r,n,a=pYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Lhe=/[ \f\n\r\t\v\u2028\u2029]+/,Mhe=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];es(t)||(r?a=t.toString().split(""):a=t.toString().split(Lhe));var s=a.map(l=>({word:l,width:cN(l,n).width})),o=r?0:cN("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},gYe=(e,t,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=e,u=mr(s),d=o,f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((S,L)=>{var{word:U,width:q}=L,H=S[S.length-1];if(H&&(n==null||a||H.width+q+r<Number(n)))H.words.push(U),H.width+=q+r;else{var z={words:[U],width:q};S.push(z)}return S},[])},A=f(t),m=M=>M.reduce((P,S)=>P.width>S.width?P:S);if(!u||a)return A;var g=A.length>s||m(A).width>Number(n);if(!g)return A;for(var x="",v=M=>{var P=d.slice(0,M),S=Mhe({breakAll:c,style:l,children:P+x}).wordsWithComputedWidth,L=f(S),U=L.length>s||m(L).width>Number(n);return[U,L]},y=0,N=d.length-1,C=0,_;y<=N&&C<=d.length-1;){var j=Math.floor((y+N)/2),I=j-1,[T,k]=v(I),[B]=v(j);if(!T&&!B&&(y=j+1),T&&B&&(N=j-1),!T&&B){_=k;break}C++}return _||A},UY=e=>{var t=es(e)?[]:e.toString().split(Lhe);return[{words:t}]},xYe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=e;if((t||r)&&!Yp.isSsr){var l,c,u=Mhe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return UY(n);return gYe({breakAll:s,children:n,maxLines:o,style:a},l,c,t,r)}return UY(n)},HY="#808080",Hy=w.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=HY}=e,d=MY(e,AYe),f=w.useMemo(()=>xYe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:A,dy:m,angle:g,className:x,breakAll:v}=d,y=MY(d,mYe);if(!t0(r)||!t0(n))return null;var N=r+(mr(A)?A:0),C=n+(mr(m)?m:0),_;switch(c){case"start":_=HD("calc(".concat(s,")"));break;case"middle":_=HD("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:_=HD("calc(".concat(f.length-1," * -").concat(a,")"));break}var j=[];if(o){var I=f[0].width,{width:T}=d;j.push("scale(".concat(mr(T)?T/I:1,")"))}return g&&j.push("rotate(".concat(g,", ").concat(N,", ").concat(C,")")),j.length&&(y.transform=j.join(" ")),w.createElement("text",TR({},Wn(y,!0),{ref:t,x:N,y:C,className:bn("recharts-text",x),textAnchor:l,fill:u.includes("url")?HY:u}),f.map((k,B)=>{var M=k.words.join(v?"":" ");return w.createElement("tspan",{x:N,dy:B===0?_:a,key:"".concat(M,"-").concat(B)},M)}))});Hy.displayName="Text";var vYe=["offset"],bYe=["labelRef"];function QY(e,t){if(e==null)return{};var r,n,a=yYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VY(Object(r),!0).forEach(function(n){wYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wYe(e,t,r){return(t=NYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NYe(e){var t=CYe(e,"string");return typeof t=="symbol"?t:t+""}function CYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q0.apply(null,arguments)}var EYe=e=>{var{value:t,formatter:r}=e,n=es(e.children)?t:e.children;return typeof r=="function"?r(n):n},x9=e=>e!=null&&typeof e=="function",jYe=(e,t)=>{var r=wo(t-e),n=Math.min(Math.abs(t-e),360);return r*n},kYe=(e,t,r,n)=>{var{position:a,offset:s,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:A,clockWise:m}=n,g=(u+d)/2,x=jYe(f,A),v=x>=0?1:-1,y,N;a==="insideStart"?(y=f+v*s,N=m):a==="insideEnd"?(y=A-v*s,N=!m):a==="end"&&(y=A+v*s,N=m),N=x<=0?N:!N;var C=da(l,c,g,y),_=da(l,c,g,y+(N?1:-1)*359),j="M".concat(C.x,",").concat(C.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(_.x,",").concat(_.y),I=es(e.id)?lC("recharts-radial-line-"):e.id;return w.createElement("text",q0({},r,{dominantBaseline:"central",className:bn("recharts-radial-bar-label",o)}),w.createElement("defs",null,w.createElement("path",{id:I,d:j})),w.createElement("textPath",{xlinkHref:"#".concat(I)},t))},SYe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=da(n,a,o+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var A=(s+o)/2,{x:m,y:g}=da(n,a,A,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},_Ye=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",A=u>0?"start":"end",m=l>=0?1:-1,g=m*n,x=m>0?"end":"start",v=m>0?"start":"end";if(a==="top"){var y={x:s+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return Hs(Hs({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(a==="bottom"){var N={x:s+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:A};return Hs(Hs({},N),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(a==="left"){var C={x:s-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return Hs(Hs({},C),r?{width:Math.max(C.x-r.x,0),height:c}:{})}if(a==="right"){var _={x:s+l+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Hs(Hs({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return a==="insideLeft"?Hs({x:s+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},j):a==="insideRight"?Hs({x:s+l-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},j):a==="insideTop"?Hs({x:s+l/2,y:o+d,textAnchor:"middle",verticalAnchor:A},j):a==="insideBottom"?Hs({x:s+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},j):a==="insideTopLeft"?Hs({x:s+g,y:o+d,textAnchor:v,verticalAnchor:A},j):a==="insideTopRight"?Hs({x:s+l-g,y:o+d,textAnchor:x,verticalAnchor:A},j):a==="insideBottomLeft"?Hs({x:s+g,y:o+c-d,textAnchor:v,verticalAnchor:f},j):a==="insideBottomRight"?Hs({x:s+l-g,y:o+c-d,textAnchor:x,verticalAnchor:f},j):a&&typeof a=="object"&&(mr(a.x)||Zg(a.x))&&(mr(a.y)||Zg(a.y))?Hs({x:s+ic(a.x,l),y:o+ic(a.y,c),textAnchor:"end",verticalAnchor:"end"},j):Hs({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)},TYe=e=>"cx"in e&&mr(e.cx);function Bc(e){var{offset:t=5}=e,r=QY(e,vYe),n=Hs({offset:t},r),{viewBox:a,position:s,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,A=gr(Oy),m=AU(),g=s==="center"?m:A??m,x=a||g;if(!x||es(o)&&es(l)&&!w.isValidElement(c)&&typeof c!="function")return null;var v=Hs(Hs({},n),{},{viewBox:x});if(w.isValidElement(c)){var{labelRef:y}=v,N=QY(v,bYe);return w.cloneElement(c,N)}var C;if(typeof c=="function"){if(C=w.createElement(c,v),w.isValidElement(C))return C}else C=EYe(n);var _=TYe(x),j=Wn(n,!0);if(_&&(s==="insideStart"||s==="insideEnd"||s==="end"))return kYe(n,C,j,x);var I=_?SYe(x,n.offset,n.position):_Ye(n,x);return w.createElement(Hy,q0({ref:f,className:bn("recharts-label",u)},j,I,{breakAll:d}),C)}Bc.displayName="Label";var Uhe=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:A,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(mr(g)&&mr(x)){if(mr(d)&&mr(f))return{x:d,y:f,width:g,height:x};if(mr(A)&&mr(m))return{x:A,y:m,width:g,height:x}}if(mr(d)&&mr(f))return{x:d,y:f,width:0,height:0};if(mr(t)&&mr(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:v};if(e.viewBox)return e.viewBox},BYe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?w.createElement(Bc,q0({key:"label-implicit"},n)):t0(e)?w.createElement(Bc,q0({key:"label-implicit",value:e},n)):w.isValidElement(e)?e.type===Bc?w.cloneElement(e,Hs({key:"label-implicit"},n)):w.createElement(Bc,q0({key:"label-implicit",content:e},n)):x9(e)?w.createElement(Bc,q0({key:"label-implicit",content:e},n)):e&&typeof e=="object"?w.createElement(Bc,q0({},e,{key:"label-implicit"},n)):null},IYe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,o=Uhe(t),l=cE(a,Bc).map((u,d)=>w.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=BYe(t.label,r||o,s);return[c,...l]};Bc.parseViewBox=Uhe;Bc.renderCallByParent=IYe;var QD={},VD={},$Y;function DYe(){return $Y||($Y=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(VD)),VD}var $D={},zY;function OYe(){return zY||(zY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}($D)),$D}var GY;function PYe(){return GY||(GY=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DYe(),r=OYe(),n=eU();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(QD)),QD}var zD,qY;function FYe(){return qY||(qY=1,zD=PYe().last),zD}var RYe=FYe();const Hhe=oc(RYe);var LYe=["valueAccessor"],MYe=["data","dataKey","clockWise","id","textBreakAll"];function R_(){return R_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R_.apply(null,arguments)}function KY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KY(Object(r),!0).forEach(function(n){UYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UYe(e,t,r){return(t=HYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HYe(e){var t=QYe(e,"string");return typeof t=="symbol"?t:t+""}function QYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XY(e,t){if(e==null)return{};var r,n,a=VYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $Ye=e=>Array.isArray(e.value)?Hhe(e.value):e.value;function uA(e){var{valueAccessor:t=$Ye}=e,r=XY(e,LYe),{data:n,dataKey:a,clockWise:s,id:o,textBreakAll:l}=r,c=XY(r,MYe);return!n||!n.length?null:w.createElement(Ua,{className:"recharts-label-list"},n.map((u,d)=>{var f=es(a)?t(u,d):Ta(u&&u.payload,a),A=es(o)?{}:{id:"".concat(o,"-").concat(d)};return w.createElement(Bc,R_({},Wn(u,!0),c,A,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:Bc.parseViewBox(es(s)?u:WY(WY({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}uA.displayName="LabelList";function zYe(e,t){return e?e===!0?w.createElement(uA,{key:"labelList-implicit",data:t}):w.isValidElement(e)||x9(e)?w.createElement(uA,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?w.createElement(uA,R_({data:t},e,{key:"labelList-implicit"})):null:null}function GYe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=cE(n,uA).map((o,l)=>w.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var s=zYe(e.label,t);return[s,...a]}uA.renderCallByParent=GYe;var qYe=["points","className","baseLinePoints","connectNulls"];function Mb(){return Mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mb.apply(null,arguments)}function KYe(e,t){if(e==null)return{};var r,n,a=WYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var YY=e=>e&&e.x===+e.x&&e.y===+e.y,XYe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{YY(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),YY(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},uN=(e,t)=>{var r=XYe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,o,l)=>"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},YYe=(e,t,r)=>{var n=uN(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(uN(t.reverse(),r).slice(1))},Qhe=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=KYe(e,qYe);if(!t||!t.length)return null;var o=bn("recharts-polygon",r);if(n&&n.length){var l=s.stroke&&s.stroke!=="none",c=YYe(t,n,a);return w.createElement("g",{className:o},w.createElement("path",Mb({},Wn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?w.createElement("path",Mb({},Wn(s,!0),{fill:"none",d:uN(t,a)})):null,l?w.createElement("path",Mb({},Wn(s,!0),{fill:"none",d:uN(n,a)})):null)}var u=uN(t,a);return w.createElement("path",Mb({},Wn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))};function BR(){return BR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BR.apply(null,arguments)}var mT=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=bn("recharts-dot",a);return t===+t&&r===+r&&n===+n?w.createElement("circle",BR({},Eo(e),z7(e),{className:s,cx:t,cy:r,r:n})):null},v9=e=>e.graphicalItems.polarItems,JYe=Nt([Ga,gE],KU),b9=Nt([v9,Ni,JYe],WU),ZYe=Nt([b9],XU),y9=Nt([ZYe,eT],YU),Vhe=Nt([y9,Ni,b9],ZU),eJe=Nt([y9,Ni,b9],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,o=Ta(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ta(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),JY=()=>{},tJe=Nt([Ni,Kfe,JY,eJe,JY,jn,Ga],t9),$he=Nt([Ni,jn,y9,Vhe,mE,Ga,tJe],r9),zhe=Nt([$he,Ni,rg],a9),rJe=Nt([Ni,$he,zhe,Ga],i9),w9=(e,t,r)=>{switch(t){case"angleAxis":return Dy(e,r);case"radiusAxis":return pE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},N9=(e,t,r)=>{switch(t){case"angleAxis":return bKe(e,r);case"radiusAxis":return yKe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Qy=Nt([w9,rg,rJe,N9],uT),Ghe=Nt([jn,Vhe,Fy,Ga],o9),Vy=Nt([jn,w9,rg,Qy,zhe,N9,bE,Ghe,Ga],nhe);Nt([jn,w9,Qy,N9,bE,Ghe,Ga],she);var nJe=(e,t)=>Vy(e,"angleAxis",t,!1),aJe=Nt([nJe],e=>{if(e)return e.map(t=>t.coordinate)}),sJe=(e,t)=>Vy(e,"radiusAxis",t,!1),iJe=Nt([sJe],e=>{if(e)return e.map(t=>t.coordinate)}),oJe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function lJe(e,t){if(e==null)return{};var r,n,a=cJe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cJe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _A(){return _A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_A.apply(null,arguments)}function ZY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZY(Object(r),!0).forEach(function(n){uJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uJe(e,t,r){return(t=dJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dJe(e){var t=fJe(e,"string");return typeof t=="symbol"?t:t+""}function fJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hJe=(e,t,r,n)=>{var a="";return n.forEach((s,o)=>{var l=da(t,r,e,s);o?a+="L ".concat(l.x,",").concat(l.y):a+="M ".concat(l.x,",").concat(l.y)}),a+="Z",a},AJe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:o}=e;if(!s||!s.length||!o)return null;var l=Y1({stroke:"#ccc"},Eo(e));return w.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=da(t,r,n,c),d=da(t,r,a,c);return w.createElement("line",_A({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},mJe=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=Y1(Y1({stroke:"#ccc"},Eo(e)),{},{fill:"none"});return w.createElement("circle",_A({},s,{className:bn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},pJe=e=>{var{radius:t,index:r}=e,n=Y1(Y1({stroke:"#ccc"},Eo(e)),{},{fill:"none"});return w.createElement("path",_A({},n,{className:bn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:hJe(t,e.cx,e.cy,e.polarAngles)}))},gJe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:w.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?w.createElement(mJe,_A({key:s},e,{radius:n,index:a})):w.createElement(pJe,_A({key:s},e,{radius:n,index:a}))}))},qhe=e=>{var t,r,n,a,s,o,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:A=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=lJe(e,oJe),N=gr(Oy),C=Y1({cx:(t=(r=N==null?void 0:N.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(n=(a=N==null?void 0:N.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(o=N==null?void 0:N.innerRadius)!==null&&o!==void 0?o:x)!==null&&s!==void 0?s:0,outerRadius:(l=(c=N==null?void 0:N.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:_,polarRadius:j,cx:I,cy:T,innerRadius:k,outerRadius:B}=C,M=gr(U=>aJe(U,f)),P=gr(U=>iJe(U,A)),S=Array.isArray(_)?_:M,L=Array.isArray(j)?j:P;return B<=0||S==null||L==null?null:w.createElement("g",{className:"recharts-polar-grid"},w.createElement(AJe,_A({cx:I,cy:T,innerRadius:k,outerRadius:B,gridType:u,radialLines:d},C,{polarAngles:S,polarRadius:L})),w.createElement(gJe,_A({cx:I,cy:T,innerRadius:k,outerRadius:B,gridType:u,radialLines:d},C,{polarAngles:S,polarRadius:L})))};qhe.displayName="PolarGrid";var GD={},qD={},eJ;function xJe(){return eJ||(eJ=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c>s&&(s=c,a=l)}return a}e.maxBy=t}(qD)),qD}var tJ;function vJe(){return tJ||(tJ=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xJe(),r=P3(),n=sU();function a(s,o){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(o??r.identity))}e.maxBy=a}(GD)),GD}var KD,rJ;function bJe(){return rJ||(rJ=1,KD=vJe().maxBy),KD}var yJe=bJe();const wJe=oc(yJe);var WD={},XD={},nJ;function NJe(){return nJ||(nJ=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c<s&&(s=c,a=l)}return a}e.minBy=t}(XD)),XD}var aJ;function CJe(){return aJ||(aJ=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NJe(),r=P3(),n=sU();function a(s,o){if(s!=null)return t.minBy(Array.from(s),n.iteratee(o??r.identity))}e.minBy=a}(WD)),WD}var YD,sJ;function EJe(){return sJ||(sJ=1,YD=CJe().minBy),YD}var jJe=EJe();const kJe=oc(jJe);var SJe={radiusAxis:{},angleAxis:{}},Khe=Lu({name:"polarAxis",initialState:SJe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:_Je,removeRadiusAxis:TJe,addAngleAxis:BJe,removeAngleAxis:IJe}=Khe.actions,DJe=Khe.reducer,OJe=["cx","cy","angle","axisLine"],PJe=["angle","tickFormatter","stroke","tick"];function xC(){return xC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xC.apply(null,arguments)}function iJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iJ(Object(r),!0).forEach(function(n){pT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pT(e,t,r){return(t=FJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FJe(e){var t=RJe(e,"string");return typeof t=="symbol"?t:t+""}function RJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Whe(e,t){if(e==null)return{};var r,n,a=LJe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function LJe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xhe="radiusAxis";function MJe(e){var t=cs();return w.useEffect(()=>(t(_Je(e)),()=>{t(TJe(e))})),null}var UJe=(e,t,r,n)=>{var{coordinate:a}=e;return da(r,n,a,t)},HJe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},QJe=(e,t,r,n)=>{var a=wJe(n,o=>o.coordinate||0),s=kJe(n,o=>o.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},VJe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,o=Whe(e,OJe),l=t.reduce((f,A)=>[Math.min(f[0],A.coordinate),Math.max(f[1],A.coordinate)],[1/0,-1/0]),c=da(r,n,l[0],a),u=da(r,n,l[1],a),d=Fh(Fh(Fh({},Eo(o)),{},{fill:"none"},Wn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return w.createElement("line",xC({className:"recharts-polar-radius-axis-line"},d))},$Je=(e,t,r)=>{var n;return w.isValidElement(e)?n=w.cloneElement(e,t):typeof e=="function"?n=e(t):n=w.createElement(Hy,xC({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},zJe=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,o=Whe(e,PJe),l=HJe(e.orientation),c=Eo(o),u=Wn(s,!1),d=t.map((f,A)=>{var m=UJe(f,e.angle,e.cx,e.cy),g=Fh(Fh(Fh(Fh({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:A},m),{},{payload:f});return w.createElement(Ua,xC({className:bn("recharts-polar-radius-axis-tick",nde(s)),key:"tick-".concat(f.coordinate)},dv(e,f,A)),$Je(s,g,n?n(f.value,A):f.value))});return w.createElement(Ua,{className:"recharts-polar-radius-axis-ticks"},d)},GJe=e=>{var{radiusAxisId:t}=e,r=gr(Oy),n=gr(c=>Qy(c,"radiusAxis",t)),a=gr(c=>Vy(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=Fh(Fh(Fh({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:o,axisLine:l}=s;return w.createElement(Ua,{className:bn("recharts-polar-radius-axis",Xhe,s.className)},l&&VJe(s,a),o&&zJe(s,a),Bc.renderCallByParent(s,QJe(s.angle,s.cx,s.cy,a)))};class gT extends w.PureComponent{render(){return w.createElement(w.Fragment,null,w.createElement(MJe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),w.createElement(GJe,this.props))}}pT(gT,"displayName","PolarRadiusAxis");pT(gT,"axisType",Xhe);pT(gT,"defaultProps",_c);var qJe=["children"];function TA(){return TA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TA.apply(null,arguments)}function oJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Th(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oJ(Object(r),!0).forEach(function(n){xT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xT(e,t,r){return(t=KJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KJe(e){var t=WJe(e,"string");return typeof t=="symbol"?t:t+""}function WJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XJe(e,t){if(e==null)return{};var r,n,a=YJe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function YJe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JJe=Math.PI/180,lJ=1e-5,Yhe="angleAxis";function ZJe(e){var t=cs(),r=w.useMemo(()=>{var{children:s}=e,o=XJe(e,qJe);return o},[e]),n=gr(s=>Dy(s,r.id)),a=r===n;return w.useEffect(()=>(t(BJe(r)),()=>{t(IJe(r))}),[t,r]),a?e.children:null}var eZe=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:o}=t,l=o||8,c=da(r,n,a,e.coordinate),u=da(r,n,a+(s==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},tZe=(e,t)=>{var r=Math.cos(-e.coordinate*JJe);return r>lJ?t==="outer"?"start":"end":r<-lJ?t==="outer"?"end":"start":"middle"},rZe=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:o}=e;if(!s)return null;var l=Th(Th({},Eo(e)),{},{fill:"none"},Wn(s,!1));if(a==="circle")return w.createElement(mT,TA({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:n}));var c=o.map(u=>da(t,r,n,u.coordinate));return w.createElement(Qhe,TA({className:"recharts-polar-angle-axis-line"},l,{points:c}))},nZe=e=>{var{tick:t,tickProps:r,value:n}=e;return t?w.isValidElement(t)?w.cloneElement(t,r):typeof t=="function"?t(r):w.createElement(Hy,TA({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},aZe=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,o=Eo(e),l=Wn(t,!1),c=Th(Th({},o),{},{fill:"none"},Wn(r,!1)),u=s.map((d,f)=>{var A=eZe(d,e),m=tZe(d,e.orientation),g=Th(Th(Th({},o),{},{textAnchor:m,stroke:"none",fill:a},l),{},{index:f,payload:d,x:A.x2,y:A.y2});return w.createElement(Ua,TA({className:bn("recharts-polar-angle-axis-tick",nde(t)),key:"tick-".concat(d.coordinate)},dv(e,d,f)),r&&w.createElement("line",TA({className:"recharts-polar-angle-axis-tick-line"},c,A)),w.createElement(nZe,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return w.createElement(Ua,{className:"recharts-polar-angle-axis-ticks"},u)},sZe=e=>{var{angleAxisId:t}=e,r=gr(Oy),n=gr(l=>Qy(l,"angleAxis",t)),a=Vl(),s=gr(l=>Vy(l,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var o=Th(Th(Th({},e),{},{scale:n},r),{},{radius:r.outerRadius});return w.createElement(Ua,{className:bn("recharts-polar-angle-axis",Yhe,o.className)},w.createElement(rZe,TA({},o,{ticks:s})),w.createElement(aZe,TA({},o,{ticks:s})))};class vT extends w.PureComponent{render(){return this.props.radius<=0?null:w.createElement(ZJe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},w.createElement(sZe,this.props))}}xT(vT,"displayName","PolarAngleAxis");xT(vT,"axisType",Yhe);xT(vT,"defaultProps",_h);function cJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cJ(Object(r),!0).forEach(function(n){iZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iZe(e,t,r){return(t=oZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oZe(e){var t=lZe(e,"string");return typeof t=="symbol"?t:t+""}function lZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cZe=(e,t)=>t,C9=Nt([v9,cZe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),uZe=[],E9=(e,t,r)=>(r==null?void 0:r.length)===0?uZe:r,Jhe=Nt([eT,C9,E9],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>uJ(uJ({},t.presentationProps),s.props))),a!=null)return a}}),dZe=Nt([Jhe,C9,E9],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,o=Ta(n,t.nameKey,t.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:Wp(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),fZe=Nt([Jhe,C9,E9,eo],(e,t,r,n)=>{if(!(t==null||e==null))return net({offset:n,pieSettings:t,displayedData:e,cells:r})}),JD={},dJ;function hZe(){return dJ||(dJ=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(JD)),JD}var ZD,fJ;function AZe(){return fJ||(fJ=1,ZD=hZe().isPlainObject),ZD}var mZe=AZe();const pZe=oc(mZe);function L_(){return L_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L_.apply(null,arguments)}var hJ=(e,t,r,n,a)=>{var s=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-s/2,",").concat(t+a),o+="L ".concat(e+r-s/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},gZe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xZe=e=>{var t=Gc(e,gZe),r=w.useRef(),[n,a]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:A,animationBegin:m,isUpdateAnimationActive:g}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=bn("recharts-trapezoid",d);return g?w.createElement(w_,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:o},duration:A,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:N,height:C,x:_,y:j}=v;return w.createElement(w_,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:A,easing:f},w.createElement("path",L_({},Wn(t,!0),{className:x,d:hJ(_,j,y,N,C),ref:r})))}):w.createElement("g",null,w.createElement("path",L_({},Wn(t,!0),{className:x,d:hJ(s,o,l,c,u)})))},vZe=["option","shapeType","propTransformer","activeClassName","isActive"];function bZe(e,t){if(e==null)return{};var r,n,a=yZe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function AJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function M_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AJ(Object(r),!0).forEach(function(n){wZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wZe(e,t,r){return(t=NZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NZe(e){var t=CZe(e,"string");return typeof t=="symbol"?t:t+""}function CZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EZe(e,t){return M_(M_({},t),e)}function jZe(e,t){return e==="symbols"}function mJ(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return w.createElement(Nde,r);case"trapezoid":return w.createElement(xZe,r);case"sector":return w.createElement(jde,r);case"symbols":if(jZe(t))return w.createElement(Y7,r);break;default:return null}}function kZe(e){return w.isValidElement(e)?e.props:e}function Zhe(e){var{option:t,shapeType:r,propTransformer:n=EZe,activeClassName:a="recharts-active-shape",isActive:s}=e,o=bZe(e,vZe),l;if(w.isValidElement(t))l=w.cloneElement(t,M_(M_({},o),kZe(t)));else if(typeof t=="function")l=t(o);else if(pZe(t)&&typeof t!="boolean"){var c=n(t,o);l=w.createElement(mJ,{shapeType:r,elementProps:c})}else{var u=o;l=w.createElement(mJ,{shapeType:r,elementProps:u})}return s?w.createElement(Ua,{className:a},l):l}var j9=(e,t)=>{var r=cs();return(n,a)=>s=>{e==null||e(n,a,s),r(dhe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},k9=e=>{var t=cs();return(r,n)=>a=>{e==null||e(r,n,a),t(pWe())}},S9=(e,t)=>{var r=cs();return(n,a)=>s=>{e==null||e(n,a,s),r(gWe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function bT(e){var{fn:t,args:r}=e,n=cs(),a=Vl();return w.useEffect(()=>{if(!a){var s=t(r);return n(hWe(s)),()=>{n(AWe(s))}}},[t,r,n,a]),null}var e0e=()=>{};function t0e(e){var{legendPayload:t}=e,r=cs(),n=Vl();return w.useEffect(()=>n?e0e:(r(Ade(t)),()=>{r(mde(t))}),[r,n,t]),null}function r0e(e){var{legendPayload:t}=e,r=cs(),n=gr(jn);return w.useEffect(()=>n!=="centric"&&n!=="radial"?e0e:(r(Ade(t)),()=>{r(mde(t))}),[r,n,t]),null}function yT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=w.useRef(lC(t)),n=w.useRef(e);return n.current!==e&&(r.current=lC(t),n.current=e),r.current}var eO,SZe=()=>{var[e]=w.useState(()=>lC("uid-"));return e},_Ze=(eO=Z1e.useId)!==null&&eO!==void 0?eO:SZe;function TZe(e,t){var r=_Ze();return t||(e?"".concat(e,"-").concat(r):r)}var BZe=w.createContext(void 0),wT=e=>{var{id:t,type:r,children:n}=e,a=TZe("recharts-".concat(r),t);return w.createElement(BZe.Provider,{value:a},n(a))},IZe={cartesianItems:[],polarItems:[]},n0e=Lu({name:"graphicalItems",initialState:IZe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=lA(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=lA(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=lA(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:DZe,replaceCartesianGraphicalItem:OZe,removeCartesianGraphicalItem:PZe,addPolarGraphicalItem:FZe,removePolarGraphicalItem:RZe}=n0e.actions,LZe=n0e.reducer;function a0e(e){var t=cs(),r=w.useRef(null);return w.useEffect(()=>{r.current===null?t(DZe(e)):r.current!==e&&t(OZe({prev:r.current,next:e})),r.current=e},[t,e]),w.useEffect(()=>()=>{r.current&&(t(PZe(r.current)),r.current=null)},[t]),null}function s0e(e){var t=cs();return w.useEffect(()=>(t(FZe(e)),()=>{t(RZe(e))}),[t,e]),null}function MZe(){}var UZe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},pJ={t:0},tO={t:1};function NT(e){var t=Gc(e,UZe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=wde("JavascriptAnimate",t.animationManager),[f,A]=w.useState(r?pJ:tO),m=w.useRef(null);return w.useEffect(()=>{r||A(tO)},[r]),w.useEffect(()=>{if(!r||!n)return MZe;var g=yde(pJ,tO,vde(s),a,A,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,o,x,a,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,n,a,s,o,c,l,d]),u(f.t)}var HZe=["onMouseEnter","onClick","onMouseLeave"],QZe=["id"],VZe=["id"];function _9(e,t){if(e==null)return{};var r,n,a=$Ze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $Ze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function gJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gJ(Object(r),!0).forEach(function(n){zZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zZe(e,t,r){return(t=GZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GZe(e){var t=qZe(e,"string");return typeof t=="symbol"?t:t+""}function qZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BA(){return BA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BA.apply(null,arguments)}function KZe(e){var t=w.useMemo(()=>cE(e.children,SA),[e.children]),r=gr(n=>dZe(n,e.id,t));return r==null?null:w.createElement(r0e,{legendPayload:r})}function WZe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:t,nameKey:r,name:Wp(l,t),hide:c,type:u,color:o,unit:""}}}var XZe=(e,t)=>e>t?"start":e<t?"end":"middle",YZe=(e,t,r)=>typeof t=="function"?t(e):ic(t,r,r*.8),JZe=(e,t,r)=>{var{top:n,left:a,width:s,height:o}=t,l=rde(s,o),c=a+ic(e.cx,s,s/2),u=n+ic(e.cy,o,o/2),d=ic(e.innerRadius,l,0),f=YZe(r,e.outerRadius,l),A=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:A}},ZZe=(e,t)=>{var r=wo(t-e),n=Math.min(Math.abs(t-e),360);return r*n},eet=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var r=bn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return w.createElement(oN,BA({},t,{type:"linear",className:r}))},tet=(e,t,r)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),w.isValidElement(n)))return n;var a=bn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return w.createElement(Hy,BA({},t,{alignmentBaseline:"middle",className:a}),n)};function ret(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!t)return null;var l=Eo(r),c=Wn(a,!1),u=Wn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((A,m)=>{var g=(A.startAngle+A.endAngle)/2,x=da(A.cx,A.cy,A.outerRadius+d,g),v=Ks(Ks(Ks(Ks({},l),A),{},{stroke:"none"},c),{},{index:m,textAnchor:XZe(x.x,A.cx)},x),y=Ks(Ks(Ks(Ks({},l),A),{},{fill:"none",stroke:A.fill},u),{},{index:m,points:[da(A.cx,A.cy,A.outerRadius,g),x],key:"line"});return w.createElement(Ua,{key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(m)},s&&eet(s,y),tet(a,v,Ta(A,o)))});return w.createElement(Ua,{className:"recharts-pie-labels"},f)}function i0e(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,o=gr(Pp),{onMouseEnter:l,onClick:c,onMouseLeave:u}=a,d=_9(a,HZe),f=j9(l,a.dataKey),A=k9(u),m=S9(c,a.dataKey);return t==null?null:w.createElement(w.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===o,y=o?n:null,N=v?r:y,C=Ks(Ks({},g),{},{stroke:g.stroke,tabIndex:-1,[cde]:x,[ude]:a.dataKey});return w.createElement(Ua,BA({tabIndex:-1,className:"recharts-pie-sector"},dv(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:A(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),w.createElement(Zhe,BA({option:N,isActive:v,shapeType:"sector"},C)))}),w.createElement(ret,{sectors:t,props:a,showLabels:s}))}function net(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,A=Math.abs(r.minAngle),m=ZZe(l,c),g=Math.abs(m),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=n.filter(I=>Ta(I,u,0)!==0).length,y=(g>=360?v:v-1)*x,N=g-v*A-y,C=n.reduce((I,T)=>{var k=Ta(T,u,0);return I+(mr(k)?k:0)},0),_;if(C>0){var j;_=n.map((I,T)=>{var k=Ta(I,u,0),B=Ta(I,d,T),M=JZe(r,s,I),P=(mr(k)?k:0)/C,S,L=Ks(Ks({},I),a&&a[T]&&a[T].props);T?S=j.endAngle+wo(m)*x*(k!==0?1:0):S=l;var U=S+wo(m)*((k!==0?A:0)+P*N),q=(S+U)/2,H=(M.innerRadius+M.outerRadius)/2,z=[{name:B,value:k,payload:L,dataKey:u,type:f}],W=da(M.cx,M.cy,H,q);return j=Ks(Ks(Ks(Ks({},r.presentationProps),{},{percent:P,cornerRadius:o,name:B,tooltipPayload:z,midAngle:q,middleRadius:H,tooltipPosition:W},L),M),{},{value:Ta(I,u),startAngle:S,endAngle:U,payload:L,paddingAngle:wo(m)*x}),j})}return _}function aet(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,A=yT(t,"recharts-pie-"),m=r.current,[g,x]=w.useState(!0),v=w.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=w.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return w.createElement(NT,{begin:s,duration:o,isActive:a,easing:l,onAnimationStart:y,onAnimationEnd:v,key:A},N=>{var C=[],_=n&&n[0],j=_.startAngle;return n.forEach((I,T)=>{var k=m&&m[T],B=T>0?Ip(I,"paddingAngle",0):0;if(k){var M=Rb(k.endAngle-k.startAngle,I.endAngle-I.startAngle),P=Ks(Ks({},I),{},{startAngle:j+B,endAngle:j+M(N)+B});C.push(P),j=P.endAngle}else{var{endAngle:S,startAngle:L}=I,U=Rb(0,S-L),q=U(N),H=Ks(Ks({},I),{},{startAngle:j+B,endAngle:j+q+B});C.push(H),j=H.endAngle}}),r.current=C,w.createElement(Ua,null,w.createElement(i0e,{sectors:C,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function set(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=w.useRef(null),o=s.current;return r&&t&&t.length&&(!o||o!==t)?w.createElement(aet,{props:e,previousSectorsRef:s}):w.createElement(i0e,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function iet(e){var{hide:t,className:r,rootTabIndex:n}=e,a=bn("recharts-pie",r);return t?null:w.createElement(Ua,{tabIndex:n,className:a},w.createElement(set,e))}var oet={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Yp.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function cet(e){var{id:t}=e,r=_9(e,QZe),n=w.useMemo(()=>cE(e.children,SA),[e.children]),a=gr(s=>fZe(s,t,n));return w.createElement(w.Fragment,null,w.createElement(bT,{fn:WZe,args:Ks(Ks({},e),{},{sectors:a})}),w.createElement(iet,BA({},r,{sectors:a})))}function NE(e){var t=Gc(e,oet),{id:r}=t,n=_9(t,VZe),a=Eo(n);return w.createElement(wT,{id:r,type:"pie"},s=>w.createElement(w.Fragment,null,w.createElement(s0e,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),w.createElement(KZe,BA({},n,{id:s})),w.createElement(cet,BA({},n,{id:s})),n.children))}NE.displayName="Pie";var uet=Nt([eo],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),det=Nt([uet,VA,$A],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),T9=()=>gr(det),fet=()=>gr(nXe);function xJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xJ(Object(r),!0).forEach(function(n){het(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function het(e,t,r){return(t=Aet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aet(e){var t=met(e,"string");return typeof t=="symbol"?t:t+""}function met(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pet=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var o=vJ(vJ({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Wn(a,!1)),z7(a)),l;return w.isValidElement(a)?l=w.cloneElement(a,o):typeof a=="function"?l=a(o):l=w.createElement(mT,o),w.createElement(Ua,{className:"recharts-active-dot"},l)};function IR(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=gr(Pp),o=fet();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return es(l)?null:pet({point:l,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function bJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function U_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bJ(Object(r),!0).forEach(function(n){get(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function get(e,t,r){return(t=xet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xet(e){var t=vet(e,"string");return typeof t=="symbol"?t:t+""}function vet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o0e=(e,t)=>Qy(e,"radiusAxis",t),bet=Nt([o0e],e=>{if(e!=null)return{scale:e}}),yet=Nt([pE,o0e],(e,t)=>{if(!(e==null||t==null))return U_(U_({},e),{},{scale:t})}),wet=(e,t,r,n)=>Vy(e,"radiusAxis",t,n),l0e=(e,t,r)=>Dy(e,r),c0e=(e,t,r)=>Qy(e,"angleAxis",r),Net=Nt([l0e,c0e],(e,t)=>{if(!(e==null||t==null))return U_(U_({},e),{},{scale:t})}),Cet=(e,t,r,n)=>Vy(e,"angleAxis",r,n),Eet=Nt([l0e,c0e,Oy],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),jet=(e,t,r,n,a)=>a,ket=Nt([jn,yet,wet,Net,Cet],(e,t,r,n,a)=>s0(e,"radiusAxis")?zx(t,r,!1):zx(n,a,!1)),_et=Nt([v9,jet],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),Tet=Nt([bet,Eet,eT,_et,ket],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:o,dataEndIndex:l}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(o,l+1);return Met({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),Bet=["id"];function Iet(e,t){if(e==null)return{};var r,n,a=Det(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Det(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yJ(Object(r),!0).forEach(function(n){B9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B9(e,t,r){return(t=Oet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oet(e){var t=Pet(e,"string");return typeof t=="symbol"?t:t+""}function Pet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J1(){return J1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J1.apply(null,arguments)}function I9(e,t){return e&&e!=="none"?e:t}var Fet=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:I9(n,a),value:Wp(r,t),payload:e}]};function Ret(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:Wp(s,t),hide:o,type:l,color:I9(r,a),unit:""}}}function Let(e,t){var r;return w.isValidElement(e)?r=w.cloneElement(e,t):typeof e=="function"?r=e(t):r=w.createElement(mT,J1({},t,{className:bn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function Met(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:o,cy:l}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((A,m)=>{var g=Ta(A,r.dataKey,m),x=Ta(A,a),v=r.scale(g)+d,y=Array.isArray(x)?Hhe(x):x,N=es(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(nc(nc({},da(o,l,N,v)),{},{name:g,value:x,cx:o,cy:l,radius:N,angle:v,payload:A}))});var f=[];return c&&u.forEach(A=>{if(Array.isArray(A.value)){var m=A.value[0],g=es(m)?void 0:t.scale(m);f.push(nc(nc({},A),{},{radius:g},da(o,l,g,A.angle)))}else f.push(A)}),{points:u,isRange:c,baseLinePoints:f}}function Uet(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,o=Iet(r,Bet),l=Eo(o),c=Wn(n,!0),u=t.map((d,f)=>{var A=nc(nc(nc({key:"dot-".concat(f),r:3},l),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return Let(n,A)});return w.createElement(Ua,{className:"recharts-radar-dots"},u)}function u0e(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:o,connectNulls:l}=r,c=f=>{var{onMouseEnter:A}=r;A&&A(r,f)},u=f=>{var{onMouseLeave:A}=r;A&&A(r,f)},d;return w.isValidElement(a)?d=w.cloneElement(a,nc(nc({},r),{},{points:t})):typeof a=="function"?d=a(nc(nc({},r),{},{points:t})):d=w.createElement(Qhe,J1({},Wn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?o:null,connectNulls:l})),w.createElement(Ua,{className:"recharts-radar-polygon"},d,w.createElement(Uet,{props:r,points:t}),n&&uA.renderCallByParent(r,t))}function Het(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=yT(t,"recharts-radar-"),[A,m]=w.useState(!0),g=w.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=w.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return w.createElement(NT,{begin:s,duration:o,isActive:a,easing:l,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/n.length,N=v===1?n:n.map((C,_)=>{var j=d&&d[Math.floor(_*y)];if(j){var I=Rb(j.x,C.x),T=Rb(j.y,C.y);return nc(nc({},C),{},{x:I(v),y:T(v)})}var k=Rb(C.cx,C.x),B=Rb(C.cy,C.y);return nc(nc({},C),{},{x:k(v),y:B(v)})});return v>0&&(r.current=N),w.createElement(u0e,{points:N,props:t,showLabels:!A})})}function Qet(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=w.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?w.createElement(Het,{props:e,previousPointsRef:a}):w.createElement(u0e,{points:t,props:e,showLabels:!0})}var Vet={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Yp.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class $et extends w.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=bn("recharts-radar",r);return w.createElement(w.Fragment,null,w.createElement(Ua,{className:a},w.createElement(Qet,this.props)),w.createElement(IR,{points:n,mainColor:I9(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function zet(e){var t=Vl(),r=gr(n=>Tet(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return w.createElement($et,J1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class D9 extends w.PureComponent{render(){return w.createElement(wT,{id:this.props.id,type:"radar"},t=>w.createElement(w.Fragment,null,w.createElement(s0e,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),w.createElement(r0e,{legendPayload:Fet(this.props)}),w.createElement(bT,{fn:Ret,args:this.props}),w.createElement(zet,J1({},this.props,{id:t}))))}}B9(D9,"displayName","Radar");B9(D9,"defaultProps",Vet);var Get="Invariant failed";function qet(e,t){throw new Error(Get)}var Ket=["x","y"];function DR(){return DR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DR.apply(null,arguments)}function wJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wJ(Object(r),!0).forEach(function(n){Wet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wet(e,t,r){return(t=Xet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xet(e){var t=Yet(e,"string");return typeof t=="symbol"?t:t+""}function Yet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jet(e,t){if(e==null)return{};var r,n,a=Zet(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zet(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ett(e,t){var{x:r,y:n}=e,a=Jet(e,Ket),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),A=parseInt(f,10);return zw(zw(zw(zw(zw({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:A,name:t.name,radius:t.radius})}function d0e(e){return w.createElement(Zhe,DR({shapeType:"rectangle",propTransformer:ett,activeClassName:"recharts-active-bar"},e))}var ttt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(mr(t))return t;var s=mr(n)||es(n);return s?t(n,a):(s||qet(),r)}},rtt={},f0e=Lu({name:"errorBars",initialState:rtt,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:QSt,removeErrorBar:VSt}=f0e.actions,ntt=f0e.reducer,att=["children"];function stt(e,t){if(e==null)return{};var r,n,a=itt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function itt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ott={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ltt=w.createContext(ott);function ctt(e){var{children:t}=e,r=stt(e,att);return w.createElement(ltt.Provider,{value:r},t)}function O9(e,t){var r,n,a=gr(u=>GA(u,e)),s=gr(u=>tg(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Au.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:mu.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function h0e(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=T9(),{needClipX:s,needClipY:o,needClip:l}=O9(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=a;return w.createElement("clipPath",{id:"clipPath-".concat(n)},w.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var utt=["onMouseEnter","onMouseLeave","onClick"],dtt=["value","background","tooltipPosition"],ftt=["id"],htt=["onMouseEnter","onClick","onMouseLeave"];function Z1(){return Z1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z1.apply(null,arguments)}function NJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NJ(Object(r),!0).forEach(function(n){Att(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Att(e,t,r){return(t=mtt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mtt(e){var t=ptt(e,"string");return typeof t=="symbol"?t:t+""}function ptt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H_(e,t){if(e==null)return{};var r,n,a=gtt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gtt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xtt=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:Wp(r,t),payload:e}]};function vtt(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Wp(s,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function btt(e){var t=gr(Pp),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=H_(s,utt),d=j9(o,n),f=k9(l),A=S9(c,n);if(!a||r==null)return null;var m=Wn(a,!1);return w.createElement(w.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:N}=g,C=H_(g,dtt);if(!y)return null;var _=d(g,x),j=f(g,x),I=A(g,x),T=Sl(Sl(Sl(Sl(Sl({option:a,isActive:String(x)===t},C),{},{fill:"#eee"},y),m),dv(u,g,x)),{},{onMouseEnter:_,onMouseLeave:j,onClick:I,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return w.createElement(d0e,Z1({key:"background-bar-".concat(x)},T))}))}function A0e(e){var{data:t,props:r,showLabels:n}=e,a=Eo(r),{id:s}=a,o=H_(a,ftt),{shape:l,dataKey:c,activeBar:u}=r,d=gr(Pp),f=gr(Che),{onMouseEnter:A,onClick:m,onMouseLeave:g}=r,x=H_(r,htt),v=j9(A,c),y=k9(g),N=S9(m,c);return t?w.createElement(w.Fragment,null,t.map((C,_)=>{var j=u&&String(_)===d&&(f==null||c===f),I=j?u:l,T=Sl(Sl(Sl({},o),C),{},{isActive:j,option:I,index:_,dataKey:c});return w.createElement(Ua,Z1({className:"recharts-bar-rectangle"},dv(x,C,_),{onMouseEnter:v(C,_),onMouseLeave:y(C,_),onClick:N(C,_),key:"rectangle-".concat(C==null?void 0:C.x,"-").concat(C==null?void 0:C.y,"-").concat(C==null?void 0:C.value,"-").concat(_)}),w.createElement(d0e,T))}),n&&uA.renderCallByParent(r,t)):null}function ytt(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,A=yT(t,"recharts-bar-"),[m,g]=w.useState(!1),x=w.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=w.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return w.createElement(NT,{begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:A},y=>{var N=y===1?n:n==null?void 0:n.map((C,_)=>{var j=f&&f[_];if(j)return Sl(Sl({},C),{},{x:vd(j.x,C.x,y),y:vd(j.y,C.y,y),width:vd(j.width,C.width,y),height:vd(j.height,C.height,y)});if(a==="horizontal"){var I=vd(0,C.height,y);return Sl(Sl({},C),{},{y:C.y+C.height-I,height:I})}var T=vd(0,C.width,y);return Sl(Sl({},C),{},{width:T})});return y>0&&(r.current=N??null),N==null?null:w.createElement(Ua,null,w.createElement(A0e,{props:t,data:N,showLabels:!m}))})}function wtt(e){var{data:t,isAnimationActive:r}=e,n=w.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?w.createElement(ytt,{previousRectanglesRef:n,props:e}):w.createElement(A0e,{props:e,data:t,showLabels:!0})}var m0e=0,Ntt=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ta(e,t)}};class Ctt extends w.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=bn("recharts-bar",a),f=u;return w.createElement(Ua,{className:d,id:u},l&&w.createElement("defs",null,w.createElement(h0e,{clipPathId:f,xAxisId:s,yAxisId:o})),w.createElement(Ua,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},w.createElement(btt,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),w.createElement(wtt,this.props)),this.props.children)}}var Ett={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Yp.isSsr,legendType:"rect",minPointSize:m0e,xAxisId:0,yAxisId:0};function jtt(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=O9(t,r),A=G3(),m=Vl(),g=cE(e.children,SA),x=gr(N=>Ztt(N,t,r,m,e.id,g));if(A!=="vertical"&&A!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=A==="vertical"?y.height/2:y.width/2,w.createElement(ctt,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:Ntt,errorBarOffset:v},w.createElement(Ctt,Z1({},e,{layout:A,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function ktt(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:A,cells:m}=e,g=t==="horizontal"?l:o,x=d?g.scale.domain():null,v=EVe({numericAxis:g});return f.map((y,N)=>{var C,_,j,I,T,k;d?C=bVe(d[N],x):(C=Ta(y,r),Array.isArray(C)||(C=[v,C]));var B=ttt(n,m0e)(C[1],N);if(t==="horizontal"){var M,[P,S]=[l.scale(C[0]),l.scale(C[1])];_=GW({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:y,index:N}),j=(M=S??P)!==null&&M!==void 0?M:void 0,I=a.size;var L=P-S;if(T=$c(L)?0:L,k={x:_,y:A.top,width:I,height:A.height},Math.abs(B)>0&&Math.abs(T)<Math.abs(B)){var U=wo(T||B)*(Math.abs(B)-Math.abs(T));j-=U,T+=U}}else{var[q,H]=[o.scale(C[0]),o.scale(C[1])];if(_=q,j=GW({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:y,index:N}),I=H-q,T=a.size,k={x:A.left,y:j,width:A.width,height:T},Math.abs(B)>0&&Math.abs(I)<Math.abs(B)){var z=wo(I||B)*(Math.abs(B)-Math.abs(I));I+=z}}if(_==null||j==null||I==null||T==null)return null;var W=Sl(Sl({},y),{},{x:_,y:j,width:I,height:T,value:d?C:C[1],payload:y,background:k,tooltipPosition:{x:_+I/2,y:j+T/2}},m&&m[N]&&m[N].props);return W}).filter(Boolean)}function Ed(e){var t=Gc(e,Ett),r=Vl();return w.createElement(wT,{id:t.id,type:"bar"},n=>w.createElement(w.Fragment,null,w.createElement(t0e,{legendPayload:xtt(t)}),w.createElement(bT,{fn:vtt,args:t}),w.createElement(a0e,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:ode(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),w.createElement(jtt,Z1({},t,{id:n}))))}Ed.displayName="Bar";function CJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CJ(Object(r),!0).forEach(function(n){Stt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Stt(e,t,r){return(t=_tt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _tt(e){var t=Ttt(e,"string");return typeof t=="symbol"?t:t+""}function Ttt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Btt=(e,t)=>t,Itt=(e,t,r)=>r,Dtt=(e,t,r,n)=>n,Ott=(e,t,r,n,a)=>a,CE=Nt([oT,Ott],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Ptt=Nt([CE],e=>e==null?void 0:e.maxBarSize),Ftt=(e,t,r,n,a,s)=>s,EJ=(e,t,r)=>{var n=r??e;if(!es(n))return ic(n,t,0)},Rtt=Nt([jn,oT,Btt,Itt,Dtt],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Ltt=(e,t,r,n)=>{var a=jn(e);return a==="horizontal"?pC(e,"yAxis",r,n):pC(e,"xAxis",t,n)},Mtt=(e,t,r)=>{var n=jn(e);return n==="horizontal"?hY(e,"xAxis",t):hY(e,"yAxis",r)},Utt=(e,t,r)=>{var n={},a=e.filter(iT),s=e.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,A=f.map(g=>g.dataKey),m=EJ(t,r,f[0].barSize);return{stackId:d,dataKeys:A,barSize:m}}),c=s.map(u=>{var d=[u.dataKey].filter(A=>A!=null),f=EJ(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},Htt=Nt([Rtt,AKe,Mtt],Utt),Qtt=(e,t,r,n,a)=>{var s,o,l=CE(e,t,r,n,a);if(l!=null){var c=jn(e),u=Efe(e),{maxBarSize:d}=l,f=es(d)?u:d,A,m;return c==="horizontal"?(A=Op(e,"xAxis",t,n),m=Dp(e,"xAxis",t,n)):(A=Op(e,"yAxis",r,n),m=Dp(e,"yAxis",r,n)),(s=(o=zx(A,m,!0))!==null&&o!==void 0?o:f)!==null&&s!==void 0?s:0}},p0e=(e,t,r,n)=>{var a=jn(e),s,o;return a==="horizontal"?(s=Op(e,"xAxis",t,n),o=Dp(e,"xAxis",t,n)):(s=Op(e,"yAxis",r,n),o=Dp(e,"yAxis",r,n)),zx(s,o)};function Vtt(e,t,r,n,a){var s=n.length;if(!(s<1)){var o=ic(e,r,0,!0),l,c=[];if(Jo(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,N)=>y+(N.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var A=(r-f)/2>>0,m={offset:A-o,size:0};l=n.reduce((y,N)=>{var C,_={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(C=N.barSize)!==null&&C!==void 0?C:0}},j=[...y,_];return m=j[j.length-1].position,j},c)}else{var g=ic(t,r,0,!0);r-2*g-(s-1)*o<=0&&(o=0);var x=(r-2*g-(s-1)*o)/s;x>1&&(x>>=0);var v=Jo(a)?Math.min(x,a):x;l=n.reduce((y,N,C)=>[...y,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:g+(x+o)*C+(x-v)/2,size:v}}],c)}return l}}var $tt=(e,t,r,n,a,s,o)=>{var l=es(o)?t:o,c=Vtt(r,n,a!==s?a:s,e,l);return a!==s&&c!=null&&(c=c.map(u=>Sk(Sk({},u),{},{position:Sk(Sk({},u.position),{},{offset:u.position.offset-a/2})}))),c},ztt=Nt([Htt,Efe,hKe,jfe,Qtt,p0e,Ptt],$tt),Gtt=(e,t,r,n)=>Op(e,"xAxis",t,n),qtt=(e,t,r,n)=>Op(e,"yAxis",r,n),Ktt=(e,t,r,n)=>Dp(e,"xAxis",t,n),Wtt=(e,t,r,n)=>Dp(e,"yAxis",r,n),Xtt=Nt([ztt,CE],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Ytt=(e,t)=>{var r=sT(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}},Jtt=Nt([Ltt,CE],Ytt),Ztt=Nt([eo,Gtt,qtt,Ktt,Wtt,Xtt,jn,tT,p0e,Jtt,CE,Ftt],(e,t,r,n,a,s,o,l,c,u,d,f)=>{var{chartData:A,dataStartIndex:m,dataEndIndex:g}=l;if(!(d==null||s==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=A==null?void 0:A.slice(m,g+1),v!=null)return ktt({layout:o,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:v,offset:e,cells:f})}}),g0e=e=>{var{chartData:t}=e,r=cs(),n=Vl();return w.useEffect(()=>n?()=>{}:(r(NY(t)),()=>{r(NY(void 0))}),[t,r,n]),null},jJ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},x0e=Lu({name:"brush",initialState:jJ,reducers:{setBrushSettings(e,t){return t.payload==null?jJ:t.payload}}}),{setBrushSettings:$St}=x0e.actions,ert=x0e.reducer;function trt(e,t,r){return(t=rrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rrt(e){var t=nrt(e,"string");return typeof t=="symbol"?t:t+""}function nrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class P9{static create(t){return new P9(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}trt(P9,"EPS",1e-4);function art(e){return(e%180+180)%180}var srt=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=art(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},irt={dots:[],areas:[],lines:[]},v0e=Lu({name:"referenceElements",initialState:irt,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=lA(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=lA(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=lA(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:zSt,removeDot:GSt,addArea:qSt,removeArea:KSt,addLine:WSt,removeLine:XSt}=v0e.actions,ort=v0e.reducer,lrt=w.createContext(void 0),crt=e=>{var{children:t}=e,[r]=w.useState("".concat(lC("recharts"),"-clip")),n=T9();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return w.createElement(lrt.Provider,{value:r},w.createElement("defs",null,w.createElement("clipPath",{id:r},w.createElement("rect",{x:a,y:s,height:l,width:o}))),t)};function rO(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function b0e(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function urt(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return srt(n,r)}function drt(e,t,r){var n=r==="width",{x:a,y:s,width:o,height:l}=e;return t===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function Q_(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function frt(e,t){return b0e(e,t+1)}function hrt(e,t,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:b0e(n,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),N=g.coordinate,C=c===0||Q_(e,N,y,d,l);C||(c=0,d=o,u+=1),C&&(d=N+e*(y()/2+a),c+=u)},A;u<=s.length;)if(A=f(),A)return A.v;return[]}function kJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kJ(Object(r),!0).forEach(function(n){Art(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Art(e,t,r){return(t=mrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mrt(e){var t=prt(e,"string");return typeof t=="symbol"?t:t+""}function prt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function grt(e,t,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=t,{end:c}=t,u=function(A){var m=s[A],g,x=()=>(g===void 0&&(g=r(m,A)),g);if(A===o-1){var v=e*(m.coordinate+e*x()/2-c);s[A]=m=vl(vl({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else s[A]=m=vl(vl({},m),{},{tickCoord:m.coordinate});var y=Q_(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+a),s[A]=vl(vl({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function xrt(e,t,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(s){var d=n[l-1],f=r(d,l-1),A=e*(d.coordinate+e*f/2-u);o[l-1]=d=vl(vl({},d),{},{tickCoord:A>0?d.coordinate-A*e:d.coordinate});var m=Q_(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=vl(vl({},d),{},{isShow:!0}))}for(var g=s?l-1:l,x=function(N){var C=o[N],_,j=()=>(_===void 0&&(_=r(C,N)),_);if(N===0){var I=e*(C.coordinate-e*j()/2-c);o[N]=C=vl(vl({},C),{},{tickCoord:I<0?C.coordinate-I*e:C.coordinate})}else o[N]=C=vl(vl({},C),{},{tickCoord:C.coordinate});var T=Q_(e,C.tickCoord,j,c,u);T&&(c=C.tickCoord+e*(j()/2+a),o[N]=vl(vl({},C),{},{isShow:!0}))},v=0;v<g;v++)x(v);return o}function F9(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(mr(c)||Yp.isSsr){var A;return(A=frt(a,mr(c)?c:0))!==null&&A!==void 0?A:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?cN(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(C,_)=>{var j=typeof u=="function"?u(C.value,_):C.value;return g==="width"?urt(cN(j,{fontSize:t,letterSpacing:r}),x,f):cN(j,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?wo(a[1].coordinate-a[0].coordinate):1,N=drt(s,y,g);return c==="equidistantPreserveStart"?hrt(y,N,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=xrt(y,N,v,a,o,c==="preserveStartEnd"):m=grt(y,N,v,a,o),m.filter(C=>C.isShow))}var vrt=["viewBox"],brt=["viewBox"];function Ub(){return Ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ub.apply(null,arguments)}function SJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SJ(Object(r),!0).forEach(function(n){R9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _J(e,t){if(e==null)return{};var r,n,a=yrt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yrt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function R9(e,t,r){return(t=wrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wrt(e){var t=Nrt(e,"string");return typeof t=="symbol"?t:t+""}function Nrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ng extends w.Component{constructor(t){super(t),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=_J(t,vrt),s=this.props,{viewBox:o}=s,l=_J(s,brt);return!rO(n,o)||!rO(a,l)||!rO(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,A,m,g,x,v=c?-1:1,y=t.tickSize||l,N=mr(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,m=n+ +!c*s,A=m-v*y,x=A-v*u,g=N;break;case"left":A=m=t.coordinate,f=r+ +!c*a,d=f-v*y,g=d-v*u,x=N;break;case"right":A=m=t.coordinate,f=r+ +c*a,d=f+v*y,g=d+v*u,x=N;break;default:d=f=t.coordinate,m=n+ +c*s,A=m+v*y,x=A+v*u,g=N;break}return{line:{x1:d,y1:A,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l}=this.props,c=Gi(Gi(Gi({},Wn(this.props,!1)),Wn(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=Gi(Gi({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!o||s==="right"&&o);c=Gi(Gi({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return w.createElement("line",Ub({},c,{className:bn("recharts-cartesian-axis-line",Ip(l,"className"))}))}static renderTickItem(t,r,n){var a,s=bn(r.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))a=w.cloneElement(t,Gi(Gi({},r),{},{className:s}));else if(typeof t=="function")a=t(Gi(Gi({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=bn(o,t.className)),a=w.createElement(Hy,Ub({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:o,tickFormatter:l,unit:c,padding:u}=this.props,d=F9(Gi(Gi({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),A=this.getTickVerticalAnchor(),m=Eo(this.props),g=Wn(o,!1),x=Gi(Gi({},m),{},{fill:"none"},Wn(a,!1)),v=d.map((y,N)=>{var{line:C,tick:_}=this.getTickLineCoord(y),j=Gi(Gi(Gi(Gi({textAnchor:f,verticalAnchor:A},m),{},{stroke:"none",fill:s},g),_),{},{index:N,payload:y,visibleTicksCount:d.length,tickFormatter:l,padding:u});return w.createElement(Ua,Ub({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},dv(this.props,y,N)),a&&w.createElement("line",Ub({},x,C,{className:bn("recharts-cartesian-axis-tick-line",Ip(a,"className"))})),o&&ng.renderTickItem(o,j,"".concat(typeof l=="function"?l(y.value,N):y.value).concat(c||"")))});return v.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:w.createElement(Ua,{className:bn("recharts-cartesian-axis",a),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Bc.renderCallByParent(this.props))}}R9(ng,"displayName","CartesianAxis");R9(ng,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Crt=["x1","y1","x2","y2","key"],Ert=["offset"],jrt=["xAxisId","yAxisId"],krt=["xAxisId","yAxisId"];function TJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TJ(Object(r),!0).forEach(function(n){Srt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Srt(e,t,r){return(t=_rt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _rt(e){var t=Trt(e,"string");return typeof t=="symbol"?t:t+""}function Trt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nx(){return nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nx.apply(null,arguments)}function V_(e,t){if(e==null)return{};var r,n,a=Brt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Brt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Irt=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:o,ry:l}=e;return w.createElement("rect",{x:n,y:a,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function y0e(e,t){var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:o,key:l}=t,c=V_(t,Crt),u=Eo(c),{offset:d}=u,f=V_(u,Ert);r=w.createElement("line",nx({},f,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function Drt(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=V_(e,jrt),c=a.map((u,d)=>{var f=_l(_l({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return y0e(n,f)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Ort(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=V_(e,krt),c=a.map((u,d)=>{var f=_l(_l({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return y0e(n,f)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Prt(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,A)=>f-A);a!==u[0]&&u.unshift(0);var d=u.map((f,A)=>{var m=!u[A+1],g=m?a+o-f:u[A+1]-f;if(g<=0)return null;var x=A%t.length;return w.createElement("rect",{key:"react-".concat(A),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Frt(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,A)=>f-A);a!==u[0]&&u.unshift(0);var d=u.map((f,A)=>{var m=!u[A+1],g=m?a+o-f:u[A+1]-f;if(g<=0)return null;var x=A%r.length;return w.createElement("rect",{key:"react-".concat(A),x:f,y:s,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Rrt=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return sde(F9(_l(_l(_l({},ng.defaultProps),r),{},{ticks:ide(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},Lrt=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return sde(F9(_l(_l(_l({},ng.defaultProps),r),{},{ticks:ide(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},Mrt={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Rh(e){var t=mU(),r=pU(),n=fde(),a=_l(_l({},Gc(e,Mrt)),{},{x:mr(e.x)?e.x:n.left,y:mr(e.y)?e.y:n.top,width:mr(e.width)?e.width:n.width,height:mr(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:A,verticalValues:m}=a,g=Vl(),x=gr(B=>AY(B,"xAxis",s,g)),v=gr(B=>AY(B,"yAxis",o,g));if(!mr(u)||u<=0||!mr(d)||d<=0||!mr(l)||l!==+l||!mr(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||Rrt,N=a.horizontalCoordinatesGenerator||Lrt,{horizontalPoints:C,verticalPoints:_}=a;if((!C||!C.length)&&typeof N=="function"){var j=A&&A.length,I=N({yAxis:v?_l(_l({},v),{},{ticks:j?A:v.ticks}):void 0,width:t,height:r,offset:n},j?!0:f);lN(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(C=I)}if((!_||!_.length)&&typeof y=="function"){var T=m&&m.length,k=y({xAxis:x?_l(_l({},x),{},{ticks:T?m:x.ticks}):void 0,width:t,height:r,offset:n},T?!0:f);lN(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(_=k)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(Irt,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),w.createElement(Prt,nx({},a,{horizontalPoints:C})),w.createElement(Frt,nx({},a,{verticalPoints:_})),w.createElement(Drt,nx({},a,{offset:n,horizontalPoints:C,xAxis:x,yAxis:v})),w.createElement(Ort,nx({},a,{offset:n,verticalPoints:_,xAxis:x,yAxis:v})))}Rh.displayName="CartesianGrid";var w0e=(e,t,r,n)=>Op(e,"xAxis",t,n),N0e=(e,t,r,n)=>Dp(e,"xAxis",t,n),C0e=(e,t,r,n)=>Op(e,"yAxis",r,n),E0e=(e,t,r,n)=>Dp(e,"yAxis",r,n),Urt=Nt([jn,w0e,C0e,N0e,E0e],(e,t,r,n,a)=>s0(e,"xAxis")?zx(t,n,!1):zx(r,a,!1)),Hrt=(e,t,r,n,a)=>a,j0e=Nt([oT,Hrt],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),Qrt=(e,t,r,n,a)=>{var s,o=j0e(e,t,r,n,a);if(o!=null){var l=jn(e),c=s0(l,"xAxis"),u;if(c?u=pC(e,"yAxis",r,n):u=pC(e,"xAxis",t,n),u!=null){var{stackId:d}=o,f=sT(o);if(!(d==null||f==null)){var A=(s=u[d])===null||s===void 0?void 0:s.stackedData;return A==null?void 0:A.find(m=>m.key===f)}}}},Vrt=Nt([jn,w0e,C0e,N0e,E0e,Qrt,tT,Urt,j0e],(e,t,r,n,a,s,o,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:f}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||a==null||n.length===0||a.length===0||l==null)){var{data:A}=c,m;if(A&&A.length>0?m=A:m=u==null?void 0:u.slice(d,f+1),m!=null){var g=void 0;return cnt({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataStartIndex:d,areaSettings:c,stackedData:s,displayedData:m,chartBaseValue:g,bandSize:l})}}}),$rt=["id"],zrt=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function k0e(e,t){if(e==null)return{};var r,n,a=Grt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Grt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function BJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ax(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BJ(Object(r),!0).forEach(function(n){qrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qrt(e,t,r){return(t=Krt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Krt(e){var t=Wrt(e,"string");return typeof t=="symbol"?t:t+""}function Wrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dA(){return dA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dA.apply(null,arguments)}function $_(e,t){return e&&e!=="none"?e:t}var Xrt=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:$_(n,a),value:Wp(r,t),payload:e}]};function Yrt(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:Wp(o,t),hide:l,type:e.tooltipType,color:$_(n,s),unit:c}}}var Jrt=(e,t)=>{var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=bn("recharts-area-dot",typeof e!="boolean"?e.className:"");r=w.createElement(mT,dA({},t,{className:n}))}return r};function Zrt(e,t){return e==null?!1:t?!0:e.length===1}function ent(e){var{clipPathId:t,points:r,props:n}=e,{needClip:a,dot:s,dataKey:o}=n;if(!Zrt(r,s))return null;var l=tue(s),c=Eo(n),u=Wn(s,!0),d=r.map((A,m)=>{var g=ax(ax(ax({key:"dot-".concat(m),r:3},c),u),{},{index:m,cx:A.x,cy:A.y,dataKey:o,value:A.value,payload:A.payload,points:r});return Jrt(s,g)}),f={clipPath:a?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return w.createElement(Ua,dA({className:"recharts-area-dots"},f),d)}function OR(e){var{points:t,baseLine:r,needClip:n,clipPathId:a,props:s,showLabels:o}=e,{layout:l,type:c,stroke:u,connectNulls:d,isRange:f}=s,{id:A}=s,m=k0e(s,$rt),g=Eo(m);return w.createElement(w.Fragment,null,(t==null?void 0:t.length)>1&&w.createElement(Ua,{clipPath:n?"url(#clipPath-".concat(a,")"):void 0},w.createElement(oN,dA({},g,{id:A,points:t,connectNulls:d,type:c,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&w.createElement(oN,dA({},g,{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:t})),u!=="none"&&f&&w.createElement(oN,dA({},g,{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r}))),w.createElement(ent,{points:t,props:m,clipPathId:a}),o&&uA.renderCallByParent(m,t))}function tnt(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,s=n[0].y,o=n[n.length-1].y;if(!Jo(s)||!Jo(o))return null;var l=t*Math.abs(s-o),c=Math.max(...n.map(u=>u.x||0));return mr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(u=>u.x||0),c)),mr(c)?w.createElement("rect",{x:0,y:s<o?s:s-l,width:c+(a?parseInt("".concat(a),10):1),height:Math.floor(l)}):null}function rnt(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,s=n[0].x,o=n[n.length-1].x;if(!Jo(s)||!Jo(o))return null;var l=t*Math.abs(s-o),c=Math.max(...n.map(u=>u.y||0));return mr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(u=>u.y||0),c)),mr(c)?w.createElement("rect",{x:s<o?s:s-l,y:0,width:l,height:Math.floor(c+(a?parseInt("".concat(a),10):1))}):null}function nnt(e){var{alpha:t,layout:r,points:n,baseLine:a,strokeWidth:s}=e;return r==="vertical"?w.createElement(tnt,{alpha:t,points:n,baseLine:a,strokeWidth:s}):w.createElement(rnt,{alpha:t,points:n,baseLine:a,strokeWidth:s})}function ant(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:s}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,onAnimationStart:A,onAnimationEnd:m}=n,g=yT(n,"recharts-area-"),[x,v]=w.useState(!0),y=w.useCallback(()=>{typeof m=="function"&&m(),v(!1)},[m]),N=w.useCallback(()=>{typeof A=="function"&&A(),v(!0)},[A]),C=a.current,_=s.current;return w.createElement(NT,{begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:y,onAnimationStart:N,key:g},j=>{if(C){var I=C.length/o.length,T=j===1?o:o.map((B,M)=>{var P=Math.floor(M*I);if(C[P]){var S=C[P];return ax(ax({},B),{},{x:vd(S.x,B.x,j),y:vd(S.y,B.y,j)})}return B}),k;return mr(l)?k=vd(_,l,j):es(l)||$c(l)?k=vd(_,0,j):k=l.map((B,M)=>{var P=Math.floor(M*I);if(Array.isArray(_)&&_[P]){var S=_[P];return ax(ax({},B),{},{x:vd(S.x,B.x,j),y:vd(S.y,B.y,j)})}return B}),j>0&&(a.current=T,s.current=k),w.createElement(OR,{points:T,baseLine:k,needClip:t,clipPathId:r,props:n,showLabels:!x})}return j>0&&(a.current=o,s.current=l),w.createElement(Ua,null,w.createElement("defs",null,w.createElement("clipPath",{id:"animationClipPath-".concat(r)},w.createElement(nnt,{alpha:j,points:o,baseLine:l,layout:n.layout,strokeWidth:n.strokeWidth}))),w.createElement(Ua,{clipPath:"url(#animationClipPath-".concat(r,")")},w.createElement(OR,{points:o,baseLine:l,needClip:t,clipPathId:r,props:n,showLabels:!0})))})}function snt(e){var{needClip:t,clipPathId:r,props:n}=e,{points:a,baseLine:s,isAnimationActive:o}=n,l=w.useRef(null),c=w.useRef(),u=l.current,d=c.current;return o&&a&&a.length&&(u!==a||d!==s)?w.createElement(ant,{needClip:t,clipPathId:r,props:n,previousPointsRef:l,previousBaselineRef:c}):w.createElement(OR,{points:a,baseLine:s,needClip:t,clipPathId:r,props:n,showLabels:!0})}class int extends w.PureComponent{render(){var t,{hide:r,dot:n,points:a,className:s,top:o,left:l,needClip:c,xAxisId:u,yAxisId:d,width:f,height:A,id:m,baseLine:g}=this.props;if(r)return null;var x=bn("recharts-area",s),v=m,{r:y=3,strokeWidth:N=2}=(t=Wn(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},C=tue(n),_=y*2+N;return w.createElement(w.Fragment,null,w.createElement(Ua,{className:x},c&&w.createElement("defs",null,w.createElement(h0e,{clipPathId:v,xAxisId:u,yAxisId:d}),!C&&w.createElement("clipPath",{id:"clipPath-dots-".concat(v)},w.createElement("rect",{x:l-_/2,y:o-_/2,width:f+_,height:A+_}))),w.createElement(snt,{needClip:c,clipPathId:v,props:this.props})),w.createElement(IR,{points:a,mainColor:$_(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(g)&&w.createElement(IR,{points:g,mainColor:$_(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var S0e={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Yp.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function ont(e){var t,r=Gc(e,S0e),{activeDot:n,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:f,isAnimationActive:A,legendType:m,stroke:g,xAxisId:x,yAxisId:v}=r,y=k0e(r,zrt),N=G3(),C=jhe(),{needClip:_}=O9(x,v),j=Vl(),{points:I,isRange:T,baseLine:k}=(t=gr(U=>Vrt(U,x,v,j,e.id)))!==null&&t!==void 0?t:{},B=T9();if(N!=="horizontal"&&N!=="vertical"||B==null||C!=="AreaChart"&&C!=="ComposedChart")return null;var{height:M,width:P,x:S,y:L}=B;return!I||!I.length?null:w.createElement(int,dA({},y,{activeDot:n,animationBegin:a,animationDuration:s,animationEasing:o,baseLine:k,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:M,hide:f,layout:N,isAnimationActive:A,isRange:T,legendType:m,needClip:_,points:I,stroke:g,width:P,left:S,top:L,xAxisId:x,yAxisId:v}))}var lnt=(e,t,r,n,a)=>{var s=r??t;if(mr(s))return s;var o=e==="horizontal"?a:n,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),u=Math.min(l[0],l[1]);return s==="dataMin"?u:s==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return s==="dataMin"?l[0]:s==="dataMax"?l[1]:l[0]};function cnt(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:a,layout:s,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:f,yAxisTicks:A,bandSize:m}=e,g=a&&a.length,x=lnt(s,o,r,l,c),v=s==="horizontal",y=!1,N=u.map((_,j)=>{var I;g?I=a[d+j]:(I=Ta(_,n),Array.isArray(I)?y=!0:I=[x,I]);var T=I[1]==null||g&&!t&&Ta(_,n)==null;return v?{x:zW({axis:l,ticks:f,bandSize:m,entry:_,index:j}),y:T?null:c.scale(I[1]),value:I,payload:_}:{x:T?null:l.scale(I[1]),y:zW({axis:c,ticks:A,bandSize:m,entry:_,index:j}),value:I,payload:_}}),C;return g||y?C=N.map(_=>{var j=Array.isArray(_.value)?_.value[0]:null;return v?{x:_.x,y:j!=null&&_.y!=null?c.scale(j):null,payload:_.payload}:{x:j!=null?l.scale(j):null,y:_.y,payload:_.payload}}):C=v?c.scale(x):l.scale(x),{points:N,baseLine:C,isRange:y}}function _0e(e){var t=Gc(e,S0e),r=Vl();return w.createElement(wT,{id:t.id,type:"area"},n=>w.createElement(w.Fragment,null,w.createElement(t0e,{legendPayload:Xrt(t)}),w.createElement(bT,{fn:Yrt,args:t}),w.createElement(a0e,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:ode(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),w.createElement(ont,dA({},t,{id:n}))))}_0e.displayName="Area";function IJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IJ(Object(r),!0).forEach(function(n){unt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function unt(e,t,r){return(t=dnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dnt(e){var t=fnt(e,"string");return typeof t=="symbol"?t:t+""}function fnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hnt={xAxis:{},yAxis:{},zAxis:{}},T0e=Lu({name:"cartesianAxis",initialState:hnt,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=DJ(DJ({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:Ant,removeXAxis:mnt,addYAxis:pnt,removeYAxis:gnt,addZAxis:YSt,removeZAxis:JSt,updateYAxisWidth:xnt}=T0e.actions,vnt=T0e.reducer,bnt=["children"],ynt=["dangerouslySetInnerHTML","ticks"];function B0e(e,t,r){return(t=wnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wnt(e){var t=Nnt(e,"string");return typeof t=="symbol"?t:t+""}function Nnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PR(){return PR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PR.apply(null,arguments)}function I0e(e,t){if(e==null)return{};var r,n,a=Cnt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Cnt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ent(e){var t=cs(),r=w.useMemo(()=>{var{children:s}=e,o=I0e(e,bnt);return o},[e]),n=gr(s=>GA(s,r.id)),a=r===n;return w.useEffect(()=>(t(Ant(r)),()=>{t(mnt(r))}),[r,t]),a?e.children:null}var jnt=e=>{var{xAxisId:t,className:r}=e,n=gr(dde),a=Vl(),s="xAxis",o=gr(m=>Ly(m,s,t,a)),l=gr(m=>ahe(m,s,t,a)),c=gr(m=>ehe(m,t)),u=gr(m=>iWe(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,A=I0e(e,ynt);return w.createElement(ng,PR({},A,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:bn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l}))},knt=e=>{var t,r,n,a,s;return w.createElement(Ent,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},w.createElement(jnt,e))};class Rc extends w.Component{render(){return w.createElement(knt,this.props)}}B0e(Rc,"displayName","XAxis");B0e(Rc,"defaultProps",{allowDataOverflow:Au.allowDataOverflow,allowDecimals:Au.allowDecimals,allowDuplicatedCategory:Au.allowDuplicatedCategory,height:Au.height,hide:!1,mirror:Au.mirror,orientation:Au.orientation,padding:Au.padding,reversed:Au.reversed,scale:Au.scale,tickCount:Au.tickCount,type:Au.type,xAxisId:0});var Snt=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},_nt=["dangerouslySetInnerHTML","ticks"];function D0e(e,t,r){return(t=Tnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tnt(e){var t=Bnt(e,"string");return typeof t=="symbol"?t:t+""}function Bnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FR(){return FR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FR.apply(null,arguments)}function Int(e,t){if(e==null)return{};var r,n,a=Dnt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Dnt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ont(e){var t=cs();return w.useEffect(()=>(t(pnt(e)),()=>{t(gnt(e))}),[e,t]),null}var Pnt=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,o=w.useRef(null),l=w.useRef(null),c=gr(dde),u=Vl(),d=cs(),f="yAxis",A=gr(C=>Ly(C,f,r,u)),m=gr(C=>the(C,r)),g=gr(C=>oWe(C,r)),x=gr(C=>ahe(C,f,r,u));if(w.useLayoutEffect(()=>{var C;if(!(a!=="auto"||!m||x9(s)||w.isValidElement(s))){var _=o.current,j=_==null||(C=_.tickRefs)===null||C===void 0?void 0:C.current,{tickSize:I,tickMargin:T}=_.props,k=Snt({ticks:j,label:l.current,labelGapWithTick:5,tickSize:I,tickMargin:T});Math.round(m.width)!==Math.round(k)&&d(xnt({id:r,width:k}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,s,r,a]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,N=Int(e,_nt);return w.createElement(ng,FR({},N,{ref:o,labelRef:l,scale:A,x:g.x,y:g.y,width:m.width,height:m.height,className:bn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},Fnt=e=>{var t,r,n,a,s;return w.createElement(w.Fragment,null,w.createElement(Ont,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),w.createElement(Pnt,e))},Rnt={allowDataOverflow:mu.allowDataOverflow,allowDecimals:mu.allowDecimals,allowDuplicatedCategory:mu.allowDuplicatedCategory,hide:!1,mirror:mu.mirror,orientation:mu.orientation,padding:mu.padding,reversed:mu.reversed,scale:mu.scale,tickCount:mu.tickCount,type:mu.type,width:mu.width,yAxisId:0};class Lc extends w.Component{render(){return w.createElement(Fnt,this.props)}}D0e(Lc,"displayName","YAxis");D0e(Lc,"defaultProps",Rnt);var nO={exports:{}},aO={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OJ;function Lnt(){if(OJ)return aO;OJ=1;var e=fy();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,o=e.useMemo,l=e.useDebugValue;return aO.useSyncExternalStoreWithSelector=function(c,u,d,f,A){var m=a(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=o(function(){function v(j){if(!y){if(y=!0,N=j,j=f(j),A!==void 0&&g.hasValue){var I=g.value;if(A(I,j))return C=I}return C=j}if(I=C,r(N,j))return I;var T=f(j);return A!==void 0&&A(I,T)?(N=j,I):(N=j,C=T)}var y=!1,N,C,_=d===void 0?null:d;return[function(){return v(u())},_===null?void 0:function(){return v(_())}]},[u,d,f,A]);var x=n(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},aO}var PJ;function Mnt(){return PJ||(PJ=1,nO.exports=Lnt()),nO.exports}Mnt();function Unt(e){e()}function Hnt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Unt(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var FJ={notify(){},get:()=>[]};function Qnt(e,t){let r,n=FJ,a=0,s=!1;function o(x){d();const v=n.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=Hnt())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=FJ)}function A(){s||(s=!0,d())}function m(){s&&(s=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:A,tryUnsubscribe:m,getListeners:()=>n};return g}var Vnt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$nt=Vnt(),znt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Gnt=znt(),qnt=()=>$nt||Gnt?w.useLayoutEffect:w.useEffect,Knt=qnt(),sO=Symbol.for("react-redux-context"),iO=typeof globalThis<"u"?globalThis:{};function Wnt(){if(!w.createContext)return{};const e=iO[sO]??(iO[sO]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var Xnt=Wnt();function Ynt(e){const{children:t,context:r,serverState:n,store:a}=e,s=w.useMemo(()=>{const c=Qnt(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=w.useMemo(()=>a.getState(),[a]);Knt(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||Xnt;return w.createElement(l.Provider,{value:s},t)}var Jnt=Ynt,Znt=(e,t)=>t,L9=Nt([Znt,jn,Oy,ro,bhe,qA,cXe,eo],AXe),M9=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},O0e=Bd("mouseClick"),P0e=uE();P0e.startListening({actionCreator:O0e,effect:(e,t)=>{var r=e.payload,n=L9(t.getState(),M9(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(xWe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var RR=Bd("mouseMove"),F0e=uE();F0e.startListening({actionCreator:RR,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=c9(n,n.tooltip.settings.shared),s=L9(n,M9(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(hhe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(fhe()))}});function eat(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var RJ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},R0e=Lu({name:"rootProps",initialState:RJ,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:RJ.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),tat=R0e.reducer,{updateOptions:rat}=R0e.actions,L0e=Lu({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:nat}=L0e.actions,aat=L0e.reducer,M0e=Bd("keyDown"),U0e=Bd("focus"),U9=uE();U9.startListening({actionCreator:M0e,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(u9(a,Uy(r))),l=qA(r);if(s==="Enter"){var c=F_(r,"axis","hover",String(a.index));t.dispatch(kR({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=cWe(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,A=o+f*d;if(!(l==null||A>=l.length||A<0)){var m=F_(r,"axis","hover",String(A));t.dispatch(kR({active:!0,activeIndex:A.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});U9.startListening({actionCreator:U0e,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=F_(r,"axis","hover",String(s));t.dispatch(kR({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Ad=Bd("externalEvent"),H0e=uE();H0e.startListening({actionCreator:Ad,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:eXe(r),activeDataKey:Che(r),activeIndex:Pp(r),activeLabel:Nhe(r),activeTooltipIndex:Pp(r),isTooltipActive:tXe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var sat=Nt([My],e=>e.tooltipItemPayloads),iat=Nt([sat,yE,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=t(s,r);return o}}}),Q0e=Bd("touchMove"),V0e=uE();V0e.startListening({actionCreator:Q0e,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=c9(n,n.tooltip.settings.shared);if(a==="axis"){var s=L9(n,M9({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(hhe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(cde),d=(o=c.getAttribute(ude))!==null&&o!==void 0?o:void 0,f=iat(t.getState(),u,d);t.dispatch(dhe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var oat=Due({brush:ert,cartesianAxis:vnt,chartData:TXe,errorBars:ntt,graphicalItems:LZe,layout:aVe,legend:$Ve,options:EXe,polarAxis:DJe,polarOptions:aat,referenceElements:ort,rootProps:tat,tooltip:vWe}),lat=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return _Qe({reducer:oat,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([P0e.middleware,F0e.middleware,U9.middleware,H0e.middleware,V0e.middleware]),devTools:{serialize:{replacer:eat},name:"recharts-".concat(r)}})};function $0e(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Vl(),s=w.useRef(null);if(a)return r;s.current==null&&(s.current=lat(t,n));var o=iU;return w.createElement(Jnt,{context:o,store:s.current},r)}function z0e(e){var{layout:t,width:r,height:n,margin:a}=e,s=cs(),o=Vl();return w.useEffect(()=>{o||(s(tVe(t)),s(rVe({width:r,height:n})),s(eVe(a)))},[s,o,t,r,n,a]),null}function G0e(e){var t=cs();return w.useEffect(()=>{t(rat(e))},[t,e]),null}var cat=["children"];function uat(e,t){if(e==null)return{};var r,n,a=dat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function z_(){return z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z_.apply(null,arguments)}var fat={width:"100%",height:"100%"},hat=w.forwardRef((e,t)=>{var r=mU(),n=pU(),a=pde();if(!G1(r)||!G1(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0,w.createElement(G7,z_({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:fat,ref:t}),s)}),Aat=e=>{var{children:t}=e,r=gr(z3);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return w.createElement(G7,{width:n,height:a,x:o,y:s},t)},LJ=w.forwardRef((e,t)=>{var{children:r}=e,n=uat(e,cat),a=Vl();return a?w.createElement(Aat,null,r):w.createElement(hat,z_({ref:t},n),r)});function mat(){var e=cs(),[t,r]=w.useState(null),n=gr(IVe);return w.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Jo(s)&&s!==n&&e(nVe(s))}},[t,e,n]),r}function MJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pat(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MJ(Object(r),!0).forEach(function(n){gat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gat(e,t,r){return(t=xat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xat(e){var t=vat(e,"string");return typeof t=="symbol"?t:t+""}function vat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bat=w.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:A,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,N=cs(),[C,_]=w.useState(null),[j,I]=w.useState(null);DXe();var T=mat(),k=w.useCallback(R=>{T(R),typeof t=="function"&&t(R),_(R),I(R)},[T,t,_,I]),B=w.useCallback(R=>{N(O0e(R)),N(Ad({handler:s,reactEvent:R}))},[N,s]),M=w.useCallback(R=>{N(RR(R)),N(Ad({handler:u,reactEvent:R}))},[N,u]),P=w.useCallback(R=>{N(fhe()),N(Ad({handler:d,reactEvent:R}))},[N,d]),S=w.useCallback(R=>{N(RR(R)),N(Ad({handler:f,reactEvent:R}))},[N,f]),L=w.useCallback(()=>{N(U0e())},[N]),U=w.useCallback(R=>{N(M0e(R.key))},[N]),q=w.useCallback(R=>{N(Ad({handler:o,reactEvent:R}))},[N,o]),H=w.useCallback(R=>{N(Ad({handler:l,reactEvent:R}))},[N,l]),z=w.useCallback(R=>{N(Ad({handler:c,reactEvent:R}))},[N,c]),W=w.useCallback(R=>{N(Ad({handler:A,reactEvent:R}))},[N,A]),Z=w.useCallback(R=>{N(Ad({handler:x,reactEvent:R}))},[N,x]),V=w.useCallback(R=>{N(Q0e(R)),N(Ad({handler:g,reactEvent:R}))},[N,g]),Y=w.useCallback(R=>{N(Ad({handler:m,reactEvent:R}))},[N,m]);return w.createElement(Bhe.Provider,{value:C},w.createElement(rue.Provider,{value:j},w.createElement("div",{className:bn("recharts-wrapper",n),style:pat({position:"relative",cursor:"default",width:y,height:a},v),onClick:B,onContextMenu:q,onDoubleClick:H,onFocus:L,onKeyDown:U,onMouseDown:z,onMouseEnter:M,onMouseLeave:P,onMouseMove:S,onMouseUp:W,onTouchEnd:Y,onTouchMove:V,onTouchStart:Z,ref:k},r)))}),yat=["children","className","width","height","style","compact","title","desc"];function wat(e,t){if(e==null)return{};var r,n,a=Nat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Nat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var q0e=w.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:o,compact:l,title:c,desc:u}=e,d=wat(e,yat),f=Eo(d);return l?w.createElement(LJ,{otherAttributes:f,title:c,desc:u},r):w.createElement(bat,{className:n,style:o,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(LJ,{otherAttributes:f,title:c,desc:u,ref:t},w.createElement(crt,null,r)))}),Cat=["width","height"];function LR(){return LR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LR.apply(null,arguments)}function Eat(e,t){if(e==null)return{};var r,n,a=jat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kat={top:5,right:5,bottom:5,left:5},Sat={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:kat,reverseStackOrder:!1,syncMethod:"index"},K0e=w.forwardRef(function(t,r){var n,a=Gc(t.categoricalChartProps,Sat),{width:s,height:o}=a,l=Eat(a,Cat);if(!G1(s)||!G1(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:A}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return w.createElement($0e,{preloadedState:{options:m},reduxStoreName:(n=A.id)!==null&&n!==void 0?n:c},w.createElement(g0e,{chartData:A.data}),w.createElement(z0e,{width:s,height:o,layout:a.layout,margin:a.margin}),w.createElement(G0e,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),w.createElement(q0e,LR({},l,{width:s,height:o,ref:r})))}),_at=["axis","item"],yf=w.forwardRef((e,t)=>w.createElement(K0e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_at,tooltipPayloadSearcher:AT,categoricalChartProps:e,ref:t}));function Tat(e){var t=cs();return w.useEffect(()=>{t(nat(e))},[t,e]),null}var Bat=["width","height","layout"];function MR(){return MR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MR.apply(null,arguments)}function Iat(e,t){if(e==null)return{};var r,n,a=Dat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Dat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Oat={top:5,right:5,bottom:5,left:5},Pat={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Oat,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},W0e=w.forwardRef(function(t,r){var n,a=Gc(t.categoricalChartProps,Pat),{width:s,height:o,layout:l}=a,c=Iat(a,Bat);if(!G1(s)||!G1(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:A}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:A,eventEmitter:void 0};return w.createElement($0e,{preloadedState:{options:m},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},w.createElement(g0e,{chartData:a.data}),w.createElement(z0e,{width:s,height:o,layout:l,margin:a.margin}),w.createElement(G0e,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),w.createElement(Tat,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),w.createElement(q0e,MR({width:s,height:o},c,{ref:r})))}),Fat=["item"],Rat={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},CT=w.forwardRef((e,t)=>{var r=Gc(e,Rat);return w.createElement(W0e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Fat,tooltipPayloadSearcher:AT,categoricalChartProps:r,ref:t})}),Lat=["axis"],Mat={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Uat=w.forwardRef((e,t)=>{var r=Gc(e,Mat);return w.createElement(W0e,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Lat,tooltipPayloadSearcher:AT,categoricalChartProps:r,ref:t})}),Hat=["axis"],Qat=w.forwardRef((e,t)=>w.createElement(K0e,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Hat,tooltipPayloadSearcher:AT,categoricalChartProps:e,ref:t}));const Bm=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],UJ={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},Gw="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",Ro="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",uu="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",oO="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",lO="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",cO="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",_k="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",Vat="from-sky-500 to-indigo-500",$at="from-emerald-500 to-lime-500",zat="from-amber-500 to-rose-500",Gat="from-fuchsia-500 to-purple-600",uO={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:Uc,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:poe,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:va,dot:"bg-emerald-500"}},qat=e=>{const t=uO[e].icon;return i.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${uO[e].badge}`,children:[i.jsx("span",{className:`h-2 w-2 rounded-full ${uO[e].dot}`}),i.jsx(t,{className:"h-4 w-4"})," ",e]})},Kat=()=>{var Z,V;const[e,t]=w.useState("registro"),[r,n]=w.useState([]),[a,s]=w.useState(UJ),[o,l]=w.useState(null),[c,u]=w.useState(null),[d,f]=w.useState(!1),[A,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState(""),[N,C]=w.useState(""),_=w.useMemo(()=>G0[a.dimension]??[],[a.dimension]),j=w.useCallback(async()=>{f(!0);try{const Y=await t9e();n(Y)}catch(Y){console.error(Y),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);w.useEffect(()=>{j()},[j]);const I=Y=>{const{name:R,value:O}=Y.target;s(K=>({...K,[R]:O}))},T=Y=>{const R=Y.split(",").map(O=>O.trim()).filter(Boolean);s(O=>({...O,indicadores:R}))},k=Y=>{const R=Y.split(",").map(O=>O.trim()).filter(Boolean);s(O=>({...O,enlaces:R}))},B=()=>{s(UJ),l(null),u(null)},M=async Y=>{if(Y.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensin, subdimensin, descripcin y fecha de cumplimiento son obligatorios.");return}try{o?await n9e(o,a):await r9e(a),await j(),B(),t("seguimiento")}catch(R){console.error(R),u("Error al guardar la accin.")}},P=Y=>{l(Y.id),s({...Y,enlaces:Y.enlaces??[],indicadores:Y.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},S=async Y=>{confirm("Eliminar esta accin?")&&(await a9e(Y),await j())},L=w.useMemo(()=>r.filter(Y=>{const R=!A||Y.responsable.toLowerCase().includes(A.toLowerCase())||Y.descripcion.toLowerCase().includes(A.toLowerCase())||Y.subdimension.toLowerCase().includes(A.toLowerCase()),O=!g||Y.dimension===g,K=!v||Y.subdimension===v,J=!N||Y.estado===N;return R&&O&&K&&J}),[r,A,g,v,N]),U=w.useMemo(()=>{const Y=new Map;return r.forEach(R=>Y.set(R.dimension,(Y.get(R.dimension)??0)+1)),Array.from(Y.entries()).map(([R,O])=>({name:R,value:O}))},[r]),q=w.useMemo(()=>{const Y=new Map;return r.forEach(R=>Y.set(R.estado,(Y.get(R.estado)??0)+1)),Array.from(Y.entries()).map(([R,O])=>({name:R,value:O}))},[r]),H=w.useMemo(()=>{const Y=r.map(R=>R.avance??0);return Y.length?Math.round(Y.reduce((R,O)=>R+O,0)/Y.length):0},[r]),z=w.useMemo(()=>{const Y=new Map;return r.forEach(R=>Y.set(R.subdimension,(Y.get(R.subdimension)??0)+1)),Array.from(Y.entries()).map(([R,O])=>({name:R,value:O})).sort((R,O)=>O.value-R.value).slice(0,6)},[r]),W=()=>{const Y=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],R=r.map(oe=>[oe.id,oe.fechaRegistro,oe.responsable,oe.dimension,oe.subdimension,oe.descripcion.replace(/\n/g," "),oe.objetivos??"",(oe.indicadores??[]).join("|"),oe.cobertura??"",oe.fechaInicio??"",oe.fechaCumplimiento,oe.estado,oe.avance??0,(oe.enlaces??[]).join("|")]),O=[Y.join(","),...R.map(oe=>oe.map(re=>`"${String(re).replace(/"/g,'""')}"`).join(","))].join(`
`),K=new Blob([O],{type:"text/csv;charset=utf-8"}),J=URL.createObjectURL(K),ce=document.createElement("a");ce.href=J,ce.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,ce.click(),URL.revokeObjectURL(J)};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),i.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[i.jsx(dx,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(Z4e,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensin/Subdimensin."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[i.jsx(OS,{className:"h-4 w-4"})," Refrescar"]}),i.jsxs("button",{onClick:W,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[i.jsx(Df,{className:"h-4 w-4"})," CSV"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>t("registro"),className:`${oO} ${e==="registro"?lO:cO}`,children:[i.jsx(e0,{className:"h-4 w-4"})," Registro"]}),i.jsxs("button",{onClick:()=>t("seguimiento"),className:`${oO} ${e==="seguimiento"?lO:cO}`,children:[i.jsx(i1,{className:"h-4 w-4"})," Seguimiento"]}),i.jsxs("button",{onClick:()=>t("dashboard"),className:`${oO} ${e==="dashboard"?lO:cO}`,children:[i.jsx(v_e,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&i.jsx("div",{className:Gw,children:i.jsxs("form",{onSubmit:M,className:"p-6 md:p-8 space-y-6",children:[c&&i.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[i.jsx(Uc,{className:"h-5 w-5"}),i.jsx("span",{children:c})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Fecha de Registro"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),i.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:I,className:Ro+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Responsable"}),i.jsxs("div",{className:"relative",children:[i.jsx(fx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),i.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:I,className:Ro+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Cobertura (niveles/cursos)"}),i.jsxs("div",{className:"relative",children:[i.jsx(R1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),i.jsx("input",{type:"text",name:"cobertura",placeholder:"2A, 2B, 3Mecnica...",value:a.cobertura??"",onChange:I,className:Ro+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Dimensin PME"}),i.jsxs("div",{className:"relative",children:[i.jsx(kF,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsxs("select",{name:"dimension",value:a.dimension,onChange:I,className:Ro+" pl-10",children:[i.jsx("option",{value:"",children:"Selecciona una dimensin"}),Object.keys(G0).map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:uu,children:"Subdimensin"}),i.jsxs("div",{className:"relative",children:[i.jsx(JC,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),i.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:I,className:Ro+" pl-10",disabled:!a.dimension,children:[i.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensin":"Primero elige una dimensin"}),_.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:uu,children:"Descripcin de la Accin"}),i.jsxs("div",{className:"relative",children:[i.jsx(Wi,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),i.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:I,rows:3,placeholder:"Qu se har? Dnde y con quin?",className:Ro+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:uu,children:"Objetivos (opcional)"}),i.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:I,rows:2,placeholder:"Propsitos pedaggicos",className:Ro})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Indicadores (separados por coma)"}),i.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:Y=>T(Y.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:Ro})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Fecha de Inicio"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),i.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:I,className:Ro+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Fecha de Cumplimiento"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:I,className:Ro+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Estado"}),i.jsx("select",{name:"estado",value:a.estado,onChange:I,className:Ro,children:HG.map(Y=>i.jsx("option",{value:Y,children:Y},Y))})]}),i.jsxs("div",{children:[i.jsx("label",{className:uu,children:"Avance (%)"}),i.jsxs("div",{className:"relative",children:[i.jsx(M5,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:I,className:Ro+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:uu,children:"Enlaces de evidencia (separados por coma)"}),i.jsxs("div",{className:"relative",children:[i.jsx(DG,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:Y=>k(Y.target.value),placeholder:"https://..., https://...",className:Ro+" pl-10"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o&&i.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[o?i.jsx(Ml,{className:"h-4 w-4"}):i.jsx(xi,{className:"h-4 w-4"}),o?"Guardar cambios":"Registrar accin"]})]})]})}),e==="seguimiento"&&i.jsx("div",{className:Gw,children:i.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"relative md:col-span-2",children:[i.jsx(Cy,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),i.jsx("input",{className:Ro+" pl-10",placeholder:"Buscar por responsable, descripcin o subdimensin...",value:A,onChange:Y=>m(Y.target.value)})]}),i.jsxs("select",{value:g,onChange:Y=>{x(Y.target.value),y("")},className:Ro,children:[i.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(G0).map(Y=>i.jsx("option",{value:Y,children:Y},Y))]}),i.jsxs("select",{value:v,onChange:Y=>y(Y.target.value),className:Ro,children:[i.jsx("option",{value:"",children:"Todas las subdimensiones"}),(G0[g]??Object.values(G0).flat()).map(Y=>i.jsx("option",{value:Y,children:Y},Y))]}),i.jsxs("select",{value:N,onChange:Y=>C(Y.target.value),className:Ro,children:[i.jsx("option",{value:"",children:"Todos los estados"}),HG.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensin / Subdimensin"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripcin"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[L.map(Y=>{var R,O;return i.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[i.jsx("td",{className:"px-4 py-4 align-top text-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((O=(R=Y.responsable)==null?void 0:R.slice(0,1))==null?void 0:O.toUpperCase())||"?"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Y.responsable}),i.jsx("div",{className:"text-xs text-slate-500",children:Y.cobertura})]})]})}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[i.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:Y.dimension}),i.jsx("div",{className:"text-xs text-slate-500",children:Y.subdimension})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[i.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:Y.descripcion}),Y.enlaces&&Y.enlaces.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Y.enlaces.map((K,J)=>i.jsxs("a",{href:K,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[i.jsx(DG,{className:"h-3.5 w-3.5"})," Evidencia ",J+1]},J))})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",Y.fechaRegistro||"-"]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",Y.fechaInicio||"-"]}),i.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",Y.fechaCumplimiento]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:qat(Y.estado)}),i.jsxs("td",{className:"px-4 py-4 align-top",children:[i.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(Y.avance??0,0),100)}%`}})}),i.jsxs("div",{className:"text-xs text-center mt-1",children:[Y.avance??0,"%"]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx("button",{onClick:()=>P(Y),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:i.jsx(x3,{className:"h-5 w-5 text-amber-600"})}),i.jsx("button",{onClick:()=>S(Y.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:i.jsx(Qn,{className:"h-5 w-5 text-rose-600"})})]})})]},Y.id)}),L.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:`${_k} ${Vat}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Dl,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),i.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),i.jsx("div",{className:`${_k} ${$at}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(va,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),i.jsx("div",{className:"text-2xl font-black",children:((Z=q.find(Y=>Y.name==="Cumplida"))==null?void 0:Z.value)??0})]})]})}),i.jsx("div",{className:`${_k} ${zat}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(poe,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),i.jsx("div",{className:"text-2xl font-black",children:((V=q.find(Y=>Y.name==="En Proceso"))==null?void 0:V.value)??0})]})]})}),i.jsx("div",{className:`${_k} ${Gat}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(M5,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),i.jsxs("div",{className:"text-2xl font-black",children:[H,"%"]})]})]})})]}),i.jsxs("div",{className:Gw+" p-5",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensin"})}),i.jsx("div",{className:"h-64",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(yf,{data:U,children:[i.jsx(Rh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",hide:!0}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(qo,{}),i.jsx(Ed,{dataKey:"value",children:U.map((Y,R)=>i.jsx(SA,{fill:Bm[R%Bm.length]},R))})]})})}),i.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:U.map((Y,R)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:Bm[R%Bm.length]}}),i.jsx("span",{className:"flex-1",children:Y.name}),i.jsx("span",{className:"font-semibold",children:Y.value})]},R))})]}),i.jsxs("div",{className:Gw+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribucin por estado"}),i.jsx("div",{className:"h-64",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(CT,{children:[i.jsx(NE,{data:q,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:q.map((Y,R)=>i.jsx(SA,{fill:Bm[R%Bm.length]},R))}),i.jsx(Xp,{}),i.jsx(qo,{})]})})})]}),i.jsxs("div",{className:Gw+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones ms trabajadas"}),i.jsxs("ul",{className:"space-y-2",children:[z.map((Y,R)=>i.jsxs("li",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:Bm[R%Bm.length]}}),Y.name]}),i.jsx("span",{className:"font-semibold",children:Y.value})]},R)),z.length===0&&i.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},Wat="modulepreload",Xat=function(e){return"/"+e},HJ={},gi=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(r.map(u=>{if(u=Xat(u),u in HJ)return;HJ[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const A=document.createElement("link");if(A.rel=d?"stylesheet":Wat,d||(A.as="script"),A.crossOrigin="",A.href=u,c&&A.setAttribute("nonce",c),document.head.appendChild(A),d)return new Promise((m,g)=>{A.addEventListener("load",m),A.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},ET="presentacionesDidacticas",Yat=async(e,t)=>{const r=er(pt(xr,ET)),n={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await yi(r,n),r.id},QJ=async(e,t)=>{const r=er(xr,ET,e);await Zi(r,t)},Jat=async e=>{await fa(er(xr,ET,e))},Zat=(e,t)=>{const r=Lt(pt(xr,ET),ur("userId","==",e),tr("fechaCreacion","desc"));return hr(r,n=>{const a=n.docs.map(s=>s.data());t(a)})},est=async e=>{let t=null;try{const r=ua.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesin para generar presentaciones.");console.log("Estado de autenticacin:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const n=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",n.length);const a=Nl(Ox,"generateSlides"),s={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,userId:r.uid};t=await Yat({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentacin guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",s);const o=await a(s);console.log("Respuesta de funcin:",o);const l=o.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versin de demostracin. La presentacin no existe realmente."),await QJ(t,c)}catch(c){console.warn("Error al actualizar la presentacin en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentacin:",r),console.error("Cdigo:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await QJ(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentacin"}),console.warn(`Presentacin ${t} marcada como fallida`)}catch(n){console.error("Error al actualizar el estado de la presentacin:",n)}throw r}},dO=async()=>{var t,r,n,a;const e=ua.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesin para verificar la autorizacin.");try{const s=await e.getIdToken(),o=await fetch("https://us-central1-plania-clase.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const l=await o.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorizacin desconocido"}}catch(s){if(console.error("Error al verificar autorizacin de Google Slides:",s),(t=s.message)!=null&&t.includes("cors")||(r=s.message)!=null&&r.includes("blocked")||(n=s.message)!=null&&n.includes("CORS")||(a=s.message)!=null&&a.includes("fetch")){console.warn("Error de red detectado, usando mtodo alternativo para verificar autorizacin");try{const o=Lt(pt(xr,"userTokens"),ur("userId","==",e.uid)),l=await Rr(o);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificacin directa)":"Usuario autorizado para Google Slides (verificacin directa)"}}catch(o){return console.error("Error en verificacin alternativa:",o),{isAuthorized:!1,message:"Error al verificar autorizacin"}}}return{isAuthorized:!1,message:`Error al verificar autorizacin: ${s.message||"Error desconocido"}`}}},tst=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState(null),a=async()=>{t(!0);try{const o=await Nl(Ox,"testGemini")();n(o.data)}catch(s){console.error("Error calling testGemini:",s),n({success:!1,error:s.message||"Error desconocido",type:"client_error"})}t(!1)};return i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Prueba de Gemini AI"}),i.jsx("button",{onClick:a,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 mb-4",children:e?"Probando...":"Probar Gemini 1.5 Pro"}),r&&i.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Resultado:"}),i.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(r,null,2)}),r.success?i.jsx("div",{className:"mt-2 text-green-600",children:" Gemini AI est funcionando correctamente"}):i.jsxs("div",{className:"mt-2 text-red-600",children:[" Problema detectado: ",r.error]})]})]})},rst=({estilo:e,tema:t="Ejemplo de Presentacin"})=>{const n=(()=>{switch(e){case"sobrio":return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedaggica",ejemplo:["Ttulo principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]};case"visual":return{colores:{fondo:"bg-blue-50",fondoDiapo:"bg-white",titulo:"text-blue-800",texto:"text-slate-600",acento:"bg-blue-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Dinmico y colorido, con nfasis en elementos grficos e infografas",ejemplo:["Mayor uso de elementos visuales","Diagramas y representaciones grficas","Paleta de colores vibrantes"]};case"academico":return{colores:{fondo:"bg-amber-50",fondoDiapo:"bg-white",titulo:"text-amber-800",texto:"text-slate-700",acento:"bg-amber-100"},fuentes:{titulo:"font-serif",texto:"font-serif"},iconos:"",descripcion:"Formal y riguroso, con nfasis en conceptos tericos",ejemplo:["Estructura acadmica formal","Referencias y citas bibliogrficas","nfasis en conceptos tericos"]};case"interactivo":return{colores:{fondo:"bg-green-50",fondoDiapo:"bg-white",titulo:"text-green-800",texto:"text-slate-600",acento:"bg-green-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Participativo y colaborativo, con mltiples actividades",ejemplo:["Preguntas y actividades prcticas","Espacios para participacin","Dinmicas grupales sugeridas"]};case"profesional":return{colores:{fondo:"bg-indigo-50",fondoDiapo:"bg-white",titulo:"text-indigo-800",texto:"text-slate-600",acento:"bg-indigo-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Corporativo y prctico, enfocado en aplicaciones reales",ejemplo:["Diseo corporativo y estructurado","Casos de estudio prcticos","Aplicaciones en contexto laboral"]};case"creativo":return{colores:{fondo:"bg-purple-50",fondoDiapo:"bg-white",titulo:"text-purple-800",texto:"text-slate-600",acento:"bg-purple-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Innovador y atractivo, estimula la imaginacin",ejemplo:["Diseo creativo no convencional","Elementos visuales llamativos","Enfoque innovador del contenido"]};case"minimalista":return{colores:{fondo:"bg-gray-50",fondoDiapo:"bg-white",titulo:"text-gray-800",texto:"text-gray-600",acento:"bg-gray-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"",descripcion:"Simple y esencial, centrado en lo ms importante",ejemplo:["Diseo muy simplificado","Amplio espacio en blanco","Solo informacin esencial"]};default:return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedaggica",ejemplo:["Ttulo principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]}}})();return i.jsxs("div",{className:`p-4 rounded-lg ${n.colores.fondo} transition-all`,children:[i.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Vista previa: Estilo ",e]}),i.jsx("p",{className:"text-sm text-gray-500 mb-3",children:n.descripcion}),i.jsxs("div",{className:"shadow-md rounded-lg overflow-hidden",children:[i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo} border-b border-gray-200`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-lg font-bold mb-2`,children:t}),i.jsxs("div",{className:`${n.fuentes.texto} ${n.colores.texto} text-sm space-y-2`,children:[i.jsx("p",{children:"Diapositiva de ttulo con subttulo"}),i.jsx("div",{className:`w-2/3 h-2 ${n.colores.acento} rounded mt-2`})]})]}),i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo}`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-md font-bold mb-2`,children:"Caractersticas principales"}),i.jsx("ul",{className:`${n.fuentes.texto} ${n.colores.texto} text-xs space-y-1 list-disc pl-4`,children:n.ejemplo.map((a,s)=>i.jsx("li",{children:a},s))}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx("span",{className:"text-lg",children:n.iconos})})]})]})]})},nst=({userId:e,planificaciones:t})=>{const[r,n]=w.useState("presentaciones"),[a,s]=w.useState(null),[o,l]=w.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,contenidoFuente:"",enlaces:""}),[c,u]=w.useState(!1),[d,f]=w.useState([]),[A,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,C]=w.useState({isAuthorized:!1,message:"Verificando autorizacin...",checking:!0});w.useEffect(()=>e?Zat(e,L=>{f(L)}):void 0,[e]),w.useEffect(()=>{const S=async()=>{if(e)try{C(z=>({...z,checking:!0}));const H=await dO();C({isAuthorized:H.isAuthorized,message:H.message,checking:!1})}catch(H){C({isAuthorized:!1,message:`Error: ${H.message||"No se pudo verificar la autorizacin"}`,checking:!1})}};S();const L=setTimeout(()=>{C(H=>H.checking?{isAuthorized:!1,message:"Timeout al verificar autorizacin",checking:!1}:H)},1e4);if(new URLSearchParams(window.location.search).get("auth")==="success"){const H=setTimeout(()=>{S()},2e3);return()=>{clearTimeout(H),clearTimeout(L)}}return()=>clearTimeout(L)},[e]),w.useEffect(()=>{const S=async()=>{if(new URLSearchParams(window.location.search).get("auth")==="success"&&!N.isAuthorized)try{C(H=>({...H,checking:!0}));const q=await dO();C({isAuthorized:q.isAuthorized,message:q.message,checking:!1})}catch(q){C({isAuthorized:!1,message:`Error: ${q.message||"No se pudo verificar la autorizacin"}`,checking:!1})}};return window.addEventListener("popstate",S),()=>window.removeEventListener("popstate",S)},[N.isAuthorized]),w.useEffect(()=>{a&&("nombreUnidad"in a?l(S=>({...S,tema:a.nombreUnidad})):"nombreClase"in a&&l(S=>({...S,tema:a.nombreClase})))},[a]);const _=()=>{var S;if(!a)return[];if("lecciones"in a){const L=[];return(S=a.lecciones)==null||S.forEach(U=>{U.objetivosAprendizaje&&!L.includes(U.objetivosAprendizaje)&&L.push(U.objetivosAprendizaje)}),L}else if(a.detalleLeccionOrigen)return[a.detalleLeccionOrigen.objetivosAprendizaje];return[]},j=S=>{const{name:L,value:U,type:q}=S.target;if(q==="checkbox"){const H=S.target.checked;l(z=>({...z,[L]:H}))}else l(H=>({...H,[L]:U}))},I=S=>{const L=Array.from(S.target.selectedOptions,U=>U.value);l(U=>({...U,objetivosAprendizaje:L}))},T=async S=>{if(S.preventDefault(),!a){y("Debes seleccionar una planificacin");return}if(o.objetivosAprendizaje.length===0){y("Debes seleccionar al menos un objetivo de aprendizaje");return}y(null),x(!0);try{const L={planificacionId:a.id,tema:o.tema,curso:a.nivel,asignatura:a.asignatura,objetivosAprendizaje:o.objetivosAprendizaje,numDiapositivas:o.numDiapositivas,estilo:o.estilo,incluirImagenes:o.incluirImagenes,contenidoFuente:o.contenidoFuente,enlaces:o.enlaces?o.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentacin:",L);const U=await est({...L,userId:e});console.log("Resultado de la funcin:",U),U&&U.url&&console.log("Presentacin generada:",U.url)}catch(L){console.error("Error al generar presentacin:",L);const U=(L==null?void 0:L.message)||"Error desconocido",q=(L==null?void 0:L.code)||"unknown";y(`Error (${q}): ${U}`)}finally{x(!1)}},k=async S=>{if(window.confirm("Ests seguro de que deseas eliminar esta presentacin?"))try{m(!0),await Jat(S)}catch(L){console.error("Error al eliminar presentacin:",L),y("Error al eliminar la presentacin")}finally{m(!1)}},B=()=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentacin con IA"}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificacin"}),i.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(a==null?void 0:a.id)||"",onChange:S=>{const L=t.find(U=>U.id===S.target.value);s(L||null)},required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una planificacin"}),i.jsx("optgroup",{label:"Unidades",children:t.filter(S=>S.tipo==="Unidad").map(S=>i.jsxs("option",{value:S.id,children:[S.tipo==="Unidad"?S.nombreUnidad:""," - ",S.asignatura," (",S.nivel,")"]},S.id))}),i.jsx("optgroup",{label:"Clases",children:t.filter(S=>S.tipo==="Clase").map(S=>i.jsxs("option",{value:S.id,children:[S.tipo==="Clase"?S.nombreClase:""," - ",S.asignatura," (",S.nivel,")"]},S.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),i.jsx("input",{type:"text",name:"tema",value:o.tema,onChange:j,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),i.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:o.objetivosAprendizaje,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:_().map((S,L)=>i.jsx("option",{value:S,children:S},L))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantn presionado Ctrl (o Cmd) para seleccionar mltiples opciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"N de diapositivas"}),i.jsx("input",{type:"number",name:"numDiapositivas",value:o.numDiapositivas,onChange:j,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo de Presentacin"}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:[i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="sobrio"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"sobrio"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Sobrio"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Elegante y minimalista"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="visual"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"visual"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Visual"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Colorido y grfico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="academico"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"academico"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Acadmico"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formal y riguroso"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="interactivo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"interactivo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Interactivo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Participativo y dinmico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="profesional"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"profesional"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Profesional"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Corporativo y prctico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="creativo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"creativo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Creativo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Innovador y atractivo"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="minimalista"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(S=>({...S,estilo:"minimalista"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("span",{className:"font-medium",children:"Minimalista"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Simple y esencial"})]})})]}),i.jsxs("button",{type:"button",onClick:()=>u(!0),className:"mt-3 w-full flex items-center justify-center gap-2 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-800/40 transition-colors",children:[i.jsx(fp,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver ejemplo del estilo seleccionado"})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[i.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-medium",children:["Vista previa de estilo: ",o.estilo]}),i.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(No,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-5",children:[i.jsx(rst,{estilo:o.estilo,tema:o.tema||"Tema de la presentacin"}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-medium mb-2",children:["Caractersticas del estilo ",o.estilo]}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.estilo==="sobrio"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo elegante y profesional"}),i.jsx("li",{children:"Colores neutros y tipografa clsica"}),i.jsx("li",{children:"nfasis en la claridad y simplicidad"}),i.jsx("li",{children:"Ideal para presentaciones formales"})]}),o.estilo==="visual"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo colorido y dinmico"}),i.jsx("li",{children:"Mayor uso de grficos e imgenes"}),i.jsx("li",{children:"nfasis en elementos visuales e infografas"}),i.jsx("li",{children:"Ideal para mantener la atencin visual"})]}),o.estilo==="academico"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo formal y riguroso"}),i.jsx("li",{children:"Espacio para citas y referencias"}),i.jsx("li",{children:"nfasis en conceptos tericos"}),i.jsx("li",{children:"Ideal para contenido acadmico complejo"})]}),o.estilo==="interactivo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo participativo"}),i.jsx("li",{children:"Incluye actividades y preguntas"}),i.jsx("li",{children:"nfasis en la participacin activa"}),i.jsx("li",{children:"Ideal para clases dinmicas"})]}),o.estilo==="profesional"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo corporativo"}),i.jsx("li",{children:"Elementos de casos prcticos"}),i.jsx("li",{children:"nfasis en aplicaciones reales"}),i.jsx("li",{children:"Ideal para formacin profesional"})]}),o.estilo==="creativo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo no convencional y llamativo"}),i.jsx("li",{children:"Elementos visuales originales"}),i.jsx("li",{children:"nfasis en despertar la imaginacin"}),i.jsx("li",{children:"Ideal para temas creativos o artsticos"})]}),o.estilo==="minimalista"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseo extremadamente simplificado"}),i.jsx("li",{children:"Amplio espacio en blanco"}),i.jsx("li",{children:"nfasis en lo esencial"}),i.jsx("li",{children:"Ideal para conceptos claros y concisos"})]})]})]})]}),i.jsx("div",{className:"p-4 bg-gray-100 dark:bg-slate-700 flex justify-end",children:i.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Cerrar vista previa"})})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:o.incluirImagenes,onChange:S=>l(L=>({...L,incluirImagenes:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenes",className:"text-sm text-gray-700 dark:text-gray-300",children:" Incluir sugerencias para imgenes educativas"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirActividades",name:"incluirActividades",checked:o.incluirActividades||!1,onChange:S=>l(L=>({...L,incluirActividades:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirActividades",className:"text-sm text-gray-700 dark:text-gray-300",children:" Incluir actividades y ejercicios prcticos"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirEvaluacion",name:"incluirEvaluacion",checked:o.incluirEvaluacion||!1,onChange:S=>l(L=>({...L,incluirEvaluacion:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirEvaluacion",className:"text-sm text-gray-700 dark:text-gray-300",children:" Incluir diapositiva de evaluacin/reflexin"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"formatoPedagogico",name:"formatoPedagogico",checked:o.formatoPedagogico||!0,onChange:S=>l(L=>({...L,formatoPedagogico:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"formatoPedagogico",className:"text-sm text-gray-700 dark:text-gray-300",children:" Aplicar estructura pedaggica avanzada"})]})]}),i.jsxs("div",{className:"hidden",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenesOld",name:"incluirImagenesOld",checked:o.incluirImagenes,onChange:S=>l(L=>({...L,incluirImagenes:S.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenesOld",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imgenes libres de derechos"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),i.jsx("textarea",{name:"contenidoFuente",value:o.contenidoFuente,onChange:j,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aqu cualquier contenido de referencia para la presentacin..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),i.jsx("input",{type:"text",name:"enlaces",value:o.enlaces,onChange:j,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),v&&i.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:v}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:g||!a,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?i.jsxs(i.Fragment,{children:[i.jsx(ks,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(SF,{className:"w-4 h-4"}),"Generar Presentacin"]})})})]})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),i.jsx("div",{className:"space-y-4",children:A?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(ks,{className:"w-8 h-8 animate-spin text-indigo-500"})}):d.length===0?i.jsxs("div",{className:"text-center py-8 space-y-4",children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todava"}),i.jsx("div",{className:"text-sm",children:N.checking?i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[i.jsx(ks,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Verificando autorizacin..."})]}):i.jsxs("div",{className:`flex items-center justify-center gap-2 ${N.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[i.jsx("span",{children:N.isAuthorized?"":""}),i.jsx("span",{children:N.message})]})}),!N.checking&&!N.isAuthorized&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:()=>{const S=`https://us-central1-plania-clase.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.location.href=S},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(ux,{className:"w-4 h-4"}),i.jsx("span",{children:"Autorizar Google Slides"})]})}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:async()=>{try{C(L=>({...L,checking:!0}));const S=await dO();C({isAuthorized:S.isAuthorized,message:S.message,checking:!1})}catch(S){C({isAuthorized:!1,message:`Error: ${S.message||"No se pudo verificar la autorizacin"}`,checking:!1})}},disabled:N.checking,className:`flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors ${N.isAuthorized?"text-green-600 hover:text-green-800 border border-green-300 hover:bg-green-50":"text-gray-600 hover:text-gray-800 border border-gray-300 hover:bg-gray-50"}`,children:[N.checking?i.jsx(ks,{className:"w-3 h-3 animate-spin"}):i.jsx("span",{children:""}),i.jsx("span",{children:"Verificar estado"})]})})]}):d.map(S=>i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:S.tema}),S.estado==="generando"?i.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[i.jsx(ks,{className:"w-3 h-3 animate-spin"}),"Generando"]}):S.estado==="error"?i.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[i.jsx(No,{className:"w-3 h-3"}),"Error"]}):i.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[i.jsx(va,{className:"w-3 h-3"}),"Lista"]})]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[S.asignatura," - ",S.curso]}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Yo,{className:"w-3 h-3"}),new Date(S.fechaCreacion).toLocaleDateString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(XI,{className:"w-3 h-3"}),S.numDiapositivas," diapositivas"]}),i.jsxs("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full ${S.estilo==="sobrio"?"bg-slate-100 text-slate-700":S.estilo==="visual"?"bg-blue-100 text-blue-700":S.estilo==="academico"?"bg-amber-100 text-amber-700":S.estilo==="interactivo"?"bg-green-100 text-green-700":S.estilo==="profesional"?"bg-indigo-100 text-indigo-700":S.estilo==="creativo"?"bg-purple-100 text-purple-700":(S.estilo==="minimalista","bg-gray-100 text-gray-700")}`,children:[S.estilo==="sobrio"&&"",S.estilo==="visual"&&"",S.estilo==="academico"&&"",S.estilo==="interactivo"&&"",S.estilo==="profesional"&&"",S.estilo==="creativo"&&"",S.estilo==="minimalista"&&"",S.estilo]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),i.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:S.objetivosAprendizaje.map((L,U)=>i.jsx("li",{className:"truncate",children:L.length>60?L.substring(0,57)+"...":L},U))})]}),S.mensajeError&&i.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:S.mensajeError}),i.jsxs("div",{className:"mt-3 flex justify-between",children:[S.estado==="completada"?i.jsxs(i.Fragment,{children:[i.jsxs("a",{href:S.esDemoMode||S.urlPresentacion.includes("example.com")?"#":S.urlPresentacion,onClick:L=>{(S.esDemoMode||S.urlPresentacion.includes("example.com"))&&(L.preventDefault(),alert("Esta es una versin de demostracin. En la versin final, aqu vers una presentacin real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${S.esDemoMode||S.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[i.jsx(ux,{className:"w-3 h-3"}),S.esDemoMode||S.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),S.esDemoMode&&S.urlAutorizacion&&i.jsxs("a",{href:S.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[i.jsx(ux,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):i.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),i.jsx("button",{onClick:()=>k(S.id),className:"text-red-500 hover:text-red-700",children:i.jsx(Qn,{className:"w-4 h-4"})})]})]},S.id))})]})})]}),M=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(_G,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Seccin de Guas Didcticas"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta funcin estar disponible prximamente."})]}),P=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(XI,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta funcin estar disponible prximamente."})]});return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>n("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(SF,{className:"w-4 h-4"}),i.jsx("span",{children:"Presentaciones"})]}),i.jsxs("button",{onClick:()=>n("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(_G,{className:"w-4 h-4"}),i.jsx("span",{children:"Guas"})]}),i.jsxs("button",{onClick:()=>n("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(XI,{className:"w-4 h-4"}),i.jsx("span",{children:"Recursos"})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx(tst,{})}),i.jsxs("div",{children:[r==="presentaciones"&&B(),r==="guias"&&M(),r==="recursos"&&P()]})]})},EE="planificaciones",X0e="actividades_calendario",H9=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion,...t.detallesLeccion?{detallesLeccion:Array.isArray(t.detallesLeccion)?t.detallesLeccion:[]}:{}}},Y0e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:wr.fromDate(new Date),fechaActualizacion:wr.fromDate(new Date)};return(await dn(pt(dt,EE),r)).id}catch(r){throw console.error("Error al guardar planificacin:",r),new Error("No se pudo guardar la planificacin")}},J0e=async(e,t,r)=>{try{const n=er(dt,EE,e),a=await bA(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificacin");await Zi(n,{...t,fechaActualizacion:wr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificacin:",n),new Error("No se pudo actualizar la planificacin")}},Z0e=async(e,t)=>{try{const r=er(dt,EE,e),n=await bA(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificacin");await fa(r)}catch(r){throw console.error("Error al eliminar planificacin:",r),new Error("No se pudo eliminar la planificacin")}},ast=async e=>{try{const t=Lt(pt(dt,EE),ur("userId","==",e),tr("fechaCreacion","desc"));return(await Rr(t)).docs.map(H9)}catch(t){return console.error("Error al obtener planificaciones:",t),[]}},eAe=(e,t)=>{const r=Lt(pt(dt,EE),ur("userId","==",e),tr("fechaCreacion","desc"));return hr(r,n=>{try{const a=n.docs.map(H9);console.log(`Recibiendo ${a.length} planificaciones del usuario ${e}`);const s=a.map(o=>o.tipo==="Unidad"&&!Array.isArray(o.detallesLeccion)?(console.warn(`Planificacin ${o.id} tiene detallesLeccion invlidos, corrigiendo.`),{...o,detallesLeccion:[]}):o);t(s)}catch(a){console.error("Error procesando datos de planificaciones:",a),t([])}},n=>{console.error("Error en suscripcin a planificaciones:",n)})},tAe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:wr.fromDate(new Date),fechaActualizacion:wr.fromDate(new Date)};return(await dn(pt(dt,X0e),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},rAe=(e,t)=>{const r=Lt(pt(dt,X0e),ur("userId","==",e),tr("fecha","desc"));return hr(r,n=>{const a=n.docs.map(H9);t(a)},n=>{console.error("Error en suscripcin a actividades:",n)})},UR=Object.freeze(Object.defineProperty({__proto__:null,deletePlanificacion:Z0e,getPlanificacionesByUser:ast,saveActividad:tAe,savePlanificacion:Y0e,subscribeToActividades:rAe,subscribeToPlanificaciones:eAe,updatePlanificacion:J0e},Symbol.toStringTag,{value:"Module"})),Q9="documentacion_docs";function nAe(e){const t=Lt(pt(xr,Q9),tr("createdAt","desc"));return hr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})}async function aAe(e,t,r){const n=er(pt(xr,Q9)),a={title:e,description:t||"",tags:r||[],createdAt:Xn()};return await yi(n,a,{merge:!0}),n.id}async function sAe(e,t){const r=`documentacion/${e}/${t.name}`,n=Iu(yA,r);await WC(n,t,{contentType:t.type});const a=await MA(n);return{storagePath:r,downloadURL:a,contentType:t.type}}async function G_(e,t,r,n,a,s){return(await Nl(Ox,"indexDocumentacionDoc")({docId:e,storagePath:t,title:r,description:n,tags:a,contentType:s})).data}async function sst(e,t=3,r,n){return(await Nl(Ox,"documentacionQuery")({question:e,topK:t,tags:r,history:n})).data}async function HR(e){await fa(er(xr,Q9,e))}const ist=(e,t)=>{const[r,n]=w.useState([]),[a,s]=w.useState(!0),[o,l]=w.useState(null),c=w.useCallback(async()=>{if(!e){console.warn(" cargarPlanificacionesDirectamente: userId nulo, no se pueden cargar planificaciones"),s(!1),l("No se pudo determinar la identidad del usuario"),n([]);return}try{console.log(` Cargando planificaciones directamente para ${e}`);const{getPlanificacionesByUser:m}=await gi(async()=>{const{getPlanificacionesByUser:v}=await Promise.resolve().then(()=>UR);return{getPlanificacionesByUser:v}},void 0),g=await m(e);console.log(` Obtenidas ${g.length} planificaciones directamente de Firestore`);const x=g.map(v=>v.tipo==="Unidad"&&!Array.isArray(v.detallesLeccion)?(console.log(` Corrigiendo datos de planificacin ${v.id}`),{...v,detallesLeccion:[]}):v);n(x),s(!1)}catch(m){console.error(" Error cargando planificaciones directamente:",m),l(m instanceof Error?m.message:"Error al cargar planificaciones directamente"),s(!1)}},[e]);w.useEffect(()=>{if(!e){console.log(" usePlanificaciones: userId nulo o vaco, no se cargarn planificaciones"),s(!1),l("ID de usuario no disponible"),n([]);return}console.log(` usePlanificaciones: Cargando planificaciones para usuario ${e}`),s(!0),l(null);let m=null;try{m=eAe(e,x=>{if(console.log(` usePlanificaciones: Recibidos ${x.length} documentos por suscripcin`),x.length===0){c();return}const v=x.map(y=>y.tipo==="Unidad"&&!Array.isArray(y.detallesLeccion)?(console.log(` Corrigiendo datos de planificacin ${y.id}`),{...y,detallesLeccion:[]}):y);n(v),s(!1)})}catch(x){console.error(" Error en hook usePlanificaciones:",x),l(x instanceof Error?x.message:"Error al cargar planificaciones"),c()}const g=setTimeout(()=>{a&&r.length===0&&(console.log(" Timeout: cargando planificaciones directamente como respaldo"),c())},5e3);return()=>{m&&m(),clearTimeout(g)}},[e,c]);const u=async m=>{try{return l(null),await Y0e(m,e)}catch(g){throw l(g.message||"Error al guardar planificacin"),g}},d=async(m,g)=>{try{l(null),await J0e(m,g,e)}catch(x){throw l(x.message||"Error al actualizar planificacin"),x}},f=async m=>{try{l(null),await Z0e(m,e)}catch(g){throw l(g.message||"Error al eliminar planificacin"),g}},A=w.useCallback(async()=>{try{if(!e)return{status:"error",message:"No hay usuario identificado. Datos del usuario no disponibles."};console.log(" Diagnstico - ID de usuario:",e);const{getPlanificacionesByUser:m}=await gi(async()=>{const{getPlanificacionesByUser:y}=await Promise.resolve().then(()=>UR);return{getPlanificacionesByUser:y}},void 0),g=await m(e),x=g.filter(y=>y.tipo==="Unidad"),v=x.filter(y=>!Array.isArray(y.detallesLeccion)||y.detallesLeccion===void 0);if(console.log(` Diagnstico - Total planificaciones: ${g.length}, Unidades: ${x.length}, Invlidas: ${v.length}`),v.length>0){const{updateDoc:y,doc:N}=await gi(async()=>{const{updateDoc:_,doc:j}=await Promise.resolve().then(()=>O1);return{updateDoc:_,doc:j}},void 0),{db:C}=await gi(async()=>{const{db:_}=await Promise.resolve().then(()=>YM);return{db:_}},void 0);for(const _ of v)await y(N(C,"planificaciones",_.id),{detallesLeccion:[]});return{status:"repaired",message:`Se repararon ${v.length} planificaciones de ${x.length} totales.`}}else if(x.length===0)return{status:"empty",message:`No se encontraron planificaciones de unidad para el usuario ${e}. Cree una nueva planificacin.`};return{status:"ok",message:`Todo correcto. ${x.length} planificaciones de unidad encontradas.`}}catch(m){return console.error(" Error en diagnstico:",m),{status:"error",message:`Error: ${m instanceof Error?m.message:"Desconocido"}`}}},[e]);return{planificaciones:r,loading:a,error:o,save:u,update:d,remove:f,diagnosticarYReparar:A}},QR=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},ost=e=>{const[t,r]=w.useState([]),[n,a]=w.useState(!0),[s,o]=w.useState(null);w.useEffect(()=>{if(!e){a(!1);return}a(!0);try{return rAe(e,u=>{r(u),a(!1)})}catch(c){o(c instanceof Error?c.message:"Error al cargar actividades"),a(!1)}},[e]);const l=w.useCallback(async c=>{try{return o(null),await tAe(c,e)}catch(u){throw o(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:l}},lst=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=w.useState(e),o=c=>{s({...a,[c.target.name]:c.target.value})},l=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar leccin:",c)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Leccin"}),i.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),i.jsx("textarea",{name:c,value:u,onChange:o,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),i.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},cst=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{var M,P,S;const[s,o]=w.useState(e.progreso??0),[l,c]=w.useState(!1),[u,d]=w.useState(((M=e.reflexionUnidad)==null?void 0:M.fortalezas)||""),[f,A]=w.useState(((P=e.reflexionUnidad)==null?void 0:P.mejoras)||""),[m,g]=w.useState(((S=e.reflexionUnidad)==null?void 0:S.debilidades)||""),x=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],v=(()=>{var U;const L=Object.fromEntries(x.map(q=>[q,""]));return(((U=e.reflexionUnidad)==null?void 0:U.ordenHabilidades)||[]).forEach((q,H)=>{x.includes(q)&&(L[q]=H+1)}),L})(),[y,N]=w.useState(v),[C,_]=w.useState(!1);w.useEffect(()=>{var U,q,H,z;d(((U=e.reflexionUnidad)==null?void 0:U.fortalezas)||""),A(((q=e.reflexionUnidad)==null?void 0:q.mejoras)||""),g(((H=e.reflexionUnidad)==null?void 0:H.debilidades)||"");const L=Object.fromEntries(x.map(W=>[W,""]));(((z=e.reflexionUnidad)==null?void 0:z.ordenHabilidades)||[]).forEach((W,Z)=>{x.includes(W)&&(L[W]=Z+1)}),N(L)},[e.id]);const j=()=>{const L=u.trim().length>0&&f.trim().length>0&&m.trim().length>0,q=Object.entries(y).filter(([,H])=>H!=="").sort((H,z)=>H[1]-z[1]).map(([H])=>H).length>=1;return L&&q},I=async L=>{const U=parseInt(L.target.value,10);if(U===100&&!j()){alert("Para marcar la unidad como 100% completada, primero debes completar y guardar la Reflexin Docente (fortalezas, mejoras, desafos y priorizacin de habilidades).");return}o(U),c(!0);try{e.id&&a&&(await a(e.id,{progreso:U}),console.log(" Progreso actualizado exitosamente"))}catch(q){console.error(" Error completo:",q),alert(`Error al guardar el avance: ${q.message}`),o(e.progreso??0)}finally{c(!1)}},T=(L,U)=>{N(q=>{const H={...q};if(U!==""){const z=Object.keys(H).find(W=>W!==L&&H[W]===U);z&&(H[z]="")}return H[L]=U,H})},k=()=>Object.entries(y).filter(([,L])=>L!=="").sort((L,U)=>L[1]-U[1]).map(([L])=>L),B=async()=>{if(!(!a||!e.id)){if(!j()){alert("La Reflexin Docente es obligatoria: completa Fortalezas, Mejoras, Desafos y prioriza al menos una habilidad de Bloom.");return}_(!0);try{const L=k();await a(e.id,{reflexionUnidad:{fortalezas:u.trim(),mejoras:f.trim(),debilidades:m.trim(),ordenHabilidades:L}})}catch(L){console.error(" Error al guardar reflexin:",L),alert(`Error al guardar la reflexin: ${L.message}`)}finally{_(!1)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"range",min:0,max:100,value:s,onChange:I,disabled:l||n}),i.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),l&&i.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),i.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((L,U)=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",U+1,": ",L.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo:"})," ",L.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Contenidos:"})," ",L.contenidosConceptuales]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Habilidad (Bloom):"})," ",L.habilidadesBloom]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Perfil de Egreso:"})," ",L.perfilEgreso]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Interdisciplinariedad:"})," ",L.asignaturasInterdisciplinariedad]})]}),i.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-md",children:i.jsxs("p",{className:"font-medium",children:[i.jsx("strong",{children:"Actividades sugeridas:"})," ",L.actividades]})}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{onClick:()=>t(U,L),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),i.jsx("button",{onClick:()=>r(L,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},U))}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-3",children:"Reflexin Docente"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:'Obligatoria. Se usa en el mdulo "Seguimiento Curricular" para anlisis y visualizacin.'}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Fortalezas ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:u,onChange:L=>d(L.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Mejoras ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:f,onChange:L=>A(L.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Desafos ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:m,onChange:L=>g(L.target.value),rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Habilidades Bloom priorizadas (1 = mayor prioridad) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:x.map(L=>i.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:L}),i.jsxs("select",{value:y[L]===""?"":String(y[L]),onChange:U=>T(L,U.target.value===""?"":parseInt(U.target.value,10)),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:""}),[1,2,3,4,5,6].map(U=>i.jsx("option",{value:U,children:U},U))]})]},L))}),i.jsx("div",{className:"mt-3 text-xs text-slate-500 dark:text-slate-400",children:"Selecciona nmeros sin repetir. Solo se guardan las habilidades con nmero asignado."})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsxs("button",{onClick:B,disabled:C||n,className:"inline-flex items-center gap-2 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2 px-4 rounded-md disabled:opacity-50",children:[C?i.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin inline-block"}):i.jsx(Ml,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar reflexin"})]})})]})]})},ust=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,o]=w.useState(e),[l,c]=w.useState(!1);w.useEffect(()=>{console.log("Plan inicial:",e.momentosClase);const A=v=>{if(typeof v=="object"&&v!==null)return JSON.stringify(v);if(typeof v=="string")try{if(v.trim().startsWith("{")){const y=JSON.parse(v);return JSON.stringify(y)}}catch(y){console.log("No es JSON vlido:",y)}return String(v)},m=A(e.momentosClase.inicio),g=A(e.momentosClase.desarrollo),x=A(e.momentosClase.cierre);console.log("Contenido procesado - inicio:",m),o(v=>({...v,momentosClase:{inicio:m,desarrollo:g,cierre:x}}))},[e]);const u=A=>{const{name:m,value:g}=A.target,[x,v]=m.split(".");o(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},d=async()=>{c(!0);try{await r((()=>{const m={...s};return Object.keys(m.momentosClase).forEach(g=>{const x=m.momentosClase[g];if(typeof x=="string"&&(x.includes("TIEMPO:")||x.includes("OBJETIVO:")||x.includes("ACTIVIDADES:")))try{const v=x.match(/TIEMPO:\s*(.*?)(?:\n\n|\n$)/s),y=x.match(/OBJETIVO:\s*(.*?)(?:\n\nACTIVIDADES:|\n$)/s);(v||y)&&console.log("Manteniendo formato para visualizacin")}catch(v){console.error("Error al procesar plan para guardar:",v)}}),m})())}catch(A){console.error("Error al guardar plan de clase:",A)}finally{c(!1)}},f=A=>{if(console.log("Formateando contenido:",typeof A,A!=null&&A.substring?A.substring(0,50):A),typeof A=="string")try{A.trim().startsWith("{")&&(A=JSON.parse(A),console.log("Contenido parseado a objeto:",A))}catch(m){console.log("Error al parsear JSON:",m)}if(typeof A=="object"&&A!==null)try{let m="";if(A.actividades&&Array.isArray(A.actividades)){m=`${A.tiempo?"TIEMPO: "+A.tiempo+`

`:""}`,m+=`${A.objetivo?`OBJETIVO:
`+A.objetivo+`

`:""}`,m+=`ACTIVIDADES:

`,A.actividades.forEach((x,v)=>{m+=`ACTIVIDAD ${v+1}: ${x.nombre||"Sin nombre"}
`,m+=`${x.descripcion||"Sin descripcin"}

`;let y="";x.tipo&&(y+=` Tipo: ${x.tipo}
`),x.recursos&&(y+=` Recursos: ${x.recursos}
`),x.evaluacion&&(y+=` Evaluacin: ${x.evaluacion}
`),y&&(m+=`${y}
`)});let g="";return Object.keys(A).forEach(x=>{x!=="tiempo"&&x!=="objetivo"&&x!=="actividades"&&(g+=` ${x.charAt(0).toUpperCase()+x.slice(1)}: ${typeof A[x]=="object"?JSON.stringify(A[x]):A[x]}
`)}),g&&(m+=`
INFORMACIN ADICIONAL:
${g}`),m}else{if(typeof A=="string")try{const y=JSON.parse(A);if(y.actividades||y.tiempo||y.objetivo)return f(y)}catch{}const x=JSON.stringify(A,null,2).replace(/[{}"]/g,"").replace(/,$/gm,"").replace(/^\s*\n/gm,"").split(`
`);let v="";return x.forEach(y=>{if(y.trim().startsWith("["))v+=`
`+y.trim()+`
`;else if(y.trim().startsWith("-"))v+=" "+y.trim().substring(1)+`
`;else if(y.includes(":")){const N=y.split(":");if(N.length>=2){const C=N[0].trim(),_=N.slice(1).join(":").trim();["tiempo","duracin","objetivo","actividad","tipo","recursos","evaluacin"].includes(C.toLowerCase())?v+=`${C.toUpperCase()}: ${_}
`:v+=`${C}: ${_}
`}else v+=y+`
`}else v+=y+`
`}),v}}catch(m){return console.error("Error al formatear contenido:",m),String(A)}return String(A)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),i.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||l,children:" Volver"})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-blue-400 dark:border-blue-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsx("label",{className:"font-bold text-lg text-blue-700 dark:text-blue-300",children:"Inicio de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.inicio",value:f(s.momentosClase.inicio),onChange:u,rows:5,placeholder:"Describe las actividades iniciales, activacin de conocimientos previos, motivacin y presentacin del objetivo de la clase...",className:"w-full p-3 border border-blue-200 dark:border-blue-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-700 focus:border-blue-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-green-400 dark:border-green-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("label",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:"Desarrollo de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.desarrollo",value:f(s.momentosClase.desarrollo),onChange:u,rows:8,placeholder:"Describe las actividades principales de aprendizaje, secuencia didctica, estrategias de enseanza, actividades prcticas...",className:"w-full p-3 border border-green-200 dark:border-green-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-green-300 dark:focus:ring-green-700 focus:border-green-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-transparent dark:from-amber-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("label",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:"Cierre de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.cierre",value:f(s.momentosClase.cierre),onChange:u,rows:5,placeholder:"Describe las actividades de cierre, sntesis, metacognicin, evaluacin formativa y retroalimentacin...",className:"w-full p-3 border border-amber-200 dark:border-amber-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-amber-300 dark:focus:ring-amber-700 focus:border-amber-300 focus:outline-none transition-all",disabled:a||l})]})]}),i.jsx("div",{className:"text-right mt-6",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:" Eliminar Plan"}),i.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:[l&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},dst=({userId:e})=>{const{actividades:t,save:r}=ost(e),[n,a]=w.useState("list"),[s,o]=w.useState(null),[l,c]=w.useState(!1),[u,d]=w.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[A,m]=w.useState(f);w.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(I){console.error("Error al verificar evento en calendario:",I)}},x=I=>{const{name:T,value:k}=I.target;m(B=>({...B,[T]:k}))},v=(I,T,k)=>{m(B=>({...B,tareas:B.tareas.map(M=>M.id===I?{...M,[T]:k}:M)}))},y=()=>{m(I=>({...I,tareas:[...I.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},N=I=>{m(T=>({...T,tareas:T.tareas.filter(k=>k.id!==I)}))},C=async I=>{I.preventDefault(),c(!0);const T=`Eres un especialista en objetivos educacionales segn el currculum nacional chileno. Basado en la siguiente informacin de una actividad pedaggica, genera un objetivo claro y conciso para esta.
    - Nombre: ${A.nombre}
    - Descripcin: ${A.descripcion}
    - Tareas: ${A.tareas.map(k=>k.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (mximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propsito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currculum nacional
    - Ser medible y observable`;try{QR("Planificacin - Actividad Calendario");const k=ua.currentUser,B=k?await k.getIdToken():null;if(!B)throw new Error("No se pudo obtener el token de autenticacin");const M=await fetch("/api/generarObjetivoActividad",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`},body:JSON.stringify({prompt:T,formData:A})});let P="No generado";M.ok?P=(await M.json()).objetivo||P:(console.error("Error al generar objetivo con IA:",await M.text()),alert("Hubo un error al generar el objetivo. La actividad se guardar sin l."));const S={...A,objetivo:P},L=await r(S),U={...S,id:L};o(U),a("summary")}catch(k){console.error("Error al guardar actividad:",k),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}finally{c(!1)}},_=I=>{console.log("Agregando al calendario:",I),d(!0)},j="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return n==="form"?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Detalles de la Actividad"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{name:"nombre",value:A.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"fecha",type:"date",value:A.fecha,onChange:x,className:j,required:!0,disabled:l}),i.jsx("input",{name:"hora",type:"time",value:A.hora,onChange:x,className:j,required:!0,disabled:l})]}),i.jsx("textarea",{name:"descripcion",value:A.descripcion,onChange:x,placeholder:"Descripcin (objetivos, contenidos, metodologa)",rows:4,className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"ubicacion",value:A.ubicacion,onChange:x,placeholder:"Ubicacin",className:j,required:!0,disabled:l}),i.jsx("input",{name:"participantes",value:A.participantes,onChange:x,placeholder:"Participantes",className:j,required:!0,disabled:l})]}),i.jsx("textarea",{name:"recursosGenerales",value:A.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:j,disabled:l})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),i.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),i.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:A.tareas.map((I,T)=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[i.jsx("button",{type:"button",onClick:()=>N(I.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:""}),i.jsx("textarea",{value:I.descripcion,onChange:k=>v(I.id,"descripcion",k.target.value),placeholder:`Descripcin de la Tarea ${T+1}`,rows:2,className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsx("input",{value:I.responsable,onChange:k=>v(I.id,"responsable",k.target.value),placeholder:"Responsable",className:j,required:!0,disabled:l}),i.jsx("input",{value:I.recursos,onChange:k=>v(I.id,"recursos",k.target.value),placeholder:"Recursos Necesarios",className:j,disabled:l})]})]},I.id))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[i.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),i.jsx("p",{className:"text-sm",children:"Este objetivo se generar automticamente a partir de la descripcin y las tareas ingresadas. Una vez guardada la actividad, podr revisar y ajustar el objetivo propuesto por el sistema."})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-lg",children:"Actividad Planificada con xito!"}),i.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuacin."})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),i.jsx("span",{children:s.nombre})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),i.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Descripcin:"}),i.jsx("p",{children:s.descripcion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Ubicacin:"}),i.jsx("span",{children:s.ubicacion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),i.jsx("span",{children:s.participantes})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),i.jsx("p",{children:s.recursosGenerales})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),i.jsx("p",{children:s.objetivo})]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[i.jsx("p",{className:"text-sm",children:"Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),i.jsx("button",{onClick:()=>_(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?" Aadido al Calendario":"Aadir al Calendario"})]})]}),i.jsx("button",{onClick:()=>{a("list"),o(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),i.jsx("button",{onClick:()=>{a("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),i.jsx("div",{className:"space-y-3",children:t.length>0?t.map(I=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",I.ubicacion]})]},I.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},VJ=({currentUser:e})=>{const t=(e==null?void 0:e.uid)||(e==null?void 0:e.id)||(e==null?void 0:e.email)||"";console.log(" PlanificacionDocente - Usuario actual:",{uid:e==null?void 0:e.uid,id:e==null?void 0:e.id,email:e==null?void 0:e.email,nombreCompleto:e==null?void 0:e.nombreCompleto,usuarioSeleccionado:t});const r=t&&t.length>0;console.log(" ID de usuario vlido:",r);const{planificaciones:n,save:a,update:s,remove:o,loading:l,diagnosticarYReparar:c}=ist(r?t:null),u={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[d,f]=w.useState(u),[A,m]=w.useState(null),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,C]=w.useState("unidad"),[_,j]=w.useState(null),[I,T]=w.useState(null),[k,B]=w.useState([]),[M,P]=w.useState([]),[S,L]=w.useState(""),[U,q]=w.useState(""),[H,z]=w.useState("planificacion"),[W,Z]=w.useState(null),[V,Y]=w.useState(!1),R=(me,ge)=>{A&&T({planId:A.id,lessonIndex:me,lessonData:ge})},O=me=>{m(me),f({asignatura:me.asignatura,nivel:me.nivel,nombreUnidad:me.nombreUnidad,contenidos:me.contenidos,cantidadClases:me.cantidadClases,observaciones:me.observaciones,ideasParaUnidad:me.ideasParaUnidad})},K=async me=>{if(window.confirm("Ests seguro de que quieres eliminar esta planificacin?"))try{await o(me),(A==null?void 0:A.id)===me&&m(null)}catch(ge){console.error("Error al eliminar planificacin:",ge),alert("No se pudo eliminar la planificacin.")}},J=async me=>{if(window.confirm("Ests seguro de que quieres eliminar este plan de clase?"))try{await o(me),j(null)}catch(ge){console.error("Error al eliminar plan de clase:",ge),alert("No se pudo eliminar el plan de clase.")}},ce=w.useMemo(()=>e.asignaturas||[],[e.asignaturas]),oe=w.useMemo(()=>{const me=e.cursos||[],ge=new Set;return me.forEach(Te=>{Te.startsWith("1")?ge.add("1 Medio"):Te.startsWith("2")?ge.add("2 Medio"):Te.startsWith("3")?ge.add("3 Medio"):Te.startsWith("4")&&ge.add("4 Medio")}),Array.from(ge)},[e.cursos]);w.useEffect(()=>{f(me=>({...me,asignatura:ce[0]||"",nivel:oe[0]||""}))},[ce,oe]);const re=me=>{const{name:ge,value:Te}=me.target;f(Ve=>({...Ve,[ge]:ge==="cantidadClases"?parseInt(Te,10):Te}))};w.useEffect(()=>{const me=nAe(ge=>{const Te=ge.filter(Ve=>Array.isArray(Ve.tags)&&Ve.tags.includes("planificacion"));B(Te)});return()=>{try{typeof me=="function"&&me()}catch{}}},[]);const ue=me=>{P(ge=>ge.includes(me)?ge.filter(Te=>Te!==me):[...ge,me])},le=()=>{const{asignatura:me,nivel:ge,nombreUnidad:Te,contenidos:Ve,cantidadClases:Xe,observaciones:Ke,ideasParaUnidad:Qe}=d,Je=k.filter(We=>M.includes(We.id)),mt=Je.length>0?`

Documentos institucionales a considerar (Subdireccin):
${Je.map(We=>`- ${We.title}${We.description?`: ${We.description}`:""}`).join(`
`)}

Usa estas referencias para alinear la planificacin con los lineamientos institucionales.`:"";return`Eres un experto diseador curricular para la educacin media tcnico profesional en Chile. Tu tarea es generar una planificacin de unidad didctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currculum Nacional Chileno (MINEDUC) para ${me} en ${ge}. La planificacin debe presentarse en formato JSON estructurado.

    **Informacin Base:**
    - Asignatura: ${me}
    - Nivel: ${ge}
    - Nombre de la Unidad: "${Te}"
    - Contenidos clave a trabajar (insumo principal): "${Ve}"
    - Cantidad de clases para la unidad: ${Xe}
    - Ideas y perspectiva del docente para la unidad: "${Qe||"Ninguna. S creativo."}"
    - Observaciones y nfasis del docente: "${Ke||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegrate que los objetivos estn alineados con las Bases Curriculares del MINEDUC para ${me} en ${ge}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currculum en lnea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles tcnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluacin general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Xe} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje especfico para la leccin, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarn en la leccin.
        - **habilidadesBloom**: La habilidad principal de la Taxonoma de Bloom que se trabajar (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la leccin con una habilidad del perfil de egreso (ej: "Pensamiento crtico", "Colaboracin").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el nmero de clase entre parntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podra realizar un trabajo interdisciplinario.

    Asegrate de que el contenido generado sea coherente, pedaggicamente slido y est directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.${mt}`},ve=async me=>{me.preventDefault(),x(!0),y(null);try{QR("Planificacin - Unidad");const ge=le(),Te=ua.currentUser,Ve=Te?await Te.getIdToken():null;if(!Ve)throw new Error("No se pudo obtener el token de autenticacin");const Xe=await fetch("/api/generarUnidadPlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ve}`},body:JSON.stringify({prompt:ge,unidadFormData:d})});if(!Xe.ok){const Je=await Xe.text();throw console.error("Error response from backend:",Je),new Error(`Error al generar la unidad con IA: ${Xe.statusText}`)}const Ke=await Xe.json(),Qe={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:d.asignatura,nivel:d.nivel,nombreUnidad:d.nombreUnidad,contenidos:d.contenidos,cantidadClases:d.cantidadClases,observaciones:d.observaciones,ideasParaUnidad:d.ideasParaUnidad,objetivosAprendizaje:Ke.objetivosAprendizaje,indicadoresEvaluacion:Ke.indicadoresEvaluacion,detallesLeccion:Ke.detallesLeccion,documentosInstitucionales:k.filter(Je=>M.includes(Je.id)).map(Je=>({id:Je.id,title:Je.title}))};if(A)await s(A.id,Qe),m({...Qe,id:A.id});else{const Je=await a(Qe);m({...Qe,id:Je})}}catch(ge){console.error("Error al generar planificacin con IA",ge),y("Ocurri un error al contactar con la IA. Verifique la configuracin y reintente.")}finally{x(!1)}},X=async(me,ge)=>{x(!0),y(null);const Te=()=>`Eres un experto pedagogo chileno especialista en diseo de planes de clase alineados con el currculum nacional. A partir de la siguiente informacin de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ge.asignatura}
    - Nivel: ${ge.nivel}
    - Objetivo de la clase: ${me.objetivosAprendizaje}
    - Contenidos: ${me.contenidosConceptuales}
    - Actividades sugeridas: ${me.actividades}
    
    **Orientaciones didcticas**:
    - El plan debe seguir el modelo de diseo instruccional del Ministerio de Educacin de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologas que desarrollen habilidades del siglo XXI segn el currculum chileno.
    - Considerar momentos para activacin de conocimientos previos, desarrollo de aprendizajes y metacognicin/evaluacin.
    
    Responde SLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{QR("Planificacin - Utilizar Clase");const Ve=Te(),Xe=ua.currentUser,Ke=Xe?await Xe.getIdToken():null;if(!Ke)throw new Error("No se pudo obtener el token de autenticacin");const Qe=await fetch("/api/generarClasePlanificacion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ke}`},body:JSON.stringify({prompt:Ve,unitPlan:ge,lessonDetail:me,currentUser:e})});if(!Qe.ok){const We=await Qe.text();throw console.error("Error response from backend:",We),new Error(`Error al generar el plan de clase con IA: ${Qe.statusText}`)}const Je=await Qe.json(),mt={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:ge.asignatura,nivel:ge.nivel,contenidos:me.contenidosConceptuales,observaciones:"",nombreClase:me.actividades,duracionClase:80,momentosClase:Je,detalleLeccionOrigen:me};await a(mt),alert('Plan de clase generado y guardado en la pestaa "Clase"!'),C("clase")}catch(Ve){console.error("Error al generar plan de clase con IA",Ve),y("No se pudo generar el plan de clase. Intntelo de nuevo.")}finally{x(!1)}},Ee=async me=>{if(I)try{const{planId:ge,lessonIndex:Te}=I,Ve=n.find(Qe=>Qe.id===ge&&Qe.tipo==="Unidad");if(!Ve)return;const Xe=[...Ve.detallesLeccion];Xe[Te]=me;const Ke={...Ve,detallesLeccion:Xe};await s(ge,Ke),m(Ke),T(null)}catch(ge){console.error("Error al actualizar leccin:",ge),alert("Error al actualizar la leccin. Por favor, intente nuevamente.")}},Be="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",je=async()=>{try{console.log(" Recargando planificaciones manualmente...");const{getPlanificacionesByUser:me}=await gi(async()=>{const{getPlanificacionesByUser:Te}=await Promise.resolve().then(()=>UR);return{getPlanificacionesByUser:Te}},void 0);if(!t){console.warn(" No hay userId para recargar planificaciones");return}const ge=await me(t);console.log(` Obtenidas ${ge.length} planificaciones frescas`),alert(`Se han encontrado ${ge.length} planificaciones en la base de datos. Recargue la pgina para ver los cambios.`),window.location.reload()}catch(me){console.error(" Error recargando planificaciones:",me),alert("Hubo un error al recargar las planificaciones. Intente recargar la pgina manualmente.")}},[fe,ye]=w.useState({visible:!1,ejecutando:!1,resultado:null}),Ae=async()=>{ye(ge=>({...ge,ejecutando:!0,resultado:null}));const me=await c();ye(ge=>({...ge,ejecutando:!1,resultado:me}))},se=()=>{var me;return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Complete los campos y use la IA para crear una planificacin de unidad estructurada."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>ye(ge=>({...ge,visible:!ge.visible})),className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-md text-sm",children:"Diagnstico"}),i.jsxs("button",{onClick:je,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-1",children:[i.jsx(OS,{className:"w-4 h-4"}),i.jsx("span",{children:"Recargar"})]})]})]}),fe.visible&&i.jsxs("div",{className:"mb-6 p-4 border border-slate-300 dark:border-slate-600 rounded-lg",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"Herramienta de Diagnstico"}),i.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Esta herramienta intentar resolver problemas con las planificaciones que no aparecen en el historial."}),fe.resultado&&i.jsx("div",{className:`p-3 mb-3 rounded-md ${fe.resultado.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":fe.resultado.status==="repaired"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:fe.resultado.message}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:Ae,disabled:fe.ejecutando,className:"bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:fe.ejecutando?i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx("span",{children:"Ejecutar diagnstico"})}),((me=fe.resultado)==null?void 0:me.status)==="repaired"&&i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:"Recargar pgina"})]})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("form",{onSubmit:ve,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:d.asignatura,onChange:re,className:Be,required:!0,disabled:g,children:ce.map(ge=>i.jsx("option",{value:ge,children:ge},ge))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsx("select",{name:"nivel",value:d.nivel,onChange:re,className:Be,required:!0,disabled:g,children:oe.map(ge=>i.jsx("option",{value:ge,children:ge},ge))})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[i.jsx("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre de la Unidad"}),i.jsx("input",{type:"text",name:"nombreUnidad",value:d.nombreUnidad,onChange:re,className:Be,placeholder:"Ej: Introduccin a la Programacin",required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos Clave"}),i.jsx("textarea",{name:"contenidos",value:d.contenidos,onChange:re,rows:3,placeholder:"Describe los temas, conceptos y habilidades principales que se deben abordar en la unidad. S lo ms especfico posible.",className:Be,required:!0,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),i.jsx("textarea",{name:"ideasParaUnidad",value:d.ideasParaUnidad,onChange:re,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificacin (ej: enfocar en trabajo colaborativo, usar casos prcticos, conectar con la actualidad).",className:Be,disabled:g})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),i.jsx("input",{type:"number",name:"cantidadClases",value:d.cantidadClases,onChange:re,className:Be,min:"1",max:"20",disabled:g})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (nfasis)"}),i.jsx("textarea",{name:"observaciones",value:d.observaciones,onChange:re,rows:1,placeholder:"Ej: clase prctica, modelo ABP, juego, reforzamiento...",className:Be,disabled:g})]})]}),i.jsx("div",{className:"pt-4 text-right",children:i.jsx("button",{type:"submit",disabled:g||l,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:g?i.jsx(OS,{className:"w-5 h-5 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(dx,{className:"w-5 h-5"}),i.jsx("span",{children:A?"Regenerar Plan":"Generar con IA"})]})})}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),A&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisin y Edicin"}),i.jsx(cst,{plan:A,onEditLesson:R,onUseLesson:X,onUpdatePlan:s,isLoading:g})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-4",children:[console.log(" RENDERIZANDO HISTORIAL - Cantidad de planificaciones:",n.length),console.log(" RENDERIZANDO HISTORIAL - Cantidad de unidades:",n.filter(ge=>ge.tipo==="Unidad").length),n.length>0?n.filter(ge=>ge.tipo==="Unidad").map(ge=>i.jsx("div",{className:`p-5 border rounded-xl transition-all ${(A==null?void 0:A.id)===ge.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ge.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ge.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ge.contenidos]}),i.jsx("div",{className:"mt-2 flex items-center gap-2",children:ge.reflexionUnidad&&ge.reflexionUnidad.fortalezas&&ge.reflexionUnidad.mejoras&&ge.reflexionUnidad.debilidades?i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"Reflexin completa"}):i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:"Reflexin pendiente"})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>O(ge),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(BG,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>K(ge.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(Qn,{className:"w-4 h-4"}),i.jsx("span",{children:"Eliminar"})]})]})]})},ge.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})]})]})]})},ne=()=>{const me=n.filter(ge=>ge.tipo==="Clase").sort((ge,Te)=>new Date(Te.fechaCreacion).getTime()-new Date(ge.fechaCreacion).getTime());return _?i.jsx(ust,{plan:_,onBack:()=>j(null),onDelete:J,onSave:async ge=>{try{await s(ge.id,ge),j(ge)}catch(Te){console.error("Error al actualizar plan de clase:",Te),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:g}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(t_e,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"space-y-4",children:me.length>0?me.map(ge=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ge.nombreClase}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ge.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ge.contenidos]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>j(ge),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ge.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaa 'Unidad'."})})]})},de=()=>{if(!((e==null?void 0:e.profile)==="SUBDIRECCION"))return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Esta seccin est disponible solo para Subdireccin."})});const ge=Qe=>{var mt;const Je=((mt=Qe.target.files)==null?void 0:mt[0])||null;Z(Je)},Te=async Qe=>{if(Qe.preventDefault(),!(!W||!S.trim())){Y(!0);try{const Je=H.split(",").map(Tt=>Tt.trim()).filter(Boolean);Je.includes("planificacion")||Je.push("planificacion");const mt=await aAe(S.trim(),U.trim(),Je),{storagePath:We,contentType:He}=await sAe(mt,W);await G_(mt,We,S.trim(),U.trim(),Je,He),L(""),q(""),z("planificacion"),Z(null),alert("Documento subido e indexado correctamente.")}catch(Je){console.error("Error subiendo documento de planificacin:",Je),alert("No se pudo subir/indexar el documento.")}finally{Y(!1)}}},Ve=async Qe=>{try{if(!Qe.storagePath)return alert("El documento no tiene archivo asociado.");await G_(Qe.id,Qe.storagePath,Qe.title,Qe.description||"",Qe.tags||["planificacion"],Qe.contentType),alert("Reindexacin encolada.")}catch(Je){console.error("Error reindexando:",Je),alert("Error reindexando el documento.")}},Xe=async Qe=>{try{if(!Qe.storagePath)return alert("No hay archivo asociado.");const Je=await MA(Iu(yA,Qe.storagePath));window.open(Je,"_blank")}catch(Je){console.error("Error obteniendo URL:",Je),alert("No se pudo abrir el documento.")}},Ke=async Qe=>{if(confirm(`Eliminar "${Qe.title}"? Esta accin no se puede deshacer.`))try{await HR(Qe.id)}catch(Je){console.error("Error eliminando documento:",Je),alert("No se pudo eliminar el documento.")}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Repositorio institucional para Planificacin"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:["Suba documentos (PDF/TXT/DOCX) que el profesorado podr seleccionar al planificar. Se etiquetarn con ",i.jsx("strong",{children:"planificacion"}),"."]}),i.jsxs("form",{onSubmit:Te,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ttulo"}),i.jsx("input",{value:S,onChange:Qe=>L(Qe.target.value),className:Be,placeholder:"Ej: PEI 2025",required:!0})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tags (coma)"}),i.jsx("input",{value:H,onChange:Qe=>z(Qe.target.value),className:Be})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{value:U,onChange:Qe=>q(Qe.target.value),rows:2,className:Be,placeholder:"Breve descripcin"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Archivo"}),i.jsx("input",{type:"file",accept:".pdf,.txt,.docx,application/pdf,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:ge,className:"block w-full"})]}),i.jsx("div",{className:"md:col-span-2 flex justify-end",children:i.jsxs("button",{disabled:V||!W||!S.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg disabled:opacity-50 flex items-center gap-2",children:[V?i.jsx(OS,{className:"w-4 h-4 animate-spin"}):i.jsx(xi,{className:"w-4 h-4"}),i.jsx("span",{children:"Subir e indexar"})]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Documentos disponibles"}),k.length===0?i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'An no hay documentos institucionales con la etiqueta "planificacion".'}):i.jsx("div",{className:"space-y-3",children:k.map(Qe=>i.jsxs("div",{className:"p-4 rounded-lg border dark:border-slate-700 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:Qe.title}),Qe.description&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:Qe.description}),Array.isArray(Qe.tags)&&Qe.tags.length>0&&i.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:Qe.tags.map(Je=>i.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:Je},Je))})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>Xe(Qe),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Abrir"}),i.jsx("button",{onClick:()=>Ve(Qe),className:"text-amber-600 hover:text-amber-800 dark:text-amber-400 dark:hover:text-amber-300 text-sm",children:"Reindexar"}),i.jsx("button",{onClick:()=>Ke(Qe),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm",children:"Eliminar"})]})]},Qe.id))})]})]})};return w.useEffect(()=>{if((async()=>{try{if(console.log(" Diagnstico de planificaciones - Inicio"),console.log(`userId: ${t}`),!t){console.warn(" Sin userId, no se pueden obtener planificaciones");return}const{collection:ge,query:Te,where:Ve,getDocs:Xe}=await gi(async()=>{const{collection:mt,query:We,where:He,getDocs:Tt}=await Promise.resolve().then(()=>O1);return{collection:mt,query:We,where:He,getDocs:Tt}},void 0),{db:Ke}=await gi(async()=>{const{db:mt}=await Promise.resolve().then(()=>YM);return{db:mt}},void 0),Qe=Te(ge(Ke,"planificaciones"),Ve("userId","==",t)),Je=await Xe(Qe);if(console.log(` Documentos en Firestore: ${Je.docs.length}`),Je.docs.length>0){console.log(" Primer documento:",Je.docs[0].data());const mt=Je.docs.filter(He=>He.data().tipo==="Unidad");console.log(` Documentos de tipo Unidad: ${mt.length}`);const We=mt.filter(He=>Array.isArray(He.data().detallesLeccion)&&He.data().detallesLeccion!==void 0);if(console.log(` Unidades con detallesLeccion vlidos: ${We.length}`),mt.length>We.length){console.log(` Intentando corregir ${mt.length-We.length} unidades invlidas...`);for(const He of mt){const Tt=He.data();if(!Array.isArray(Tt.detallesLeccion)||Tt.detallesLeccion===void 0)try{console.log(` Corrigiendo documento ${He.id}...`);const{doc:Ie,updateDoc:ft}=await gi(async()=>{const{doc:vt,updateDoc:et}=await Promise.resolve().then(()=>O1);return{doc:vt,updateDoc:et}},void 0);await ft(Ie(Ke,"planificaciones",He.id),{detallesLeccion:[]}),console.log(` Documento ${He.id} corregido con xito`)}catch(Ie){console.error(` Error al corregir documento ${He.id}:`,Ie)}}}}console.log(" Diagnstico de planificaciones - Finalizado")}catch(ge){console.error(" Error en diagnstico de planificaciones:",ge)}})(),!l){console.log(` Verificando ${n.length} planificaciones recibidas...`),console.log(" Tipos de planificaciones:",n.map(Te=>Te.tipo));const ge=n.filter(Te=>Te.tipo==="Unidad"&&(!Array.isArray(Te.detallesLeccion)||Te.detallesLeccion===void 0));ge.length>0&&(console.warn(` Encontradas ${ge.length} unidades con formato invlido`),ge.forEach(async Te=>{try{await s(Te.id,{...Te,detallesLeccion:[]}),console.log(` Reparada planificacin ${Te.id}`)}catch(Ve){console.error(` Error al reparar planificacin ${Te.id}:`,Ve)}}))}},[t,n,l,s]),e?r?i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx(goe,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificacin Docente"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:i.jsxs("nav",{className:"flex gap-2 overflow-x-auto","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>C("unidad"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(ys,{className:"w-4 h-4"}),i.jsx("span",{children:"Unidad"})]}),i.jsxs("button",{onClick:()=>C("clase"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(H3e,{className:"w-4 h-4"}),i.jsx("span",{children:"Clase"})]}),i.jsxs("button",{onClick:()=>C("calendario"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(Yo,{className:"w-4 h-4"}),i.jsx("span",{children:"Actividades Calendario"})]}),i.jsxs("button",{onClick:()=>C("materiales"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(SF,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Materiales"})]}),(e==null?void 0:e.profile)==="SUBDIRECCION"&&i.jsxs("button",{onClick:()=>C("config"),className:`shrink-0 flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${N==="config"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(BG,{className:"w-4 h-4"}),i.jsx("span",{children:"Configuracin"})]})]})}),N==="unidad"&&i.jsxs("div",{className:"space-y-6",children:[(e==null?void 0:e.profile)==="SUBDIRECCION"&&i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-amber-800 dark:text-amber-200",children:["Puede cargar o gestionar documentos institucionales desde la pestaa ",i.jsx("strong",{children:"Configuracin"}),"."]}),i.jsx("button",{onClick:()=>C("config"),className:"text-sm px-3 py-1.5 rounded-lg bg-amber-600 hover:bg-amber-700 text-white",children:"Ir a Configuracin"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Documentacin institucional (opcional)"}),k.length===0?i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Subdireccin an no ha cargado documentos. Cuando existan, podrs seleccionarlos aqu para considerar en la generacin."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:k.map(me=>i.jsxs("label",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/30 cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"mt-1",checked:M.includes(me.id),onChange:()=>ue(me.id)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100",children:me.title}),me.description&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:me.description})]})]},me.id))})]}),se()]}),N==="clase"&&ne(),N==="calendario"&&i.jsx(dst,{userId:t}),N==="materiales"&&i.jsx(nst,{userId:t,planificaciones:n}),N==="config"&&de(),I&&i.jsx(lst,{lesson:I.lessonData,onClose:()=>T(null),onSave:Ee,isLoading:g})]}):i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-8 max-w-2xl mx-auto my-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4",children:"Error de identificacin de usuario"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-md p-4 mb-4 overflow-auto max-h-40",children:i.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})}),i.jsx("p",{className:"text-amber-700 dark:text-amber-400 mb-4",children:"No se pudo determinar su identificador de usuario para cargar las planificaciones. Este problema puede deberse a:"}),i.jsxs("ul",{className:"list-disc pl-5 text-amber-700 dark:text-amber-400 mb-6 space-y-2",children:[i.jsx("li",{children:"La sesin no se ha inicializado correctamente"}),i.jsx("li",{children:"Su cuenta no tiene asignado un ID vlido"}),i.jsx("li",{children:"Hay un problema en la sincronizacin con la base de datos"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-6 rounded-md transition-colors",children:"Recargar aplicacin"})})]}):i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No se recibieron datos de usuario"})]})})},jT="events",fst=async()=>{try{const e=Lt(pt(xr,jT),tr("date","asc"));return(await Rr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},hst=async e=>{try{return{id:(await dn(pt(xr,jT),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},Ast=async(e,t)=>{try{const r=er(xr,jT,e);await Zi(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},mst=async e=>{try{const t=er(xr,jT,e);await fa(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},pst=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],$J={[vn.EVALUACION]:i.jsx(ys,{className:"h-4 w-4"}),[vn.ACTO]:i.jsx(voe,{className:"h-4 w-4"}),[vn.ACTIVIDAD_FOCALIZADA]:i.jsx(R1,{className:"h-4 w-4"}),[vn.SALIDA_PEDAGOGICA]:i.jsx(x3e,{className:"h-4 w-4"})},gst=e=>{switch(e.type){case vn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case vn.ACTO:return`Acto: ${e.ubicacion}`;case vn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case vn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},xst=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:o})=>{const[l,c]=w.useState({});w.useEffect(()=>{c(a||{type:vn.EVALUACION,subtype:Vg.PRUEBA_PARCIAL,asignatura:xa[0],curso:Sa[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(N=>({...N,[v]:y}))},f=x=>{c(v=>{if(v.type===vn.SALIDA_PEDAGOGICA){const y=v.cursos||[],N=y.includes(x)?y.filter(C=>C!==x):[...y,x];return{...v,cursos:N.sort()}}return v})},A=x=>{var y;x.preventDefault();let v;switch(l.type){case vn.EVALUACION:{const N={date:s,type:vn.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===Vg.RUBRICA||l.subtype===Vg.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(N.enlace=l.enlace.trim()),v=N;break}case vn.ACTO:v={date:s,type:vn.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case vn.ACTIVIDAD_FOCALIZADA:v={date:s,type:vn.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case vn.SALIDA_PEDAGOGICA:v={date:s,type:vn.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case vn.EVALUACION:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),i.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:d,required:!0,className:u,children:bTe.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:d,required:!0,className:u,children:xa.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:d,required:!0,className:u,children:Sa.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),i.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(l.subtype===Vg.RUBRICA||l.subtype===Vg.PAUTA_COTEJO)&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),i.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case vn.ACTO:case vn.ACTIVIDAD_FOCALIZADA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),i.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin"}),i.jsxs("div",{className:"relative",children:[i.jsx(HN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),i.jsxs("div",{className:"relative",children:[i.jsx(Dc,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case vn.SALIDA_PEDAGOGICA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),i.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin/Destino"}),i.jsxs("div",{className:"relative",children:[i.jsx(HN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("fieldset",{children:[i.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),i.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Sa.map(x=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),i.jsx("span",{children:x})]},x))})]})]});default:return null}};return i.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:i.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:i.jsxs("form",{onSubmit:A,children:[i.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),i.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:i.jsx(No,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),i.jsx("select",{id:"type",name:"type",value:l.type,onChange:d,className:u,children:Object.values(vn).map(x=>i.jsx("option",{value:x,children:x},x))})]}),g()]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[i.jsx("div",{children:a&&n&&i.jsxs("button",{type:"button",onClick:n,disabled:o,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[i.jsx(Qn,{className:"h-4 w-4"}),o?"Eliminando...":"Eliminar"]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{type:"button",onClick:t,disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[i.jsx(No,{className:"h-4 w-4"}),"Cancelar"]}),i.jsxs("button",{type:"submit",disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[i.jsx(Ml,{className:"h-4 w-4"}),o?"Guardando...":"Guardar"]})]})]})]})})})},vst=({profile:e})=>{const[t,r]=w.useState(new Date),[n,a]=w.useState([]),[s,o]=w.useState(!1),[l,c]=w.useState(null),[u,d]=w.useState(!1),[f,A]=w.useState(Object.values(vn)),[m,g]=w.useState(!1),[x,v]=w.useState(null),[y,N]=w.useState(null),C=w.useCallback(async()=>{o(!0);try{const P=await fst();a(P),c(null)}catch(P){console.error("Error al cargar eventos desde Firestore",P),c("No se pudieron cargar los eventos desde la nube.")}finally{o(!1)}},[]);w.useEffect(()=>{C()},[C]);const _=w.useMemo(()=>{const P=t.getFullYear(),S=t.getMonth(),L=new Date(P,S,1).getDay(),U=new Date(P,S+1,0).getDate(),q=[];let H=1;for(let z=0;z<6;z++){const W=[];for(let Z=0;Z<7;Z++)z===0&&Z<L||H>U?W.push(null):(W.push(new Date(P,S,H)),H++);if(q.push(W),H>U)break}return q},[t]),j=P=>{A(S=>S.includes(P)?S.filter(L=>L!==P):[...S,P])},I=()=>{f.length===Object.values(vn).length?A([]):A(Object.values(vn))},T=P=>{e!==Ot.ESTUDIANTE&&(v(P.toISOString().split("T")[0]),N(null),g(!0))},k=(P,S)=>{S.stopPropagation(),e!==Ot.ESTUDIANTE&&(v(P.date),N(P),g(!0))},B=async P=>{d(!0);try{y?await Ast(y.id,P):await hst(P),await C(),g(!1)}catch(S){console.error("Error al guardar evento:",S);const L=S instanceof Error?S.message:"Error desconocido";c(`Error al guardar el evento: ${L}`)}finally{d(!1)}},M=async()=>{if(y){d(!0);try{await mst(y.id),await C(),g(!1)}catch(P){console.error("Error al eliminar evento:",P);const S=P instanceof Error?P.message:"Error desconocido";c(`No se pudo eliminar el evento: ${S}`)}finally{d(!1)}}};return i.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),i.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Acadmico"}),i.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&i.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando"})})]}),l&&i.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!s&&n.length===0&&i.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[i.jsx(_4e,{className:"h-5 w-5 mt-0.5"}),i.jsx("p",{children:"No hay eventos registrados en la nube."})]}),i.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[i.jsx(JC,{className:"h-4 w-4"}),i.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.jsx("button",{onClick:I,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(vn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(vn).map(P=>i.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(P)?`shadow-sm ${o1[P].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[i.jsx("input",{type:"checkbox",checked:f.includes(P),onChange:()=>j(P),className:"hidden"}),i.jsx("span",{className:"shrink-0",children:$J[P]}),i.jsx("span",{children:o1[P].label})]},P))]})]}),i.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[i.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(UN,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(XC,{className:"h-5 w-5"})})]}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),i.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),i.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:pst.map(P=>i.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:P},P))}),i.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:_.flat().map((P,S)=>{const L=P&&P.toDateString()===new Date().toDateString(),U=P==null?void 0:P.toISOString().split("T")[0],q=U?n.filter(H=>H.date===U&&f.includes(H.type)):[];return i.jsx("div",{onClick:()=>P&&T(P),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${P?e!==Ot.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:P&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`self-end text-sm font-semibold ${L?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:P.getDate()}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:q.map(H=>i.jsxs("div",{onClick:z=>k(H,z),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${o1[H.type].color}`,children:[i.jsx("span",{className:"shrink-0",children:$J[H.type]}),i.jsx("span",{className:"truncate",children:gst(H)})]},H.id))}),e!==Ot.ESTUDIANTE&&i.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:i.jsx(xi,{className:"h-4 w-4"})})]})},S)})})]}),m&&i.jsx(xst,{isOpen:m,onClose:()=>g(!1),onSave:B,onDelete:M,event:y,date:x,isLoading:u})]})},V9="evaluaciones_pruebas",$9="rubricas_estaticas",z9="rubricas_interactivas",bst="usuarios",kT=e=>{var a,s,o;const t=e.data()||{},r=t.fechaCreacion,n=((o=(s=(a=r==null?void 0:r.toDate)==null?void 0:a.call(r))==null?void 0:s.toISOString)==null?void 0:o.call(s))??(typeof r=="string"?r:void 0);return{id:e.id,...t,fechaCreacion:n}},yst=e=>{const t=Lt(pt(dt,V9),tr("fechaCreacion","desc"));return hr(t,n=>e(n.docs.map(a=>kT(a))),n=>{console.error("[subscribeToPruebas]",n),e([])})},wst=async e=>{const{id:t,fechaCreacion:r,...n}=e,a=er(dt,V9,t),s={...n,fechaCreacion:r?wr.fromDate(new Date(r)):Xn()};await yi(a,s,{merge:!0})},Nst=async e=>{await fa(er(dt,V9,e))},Cst=e=>{const t=Lt(pt(dt,$9),tr("fechaCreacion","desc"));return hr(t,r=>e(r.docs.map(n=>kT(n))),r=>{console.error("[subscribeToRubricasEstaticas]",r),e([])})},VR=async e=>{const{id:t,fechaCreacion:r,...n}=e,a=er(dt,$9,t),s={...n,fechaCreacion:r?wr.fromDate(new Date(r)):Xn()};await yi(a,s,{merge:!0})},Est=async e=>{await fa(er(dt,$9,e))},jst=e=>{const t=Lt(pt(dt,z9),tr("curso","asc"));return hr(t,r=>e(r.docs.map(n=>kT(n))),r=>{console.error("[subscribeToRubricasInteractivas]",r),e([])})},kst=async e=>{const t={...e,fechaCreacion:Xn()};return(await dn(pt(dt,z9),t)).id},Sst=async(e,t)=>{const r=er(dt,z9,e);await yi(r,t,{merge:!0})},_st=e=>{const t=Lt(pt(dt,bst),tr("nombreCompleto","asc"));return hr(t,r=>e(r.docs.map(n=>kT(n))),r=>{console.error("[subscribeToAllUsers]",r),e([])})},jE=()=>{const[e,t]=w.useState(null),[r,n]=w.useState(!0);return w.useEffect(()=>{const a=Fae($N,async s=>{if(console.log("[useAuth] FirebaseUser:",s),s&&s.email)try{const o=await uoe(s.email);console.log("[useAuth] Perfil Firestore:",o),t(o?{...o,uid:s.uid}:null)}catch(o){console.error("Error al obtener el perfil del usuario:",o),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}};function Ia(e){"@babel/helpers - typeof";return Ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ia(e)}var Il=Uint8Array,ku=Uint16Array,G9=Int32Array,ST=new Il([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_T=new Il([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$R=new Il([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iAe=function(e,t){for(var r=new ku(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new G9(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},oAe=iAe(ST,2),lAe=oAe.b,zR=oAe.r;lAe[28]=258,zR[258]=28;var cAe=iAe(_T,0),Tst=cAe.b,zJ=cAe.r,GR=new ku(32768);for(var as=0;as<32768;++as){var Im=(as&43690)>>1|(as&21845)<<1;Im=(Im&52428)>>2|(Im&13107)<<2,Im=(Im&61680)>>4|(Im&3855)<<4,GR[as]=((Im&65280)>>8|(Im&255)<<8)>>1}var Kh=function(e,t,r){for(var n=e.length,a=0,s=new ku(t);a<n;++a)e[a]&&++s[e[a]-1];var o=new ku(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new ku(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=o[e[a]-1]++<<d,A=f|(1<<d)-1;f<=A;++f)l[GR[f]>>c]=u}else for(l=new ku(n),a=0;a<n;++a)e[a]&&(l[a]=GR[o[e[a]-1]++]>>15-e[a]);return l},Fp=new Il(288);for(var as=0;as<144;++as)Fp[as]=8;for(var as=144;as<256;++as)Fp[as]=9;for(var as=256;as<280;++as)Fp[as]=7;for(var as=280;as<288;++as)Fp[as]=8;var vC=new Il(32);for(var as=0;as<32;++as)vC[as]=5;var Bst=Kh(Fp,9,0),Ist=Kh(Fp,9,1),Dst=Kh(vC,5,0),Ost=Kh(vC,5,1),fO=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},cf=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},hO=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},q9=function(e){return(e+7)/8|0},uAe=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Il(e.subarray(t,r))},Pst=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],hf=function(e,t,r){var n=new Error(t||Pst[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,hf),!r)throw n;return n},Fst=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Il(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Il(a*3));var u=function(ve){var X=r.length;if(ve>X){var Ee=new Il(Math.max(X*2,ve));Ee.set(r),r=Ee}},d=t.f||0,f=t.p||0,A=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=a*8;do{if(!m){d=cf(e,f,1);var N=cf(e,f+1,3);if(f+=3,N)if(N==1)m=Ist,g=Ost,x=9,v=5;else if(N==2){var I=cf(e,f,31)+257,T=cf(e,f+10,15)+4,k=I+cf(e,f+5,31)+1;f+=14;for(var B=new Il(k),M=new Il(19),P=0;P<T;++P)M[$R[P]]=cf(e,f+P*3,7);f+=T*3;for(var S=fO(M),L=(1<<S)-1,U=Kh(M,S,1),P=0;P<k;){var q=U[cf(e,f,L)];f+=q&15;var C=q>>4;if(C<16)B[P++]=C;else{var H=0,z=0;for(C==16?(z=3+cf(e,f,3),f+=2,H=B[P-1]):C==17?(z=3+cf(e,f,7),f+=3):C==18&&(z=11+cf(e,f,127),f+=7);z--;)B[P++]=H}}var W=B.subarray(0,I),Z=B.subarray(I);x=fO(W),v=fO(Z),m=Kh(W,x,1),g=Kh(Z,v,1)}else hf(1);else{var C=q9(f)+4,_=e[C-4]|e[C-3]<<8,j=C+_;if(j>a){c&&hf(0);break}l&&u(A+_),r.set(e.subarray(C,j),A),t.b=A+=_,t.p=f=j*8,t.f=d;continue}if(f>y){c&&hf(0);break}}l&&u(A+131072);for(var V=(1<<x)-1,Y=(1<<v)-1,R=f;;R=f){var H=m[hO(e,f)&V],O=H>>4;if(f+=H&15,f>y){c&&hf(0);break}if(H||hf(2),O<256)r[A++]=O;else if(O==256){R=f,m=null;break}else{var K=O-254;if(O>264){var P=O-257,J=ST[P];K=cf(e,f,(1<<J)-1)+lAe[P],f+=J}var ce=g[hO(e,f)&Y],oe=ce>>4;ce||hf(3),f+=ce&15;var Z=Tst[oe];if(oe>3){var J=_T[oe];Z+=hO(e,f)&(1<<J)-1,f+=J}if(f>y){c&&hf(0);break}l&&u(A+131072);var re=A+K;if(A<Z){var ue=s-Z,le=Math.min(Z,re);for(ue+A<0&&hf(3);A<le;++A)r[A]=n[ue+A]}for(;A<re;++A)r[A]=r[A-Z]}}t.l=m,t.p=R,t.b=A,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return A!=r.length&&o?uAe(r,0,A):r.subarray(0,A)},R0=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},qw=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},AO=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:fAe,l:0};if(a==1){var o=new Il(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var A=s[0].s,n=1;n<a;++n)s[n].s>A&&(A=s[n].s);var m=new ku(A+1),g=qR(r[d-1],m,0);if(g>t){var n=0,x=0,v=g-t,y=1<<v;for(s.sort(function(I,T){return m[T.s]-m[I.s]||I.f-T.f});n<a;++n){var N=s[n].s;if(m[N]>t)x+=y-(1<<g-m[N]),m[N]=t;else break}for(x>>=v;x>0;){var C=s[n].s;m[C]<t?x-=1<<t-m[C]++-1:++n}for(;n>=0&&x;--n){var _=s[n].s;m[_]==t&&(--m[_],++x)}g=t}return{t:new Il(m),l:g}},qR=function(e,t,r){return e.s==-1?Math.max(qR(e.l,t,r+1),qR(e.r,t,r+1)):t[e.s]=r},GJ=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ku(++t),n=0,a=e[0],s=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Kw=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},dAe=function(e,t,r){var n=r.length,a=q9(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},qJ=function(e,t,r,n,a,s,o,l,c,u,d){R0(t,d++,r),++a[256];for(var f=AO(a,15),A=f.t,m=f.l,g=AO(s,15),x=g.t,v=g.l,y=GJ(A),N=y.c,C=y.n,_=GJ(x),j=_.c,I=_.n,T=new ku(19),k=0;k<N.length;++k)++T[N[k]&31];for(var k=0;k<j.length;++k)++T[j[k]&31];for(var B=AO(T,7),M=B.t,P=B.l,S=19;S>4&&!M[$R[S-1]];--S);var L=u+5<<3,U=Kw(a,Fp)+Kw(s,vC)+o,q=Kw(a,A)+Kw(s,x)+o+14+3*S+Kw(T,M)+2*T[16]+3*T[17]+7*T[18];if(c>=0&&L<=U&&L<=q)return dAe(t,d,e.subarray(c,c+u));var H,z,W,Z;if(R0(t,d,1+(q<U)),d+=2,q<U){H=Kh(A,m,0),z=A,W=Kh(x,v,0),Z=x;var V=Kh(M,P,0);R0(t,d,C-257),R0(t,d+5,I-1),R0(t,d+10,S-4),d+=14;for(var k=0;k<S;++k)R0(t,d+3*k,M[$R[k]]);d+=3*S;for(var Y=[N,j],R=0;R<2;++R)for(var O=Y[R],k=0;k<O.length;++k){var K=O[k]&31;R0(t,d,V[K]),d+=M[K],K>15&&(R0(t,d,O[k]>>5&127),d+=O[k]>>12)}}else H=Bst,z=Fp,W=Dst,Z=vC;for(var k=0;k<l;++k){var J=n[k];if(J>255){var K=J>>18&31;qw(t,d,H[K+257]),d+=z[K+257],K>7&&(R0(t,d,J>>23&31),d+=ST[K]);var ce=J&31;qw(t,d,W[ce]),d+=Z[ce],ce>3&&(qw(t,d,J>>5&8191),d+=_T[ce])}else qw(t,d,H[J]),d+=z[J]}return qw(t,d,H[256]),d+z[256]},Rst=new G9([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),fAe=new Il(0),Lst=function(e,t,r,n,a,s){var o=s.z||e.length,l=new Il(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=Rst[t-1],A=f>>13,m=f&8191,g=(1<<r)-1,x=s.p||new ku(32768),v=s.h||new ku(g+1),y=Math.ceil(r/3),N=2*y,C=function(Be){return(e[Be]^e[Be+1]<<y^e[Be+2]<<N)&g},_=new G9(25e3),j=new ku(288),I=new ku(32),T=0,k=0,B=s.i||0,M=0,P=s.w||0,S=0;B+2<o;++B){var L=C(B),U=B&32767,q=v[L];if(x[U]=q,v[L]=U,P<=B){var H=o-B;if((T>7e3||M>24576)&&(H>423||!u)){d=qJ(e,c,0,_,j,I,k,M,S,B-S,d),M=T=k=0,S=B;for(var z=0;z<286;++z)j[z]=0;for(var z=0;z<30;++z)I[z]=0}var W=2,Z=0,V=m,Y=U-q&32767;if(H>2&&L==C(B-Y))for(var R=Math.min(A,H)-1,O=Math.min(32767,B),K=Math.min(258,H);Y<=O&&--V&&U!=q;){if(e[B+W]==e[B+W-Y]){for(var J=0;J<K&&e[B+J]==e[B+J-Y];++J);if(J>W){if(W=J,Z=Y,J>R)break;for(var ce=Math.min(Y,J-2),oe=0,z=0;z<ce;++z){var re=B-Y+z&32767,ue=x[re],le=re-ue&32767;le>oe&&(oe=le,q=re)}}}U=q,q=x[U],Y+=U-q&32767}if(Z){_[M++]=268435456|zR[W]<<18|zJ[Z];var ve=zR[W]&31,X=zJ[Z]&31;k+=ST[ve]+_T[X],++j[257+ve],++I[X],P=B+W,++T}else _[M++]=e[B],++j[e[B]]}}for(B=Math.max(B,P);B<o;++B)_[M++]=e[B],++j[e[B]];d=qJ(e,c,u,_,j,I,k,M,S,B-S,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=x,s.i=B,s.w=P)}else{for(var B=s.w||0;B<o+u;B+=65535){var Ee=B+65535;Ee>=o&&(c[d/8|0]=u,Ee=o),d=dAe(c,d+1,e.subarray(B,Ee))}s.i=o}return uAe(l,0,n+q9(d)+a)},hAe=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Mst=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new Il(s.length+e.length);o.set(s),o.set(e,s.length),e=o,a.w=s.length}return Lst(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},AAe=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Ust=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=hAe();a.p(t.dictionary),AAe(e,2,a.d())}},Hst=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&hf(6,"invalid zlib data"),(e[1]>>5&1)==1&&hf(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function KR(e,t){t||(t={});var r=hAe();r.p(e);var n=Mst(e,t,t.dictionary?6:2,4);return Ust(n,t),AAe(n,n.length-4,r.d()),n}function Qst(e,t){return Fst(e.subarray(Hst(e),-4),{i:2},t,t)}var Vst=typeof TextDecoder<"u"&&new TextDecoder,$st=0;try{Vst.decode(fAe,{stream:!0}),$st=1}catch{}var Xr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function mO(){Xr.console&&typeof Xr.console.log=="function"&&Xr.console.log.apply(Xr.console,arguments)}var Va={log:mO,warn:function(e){Xr.console&&(typeof Xr.console.warn=="function"?Xr.console.warn.apply(Xr.console,arguments):mO.call(null,arguments))},error:function(e){Xr.console&&(typeof Xr.console.error=="function"?Xr.console.error.apply(Xr.console,arguments):mO(e))}};function pO(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Lg(n.response,t,r)},n.onerror=function(){Va.error("could not download file")},n.send()}function KJ(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Tk(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var dN,WR,Lg=Xr.saveAs||((typeof window>"u"?"undefined":Ia(window))!=="object"||window!==Xr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Xr.URL||Xr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?KJ(a.href)?pO(e,t,r):Tk(a,a.target="_blank"):Tk(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Tk(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(KJ(e))pO(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Tk(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Ia(s)!=="object"&&(Va.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return pO(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Xr.HTMLElement)||Xr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":Ia(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Xr.URL||Xr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function mAe(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function gO(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=hl(r,n,a,s,t[0],7,-680876936),s=hl(s,r,n,a,t[1],12,-389564586),a=hl(a,s,r,n,t[2],17,606105819),n=hl(n,a,s,r,t[3],22,-1044525330),r=hl(r,n,a,s,t[4],7,-176418897),s=hl(s,r,n,a,t[5],12,1200080426),a=hl(a,s,r,n,t[6],17,-1473231341),n=hl(n,a,s,r,t[7],22,-45705983),r=hl(r,n,a,s,t[8],7,1770035416),s=hl(s,r,n,a,t[9],12,-1958414417),a=hl(a,s,r,n,t[10],17,-42063),n=hl(n,a,s,r,t[11],22,-1990404162),r=hl(r,n,a,s,t[12],7,1804603682),s=hl(s,r,n,a,t[13],12,-40341101),a=hl(a,s,r,n,t[14],17,-1502002290),r=Al(r,n=hl(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Al(s,r,n,a,t[6],9,-1069501632),a=Al(a,s,r,n,t[11],14,643717713),n=Al(n,a,s,r,t[0],20,-373897302),r=Al(r,n,a,s,t[5],5,-701558691),s=Al(s,r,n,a,t[10],9,38016083),a=Al(a,s,r,n,t[15],14,-660478335),n=Al(n,a,s,r,t[4],20,-405537848),r=Al(r,n,a,s,t[9],5,568446438),s=Al(s,r,n,a,t[14],9,-1019803690),a=Al(a,s,r,n,t[3],14,-187363961),n=Al(n,a,s,r,t[8],20,1163531501),r=Al(r,n,a,s,t[13],5,-1444681467),s=Al(s,r,n,a,t[2],9,-51403784),a=Al(a,s,r,n,t[7],14,1735328473),r=ml(r,n=Al(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=ml(s,r,n,a,t[8],11,-2022574463),a=ml(a,s,r,n,t[11],16,1839030562),n=ml(n,a,s,r,t[14],23,-35309556),r=ml(r,n,a,s,t[1],4,-1530992060),s=ml(s,r,n,a,t[4],11,1272893353),a=ml(a,s,r,n,t[7],16,-155497632),n=ml(n,a,s,r,t[10],23,-1094730640),r=ml(r,n,a,s,t[13],4,681279174),s=ml(s,r,n,a,t[0],11,-358537222),a=ml(a,s,r,n,t[3],16,-722521979),n=ml(n,a,s,r,t[6],23,76029189),r=ml(r,n,a,s,t[9],4,-640364487),s=ml(s,r,n,a,t[12],11,-421815835),a=ml(a,s,r,n,t[15],16,530742520),r=pl(r,n=ml(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=pl(s,r,n,a,t[7],10,1126891415),a=pl(a,s,r,n,t[14],15,-1416354905),n=pl(n,a,s,r,t[5],21,-57434055),r=pl(r,n,a,s,t[12],6,1700485571),s=pl(s,r,n,a,t[3],10,-1894986606),a=pl(a,s,r,n,t[10],15,-1051523),n=pl(n,a,s,r,t[1],21,-2054922799),r=pl(r,n,a,s,t[8],6,1873313359),s=pl(s,r,n,a,t[15],10,-30611744),a=pl(a,s,r,n,t[6],15,-1560198380),n=pl(n,a,s,r,t[13],21,1309151649),r=pl(r,n,a,s,t[4],6,-145523070),s=pl(s,r,n,a,t[11],10,-1120210379),a=pl(a,s,r,n,t[2],15,718787259),n=pl(n,a,s,r,t[9],21,-343485551),e[0]=rp(r,e[0]),e[1]=rp(n,e[1]),e[2]=rp(a,e[2]),e[3]=rp(s,e[3])}function TT(e,t,r,n,a,s){return t=rp(rp(t,e),rp(n,s)),rp(t<<a|t>>>32-a,r)}function hl(e,t,r,n,a,s,o){return TT(t&r|~t&n,e,t,a,s,o)}function Al(e,t,r,n,a,s,o){return TT(t&n|r&~n,e,t,a,s,o)}function ml(e,t,r,n,a,s,o){return TT(t^r^n,e,t,a,s,o)}function pl(e,t,r,n,a,s,o){return TT(r^(t|~n),e,t,a,s,o)}function pAe(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)gO(n,zst(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(gO(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,gO(n,a),n}function zst(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}dN=Xr.atob.bind(Xr),WR=Xr.btoa.bind(Xr);var WJ="0123456789abcdef".split("");function Gst(e){for(var t="",r=0;r<4;r++)t+=WJ[e>>8*r+4&15]+WJ[e>>8*r&15];return t}function qst(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function XR(e){return pAe(e).map(qst).join("")}var Kst=function(e){for(var t=0;t<e.length;t++)e[t]=Gst(e[t]);return e.join("")}(pAe("hello"))!="5d41402abc4b2a76b9719d911017c592";function rp(e,t){if(Kst){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function YR(e,t){var r,n,a,s;if(e!==r){for(var o=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,A=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[A=(A+1)%256]))%256,l[A]=l[m],l[m]=d,o=l[(l[A]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var XJ={print:4,modify:8,copy:16,"annot-forms":32};function Sb(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(XJ.perm!==void 0)throw new Error("Invalid permission: "+l);a+=XJ[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=XR(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=YR(this.encryptionKey,this.padding)}function _b(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function YJ(e){if(Ia(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,n)}catch(l){Xr.console&&Va.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function q_(e){if(!(this instanceof q_))return new q_(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function gAe(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Gg(e,t,r,n,a){if(!(this instanceof Gg))return new Gg(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,gAe.call(this,n,a)}function Hb(e,t,r,n,a){if(!(this instanceof Hb))return new Hb(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,gAe.call(this,n,a)}function Tr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Ia(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,A={},m={internal:{},__private__:{}};m.__private__.PubSub=YJ;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(te){g=te};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(te){return v[te]};a=a||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},C=N.COMPAT;function _(){this.saveGraphicsState(),fe(new ar(We,0,0,-We,0,oo()*We).toString()+" cm"),this.setFontSize(this.getFontSize()/We),u="n",C=N.ADVANCED}function j(){this.restoreGraphicsState(),u="S",C=N.COMPAT}var I=m.__private__.combineFontStyleAndFontWeight=function(te,Ce){if(te=="bold"&&Ce=="normal"||te=="bold"&&Ce==400||te=="normal"&&Ce=="italic"||te=="bold"&&Ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ce&&(te=Ce==400||Ce==="normal"?te==="italic"?"italic":"normal":Ce!=700&&Ce!=="bold"||te!=="normal"?(Ce==700?"bold":Ce)+""+te:"bold"),te};m.advancedAPI=function(te){var Ce=C===N.COMPAT;return Ce&&_.call(this),typeof te!="function"||(te(this),Ce&&j.call(this)),this},m.compatAPI=function(te){var Ce=C===N.ADVANCED;return Ce&&j.call(this),typeof te!="function"||(te(this),Ce&&_.call(this)),this},m.isAdvancedAPI=function(){return C===N.ADVANCED};var T,k=function(te){if(C!==N.ADVANCED)throw new Error(te+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=m.roundToPrecision=m.__private__.roundToPrecision=function(te,Ce){var qe=t||Ce;if(isNaN(te)||isNaN(qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return te.toFixed(qe).replace(/0+$/,"")};T=m.hpf=m.__private__.hpf=typeof c=="number"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return B(te,c)}:c==="smart"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return B(te,te>-1&&te<1?16:5)}:function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return B(te,16)};var M=m.f2=m.__private__.f2=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f2");return B(te,2)},P=m.__private__.f3=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f3");return B(te,3)},S=m.scale=m.__private__.scale=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.scale");return C===N.COMPAT?te*We:C===N.ADVANCED?te:void 0},L=function(te){return C===N.COMPAT?oo()-te:C===N.ADVANCED?te:void 0},U=function(te){return S(L(te))};m.__private__.setPrecision=m.setPrecision=function(te){typeof parseInt(te,10)=="number"&&(t=parseInt(te,10))};var q,H="00000000000000000000000000000000",z=m.__private__.getFileId=function(){return H},W=m.__private__.setFileId=function(te){return H=te!==void 0&&/^[a-fA-F0-9]{32}$/.test(te)?te.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(wa=new Sb(d.userPermissions,d.userPassword,d.ownerPassword,H)),H};m.setFileId=function(te){return W(te),this},m.getFileId=function(){return z()};var Z=m.__private__.convertDateToPDFDate=function(te){var Ce=te.getTimezoneOffset(),qe=Ce<0?"+":"-",tt=Math.floor(Math.abs(Ce/60)),ct=Math.abs(Ce%60),It=[qe,K(tt),"'",K(ct),"'"].join("");return["D:",te.getFullYear(),K(te.getMonth()+1),K(te.getDate()),K(te.getHours()),K(te.getMinutes()),K(te.getSeconds()),It].join("")},V=m.__private__.convertPDFDateToDate=function(te){var Ce=parseInt(te.substr(2,4),10),qe=parseInt(te.substr(6,2),10)-1,tt=parseInt(te.substr(8,2),10),ct=parseInt(te.substr(10,2),10),It=parseInt(te.substr(12,2),10),Xt=parseInt(te.substr(14,2),10);return new Date(Ce,qe,tt,ct,It,Xt,0)},Y=m.__private__.setCreationDate=function(te){var Ce;if(te===void 0&&(te=new Date),te instanceof Date)Ce=Z(te);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(te))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ce=te}return q=Ce},R=m.__private__.getCreationDate=function(te){var Ce=q;return te==="jsDate"&&(Ce=V(q)),Ce};m.setCreationDate=function(te){return Y(te),this},m.getCreationDate=function(te){return R(te)};var O,K=m.__private__.padd2=function(te){return("0"+parseInt(te)).slice(-2)},J=m.__private__.padd2Hex=function(te){return("00"+(te=te.toString())).substr(te.length)},ce=0,oe=[],re=[],ue=0,le=[],ve=[],X=!1,Ee=re,Be=function(){ce=0,ue=0,re=[],oe=[],le=[],Re=$n(),Me=$n()};m.__private__.setCustomOutputDestination=function(te){X=!0,Ee=te};var je=function(te){X||(Ee=te)};m.__private__.resetCustomOutputDestination=function(){X=!1,Ee=re};var fe=m.__private__.out=function(te){return te=te.toString(),ue+=te.length+1,Ee.push(te),Ee},ye=m.__private__.write=function(te){return fe(arguments.length===1?te.toString():Array.prototype.join.call(arguments," "))},Ae=m.__private__.getArrayBuffer=function(te){for(var Ce=te.length,qe=new ArrayBuffer(Ce),tt=new Uint8Array(qe);Ce--;)tt[Ce]=te.charCodeAt(Ce);return qe},se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return se};var ne=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(te){return ne=C===N.ADVANCED?te/We:te,this};var de,me=m.__private__.getFontSize=m.getFontSize=function(){return C===N.COMPAT?ne:ne*We},ge=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(te){return ge=te,this},m.__private__.getR2L=m.getR2L=function(){return ge};var Te,Ve=m.__private__.setZoomMode=function(te){var Ce=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(te))de=te;else if(isNaN(te)){if(Ce.indexOf(te)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+te+'" is not recognized.');de=te}else de=parseInt(te,10)};m.__private__.getZoomMode=function(){return de};var Xe,Ke=m.__private__.setPageMode=function(te){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(te)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+te+'" is not recognized.');Te=te};m.__private__.getPageMode=function(){return Te};var Qe=m.__private__.setLayoutMode=function(te){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(te)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+te+'" is not recognized.');Xe=te};m.__private__.getLayoutMode=function(){return Xe},m.__private__.setDisplayMode=m.setDisplayMode=function(te,Ce,qe){return Ve(te),Qe(Ce),Ke(qe),this};var Je={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(te){if(Object.keys(Je).indexOf(te)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Je[te]},m.__private__.getDocumentProperties=function(){return Je},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(te){for(var Ce in Je)Je.hasOwnProperty(Ce)&&te[Ce]&&(Je[Ce]=te[Ce]);return this},m.__private__.setDocumentProperty=function(te,Ce){if(Object.keys(Je).indexOf(te)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Je[te]=Ce};var mt,We,He,Tt,Ie,ft={},vt={},et=[],Ct={},St={},ot={},nr={},fr=null,Zt=0,Ft=[],dr=new YJ(m),Sr=e.hotfixes||[],_r={},Vn={},qa=[],ar=function te(Ce,qe,tt,ct,It,Xt){if(!(this instanceof te))return new te(Ce,qe,tt,ct,It,Xt);isNaN(Ce)&&(Ce=1),isNaN(qe)&&(qe=0),isNaN(tt)&&(tt=0),isNaN(ct)&&(ct=1),isNaN(It)&&(It=0),isNaN(Xt)&&(Xt=0),this._matrix=[Ce,qe,tt,ct,It,Xt]};Object.defineProperty(ar.prototype,"sx",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(ar.prototype,"shy",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(ar.prototype,"shx",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(ar.prototype,"sy",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(ar.prototype,"tx",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(ar.prototype,"ty",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(ar.prototype,"a",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(ar.prototype,"b",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(ar.prototype,"c",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(ar.prototype,"d",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(ar.prototype,"e",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(ar.prototype,"f",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(ar.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ar.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ar.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ar.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ar.prototype.join=function(te){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(te)},ar.prototype.multiply=function(te){var Ce=te.sx*this.sx+te.shy*this.shx,qe=te.sx*this.shy+te.shy*this.sy,tt=te.shx*this.sx+te.sy*this.shx,ct=te.shx*this.shy+te.sy*this.sy,It=te.tx*this.sx+te.ty*this.shx+this.tx,Xt=te.tx*this.shy+te.ty*this.sy+this.ty;return new ar(Ce,qe,tt,ct,It,Xt)},ar.prototype.decompose=function(){var te=this.sx,Ce=this.shy,qe=this.shx,tt=this.sy,ct=this.tx,It=this.ty,Xt=Math.sqrt(te*te+Ce*Ce),lr=(te/=Xt)*qe+(Ce/=Xt)*tt;qe-=te*lr,tt-=Ce*lr;var F=Math.sqrt(qe*qe+tt*tt);return lr/=F,te*(tt/=F)<Ce*(qe/=F)&&(te=-te,Ce=-Ce,lr=-lr,Xt=-Xt),{scale:new ar(Xt,0,0,F,0,0),translate:new ar(1,0,0,1,ct,It),rotate:new ar(te,Ce,-Ce,te,0,0),skew:new ar(1,0,lr,1,0,0)}},ar.prototype.toString=function(te){return this.join(" ")},ar.prototype.inversed=function(){var te=this.sx,Ce=this.shy,qe=this.shx,tt=this.sy,ct=this.tx,It=this.ty,Xt=1/(te*tt-Ce*qe),lr=tt*Xt,F=-Ce*Xt,ie=-qe*Xt,pe=te*Xt;return new ar(lr,F,ie,pe,-lr*ct-ie*It,-F*ct-pe*It)},ar.prototype.applyToPoint=function(te){var Ce=te.x*this.sx+te.y*this.shx+this.tx,qe=te.x*this.shy+te.y*this.sy+this.ty;return new Qd(Ce,qe)},ar.prototype.applyToRectangle=function(te){var Ce=this.applyToPoint(te),qe=this.applyToPoint(new Qd(te.x+te.w,te.y+te.h));return new Gf(Ce.x,Ce.y,qe.x-Ce.x,qe.y-Ce.y)},ar.prototype.clone=function(){var te=this.sx,Ce=this.shy,qe=this.shx,tt=this.sy,ct=this.tx,It=this.ty;return new ar(te,Ce,qe,tt,ct,It)},m.Matrix=ar;var fn=m.matrixMult=function(te,Ce){return Ce.multiply(te)},$r=new ar(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=$r;var mn=function(te,Ce){if(!St[te]){var qe=(Ce instanceof Gg?"Sh":"P")+(Object.keys(Ct).length+1).toString(10);Ce.id=qe,St[te]=qe,Ct[qe]=Ce,dr.publish("addPattern",Ce)}};m.ShadingPattern=Gg,m.TilingPattern=Hb,m.addShadingPattern=function(te,Ce){return k("addShadingPattern()"),mn(te,Ce),this},m.beginTilingPattern=function(te){k("beginTilingPattern()"),zu(te.boundingBox[0],te.boundingBox[1],te.boundingBox[2]-te.boundingBox[0],te.boundingBox[3]-te.boundingBox[1],te.matrix)},m.endTilingPattern=function(te,Ce){k("endTilingPattern()"),Ce.stream=ve[O].join(`
`),mn(te,Ce),dr.publish("endTilingPattern",Ce),qa.pop().restore()};var In=m.__private__.newObject=function(){var te=$n();return ke(te,!0),te},$n=m.__private__.newObjectDeferred=function(){return ce++,oe[ce]=function(){return ue},ce},ke=function(te,Ce){return Ce=typeof Ce=="boolean"&&Ce,oe[te]=ue,Ce&&fe(te+" 0 obj"),te},$e=m.__private__.newAdditionalObject=function(){var te={objId:$n(),content:""};return le.push(te),te},Re=$n(),Me=$n(),we=m.__private__.decodeColorString=function(te){var Ce=te.split(" ");if(Ce.length!==2||Ce[1]!=="g"&&Ce[1]!=="G")Ce.length===5&&(Ce[4]==="k"||Ce[4]==="K")&&(Ce=[(1-Ce[0])*(1-Ce[3]),(1-Ce[1])*(1-Ce[3]),(1-Ce[2])*(1-Ce[3]),"r"]);else{var qe=parseFloat(Ce[0]);Ce=[qe,qe,qe,"r"]}for(var tt="#",ct=0;ct<3;ct++)tt+=("0"+Math.floor(255*parseFloat(Ce[ct])).toString(16)).slice(-2);return tt},xe=m.__private__.encodeColorString=function(te){var Ce;typeof te=="string"&&(te={ch1:te});var qe=te.ch1,tt=te.ch2,ct=te.ch3,It=te.ch4,Xt=te.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof qe=="string"&&qe.charAt(0)!=="#"){var lr=new mAe(qe);if(lr.ok)qe=lr.toHex();else if(!/^\d*\.?\d*$/.test(qe))throw new Error('Invalid color "'+qe+'" passed to jsPDF.encodeColorString.')}if(typeof qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(qe)&&(qe="#"+qe[1]+qe[1]+qe[2]+qe[2]+qe[3]+qe[3]),typeof qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(qe)){var F=parseInt(qe.substr(1),16);qe=F>>16&255,tt=F>>8&255,ct=255&F}if(tt===void 0||It===void 0&&qe===tt&&tt===ct)if(typeof qe=="string")Ce=qe+" "+Xt[0];else switch(te.precision){case 2:Ce=M(qe/255)+" "+Xt[0];break;case 3:default:Ce=P(qe/255)+" "+Xt[0]}else if(It===void 0||Ia(It)==="object"){if(It&&!isNaN(It.a)&&It.a===0)return Ce=["1.","1.","1.",Xt[1]].join(" ");if(typeof qe=="string")Ce=[qe,tt,ct,Xt[1]].join(" ");else switch(te.precision){case 2:Ce=[M(qe/255),M(tt/255),M(ct/255),Xt[1]].join(" ");break;default:case 3:Ce=[P(qe/255),P(tt/255),P(ct/255),Xt[1]].join(" ")}}else if(typeof qe=="string")Ce=[qe,tt,ct,It,Xt[2]].join(" ");else switch(te.precision){case 2:Ce=[M(qe),M(tt),M(ct),M(It),Xt[2]].join(" ");break;case 3:default:Ce=[P(qe),P(tt),P(ct),P(It),Xt[2]].join(" ")}return Ce},De=m.__private__.getFilters=function(){return o},Ge=m.__private__.putStream=function(te){var Ce=(te=te||{}).data||"",qe=te.filters||De(),tt=te.alreadyAppliedFilters||[],ct=te.addLength1||!1,It=Ce.length,Xt=te.objectId,lr=function(Qr){return Qr};if(d!==null&&Xt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(lr=wa.encryptor(Xt,0));var F={};qe===!0&&(qe=["FlateEncode"]);var ie=te.additionalKeyValues||[],pe=(F=Tr.API.processDataByFilters!==void 0?Tr.API.processDataByFilters(Ce,qe):{data:Ce,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(F.data.length!==0&&(ie.push({key:"Length",value:F.data.length}),ct===!0&&ie.push({key:"Length1",value:It})),pe.length!=0)if(pe.split("/").length-1==1)ie.push({key:"Filter",value:pe});else{ie.push({key:"Filter",value:"["+pe+"]"});for(var Pe=0;Pe<ie.length;Pe+=1)if(ie[Pe].key==="DecodeParms"){for(var lt=[],yt=0;yt<F.reverseChain.split("/").length-1;yt+=1)lt.push("null");lt.push(ie[Pe].value),ie[Pe].value="["+lt.join(" ")+"]"}}fe("<<");for(var Yt=0;Yt<ie.length;Yt++)fe("/"+ie[Yt].key+" "+ie[Yt].value);fe(">>"),F.data.length!==0&&(fe("stream"),fe(lr(F.data)),fe("endstream"))},Ue=m.__private__.putPage=function(te){var Ce=te.number,qe=te.data,tt=te.objId,ct=te.contentsObjId;ke(tt,!0),fe("<</Type /Page"),fe("/Parent "+te.rootDictionaryObjId+" 0 R"),fe("/Resources "+te.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(T(te.mediaBox.bottomLeftX))+" "+parseFloat(T(te.mediaBox.bottomLeftY))+" "+T(te.mediaBox.topRightX)+" "+T(te.mediaBox.topRightY)+"]"),te.cropBox!==null&&fe("/CropBox ["+T(te.cropBox.bottomLeftX)+" "+T(te.cropBox.bottomLeftY)+" "+T(te.cropBox.topRightX)+" "+T(te.cropBox.topRightY)+"]"),te.bleedBox!==null&&fe("/BleedBox ["+T(te.bleedBox.bottomLeftX)+" "+T(te.bleedBox.bottomLeftY)+" "+T(te.bleedBox.topRightX)+" "+T(te.bleedBox.topRightY)+"]"),te.trimBox!==null&&fe("/TrimBox ["+T(te.trimBox.bottomLeftX)+" "+T(te.trimBox.bottomLeftY)+" "+T(te.trimBox.topRightX)+" "+T(te.trimBox.topRightY)+"]"),te.artBox!==null&&fe("/ArtBox ["+T(te.artBox.bottomLeftX)+" "+T(te.artBox.bottomLeftY)+" "+T(te.artBox.topRightX)+" "+T(te.artBox.topRightY)+"]"),typeof te.userUnit=="number"&&te.userUnit!==1&&fe("/UserUnit "+te.userUnit),dr.publish("putPage",{objId:tt,pageContext:Ft[Ce],pageNumber:Ce,page:qe}),fe("/Contents "+ct+" 0 R"),fe(">>"),fe("endobj");var It=qe.join(`
`);return C===N.ADVANCED&&(It+=`
Q`),ke(ct,!0),Ge({data:It,filters:De(),objectId:ct}),fe("endobj"),tt},Ze=m.__private__.putPages=function(){var te,Ce,qe=[];for(te=1;te<=Zt;te++)Ft[te].objId=$n(),Ft[te].contentsObjId=$n();for(te=1;te<=Zt;te++)qe.push(Ue({number:te,data:ve[te],objId:Ft[te].objId,contentsObjId:Ft[te].contentsObjId,mediaBox:Ft[te].mediaBox,cropBox:Ft[te].cropBox,bleedBox:Ft[te].bleedBox,trimBox:Ft[te].trimBox,artBox:Ft[te].artBox,userUnit:Ft[te].userUnit,rootDictionaryObjId:Re,resourceDictionaryObjId:Me}));ke(Re,!0),fe("<</Type /Pages");var tt="/Kids [";for(Ce=0;Ce<Zt;Ce++)tt+=qe[Ce]+" 0 R ";fe(tt+"]"),fe("/Count "+Zt),fe(">>"),fe("endobj"),dr.publish("postPutPages")},rt=function(te){dr.publish("putFont",{font:te,out:fe,newObject:In,putStream:Ge}),te.isAlreadyPutted!==!0&&(te.objectNumber=In(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+_b(te.postScriptName)),fe("/Subtype /Type1"),typeof te.encoding=="string"&&fe("/Encoding /"+te.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},_t=function(){for(var te in ft)ft.hasOwnProperty(te)&&(f===!1||f===!0&&A.hasOwnProperty(te))&&rt(ft[te])},Bt=function(te){te.objectNumber=In();var Ce=[];Ce.push({key:"Type",value:"/XObject"}),Ce.push({key:"Subtype",value:"/Form"}),Ce.push({key:"BBox",value:"["+[T(te.x),T(te.y),T(te.x+te.width),T(te.y+te.height)].join(" ")+"]"}),Ce.push({key:"Matrix",value:"["+te.matrix.toString()+"]"});var qe=te.pages[1].join(`
`);Ge({data:qe,additionalKeyValues:Ce,objectId:te.objectNumber}),fe("endobj")},Kt=function(){for(var te in _r)_r.hasOwnProperty(te)&&Bt(_r[te])},Ut=function(te,Ce){var qe,tt=[],ct=1/(Ce-1);for(qe=0;qe<1;qe+=ct)tt.push(qe);if(tt.push(1),te[0].offset!=0){var It={offset:0,color:te[0].color};te.unshift(It)}if(te[te.length-1].offset!=1){var Xt={offset:1,color:te[te.length-1].color};te.push(Xt)}for(var lr="",F=0,ie=0;ie<tt.length;ie++){for(qe=tt[ie];qe>te[F+1].offset;)F++;var pe=te[F].offset,Pe=(qe-pe)/(te[F+1].offset-pe),lt=te[F].color,yt=te[F+1].color;lr+=J(Math.round((1-Pe)*lt[0]+Pe*yt[0]).toString(16))+J(Math.round((1-Pe)*lt[1]+Pe*yt[1]).toString(16))+J(Math.round((1-Pe)*lt[2]+Pe*yt[2]).toString(16))}return lr.trim()},Jt=function(te,Ce){Ce||(Ce=21);var qe=In(),tt=Ut(te.colors,Ce),ct=[];ct.push({key:"FunctionType",value:"0"}),ct.push({key:"Domain",value:"[0.0 1.0]"}),ct.push({key:"Size",value:"["+Ce+"]"}),ct.push({key:"BitsPerSample",value:"8"}),ct.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ct.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge({data:tt,additionalKeyValues:ct,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:qe}),fe("endobj"),te.objectNumber=In(),fe("<< /ShadingType "+te.type),fe("/ColorSpace /DeviceRGB");var It="/Coords ["+T(parseFloat(te.coords[0]))+" "+T(parseFloat(te.coords[1]))+" ";te.type===2?It+=T(parseFloat(te.coords[2]))+" "+T(parseFloat(te.coords[3])):It+=T(parseFloat(te.coords[2]))+" "+T(parseFloat(te.coords[3]))+" "+T(parseFloat(te.coords[4]))+" "+T(parseFloat(te.coords[5])),fe(It+="]"),te.matrix&&fe("/Matrix ["+te.matrix.toString()+"]"),fe("/Function "+qe+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},jr=function(te,Ce){var qe=$n(),tt=In();Ce.push({resourcesOid:qe,objectOid:tt}),te.objectNumber=tt;var ct=[];ct.push({key:"Type",value:"/Pattern"}),ct.push({key:"PatternType",value:"1"}),ct.push({key:"PaintType",value:"1"}),ct.push({key:"TilingType",value:"1"}),ct.push({key:"BBox",value:"["+te.boundingBox.map(T).join(" ")+"]"}),ct.push({key:"XStep",value:T(te.xStep)}),ct.push({key:"YStep",value:T(te.yStep)}),ct.push({key:"Resources",value:qe+" 0 R"}),te.matrix&&ct.push({key:"Matrix",value:"["+te.matrix.toString()+"]"}),Ge({data:te.stream,additionalKeyValues:ct,objectId:te.objectNumber}),fe("endobj")},on=function(te){var Ce;for(Ce in Ct)Ct.hasOwnProperty(Ce)&&(Ct[Ce]instanceof Gg?Jt(Ct[Ce]):Ct[Ce]instanceof Hb&&jr(Ct[Ce],te))},ln=function(te){for(var Ce in te.objectNumber=In(),fe("<<"),te)switch(Ce){case"opacity":fe("/ca "+M(te[Ce]));break;case"stroke-opacity":fe("/CA "+M(te[Ce]))}fe(">>"),fe("endobj")},hn=function(){var te;for(te in ot)ot.hasOwnProperty(te)&&ln(ot[te])},Ka=function(){for(var te in fe("/XObject <<"),_r)_r.hasOwnProperty(te)&&_r[te].objectNumber>=0&&fe("/"+te+" "+_r[te].objectNumber+" 0 R");dr.publish("putXobjectDict"),fe(">>")},Ci=function(){wa.oid=In(),fe("<<"),fe("/Filter /Standard"),fe("/V "+wa.v),fe("/R "+wa.r),fe("/U <"+wa.toHexString(wa.U)+">"),fe("/O <"+wa.toHexString(wa.O)+">"),fe("/P "+wa.P),fe(">>"),fe("endobj")},Da=function(){for(var te in fe("/Font <<"),ft)ft.hasOwnProperty(te)&&(f===!1||f===!0&&A.hasOwnProperty(te))&&fe("/"+te+" "+ft[te].objectNumber+" 0 R");fe(">>")},us=function(){if(Object.keys(Ct).length>0){for(var te in fe("/Shading <<"),Ct)Ct.hasOwnProperty(te)&&Ct[te]instanceof Gg&&Ct[te].objectNumber>=0&&fe("/"+te+" "+Ct[te].objectNumber+" 0 R");dr.publish("putShadingPatternDict"),fe(">>")}},Oa=function(te){if(Object.keys(Ct).length>0){for(var Ce in fe("/Pattern <<"),Ct)Ct.hasOwnProperty(Ce)&&Ct[Ce]instanceof m.TilingPattern&&Ct[Ce].objectNumber>=0&&Ct[Ce].objectNumber<te&&fe("/"+Ce+" "+Ct[Ce].objectNumber+" 0 R");dr.publish("putTilingPatternDict"),fe(">>")}},ds=function(){if(Object.keys(ot).length>0){var te;for(te in fe("/ExtGState <<"),ot)ot.hasOwnProperty(te)&&ot[te].objectNumber>=0&&fe("/"+te+" "+ot[te].objectNumber+" 0 R");dr.publish("putGStateDict"),fe(">>")}},la=function(te){ke(te.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Da(),us(),Oa(te.objectOid),ds(),Ka(),fe(">>"),fe("endobj")},fs=function(){var te=[];_t(),hn(),Kt(),on(te),dr.publish("putResources"),te.forEach(la),la({resourcesOid:Me,objectOid:Number.MAX_SAFE_INTEGER}),dr.publish("postPutResources")},Mu=function(){dr.publish("putAdditionalObjects");for(var te=0;te<le.length;te++){var Ce=le[te];ke(Ce.objId,!0),fe(Ce.content),fe("endobj")}dr.publish("postPutAdditionalObjects")},Pd=function(te){vt[te.fontName]=vt[te.fontName]||{},vt[te.fontName][te.fontStyle]=te.id},$l=function(te,Ce,qe,tt,ct){var It={id:"F"+(Object.keys(ft).length+1).toString(10),postScriptName:te,fontName:Ce,fontStyle:qe,encoding:tt,isStandardFont:ct||!1,metadata:{}};return dr.publish("addFont",{font:It,instance:this}),ft[It.id]=It,Pd(It),It.id},kr=function(te){for(var Ce=0,qe=se.length;Ce<qe;Ce++){var tt=$l.call(this,te[Ce][0],te[Ce][1],te[Ce][2],se[Ce][3],!0);f===!1&&(A[tt]=!0);var ct=te[Ce][0].split("-");Pd({id:tt,fontName:ct[0],fontStyle:ct[1]||""})}dr.publish("addFonts",{fonts:ft,dictionary:vt})},rn=function(te){return te.foo=function(){try{return te.apply(this,arguments)}catch(tt){var Ce=tt.stack||"";~Ce.indexOf(" at ")&&(Ce=Ce.split(" at ")[1]);var qe="Error in function "+Ce.split(`
`)[0].split("<")[0]+": "+tt.message;if(!Xr.console)throw new Error(qe);Xr.console.error(qe,tt),Xr.alert&&alert(qe)}},te.foo.bar=te,te.foo},yn=function(te,Ce){var qe,tt,ct,It,Xt,lr,F,ie,pe;if(ct=(Ce=Ce||{}).sourceEncoding||"Unicode",Xt=Ce.outputEncoding,(Ce.autoencode||Xt)&&ft[mt].metadata&&ft[mt].metadata[ct]&&ft[mt].metadata[ct].encoding&&(It=ft[mt].metadata[ct].encoding,!Xt&&ft[mt].encoding&&(Xt=ft[mt].encoding),!Xt&&It.codePages&&(Xt=It.codePages[0]),typeof Xt=="string"&&(Xt=It[Xt]),Xt)){for(F=!1,lr=[],qe=0,tt=te.length;qe<tt;qe++)(ie=Xt[te.charCodeAt(qe)])?lr.push(String.fromCharCode(ie)):lr.push(te[qe]),lr[qe].charCodeAt(0)>>8&&(F=!0);te=lr.join("")}for(qe=te.length;F===void 0&&qe!==0;)te.charCodeAt(qe-1)>>8&&(F=!0),qe--;if(!F)return te;for(lr=Ce.noBOM?[]:[254,255],qe=0,tt=te.length;qe<tt;qe++){if((pe=(ie=te.charCodeAt(qe))>>8)>>8)throw new Error("Character at position "+qe+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lr.push(pe),lr.push(ie-(pe<<8))}return String.fromCharCode.apply(void 0,lr)},Ur=m.__private__.pdfEscape=m.pdfEscape=function(te,Ce){return yn(te,Ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Un=m.__private__.beginPage=function(te){ve[++Zt]=[],Ft[Zt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(te[0]),topRightY:Number(te[1])}},Hi(Zt),je(ve[O])},Ei=function(te,Ce){var qe,tt,ct;switch(r=Ce||r,typeof te=="string"&&(qe=y(te.toLowerCase()),Array.isArray(qe)&&(tt=qe[0],ct=qe[1])),Array.isArray(te)&&(tt=te[0]*We,ct=te[1]*We),isNaN(tt)&&(tt=a[0],ct=a[1]),(tt>14400||ct>14400)&&(Va.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),ct=Math.min(14400,ct)),a=[tt,ct],r.substr(0,1)){case"l":ct>tt&&(a=[ct,tt]);break;case"p":tt>ct&&(a=[ct,tt])}Un(a),f0(Hu),fe(Vi),h0!==0&&fe(h0+" J"),Hd!==0&&fe(Hd+" j"),dr.publish("addPage",{pageNumber:Zt})},Zo=function(te){te>0&&te<=Zt&&(ve.splice(te,1),Ft.splice(te,1),Zt--,O>Zt&&(O=Zt),this.setPage(O))},Hi=function(te){te>0&&te<=Zt&&(O=te)},Pn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ve.length-1},el=function(te,Ce,qe){var tt,ct=void 0;return qe=qe||{},te=te!==void 0?te:ft[mt].fontName,Ce=Ce!==void 0?Ce:ft[mt].fontStyle,tt=te.toLowerCase(),vt[tt]!==void 0&&vt[tt][Ce]!==void 0?ct=vt[tt][Ce]:vt[te]!==void 0&&vt[te][Ce]!==void 0?ct=vt[te][Ce]:qe.disableWarning===!1&&Va.warn("Unable to look up font label for font '"+te+"', '"+Ce+"'. Refer to getFontList() for available fonts."),ct||qe.noFallback||(ct=vt.times[Ce])==null&&(ct=vt.times.normal),ct},Qi=m.__private__.putInfo=function(){var te=In(),Ce=function(tt){return tt};for(var qe in d!==null&&(Ce=wa.encryptor(te,0)),fe("<<"),fe("/Producer ("+Ur(Ce("jsPDF "+Tr.version))+")"),Je)Je.hasOwnProperty(qe)&&Je[qe]&&fe("/"+qe.substr(0,1).toUpperCase()+qe.substr(1)+" ("+Ur(Ce(Je[qe]))+")");fe("/CreationDate ("+Ur(Ce(q))+")"),fe(">>"),fe("endobj")},_o=m.__private__.putCatalog=function(te){var Ce=(te=te||{}).rootDictionaryObjId||Re;switch(In(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+Ce+" 0 R"),de||(de="fullwidth"),de){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var qe=""+de;qe.substr(qe.length-1)==="%"&&(de=parseInt(de)/100),typeof de=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+M(de)+"]")}switch(Xe||(Xe="continuous"),Xe){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Te&&fe("/PageMode /"+Te),dr.publish("putCatalog"),fe(">>"),fe("endobj")},Fd=m.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ce+1)),fe("/Root "+ce+" 0 R"),fe("/Info "+(ce-1)+" 0 R"),d!==null&&fe("/Encrypt "+wa.oid+" 0 R"),fe("/ID [ <"+H+"> <"+H+"> ]"),fe(">>")},Rd=m.__private__.putHeader=function(){fe("%PDF-"+g),fe("%")},u0=m.__private__.putXRef=function(){var te="0000000000";fe("xref"),fe("0 "+(ce+1)),fe("0000000000 65535 f ");for(var Ce=1;Ce<=ce;Ce++)typeof oe[Ce]=="function"?fe((te+oe[Ce]()).slice(-10)+" 00000 n "):oe[Ce]!==void 0?fe((te+oe[Ce]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},Kc=m.__private__.buildDocument=function(){Be(),je(re),dr.publish("buildDocument"),Rd(),Ze(),Mu(),fs(),d!==null&&Ci(),Qi(),_o();var te=ue;return u0(),Fd(),fe("startxref"),fe(""+te),fe("%%EOF"),je(ve[O]),re.join(`
`)},Vf=m.__private__.getBlob=function(te){return new Blob([Ae(te)],{type:"application/pdf"})},Wc=m.output=m.__private__.output=rn(function(te,Ce){switch(typeof(Ce=Ce||{})=="string"?Ce={filename:Ce}:Ce.filename=Ce.filename||"generated.pdf",te){case void 0:return Kc();case"save":m.save(Ce.filename);break;case"arraybuffer":return Ae(Kc());case"blob":return Vf(Kc());case"bloburi":case"bloburl":if(Xr.URL!==void 0&&typeof Xr.URL.createObjectURL=="function")return Xr.URL&&Xr.URL.createObjectURL(Vf(Kc()))||void 0;Va.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var qe="",tt=Kc();try{qe=WR(tt)}catch{qe=WR(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+Ce.filename+";base64,"+qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Xr)==="[object Window]"){var ct="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",It=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ce.pdfObjectUrl&&(ct=Ce.pdfObjectUrl,It="");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ct+'"'+It+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ce)+");<\/script></body></html>",lr=Xr.open();return lr!==null&&lr.document.write(Xt),lr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Xr)==="[object Window]"){var F='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ce.filename+'" width="500px" height="400px" /></body></html>',ie=Xr.open();if(ie!==null){ie.document.write(F);var pe=this;ie.document.documentElement.querySelector("#pdfViewer").onload=function(){ie.document.title=Ce.filename,ie.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(pe.output("bloburl"))}}return ie}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Xr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ce)+'"></iframe></body></html>',lt=Xr.open();if(lt!==null&&(lt.document.write(Pe),lt.document.title=Ce.filename),lt||typeof safari>"u")return lt;break;case"datauri":case"dataurl":return Xr.document.location.href=this.output("datauristring",Ce);default:return null}}),cc=function(te){return Array.isArray(Sr)===!0&&Sr.indexOf(te)>-1};switch(n){case"pt":We=1;break;case"mm":We=72/25.4;break;case"cm":We=72/2.54;break;case"in":We=72;break;case"px":We=cc("px_scaling")==1?.75:96/72;break;case"pc":case"em":We=12;break;case"ex":We=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);We=n}var wa=null;Y(),W();var Xc=function(te){return d!==null?wa.encryptor(te,0):function(Ce){return Ce}},uc=m.__private__.getPageInfo=m.getPageInfo=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ft[te].objId,pageNumber:te,pageContext:Ft[te]}},Hr=m.__private__.getPageInfoByObjId=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ce in Ft)if(Ft[Ce].objId===te)break;return uc(Ce)},dc=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Ft[O].objId,pageNumber:O,pageContext:Ft[O]}};m.addPage=function(){return Ei.apply(this,arguments),this},m.setPage=function(){return Hi.apply(this,arguments),je.call(this,ve[O]),this},m.insertPage=function(te){return this.addPage(),this.movePage(O,te),this},m.movePage=function(te,Ce){var qe,tt;if(te>Ce){qe=ve[te],tt=Ft[te];for(var ct=te;ct>Ce;ct--)ve[ct]=ve[ct-1],Ft[ct]=Ft[ct-1];ve[Ce]=qe,Ft[Ce]=tt,this.setPage(Ce)}else if(te<Ce){qe=ve[te],tt=Ft[te];for(var It=te;It<Ce;It++)ve[It]=ve[It+1],Ft[It]=Ft[It+1];ve[Ce]=qe,Ft[Ce]=tt,this.setPage(Ce)}return this},m.deletePage=function(){return Zo.apply(this,arguments),this},m.__private__.text=m.text=function(te,Ce,qe,tt,ct){var It,Xt,lr,F,ie,pe,Pe,lt,yt,Yt=(tt=tt||{}).scope||this;if(typeof te=="number"&&typeof Ce=="number"&&(typeof qe=="string"||Array.isArray(qe))){var Qr=qe;qe=Ce,Ce=te,te=Qr}if(arguments[3]instanceof ar?(k("The transform parameter of text() with a Matrix value"),yt=ct):(lr=arguments[4],F=arguments[5],Ia(Pe=arguments[3])==="object"&&Pe!==null||(typeof lr=="string"&&(F=lr,lr=null),typeof Pe=="string"&&(F=Pe,Pe=null),typeof Pe=="number"&&(lr=Pe,Pe=null),tt={flags:Pe,angle:lr,align:F})),isNaN(Ce)||isNaN(qe)||te==null)throw new Error("Invalid arguments passed to jsPDF.text");if(te.length===0)return Yt;var Sn="",nn=!1,ta=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:kn,ha=Yt.internal.scaleFactor;function mc(Nn){return Nn=Nn.split("	").join(Array(tt.TabLen||9).join(" ")),Ur(Nn,Pe)}function ws(Nn){for(var Cn,Pa=Nn.concat(),Ns=[],gc=Pa.length;gc--;)typeof(Cn=Pa.shift())=="string"?Ns.push(Cn):Array.isArray(Nn)&&(Cn.length===1||Cn[1]===void 0&&Cn[2]===void 0)?Ns.push(Cn[0]):Ns.push([Cn[0],Cn[1],Cn[2]]);return Ns}function al(Nn,Cn){var Pa;if(typeof Nn=="string")Pa=Cn(Nn)[0];else if(Array.isArray(Nn)){for(var Ns,gc,nh=Nn.concat(),ah=[],qd=nh.length;qd--;)typeof(Ns=nh.shift())=="string"?ah.push(Cn(Ns)[0]):Array.isArray(Ns)&&typeof Ns[0]=="string"&&(gc=Cn(Ns[0],Ns[1],Ns[2]),ah.push([gc[0],gc[1],gc[2]]));Pa=ah}return Pa}var qu=!1,Kf=!0;if(typeof te=="string")qu=!0;else if(Array.isArray(te)){var YA=te.concat();Xt=[];for(var A0,ti=YA.length;ti--;)(typeof(A0=YA.shift())!="string"||Array.isArray(A0)&&typeof A0[0]!="string")&&(Kf=!1);qu=Kf}if(qu===!1)throw new Error('Type of text must be string or Array. "'+te+'" is not recognized.');typeof te=="string"&&(te=te.match(/[\r?\n]/)?te.split(/\r\n|\r|\n/g):[te]);var Wf=ne/Yt.internal.scaleFactor,m0=Wf*(ta-1);switch(tt.baseline){case"bottom":qe-=m0;break;case"top":qe+=Wf-m0;break;case"hanging":qe+=Wf-2*m0;break;case"middle":qe+=Wf/2-m0}if((pe=tt.maxWidth||0)>0&&(typeof te=="string"?te=Yt.splitTextToSize(te,pe):Object.prototype.toString.call(te)==="[object Array]"&&(te=te.reduce(function(Nn,Cn){return Nn.concat(Yt.splitTextToSize(Cn,pe))},[]))),It={text:te,x:Ce,y:qe,options:tt,mutex:{pdfEscape:Ur,activeFontKey:mt,fonts:ft,activeFontSize:ne}},dr.publish("preProcessText",It),te=It.text,lr=(tt=It.options).angle,!(yt instanceof ar)&&lr&&typeof lr=="number"){lr*=Math.PI/180,tt.rotationDirection===0&&(lr=-lr),C===N.ADVANCED&&(lr=-lr);var p0=Math.cos(lr),JA=Math.sin(lr);yt=new ar(p0,JA,-JA,p0,0,0)}else lr&&lr instanceof ar&&(yt=lr);C!==N.ADVANCED||yt||(yt=$r),(ie=tt.charSpace||Ud)!==void 0&&(Sn+=T(S(ie))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(lt=tt.horizontalScale)!==void 0&&(Sn+=T(100*lt)+` Tz
`),tt.lang;var sl=-1,Xy=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,sg=Yt.internal.getCurrentPageInfo().pageContext;switch(Xy){case 0:case!1:case"fill":sl=0;break;case 1:case!0:case"stroke":sl=1;break;case 2:case"fillThenStroke":sl=2;break;case 3:case"invisible":sl=3;break;case 4:case"fillAndAddForClipping":sl=4;break;case 5:case"strokeAndAddPathForClipping":sl=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":sl=6;break;case 7:case"addToPathForClipping":sl=7}var xv=sg.usedRenderingMode!==void 0?sg.usedRenderingMode:-1;sl!==-1?Sn+=sl+` Tr
`:xv!==-1&&(Sn+=`0 Tr
`),sl!==-1&&(sg.usedRenderingMode=sl),F=tt.align||"left";var pc,ji=ne*ta,Xf=Yt.internal.pageSize.getWidth(),ig=ft[mt];ie=tt.charSpace||Ud,pe=tt.maxWidth||0,Pe=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var zd=[],Yf=function(Nn){return Yt.getStringUnitWidth(Nn,{font:ig,charSpace:ie,fontSize:ne,doKerning:!1})*ne/ha};if(Object.prototype.toString.call(te)==="[object Array]"){var Bo;Xt=ws(te),F!=="left"&&(pc=Xt.map(Yf));var $i,Jf=0;if(F==="right"){Ce-=pc[0],te=[],ti=Xt.length;for(var il=0;il<ti;il++)il===0?($i=io(Ce),Bo=Fs(qe)):($i=S(Jf-pc[il]),Bo=-ji),te.push([Xt[il],$i,Bo]),Jf=pc[il]}else if(F==="center"){Ce-=pc[0]/2,te=[],ti=Xt.length;for(var eu=0;eu<ti;eu++)eu===0?($i=io(Ce),Bo=Fs(qe)):($i=S((Jf-pc[eu])/2),Bo=-ji),te.push([Xt[eu],$i,Bo]),Jf=pc[eu]}else if(F==="left"){te=[],ti=Xt.length;for(var Ku=0;Ku<ti;Ku++)te.push(Xt[Ku])}else if(F==="justify"&&ig.encoding==="Identity-H"){te=[],ti=Xt.length,pe=pe!==0?pe:Xf;for(var tu=0,hs=0;hs<ti;hs++)if(Bo=hs===0?Fs(qe):-ji,$i=hs===0?io(Ce):tu,hs<ti-1){var ru=S((pe-pc[hs])/(Xt[hs].split(" ").length-1)),Rs=Xt[hs].split(" ");te.push([Rs[0]+" ",$i,Bo]),tu=0;for(var ol=1;ol<Rs.length;ol++){var g0=(Yf(Rs[ol-1]+" "+Rs[ol])-Yf(Rs[ol]))*ha+ru;ol==Rs.length-1?te.push([Rs[ol],g0,0]):te.push([Rs[ol]+" ",g0,0]),tu-=g0}}else te.push([Xt[hs],$i,Bo]);te.push(["",tu,0])}else{if(F!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(te=[],ti=Xt.length,pe=pe!==0?pe:Xf,hs=0;hs<ti;hs++)Bo=hs===0?Fs(qe):-ji,$i=hs===0?io(Ce):0,hs<ti-1?zd.push(T(S((pe-pc[hs])/(Xt[hs].split(" ").length-1)))):zd.push(0),te.push([Xt[hs],$i,Bo])}}var Wu=typeof tt.R2L=="boolean"?tt.R2L:ge;Wu===!0&&(te=al(te,function(Nn,Cn,Pa){return[Nn.split("").reverse().join(""),Cn,Pa]})),It={text:te,x:Ce,y:qe,options:tt,mutex:{pdfEscape:Ur,activeFontKey:mt,fonts:ft,activeFontSize:ne}},dr.publish("postProcessText",It),te=It.text,nn=It.mutex.isHex||!1;var ZA=ft[mt].encoding;ZA!=="WinAnsiEncoding"&&ZA!=="StandardEncoding"||(te=al(te,function(Nn,Cn,Pa){return[mc(Nn),Cn,Pa]})),Xt=ws(te),te=[];for(var Zf,eh,th,x0=0,em=1,rh=Array.isArray(Xt[0])?em:x0,Gd="",v0=function(Nn,Cn,Pa){var Ns="";return Pa instanceof ar?(Pa=typeof tt.angle=="number"?fn(Pa,new ar(1,0,0,1,Nn,Cn)):fn(new ar(1,0,0,1,Nn,Cn),Pa),C===N.ADVANCED&&(Pa=fn(new ar(1,0,0,-1,0,0),Pa)),Ns=Pa.join(" ")+` Tm
`):Ns=T(Nn)+" "+T(Cn)+` Td
`,Ns},As=0;As<Xt.length;As++){switch(Gd="",rh){case em:th=(nn?"<":"(")+Xt[As][0]+(nn?">":")"),Zf=parseFloat(Xt[As][1]),eh=parseFloat(Xt[As][2]);break;case x0:th=(nn?"<":"(")+Xt[As]+(nn?">":")"),Zf=io(Ce),eh=Fs(qe)}zd!==void 0&&zd[As]!==void 0&&(Gd=zd[As]+` Tw
`),As===0?te.push(Gd+v0(Zf,eh,yt)+th):rh===x0?te.push(Gd+th):rh===em&&te.push(Gd+v0(Zf,eh,yt)+th)}te=rh===x0?te.join(` Tj
T* `):te.join(` Tj
`),te+=` Tj
`;var Gl=`BT
/`;return Gl+=mt+" "+ne+` Tf
`,Gl+=T(ne*ta)+` TL
`,Gl+=Jc+`
`,Gl+=Sn,Gl+=te,fe(Gl+="ET"),A[mt]=!0,Yt};var KA=m.__private__.clip=m.clip=function(te){return fe(te==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return KA("evenodd")},m.__private__.discardPath=m.discardPath=function(){return fe("n"),this};var ao=m.__private__.isValidStyle=function(te){var Ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(te)!==-1&&(Ce=!0),Ce};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(te){return ao(te)&&(u=te),this};var tl=m.__private__.getStyle=m.getStyle=function(te){var Ce=u;switch(te){case"D":case"S":Ce="S";break;case"F":Ce="f";break;case"FD":case"DF":Ce="B";break;case"f":case"f*":case"B":case"B*":Ce=te}return Ce},To=m.close=function(){return fe("h"),this};m.stroke=function(){return fe("S"),this},m.fill=function(te){return fc("f",te),this},m.fillEvenOdd=function(te){return fc("f*",te),this},m.fillStroke=function(te){return fc("B",te),this},m.fillStrokeEvenOdd=function(te){return fc("B*",te),this};var fc=function(te,Ce){Ia(Ce)==="object"?Yc(Ce,te):fe(te)},rl=function(te){te===null||C===N.ADVANCED&&te===void 0||(te=tl(te),fe(te))};function Uu(te,Ce,qe,tt,ct){var It=new Hb(Ce||this.boundingBox,qe||this.xStep,tt||this.yStep,this.gState,ct||this.matrix);It.stream=this.stream;var Xt=te+"$$"+this.cloneIndex+++"$$";return mn(Xt,It),It}var Yc=function(te,Ce){var qe=St[te.key],tt=Ct[qe];if(tt instanceof Gg)fe("q"),fe(d0(Ce)),tt.gState&&m.setGState(tt.gState),fe(te.matrix.toString()+" cm"),fe("/"+qe+" sh"),fe("Q");else if(tt instanceof Hb){var ct=new ar(1,0,0,-1,0,oo());te.matrix&&(ct=ct.multiply(te.matrix||$r),qe=Uu.call(tt,te.key,te.boundingBox,te.xStep,te.yStep,ct).id),fe("q"),fe("/Pattern cs"),fe("/"+qe+" scn"),tt.gState&&m.setGState(tt.gState),fe(Ce),fe("Q")}},d0=function(te){switch(te){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},nl=m.moveTo=function(te,Ce){return fe(T(S(te))+" "+T(U(Ce))+" m"),this},so=m.lineTo=function(te,Ce){return fe(T(S(te))+" "+T(U(Ce))+" l"),this},hc=m.curveTo=function(te,Ce,qe,tt,ct,It){return fe([T(S(te)),T(U(Ce)),T(S(qe)),T(U(tt)),T(S(ct)),T(U(It)),"c"].join(" ")),this};m.__private__.line=m.line=function(te,Ce,qe,tt,ct){if(isNaN(te)||isNaN(Ce)||isNaN(qe)||isNaN(tt)||!ao(ct))throw new Error("Invalid arguments passed to jsPDF.line");return C===N.COMPAT?this.lines([[qe-te,tt-Ce]],te,Ce,[1,1],ct||"S"):this.lines([[qe-te,tt-Ce]],te,Ce,[1,1]).stroke()},m.__private__.lines=m.lines=function(te,Ce,qe,tt,ct,It){var Xt,lr,F,ie,pe,Pe,lt,yt,Yt,Qr,Sn,nn;if(typeof te=="number"&&(nn=qe,qe=Ce,Ce=te,te=nn),tt=tt||[1,1],It=It||!1,isNaN(Ce)||isNaN(qe)||!Array.isArray(te)||!Array.isArray(tt)||!ao(ct)||typeof It!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(nl(Ce,qe),Xt=tt[0],lr=tt[1],ie=te.length,Qr=Ce,Sn=qe,F=0;F<ie;F++)(pe=te[F]).length===2?(Qr=pe[0]*Xt+Qr,Sn=pe[1]*lr+Sn,so(Qr,Sn)):(Pe=pe[0]*Xt+Qr,lt=pe[1]*lr+Sn,yt=pe[2]*Xt+Qr,Yt=pe[3]*lr+Sn,Qr=pe[4]*Xt+Qr,Sn=pe[5]*lr+Sn,hc(Pe,lt,yt,Yt,Qr,Sn));return It&&To(),rl(ct),this},m.path=function(te){for(var Ce=0;Ce<te.length;Ce++){var qe=te[Ce],tt=qe.c;switch(qe.op){case"m":nl(tt[0],tt[1]);break;case"l":so(tt[0],tt[1]);break;case"c":hc.apply(this,tt);break;case"h":To()}}return this},m.__private__.rect=m.rect=function(te,Ce,qe,tt,ct){if(isNaN(te)||isNaN(Ce)||isNaN(qe)||isNaN(tt)||!ao(ct))throw new Error("Invalid arguments passed to jsPDF.rect");return C===N.COMPAT&&(tt=-tt),fe([T(S(te)),T(U(Ce)),T(S(qe)),T(S(tt)),"re"].join(" ")),rl(ct),this},m.__private__.triangle=m.triangle=function(te,Ce,qe,tt,ct,It,Xt){if(isNaN(te)||isNaN(Ce)||isNaN(qe)||isNaN(tt)||isNaN(ct)||isNaN(It)||!ao(Xt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[qe-te,tt-Ce],[ct-qe,It-tt],[te-ct,Ce-It]],te,Ce,[1,1],Xt,!0),this},m.__private__.roundedRect=m.roundedRect=function(te,Ce,qe,tt,ct,It,Xt){if(isNaN(te)||isNaN(Ce)||isNaN(qe)||isNaN(tt)||isNaN(ct)||isNaN(It)||!ao(Xt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lr=4/3*(Math.SQRT2-1);return ct=Math.min(ct,.5*qe),It=Math.min(It,.5*tt),this.lines([[qe-2*ct,0],[ct*lr,0,ct,It-It*lr,ct,It],[0,tt-2*It],[0,It*lr,-ct*lr,It,-ct,It],[2*ct-qe,0],[-ct*lr,0,-ct,-It*lr,-ct,-It],[0,2*It-tt],[0,-It*lr,ct*lr,-It,ct,-It]],te+ct,Ce,[1,1],Xt,!0),this},m.__private__.ellipse=m.ellipse=function(te,Ce,qe,tt,ct){if(isNaN(te)||isNaN(Ce)||isNaN(qe)||isNaN(tt)||!ao(ct))throw new Error("Invalid arguments passed to jsPDF.ellipse");var It=4/3*(Math.SQRT2-1)*qe,Xt=4/3*(Math.SQRT2-1)*tt;return nl(te+qe,Ce),hc(te+qe,Ce-Xt,te+It,Ce-tt,te,Ce-tt),hc(te-It,Ce-tt,te-qe,Ce-Xt,te-qe,Ce),hc(te-qe,Ce+Xt,te-It,Ce+tt,te,Ce+tt),hc(te+It,Ce+tt,te+qe,Ce+Xt,te+qe,Ce),rl(ct),this},m.__private__.circle=m.circle=function(te,Ce,qe,tt){if(isNaN(te)||isNaN(Ce)||isNaN(qe)||!ao(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(te,Ce,qe,qe,tt)},m.setFont=function(te,Ce,qe){return qe&&(Ce=I(Ce,qe)),mt=el(te,Ce,{disableWarning:!1}),this};var Ps=m.__private__.getFont=m.getFont=function(){return ft[el.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var te,Ce,qe={};for(te in vt)if(vt.hasOwnProperty(te))for(Ce in qe[te]=[],vt[te])vt[te].hasOwnProperty(Ce)&&qe[te].push(Ce);return qe},m.addFont=function(te,Ce,qe,tt,ct){var It=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&It.indexOf(arguments[3])!==-1?ct=arguments[3]:arguments[3]&&It.indexOf(arguments[3])==-1&&(qe=I(qe,tt)),ct=ct||"Identity-H",$l.call(this,te,Ce,qe,ct)};var kn,Hu=e.lineWidth||.200025,Ac=m.__private__.getLineWidth=m.getLineWidth=function(){return Hu},f0=m.__private__.setLineWidth=m.setLineWidth=function(te){return Hu=te,fe(T(S(te))+" w"),this};m.__private__.setLineDash=Tr.API.setLineDash=Tr.API.setLineDashPattern=function(te,Ce){if(te=te||[],Ce=Ce||0,isNaN(Ce)||!Array.isArray(te))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return te=te.map(function(qe){return T(S(qe))}).join(" "),Ce=T(S(Ce)),fe("["+te+"] "+Ce+" d"),this};var Ld=m.__private__.getLineHeight=m.getLineHeight=function(){return ne*kn};m.__private__.getLineHeight=m.getLineHeight=function(){return ne*kn};var Md=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(te){return typeof(te=te||1.15)=="number"&&(kn=te),this},zl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return kn};Md(e.lineHeight);var io=m.__private__.getHorizontalCoordinate=function(te){return S(te)},Fs=m.__private__.getVerticalCoordinate=function(te){return C===N.ADVANCED?te:Ft[O].mediaBox.topRightY-Ft[O].mediaBox.bottomLeftY-S(te)},WA=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(te){return T(io(te))},Qu=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(te){return T(Fs(te))},Vi=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return we(Vi)},m.__private__.setStrokeColor=m.setDrawColor=function(te,Ce,qe,tt){return Vi=xe({ch1:te,ch2:Ce,ch3:qe,ch4:tt,pdfColorType:"draw",precision:2}),fe(Vi),this};var Vu=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return we(Vu)},m.__private__.setFillColor=m.setFillColor=function(te,Ce,qe,tt){return Vu=xe({ch1:te,ch2:Ce,ch3:qe,ch4:tt,pdfColorType:"fill",precision:2}),fe(Vu),this};var Jc=e.textColor||"0 g",$f=m.__private__.getTextColor=m.getTextColor=function(){return we(Jc)};m.__private__.setTextColor=m.setTextColor=function(te,Ce,qe,tt){return Jc=xe({ch1:te,ch2:Ce,ch3:qe,ch4:tt,pdfColorType:"text",precision:3}),this};var Ud=e.charSpace,zf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Ud||0)};m.__private__.setCharSpace=m.setCharSpace=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ud=te,this};var h0=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(te){var Ce=m.CapJoinStyles[te];if(Ce===void 0)throw new Error("Line cap style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return h0=Ce,fe(Ce+" J"),this};var Hd=0;m.__private__.setLineJoin=m.setLineJoin=function(te){var Ce=m.CapJoinStyles[te];if(Ce===void 0)throw new Error("Line join style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hd=Ce,fe(Ce+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(te){if(te=te||0,isNaN(te))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(T(S(te))+" M"),this},m.GState=q_,m.setGState=function(te){(te=typeof te=="string"?ot[nr[te]]:$u(null,te)).equals(fr)||(fe("/"+te.id+" gs"),fr=te)};var $u=function(te,Ce){if(!te||!nr[te]){var qe=!1;for(var tt in ot)if(ot.hasOwnProperty(tt)&&ot[tt].equals(Ce)){qe=!0;break}if(qe)Ce=ot[tt];else{var ct="GS"+(Object.keys(ot).length+1).toString(10);ot[ct]=Ce,Ce.id=ct}return te&&(nr[te]=Ce.id),dr.publish("addGState",Ce),Ce}};m.addGState=function(te,Ce){return $u(te,Ce),this},m.saveGraphicsState=function(){return fe("q"),et.push({key:mt,size:ne,color:Jc}),this},m.restoreGraphicsState=function(){fe("Q");var te=et.pop();return mt=te.key,ne=te.size,Jc=te.color,fr=null,this},m.setCurrentTransformationMatrix=function(te){return fe(te.toString()+" cm"),this},m.comment=function(te){return fe("#"+te),this};var Qd=function(te,Ce){var qe=te||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return qe},set:function(It){isNaN(It)||(qe=parseFloat(It))}});var tt=Ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(It){isNaN(It)||(tt=parseFloat(It))}});var ct="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ct},set:function(It){ct=It.toString()}}),this},Gf=function(te,Ce,qe,tt){Qd.call(this,te,Ce),this.type="rect";var ct=qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ct},set:function(Xt){isNaN(Xt)||(ct=parseFloat(Xt))}});var It=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return It},set:function(Xt){isNaN(Xt)||(It=parseFloat(Xt))}}),this},Vd=function(){this.page=Zt,this.currentPage=O,this.pages=ve.slice(0),this.pagesContext=Ft.slice(0),this.x=He,this.y=Tt,this.matrix=Ie,this.width=Gu(O),this.height=oo(O),this.outputDestination=Ee,this.id="",this.objectNumber=-1};Vd.prototype.restore=function(){Zt=this.page,O=this.currentPage,Ft=this.pagesContext,ve=this.pages,He=this.x,Tt=this.y,Ie=this.matrix,$d(O,this.width),qf(O,this.height),Ee=this.outputDestination};var zu=function(te,Ce,qe,tt,ct){qa.push(new Vd),Zt=O=0,ve=[],He=te,Tt=Ce,Ie=ct,Un([qe,tt])},XA=function(te){if(Vn[te])qa.pop().restore();else{var Ce=new Vd,qe="Xo"+(Object.keys(_r).length+1).toString(10);Ce.id=qe,Vn[te]=qe,_r[qe]=Ce,dr.publish("addFormObject",Ce),qa.pop().restore()}};for(var Zc in m.beginFormObject=function(te,Ce,qe,tt,ct){return zu(te,Ce,qe,tt,ct),this},m.endFormObject=function(te){return XA(te),this},m.doFormObject=function(te,Ce){var qe=_r[Vn[te]];return fe("q"),fe(Ce.toString()+" cm"),fe("/"+qe.id+" Do"),fe("Q"),this},m.getFormObject=function(te){var Ce=_r[Vn[te]];return{x:Ce.x,y:Ce.y,width:Ce.width,height:Ce.height,matrix:Ce.matrix}},m.save=function(te,Ce){return te=te||"generated.pdf",(Ce=Ce||{}).returnPromise=Ce.returnPromise||!1,Ce.returnPromise===!1?(Lg(Vf(Kc()),te),typeof Lg.unload=="function"&&Xr.setTimeout&&setTimeout(Lg.unload,911),this):new Promise(function(qe,tt){try{var ct=Lg(Vf(Kc()),te);typeof Lg.unload=="function"&&Xr.setTimeout&&setTimeout(Lg.unload,911),qe(ct)}catch(It){tt(It.message)}})},Tr.API)Tr.API.hasOwnProperty(Zc)&&(Zc==="events"&&Tr.API.events.length?function(te,Ce){var qe,tt,ct;for(ct=Ce.length-1;ct!==-1;ct--)qe=Ce[ct][0],tt=Ce[ct][1],te.subscribe.apply(te,[qe].concat(typeof tt=="function"?[tt]:tt))}(dr,Tr.API.events):m[Zc]=Tr.API[Zc]);var Gu=m.getPageWidth=function(te){return(Ft[te=te||O].mediaBox.topRightX-Ft[te].mediaBox.bottomLeftX)/We},$d=m.setPageWidth=function(te,Ce){Ft[te].mediaBox.topRightX=Ce*We+Ft[te].mediaBox.bottomLeftX},oo=m.getPageHeight=function(te){return(Ft[te=te||O].mediaBox.topRightY-Ft[te].mediaBox.bottomLeftY)/We},qf=m.setPageHeight=function(te,Ce){Ft[te].mediaBox.topRightY=Ce*We+Ft[te].mediaBox.bottomLeftY};return m.internal={pdfEscape:Ur,getStyle:tl,getFont:Ps,getFontSize:me,getCharSpace:zf,getTextColor:$f,getLineHeight:Ld,getLineHeightFactor:zl,getLineWidth:Ac,write:ye,getHorizontalCoordinate:io,getVerticalCoordinate:Fs,getCoordinateString:WA,getVerticalCoordinateString:Qu,collections:{},newObject:In,newAdditionalObject:$e,newObjectDeferred:$n,newObjectDeferredBegin:ke,getFilters:De,putStream:Ge,events:dr,scaleFactor:We,pageSize:{getWidth:function(){return Gu(O)},setWidth:function(te){$d(O,te)},getHeight:function(){return oo(O)},setHeight:function(te){qf(O,te)}},encryptionOptions:d,encryption:wa,getEncryptor:Xc,output:Wc,getNumberOfPages:Pn,pages:ve,out:fe,f2:M,f3:P,getPageInfo:uc,getPageInfoByObjId:Hr,getCurrentPageInfo:dc,getPDFVersion:x,Point:Qd,Rectangle:Gf,Matrix:ar,hasHotfix:cc},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Gu(O)},set:function(te){$d(O,te)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return oo(O)},set:function(te){qf(O,te)},enumerable:!0,configurable:!0}),kr.call(m,se),mt="F1",Ei(a,r),dr.publish("initialized"),m}Sb.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Sb.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sb.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Sb.prototype.processOwnerPassword=function(e,t){return YR(XR(t).substr(0,5),e)},Sb.prototype.encryptor=function(e,t){var r=XR(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return YR(r,n)}},q_.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ia(e)!==Ia(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Tr.API={events:[]},Tr.version="2.5.2";var Vs=Tr.API,K9=1,mv=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tb=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},cn=function(e){return e.toFixed(2)},Dm=function(e){return e.toFixed(5)};Vs.__acroform__={};var qc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},JJ=function(e){return e*K9},wh=function(e){var t=new vAe,r=Er.internal.getHeight(e)||0,n=Er.internal.getWidth(e)||0;return t.BBox=[0,0,Number(cn(n)),Number(cn(r))],t},Wst=Vs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Xst=Vs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Yst=Vs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Ai=Vs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Yst(e,t-1)},mi=Vs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Wst(e,t-1)},pi=Vs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Xst(e,t-1)},Jst=Vs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(cn(c.lowerLeft_X)),Number(cn(c.lowerLeft_Y)),Number(cn(c.upperRight_X)),Number(cn(c.upperRight_Y))]},Zst=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=JR(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+cn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=wh(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},JR=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,o=Er.internal.getHeight(e)||0;o=o<0?-o:o;var l=Er.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,S,L){if(P+1<a.length){var U=S+" "+a[P+1][0];return Bk(U,e,L).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=Bk("3",e,s).height,A=e.multiline?o-s:(o-f)/2,m=A+=2,g=0,x=0,v=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Bk(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",N=0,C=0;C<a.length;C++)if(a.hasOwnProperty(C)){var _=!1;if(a[C].length!==1&&v!==a[C].length-1){if((f+2)*(N+2)+2>o)continue e;y+=a[C][v],_=!0,x=C,C--}else{y=(y+=a[C][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var j=parseInt(C),I=c(j,y,s),T=C>=a.length-1;if(I&&!T){y+=" ",v=0;continue}if(I||T){if(T)x=j;else if(e.multiline&&(f+2)*(N+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(N+2)+2>o)continue e;x=j}}for(var k="",B=g;B<=x;B++){var M=a[B];if(e.multiline){if(B===x){k+=M[v]+" ",v=(v+1)%M.length;continue}if(B===g){k+=M[M.length-1]+" ";continue}}k+=M[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,d=Bk(k,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=cn(u)+" "+cn(m)+` Td
`,t+="("+mv(k)+`) Tj
`,t+=-cn(u)+` 0 Td
`,m=-(s+2),d=0,g=_?x:x+1,N++,y=""}break}return n.text=t,n.fontSize=s,n},Bk=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},eit={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},tit=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},rit=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),Ia(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},nit=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Mf.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(eit)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");K9=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new bAe,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&tit(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=Jst(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Er.createDefaultAppearanceStream(l),Ia(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=Zst(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var m=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&rit(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},xAe=Vs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),Ia(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+mv(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xO=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+mv(n(e))+")"},Lh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Lh.prototype.toString=function(){return this.objId+" 0 R"},Lh.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Lh.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:xAe(a,this.objId,this.scope)}):a instanceof Lh?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var vAe=function(){Lh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};qc(vAe,Lh);var bAe=function(){Lh.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+mv(r(e))+")"}},set:function(r){e=r}})};qc(bAe,Lh);var Mf=function e(){Lh.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ai(t,3)},set:function(y){y?this.F=mi(t,3):this.F=pi(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof K_)return;s="FieldObject"+e.FieldNum++}var y=function(N){return N};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+mv(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/K9:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof K_||this instanceof wx))return xO(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof xo?A:xO(A,this.objId,this.scope)},set:function(y){y=y.toString(),A=this instanceof xo?y:y.substr(0,1)==="("?tb(y.substr(1,y.length-2)):tb(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xo?tb(A.substr(1,A.length-1)):A},set:function(y){y=y.toString(),A=this instanceof xo?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof xo?m:xO(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof xo?y:y.substr(0,1)==="("?tb(y.substr(1,y.length-2)):tb(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xo?tb(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof xo?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,1)},set:function(y){y?this.Ff=mi(this.Ff,1):this.Ff=pi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,2)},set:function(y){y?this.Ff=mi(this.Ff,2):this.Ff=pi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,3)},set:function(y){y?this.Ff=mi(this.Ff,3):this.Ff=pi(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};qc(Mf,Lh);var A1=function(){Mf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return xAe(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,18)},set:function(r){r?this.Ff=mi(this.Ff,18):this.Ff=pi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=mi(this.Ff,19):this.Ff=pi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,20)},set:function(r){r?(this.Ff=mi(this.Ff,20),t.sort()):this.Ff=pi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,22)},set:function(r){r?this.Ff=mi(this.Ff,22):this.Ff=pi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,23)},set:function(r){r?this.Ff=mi(this.Ff,23):this.Ff=pi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,27)},set:function(r){r?this.Ff=mi(this.Ff,27):this.Ff=pi(this.Ff,27)}}),this.hasAppearanceStream=!1};qc(A1,Mf);var m1=function(){A1.call(this),this.fontName="helvetica",this.combo=!1};qc(m1,A1);var p1=function(){m1.call(this),this.combo=!0};qc(p1,m1);var MS=function(){p1.call(this),this.edit=!0};qc(MS,p1);var xo=function(){Mf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,15)},set:function(r){r?this.Ff=mi(this.Ff,15):this.Ff=pi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,16)},set:function(r){r?this.Ff=mi(this.Ff,16):this.Ff=pi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,17)},set:function(r){r?this.Ff=mi(this.Ff,17):this.Ff=pi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,26)},set:function(r){r?this.Ff=mi(this.Ff,26):this.Ff=pi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+mv(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Ia(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};qc(xo,Mf);var US=function(){xo.call(this),this.pushButton=!0};qc(US,xo);var g1=function(){xo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};qc(g1,xo);var K_=function(){var e,t;Mf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+mv(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Ia(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Er.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};qc(K_,Mf),g1.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},g1.prototype.createOption=function(e){var t=new K_;return t.Parent=this,t.optionName=e,this.Kids.push(t),ait.call(this.scope,t),t};var HS=function(){xo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Er.CheckBox.createAppearanceStream()};qc(HS,xo);var wx=function(){Mf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,13)},set:function(t){t?this.Ff=mi(this.Ff,13):this.Ff=pi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,21)},set:function(t){t?this.Ff=mi(this.Ff,21):this.Ff=pi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,23)},set:function(t){t?this.Ff=mi(this.Ff,23):this.Ff=pi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,24)},set:function(t){t?this.Ff=mi(this.Ff,24):this.Ff=pi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,25)},set:function(t){t?this.Ff=mi(this.Ff,25):this.Ff=pi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,26)},set:function(t){t?this.Ff=mi(this.Ff,26):this.Ff=pi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};qc(wx,Mf);var QS=function(){wx.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,14)},set:function(e){e?this.Ff=mi(this.Ff,14):this.Ff=pi(this.Ff,14)}}),this.password=!0};qc(QS,wx);var Er={CheckBox:{createAppearanceStream:function(){return{N:{On:Er.CheckBox.YesNormal},D:{On:Er.CheckBox.YesPushDown,Off:Er.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=wh(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=JR(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+cn(Er.internal.getWidth(e))+" "+cn(Er.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+cn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=wh(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=Er.internal.getHeight(e),o=Er.internal.getWidth(e),l=JR(e,e.caption);return a.push("1 g"),a.push("0 0 "+cn(o)+" "+cn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+cn(o-1)+" "+cn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+cn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=wh(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+cn(Er.internal.getWidth(e))+" "+cn(Er.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Er.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Er.RadioButton.Circle.YesNormal,t.D[e]=Er.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=wh(e);t.scope=e.scope;var r=[],n=Er.internal.getWidth(e)<=Er.internal.getHeight(e)?Er.internal.getWidth(e)/4:Er.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Er.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Dm(Er.internal.getWidth(e)/2)+" "+Dm(Er.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=wh(e);t.scope=e.scope;var r=[],n=Er.internal.getWidth(e)<=Er.internal.getHeight(e)?Er.internal.getWidth(e)/4:Er.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Er.internal.Bezier_C).toFixed(5)),o=Number((n*Er.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Dm(Er.internal.getWidth(e)/2)+" "+Dm(Er.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Dm(Er.internal.getWidth(e)/2)+" "+Dm(Er.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=wh(e);t.scope=e.scope;var r=[],n=Er.internal.getWidth(e)<=Er.internal.getHeight(e)?Er.internal.getWidth(e)/4:Er.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Er.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Dm(Er.internal.getWidth(e)/2)+" "+Dm(Er.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Er.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Er.RadioButton.Cross.YesNormal,t.D[e]=Er.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=wh(e);t.scope=e.scope;var r=[],n=Er.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+cn(Er.internal.getWidth(e)-2)+" "+cn(Er.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(cn(n.x1.x)+" "+cn(n.x1.y)+" m"),r.push(cn(n.x2.x)+" "+cn(n.x2.y)+" l"),r.push(cn(n.x4.x)+" "+cn(n.x4.y)+" m"),r.push(cn(n.x3.x)+" "+cn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=wh(e);t.scope=e.scope;var r=Er.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+cn(Er.internal.getWidth(e))+" "+cn(Er.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+cn(Er.internal.getWidth(e)-2)+" "+cn(Er.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(cn(r.x1.x)+" "+cn(r.x1.y)+" m"),n.push(cn(r.x2.x)+" "+cn(r.x2.y)+" l"),n.push(cn(r.x4.x)+" "+cn(r.x4.y)+" m"),n.push(cn(r.x3.x)+" "+cn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=wh(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+cn(Er.internal.getWidth(e))+" "+cn(Er.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Er.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Er.internal.getWidth(e),r=Er.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Er.internal.getWidth=function(e){var t=0;return Ia(e)==="object"&&(t=JJ(e.Rect[2])),t},Er.internal.getHeight=function(e){var t=0;return Ia(e)==="object"&&(t=JJ(e.Rect[3])),t};var ait=Vs.addField=function(e){if(nit(this,e),!(e instanceof Mf))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Vs.AcroFormChoiceField=A1,Vs.AcroFormListBox=m1,Vs.AcroFormComboBox=p1,Vs.AcroFormEditBox=MS,Vs.AcroFormButton=xo,Vs.AcroFormPushButton=US,Vs.AcroFormRadioButton=g1,Vs.AcroFormCheckBox=HS,Vs.AcroFormTextField=wx,Vs.AcroFormPasswordField=QS,Vs.AcroFormAppearance=Er,Vs.AcroForm={ChoiceField:A1,ListBox:m1,ComboBox:p1,EditBox:MS,Button:xo,PushButton:US,RadioButton:g1,CheckBox:HS,TextField:wx,PasswordField:QS,Appearance:Er},Tr.AcroForm={ChoiceField:A1,ListBox:m1,ComboBox:p1,EditBox:MS,Button:xo,PushButton:US,RadioButton:g1,CheckBox:HS,TextField:wx,PasswordField:QS,Appearance:Er};Tr.AcroForm;function yAe(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,S){var L,U,q,H,z,W=t;if((S=S||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(I(P))for(z in r)for(q=r[z],L=0;L<q.length;L+=1){for(H=!0,U=0;U<q[L].length;U+=1)if(q[L][U]!==void 0&&q[L][U]!==P[U]){H=!1;break}if(H===!0){W=z;break}}else for(z in r)for(q=r[z],L=0;L<q.length;L+=1){for(H=!0,U=0;U<q[L].length;U+=1)if(q[L][U]!==void 0&&q[L][U]!==P.charCodeAt(U)){H=!1;break}if(H===!0){W=z;break}}return W===t&&S!==t&&(W=S),W},a=function P(S){for(var L=this.internal.write,U=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:S.width}),H.push({key:"Height",value:S.height}),S.colorSpace===v.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===v.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var z="",W=0,Z=S.transparency.length;W<Z;W++)z+=S.transparency[W]+" "+S.transparency[W]+" ";H.push({key:"Mask",value:"["+z+"]"})}S.sMask!==void 0&&H.push({key:"SMask",value:S.objectId+1+" 0 R"});var V=S.filter!==void 0?["/"+S.filter]:void 0;if(U({data:S.data,additionalKeyValues:H,alreadyAppliedFilters:V,objectId:S.objectId}),L("endobj"),"sMask"in S&&S.sMask!==void 0){var Y="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,R={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:Y,data:S.sMask};"filter"in S&&(R.filter=S.filter),P.call(this,R)}if(S.colorSpace===v.INDEXED){var O=this.internal.newObject();U({data:k(new Uint8Array(S.palette)),objectId:O}),L("endobj")}},s=function(){var P=this.internal.collections.addImage_images;for(var S in P)a.call(this,P[S])},o=function(){var P,S=this.internal.collections.addImage_images,L=this.internal.write;for(var U in S)L("/I"+(P=S[U]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(P){return typeof e["process"+P.toUpperCase()]=="function"},f=function(P){return Ia(P)==="object"&&P.nodeType===1},A=function(P,S){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var L=""+P.getAttribute("src");if(L.indexOf("data:image/")===0)return dN(unescape(L).split("base64,").pop());var U=e.loadFile(L,!0);if(U!==void 0)return U}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var q;switch(S){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;case"JPEG":case"JPG":default:q="image/jpeg"}return dN(P.toDataURL(q,1).split("base64,").pop())}},m=function(P){var S=this.internal.collections.addImage_images;if(S){for(var L in S)if(P===S[L].alias)return S[L]}},g=function(P,S,L){return P||S||(P=-96,S=-96),P<0&&(P=-1*L.width*72/P/this.internal.scaleFactor),S<0&&(S=-1*L.height*72/S/this.internal.scaleFactor),P===0&&(P=S*L.width/L.height),S===0&&(S=P*L.height/L.width),[P,S]},x=function(P,S,L,U,q,H){var z=g.call(this,L,U,q),W=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,V=c.call(this);if(L=z[0],U=z[1],V[q.index]=q,H){H*=Math.PI/180;var Y=Math.cos(H),R=Math.sin(H),O=function(J){return J.toFixed(4)},K=[O(Y),O(R),O(-1*R),O(Y),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,W(P),Z(S+U),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([W(L),"0","0",W(U),"0","0","cm"].join(" "))):this.internal.write([W(L),"0","0",W(U),W(P),Z(S+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(P){var S,L,U=0;if(typeof P=="string")for(L=P.length,S=0;S<L;S++)U=(U<<5)-U+P.charCodeAt(S),U|=0;else if(I(P))for(L=P.byteLength/2,S=0;S<L;S++)U=(U<<5)-U+P[S],U|=0;return U},C=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var S=!0;return P.length===0&&(S=!1),P.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(S=!1),S},_=e.__addimage__.extractImageFromDataUrl=function(P){var S=(P=P||"").split("base64,"),L=null;if(S.length===2){var U=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(S[0]);Array.isArray(U)&&(L={mimeType:U[1],charset:U[2],data:S[1]})}return L},j=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return j()&&P instanceof ArrayBuffer};var I=e.__addimage__.isArrayBufferView=function(P){return j()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},T=e.__addimage__.binaryStringToUint8Array=function(P){for(var S=P.length,L=new Uint8Array(S),U=0;U<S;U++)L[U]=P.charCodeAt(U);return L},k=e.__addimage__.arrayBufferToBinaryString=function(P){for(var S="",L=I(P)?P:new Uint8Array(P),U=0;U<L.length;U+=8192)S+=String.fromCharCode.apply(null,L.subarray(U,U+8192));return S};e.addImage=function(){var P,S,L,U,q,H,z,W,Z;if(typeof arguments[1]=="number"?(S=t,L=arguments[1],U=arguments[2],q=arguments[3],H=arguments[4],z=arguments[5],W=arguments[6],Z=arguments[7]):(S=arguments[1],L=arguments[2],U=arguments[3],q=arguments[4],H=arguments[5],z=arguments[6],W=arguments[7],Z=arguments[8]),Ia(P=arguments[0])==="object"&&!f(P)&&"imageData"in P){var V=P;P=V.imageData,S=V.format||S||t,L=V.x||L||0,U=V.y||U||0,q=V.w||V.width||q,H=V.h||V.height||H,z=V.alias||z,W=V.compression||W,Z=V.rotation||V.angle||Z}var Y=this.internal.getFilters();if(W===void 0&&Y.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(L)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var R=B.call(this,P,S,z,W);return x.call(this,L,U,q,H,R,Z),this};var B=function(P,S,L,U){var q,H,z;if(typeof P=="string"&&n(P)===t){P=unescape(P);var W=M(P,!1);(W!==""||(W=e.loadFile(P,!0))!==void 0)&&(P=W)}if(f(P)&&(P=A(P,S)),S=n(P,S),!d(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((z=L)==null||z.length===0)&&(L=function(Z){return typeof Z=="string"||I(Z)?N(Z):I(Z.data)?N(Z.data):null}(P)),(q=m.call(this,L))||(j()&&(P instanceof Uint8Array||S==="RGBA"||(H=P,P=T(P))),q=this["process"+S.toUpperCase()](P,u.call(this),L,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in e.image_compression?Z:y.NONE}(U),H)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},M=e.__addimage__.convertBase64ToBinaryString=function(P,S){var L;S=typeof S!="boolean"||S;var U,q="";if(typeof P=="string"){U=(L=_(P))!==null?L.data:P;try{q=dN(U)}catch(H){if(S)throw C(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};e.getImageProperties=function(P){var S,L,U="";if(f(P)&&(P=A(P)),typeof P=="string"&&n(P)===t&&((U=M(P,!1))===""&&(U=e.loadFile(P)||""),P=U),L=n(P),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(!j()||P instanceof Uint8Array||(P=T(P)),!(S=this["process"+L.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=L,S}})(Tr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Tr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var A=0;A<u.length;A++){n=u[A];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),N=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(y(n.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(y(N))+") >>",x.content=s;var C=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+C,n.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},e.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Tr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,N="",C=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(C++,typeof(y=y[x.charCodeAt(v)])=="number"&&(N+=String.fromCharCode(y),y=r,C=0),v===x.length-1&&(y=r,N+=x.charAt(v-(C-1)),v-=C-1,C=0)):(y=r,N+=x.charAt(v-C),v-=C,C=0);return N};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var A=e.__arabicParser__.getCorrectForm=function(x,v,y){return o(x)?s(x)===!1?-1:!u(x)||!o(v)&&!o(y)||!o(y)&&l(v)||l(x)&&!o(v)||l(x)&&c(v)||l(x)&&l(v)?0:d(x)&&o(v)&&!l(v)&&o(y)&&u(y)?3:l(x)||!o(y)?1:2:-1},m=function(x){var v=0,y=0,N=0,C="",_="",j="",I=(x=x||"").split("\\s+"),T=[];for(v=0;v<I.length;v+=1){for(T.push(""),y=0;y<I[v].length;y+=1)C=I[v][y],_=I[v][y-1],j=I[v][y+1],o(C)?(N=A(C,_,j),T[v]+=N!==-1?String.fromCharCode(t[C.charCodeAt(0)][N]):C):T[v]+=C;T[v]=f(T[v])}return T.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var N=0;for(y=[],N=0;N<v.length;N+=1)Array.isArray(v[N])?y.push([m(v[N][0]),v[N][1],v[N][2]]):y.push([m(v[N])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(Tr.API),Tr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Tr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(x){A=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),A=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(C,_){return C.concat(v.splitTextToSize(_,y))},[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)m<(x=this.getStringUnitWidth(c[N],{font:f})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=A,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/A,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,A=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,A){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],N=[],C=[],_={},j={},I=[],T=[],k=(A=A||{}).autoSize||!1,B=A.printHeaders!==!1,M=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,P=A.margins||Object.assign({width:this.getPageWidth()},t),S=typeof A.padding=="number"?A.padding:3,L=A.headerBackgroundColor||"#c8c8c8",U=A.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=U,this.setFontSize(M),f==null)N=y=Object.keys(d[0]),C=y.map(function(){return"left"});else if(Array.isArray(f)&&Ia(f[0])==="object")for(y=f.map(function(V){return V.name}),N=f.map(function(V){return V.prompt||V.name||""}),C=f.map(function(V){return V.align||"left"}),m=0;m<f.length;m+=1)j[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(N=y=f,C=y.map(function(){return"left"}));if(k||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(_[v=y[m]]=d.map(function(V){return V[v]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=_[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)I.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[v]=Math.max.apply(null,I)+S+S,I=[]}if(B){var q={};for(m=0;m<y.length;m+=1)q[y[m]]={},q[y[m]].text=N[m],q[y[m]].align=C[m];var H=l.call(this,q,j);T=y.map(function(V){return new s(c,u,j[V],H,q[V].text,void 0,q[V].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var z=f.reduce(function(V,Y){return V[Y.name]=Y.align,V},{});for(m=0;m<d.length;m+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:m,data:d[m]},this);var W=l.call(this,d[m],j);for(x=0;x<y.length;x+=1){var Z=d[m][y[x]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:m,col:x,data:Z},this),o.call(this,new s(c,u,j[y[x]],W,Z,m+2,z[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/A+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,A.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(g)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}}(Tr.API);var wAe={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},NAe=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ZR=yAe(NAe),CAe=[100,200,300,400,500,600,700,800,900],sit=yAe(CAe);function eL(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return wAe[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof ZR[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function ZJ(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var iit={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},eZ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tZ(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function oit(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},iit,r.genericFontFamilies||{}),s=null,o=null,l=0;l<t.length;++l)if(a[(s=eL(t[l])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+tZ(s)+"' and default family '"+n+"'.");if(o=function(c,u){if(u[c])return u[c];var d=ZR[c],f=d<=ZR.normal?-1:1,A=ZJ(u,NAe,d,f);if(!A)throw new Error("Could not find a matching font-stretch value for "+c);return A}(s.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=wAe[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=sit[c],f=ZJ(u,CAe,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+tZ(s)+"'.");return o}function rZ(e){return e.trimLeft()}function lit(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function cit(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Ik,nZ,aZ,vO=["times"];(function(e){var t,r,n,a,s,o,l,c,u,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new o,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new o,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var O=R;Object.defineProperty(this,"pdf",{get:function(){return O}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(je){K=!!je}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(je){J=!!je}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(je){isNaN(je)||(ce=je)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(je){isNaN(je)||(oe=je)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(je){var fe;typeof je=="number"?fe=[je,je,je,je]:((fe=new Array(4))[0]=je[0],fe[1]=je.length>=2?je[1]:fe[0],fe[2]=je.length>=3?je[2]:fe[0],fe[3]=je.length>=4?je[3]:fe[1]),u.margin=fe}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(je){re=je}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(je){ue=je}});var le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return le},set:function(je){le=je}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(je){je instanceof d&&(u=je)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(je){u.path=je}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(je){ve=je}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(je){var fe;fe=A(je),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(je){var fe=A(je);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(je){["butt","round","square"].indexOf(je)!==-1&&(this.ctx.lineCap=je,this.pdf.setLineCap(je))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(je){isNaN(je)||(this.ctx.lineWidth=je,this.pdf.setLineWidth(je))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(je){["bevel","round","miter"].indexOf(je)!==-1&&(this.ctx.lineJoin=je,this.pdf.setLineJoin(je))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(je){isNaN(je)||(this.ctx.miterLimit=je,this.pdf.setMiterLimit(je))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(je){this.ctx.textBaseline=je}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(je){["right","end","center","left","start"].indexOf(je)!==-1&&(this.ctx.textAlign=je)}});var X=null;function Ee(je,fe){if(X===null){var ye=function(Ae){var se=[];return Object.keys(Ae).forEach(function(ne){Ae[ne].forEach(function(de){var me=null;switch(de){case"bold":me={family:ne,weight:"bold"};break;case"italic":me={family:ne,style:"italic"};break;case"bolditalic":me={family:ne,weight:"bold",style:"italic"};break;case"":case"normal":me={family:ne}}me!==null&&(me.ref={name:ne,style:de},se.push(me))})}),se}(je.getFontList());X=function(Ae){for(var se={},ne=0;ne<Ae.length;++ne){var de=eL(Ae[ne]),me=de.family,ge=de.stretch,Te=de.style,Ve=de.weight;se[me]=se[me]||{},se[me][ge]=se[me][ge]||{},se[me][ge][Te]=se[me][ge][Te]||{},se[me][ge][Te][Ve]=de}return se}(ye.concat(fe))}return X}var Be=null;Object.defineProperty(this,"fontFaces",{get:function(){return Be},set:function(je){X=null,Be=je}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(je){var fe;if(this.ctx.font=je,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(je))!==null){var ye=fe[1],Ae=(fe[2],fe[3]),se=fe[4],ne=(fe[5],fe[6]),de=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(se)[2];se=Math.floor(de==="px"?parseFloat(se)*this.pdf.internal.scaleFactor:de==="em"?parseFloat(se)*this.pdf.getFontSize():parseFloat(se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(se);var me=function(Je){var mt,We,He=[],Tt=Je.trim();if(Tt==="")return vO;if(Tt in eZ)return[eZ[Tt]];for(;Tt!=="";){switch(We=null,mt=(Tt=rZ(Tt)).charAt(0)){case'"':case"'":We=lit(Tt.substring(1),mt);break;default:We=cit(Tt)}if(We===null||(He.push(We[0]),(Tt=rZ(We[1]))!==""&&Tt.charAt(0)!==","))return vO;Tt=Tt.replace(/^,/,"")}return He}(ne);if(this.fontFaces){var ge=oit(Ee(this.pdf,this.fontFaces),me.map(function(Je){return{family:Je,stretch:"normal",weight:Ae,style:ye}}));this.pdf.setFont(ge.ref.name,ge.ref.style)}else{var Te="";(Ae==="bold"||parseInt(Ae,10)>=700||ye==="bold")&&(Te="bold"),ye==="italic"&&(Te+="italic"),Te.length===0&&(Te="normal");for(var Ve="",Xe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ke=0;Ke<me.length;Ke++){if(this.pdf.internal.getFont(me[Ke],Te,{noFallback:!0,disableWarning:!0})!==void 0){Ve=me[Ke];break}if(Te==="bolditalic"&&this.pdf.internal.getFont(me[Ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ve=me[Ke],Te="bold";else if(this.pdf.internal.getFont(me[Ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ve=me[Ke],Te="normal";break}}if(Ve===""){for(var Qe=0;Qe<me.length;Qe++)if(Xe[me[Qe]]){Ve=Xe[me[Qe]];break}}Ve=Ve===""?"Times":Ve,this.pdf.setFont(Ve,Te)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(je){this.ctx.globalCompositeOperation=je}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(je){this.ctx.globalAlpha=je}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(je){this.ctx.lineDashOffset=je,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(je){this.ctx.lineDash=je,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(je){this.ctx.ignoreClearRect=!!je}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){_.call(this,"fill",!1)},f.prototype.stroke=function(){_.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,O){if(isNaN(R)||isNaN(O))throw Va.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(R,O));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(R,O)},f.prototype.closePath=function(){var R=new o(0,0),O=0;for(O=this.path.length-1;O!==-1;O--)if(this.path[O].type==="begin"&&Ia(this.path[O+1])==="object"&&typeof this.path[O+1].x=="number"){R=new o(this.path[O+1].x,this.path[O+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(R.x,R.y)},f.prototype.lineTo=function(R,O){if(isNaN(R)||isNaN(O))throw Va.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(R,O));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,O,K,J){if(isNaN(K)||isNaN(J)||isNaN(R)||isNaN(O))throw Va.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new o(K,J)),oe=this.ctx.transform.applyToPoint(new o(R,O));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},f.prototype.bezierCurveTo=function(R,O,K,J,ce,oe){if(isNaN(ce)||isNaN(oe)||isNaN(R)||isNaN(O)||isNaN(K)||isNaN(J))throw Va.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new o(ce,oe)),ue=this.ctx.transform.applyToPoint(new o(R,O)),le=this.ctx.transform.applyToPoint(new o(K,J));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:le.x,y2:le.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},f.prototype.arc=function(R,O,K,J,ce,oe){if(isNaN(R)||isNaN(O)||isNaN(K)||isNaN(J)||isNaN(ce))throw Va.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new o(R,O));R=re.x,O=re.y;var ue=this.ctx.transform.applyToPoint(new o(0,K)),le=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(ue.x-le.x,2)+Math.pow(ue.y-le.y,2))}Math.abs(ce-J)>=2*Math.PI&&(J=0,ce=2*Math.PI),this.path.push({type:"arc",x:R,y:O,radius:K,startAngle:J,endAngle:ce,counterclockwise:oe})},f.prototype.arcTo=function(R,O,K,J,ce){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,O,K,J){if(isNaN(R)||isNaN(O)||isNaN(K)||isNaN(J))throw Va.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,O),this.lineTo(R+K,O),this.lineTo(R+K,O+J),this.lineTo(R,O+J),this.lineTo(R,O),this.lineTo(R+K,O),this.lineTo(R,O)},f.prototype.fillRect=function(R,O,K,J){if(isNaN(R)||isNaN(O)||isNaN(K)||isNaN(J))throw Va.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,O,K,J),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},f.prototype.strokeRect=function(R,O,K,J){if(isNaN(R)||isNaN(O)||isNaN(K)||isNaN(J))throw Va.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(R,O,K,J),this.stroke())},f.prototype.clearRect=function(R,O,K,J){if(isNaN(R)||isNaN(O)||isNaN(K)||isNaN(J))throw Va.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,O,K,J))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(O),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(O),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(R){var O,K,J,ce;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))O=0,K=0,J=0,ce=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(oe!==null)O=parseInt(oe[1]),K=parseInt(oe[2]),J=parseInt(oe[3]),ce=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)O=parseInt(oe[1]),K=parseInt(oe[2]),J=parseInt(oe[3]),ce=parseFloat(oe[4]);else{if(ce=1,typeof R=="string"&&R.charAt(0)!=="#"){var re=new mAe(R);R=re.ok?re.toHex():"#000000"}R.length===4?(O=R.substring(1,2),O+=O,K=R.substring(2,3),K+=K,J=R.substring(3,4),J+=J):(O=R.substring(1,3),K=R.substring(3,5),J=R.substring(5,7)),O=parseInt(O,16),K=parseInt(K,16),J=parseInt(J,16)}}return{r:O,g:K,b:J,a:ce,style:R}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,O,K,J){if(isNaN(O)||isNaN(K)||typeof R!="string")throw Va.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var ce=W(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;S.call(this,{text:R,x:O,y:K,scale:oe,angle:ce,align:this.textAlign,maxWidth:J})}},f.prototype.strokeText=function(R,O,K,J){if(isNaN(O)||isNaN(K)||typeof R!="string")throw Va.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){J=isNaN(J)?void 0:J;var ce=W(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;S.call(this,{text:R,x:O,y:K,scale:oe,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:J})}},f.prototype.measureText=function(R){if(typeof R!="string")throw Va.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var O=this.pdf,K=this.pdf.internal.scaleFactor,J=O.internal.getFontSize(),ce=O.getStringUnitWidth(R)*J/O.internal.scaleFactor,oe=function(re){var ue=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new oe({width:ce*=Math.round(96*K/72*1e4)/1e4})},f.prototype.scale=function(R,O){if(isNaN(R)||isNaN(O))throw Va.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new c(R,0,0,O,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.rotate=function(R){if(isNaN(R))throw Va.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var O=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(O)},f.prototype.translate=function(R,O){if(isNaN(R)||isNaN(O))throw Va.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new c(1,0,0,1,R,O);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.transform=function(R,O,K,J,ce,oe){if(isNaN(R)||isNaN(O)||isNaN(K)||isNaN(J)||isNaN(ce)||isNaN(oe))throw Va.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new c(R,O,K,J,ce,oe);this.ctx.transform=this.ctx.transform.multiply(re)},f.prototype.setTransform=function(R,O,K,J,ce,oe){R=isNaN(R)?1:R,O=isNaN(O)?0:O,K=isNaN(K)?0:K,J=isNaN(J)?1:J,ce=isNaN(ce)?0:ce,oe=isNaN(oe)?0:oe,this.ctx.transform=new c(R,O,K,J,ce,oe)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,O,K,J,ce,oe,re,ue,le){var ve=this.pdf.getImageProperties(R),X=1,Ee=1,Be=1,je=1;J!==void 0&&ue!==void 0&&(Be=ue/J,je=le/ce,X=ve.width/J*ue/J,Ee=ve.height/ce*le/ce),oe===void 0&&(oe=O,re=K,O=0,K=0),J!==void 0&&ue===void 0&&(ue=J,le=ce),J===void 0&&ue===void 0&&(ue=ve.width,le=ve.height);for(var fe,ye=this.ctx.transform.decompose(),Ae=W(ye.rotate.shx),se=new c,ne=(se=(se=(se=se.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale)).applyToRectangle(new l(oe-O*Be,re-K*je,J*X,ce*Ee)),de=v.call(this,ne),me=[],ge=0;ge<de.length;ge+=1)me.indexOf(de[ge])===-1&&me.push(de[ge]);if(C(me),this.autoPaging)for(var Te=me[0],Ve=me[me.length-1],Xe=Te;Xe<Ve+1;Xe++){this.pdf.setPage(Xe);var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qe=Xe===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=Xe===1?0:Je+(Xe-2)*mt;if(this.ctx.clip_path.length!==0){var He=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(fe,this.posX+this.margin[3],-We+Qe+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=He}var Tt=JSON.parse(JSON.stringify(ne));Tt=N([Tt],this.posX+this.margin[3],-We+Qe+this.ctx.prevPageLastElemOffset)[0];var Ie=(Xe>Te||Xe<Ve)&&x.call(this);Ie&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,mt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Tt.x,Tt.y,Tt.w,Tt.h,null,null,Ae),Ie&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",ne.x,ne.y,ne.w,ne.h,null,null,Ae)};var v=function(R,O,K){var J=[];O=O||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":J.push(Math.floor((R.y+ce)/K)+1);break;case"arc":J.push(Math.floor((R.y+ce-R.radius)/K)+1),J.push(Math.floor((R.y+ce+R.radius)/K)+1);break;case"qct":var oe=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);J.push(Math.floor((oe.y+ce)/K)+1),J.push(Math.floor((oe.y+oe.h+ce)/K)+1);break;case"bct":var re=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);J.push(Math.floor((re.y+ce)/K)+1),J.push(Math.floor((re.y+re.h+ce)/K)+1);break;case"rect":J.push(Math.floor((R.y+ce)/K)+1),J.push(Math.floor((R.y+R.h+ce)/K)+1)}for(var ue=0;ue<J.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<J[ue];)y.call(this);return J},y=function(){var R=this.fillStyle,O=this.strokeStyle,K=this.font,J=this.lineCap,ce=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=O,this.font=K,this.lineCap=J,this.lineWidth=ce,this.lineJoin=oe},N=function(R,O,K){for(var J=0;J<R.length;J++)switch(R[J].type){case"bct":R[J].x2+=O,R[J].y2+=K;case"qct":R[J].x1+=O,R[J].y1+=K;case"mt":case"lt":case"arc":default:R[J].x+=O,R[J].y+=K}return R},C=function(R){return R.sort(function(O,K){return O-K})},_=function(R,O){for(var K,J,ce=this.fillStyle,oe=this.strokeStyle,re=this.lineCap,ue=this.lineWidth,le=Math.abs(ue*this.ctx.transform.scaleX),ve=this.lineJoin,X=JSON.parse(JSON.stringify(this.path)),Ee=JSON.parse(JSON.stringify(this.path)),Be=[],je=0;je<Ee.length;je++)if(Ee[je].x!==void 0)for(var fe=v.call(this,Ee[je]),ye=0;ye<fe.length;ye+=1)Be.indexOf(fe[ye])===-1&&Be.push(fe[ye]);for(var Ae=0;Ae<Be.length;Ae++)for(;this.pdf.internal.getNumberOfPages()<Be[Ae];)y.call(this);if(C(Be),this.autoPaging)for(var se=Be[0],ne=Be[Be.length-1],de=se;de<ne+1;de++){this.pdf.setPage(de),this.fillStyle=ce,this.strokeStyle=oe,this.lineCap=re,this.lineWidth=le,this.lineJoin=ve;var me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ge=de===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=de===1?0:Te+(de-2)*Ve;if(this.ctx.clip_path.length!==0){var Ke=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(K,this.posX+this.margin[3],-Xe+ge+this.ctx.prevPageLastElemOffset),j.call(this,R,!0),this.path=Ke}if(J=JSON.parse(JSON.stringify(X)),this.path=N(J,this.posX+this.margin[3],-Xe+ge+this.ctx.prevPageLastElemOffset),O===!1||de===0){var Qe=(de>se||de<ne)&&x.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],me,Ve,null).clip().discardPath()),j.call(this,R,O),Qe&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=le,j.call(this,R,O),this.lineWidth=ue;this.path=X},j=function(R,O){if((R!=="stroke"||O||!g.call(this))&&(R==="stroke"||O||!m.call(this))){for(var K,J,ce=[],oe=this.path,re=0;re<oe.length;re++){var ue=oe[re];switch(ue.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:ue,deltas:[],abs:[]});break;case"lt":var le=ce.length;if(oe[re-1]&&!isNaN(oe[re-1].x)&&(K=[ue.x-oe[re-1].x,ue.y-oe[re-1].y],le>0)){for(;le>=0;le--)if(ce[le-1].close!==!0&&ce[le-1].begin!==!0){ce[le-1].deltas.push(K),ce[le-1].abs.push(ue);break}}break;case"bct":K=[ue.x1-oe[re-1].x,ue.y1-oe[re-1].y,ue.x2-oe[re-1].x,ue.y2-oe[re-1].y,ue.x-oe[re-1].x,ue.y-oe[re-1].y],ce[ce.length-1].deltas.push(K);break;case"qct":var ve=oe[re-1].x+2/3*(ue.x1-oe[re-1].x),X=oe[re-1].y+2/3*(ue.y1-oe[re-1].y),Ee=ue.x+2/3*(ue.x1-ue.x),Be=ue.y+2/3*(ue.y1-ue.y),je=ue.x,fe=ue.y;K=[ve-oe[re-1].x,X-oe[re-1].y,Ee-oe[re-1].x,Be-oe[re-1].y,je-oe[re-1].x,fe-oe[re-1].y],ce[ce.length-1].deltas.push(K);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(ue)}}J=O?null:R==="stroke"?"stroke":"fill";for(var ye=!1,Ae=0;Ae<ce.length;Ae++)if(ce[Ae].arc)for(var se=ce[Ae].abs,ne=0;ne<se.length;ne++){var de=se[ne];de.type==="arc"?k.call(this,de.x,de.y,de.radius,de.startAngle,de.endAngle,de.counterclockwise,void 0,O,!ye):L.call(this,de.x,de.y),ye=!0}else if(ce[Ae].close===!0)this.pdf.internal.out("h"),ye=!1;else if(ce[Ae].begin!==!0){var me=ce[Ae].start.x,ge=ce[Ae].start.y;U.call(this,ce[Ae].deltas,me,ge),ye=!0}J&&B.call(this,J),O&&M.call(this)}},I=function(R){var O=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=O*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-K;case"top":return R+O-K;case"hanging":return R+O-2*K;case"middle":return R+O/2-K;case"ideographic":return R;case"alphabetic":default:return R}},T=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(O,K){this.colorStops.push([O,K])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(R,O,K,J,ce,oe,re,ue,le){for(var ve=H.call(this,K,J,ce,oe),X=0;X<ve.length;X++){var Ee=ve[X];X===0&&(le?P.call(this,Ee.x1+R,Ee.y1+O):L.call(this,Ee.x1+R,Ee.y1+O)),q.call(this,R,O,Ee.x2,Ee.y2,Ee.x3,Ee.y3,Ee.x4,Ee.y4)}ue?M.call(this):B.call(this,re)},B=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(R,O){this.pdf.internal.out(r(R)+" "+n(O)+" m")},S=function(R){var O;switch(R.align){case"right":case"end":O="right";break;case"center":O="center";break;case"left":case"start":default:O="left"}var K=this.pdf.getTextDimensions(R.text),J=I.call(this,R.y),ce=T.call(this,J)-K.h,oe=this.ctx.transform.applyToPoint(new o(R.x,J)),re=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var le,ve,X,Ee=this.ctx.transform.applyToRectangle(new l(R.x,J,K.w,K.h)),Be=ue.applyToRectangle(new l(R.x,ce,K.w,K.h)),je=v.call(this,Be),fe=[],ye=0;ye<je.length;ye+=1)fe.indexOf(je[ye])===-1&&fe.push(je[ye]);if(C(fe),this.autoPaging)for(var Ae=fe[0],se=fe[fe.length-1],ne=Ae;ne<se+1;ne++){this.pdf.setPage(ne);var de=ne===1?this.posY+this.margin[0]:this.margin[0],me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ge=this.pdf.internal.pageSize.height-this.margin[2],Te=ge-this.margin[0],Ve=this.pdf.internal.pageSize.width-this.margin[1],Xe=Ve-this.margin[3],Ke=ne===1?0:me+(ne-2)*Te;if(this.ctx.clip_path.length!==0){var Qe=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(le,this.posX+this.margin[3],-1*Ke+de),j.call(this,"fill",!0),this.path=Qe}var Je=N([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-Ke+de+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*R.scale),X=this.lineWidth,this.lineWidth=X*R.scale);var mt=this.autoPaging!=="text";if(mt||Je.y+Je.h<=ge){if(mt||Je.y>=de&&Je.x<=Ve){var We=mt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Ve-Je.x)[0],He=N([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-Ke+de+this.ctx.prevPageLastElemOffset)[0],Tt=mt&&(ne>Ae||ne<se)&&x.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Te,null).clip().discardPath()),this.pdf.text(We,He.x,He.y,{angle:R.angle,align:O,renderingMode:R.renderingMode}),Tt&&this.pdf.restoreGraphicsState()}}else Je.y<ge&&(this.ctx.prevPageLastElemOffset+=ge-Je.y);R.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=X)}else R.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*R.scale),X=this.lineWidth,this.lineWidth=X*R.scale),this.pdf.text(R.text,oe.x+this.posX,oe.y+this.posY,{angle:R.angle,align:O,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=X)},L=function(R,O,K,J){K=K||0,J=J||0,this.pdf.internal.out(r(R+K)+" "+n(O+J)+" l")},U=function(R,O,K){return this.pdf.lines(R,O,K,null,null)},q=function(R,O,K,J,ce,oe,re,ue){this.pdf.internal.out([t(a(K+R)),t(s(J+O)),t(a(ce+R)),t(s(oe+O)),t(a(re+R)),t(s(ue+O)),"c"].join(" "))},H=function(R,O,K,J){for(var ce=2*Math.PI,oe=Math.PI/2;O>K;)O-=ce;var re=Math.abs(K-O);re<ce&&J&&(re=ce-re);for(var ue=[],le=J?-1:1,ve=O;re>1e-5;){var X=ve+le*Math.min(re,oe);ue.push(z.call(this,R,ve,X)),re-=Math.abs(X-ve),ve=X}return ue},z=function(R,O,K){var J=(K-O)/2,ce=R*Math.cos(J),oe=R*Math.sin(J),re=ce,ue=-oe,le=re*re+ue*ue,ve=le+re*ce+ue*oe,X=4/3*(Math.sqrt(2*le*ve)-ve)/(re*oe-ue*ce),Ee=re-X*ue,Be=ue+X*re,je=Ee,fe=-Be,ye=J+O,Ae=Math.cos(ye),se=Math.sin(ye);return{x1:R*Math.cos(O),y1:R*Math.sin(O),x2:Ee*Ae-Be*se,y2:Ee*se+Be*Ae,x3:je*Ae-fe*se,y3:je*se+fe*Ae,x4:R*Math.cos(K),y4:R*Math.sin(K)}},W=function(R){return 180*R/Math.PI},Z=function(R,O,K,J,ce,oe){var re=R+.5*(K-R),ue=O+.5*(J-O),le=ce+.5*(K-ce),ve=oe+.5*(J-oe),X=Math.min(R,ce,re,le),Ee=Math.max(R,ce,re,le),Be=Math.min(O,oe,ue,ve),je=Math.max(O,oe,ue,ve);return new l(X,Be,Ee-X,je-Be)},V=function(R,O,K,J,ce,oe,re,ue){var le,ve,X,Ee,Be,je,fe,ye,Ae,se,ne,de,me,ge,Te=K-R,Ve=J-O,Xe=ce-K,Ke=oe-J,Qe=re-ce,Je=ue-oe;for(ve=0;ve<41;ve++)Ae=(fe=(X=R+(le=ve/40)*Te)+le*((Be=K+le*Xe)-X))+le*(Be+le*(ce+le*Qe-Be)-fe),se=(ye=(Ee=O+le*Ve)+le*((je=J+le*Ke)-Ee))+le*(je+le*(oe+le*Je-je)-ye),ve==0?(ne=Ae,de=se,me=Ae,ge=se):(ne=Math.min(ne,Ae),de=Math.min(de,se),me=Math.max(me,Ae),ge=Math.max(ge,se));return new l(Math.round(ne),Math.round(de),Math.round(me-ne),Math.round(ge-de))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,O,K=(R=this.ctx.lineDash,O=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:O}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Tr.API),function(e){var t=function(s){var o,l,c,u,d,f,A,m,g,x;for(l=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(A=d%85))/85)%85,l.push(f+33,A+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var N=y;N>0;N--)v.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,c,u,d,f=String,A="length",m=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(s+=o="uuuuu"[x](s[A]%5||5))[A];d>u;u+=5)l=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,N){for(var C=N;C>0;C--)y.pop()}(c,o[A]),f.fromCharCode.apply(f,c)},n=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return s=(o=KR(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,o){var l=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Tr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,A=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(A=0;A<x;A+=1)v.push(y(255&g.charCodeAt(A)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,s,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Tr.API),function(e){function t(){return(Xr.html2canvas?Promise.resolve(Xr.html2canvas):gi(()=>Promise.resolve().then(()=>r2t),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Xr.DOMPurify?Promise.resolve(Xr.DOMPurify):gi(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Ia(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),A=u.firstChild;A;A=A.nextSibling)d!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||f.appendChild(c(A,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var A=0;A<u.length;++A){var m=u[A],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||Tr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,l);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Tr.getPageSize=function(o,l,c){if(Ia(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(A.hasOwnProperty(f))g=A[f][1]/d,x=A[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>g&&(m=x,x=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:d,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(eL):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(Tr.API),Tr.API.addJS=function(e){return aZ=e,this.internal.events.subscribe("postPutResources",function(){Ik=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ik+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),nZ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+aZ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ik!==void 0&&nZ!==void 0&&this.internal.out("/Names <</JavaScript "+Ik+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var A=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Tr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var A,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){A=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:A,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Tr.API);var rb,Dk,sZ,iZ,oZ,uit=function(){var e,t,r;function n(s){var o,l,c,u,d,f,A,m,g,x,v,y,N,C;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),g=(function(){var _,j;for(j=[],_=0;_<4;++_)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(N=0;0<=x?N<x:N>x;0<=x?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":A=(v=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,A)),this.text[m]=String.fromCharCode.apply(String,v.slice(A+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,A,m,g){var x,v,y,N,C,_,j,I,T,k,B,M,P,S,L,U,q,H,z,W,Z,V=Math.ceil((u.width-f)/m),Y=Math.ceil((u.height-A)/g),R=u.width==V&&u.height==Y;for(S=o*V,M=R?l:new Uint8Array(S*Y),_=s.length,P=0,v=0;P<Y&&c<_;){switch(s[c++]){case 0:for(N=q=0;q<S;N=q+=1)M[v++]=s[c++];break;case 1:for(N=H=0;H<S;N=H+=1)x=s[c++],C=N<o?0:M[v-o],M[v++]=(x+C)%256;break;case 2:for(N=z=0;z<S;N=z+=1)x=s[c++],y=(N-N%o)/o,L=P&&M[(P-1)*S+y*o+N%o],M[v++]=(L+x)%256;break;case 3:for(N=W=0;W<S;N=W+=1)x=s[c++],y=(N-N%o)/o,C=N<o?0:M[v-o],L=P&&M[(P-1)*S+y*o+N%o],M[v++]=(x+Math.floor((C+L)/2))%256;break;case 4:for(N=Z=0;Z<S;N=Z+=1)x=s[c++],y=(N-N%o)/o,C=N<o?0:M[v-o],P===0?L=U=0:(L=M[(P-1)*S+y*o+N%o],U=y&&M[(P-1)*S+(y-1)*o+N%o]),j=C+L-U,I=Math.abs(j-C),k=Math.abs(j-L),B=Math.abs(j-U),T=I<=k&&I<=B?C:k<=B?L:U,M[v++]=(x+T)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!R){var O=((A+P*g)*u.width+f)*o,K=P*S;for(N=0;N<V;N+=1){for(var J=0;J<o;J+=1)l[O++]=M[K++];O+=(m-1)*o}}P++}}return s=Qst(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var s,o,l,c,u,d,f,A,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,s=0,o=f=0,A=l.length;f<A;o=f+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(m=d[s++])!=null?m:255;return u},n.prototype.copyToImageData=function(s,o){var l,c,u,d,f,A,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=s.data||s).length,f=x||o,d=A=0,c===1)for(;d<g;)m=x?4*o[d/4]:A,v=f[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=l?f[m++]:255,A=m;else for(;d<g;)m=x?4*o[d/4]:A,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=l?f[m++]:255,A=m},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Xr)==="[object Window]"){try{t=Xr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var o;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var o,l,c,u,d,f,A,m;if(this.animation){for(m=[],l=d=0,f=(A=this.animation.frames).length;d<f;l=++d)o=A[l],c=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,m.push(o.image=e(c));return m}},n.prototype.renderFrame=function(s,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var o,l,c,u,d,f,A=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(o=function(){var m,g;if(m=l++%u,g=c[m],A.renderFrame(s,m),u>1&&l/u<d)return A.animation._timeout=setTimeout(o,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function dit(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,A=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,A=e[t++],(1&x)==0&&(A=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,_=e[t++],j=_>>6&1,I=1<<(7&_)+1,T=l,k=c,B=!1;_>>7&&(B=!0,T=t,k=I,t+=3*I);var M=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}d.push({x:v,y,width:N,height:C,has_local_palette:B,palette_offset:T,palette_size:k,data_offset:M,data_length:t-M,transparent_index:A,interlaced:!!j,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(S){if(S<0||S>=d.length)throw new Error("Frame index out of range.");return d[S]},this.decodeAndBlitFrameBGRA=function(S,L){var U=this.frameInfo(S),q=U.width*U.height,H=new Uint8Array(q);lZ(e,U.data_offset,H,q);var z=U.palette_offset,W=U.transparent_index;W===null&&(W=256);var Z=U.width,V=r-Z,Y=Z,R=4*(U.y*r+U.x),O=4*((U.y+U.height)*r+U.x),K=R,J=4*V;U.interlaced===!0&&(J+=4*r*7);for(var ce=8,oe=0,re=H.length;oe<re;++oe){var ue=H[oe];if(Y===0&&(Y=Z,(K+=J)>=O&&(J=4*V+4*r*(ce-1),K=R+(Z+V)*(ce<<1),ce>>=1)),ue===W)K+=4;else{var le=e[z+3*ue],ve=e[z+3*ue+1],X=e[z+3*ue+2];L[K++]=X,L[K++]=ve,L[K++]=le,L[K++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(S,L){var U=this.frameInfo(S),q=U.width*U.height,H=new Uint8Array(q);lZ(e,U.data_offset,H,q);var z=U.palette_offset,W=U.transparent_index;W===null&&(W=256);var Z=U.width,V=r-Z,Y=Z,R=4*(U.y*r+U.x),O=4*((U.y+U.height)*r+U.x),K=R,J=4*V;U.interlaced===!0&&(J+=4*r*7);for(var ce=8,oe=0,re=H.length;oe<re;++oe){var ue=H[oe];if(Y===0&&(Y=Z,(K+=J)>=O&&(J=4*V+4*r*(ce-1),K=R+(Z+V)*(ce<<1),ce>>=1)),ue===W)K+=4;else{var le=e[z+3*ue],ve=e[z+3*ue+1],X=e[z+3*ue+2];L[K++]=le,L[K++]=ve,L[K++]=X,L[K++]=255}--Y}}}function lZ(e,t,r,n){for(var a=e[t++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,A=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==s){if(v===o)break;for(var y=v<l?v:x,N=0,C=y;C>s;)C=g[C]>>8,++N;var _=C;if(A+N+(y!==v?1:0)>n)return void Va.log("Warning, gif stream longer than expected.");r[A++]=_;var j=A+=N;for(y!==v&&(r[A++]=_),C=y;N--;)C=g[C],r[--j]=255&C,C>>=8;x!==null&&l<4096&&(g[l++]=x<<8|_,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else l=o+1,u=(1<<(c=a+1))-1,x=null}return A!==n&&Va.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bO(e){var t,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),A=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,N=new Array(64),C=new Array(64),_=new Array(64),j=new Array(256),I=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(R,O){for(var K=0,J=0,ce=new Array,oe=1;oe<=16;oe++){for(var re=1;re<=R[oe];re++)ce[O[J]]=[],ce[O[J]][0]=K,ce[O[J]][1]=oe,J++,K++;K*=2}return ce}function z(R){for(var O=R[0],K=R[1]-1;K>=0;)O&1<<K&&(v|=1<<y),K--,--y<0&&(v==255?(W(255),W(0)):W(v),y=7,v=0)}function W(R){x.push(R)}function Z(R){W(R>>8&255),W(255&R)}function V(R,O,K,J,ce){for(var oe,re=ce[0],ue=ce[240],le=function(se,ne){var de,me,ge,Te,Ve,Xe,Ke,Qe,Je,mt,We=0;for(Je=0;Je<8;++Je){de=se[We],me=se[We+1],ge=se[We+2],Te=se[We+3],Ve=se[We+4],Xe=se[We+5],Ke=se[We+6];var He=de+(Qe=se[We+7]),Tt=de-Qe,Ie=me+Ke,ft=me-Ke,vt=ge+Xe,et=ge-Xe,Ct=Te+Ve,St=Te-Ve,ot=He+Ct,nr=He-Ct,fr=Ie+vt,Zt=Ie-vt;se[We]=ot+fr,se[We+4]=ot-fr;var Ft=.707106781*(Zt+nr);se[We+2]=nr+Ft,se[We+6]=nr-Ft;var dr=.382683433*((ot=St+et)-(Zt=ft+Tt)),Sr=.5411961*ot+dr,_r=1.306562965*Zt+dr,Vn=.707106781*(fr=et+ft),qa=Tt+Vn,ar=Tt-Vn;se[We+5]=ar+Sr,se[We+3]=ar-Sr,se[We+1]=qa+_r,se[We+7]=qa-_r,We+=8}for(We=0,Je=0;Je<8;++Je){de=se[We],me=se[We+8],ge=se[We+16],Te=se[We+24],Ve=se[We+32],Xe=se[We+40],Ke=se[We+48];var fn=de+(Qe=se[We+56]),$r=de-Qe,mn=me+Ke,In=me-Ke,$n=ge+Xe,ke=ge-Xe,$e=Te+Ve,Re=Te-Ve,Me=fn+$e,we=fn-$e,xe=mn+$n,De=mn-$n;se[We]=Me+xe,se[We+32]=Me-xe;var Ge=.707106781*(De+we);se[We+16]=we+Ge,se[We+48]=we-Ge;var Ue=.382683433*((Me=Re+ke)-(De=In+$r)),Ze=.5411961*Me+Ue,rt=1.306562965*De+Ue,_t=.707106781*(xe=ke+In),Bt=$r+_t,Kt=$r-_t;se[We+40]=Kt+Ze,se[We+24]=Kt-Ze,se[We+8]=Bt+rt,se[We+56]=Bt-rt,We++}for(Je=0;Je<64;++Je)mt=se[Je]*ne[Je],m[Je]=mt>0?mt+.5|0:mt-.5|0;return m}(R,O),ve=0;ve<64;++ve)g[T[ve]]=le[ve];var X=g[0]-K;K=g[0],X==0?z(J[0]):(z(J[A[oe=32767+X]]),z(f[oe]));for(var Ee=63;Ee>0&&g[Ee]==0;)Ee--;if(Ee==0)return z(re),K;for(var Be,je=1;je<=Ee;){for(var fe=je;g[je]==0&&je<=Ee;)++je;var ye=je-fe;if(ye>=16){Be=ye>>4;for(var Ae=1;Ae<=Be;++Ae)z(ue);ye&=15}oe=32767+g[je],z(ce[(ye<<4)+A[oe]]),z(f[oe]),je++}return Ee!=63&&z(re),K}function Y(R){R=Math.min(Math.max(R,1),100),s!=R&&(function(O){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var ce=o((K[J]*O+50)/100);ce=Math.min(Math.max(ce,1),255),l[T[J]]=ce}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var ue=o((oe[re]*O+50)/100);ue=Math.min(Math.max(ue,1),255),c[T[re]]=ue}for(var le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,X=0;X<8;X++)for(var Ee=0;Ee<8;Ee++)u[ve]=1/(l[T[ve]]*le[X]*le[Ee]*8),d[ve]=1/(c[T[ve]]*le[X]*le[Ee]*8),ve++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),s=R)}this.encode=function(R,O){O&&Y(O),x=new Array,v=0,y=7,Z(65496),Z(65504),Z(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),Z(1),Z(1),W(0),W(0),function(){Z(65499),Z(132),W(0);for(var me=0;me<64;me++)W(l[me]);W(1);for(var ge=0;ge<64;ge++)W(c[ge])}(),function(me,ge){Z(65472),Z(17),W(8),Z(ge),Z(me),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(R.width,R.height),function(){Z(65476),Z(418),W(0);for(var me=0;me<16;me++)W(k[me+1]);for(var ge=0;ge<=11;ge++)W(B[ge]);W(16);for(var Te=0;Te<16;Te++)W(M[Te+1]);for(var Ve=0;Ve<=161;Ve++)W(P[Ve]);W(1);for(var Xe=0;Xe<16;Xe++)W(S[Xe+1]);for(var Ke=0;Ke<=11;Ke++)W(L[Ke]);W(17);for(var Qe=0;Qe<16;Qe++)W(U[Qe+1]);for(var Je=0;Je<=161;Je++)W(q[Je])}(),Z(65498),Z(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var K=0,J=0,ce=0;v=0,y=7,this.encode.displayName="_encode_";for(var oe,re,ue,le,ve,X,Ee,Be,je,fe=R.data,ye=R.width,Ae=R.height,se=4*ye,ne=0;ne<Ae;){for(oe=0;oe<se;){for(ve=se*ne+oe,Ee=-1,Be=0,je=0;je<64;je++)X=ve+(Be=je>>3)*se+(Ee=4*(7&je)),ne+Be>=Ae&&(X-=se*(ne+1+Be-Ae)),oe+Ee>=se&&(X-=oe+Ee-se+4),re=fe[X++],ue=fe[X++],le=fe[X++],N[je]=(I[re]+I[ue+256>>0]+I[le+512>>0]>>16)-128,C[je]=(I[re+768>>0]+I[ue+1024>>0]+I[le+1280>>0]>>16)-128,_[je]=(I[re+1280>>0]+I[ue+1536>>0]+I[le+1792>>0]>>16)-128;K=V(N,u,K,t,n),J=V(C,d,J,r,a),ce=V(_,d,ce,r,a),oe+=32}ne+=8}if(y>=0){var de=[];de[1]=y+1,de[0]=(1<<y+1)-1,z(de)}return Z(65497),new Uint8Array(x)},e=e||50,function(){for(var R=String.fromCharCode,O=0;O<256;O++)j[O]=R(O)}(),t=H(k,B),r=H(S,L),n=H(M,P),a=H(U,q),function(){for(var R=1,O=2,K=1;K<=15;K++){for(var J=R;J<O;J++)A[32767+J]=K,f[32767+J]=[],f[32767+J][1]=K,f[32767+J][0]=J;for(var ce=-(O-1);ce<=-R;ce++)A[32767+ce]=K,f[32767+ce]=[],f[32767+ce][1]=K,f[32767+ce][0]=O-1+ce;R<<=1,O<<=1}}(),function(){for(var R=0;R<256;R++)I[R]=19595*R,I[R+256>>0]=38470*R,I[R+512>>0]=7471*R+32768,I[R+768>>0]=-11059*R,I[R+1024>>0]=-21709*R,I[R+1280>>0]=32768*R+8421375,I[R+1536>>0]=-27439*R,I[R+1792>>0]=-5329*R}(),Y(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function uf(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cZ(e){function t(k){if(!k)throw Error("assert :P")}function r(k,B,M){for(var P=0;4>P;P++)if(k[B+P]!=M.charCodeAt(P))return!0;return!1}function n(k,B,M,P,S){for(var L=0;L<S;L++)k[B+L]=M[P+L]}function a(k,B,M,P){for(var S=0;S<P;S++)k[B+S]=M}function s(k){return new Int32Array(k)}function o(k,B){for(var M=[],P=0;P<k;P++)M.push(new B);return M}function l(k,B){var M=[];return function P(S,L,U){for(var q=U[L],H=0;H<q&&(S.push(U.length>L+1?[]:new B),!(U.length<L+1));H++)P(S[H],L+1,U)}(M,0,k),M}var c=function(){var k=this;function B(D,G){for(var ae=1<<G-1>>>0;D&ae;)ae>>>=1;return ae?(D&ae-1)+ae:D}function M(D,G,ae,he,Ne){t(!(he%ae));do D[G+(he-=ae)]=Ne;while(0<he)}function P(D,G,ae,he,Ne){if(t(2328>=Ne),512>=Ne)var Se=s(512);else if((Se=s(Ne))==null)return 0;return function(_e,Oe,Le,ze,nt,bt){var gt,ut,$t=Oe,kt=1<<Le,at=s(16),it=s(16);for(t(nt!=0),t(ze!=null),t(_e!=null),t(0<Le),ut=0;ut<nt;++ut){if(15<ze[ut])return 0;++at[ze[ut]]}if(at[0]==nt)return 0;for(it[1]=0,gt=1;15>gt;++gt){if(at[gt]>1<<gt)return 0;it[gt+1]=it[gt]+at[gt]}for(ut=0;ut<nt;++ut)gt=ze[ut],0<ze[ut]&&(bt[it[gt]++]=ut);if(it[15]==1)return(ze=new S).g=0,ze.value=bt[0],M(_e,$t,1,kt,ze),kt;var Mt,zt=-1,Qt=kt-1,Ar=0,or=1,Br=1,cr=1<<Le;for(ut=0,gt=1,nt=2;gt<=Le;++gt,nt<<=1){if(or+=Br<<=1,0>(Br-=at[gt]))return 0;for(;0<at[gt];--at[gt])(ze=new S).g=gt,ze.value=bt[ut++],M(_e,$t+Ar,nt,cr,ze),Ar=B(Ar,gt)}for(gt=Le+1,nt=2;15>=gt;++gt,nt<<=1){if(or+=Br<<=1,0>(Br-=at[gt]))return 0;for(;0<at[gt];--at[gt]){if(ze=new S,(Ar&Qt)!=zt){for($t+=cr,Mt=1<<(zt=gt)-Le;15>zt&&!(0>=(Mt-=at[zt]));)++zt,Mt<<=1;kt+=cr=1<<(Mt=zt-Le),_e[Oe+(zt=Ar&Qt)].g=Mt+Le,_e[Oe+zt].value=$t-Oe-zt}ze.g=gt-Le,ze.value=bt[ut++],M(_e,$t+(Ar>>Le),nt,cr,ze),Ar=B(Ar,gt)}}return or!=2*it[15]-1?0:kt}(D,G,ae,he,Ne,Se)}function S(){this.value=this.g=0}function L(){this.value=this.g=0}function U(){this.G=o(5,S),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ti,L)}function q(D,G,ae,he){t(D!=null),t(G!=null),t(2147483648>he),D.Ca=254,D.I=0,D.b=-8,D.Ka=0,D.oa=G,D.pa=ae,D.Jd=G,D.Yc=ae+he,D.Zc=4<=he?ae+he-4+1:ae,oe(D)}function H(D,G){for(var ae=0;0<G--;)ae|=ue(D,128)<<G;return ae}function z(D,G){var ae=H(D,G);return re(D)?-ae:ae}function W(D,G,ae,he){var Ne,Se=0;for(t(D!=null),t(G!=null),t(4294967288>he),D.Sb=he,D.Ra=0,D.u=0,D.h=0,4<he&&(he=4),Ne=0;Ne<he;++Ne)Se+=G[ae+Ne]<<8*Ne;D.Ra=Se,D.bb=he,D.oa=G,D.pa=ae}function Z(D){for(;8<=D.u&&D.bb<D.Sb;)D.Ra>>>=8,D.Ra+=D.oa[D.pa+D.bb]<<p0-8>>>0,++D.bb,D.u-=8;K(D)&&(D.h=1,D.u=0)}function V(D,G){if(t(0<=G),!D.h&&G<=m0){var ae=O(D)&Wf[G];return D.u+=G,Z(D),ae}return D.h=1,D.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function O(D){return D.Ra>>>(D.u&p0-1)>>>0}function K(D){return t(D.bb<=D.Sb),D.h||D.bb==D.Sb&&D.u>p0}function J(D,G){D.u=G,D.h=K(D)}function ce(D){D.u>=JA&&(t(D.u>=JA),Z(D))}function oe(D){t(D!=null&&D.oa!=null),D.pa<D.Zc?(D.I=(D.oa[D.pa++]|D.I<<8)>>>0,D.b+=8):(t(D!=null&&D.oa!=null),D.pa<D.Yc?(D.b+=8,D.I=D.oa[D.pa++]|D.I<<8):D.Ka?D.b=0:(D.I<<=8,D.b+=8,D.Ka=1))}function re(D){return H(D,1)}function ue(D,G){var ae=D.Ca;0>D.b&&oe(D);var he=D.b,Ne=ae*G>>>8,Se=(D.I>>>he>Ne)+0;for(Se?(ae-=Ne,D.I-=Ne+1<<he>>>0):ae=Ne+1,he=ae,Ne=0;256<=he;)Ne+=8,he>>=8;return he=7^Ne+sl[he],D.b-=he,D.Ca=(ae<<he)-1,Se}function le(D,G,ae){D[G+0]=ae>>24&255,D[G+1]=ae>>16&255,D[G+2]=ae>>8&255,D[G+3]=ae>>0&255}function ve(D,G){return D[G+0]<<0|D[G+1]<<8}function X(D,G){return ve(D,G)|D[G+2]<<16}function Ee(D,G){return ve(D,G)|ve(D,G+2)<<16}function Be(D,G){var ae=1<<G;return t(D!=null),t(0<G),D.X=s(ae),D.X==null?0:(D.Mb=32-G,D.Xa=G,1)}function je(D,G){t(D!=null),t(G!=null),t(D.Xa==G.Xa),n(G.X,0,D.X,0,1<<G.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function ye(D,G,ae,he){t(ae!=null),t(he!=null);var Ne=ae[0],Se=he[0];return Ne==0&&(Ne=(D*Se+G/2)/G),Se==0&&(Se=(G*Ne+D/2)/D),0>=Ne||0>=Se?0:(ae[0]=Ne,he[0]=Se,1)}function Ae(D,G){return D+(1<<G)-1>>>G}function se(D,G){return((4278255360&D)+(4278255360&G)>>>0&4278255360)+((16711935&D)+(16711935&G)>>>0&16711935)>>>0}function ne(D,G){k[G]=function(ae,he,Ne,Se,_e,Oe,Le){var ze;for(ze=0;ze<_e;++ze){var nt=k[D](Oe[Le+ze-1],Ne,Se+ze);Oe[Le+ze]=se(ae[he+ze],nt)}}}function de(){this.ud=this.hd=this.jd=0}function me(D,G){return((4278124286&(D^G))>>>1)+(D&G)>>>0}function ge(D){return 0<=D&&256>D?D:0>D?0:255<D?255:void 0}function Te(D,G){return ge(D+(D-G+.5>>1))}function Ve(D,G,ae){return Math.abs(G-ae)-Math.abs(D-ae)}function Xe(D,G,ae,he,Ne,Se,_e){for(he=Se[_e-1],ae=0;ae<Ne;++ae)Se[_e+ae]=he=se(D[G+ae],he)}function Ke(D,G,ae,he,Ne){var Se;for(Se=0;Se<ae;++Se){var _e=D[G+Se],Oe=_e>>8&255,Le=16711935&(Le=(Le=16711935&_e)+((Oe<<16)+Oe));he[Ne+Se]=(4278255360&_e)+Le>>>0}}function Qe(D,G){G.jd=D>>0&255,G.hd=D>>8&255,G.ud=D>>16&255}function Je(D,G,ae,he,Ne,Se){var _e;for(_e=0;_e<he;++_e){var Oe=G[ae+_e],Le=Oe>>>8,ze=Oe,nt=255&(nt=(nt=Oe>>>16)+((D.jd<<24>>24)*(Le<<24>>24)>>>5));ze=255&(ze=(ze=ze+((D.hd<<24>>24)*(Le<<24>>24)>>>5))+((D.ud<<24>>24)*(nt<<24>>24)>>>5)),Ne[Se+_e]=(4278255360&Oe)+(nt<<16)+ze}}function mt(D,G,ae,he,Ne){k[G]=function(Se,_e,Oe,Le,ze,nt,bt,gt,ut){for(Le=bt;Le<gt;++Le)for(bt=0;bt<ut;++bt)ze[nt++]=Ne(Oe[he(Se[_e++])])},k[D]=function(Se,_e,Oe,Le,ze,nt,bt){var gt=8>>Se.b,ut=Se.Ea,$t=Se.K[0],kt=Se.w;if(8>gt)for(Se=(1<<Se.b)-1,kt=(1<<gt)-1;_e<Oe;++_e){var at,it=0;for(at=0;at<ut;++at)at&Se||(it=he(Le[ze++])),nt[bt++]=Ne($t[it&kt]),it>>=gt}else k["VP8LMapColor"+ae](Le,ze,$t,kt,nt,bt,_e,Oe,ut)}}function We(D,G,ae,he,Ne){for(ae=G+ae;G<ae;){var Se=D[G++];he[Ne++]=Se>>16&255,he[Ne++]=Se>>8&255,he[Ne++]=Se>>0&255}}function He(D,G,ae,he,Ne){for(ae=G+ae;G<ae;){var Se=D[G++];he[Ne++]=Se>>16&255,he[Ne++]=Se>>8&255,he[Ne++]=Se>>0&255,he[Ne++]=Se>>24&255}}function Tt(D,G,ae,he,Ne){for(ae=G+ae;G<ae;){var Se=(_e=D[G++])>>16&240|_e>>12&15,_e=_e>>0&240|_e>>28&15;he[Ne++]=Se,he[Ne++]=_e}}function Ie(D,G,ae,he,Ne){for(ae=G+ae;G<ae;){var Se=(_e=D[G++])>>16&248|_e>>13&7,_e=_e>>5&224|_e>>3&31;he[Ne++]=Se,he[Ne++]=_e}}function ft(D,G,ae,he,Ne){for(ae=G+ae;G<ae;){var Se=D[G++];he[Ne++]=Se>>0&255,he[Ne++]=Se>>8&255,he[Ne++]=Se>>16&255}}function vt(D,G,ae,he,Ne,Se){if(Se==0)for(ae=G+ae;G<ae;)le(he,((Se=D[G++])[0]>>24|Se[1]>>8&65280|Se[2]<<8&16711680|Se[3]<<24)>>>0),Ne+=32;else n(he,Ne,D,G,ae)}function et(D,G){k[G][0]=k[D+"0"],k[G][1]=k[D+"1"],k[G][2]=k[D+"2"],k[G][3]=k[D+"3"],k[G][4]=k[D+"4"],k[G][5]=k[D+"5"],k[G][6]=k[D+"6"],k[G][7]=k[D+"7"],k[G][8]=k[D+"8"],k[G][9]=k[D+"9"],k[G][10]=k[D+"10"],k[G][11]=k[D+"11"],k[G][12]=k[D+"12"],k[G][13]=k[D+"13"],k[G][14]=k[D+"0"],k[G][15]=k[D+"0"]}function Ct(D){return D==lg||D==sh||D==Wd||D==rm}function St(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function nr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new St,this.f.kb=new ot,this.sd=null}function fr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Zt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ft(D){return alert("todo:WebPSamplerProcessPlane"),D.T}function dr(D,G){var ae=D.T,he=G.ba.f.RGBA,Ne=he.eb,Se=he.fb+D.ka*he.A,_e=Si[G.ba.S],Oe=D.y,Le=D.O,ze=D.f,nt=D.N,bt=D.ea,gt=D.W,ut=G.cc,$t=G.dc,kt=G.Mc,at=G.Nc,it=D.ka,Mt=D.ka+D.T,zt=D.U,Qt=zt+1>>1;for(it==0?_e(Oe,Le,null,null,ze,nt,bt,gt,ze,nt,bt,gt,Ne,Se,null,null,zt):(_e(G.ec,G.fc,Oe,Le,ut,$t,kt,at,ze,nt,bt,gt,Ne,Se-he.A,Ne,Se,zt),++ae);it+2<Mt;it+=2)ut=ze,$t=nt,kt=bt,at=gt,nt+=D.Rc,gt+=D.Rc,Se+=2*he.A,_e(Oe,(Le+=2*D.fa)-D.fa,Oe,Le,ut,$t,kt,at,ze,nt,bt,gt,Ne,Se-he.A,Ne,Se,zt);return Le+=D.fa,D.j+Mt<D.o?(n(G.ec,G.fc,Oe,Le,zt),n(G.cc,G.dc,ze,nt,Qt),n(G.Mc,G.Nc,bt,gt,Qt),ae--):1&Mt||_e(Oe,Le,null,null,ze,nt,bt,gt,ze,nt,bt,gt,Ne,Se+he.A,null,null,zt),ae}function Sr(D,G,ae){var he=D.F,Ne=[D.J];if(he!=null){var Se=D.U,_e=G.ba.S,Oe=_e==y0||_e==Wd;G=G.ba.f.RGBA;var Le=[0],ze=D.ka;Le[0]=D.T,D.Kb&&(ze==0?--Le[0]:(--ze,Ne[0]-=D.width),D.j+D.ka+D.T==D.o&&(Le[0]=D.o-D.j-ze));var nt=G.eb;ze=G.fb+ze*G.A,D=Cn(he,Ne[0],D.width,Se,Le,nt,ze+(Oe?0:3),G.A),t(ae==Le),D&&Ct(_e)&&Gl(nt,ze,Oe,Se,Le,G.A)}return 0}function _r(D){var G=D.ma,ae=G.ba.S,he=11>ae,Ne=ae==tm||ae==og||ae==y0||ae==Kd||ae==12||Ct(ae);if(G.memory=null,G.Ib=null,G.Jb=null,G.Nd=null,!Kf(G.Oa,D,Ne?11:12))return 0;if(Ne&&Ct(ae)&&Xt(),D.da)alert("todo:use_scaling");else{if(he){if(G.Ib=Ft,D.Kb){if(ae=D.U+1>>1,G.memory=s(D.U+2*ae),G.memory==null)return 0;G.ec=G.memory,G.fc=0,G.cc=G.ec,G.dc=G.fc+D.U,G.Mc=G.cc,G.Nc=G.dc+ae,G.Ib=dr,Xt()}}else alert("todo:EmitYUV");Ne&&(G.Jb=Sr,he&&ct())}if(he&&!VE){for(D=0;256>D;++D)bB[D]=89858*(D-128)+ni>>ed,dg[D]=-22014*(D-128)+ni,Jy[D]=-45773*(D-128),ai[D]=113618*(D-128)+ni>>ed;for(D=lh;D<Ev;++D)G=76283*(D-16)+ni>>ed,fg[D-lh]=ta(G,255),Zy[D-lh]=ta(G+8>>4,15);VE=1}return 1}function Vn(D){var G=D.ma,ae=D.U,he=D.T;return t(!(1&D.ka)),0>=ae||0>=he?0:(ae=G.Ib(D,G),G.Jb!=null&&G.Jb(D,G,ae),G.Dc+=ae,1)}function qa(D){D.ma.memory=null}function ar(D,G,ae,he){return V(D,8)!=47?0:(G[0]=V(D,14)+1,ae[0]=V(D,14)+1,he[0]=V(D,1),V(D,3)!=0?0:!D.h)}function fn(D,G){if(4>D)return D+1;var ae=D-2>>1;return(2+(1&D)<<ae)+V(G,ae)+1}function $r(D,G){return 120<G?G-120:1<=(ae=((ae=Yd[G-1])>>4)*D+(8-(15&ae)))?ae:1;var ae}function mn(D,G,ae){var he=O(ae),Ne=D[G+=255&he].g-8;return 0<Ne&&(J(ae,ae.u+8),he=O(ae),G+=D[G].value,G+=he&(1<<Ne)-1),J(ae,ae.u+D[G].g),D[G].value}function In(D,G,ae){return ae.g+=D.g,ae.value+=D.value<<G>>>0,t(8>=ae.g),D.g}function $n(D,G,ae){var he=D.xc;return t((G=he==0?0:D.vc[D.md*(ae>>he)+(G>>he)])<D.Wb),D.Ya[G]}function ke(D,G,ae,he){var Ne=D.ab,Se=D.c*G,_e=D.C;G=_e+G;var Oe=ae,Le=he;for(he=D.Ta,ae=D.Ua;0<Ne--;){var ze=D.gc[Ne],nt=_e,bt=G,gt=Oe,ut=Le,$t=(Le=he,Oe=ae,ze.Ea);switch(t(nt<bt),t(bt<=ze.nc),ze.hc){case 2:xv(gt,ut,(bt-nt)*$t,Le,Oe);break;case 0:var kt=nt,at=bt,it=Le,Mt=Oe,zt=(cr=ze).Ea;kt==0&&(Xy(gt,ut,null,null,1,it,Mt),Xe(gt,ut+1,0,0,zt-1,it,Mt+1),ut+=zt,Mt+=zt,++kt);for(var Qt=1<<cr.b,Ar=Qt-1,or=Ae(zt,cr.b),Br=cr.K,cr=cr.w+(kt>>cr.b)*or;kt<at;){var zn=Br,ra=cr,wn=1;for(sg(gt,ut,it,Mt-zt,1,it,Mt);wn<zt;){var pn=(wn&~Ar)+Qt;pn>zt&&(pn=zt),(0,zd[zn[ra++]>>8&15])(gt,ut+ +wn,it,Mt+wn-zt,pn-wn,it,Mt+wn),wn=pn}ut+=zt,Mt+=zt,++kt&Ar||(cr+=or)}bt!=ze.nc&&n(Le,Oe-$t,Le,Oe+(bt-nt-1)*$t,$t);break;case 1:for($t=gt,at=ut,zt=(gt=ze.Ea)-(Mt=gt&~(it=(ut=1<<ze.b)-1)),kt=Ae(gt,ze.b),Qt=ze.K,ze=ze.w+(nt>>ze.b)*kt;nt<bt;){for(Ar=Qt,or=ze,Br=new de,cr=at+Mt,zn=at+gt;at<cr;)Qe(Ar[or++],Br),Yf(Br,$t,at,ut,Le,Oe),at+=ut,Oe+=ut;at<zn&&(Qe(Ar[or++],Br),Yf(Br,$t,at,zt,Le,Oe),at+=zt,Oe+=zt),++nt&it||(ze+=kt)}break;case 3:if(gt==Le&&ut==Oe&&0<ze.b){for(at=Le,gt=$t=Oe+(bt-nt)*$t-(Mt=(bt-nt)*Ae(ze.Ea,ze.b)),ut=Le,it=Oe,kt=[],Mt=(zt=Mt)-1;0<=Mt;--Mt)kt[Mt]=ut[it+Mt];for(Mt=zt-1;0<=Mt;--Mt)at[gt+Mt]=kt[Mt];pc(ze,nt,bt,Le,$t,Le,Oe)}else pc(ze,nt,bt,gt,ut,Le,Oe)}Oe=he,Le=ae}Le!=ae&&n(he,ae,Oe,Le,Se)}function $e(D,G){var ae=D.V,he=D.Ba+D.c*D.C,Ne=G-D.C;if(t(G<=D.l.o),t(16>=Ne),0<Ne){var Se=D.l,_e=D.Ta,Oe=D.Ua,Le=Se.width;if(ke(D,Ne,ae,he),Ne=Oe=[Oe],t((ae=D.C)<(he=G)),t(Se.v<Se.va),he>Se.o&&(he=Se.o),ae<Se.j){var ze=Se.j-ae;ae=Se.j,Ne[0]+=ze*Le}if(ae>=he?ae=0:(Ne[0]+=4*Se.v,Se.ka=ae-Se.j,Se.U=Se.va-Se.v,Se.T=he-ae,ae=1),ae){if(Oe=Oe[0],11>(ae=D.ca).S){var nt=ae.f.RGBA,bt=(he=ae.S,Ne=Se.U,Se=Se.T,ze=nt.eb,nt.A),gt=Se;for(nt=nt.fb+D.Ma*nt.A;0<gt--;){var ut=_e,$t=Oe,kt=Ne,at=ze,it=nt;switch(he){case lo:Bo(ut,$t,kt,at,it);break;case tm:$i(ut,$t,kt,at,it);break;case lg:$i(ut,$t,kt,at,it),Gl(at,it,0,kt,1,0);break;case Xu:eu(ut,$t,kt,at,it);break;case og:vt(ut,$t,kt,at,it,1);break;case sh:vt(ut,$t,kt,at,it,1),Gl(at,it,0,kt,1,0);break;case y0:vt(ut,$t,kt,at,it,0);break;case Wd:vt(ut,$t,kt,at,it,0),Gl(at,it,1,kt,1,0);break;case Kd:Jf(ut,$t,kt,at,it);break;case rm:Jf(ut,$t,kt,at,it),Nn(at,it,kt,1,0);break;case bv:il(ut,$t,kt,at,it);break;default:t(0)}Oe+=Le,nt+=bt}D.Ma+=Se}else alert("todo:EmitRescaledRowsYUVA");t(D.Ma<=ae.height)}}D.C=G,t(D.C<=D.i)}function Re(D){var G;if(0<D.ua)return 0;for(G=0;G<D.Wb;++G){var ae=D.Ya[G].G,he=D.Ya[G].H;if(0<ae[1][he[1]+0].g||0<ae[2][he[2]+0].g||0<ae[3][he[3]+0].g)return 0}return 1}function Me(D,G,ae,he,Ne,Se){if(D.Z!=0){var _e=D.qd,Oe=D.rd;for(t(Ju[D.Z]!=null);G<ae;++G)Ju[D.Z](_e,Oe,he,Ne,he,Ne,Se),_e=he,Oe=Ne,Ne+=Se;D.qd=_e,D.rd=Oe}}function we(D,G){var ae=D.l.ma,he=ae.Z==0||ae.Z==1?D.l.j:D.C;if(he=D.C<he?he:D.C,t(G<=D.l.o),G>he){var Ne=D.l.width,Se=ae.ca,_e=ae.tb+Ne*he,Oe=D.V,Le=D.Ba+D.c*he,ze=D.gc;t(D.ab==1),t(ze[0].hc==3),Xf(ze[0],he,G,Oe,Le,Se,_e),Me(ae,he,G,Se,_e,Ne)}D.C=D.Ma=G}function xe(D,G,ae,he,Ne,Se,_e){var Oe=D.$/he,Le=D.$%he,ze=D.m,nt=D.s,bt=ae+D.$,gt=bt;Ne=ae+he*Ne;var ut=ae+he*Se,$t=280+nt.ua,kt=D.Pb?Oe:16777216,at=0<nt.ua?nt.Wa:null,it=nt.wc,Mt=bt<ut?$n(nt,Le,Oe):null;t(D.C<Se),t(ut<=Ne);var zt=!1;e:for(;;){for(;zt||bt<ut;){var Qt=0;if(Oe>=kt){var Ar=bt-ae;t((kt=D).Pb),kt.wd=kt.m,kt.xd=Ar,0<kt.s.ua&&je(kt.s.Wa,kt.s.vb),kt=Oe+UE}if(Le&it||(Mt=$n(nt,Le,Oe)),t(Mt!=null),Mt.Qb&&(G[bt]=Mt.qb,zt=!0),!zt)if(ce(ze),Mt.jc){Qt=ze,Ar=G;var or=bt,Br=Mt.pd[O(Qt)&ti-1];t(Mt.jc),256>Br.g?(J(Qt,Qt.u+Br.g),Ar[or]=Br.value,Qt=0):(J(Qt,Qt.u+Br.g-256),t(256<=Br.value),Qt=Br.value),Qt==0&&(zt=!0)}else Qt=mn(Mt.G[0],Mt.H[0],ze);if(ze.h)break;if(zt||256>Qt){if(!zt)if(Mt.nd)G[bt]=(Mt.qb|Qt<<8)>>>0;else{if(ce(ze),zt=mn(Mt.G[1],Mt.H[1],ze),ce(ze),Ar=mn(Mt.G[2],Mt.H[2],ze),or=mn(Mt.G[3],Mt.H[3],ze),ze.h)break;G[bt]=(or<<24|zt<<16|Qt<<8|Ar)>>>0}if(zt=!1,++bt,++Le>=he&&(Le=0,++Oe,_e!=null&&Oe<=Se&&!(Oe%16)&&_e(D,Oe),at!=null))for(;gt<bt;)Qt=G[gt++],at.X[(506832829*Qt&4294967295)>>>at.Mb]=Qt}else if(280>Qt){if(Qt=fn(Qt-256,ze),Ar=mn(Mt.G[4],Mt.H[4],ze),ce(ze),Ar=$r(he,Ar=fn(Ar,ze)),ze.h)break;if(bt-ae<Ar||Ne-bt<Qt)break e;for(or=0;or<Qt;++or)G[bt+or]=G[bt+or-Ar];for(bt+=Qt,Le+=Qt;Le>=he;)Le-=he,++Oe,_e!=null&&Oe<=Se&&!(Oe%16)&&_e(D,Oe);if(t(bt<=Ne),Le&it&&(Mt=$n(nt,Le,Oe)),at!=null)for(;gt<bt;)Qt=G[gt++],at.X[(506832829*Qt&4294967295)>>>at.Mb]=Qt}else{if(!(Qt<$t))break e;for(zt=Qt-280,t(at!=null);gt<bt;)Qt=G[gt++],at.X[(506832829*Qt&4294967295)>>>at.Mb]=Qt;Qt=bt,t(!(zt>>>(Ar=at).Xa)),G[Qt]=Ar.X[zt],zt=!0}zt||t(ze.h==K(ze))}if(D.Pb&&ze.h&&bt<Ne)t(D.m.h),D.a=5,D.m=D.wd,D.$=D.xd,0<D.s.ua&&je(D.s.vb,D.s.Wa);else{if(ze.h)break e;_e!=null&&_e(D,Oe>Se?Se:Oe),D.a=0,D.$=bt-ae}return 1}return D.a=3,0}function De(D){t(D!=null),D.vc=null,D.yc=null,D.Ya=null;var G=D.Wa;G!=null&&(G.X=null),D.vb=null,t(D!=null)}function Ge(){var D=new XA;return D==null?null:(D.a=0,D.xb=nm,et("Predictor","VP8LPredictors"),et("Predictor","VP8LPredictors_C"),et("PredictorAdd","VP8LPredictorsAdd"),et("PredictorAdd","VP8LPredictorsAdd_C"),xv=Ke,Yf=Je,Bo=We,$i=He,Jf=Tt,il=Ie,eu=ft,k.VP8LMapColor32b=ji,k.VP8LMapColor8b=ig,D)}function Ue(D,G,ae,he,Ne){var Se=1,_e=[D],Oe=[G],Le=he.m,ze=he.s,nt=null,bt=0;e:for(;;){if(ae)for(;Se&&V(Le,1);){var gt=_e,ut=Oe,$t=he,kt=1,at=$t.m,it=$t.gc[$t.ab],Mt=V(at,2);if($t.Oc&1<<Mt)Se=0;else{switch($t.Oc|=1<<Mt,it.hc=Mt,it.Ea=gt[0],it.nc=ut[0],it.K=[null],++$t.ab,t(4>=$t.ab),Mt){case 0:case 1:it.b=V(at,3)+2,kt=Ue(Ae(it.Ea,it.b),Ae(it.nc,it.b),0,$t,it.K),it.K=it.K[0];break;case 3:var zt,Qt=V(at,8)+1,Ar=16<Qt?0:4<Qt?1:2<Qt?2:3;if(gt[0]=Ae(it.Ea,Ar),it.b=Ar,zt=kt=Ue(Qt,1,0,$t,it.K)){var or,Br=Qt,cr=it,zn=1<<(8>>cr.b),ra=s(zn);if(ra==null)zt=0;else{var wn=cr.K[0],pn=cr.w;for(ra[0]=cr.K[0][0],or=1;or<1*Br;++or)ra[or]=se(wn[pn+or],ra[or-1]);for(;or<4*zn;++or)ra[or]=0;cr.K[0]=null,cr.K[0]=ra,zt=1}}kt=zt;break;case 2:break;default:t(0)}Se=kt}}if(_e=_e[0],Oe=Oe[0],Se&&V(Le,1)&&!(Se=1<=(bt=V(Le,4))&&11>=bt)){he.a=3;break e}var Aa;if(Aa=Se)t:{var na,an,Na,Lr=he,Wr=_e,Hn=Oe,Gn=bt,_i=ae,si=Lr.m,Cs=Lr.s,Es=[null],Ls=1,bc=0,aa=N0[Gn];r:for(;;){if(_i&&V(si,1)){var Ms=V(si,3)+2,nu=Ae(Wr,Ms),ch=Ae(Hn,Ms),j0=nu*ch;if(!Ue(nu,ch,0,Lr,Es))break r;for(Es=Es[0],Cs.xc=Ms,na=0;na<j0;++na){var uh=Es[na]>>8&65535;Es[na]=uh,uh>=Ls&&(Ls=uh+1)}}if(si.h)break r;for(an=0;5>an;++an){var Wa=ql[an];!an&&0<Gn&&(Wa+=1<<Gn),bc<Wa&&(bc=Wa)}var hg=o(Ls*aa,S),jv=Ls,Do=o(jv,U);if(Do==null)var ts=null;else t(65536>=jv),ts=Do;var k0=s(bc);if(ts==null||k0==null||hg==null){Lr.a=1;break r}var dh=hg;for(na=Na=0;na<Ls;++na){var ll=ts[na],fh=ll.G,cl=ll.H,Ag=0,sm=1,kv=0;for(an=0;5>an;++an){Wa=ql[an],fh[an]=dh,cl[an]=Na,!an&&0<Gn&&(Wa+=1<<Gn);a:{var mg,Sv=Wa,pg=Lr,im=k0,GE=dh,qE=Na,gg=0,tf=pg.m,wB=V(tf,1);if(a(im,0,0,Sv),wB){var KE=V(tf,1)+1,WE=V(tf,1),ew=V(tf,WE==0?1:8);im[ew]=1,KE==2&&(im[ew=V(tf,8)]=1);var om=1}else{var tw=s(19),rw=V(tf,4)+4;if(19<rw){pg.a=3;var xg=0;break a}for(mg=0;mg<rw;++mg)tw[Xd[mg]]=V(tf,3);var _v=void 0,lm=void 0,XE=pg,YE=tw,rf=Sv,vg=im,Tv=0,au=XE.m,cm=8,nw=o(128,S);n:for(;P(nw,0,7,YE,19);){if(V(au,1)){var JE=2+2*V(au,3);if((_v=2+V(au,JE))>rf)break n}else _v=rf;for(lm=0;lm<rf&&_v--;){ce(au);var aw=nw[0+(127&O(au))];J(au,au.u+aw.g);var S0=aw.value;if(16>S0)vg[lm++]=S0,S0!=0&&(cm=S0);else{var ZE=S0==16,sw=S0-16,iw=vc[sw],ow=V(au,yv[sw])+iw;if(lm+ow>rf)break n;for(var ej=ZE?cm:0;0<ow--;)vg[lm++]=ej}}Tv=1;break n}Tv||(XE.a=3),om=Tv}(om=om&&!tf.h)&&(gg=P(GE,qE,8,im,Sv)),om&&gg!=0?xg=gg:(pg.a=3,xg=0)}if(xg==0)break r;if(sm&&w0[an]==1&&(sm=dh[Na].g==0),Ag+=dh[Na].g,Na+=xg,3>=an){var _0,Bv=k0[0];for(_0=1;_0<Wa;++_0)k0[_0]>Bv&&(Bv=k0[_0]);kv+=Bv}}if(ll.nd=sm,ll.Qb=0,sm&&(ll.qb=(fh[3][cl[3]+0].value<<24|fh[1][cl[1]+0].value<<16|fh[2][cl[2]+0].value)>>>0,Ag==0&&256>fh[0][cl[0]+0].value&&(ll.Qb=1,ll.qb+=fh[0][cl[0]+0].value<<8)),ll.jc=!ll.Qb&&6>kv,ll.jc){var bg,nf=ll;for(bg=0;bg<ti;++bg){var td=bg,af=nf.pd[td],yg=nf.G[0][nf.H[0]+td];256<=yg.value?(af.g=yg.g+256,af.value=yg.value):(af.g=0,af.value=0,td>>=In(yg,8,af),td>>=In(nf.G[1][nf.H[1]+td],16,af),td>>=In(nf.G[2][nf.H[2]+td],0,af),In(nf.G[3][nf.H[3]+td],24,af))}}}Cs.vc=Es,Cs.Wb=Ls,Cs.Ya=ts,Cs.yc=hg,Aa=1;break t}Aa=0}if(!(Se=Aa)){he.a=3;break e}if(0<bt){if(ze.ua=1<<bt,!Be(ze.Wa,bt)){he.a=1,Se=0;break e}}else ze.ua=0;var wg=he,lw=_e,tj=Oe,cw=wg.s,uw=cw.xc;if(wg.c=lw,wg.i=tj,cw.md=Ae(lw,uw),cw.wc=uw==0?-1:(1<<uw)-1,ae){he.xb=QE;break e}if((nt=s(_e*Oe))==null){he.a=1,Se=0;break e}Se=(Se=xe(he,nt,0,_e,Oe,Oe,null))&&!Le.h;break e}return Se?(Ne!=null?Ne[0]=nt:(t(nt==null),t(ae)),he.$=0,ae||De(ze)):De(ze),Se}function Ze(D,G){var ae=D.c*D.i,he=ae+G+16*G;return t(D.c<=G),D.V=s(he),D.V==null?(D.Ta=null,D.Ua=0,D.a=1,0):(D.Ta=D.V,D.Ua=D.Ba+ae+G,1)}function rt(D,G){var ae=D.C,he=G-ae,Ne=D.V,Se=D.Ba+D.c*ae;for(t(G<=D.l.o);0<he;){var _e=16<he?16:he,Oe=D.l.ma,Le=D.l.width,ze=Le*_e,nt=Oe.ca,bt=Oe.tb+Le*ae,gt=D.Ta,ut=D.Ua;ke(D,_e,Ne,Se),Pa(gt,ut,nt,bt,ze),Me(Oe,ae,ae+_e,nt,bt,Le),he-=_e,Ne+=_e*D.c,ae+=_e}t(ae==G),D.C=D.Ma=G}function _t(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Kt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ut(){this.Yb=function(){var D=[];return function G(ae,he,Ne){for(var Se=Ne[he],_e=0;_e<Se&&(ae.push(Ne.length>he+1?[]:0),!(Ne.length<he+1));_e++)G(ae[_e],he+1,Ne)}(D,0,[3,11]),D}()}function Jt(){this.jb=s(3),this.Wc=l([4,8],Ut),this.Xc=l([4,17],Ut)}function jr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function on(){this.ld=this.La=this.dd=this.tc=0}function ln(){this.Na=this.la=0}function hn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ka(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ci(){this.uc=this.M=this.Nb=0,this.wa=Array(new on),this.Y=0,this.ya=Array(new Ka),this.aa=0,this.l=new Oa}function Da(){this.y=s(16),this.f=s(8),this.ea=s(8)}function us(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new _t,this.Kc=new Bt,this.ed=new jr,this.Qa=new Kt,this.Ic=this.$c=this.Aa=0,this.D=new Ci,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Y),this.ia=0,this.pb=o(4,hn),this.Pa=new Jt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Da),this.Hd=0,this.rb=Array(new ln),this.sb=0,this.wa=Array(new on),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ka),this.L=this.aa=0,this.gd=l([4,2],on),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Oa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ds(){var D=new us;return D!=null&&(D.a=0,D.sc="OK",D.cb=0,D.Xb=0,ri||(ri=Pd)),D}function la(D,G,ae){return D.a==0&&(D.a=G,D.sc=ae,D.cb=0),0}function fs(D,G,ae){return 3<=ae&&D[G+0]==157&&D[G+1]==1&&D[G+2]==42}function Mu(D,G){if(D==null)return 0;if(D.a=0,D.sc="OK",G==null)return la(D,2,"null VP8Io passed to VP8GetHeaders()");var ae=G.data,he=G.w,Ne=G.ha;if(4>Ne)return la(D,7,"Truncated header.");var Se=ae[he+0]|ae[he+1]<<8|ae[he+2]<<16,_e=D.Od;if(_e.Rb=!(1&Se),_e.td=Se>>1&7,_e.yd=Se>>4&1,_e.ub=Se>>5,3<_e.td)return la(D,3,"Incorrect keyframe parameters.");if(!_e.yd)return la(D,4,"Frame not displayable.");he+=3,Ne-=3;var Oe=D.Kc;if(_e.Rb){if(7>Ne)return la(D,7,"cannot parse picture header");if(!fs(ae,he,Ne))return la(D,3,"Bad code word");Oe.c=16383&(ae[he+4]<<8|ae[he+3]),Oe.Td=ae[he+4]>>6,Oe.i=16383&(ae[he+6]<<8|ae[he+5]),Oe.Ud=ae[he+6]>>6,he+=7,Ne-=7,D.za=Oe.c+15>>4,D.Ub=Oe.i+15>>4,G.width=Oe.c,G.height=Oe.i,G.Da=0,G.j=0,G.v=0,G.va=G.width,G.o=G.height,G.da=0,G.ib=G.width,G.hb=G.height,G.U=G.width,G.T=G.height,a((Se=D.Pa).jb,0,255,Se.jb.length),t((Se=D.Qa)!=null),Se.Cb=0,Se.Bb=0,Se.Fb=1,a(Se.Zb,0,0,Se.Zb.length),a(Se.Lb,0,0,Se.Lb)}if(_e.ub>Ne)return la(D,7,"bad partition length");q(Se=D.m,ae,he,_e.ub),he+=_e.ub,Ne-=_e.ub,_e.Rb&&(Oe.Ld=re(Se),Oe.Kd=re(Se)),Oe=D.Qa;var Le,ze=D.Pa;if(t(Se!=null),t(Oe!=null),Oe.Cb=re(Se),Oe.Cb){if(Oe.Bb=re(Se),re(Se)){for(Oe.Fb=re(Se),Le=0;4>Le;++Le)Oe.Zb[Le]=re(Se)?z(Se,7):0;for(Le=0;4>Le;++Le)Oe.Lb[Le]=re(Se)?z(Se,6):0}if(Oe.Bb)for(Le=0;3>Le;++Le)ze.jb[Le]=re(Se)?H(Se,8):255}else Oe.Bb=0;if(Se.Ka)return la(D,3,"cannot parse segment header");if((Oe=D.ed).zd=re(Se),Oe.Tb=H(Se,6),Oe.wb=H(Se,3),Oe.Pc=re(Se),Oe.Pc&&re(Se)){for(ze=0;4>ze;++ze)re(Se)&&(Oe.vd[ze]=z(Se,6));for(ze=0;4>ze;++ze)re(Se)&&(Oe.od[ze]=z(Se,6))}if(D.L=Oe.Tb==0?0:Oe.zd?1:2,Se.Ka)return la(D,3,"cannot parse filter header");var nt=Ne;if(Ne=Le=he,he=Le+nt,Oe=nt,D.Xb=(1<<H(D.m,2))-1,nt<3*(ze=D.Xb))ae=7;else{for(Le+=3*ze,Oe-=3*ze,nt=0;nt<ze;++nt){var bt=ae[Ne+0]|ae[Ne+1]<<8|ae[Ne+2]<<16;bt>Oe&&(bt=Oe),q(D.Jc[+nt],ae,Le,bt),Le+=bt,Oe-=bt,Ne+=3}q(D.Jc[+ze],ae,Le,Oe),ae=Le<he?0:5}if(ae!=0)return la(D,ae,"cannot parse partitions");for(ae=H(Le=D.m,7),Ne=re(Le)?z(Le,4):0,he=re(Le)?z(Le,4):0,Oe=re(Le)?z(Le,4):0,ze=re(Le)?z(Le,4):0,Le=re(Le)?z(Le,4):0,nt=D.Qa,bt=0;4>bt;++bt){if(nt.Cb){var gt=nt.Zb[bt];nt.Fb||(gt+=ae)}else{if(0<bt){D.pb[bt]=D.pb[0];continue}gt=ae}var ut=D.pb[bt];ut.Sc[0]=cg[ta(gt+Ne,127)],ut.Sc[1]=ug[ta(gt+0,127)],ut.Eb[0]=2*cg[ta(gt+he,127)],ut.Eb[1]=101581*ug[ta(gt+Oe,127)]>>16,8>ut.Eb[1]&&(ut.Eb[1]=8),ut.Qc[0]=cg[ta(gt+ze,117)],ut.Qc[1]=ug[ta(gt+Le,127)],ut.lc=gt+Le}if(!_e.Rb)return la(D,4,"Not a key frame.");for(re(Se),_e=D.Pa,ae=0;4>ae;++ae){for(Ne=0;8>Ne;++Ne)for(he=0;3>he;++he)for(Oe=0;11>Oe;++Oe)ze=ue(Se,C0[ae][Ne][he][Oe])?H(Se,8):Yu[ae][Ne][he][Oe],_e.Wc[ae][Ne].Yb[he][Oe]=ze;for(Ne=0;17>Ne;++Ne)_e.Xc[ae][Ne]=_e.Wc[ae][HE[Ne]]}return D.kc=re(Se),D.kc&&(D.Bd=H(Se,8)),D.cb=1}function Pd(D,G,ae,he,Ne,Se,_e){var Oe=G[Ne].Yb[ae];for(ae=0;16>Ne;++Ne){if(!ue(D,Oe[ae+0]))return Ne;for(;!ue(D,Oe[ae+1]);)if(Oe=G[++Ne].Yb[0],ae=0,Ne==16)return 16;var Le=G[Ne+1].Yb;if(ue(D,Oe[ae+2])){var ze=D,nt=0;if(ue(ze,(gt=Oe)[(bt=ae)+3]))if(ue(ze,gt[bt+6])){for(Oe=0,bt=2*(nt=ue(ze,gt[bt+8]))+(gt=ue(ze,gt[bt+9+nt])),nt=0,gt=ms[bt];gt[Oe];++Oe)nt+=nt+ue(ze,gt[Oe]);nt+=3+(8<<bt)}else ue(ze,gt[bt+7])?(nt=7+2*ue(ze,165),nt+=ue(ze,145)):nt=5+ue(ze,159);else nt=ue(ze,gt[bt+4])?3+ue(ze,gt[bt+5]):2;Oe=Le[2]}else nt=1,Oe=Le[1];Le=_e+Yn[Ne],0>(ze=D).b&&oe(ze);var bt,gt=ze.b,ut=(bt=ze.Ca>>1)-(ze.I>>gt)>>31;--ze.b,ze.Ca+=ut,ze.Ca|=1,ze.I-=(bt+1&ut)<<gt,Se[Le]=((nt^ut)-ut)*he[(0<Ne)+0]}return 16}function $l(D){var G=D.rb[D.sb-1];G.la=0,G.Na=0,a(D.zc,0,0,D.zc.length),D.ja=0}function kr(D,G){if(D==null)return 0;if(G==null)return la(D,2,"NULL VP8Io parameter in VP8Decode().");if(!D.cb&&!Mu(D,G))return 0;if(t(D.cb),G.ac==null||G.ac(G)){G.ob&&(D.L=0);var ae=ef[D.L];if(D.L==2?(D.yb=0,D.zb=0):(D.yb=G.v-ae>>4,D.zb=G.j-ae>>4,0>D.yb&&(D.yb=0),0>D.zb&&(D.zb=0)),D.Va=G.o+15+ae>>4,D.Hb=G.va+15+ae>>4,D.Hb>D.za&&(D.Hb=D.za),D.Va>D.Ub&&(D.Va=D.Ub),0<D.L){var he=D.ed;for(ae=0;4>ae;++ae){var Ne;if(D.Qa.Cb){var Se=D.Qa.Lb[ae];D.Qa.Fb||(Se+=he.Tb)}else Se=he.Tb;for(Ne=0;1>=Ne;++Ne){var _e=D.gd[ae][Ne],Oe=Se;if(he.Pc&&(Oe+=he.vd[0],Ne&&(Oe+=he.od[0])),0<(Oe=0>Oe?0:63<Oe?63:Oe)){var Le=Oe;0<he.wb&&(Le=4<he.wb?Le>>2:Le>>1)>9-he.wb&&(Le=9-he.wb),1>Le&&(Le=1),_e.dd=Le,_e.tc=2*Oe+Le,_e.ld=40<=Oe?2:15<=Oe?1:0}else _e.tc=0;_e.La=Ne}}}ae=0}else la(D,6,"Frame setup failed"),ae=D.a;if(ae=ae==0){if(ae){D.$c=0,0<D.Aa||(D.Ic=$E);e:{ae=D.Ic,he=4*(Le=D.za);var ze=32*Le,nt=Le+1,bt=0<D.L?Le*(0<D.Aa?2:1):0,gt=(D.Aa==2?2:1)*Le;if((_e=he+832+(Ne=3*(16*ae+ef[D.L])/2*ze)+(Se=D.Fa!=null&&0<D.Fa.length?D.Kc.c*D.Kc.i:0))!=_e)ae=0;else{if(_e>D.Vb){if(D.Vb=0,D.Ec=s(_e),D.Fc=0,D.Ec==null){ae=la(D,1,"no memory during frame initialization.");break e}D.Vb=_e}_e=D.Ec,Oe=D.Fc,D.Ac=_e,D.Bc=Oe,Oe+=he,D.Gd=o(ze,Da),D.Hd=0,D.rb=o(nt+1,ln),D.sb=1,D.wa=bt?o(bt,on):null,D.Y=0,D.D.Nb=0,D.D.wa=D.wa,D.D.Y=D.Y,0<D.Aa&&(D.D.Y+=Le),t(!0),D.oc=_e,D.pc=Oe,Oe+=832,D.ya=o(gt,Ka),D.aa=0,D.D.ya=D.ya,D.D.aa=D.aa,D.Aa==2&&(D.D.aa+=Le),D.R=16*Le,D.B=8*Le,Le=(ze=ef[D.L])*D.R,ze=ze/2*D.B,D.sa=_e,D.ta=Oe+Le,D.qa=D.sa,D.ra=D.ta+16*ae*D.R+ze,D.Ha=D.qa,D.Ia=D.ra+8*ae*D.B+ze,D.$c=0,Oe+=Ne,D.mb=Se?_e:null,D.nb=Se?Oe:null,t(Oe+Se<=D.Fc+D.Vb),$l(D),a(D.Ac,D.Bc,0,he),ae=1}}if(ae){if(G.ka=0,G.y=D.sa,G.O=D.ta,G.f=D.qa,G.N=D.ra,G.ea=D.Ha,G.Vd=D.Ia,G.fa=D.R,G.Rc=D.B,G.F=null,G.J=0,!qd){for(ae=-255;255>=ae;++ae)Ns[255+ae]=0>ae?-ae:ae;for(ae=-1020;1020>=ae;++ae)gc[1020+ae]=-128>ae?-128:127<ae?127:ae;for(ae=-112;112>=ae;++ae)nh[112+ae]=-16>ae?-16:15<ae?15:ae;for(ae=-255;510>=ae;++ae)ah[255+ae]=0>ae?0:255<ae?255:ae;qd=1}Ku=Qi,tu=Zo,ru=Hi,Rs=Pn,ol=el,hs=Ei,g0=Vu,Wu=Jc,ZA=zf,Zf=h0,eh=$f,th=Ud,x0=Hd,em=$u,rh=zl,Gd=io,v0=Fs,As=WA,Io[0]=ao,Io[1]=Fd,Io[2]=dc,Io[3]=KA,Io[4]=tl,Io[5]=fc,Io[6]=To,Io[7]=rl,Io[8]=Yc,Io[9]=Uu,Jd[0]=cc,Jd[1]=u0,Jd[2]=Kc,Jd[3]=Vf,Jd[4]=wa,Jd[5]=Xc,Jd[6]=uc,Kl[0]=hc,Kl[1]=Rd,Kl[2]=d0,Kl[3]=nl,Kl[4]=kn,Kl[5]=Ps,Kl[6]=Hu,ae=1}else ae=0}ae&&(ae=function(ut,$t){for(ut.M=0;ut.M<ut.Va;++ut.M){var kt,at=ut.Jc[ut.M&ut.Xb],it=ut.m,Mt=ut;for(kt=0;kt<Mt.za;++kt){var zt=it,Qt=Mt,Ar=Qt.Ac,or=Qt.Bc+4*kt,Br=Qt.zc,cr=Qt.ya[Qt.aa+kt];if(Qt.Qa.Bb?cr.$b=ue(zt,Qt.Pa.jb[0])?2+ue(zt,Qt.Pa.jb[2]):ue(zt,Qt.Pa.jb[1]):cr.$b=0,Qt.kc&&(cr.Ad=ue(zt,Qt.Bd)),cr.Za=!ue(zt,145)+0,cr.Za){var zn=cr.Ob,ra=0;for(Qt=0;4>Qt;++Qt){var wn,pn=Br[0+Qt];for(wn=0;4>wn;++wn){pn=Yy[Ar[or+wn]][pn];for(var Aa=ih[ue(zt,pn[0])];0<Aa;)Aa=ih[2*Aa+ue(zt,pn[Aa])];pn=-Aa,Ar[or+wn]=pn}n(zn,ra,Ar,or,4),ra+=4,Br[0+Qt]=pn}}else pn=ue(zt,156)?ue(zt,128)?1:3:ue(zt,163)?2:0,cr.Ob[0]=pn,a(Ar,or,pn,4),a(Br,0,pn,4);cr.Dd=ue(zt,142)?ue(zt,114)?ue(zt,183)?1:3:2:0}if(Mt.m.Ka)return la(ut,7,"Premature end-of-partition0 encountered.");for(;ut.ja<ut.za;++ut.ja){if(Mt=at,zt=(it=ut).rb[it.sb-1],Ar=it.rb[it.sb+it.ja],kt=it.ya[it.aa+it.ja],or=it.kc?kt.Ad:0)zt.la=Ar.la=0,kt.Za||(zt.Na=Ar.Na=0),kt.Hc=0,kt.Gc=0,kt.ia=0;else{var na,an;if(zt=Ar,Ar=Mt,or=it.Pa.Xc,Br=it.ya[it.aa+it.ja],cr=it.pb[Br.$b],Qt=Br.ad,zn=0,ra=it.rb[it.sb-1],pn=wn=0,a(Qt,zn,0,384),Br.Za)var Na=0,Lr=or[3];else{Aa=s(16);var Wr=zt.Na+ra.Na;if(Wr=ri(Ar,or[1],Wr,cr.Eb,0,Aa,0),zt.Na=ra.Na=(0<Wr)+0,1<Wr)Ku(Aa,0,Qt,zn);else{var Hn=Aa[0]+3>>3;for(Aa=0;256>Aa;Aa+=16)Qt[zn+Aa]=Hn}Na=1,Lr=or[0]}var Gn=15&zt.la,_i=15&ra.la;for(Aa=0;4>Aa;++Aa){var si=1&_i;for(Hn=an=0;4>Hn;++Hn)Gn=Gn>>1|(si=(Wr=ri(Ar,Lr,Wr=si+(1&Gn),cr.Sc,Na,Qt,zn))>Na)<<7,an=an<<2|(3<Wr?3:1<Wr?2:Qt[zn+0]!=0),zn+=16;Gn>>=4,_i=_i>>1|si<<7,wn=(wn<<8|an)>>>0}for(Lr=Gn,Na=_i>>4,na=0;4>na;na+=2){for(an=0,Gn=zt.la>>4+na,_i=ra.la>>4+na,Aa=0;2>Aa;++Aa){for(si=1&_i,Hn=0;2>Hn;++Hn)Wr=si+(1&Gn),Gn=Gn>>1|(si=0<(Wr=ri(Ar,or[2],Wr,cr.Qc,0,Qt,zn)))<<3,an=an<<2|(3<Wr?3:1<Wr?2:Qt[zn+0]!=0),zn+=16;Gn>>=2,_i=_i>>1|si<<5}pn|=an<<4*na,Lr|=Gn<<4<<na,Na|=(240&_i)<<na}zt.la=Lr,ra.la=Na,Br.Hc=wn,Br.Gc=pn,Br.ia=43690&pn?0:cr.ia,or=!(wn|pn)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[kt.$b][kt.Za],it.wa[it.Y+it.ja].La|=!or),Mt.Ka)return la(ut,7,"Premature end-of-file encountered.")}if($l(ut),it=$t,Mt=1,kt=(at=ut).D,zt=0<at.L&&at.M>=at.zb&&at.M<=at.Va,at.Aa==0)e:{if(kt.M=at.M,kt.uc=zt,al(at,kt),Mt=1,kt=(an=at.D).Nb,zt=(pn=ef[at.L])*at.R,Ar=pn/2*at.B,Aa=16*kt*at.R,Hn=8*kt*at.B,or=at.sa,Br=at.ta-zt+Aa,cr=at.qa,Qt=at.ra-Ar+Hn,zn=at.Ha,ra=at.Ia-Ar+Hn,_i=(Gn=an.M)==0,wn=Gn>=at.Va-1,at.Aa==2&&al(at,an),an.uc)for(si=(Wr=at).D.M,t(Wr.D.uc),an=Wr.yb;an<Wr.Hb;++an){Na=an,Lr=si;var Cs=(Es=(Wa=Wr).D).Nb;na=Wa.R;var Es=Es.wa[Es.Y+Na],Ls=Wa.sa,bc=Wa.ta+16*Cs*na+16*Na,aa=Es.dd,Ms=Es.tc;if(Ms!=0)if(t(3<=Ms),Wa.L==1)0<Na&&Gd(Ls,bc,na,Ms+4),Es.La&&As(Ls,bc,na,Ms),0<Lr&&rh(Ls,bc,na,Ms+4),Es.La&&v0(Ls,bc,na,Ms);else{var nu=Wa.B,ch=Wa.qa,j0=Wa.ra+8*Cs*nu+8*Na,uh=Wa.Ha,Wa=Wa.Ia+8*Cs*nu+8*Na;Cs=Es.ld,0<Na&&(Wu(Ls,bc,na,Ms+4,aa,Cs),Zf(ch,j0,uh,Wa,nu,Ms+4,aa,Cs)),Es.La&&(th(Ls,bc,na,Ms,aa,Cs),em(ch,j0,uh,Wa,nu,Ms,aa,Cs)),0<Lr&&(g0(Ls,bc,na,Ms+4,aa,Cs),ZA(ch,j0,uh,Wa,nu,Ms+4,aa,Cs)),Es.La&&(eh(Ls,bc,na,Ms,aa,Cs),x0(ch,j0,uh,Wa,nu,Ms,aa,Cs))}}if(at.ia&&alert("todo:DitherRow"),it.put!=null){if(an=16*Gn,Gn=16*(Gn+1),_i?(it.y=at.sa,it.O=at.ta+Aa,it.f=at.qa,it.N=at.ra+Hn,it.ea=at.Ha,it.W=at.Ia+Hn):(an-=pn,it.y=or,it.O=Br,it.f=cr,it.N=Qt,it.ea=zn,it.W=ra),wn||(Gn-=pn),Gn>it.o&&(Gn=it.o),it.F=null,it.J=null,at.Fa!=null&&0<at.Fa.length&&an<Gn&&(it.J=qf(at,it,an,Gn-an),it.F=at.mb,it.F==null&&it.F.length==0)){Mt=la(at,3,"Could not decode alpha data.");break e}an<it.j&&(pn=it.j-an,an=it.j,t(!(1&pn)),it.O+=at.R*pn,it.N+=at.B*(pn>>1),it.W+=at.B*(pn>>1),it.F!=null&&(it.J+=it.width*pn)),an<Gn&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,it.F!=null&&(it.J+=it.v),it.ka=an-it.j,it.U=it.va-it.v,it.T=Gn-an,Mt=it.put(it))}kt+1!=at.Ic||wn||(n(at.sa,at.ta-zt,or,Br+16*at.R,zt),n(at.qa,at.ra-Ar,cr,Qt+8*at.B,Ar),n(at.Ha,at.Ia-Ar,zn,ra+8*at.B,Ar))}if(!Mt)return la(ut,6,"Output aborted.")}return 1}(D,G)),G.bc!=null&&G.bc(G),ae&=1}return ae?(D.cb=0,ae):0}function rn(D,G,ae,he,Ne){Ne=D[G+ae+32*he]+(Ne>>3),D[G+ae+32*he]=-256&Ne?0>Ne?0:255:Ne}function yn(D,G,ae,he,Ne,Se){rn(D,G,0,ae,he+Ne),rn(D,G,1,ae,he+Se),rn(D,G,2,ae,he-Se),rn(D,G,3,ae,he-Ne)}function Ur(D){return(20091*D>>16)+D}function Un(D,G,ae,he){var Ne,Se=0,_e=s(16);for(Ne=0;4>Ne;++Ne){var Oe=D[G+0]+D[G+8],Le=D[G+0]-D[G+8],ze=(35468*D[G+4]>>16)-Ur(D[G+12]),nt=Ur(D[G+4])+(35468*D[G+12]>>16);_e[Se+0]=Oe+nt,_e[Se+1]=Le+ze,_e[Se+2]=Le-ze,_e[Se+3]=Oe-nt,Se+=4,G++}for(Ne=Se=0;4>Ne;++Ne)Oe=(D=_e[Se+0]+4)+_e[Se+8],Le=D-_e[Se+8],ze=(35468*_e[Se+4]>>16)-Ur(_e[Se+12]),rn(ae,he,0,0,Oe+(nt=Ur(_e[Se+4])+(35468*_e[Se+12]>>16))),rn(ae,he,1,0,Le+ze),rn(ae,he,2,0,Le-ze),rn(ae,he,3,0,Oe-nt),Se++,he+=32}function Ei(D,G,ae,he){var Ne=D[G+0]+4,Se=35468*D[G+4]>>16,_e=Ur(D[G+4]),Oe=35468*D[G+1]>>16;yn(ae,he,0,Ne+_e,D=Ur(D[G+1]),Oe),yn(ae,he,1,Ne+Se,D,Oe),yn(ae,he,2,Ne-Se,D,Oe),yn(ae,he,3,Ne-_e,D,Oe)}function Zo(D,G,ae,he,Ne){Un(D,G,ae,he),Ne&&Un(D,G+16,ae,he+4)}function Hi(D,G,ae,he){tu(D,G+0,ae,he,1),tu(D,G+32,ae,he+128,1)}function Pn(D,G,ae,he){var Ne;for(D=D[G+0]+4,Ne=0;4>Ne;++Ne)for(G=0;4>G;++G)rn(ae,he,G,Ne,D)}function el(D,G,ae,he){D[G+0]&&Rs(D,G+0,ae,he),D[G+16]&&Rs(D,G+16,ae,he+4),D[G+32]&&Rs(D,G+32,ae,he+128),D[G+48]&&Rs(D,G+48,ae,he+128+4)}function Qi(D,G,ae,he){var Ne,Se=s(16);for(Ne=0;4>Ne;++Ne){var _e=D[G+0+Ne]+D[G+12+Ne],Oe=D[G+4+Ne]+D[G+8+Ne],Le=D[G+4+Ne]-D[G+8+Ne],ze=D[G+0+Ne]-D[G+12+Ne];Se[0+Ne]=_e+Oe,Se[8+Ne]=_e-Oe,Se[4+Ne]=ze+Le,Se[12+Ne]=ze-Le}for(Ne=0;4>Ne;++Ne)_e=(D=Se[0+4*Ne]+3)+Se[3+4*Ne],Oe=Se[1+4*Ne]+Se[2+4*Ne],Le=Se[1+4*Ne]-Se[2+4*Ne],ze=D-Se[3+4*Ne],ae[he+0]=_e+Oe>>3,ae[he+16]=ze+Le>>3,ae[he+32]=_e-Oe>>3,ae[he+48]=ze-Le>>3,he+=64}function _o(D,G,ae){var he,Ne=G-32,Se=ki,_e=255-D[Ne-1];for(he=0;he<ae;++he){var Oe,Le=Se,ze=_e+D[G-1];for(Oe=0;Oe<ae;++Oe)D[G+Oe]=Le[ze+D[Ne+Oe]];G+=32}}function Fd(D,G){_o(D,G,4)}function Rd(D,G){_o(D,G,8)}function u0(D,G){_o(D,G,16)}function Kc(D,G){var ae;for(ae=0;16>ae;++ae)n(D,G+32*ae,D,G-32,16)}function Vf(D,G){var ae;for(ae=16;0<ae;--ae)a(D,G,D[G-1],16),G+=32}function Wc(D,G,ae){var he;for(he=0;16>he;++he)a(G,ae+32*he,D,16)}function cc(D,G){var ae,he=16;for(ae=0;16>ae;++ae)he+=D[G-1+32*ae]+D[G+ae-32];Wc(he>>5,D,G)}function wa(D,G){var ae,he=8;for(ae=0;16>ae;++ae)he+=D[G-1+32*ae];Wc(he>>4,D,G)}function Xc(D,G){var ae,he=8;for(ae=0;16>ae;++ae)he+=D[G+ae-32];Wc(he>>4,D,G)}function uc(D,G){Wc(128,D,G)}function Hr(D,G,ae){return D+2*G+ae+2>>2}function dc(D,G){var ae,he=G-32;for(he=new Uint8Array([Hr(D[he-1],D[he+0],D[he+1]),Hr(D[he+0],D[he+1],D[he+2]),Hr(D[he+1],D[he+2],D[he+3]),Hr(D[he+2],D[he+3],D[he+4])]),ae=0;4>ae;++ae)n(D,G+32*ae,he,0,he.length)}function KA(D,G){var ae=D[G-1],he=D[G-1+32],Ne=D[G-1+64],Se=D[G-1+96];le(D,G+0,16843009*Hr(D[G-1-32],ae,he)),le(D,G+32,16843009*Hr(ae,he,Ne)),le(D,G+64,16843009*Hr(he,Ne,Se)),le(D,G+96,16843009*Hr(Ne,Se,Se))}function ao(D,G){var ae,he=4;for(ae=0;4>ae;++ae)he+=D[G+ae-32]+D[G-1+32*ae];for(he>>=3,ae=0;4>ae;++ae)a(D,G+32*ae,he,4)}function tl(D,G){var ae=D[G-1+0],he=D[G-1+32],Ne=D[G-1+64],Se=D[G-1-32],_e=D[G+0-32],Oe=D[G+1-32],Le=D[G+2-32],ze=D[G+3-32];D[G+0+96]=Hr(he,Ne,D[G-1+96]),D[G+1+96]=D[G+0+64]=Hr(ae,he,Ne),D[G+2+96]=D[G+1+64]=D[G+0+32]=Hr(Se,ae,he),D[G+3+96]=D[G+2+64]=D[G+1+32]=D[G+0+0]=Hr(_e,Se,ae),D[G+3+64]=D[G+2+32]=D[G+1+0]=Hr(Oe,_e,Se),D[G+3+32]=D[G+2+0]=Hr(Le,Oe,_e),D[G+3+0]=Hr(ze,Le,Oe)}function To(D,G){var ae=D[G+1-32],he=D[G+2-32],Ne=D[G+3-32],Se=D[G+4-32],_e=D[G+5-32],Oe=D[G+6-32],Le=D[G+7-32];D[G+0+0]=Hr(D[G+0-32],ae,he),D[G+1+0]=D[G+0+32]=Hr(ae,he,Ne),D[G+2+0]=D[G+1+32]=D[G+0+64]=Hr(he,Ne,Se),D[G+3+0]=D[G+2+32]=D[G+1+64]=D[G+0+96]=Hr(Ne,Se,_e),D[G+3+32]=D[G+2+64]=D[G+1+96]=Hr(Se,_e,Oe),D[G+3+64]=D[G+2+96]=Hr(_e,Oe,Le),D[G+3+96]=Hr(Oe,Le,Le)}function fc(D,G){var ae=D[G-1+0],he=D[G-1+32],Ne=D[G-1+64],Se=D[G-1-32],_e=D[G+0-32],Oe=D[G+1-32],Le=D[G+2-32],ze=D[G+3-32];D[G+0+0]=D[G+1+64]=Se+_e+1>>1,D[G+1+0]=D[G+2+64]=_e+Oe+1>>1,D[G+2+0]=D[G+3+64]=Oe+Le+1>>1,D[G+3+0]=Le+ze+1>>1,D[G+0+96]=Hr(Ne,he,ae),D[G+0+64]=Hr(he,ae,Se),D[G+0+32]=D[G+1+96]=Hr(ae,Se,_e),D[G+1+32]=D[G+2+96]=Hr(Se,_e,Oe),D[G+2+32]=D[G+3+96]=Hr(_e,Oe,Le),D[G+3+32]=Hr(Oe,Le,ze)}function rl(D,G){var ae=D[G+0-32],he=D[G+1-32],Ne=D[G+2-32],Se=D[G+3-32],_e=D[G+4-32],Oe=D[G+5-32],Le=D[G+6-32],ze=D[G+7-32];D[G+0+0]=ae+he+1>>1,D[G+1+0]=D[G+0+64]=he+Ne+1>>1,D[G+2+0]=D[G+1+64]=Ne+Se+1>>1,D[G+3+0]=D[G+2+64]=Se+_e+1>>1,D[G+0+32]=Hr(ae,he,Ne),D[G+1+32]=D[G+0+96]=Hr(he,Ne,Se),D[G+2+32]=D[G+1+96]=Hr(Ne,Se,_e),D[G+3+32]=D[G+2+96]=Hr(Se,_e,Oe),D[G+3+64]=Hr(_e,Oe,Le),D[G+3+96]=Hr(Oe,Le,ze)}function Uu(D,G){var ae=D[G-1+0],he=D[G-1+32],Ne=D[G-1+64],Se=D[G-1+96];D[G+0+0]=ae+he+1>>1,D[G+2+0]=D[G+0+32]=he+Ne+1>>1,D[G+2+32]=D[G+0+64]=Ne+Se+1>>1,D[G+1+0]=Hr(ae,he,Ne),D[G+3+0]=D[G+1+32]=Hr(he,Ne,Se),D[G+3+32]=D[G+1+64]=Hr(Ne,Se,Se),D[G+3+64]=D[G+2+64]=D[G+0+96]=D[G+1+96]=D[G+2+96]=D[G+3+96]=Se}function Yc(D,G){var ae=D[G-1+0],he=D[G-1+32],Ne=D[G-1+64],Se=D[G-1+96],_e=D[G-1-32],Oe=D[G+0-32],Le=D[G+1-32],ze=D[G+2-32];D[G+0+0]=D[G+2+32]=ae+_e+1>>1,D[G+0+32]=D[G+2+64]=he+ae+1>>1,D[G+0+64]=D[G+2+96]=Ne+he+1>>1,D[G+0+96]=Se+Ne+1>>1,D[G+3+0]=Hr(Oe,Le,ze),D[G+2+0]=Hr(_e,Oe,Le),D[G+1+0]=D[G+3+32]=Hr(ae,_e,Oe),D[G+1+32]=D[G+3+64]=Hr(he,ae,_e),D[G+1+64]=D[G+3+96]=Hr(Ne,he,ae),D[G+1+96]=Hr(Se,Ne,he)}function d0(D,G){var ae;for(ae=0;8>ae;++ae)n(D,G+32*ae,D,G-32,8)}function nl(D,G){var ae;for(ae=0;8>ae;++ae)a(D,G,D[G-1],8),G+=32}function so(D,G,ae){var he;for(he=0;8>he;++he)a(G,ae+32*he,D,8)}function hc(D,G){var ae,he=8;for(ae=0;8>ae;++ae)he+=D[G+ae-32]+D[G-1+32*ae];so(he>>4,D,G)}function Ps(D,G){var ae,he=4;for(ae=0;8>ae;++ae)he+=D[G+ae-32];so(he>>3,D,G)}function kn(D,G){var ae,he=4;for(ae=0;8>ae;++ae)he+=D[G-1+32*ae];so(he>>3,D,G)}function Hu(D,G){so(128,D,G)}function Ac(D,G,ae){var he=D[G-ae],Ne=D[G+0],Se=3*(Ne-he)+vv[1020+D[G-2*ae]-D[G+ae]],_e=b0[112+(Se+4>>3)];D[G-ae]=ki[255+he+b0[112+(Se+3>>3)]],D[G+0]=ki[255+Ne-_e]}function f0(D,G,ae,he){var Ne=D[G+0],Se=D[G+ae];return xc[255+D[G-2*ae]-D[G-ae]]>he||xc[255+Se-Ne]>he}function Ld(D,G,ae,he){return 4*xc[255+D[G-ae]-D[G+0]]+xc[255+D[G-2*ae]-D[G+ae]]<=he}function Md(D,G,ae,he,Ne){var Se=D[G-3*ae],_e=D[G-2*ae],Oe=D[G-ae],Le=D[G+0],ze=D[G+ae],nt=D[G+2*ae],bt=D[G+3*ae];return 4*xc[255+Oe-Le]+xc[255+_e-ze]>he?0:xc[255+D[G-4*ae]-Se]<=Ne&&xc[255+Se-_e]<=Ne&&xc[255+_e-Oe]<=Ne&&xc[255+bt-nt]<=Ne&&xc[255+nt-ze]<=Ne&&xc[255+ze-Le]<=Ne}function zl(D,G,ae,he){var Ne=2*he+1;for(he=0;16>he;++he)Ld(D,G+he,ae,Ne)&&Ac(D,G+he,ae)}function io(D,G,ae,he){var Ne=2*he+1;for(he=0;16>he;++he)Ld(D,G+he*ae,1,Ne)&&Ac(D,G+he*ae,1)}function Fs(D,G,ae,he){var Ne;for(Ne=3;0<Ne;--Ne)zl(D,G+=4*ae,ae,he)}function WA(D,G,ae,he){var Ne;for(Ne=3;0<Ne;--Ne)io(D,G+=4,ae,he)}function Qu(D,G,ae,he,Ne,Se,_e,Oe){for(Se=2*Se+1;0<Ne--;){if(Md(D,G,ae,Se,_e))if(f0(D,G,ae,Oe))Ac(D,G,ae);else{var Le=D,ze=G,nt=ae,bt=Le[ze-2*nt],gt=Le[ze-nt],ut=Le[ze+0],$t=Le[ze+nt],kt=Le[ze+2*nt],at=27*(Mt=vv[1020+3*(ut-gt)+vv[1020+bt-$t]])+63>>7,it=18*Mt+63>>7,Mt=9*Mt+63>>7;Le[ze-3*nt]=ki[255+Le[ze-3*nt]+Mt],Le[ze-2*nt]=ki[255+bt+it],Le[ze-nt]=ki[255+gt+at],Le[ze+0]=ki[255+ut-at],Le[ze+nt]=ki[255+$t-it],Le[ze+2*nt]=ki[255+kt-Mt]}G+=he}}function Vi(D,G,ae,he,Ne,Se,_e,Oe){for(Se=2*Se+1;0<Ne--;){if(Md(D,G,ae,Se,_e))if(f0(D,G,ae,Oe))Ac(D,G,ae);else{var Le=D,ze=G,nt=ae,bt=Le[ze-nt],gt=Le[ze+0],ut=Le[ze+nt],$t=b0[112+((kt=3*(gt-bt))+4>>3)],kt=b0[112+(kt+3>>3)],at=$t+1>>1;Le[ze-2*nt]=ki[255+Le[ze-2*nt]+at],Le[ze-nt]=ki[255+bt+kt],Le[ze+0]=ki[255+gt-$t],Le[ze+nt]=ki[255+ut-at]}G+=he}}function Vu(D,G,ae,he,Ne,Se){Qu(D,G,ae,1,16,he,Ne,Se)}function Jc(D,G,ae,he,Ne,Se){Qu(D,G,1,ae,16,he,Ne,Se)}function $f(D,G,ae,he,Ne,Se){var _e;for(_e=3;0<_e;--_e)Vi(D,G+=4*ae,ae,1,16,he,Ne,Se)}function Ud(D,G,ae,he,Ne,Se){var _e;for(_e=3;0<_e;--_e)Vi(D,G+=4,1,ae,16,he,Ne,Se)}function zf(D,G,ae,he,Ne,Se,_e,Oe){Qu(D,G,Ne,1,8,Se,_e,Oe),Qu(ae,he,Ne,1,8,Se,_e,Oe)}function h0(D,G,ae,he,Ne,Se,_e,Oe){Qu(D,G,1,Ne,8,Se,_e,Oe),Qu(ae,he,1,Ne,8,Se,_e,Oe)}function Hd(D,G,ae,he,Ne,Se,_e,Oe){Vi(D,G+4*Ne,Ne,1,8,Se,_e,Oe),Vi(ae,he+4*Ne,Ne,1,8,Se,_e,Oe)}function $u(D,G,ae,he,Ne,Se,_e,Oe){Vi(D,G+4,1,Ne,8,Se,_e,Oe),Vi(ae,he+4,1,Ne,8,Se,_e,Oe)}function Qd(){this.ba=new nr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Zt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zu(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new S}function XA(){this.xb=this.a=0,this.l=new Oa,this.ca=new nr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zu,this.ab=0,this.gc=o(4,Vd),this.Oc=0}function Zc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Oa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Gu(D,G,ae,he,Ne,Se,_e){for(D=D==null?0:D[G+0],G=0;G<_e;++G)Ne[Se+G]=D+ae[he+G]&255,D=Ne[Se+G]}function $d(D,G,ae,he,Ne,Se,_e){var Oe;if(D==null)Gu(null,null,ae,he,Ne,Se,_e);else for(Oe=0;Oe<_e;++Oe)Ne[Se+Oe]=D[G+Oe]+ae[he+Oe]&255}function oo(D,G,ae,he,Ne,Se,_e){if(D==null)Gu(null,null,ae,he,Ne,Se,_e);else{var Oe,Le=D[G+0],ze=Le,nt=Le;for(Oe=0;Oe<_e;++Oe)ze=nt+(Le=D[G+Oe])-ze,nt=ae[he+Oe]+(-256&ze?0>ze?0:255:ze)&255,ze=Le,Ne[Se+Oe]=nt}}function qf(D,G,ae,he){var Ne=G.width,Se=G.o;if(t(D!=null&&G!=null),0>ae||0>=he||ae+he>Se)return null;if(!D.Cc){if(D.ga==null){var _e;if(D.ga=new Zc,(_e=D.ga==null)||(_e=G.width*G.o,t(D.Gb.length==0),D.Gb=s(_e),D.Uc=0,D.Gb==null?_e=0:(D.mb=D.Gb,D.nb=D.Uc,D.rc=null,_e=1),_e=!_e),!_e){_e=D.ga;var Oe=D.Fa,Le=D.P,ze=D.qc,nt=D.mb,bt=D.nb,gt=Le+1,ut=ze-1,$t=_e.l;if(t(Oe!=null&&nt!=null&&G!=null),Ju[0]=null,Ju[1]=Gu,Ju[2]=$d,Ju[3]=oo,_e.ca=nt,_e.tb=bt,_e.c=G.width,_e.i=G.height,t(0<_e.c&&0<_e.i),1>=ze)G=0;else if(_e.$a=Oe[Le+0]>>0&3,_e.Z=Oe[Le+0]>>2&3,_e.Lc=Oe[Le+0]>>4&3,Le=Oe[Le+0]>>6&3,0>_e.$a||1<_e.$a||4<=_e.Z||1<_e.Lc||Le)G=0;else if($t.put=Vn,$t.ac=_r,$t.bc=qa,$t.ma=_e,$t.width=G.width,$t.height=G.height,$t.Da=G.Da,$t.v=G.v,$t.va=G.va,$t.j=G.j,$t.o=G.o,_e.$a)e:{t(_e.$a==1),G=Ge();t:for(;;){if(G==null){G=0;break e}if(t(_e!=null),_e.mc=G,G.c=_e.c,G.i=_e.i,G.l=_e.l,G.l.ma=_e,G.l.width=_e.c,G.l.height=_e.i,G.a=0,W(G.m,Oe,gt,ut),!Ue(_e.c,_e.i,1,G,null)||(G.ab==1&&G.gc[0].hc==3&&Re(G.s)?(_e.ic=1,Oe=G.c*G.i,G.Ta=null,G.Ua=0,G.V=s(Oe),G.Ba=0,G.V==null?(G.a=1,G=0):G=1):(_e.ic=0,G=Ze(G,_e.c)),!G))break t;G=1;break e}_e.mc=null,G=0}else G=ut>=_e.c*_e.i;_e=!G}if(_e)return null;D.ga.Lc!=1?D.Ga=0:he=Se-ae}t(D.ga!=null),t(ae+he<=Se);e:{if(G=(Oe=D.ga).c,Se=Oe.l.o,Oe.$a==0){if(gt=D.rc,ut=D.Vc,$t=D.Fa,Le=D.P+1+ae*G,ze=D.mb,nt=D.nb+ae*G,t(Le<=D.P+D.qc),Oe.Z!=0)for(t(Ju[Oe.Z]!=null),_e=0;_e<he;++_e)Ju[Oe.Z](gt,ut,$t,Le,ze,nt,G),gt=ze,ut=nt,nt+=G,Le+=G;else for(_e=0;_e<he;++_e)n(ze,nt,$t,Le,G),gt=ze,ut=nt,nt+=G,Le+=G;D.rc=gt,D.Vc=ut}else{if(t(Oe.mc!=null),G=ae+he,t((_e=Oe.mc)!=null),t(G<=_e.i),_e.C>=G)G=1;else if(Oe.ic||ct(),Oe.ic){Oe=_e.V,gt=_e.Ba,ut=_e.c;var kt=_e.i,at=($t=1,Le=_e.$/ut,ze=_e.$%ut,nt=_e.m,bt=_e.s,_e.$),it=ut*kt,Mt=ut*G,zt=bt.wc,Qt=at<Mt?$n(bt,ze,Le):null;t(at<=it),t(G<=kt),t(Re(bt));t:for(;;){for(;!nt.h&&at<Mt;){if(ze&zt||(Qt=$n(bt,ze,Le)),t(Qt!=null),ce(nt),256>(kt=mn(Qt.G[0],Qt.H[0],nt)))Oe[gt+at]=kt,++at,++ze>=ut&&(ze=0,++Le<=G&&!(Le%16)&&we(_e,Le));else{if(!(280>kt)){$t=0;break t}kt=fn(kt-256,nt);var Ar,or=mn(Qt.G[4],Qt.H[4],nt);if(ce(nt),!(at>=(or=$r(ut,or=fn(or,nt)))&&it-at>=kt)){$t=0;break t}for(Ar=0;Ar<kt;++Ar)Oe[gt+at+Ar]=Oe[gt+at+Ar-or];for(at+=kt,ze+=kt;ze>=ut;)ze-=ut,++Le<=G&&!(Le%16)&&we(_e,Le);at<Mt&&ze&zt&&(Qt=$n(bt,ze,Le))}t(nt.h==K(nt))}we(_e,Le>G?G:Le);break t}!$t||nt.h&&at<it?($t=0,_e.a=nt.h?5:3):_e.$=at,G=$t}else G=xe(_e,_e.V,_e.Ba,_e.c,_e.i,G,rt);if(!G){he=0;break e}}ae+he>=Se&&(D.Cc=1),he=1}if(!he)return null;if(D.Cc&&((he=D.ga)!=null&&(he.mc=null),D.ga=null,0<D.Ga))return alert("todo:WebPDequantizeLevels"),null}return D.nb+ae*Ne}function te(D,G,ae,he,Ne,Se){for(;0<Ne--;){var _e,Oe=D,Le=G+(ae?1:0),ze=D,nt=G+(ae?0:3);for(_e=0;_e<he;++_e){var bt=ze[nt+4*_e];bt!=255&&(bt*=32897,Oe[Le+4*_e+0]=Oe[Le+4*_e+0]*bt>>23,Oe[Le+4*_e+1]=Oe[Le+4*_e+1]*bt>>23,Oe[Le+4*_e+2]=Oe[Le+4*_e+2]*bt>>23)}G+=Se}}function Ce(D,G,ae,he,Ne){for(;0<he--;){var Se;for(Se=0;Se<ae;++Se){var _e=D[G+2*Se+0],Oe=15&(ze=D[G+2*Se+1]),Le=4369*Oe,ze=(240&ze|ze>>4)*Le>>16;D[G+2*Se+0]=(240&_e|_e>>4)*Le>>16&240|(15&_e|_e<<4)*Le>>16>>4&15,D[G+2*Se+1]=240&ze|Oe}G+=Ne}}function qe(D,G,ae,he,Ne,Se,_e,Oe){var Le,ze,nt=255;for(ze=0;ze<Ne;++ze){for(Le=0;Le<he;++Le){var bt=D[G+Le];Se[_e+4*Le]=bt,nt&=bt}G+=ae,_e+=Oe}return nt!=255}function tt(D,G,ae,he,Ne){var Se;for(Se=0;Se<Ne;++Se)ae[he+Se]=D[G+Se]>>8}function ct(){Gl=te,Nn=Ce,Cn=qe,Pa=tt}function It(D,G,ae){k[D]=function(he,Ne,Se,_e,Oe,Le,ze,nt,bt,gt,ut,$t,kt,at,it,Mt,zt){var Qt,Ar=zt-1>>1,or=Oe[Le+0]|ze[nt+0]<<16,Br=bt[gt+0]|ut[$t+0]<<16;t(he!=null);var cr=3*or+Br+131074>>2;for(G(he[Ne+0],255&cr,cr>>16,kt,at),Se!=null&&(cr=3*Br+or+131074>>2,G(Se[_e+0],255&cr,cr>>16,it,Mt)),Qt=1;Qt<=Ar;++Qt){var zn=Oe[Le+Qt]|ze[nt+Qt]<<16,ra=bt[gt+Qt]|ut[$t+Qt]<<16,wn=or+zn+Br+ra+524296,pn=wn+2*(zn+Br)>>3;cr=pn+or>>1,or=(wn=wn+2*(or+ra)>>3)+zn>>1,G(he[Ne+2*Qt-1],255&cr,cr>>16,kt,at+(2*Qt-1)*ae),G(he[Ne+2*Qt-0],255&or,or>>16,kt,at+(2*Qt-0)*ae),Se!=null&&(cr=wn+Br>>1,or=pn+ra>>1,G(Se[_e+2*Qt-1],255&cr,cr>>16,it,Mt+(2*Qt-1)*ae),G(Se[_e+2*Qt+0],255&or,or>>16,it,Mt+(2*Qt+0)*ae)),or=zn,Br=ra}1&zt||(cr=3*or+Br+131074>>2,G(he[Ne+zt-1],255&cr,cr>>16,kt,at+(zt-1)*ae),Se!=null&&(cr=3*Br+or+131074>>2,G(Se[_e+zt-1],255&cr,cr>>16,it,Mt+(zt-1)*ae)))}}function Xt(){Si[lo]=Zd,Si[tm]=Zu,Si[Xu]=oh,Si[og]=wv,Si[y0]=Nv,Si[Kd]=am,Si[bv]=Cv,Si[lg]=Zu,Si[sh]=wv,Si[Wd]=Nv,Si[rm]=am}function lr(D){return D&-16384?0>D?0:255:D>>vB}function F(D,G){return lr((19077*D>>8)+(26149*G>>8)-14234)}function ie(D,G,ae){return lr((19077*D>>8)-(6419*G>>8)-(13320*ae>>8)+8708)}function pe(D,G){return lr((19077*D>>8)+(33050*G>>8)-17685)}function Pe(D,G,ae,he,Ne){he[Ne+0]=F(D,ae),he[Ne+1]=ie(D,G,ae),he[Ne+2]=pe(D,G)}function lt(D,G,ae,he,Ne){he[Ne+0]=pe(D,G),he[Ne+1]=ie(D,G,ae),he[Ne+2]=F(D,ae)}function yt(D,G,ae,he,Ne){var Se=ie(D,G,ae);G=Se<<3&224|pe(D,G)>>3,he[Ne+0]=248&F(D,ae)|Se>>5,he[Ne+1]=G}function Yt(D,G,ae,he,Ne){var Se=240&pe(D,G)|15;he[Ne+0]=240&F(D,ae)|ie(D,G,ae)>>4,he[Ne+1]=Se}function Qr(D,G,ae,he,Ne){he[Ne+0]=255,Pe(D,G,ae,he,Ne+1)}function Sn(D,G,ae,he,Ne){lt(D,G,ae,he,Ne),he[Ne+3]=255}function nn(D,G,ae,he,Ne){Pe(D,G,ae,he,Ne),he[Ne+3]=255}function ta(D,G){return 0>D?0:D>G?G:D}function ha(D,G,ae){k[D]=function(he,Ne,Se,_e,Oe,Le,ze,nt,bt){for(var gt=nt+(-2&bt)*ae;nt!=gt;)G(he[Ne+0],Se[_e+0],Oe[Le+0],ze,nt),G(he[Ne+1],Se[_e+0],Oe[Le+0],ze,nt+ae),Ne+=2,++_e,++Le,nt+=2*ae;1&bt&&G(he[Ne+0],Se[_e+0],Oe[Le+0],ze,nt)}}function mc(D,G,ae){return ae==0?D==0?G==0?6:5:G==0?4:0:ae}function ws(D,G,ae,he,Ne){switch(D>>>30){case 3:tu(G,ae,he,Ne,0);break;case 2:hs(G,ae,he,Ne);break;case 1:Rs(G,ae,he,Ne)}}function al(D,G){var ae,he,Ne=G.M,Se=G.Nb,_e=D.oc,Oe=D.pc+40,Le=D.oc,ze=D.pc+584,nt=D.oc,bt=D.pc+600;for(ae=0;16>ae;++ae)_e[Oe+32*ae-1]=129;for(ae=0;8>ae;++ae)Le[ze+32*ae-1]=129,nt[bt+32*ae-1]=129;for(0<Ne?_e[Oe-1-32]=Le[ze-1-32]=nt[bt-1-32]=129:(a(_e,Oe-32-1,127,21),a(Le,ze-32-1,127,9),a(nt,bt-32-1,127,9)),he=0;he<D.za;++he){var gt=G.ya[G.aa+he];if(0<he){for(ae=-1;16>ae;++ae)n(_e,Oe+32*ae-4,_e,Oe+32*ae+12,4);for(ae=-1;8>ae;++ae)n(Le,ze+32*ae-4,Le,ze+32*ae+4,4),n(nt,bt+32*ae-4,nt,bt+32*ae+4,4)}var ut=D.Gd,$t=D.Hd+he,kt=gt.ad,at=gt.Hc;if(0<Ne&&(n(_e,Oe-32,ut[$t].y,0,16),n(Le,ze-32,ut[$t].f,0,8),n(nt,bt-32,ut[$t].ea,0,8)),gt.Za){var it=_e,Mt=Oe-32+16;for(0<Ne&&(he>=D.za-1?a(it,Mt,ut[$t].y[15],4):n(it,Mt,ut[$t+1].y,0,4)),ae=0;4>ae;ae++)it[Mt+128+ae]=it[Mt+256+ae]=it[Mt+384+ae]=it[Mt+0+ae];for(ae=0;16>ae;++ae,at<<=2)it=_e,Mt=Oe+E0[ae],Io[gt.Ob[ae]](it,Mt),ws(at,kt,16*+ae,it,Mt)}else if(it=mc(he,Ne,gt.Ob[0]),Jd[it](_e,Oe),at!=0)for(ae=0;16>ae;++ae,at<<=2)ws(at,kt,16*+ae,_e,Oe+E0[ae]);for(ae=gt.Gc,it=mc(he,Ne,gt.Dd),Kl[it](Le,ze),Kl[it](nt,bt),at=kt,it=Le,Mt=ze,255&(gt=ae>>0)&&(170&gt?ru(at,256,it,Mt):ol(at,256,it,Mt)),gt=nt,at=bt,255&(ae>>=8)&&(170&ae?ru(kt,320,gt,at):ol(kt,320,gt,at)),Ne<D.Ub-1&&(n(ut[$t].y,0,_e,Oe+480,16),n(ut[$t].f,0,Le,ze+224,8),n(ut[$t].ea,0,nt,bt+224,8)),ae=8*Se*D.B,ut=D.sa,$t=D.ta+16*he+16*Se*D.R,kt=D.qa,gt=D.ra+8*he+ae,at=D.Ha,it=D.Ia+8*he+ae,ae=0;16>ae;++ae)n(ut,$t+ae*D.R,_e,Oe+32*ae,16);for(ae=0;8>ae;++ae)n(kt,gt+ae*D.B,Le,ze+32*ae,8),n(at,it+ae*D.B,nt,bt+32*ae,8)}}function qu(D,G,ae,he,Ne,Se,_e,Oe,Le){var ze=[0],nt=[0],bt=0,gt=Le!=null?Le.kd:0,ut=Le??new Gf;if(D==null||12>ae)return 7;ut.data=D,ut.w=G,ut.ha=ae,G=[G],ae=[ae],ut.gb=[ut.gb];e:{var $t=G,kt=ae,at=ut.gb;if(t(D!=null),t(kt!=null),t(at!=null),at[0]=0,12<=kt[0]&&!r(D,$t[0],"RIFF")){if(r(D,$t[0]+8,"WEBP")){at=3;break e}var it=Ee(D,$t[0]+4);if(12>it||4294967286<it){at=3;break e}if(gt&&it>kt[0]-8){at=7;break e}at[0]=it,$t[0]+=12,kt[0]-=12}at=0}if(at!=0)return at;for(it=0<ut.gb[0],ae=ae[0];;){e:{var Mt=D;kt=G,at=ae;var zt=ze,Qt=nt,Ar=$t=[0];if((cr=bt=[bt])[0]=0,8>at[0])at=7;else{if(!r(Mt,kt[0],"VP8X")){if(Ee(Mt,kt[0]+4)!=10){at=3;break e}if(18>at[0]){at=7;break e}var or=Ee(Mt,kt[0]+8),Br=1+X(Mt,kt[0]+12);if(2147483648<=Br*(Mt=1+X(Mt,kt[0]+15))){at=3;break e}Ar!=null&&(Ar[0]=or),zt!=null&&(zt[0]=Br),Qt!=null&&(Qt[0]=Mt),kt[0]+=18,at[0]-=18,cr[0]=1}at=0}}if(bt=bt[0],$t=$t[0],at!=0)return at;if(kt=!!(2&$t),!it&&bt)return 3;if(Se!=null&&(Se[0]=!!(16&$t)),_e!=null&&(_e[0]=kt),Oe!=null&&(Oe[0]=0),_e=ze[0],$t=nt[0],bt&&kt&&Le==null){at=0;break}if(4>ae){at=7;break}if(it&&bt||!it&&!bt&&!r(D,G[0],"ALPH")){ae=[ae],ut.na=[ut.na],ut.P=[ut.P],ut.Sa=[ut.Sa];e:{or=D,at=G,it=ae;var cr=ut.gb;zt=ut.na,Qt=ut.P,Ar=ut.Sa,Br=22,t(or!=null),t(it!=null),Mt=at[0];var zn=it[0];for(t(zt!=null),t(Ar!=null),zt[0]=null,Qt[0]=null,Ar[0]=0;;){if(at[0]=Mt,it[0]=zn,8>zn){at=7;break e}var ra=Ee(or,Mt+4);if(4294967286<ra){at=3;break e}var wn=8+ra+1&-2;if(Br+=wn,0<cr&&Br>cr){at=3;break e}if(!r(or,Mt,"VP8 ")||!r(or,Mt,"VP8L")){at=0;break e}if(zn[0]<wn){at=7;break e}r(or,Mt,"ALPH")||(zt[0]=or,Qt[0]=Mt+8,Ar[0]=ra),Mt+=wn,zn-=wn}}if(ae=ae[0],ut.na=ut.na[0],ut.P=ut.P[0],ut.Sa=ut.Sa[0],at!=0)break}ae=[ae],ut.Ja=[ut.Ja],ut.xa=[ut.xa];e:if(cr=D,at=G,it=ae,zt=ut.gb[0],Qt=ut.Ja,Ar=ut.xa,or=at[0],Mt=!r(cr,or,"VP8 "),Br=!r(cr,or,"VP8L"),t(cr!=null),t(it!=null),t(Qt!=null),t(Ar!=null),8>it[0])at=7;else{if(Mt||Br){if(cr=Ee(cr,or+4),12<=zt&&cr>zt-12){at=3;break e}if(gt&&cr>it[0]-8){at=7;break e}Qt[0]=cr,at[0]+=8,it[0]-=8,Ar[0]=Br}else Ar[0]=5<=it[0]&&cr[or+0]==47&&!(cr[or+4]>>5),Qt[0]=it[0];at=0}if(ae=ae[0],ut.Ja=ut.Ja[0],ut.xa=ut.xa[0],G=G[0],at!=0)break;if(4294967286<ut.Ja)return 3;if(Oe==null||kt||(Oe[0]=ut.xa?2:1),_e=[_e],$t=[$t],ut.xa){if(5>ae){at=7;break}Oe=_e,gt=$t,kt=Se,D==null||5>ae?D=0:5<=ae&&D[G+0]==47&&!(D[G+4]>>5)?(it=[0],cr=[0],zt=[0],W(Qt=new R,D,G,ae),ar(Qt,it,cr,zt)?(Oe!=null&&(Oe[0]=it[0]),gt!=null&&(gt[0]=cr[0]),kt!=null&&(kt[0]=zt[0]),D=1):D=0):D=0}else{if(10>ae){at=7;break}Oe=$t,D==null||10>ae||!fs(D,G+3,ae-3)?D=0:(gt=D[G+0]|D[G+1]<<8|D[G+2]<<16,kt=16383&(D[G+7]<<8|D[G+6]),D=16383&(D[G+9]<<8|D[G+8]),1&gt||3<(gt>>1&7)||!(gt>>4&1)||gt>>5>=ut.Ja||!kt||!D?D=0:(_e&&(_e[0]=kt),Oe&&(Oe[0]=D),D=1))}if(!D||(_e=_e[0],$t=$t[0],bt&&(ze[0]!=_e||nt[0]!=$t)))return 3;Le!=null&&(Le[0]=ut,Le.offset=G-Le.w,t(4294967286>G-Le.w),t(Le.offset==Le.ha-ae));break}return at==0||at==7&&bt&&Le==null?(Se!=null&&(Se[0]|=ut.na!=null&&0<ut.na.length),he!=null&&(he[0]=_e),Ne!=null&&(Ne[0]=$t),0):at}function Kf(D,G,ae){var he=G.width,Ne=G.height,Se=0,_e=0,Oe=he,Le=Ne;if(G.Da=D!=null&&0<D.Da,G.Da&&(Oe=D.cd,Le=D.bd,Se=D.v,_e=D.j,11>ae||(Se&=-2,_e&=-2),0>Se||0>_e||0>=Oe||0>=Le||Se+Oe>he||_e+Le>Ne))return 0;if(G.v=Se,G.j=_e,G.va=Se+Oe,G.o=_e+Le,G.U=Oe,G.T=Le,G.da=D!=null&&0<D.da,G.da){if(!ye(Oe,Le,ae=[D.ib],Se=[D.hb]))return 0;G.ib=ae[0],G.hb=Se[0]}return G.ob=D!=null&&D.ob,G.Kb=D==null||!D.Sd,G.da&&(G.ob=G.ib<3*he/4&&G.hb<3*Ne/4,G.Kb=0),1}function YA(D){if(D==null)return 2;if(11>D.S){var G=D.f.RGBA;G.fb+=(D.height-1)*G.A,G.A=-G.A}else G=D.f.kb,D=D.height,G.O+=(D-1)*G.fa,G.fa=-G.fa,G.N+=(D-1>>1)*G.Ab,G.Ab=-G.Ab,G.W+=(D-1>>1)*G.Db,G.Db=-G.Db,G.F!=null&&(G.J+=(D-1)*G.lb,G.lb=-G.lb);return 0}function A0(D,G,ae,he){if(he==null||0>=D||0>=G)return 2;if(ae!=null){if(ae.Da){var Ne=ae.cd,Se=ae.bd,_e=-2&ae.v,Oe=-2&ae.j;if(0>_e||0>Oe||0>=Ne||0>=Se||_e+Ne>D||Oe+Se>G)return 2;D=Ne,G=Se}if(ae.da){if(!ye(D,G,Ne=[ae.ib],Se=[ae.hb]))return 2;D=Ne[0],G=Se[0]}}he.width=D,he.height=G;e:{var Le=he.width,ze=he.height;if(D=he.S,0>=Le||0>=ze||!(D>=lo&&13>D))D=2;else{if(0>=he.Rd&&he.sd==null){_e=Se=Ne=G=0;var nt=(Oe=Le*zE[D])*ze;if(11>D||(Se=(ze+1)/2*(G=(Le+1)/2),D==12&&(_e=(Ne=Le)*ze)),(ze=s(nt+2*Se+_e))==null){D=1;break e}he.sd=ze,11>D?((Le=he.f.RGBA).eb=ze,Le.fb=0,Le.A=Oe,Le.size=nt):((Le=he.f.kb).y=ze,Le.O=0,Le.fa=Oe,Le.Fd=nt,Le.f=ze,Le.N=0+nt,Le.Ab=G,Le.Cd=Se,Le.ea=ze,Le.W=0+nt+Se,Le.Db=G,Le.Ed=Se,D==12&&(Le.F=ze,Le.J=0+nt+2*Se),Le.Tc=_e,Le.lb=Ne)}if(G=1,Ne=he.S,Se=he.width,_e=he.height,Ne>=lo&&13>Ne)if(11>Ne)D=he.f.RGBA,G&=(Oe=Math.abs(D.A))*(_e-1)+Se<=D.size,G&=Oe>=Se*zE[Ne],G&=D.eb!=null;else{D=he.f.kb,Oe=(Se+1)/2,nt=(_e+1)/2,Le=Math.abs(D.fa),ze=Math.abs(D.Ab);var bt=Math.abs(D.Db),gt=Math.abs(D.lb),ut=gt*(_e-1)+Se;G&=Le*(_e-1)+Se<=D.Fd,G&=ze*(nt-1)+Oe<=D.Cd,G=(G&=bt*(nt-1)+Oe<=D.Ed)&Le>=Se&ze>=Oe&bt>=Oe,G&=D.y!=null,G&=D.f!=null,G&=D.ea!=null,Ne==12&&(G&=gt>=Se,G&=ut<=D.Tc,G&=D.F!=null)}else G=0;D=G?0:2}}return D!=0||ae!=null&&ae.fd&&(D=YA(he)),D}var ti=64,Wf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],m0=24,p0=32,JA=8,sl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ne("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(D){return D},k.Predictor2=function(D,G,ae){return G[ae+0]},k.Predictor3=function(D,G,ae){return G[ae+1]},k.Predictor4=function(D,G,ae){return G[ae-1]},k.Predictor5=function(D,G,ae){return me(me(D,G[ae+1]),G[ae+0])},k.Predictor6=function(D,G,ae){return me(D,G[ae-1])},k.Predictor7=function(D,G,ae){return me(D,G[ae+0])},k.Predictor8=function(D,G,ae){return me(G[ae-1],G[ae+0])},k.Predictor9=function(D,G,ae){return me(G[ae+0],G[ae+1])},k.Predictor10=function(D,G,ae){return me(me(D,G[ae-1]),me(G[ae+0],G[ae+1]))},k.Predictor11=function(D,G,ae){var he=G[ae+0];return 0>=Ve(he>>24&255,D>>24&255,(G=G[ae-1])>>24&255)+Ve(he>>16&255,D>>16&255,G>>16&255)+Ve(he>>8&255,D>>8&255,G>>8&255)+Ve(255&he,255&D,255&G)?he:D},k.Predictor12=function(D,G,ae){var he=G[ae+0];return(ge((D>>24&255)+(he>>24&255)-((G=G[ae-1])>>24&255))<<24|ge((D>>16&255)+(he>>16&255)-(G>>16&255))<<16|ge((D>>8&255)+(he>>8&255)-(G>>8&255))<<8|ge((255&D)+(255&he)-(255&G)))>>>0},k.Predictor13=function(D,G,ae){var he=G[ae-1];return(Te((D=me(D,G[ae+0]))>>24&255,he>>24&255)<<24|Te(D>>16&255,he>>16&255)<<16|Te(D>>8&255,he>>8&255)<<8|Te(D>>0&255,he>>0&255))>>>0};var Xy=k.PredictorAdd0;k.PredictorAdd1=Xe,ne("Predictor2","PredictorAdd2"),ne("Predictor3","PredictorAdd3"),ne("Predictor4","PredictorAdd4"),ne("Predictor5","PredictorAdd5"),ne("Predictor6","PredictorAdd6"),ne("Predictor7","PredictorAdd7"),ne("Predictor8","PredictorAdd8"),ne("Predictor9","PredictorAdd9"),ne("Predictor10","PredictorAdd10"),ne("Predictor11","PredictorAdd11"),ne("Predictor12","PredictorAdd12"),ne("Predictor13","PredictorAdd13");var sg=k.PredictorAdd2;mt("ColorIndexInverseTransform","MapARGB","32b",function(D){return D>>8&255},function(D){return D}),mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(D){return D},function(D){return D>>8&255});var xv,pc=k.ColorIndexInverseTransform,ji=k.MapARGB,Xf=k.VP8LColorIndexInverseTransformAlpha,ig=k.MapAlpha,zd=k.VP8LPredictorsAdd=[];zd.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Yf,Bo,$i,Jf,il,eu,Ku,tu,hs,ru,Rs,ol,g0,Wu,ZA,Zf,eh,th,x0,em,rh,Gd,v0,As,Gl,Nn,Cn,Pa,Ns=s(511),gc=s(2041),nh=s(225),ah=s(767),qd=0,vv=gc,b0=nh,ki=ah,xc=Ns,lo=0,tm=1,Xu=2,og=3,y0=4,Kd=5,bv=6,lg=7,sh=8,Wd=9,rm=10,yv=[2,3,7],vc=[3,3,11],ql=[280,256,256,256,40],w0=[0,1,1,1,0],Xd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],N0=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],UE=8,cg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ug=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ri=null,ms=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Yn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ih=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Yu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Yy=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],C0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],HE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Jd=[],Io=[],Kl=[],QE=1,nm=2,Ju=[],Si=[];It("UpsampleRgbLinePair",Pe,3),It("UpsampleBgrLinePair",lt,3),It("UpsampleRgbaLinePair",nn,4),It("UpsampleBgraLinePair",Sn,4),It("UpsampleArgbLinePair",Qr,4),It("UpsampleRgba4444LinePair",Yt,2),It("UpsampleRgb565LinePair",yt,2);var Zd=k.UpsampleRgbLinePair,oh=k.UpsampleBgrLinePair,Zu=k.UpsampleRgbaLinePair,wv=k.UpsampleBgraLinePair,Nv=k.UpsampleArgbLinePair,am=k.UpsampleRgba4444LinePair,Cv=k.UpsampleRgb565LinePair,ed=16,ni=1<<ed-1,lh=-227,Ev=482,vB=6,VE=0,bB=s(256),ai=s(256),Jy=s(256),dg=s(256),fg=s(Ev-lh),Zy=s(Ev-lh);ha("YuvToRgbRow",Pe,3),ha("YuvToBgrRow",lt,3),ha("YuvToRgbaRow",nn,4),ha("YuvToBgraRow",Sn,4),ha("YuvToArgbRow",Qr,4),ha("YuvToRgba4444Row",Yt,2),ha("YuvToRgb565Row",yt,2);var E0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ef=[0,2,8],yB=[8,7,6,4,4,2,2,2,1,1,1,1],$E=1;this.WebPDecodeRGBA=function(D,G,ae,he,Ne){var Se=tm,_e=new Qd,Oe=new nr;_e.ba=Oe,Oe.S=Se,Oe.width=[Oe.width],Oe.height=[Oe.height];var Le=Oe.width,ze=Oe.height,nt=new fr;if(nt==null||D==null)var bt=2;else t(nt!=null),bt=qu(D,G,ae,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(bt!=0?Le=0:(Le!=null&&(Le[0]=nt.width[0]),ze!=null&&(ze[0]=nt.height[0]),Le=1),Le){Oe.width=Oe.width[0],Oe.height=Oe.height[0],he!=null&&(he[0]=Oe.width),Ne!=null&&(Ne[0]=Oe.height);e:{if(he=new Oa,(Ne=new Gf).data=D,Ne.w=G,Ne.ha=ae,Ne.kd=1,G=[0],t(Ne!=null),((D=qu(Ne.data,Ne.w,Ne.ha,null,null,null,G,null,Ne))==0||D==7)&&G[0]&&(D=4),(G=D)==0){if(t(_e!=null),he.data=Ne.data,he.w=Ne.w+Ne.offset,he.ha=Ne.ha-Ne.offset,he.put=Vn,he.ac=_r,he.bc=qa,he.ma=_e,Ne.xa){if((D=Ge())==null){_e=1;break e}if(function(gt,ut){var $t=[0],kt=[0],at=[0];t:for(;;){if(gt==null)return 0;if(ut==null)return gt.a=2,0;if(gt.l=ut,gt.a=0,W(gt.m,ut.data,ut.w,ut.ha),!ar(gt.m,$t,kt,at)){gt.a=3;break t}if(gt.xb=nm,ut.width=$t[0],ut.height=kt[0],!Ue($t[0],kt[0],1,gt,null))break t;return 1}return t(gt.a!=0),0}(D,he)){if(he=(G=A0(he.width,he.height,_e.Oa,_e.ba))==0){t:{he=D;r:for(;;){if(he==null){he=0;break t}if(t(he.s.yc!=null),t(he.s.Ya!=null),t(0<he.s.Wb),t((ae=he.l)!=null),t((Ne=ae.ma)!=null),he.xb!=0){if(he.ca=Ne.ba,he.tb=Ne.tb,t(he.ca!=null),!Kf(Ne.Oa,ae,og)){he.a=2;break r}if(!Ze(he,ae.width)||ae.da)break r;if((ae.da||Ct(he.ca.S))&&ct(),11>he.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),he.ca.f.kb.F!=null&&ct()),he.Pb&&0<he.s.ua&&he.s.vb.X==null&&!Be(he.s.vb,he.s.Wa.Xa)){he.a=1;break r}he.xb=0}if(!xe(he,he.V,he.Ba,he.c,he.i,ae.o,$e))break r;Ne.Dc=he.Ma,he=1;break t}t(he.a!=0),he=0}he=!he}he&&(G=D.a)}else G=D.a}else{if((D=new ds)==null){_e=1;break e}if(D.Fa=Ne.na,D.P=Ne.P,D.qc=Ne.Sa,Mu(D,he)){if((G=A0(he.width,he.height,_e.Oa,_e.ba))==0){if(D.Aa=0,ae=_e.Oa,t((Ne=D)!=null),ae!=null){if(0<(Le=0>(Le=ae.Md)?0:100<Le?255:255*Le/100)){for(ze=nt=0;4>ze;++ze)12>(bt=Ne.pb[ze]).lc&&(bt.ia=Le*yB[0>bt.lc?0:bt.lc]>>3),nt|=bt.ia;nt&&(alert("todo:VP8InitRandom"),Ne.ia=1)}Ne.Ga=ae.Id,100<Ne.Ga?Ne.Ga=100:0>Ne.Ga&&(Ne.Ga=0)}kr(D,he)||(G=D.a)}}else G=D.a}G==0&&_e.Oa!=null&&_e.Oa.fd&&(G=YA(_e.ba))}_e=G}Se=_e!=0?null:11>Se?Oe.f.RGBA.eb:Oe.f.kb.y}else Se=null;return Se};var zE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(k,B){for(var M="",P=0;P<4;P++)M+=String.fromCharCode(k[B++]);return M}function d(k,B){return(k[B+0]<<0|k[B+1]<<8|k[B+2]<<16)>>>0}function f(k,B){return(k[B+0]<<0|k[B+1]<<8|k[B+2]<<16|k[B+3]<<24)>>>0}new c;var A=[0],m=[0],g=[],x=new c,v=e,y=function(k,B){var M={},P=0,S=!1,L=0,U=0;if(M.frames=[],!function(O,K,J,ce){for(var oe=0;oe<ce;oe++)if(O[K+oe]!=J.charCodeAt(oe))return!0;return!1}(k,B,"RIFF",4)){var q,H;for(f(k,B+=4),B+=8;B<k.length;){var z=u(k,B),W=f(k,B+=4);B+=4;var Z=W+(1&W);switch(z){case"VP8 ":case"VP8L":M.frames[P]===void 0&&(M.frames[P]={}),(R=M.frames[P]).src_off=S?U:B-8,R.src_size=L+W+8,P++,S&&(S=!1,L=0,U=0);break;case"VP8X":(R=M.header={}).feature_flags=k[B];var V=B+4;R.canvas_width=1+d(k,V),V+=3,R.canvas_height=1+d(k,V),V+=3;break;case"ALPH":S=!0,L=Z+8,U=B-8;break;case"ANIM":(R=M.header).bgcolor=f(k,B),V=B+4,R.loop_count=(q=k)[(H=V)+0]<<0|q[H+1]<<8,V+=2;break;case"ANMF":var Y,R;(R=M.frames[P]={}).offset_x=2*d(k,B),B+=3,R.offset_y=2*d(k,B),B+=3,R.width=1+d(k,B),B+=3,R.height=1+d(k,B),B+=3,R.duration=d(k,B),B+=3,Y=k[B++],R.dispose=1&Y,R.blend=Y>>1&1}z!="ANMF"&&(B+=Z)}return M}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var N=y.header?y.header:null,C=y.frames?y.frames:null;if(N){N.loop_counter=N.loop_count,A=[N.canvas_height],m=[N.canvas_width];for(var _=0;_<C.length&&C[_].blend!=0;_++);}var j=C[0],I=x.WebPDecodeRGBA(v,j.src_off,j.src_size,m,A);j.rgba=I,j.imgwidth=m[0],j.imgheight=A[0];for(var T=0;T<m[0]*A[0]*4;T++)g[T]=I[T];return this.width=m,this.height=A,this.data=g,this}(function(e){var t=function(){return typeof KR=="function"},r=function(A,m,g,x){var v=4,y=o;switch(x){case e.image_compression.FAST:v=1,y=s;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}A=n(A,m,g,y);var N=KR(A,{level:v});return e.__addimage__.arrayBufferToBinaryString(N)},n=function(A,m,g,x){for(var v,y,N,C=A.length/m,_=new Uint8Array(A.length+C),j=d(),I=0;I<C;I+=1){if(N=I*m,v=A.subarray(N,N+m),x)_.set(x(v,g,y),N+I);else{for(var T,k=j.length,B=[];T<k;T+=1)B[T]=j[T](v,g,y);var M=f(B.concat());_.set(B[M],N+I)}y=v}return _},a=function(A){var m=Array.apply([],A);return m.unshift(0),m},s=function(A,m){var g,x=[],v=A.length;x[0]=1;for(var y=0;y<v;y+=1)g=A[y-m]||0,x[y+1]=A[y]-g+256&255;return x},o=function(A,m,g){var x,v=[],y=A.length;v[0]=2;for(var N=0;N<y;N+=1)x=g&&g[N]||0,v[N+1]=A[N]-x+256&255;return v},l=function(A,m,g){var x,v,y=[],N=A.length;y[0]=3;for(var C=0;C<N;C+=1)x=A[C-m]||0,v=g&&g[C]||0,y[C+1]=A[C]+256-(x+v>>>1)&255;return y},c=function(A,m,g){var x,v,y,N,C=[],_=A.length;C[0]=4;for(var j=0;j<_;j+=1)x=A[j-m]||0,v=g&&g[j]||0,y=g&&g[j-m]||0,N=u(x,v,y),C[j+1]=A[j]-N+256&255;return C},u=function(A,m,g){if(A===m&&m===g)return A;var x=Math.abs(m-g),v=Math.abs(A-g),y=Math.abs(A+m-g-g);return x<=v&&x<=y?A:v<=y?m:g},d=function(){return[a,s,o,l,c]},f=function(A){var m=A.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(A,m,g,x){var v,y,N,C,_,j,I,T,k,B,M,P,S,L,U,q=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(A)&&(A=new Uint8Array(A)),this.__addimage__.isArrayBufferView(A)){if(A=(N=new uit(A)).imgData,y=N.bits,v=N.colorSpace,_=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){k=(T=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,M=new Uint8Array(k*N.colors),B=new Uint8Array(k);var z,W=N.pixelBitlength-N.bits;for(L=0,U=0;L<k;L++){for(S=T[L],z=0;z<W;)M[U++]=S>>>z&255,z+=N.bits;B[L]=S>>>z&255}}if(N.bits===16){k=(T=new Uint32Array(N.decodePixels().buffer)).length,M=new Uint8Array(k*(32/N.pixelBitlength)*N.colors),B=new Uint8Array(k*(32/N.pixelBitlength)),P=N.colors>1,L=0,U=0;for(var Z=0;L<k;)S=T[L++],M[U++]=S>>>0&255,P&&(M[U++]=S>>>16&255,S=T[L++],M[U++]=S>>>0&255),B[Z++]=S>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(A=r(M,N.width*N.colors,N.colors,x),I=r(B,N.width,1,x)):(A=M,I=B,q=void 0)}if(N.colorType===3&&(v=this.color_spaces.INDEXED,j=N.palette,N.transparency.indexed)){var V=N.transparency.indexed,Y=0;for(L=0,k=V.length;L<k;++L)Y+=V[L];if((Y/=255)===k-1&&V.indexOf(0)!==-1)C=[V.indexOf(0)];else if(Y!==k){for(T=N.decodePixels(),B=new Uint8Array(T.length),L=0,k=T.length;L<k;L++)B[L]=V[T[L]];I=r(B,N.width,1)}}var R=function(O){var K;switch(O){case e.image_compression.FAST:K=11;break;case e.image_compression.MEDIUM:K=13;break;case e.image_compression.SLOW:K=14;break;default:K=12}return K}(x);return q===this.decode.FLATE_DECODE&&(H="/Predictor "+R+" "),H+="/Colors "+_+" /BitsPerComponent "+y+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:g,data:A,index:m,filter:q,decodeParameters:H,transparency:C,palette:j,sMask:I,predictor:R,width:N.width,height:N.height,bitsPerComponent:y,colorSpace:v}}}})(Tr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new dit(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new bO(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(Tr.API),uf.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},uf.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Va.log("bit decode error:"+r)}},uf.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},uf.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},uf.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},uf.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},uf.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},uf.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},uf.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},uf.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new uf(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new bO(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Tr.API),cZ.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new cZ(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new bO(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Tr.API),Tr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],A=n[u+2],m=n[u+3];s[l++]=d,s[l++]=f,s[l++]=A,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Tr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},rb=Tr.API,Dk=rb.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,A=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(A=f&&Ia(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,v.push((l[n]||x)/c+A)),g=n;return v},sZ=rb.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return rb.processArabic&&(e=rb.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Dk.apply(this,arguments).reduce(function(s,o){return s+o},0)},iZ=function(e,t,r,n){for(var a=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},oZ=function(e,t,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],A=r.textIndent||0,m=0,g=0,x=e.split(" "),v=Dk.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),N=[];x.map(function(_){(_=_.split(/\s*\n/)).length>1?N=N.concat(_.map(function(j,I){return(I&&j.length?`
`:"")+j})):N.push(_[0])}),x=N,c=sZ.apply(this,[y,r])}for(s=0,o=x.length;s<o;s++){var C=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),C=1),A+m+(g=(a=Dk.apply(this,[n,r])).reduce(function(_,j){return _+j},0))>t||C){if(g>t){for(l=iZ.apply(this,[n,a,t-(A+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(_,j){return _+j},0)}else d=[n];f.push(d),A=g+c,m=v}else d.push(n),A+=m+g,m=v}return u=c?function(_,j){return(j?y:"")+_.join(" ")}:function(_){return _.join(" ")},f.map(u)},rb.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(oZ.apply(this,[n[l],o,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var A,m,g,x,v=["{"];for(var y in f){if(A=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=s(y).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof A=="number")A<0?(g=s(A).slice(3),x="-"):(g=s(A).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(Ia(A)!=="object")throw new Error("Don't know what to do with value type "+Ia(A)+".");g=o(A)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,m,g,x,v={},y=1,N=v,C=[],_="",j="",I=f.length-1,T=1;T<I;T+=1)(x=f[T])=="'"?A?(g=A.join(""),A=void 0):A=[]:A?A.push(x):x=="{"?(C.push([N,g]),N={},g=void 0):x=="}"?((m=C.pop())[0][m[1]]=N,g=void 0,N=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(_+=r[x],g=parseInt(_,16)*y,y=1,_=""):_+=x:r.hasOwnProperty(x)?(j+=r[x],N[g]=parseInt(j,16)*y,y=1,g=void 0,j=""):j+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var A=f.font,m=d.Unicode[A.postScriptName];m&&(A.metadata.Unicode={},A.metadata.Unicode.widths=m.widths,A.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[A.postScriptName];g&&(A.metadata.Unicode.encoding=g,A.encoding=g.codePages[0])}])}(Tr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(dN(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Tr),function(e){function t(){return(Xr.canvg?Promise.resolve(Xr.canvg):gi(()=>import("./index.es-Czlwi1OI.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Tr.API.addSvgAsImage=function(r,n,a,s,o,l,c,u){if(isNaN(n)||isNaN(a))throw Va.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Va.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(A)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,s,o,c,u)})}}(),Tr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Tr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function A(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Ia(e)==="object"){for(a in e)if(s=e[a],A(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&A(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Tr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,A=s.length;f<A;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,A;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(s).sort(function(m,g){return m-g})).length;f<A;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<A.length;g++)m+=String.fromCharCode(A[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+_b(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var N=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+_b(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+_b(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",m=0;m<f.length;m++)A+=String.fromCharCode(f[m]);var g=u();d({data:A,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+_b(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+_b(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},A=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,N="",C=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(N=l,x=m,Array.isArray(l)&&(N=l[0]),y=0;y<N.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(o=g[x].metadata.cmap.unicode.codeMap[N[y].charCodeAt(0)]),o||N[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=N[y]:v+="";var _="";return parseInt(x.slice(1))<14||C==="WinAnsiEncoding"?_=A(v,x).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(_=r(v,g[x])),f.isHex=!0,{text:_,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(Tr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Tr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=t,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,C=0;this.__bidiEngine__={};var _=function(P){var S=P.charCodeAt(),L=S>>8,U=x[L];return U!==void 0?f[256*U+(255&S)]:L===252||L===253?"AL":y.test(L)?"L":L===8?"R":"N"},j=function(P){for(var S,L=0;L<P.length;L++){if((S=_(P.charAt(L)))==="L")return!1;if(S==="R")return!0}return!1},I=function(P,S,L,U){var q,H,z,W,Z=S[U];switch(Z){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(Z="AN");break;case"AL":N=!0,Z="R";break;case"WS":Z="N";break;case"CS":U<1||U+1>=S.length||(q=L[U-1])!=="EN"&&q!=="AN"||(H=S[U+1])!=="EN"&&H!=="AN"?Z="N":N&&(H="AN"),Z=H===q?H:"N";break;case"ES":Z=(q=U>0?L[U-1]:"B")==="EN"&&U+1<S.length&&S[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&L[U-1]==="EN"){Z="EN";break}if(N){Z="N";break}for(z=U+1,W=S.length;z<W&&S[z]==="ET";)z++;Z=z<W&&S[z]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(W=S.length,z=U+1;z<W&&S[z]==="NSM";)z++;if(z<W){var V=P[U],Y=V>=1425&&V<=2303||V===64286;if(q=S[z],Y&&(q==="R"||q==="AL")){Z="R";break}}}Z=U<1||(q=S[U-1])==="B"?"N":L[U-1];break;case"B":N=!1,a=!0,Z=C;break;case"S":s=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":Z="N"}return Z},T=function(P,S,L){var U=P.split("");return L&&k(U,L,{hiLevel:C}),U.reverse(),S&&S.reverse(),U.join("")},k=function(P,S,L){var U,q,H,z,W,Z=-1,V=P.length,Y=0,R=[],O=C?m:A,K=[];for(N=!1,a=!1,s=!1,q=0;q<V;q++)K[q]=_(P[q]);for(H=0;H<V;H++){if(W=Y,R[H]=I(P,K,R,H),U=240&(Y=O[W][g[R[H]]]),Y&=15,S[H]=z=O[Y][5],U>0)if(U===16){for(q=Z;q<H;q++)S[q]=1;Z=-1}else Z=-1;if(O[Y][6])Z===-1&&(Z=H);else if(Z>-1){for(q=Z;q<H;q++)S[q]=z;Z=-1}K[H]==="B"&&(S[H]=0),L.hiLevel|=z}s&&function(J,ce,oe){for(var re=0;re<oe;re++)if(J[re]==="S"){ce[re]=C;for(var ue=re-1;ue>=0&&J[ue]==="WS";ue--)ce[ue]=C}}(K,S,V)},B=function(P,S,L,U,q){if(!(q.hiLevel<P)){if(P===1&&C===1&&!a)return S.reverse(),void(L&&L.reverse());for(var H,z,W,Z,V=S.length,Y=0;Y<V;){if(U[Y]>=P){for(W=Y+1;W<V&&U[W]>=P;)W++;for(Z=Y,z=W-1;Z<z;Z++,z--)H=S[Z],S[Z]=S[z],S[z]=H,L&&(H=L[Z],L[Z]=L[z],L[z]=H);Y=W}Y++}}},M=function(P,S,L){var U=P.split(""),q={hiLevel:C};return L||(L=[]),k(U,L,q),function(H,z,W){if(W.hiLevel!==0&&d)for(var Z,V=0;V<H.length;V++)z[V]===1&&(Z=v.indexOf(H[V]))>=0&&(H[V]=v[Z+1])}(U,L,q),B(2,U,S,L,q),B(1,U,S,L,q),U.join("")};return this.__bidiEngine__.doBidiReorder=function(P,S,L){if(function(q,H){if(H)for(var z=0;z<q.length;z++)H[z]=z;l===void 0&&(l=j(q)),u===void 0&&(u=j(q))}(P,S),o||!c||u)if(o&&c&&l^u)C=l?1:0,P=T(P,S,L);else if(!o&&c&&u)C=l?1:0,P=M(P,S,L),P=T(P,S);else if(!o||l||c||u){if(o&&!c&&l^u)P=T(P,S),l?(C=0,P=M(P,S,L)):(C=1,P=M(P,S,L),P=T(P,S));else if(o&&l&&!c&&u)C=1,P=M(P,S,L),P=T(P,S);else if(!o&&!c&&l^u){var U=d;l?(C=1,P=M(P,S,L),C=0,d=!1,P=M(P,S,L),d=U):(C=0,P=M(P,S,L),P=T(P,S),C=1,d=!1,P=M(P,S,L),d=U,P=T(P,S))}}else C=0,P=M(P,S,L);else C=l?1:0,P=M(P,S,L);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),o=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Tr),Tr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Rp(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new jit(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new fit(this.contents),this.head=new Ait(this),this.name=new vit(this),this.cmap=new EAe(this),this.toUnicode={},this.hhea=new mit(this),this.maxp=new bit(this),this.hmtx=new yit(this),this.post=new git(this),this.os2=new pit(this),this.loca=new Eit(this),this.glyf=new wit(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Uf,Rp=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),fit=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,A,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(a=new Rp).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*m,u=a.pos+s,l=null,g=[],r)for(A=r[x],a.writeString(x),a.writeInt(e(A)),a.writeInt(u),a.writeInt(A.length),g=g.concat(A),x==="head"&&(l=u),u+=A.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,o;for(r=jAe.call(r);r.length%4;)r.push(0);for(s=new Rp(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),hit={}.hasOwnProperty,i0=function(e,t){for(var r in t)hit.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Uf=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Ait=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Rp).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),uZ=function(){function e(t,r){var n,a,s,o,l,c,u,d,f,A,m,g,x,v,y,N,C;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),A=m/2,t.pos+=6,s=function(){var _,j;for(j=[],c=_=0;0<=A?_<A:_>A;c=0<=A?++_:--_)j.push(t.readUInt16());return j}(),t.pos+=2,x=function(){var _,j;for(j=[],c=_=0;0<=A?_<A:_>A;c=0<=A?++_:--_)j.push(t.readUInt16());return j}(),u=function(){var _,j;for(j=[],c=_=0;0<=A?_<A:_>A;c=0<=A?++_:--_)j.push(t.readUInt16());return j}(),d=function(){var _,j;for(j=[],c=_=0;0<=A?_<A:_>A;c=0<=A?++_:--_)j.push(t.readUInt16());return j}(),a=(this.length-t.pos+this.offset)/2,l=function(){var _,j;for(j=[],c=_=0;0<=a?_<a:_>a;c=0<=a?++_:--_)j.push(t.readUInt16());return j}(),c=y=0,C=s.length;y<C;c=++y)for(v=s[c],n=N=g=x[c];g<=v?N<=v:N>=v;n=g<=v?++N:--N)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-g)-(A-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,a,s,o,l,c,u,d,f,A,m,g,x,v,y,N,C,_,j,I,T,k,B,M,P,S,L,U,q,H,z,W,Z,V,Y,R,O,K,J,ce,oe,re,ue,le,ve,X;switch(U=new Rp,o=Object.keys(t).sort(function(Ee,Be){return Ee-Be}),r){case"macroman":for(x=0,v=function(){var Ee=[];for(g=0;g<256;++g)Ee.push(0);return Ee}(),N={0:0},s={},q=0,Z=o.length;q<Z;q++)N[ue=t[a=o[q]]]==null&&(N[ue]=++x),s[a]={old:t[a],new:N[t[a]]},v[a]=N[t[a]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(v),{charMap:s,subtable:U.data,maxGlyphID:x+1};case"unicode":for(S=[],f=[],C=0,N={},n={},y=u=null,H=0,V=o.length;H<V;H++)N[j=t[a=o[H]]]==null&&(N[j]=++C),n[a]={old:j,new:N[j]},l=N[j]-a,y!=null&&l===u||(y&&f.push(y),S.push(a),u=l),y=a;for(y&&f.push(y),f.push(65535),S.push(65535),M=2*(B=S.length),k=2*Math.pow(Math.log(B)/Math.LN2,2),A=Math.log(k/2)/Math.LN2,T=2*B-k,c=[],I=[],m=[],g=z=0,Y=S.length;z<Y;g=++z){if(P=S[g],d=f[g],P===65535){c.push(0),I.push(0);break}if(P-(L=n[P].new)>=32768)for(c.push(0),I.push(2*(m.length+B-g)),a=W=P;P<=d?W<=d:W>=d;a=P<=d?++W:--W)m.push(n[a].new);else c.push(L-P),I.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*B+2*m.length),U.writeUInt16(0),U.writeUInt16(M),U.writeUInt16(k),U.writeUInt16(A),U.writeUInt16(T),oe=0,R=f.length;oe<R;oe++)a=f[oe],U.writeUInt16(a);for(U.writeUInt16(0),re=0,O=S.length;re<O;re++)a=S[re],U.writeUInt16(a);for(le=0,K=c.length;le<K;le++)l=c[le],U.writeUInt16(l);for(ve=0,J=I.length;ve<J;ve++)_=I[ve],U.writeUInt16(_);for(X=0,ce=m.length;X<ce;X++)x=m[X],U.writeUInt16(x);return{charMap:n,subtable:U.data,maxGlyphID:C+1}}},e}(),EAe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new uZ(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=uZ.encode(r,n),(s=new Rp).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),mit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),pit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),git=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),xit=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},vit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,o,l,c,u,d,f,A,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=f=0,A=a.length;f<A;o=++f)s=a[o],r.pos=s.offset,d=r.readString(s.length),l=new xit(d,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),bit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),yit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,A,m;for(m=[],d=0,f=(A=this.metrics).length;d<f;d++)o=A[d],m.push(o.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),jAe=[].slice,wit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,o,l,c,u,d,f,A;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(s=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Rp(n.read(s))).readShort(),d=c.readShort(),A=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new Cit(c,d,A,u,f):new Nit(c,l,d,A,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)s=r[n[c]],o.push(l.length),s&&(l=l.concat(s.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),Nit=function(){function e(t,r,n,a,s,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Cit=function(){function e(t,r,n,a,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Rp(jAe.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Eit=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i0(t,Uf),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<a.length;++l)if(a[l]=s,o<n.length&&n[o]==l){++o,a[l]=s;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),jit=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,o,l,c,u,d,f,A,m,g,x,v,y;for(a in n=EAe.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=n.charMap)m[(c=y[a]).old]=c.new;for(g in A=n.maxGlyphID,o)g in m||(m[g]=A++);return d=function(N){var C,_;for(C in _={},N)_[N[C]]=C;return _}(m),f=Object.keys(d).sort(function(N,C){return N-C}),x=function(){var N,C,_;for(_=[],N=0,C=f.length;N<C;N++)l=f[N],_.push(d[l]);return _}(),s=this.font.glyf.encode(o,x,m),u=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();Tr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();function kAe(e,t,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",A=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,A=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=A/2*u:n.valign==="bottom"&&(r-=A*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),f&&A>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var dZ={},x1=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:dZ=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return dZ||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),tL=function(e,t){return tL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},tL(e,t)};function SAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tL(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _Ae=function(e){SAe(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function kit(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Sit(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function W_(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function TAe(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var o=BAe(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function BAe(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function BT(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function IAe(e,t){var r=BT(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function _it(e,t,r,n,a){var s={},o=1.3333333333333333,l=yO(t,function(C){return a.getComputedStyle(C).backgroundColor});l!=null&&(s.fillColor=l);var c=yO(t,function(C){return a.getComputedStyle(C).color});c!=null&&(s.textColor=c);var u=Bit(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,A=n.borderTopWidth;if(n.borderBottomWidth===A&&n.borderRightWidth===A&&n.borderLeftWidth===A){var m=(parseFloat(A)||0)/f;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=yO(t,function(C){return a.getComputedStyle(C)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(s.fontSize=v/o);var y=Tit(n);y&&(s.fontStyle=y);var N=(n.fontFamily||"").toLowerCase();return e.indexOf(N)!==-1&&(s.font=N),s}function Tit(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function yO(e,t){var r=DAe(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function DAe(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:DAe(e.parentElement,t):r}function Bit(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=BT(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function OAe(e,t,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],A=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:A};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(o=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=Iit(c,u,r,g,n,a);v&&(x==="thead"?d.push(v):x==="tfoot"?A.push(v):f.push(v))}return{head:d,body:f,foot:A}}function Iit(e,t,r,n,a,s){for(var o=new _Ae(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=_it(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:Dit(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function Dit(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Oit(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function tA(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function PAe(e,t){var r=new x1(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Oit(a,n,t);var s=tA({},a,n,t),o;typeof window<"u"&&(o=window);var l=Pit(a,n,t),c=Fit(a,n,t),u=Rit(r,s),d=Mit(r,s,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function Pit(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=tA({},u,d,f)}else{var A=[e,t,r],m=A.map(function(g){return g[c]||{}});n[c]=tA({},m[0],m[1],m[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function Fit(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function Rit(e,t){var r,n,a,s,o,l,c,u,d,f,A,m,g=BT(t.margin,40/e.scaleFactor()),x=(r=Lit(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var N=(s=t.useCss)!==null&&s!==void 0?s:!1,C=t.theme||(N?"plain":"striped"),_=!!t.horizontalPageBreak,j=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:N,theme:C,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(A=t.tableLineColor)!==null&&A!==void 0?A:200,horizontalPageBreak:_,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function Lit(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Mit(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=OAe(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||Uit(n,a,s);return{columns:c,head:n,body:a,foot:s}}function Uit(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var rL=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Hit=function(e){SAe(t,e);function t(r,n,a,s,o,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return t}(rL),Qit=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new Hit(t,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new rL(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new rL(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),FAe=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof _Ae&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),RAe=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=BT(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Vit=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function $it(e,t){zit(e,t);var r=[],n=0;t.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(t);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=nL(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=nL(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),qit(t),Kit(t,e),Git(t)}function zit(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=IAe(e,t);t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=W_(u.text,u.styles,e)+f;var A=W_(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=A+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function nL(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),s=0;s<e.length;s++){var o=e[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var A=e.filter(function(m){return t<0?m.width>r(m):!0});A.length&&(t=nL(A,t,r))}return t}function Git(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,A=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:A,row:s}}}}}function qit(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function Kit(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=fZ(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=fZ(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var A=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<A*u.rowSpan?r={height:A,count:u.rowSpan}:r&&r.count>0&&r.height>A&&(A=r.height),A>s.height&&(s.height=A)}}r.count--}}function fZ(e,t,r,n,a){return e.map(function(s){return Wit(s,t,r,n,a)})}function Wit(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=W_(e,r,n))return e;for(;t<W_(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function LAe(e,t){var r=new x1(e),n=Xit(t,r.scaleFactor()),a=new Qit(t,n);return $it(r,a),r.applyStyles(r.userStyles),a}function Xit(e,t){var r=e.content,n=Jit(r.columns);if(r.head.length===0){var a=hZ(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=hZ(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,o=e.styles;return{columns:n,head:wO("head",r.head,n,o,s,t),body:wO("body",r.body,n,o,s,t),foot:wO("foot",r.foot,n,o,s,t)}}function wO(e,t,r,n,a,s){var o={},l=t.map(function(c,u){for(var d=0,f={},A=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(o[v.index]==null||o[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-A-d]:y=c[v.dataKey];var N={};typeof y=="object"&&!Array.isArray(y)&&(N=(y==null?void 0:y.styles)||{});var C=Zit(e,v,u,a,n,s,N),_=new RAe(y,C,e);f[v.dataKey]=_,f[v.index]=_,m=_.colSpan-1,o[v.index]={left:_.rowSpan-1,times:m}}else m--,A++;else o[v.index].left--,m=o[v.index].times,d++}return new FAe(c,u,e,f)});return l}function hZ(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Yit(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Yit(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Jit(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Vit(a,t,r)})}function Zit(e,t,r,n,a,s,o){var l=Sit(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=tA({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},A=e==="body"&&r%2===0?tA({},l.alternateRow,a.alternateRowStyles):{},m=kit(s),g=tA({},m,u,A,f);return tA(g,o)}function eot(e,t,r){var n;r===void 0&&(r={});var a=IAe(e,t),s=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(A){var m=t.columns.find(function(g){return g.dataKey===A||g.index===A});m&&!s.has(m.index)&&(s.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function tot(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=eot(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function MAe(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(A,m){return A+m.height},0);l+=u}var d=new x1(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(HAe(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=tA({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?rot(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(A){return IA(d,t,A,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(A,m){var g=m===t.body.length-1;X_(d,t,A,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(A){return IA(d,t,A,s,t.columns)})),TAe(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function rot(e,t,r,n){var a=tot(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?fN(e,t,r,n,u.columns,!0):AZ(e,t,n,u.columns),not(e,t,r,n,u.columns),NO(e,t,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?fN(e,t,r,n,d,!0):AZ(e,t,n,d),u=mZ(e,t,o+1,n,d),NO(e,t,n,d)}var f=u-o;a.slice(1).forEach(function(A){e.applyStyles(e.userStyles),fN(e,t,r,n,A.columns,!0),mZ(e,t,o+1,n,A.columns,f),NO(e,t,n,A.columns)}),o=u};o<t.body.length-1;)c()}function AZ(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return IA(e,t,s,r,n)})}function not(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,o){var l=o===t.body.length-1;X_(e,t,s,l,r,n,a)})}function mZ(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var o=Math.min(r+s,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=UAe(e,t,d,n);c.canEntireRowFit(f,a)&&(IA(e,t,c,n,a),l=r+u)}),l}function NO(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return IA(e,t,s,r,n)})}function aot(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function sot(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new RAe(u.raw,u.styles,u.section);d=tA(d,u),d.text=[];var f=aot(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var A=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(A,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(A,m),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new FAe(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function iot(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function X_(e,t,r,n,a,s,o){var l=UAe(e,t,n,s);if(r.canEntireRowFit(l,o))IA(e,t,r,s,o);else if(iot(e,r,l,t)){var c=sot(r,l,t,e);IA(e,t,r,s,o),fN(e,t,a,s,o),X_(e,t,c,n,a,s,o)}else fN(e,t,a,s,o),X_(e,t,r,n,a,s,o)}function IA(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}oot(e,c,n);var d=c.getTextPos();kAe(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function oot(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=BAe(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),lot(e,t,r,n.lineWidth))}function lot(e,t,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+t.width,s=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,A,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,A,m,"S")}}function UAe(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function fN(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(l){return IA(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;TAe(e,t,r,n),HAe(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return IA(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function HAe(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function cot(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=PAe(this,n),s=LAe(this,a);return MAe(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){kAe(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return x1.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){x1.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new x1(this),s=OAe(a,t,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var CO;function Li(e,t){var r=PAe(e,t),n=LAe(e,r);MAe(e,n)}try{if(typeof window<"u"&&window){var pZ=window,gZ=pZ.jsPDF||((CO=pZ.jspdf)===null||CO===void 0?void 0:CO.jsPDF);gZ&&cot(gZ)}}catch(e){console.error("Could not apply autoTable plugin",e)}const QAe="api_logs",uot=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:wr.fromDate(new Date)};await dn(pt(dt,QAe),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},dot=e=>{const t=Lt(pt(dt,QAe),tr("timestamp","desc"));return hr(t,n=>{const a=n.docs.map(s=>{var l,c;const o=s.data();return{id:s.id,...o,timestamp:((c=(l=o.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||o.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},W9=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es invlido o no est en sesin.");return}uot(e,t)},fot=["Localizar informacin explcita","Realizar inferencias a partir del texto","Interpretar y relacionar informacin del texto","Reflexionar sobre el texto y evaluarlo","Analizar aspectos formales del texto","Reconocer tipos de texto segn su propsito comunicativo","Comprender vocabulario en contexto"],hot=["Nmeros y operaciones","lgebra y funciones","Geometra","Probabilidad y estadstica","Resolucin de problemas","Modelamiento matemtico","Argumentacin y comunicacin matemtica"],xZ=pt(dt,"usuarios");async function pv(){try{console.log(" [DEBUG] Obteniendo usuarios de Firestore..."),console.log(" [DEBUG] Collection ref:",xZ);const e=await Rr(xZ);if(console.log(` [DEBUG] Encontrados ${e.docs.length} documentos en la coleccin usuarios`),e.empty)return console.log("  [DEBUG] La coleccin usuarios est vaca"),[];const t=e.docs.map(n=>{const a=n.data();return!a.curso||typeof a.curso!="string"||!a.curso.trim()?console.warn(" [ASIGNACION] Usuario sin curso asignado o curso invlido:",{id:n.id,...a}):console.log(" [ASIGNACION] Usuario con curso:",{id:n.id,curso:a.curso,nombre:a.nombreCompleto}),{id:n.id,...a}}),r=Array.from(new Set(t.map(n=>n.curso).filter(Boolean)));return console.log(" [ASIGNACION] Cursos nicos encontrados en usuarios:",r),console.log(" [DEBUG] Usuarios procesados correctamente:",t.length),console.log(" [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error(" [DEBUG] Error al obtener usuarios:",e),console.error(" [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const Aot=e=>{try{if(!e)return new Date().toISOString();if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString();if(e instanceof Date)return e.toISOString();const t=new Date(e);if(!isNaN(t.getTime()))return t.toISOString()}catch{}return new Date().toISOString()},wf="simce_sets",kE="simce_resultados";async function mot(e){try{return(await dn(pt(dt,wf),e)).id}catch(t){throw console.error("Error al crear set de preguntas:",t),new Error("No se pudo crear el set de preguntas")}}async function pot(e,t){try{await Zi(er(dt,wf,e),t)}catch(r){throw console.error("Error al actualizar set de preguntas:",r),new Error("No se pudo actualizar el set de preguntas")}}async function VAe(e){var t,r;console.log(`[DEBUG] obtenerSetPreguntas - Buscando set con ID: ${e}`);try{const n=await bA(er(dt,"simce_evaluaciones",e));if(n.exists()){const a=n.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Encontrado en simce_evaluaciones: ${a.titulo||"Sin ttulo"}`),console.log(`[DEBUG] obtenerSetPreguntas - Preguntas: ${((t=a.preguntas)==null?void 0:t.length)||0}`),a.preguntas&&a.preguntas.length>0){for(let s=0;s<a.preguntas.length;s++)if(a.preguntas[s].textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base (eval) en pregunta ${s+1}`);break}}return{id:n.id,...a}}}catch(n){console.warn("[DEBUG] obtenerSetPreguntas - Error al leer simce_evaluaciones, intentando simce_sets:",n)}try{const n=await bA(er(dt,wf,e));if(n.exists()){const a=n.data();if(console.log(`[DEBUG] obtenerSetPreguntas - Encontrado en ${wf}: ${a.titulo||"Sin ttulo"}`),console.log(`[DEBUG] obtenerSetPreguntas - Preguntas: ${((r=a.preguntas)==null?void 0:r.length)||0}`),a.preguntas&&a.preguntas.length>0){for(let s=0;s<a.preguntas.length;s++)if(a.preguntas[s].textoBase){console.log(`[DEBUG] obtenerSetPreguntas - Texto base (set) en pregunta ${s+1}`);break}}return{id:n.id,...a}}}catch(n){console.warn("[DEBUG] obtenerSetPreguntas - Error al leer simce_sets:",n)}throw console.log(`[DEBUG] obtenerSetPreguntas - No se encontr set con ID: ${e} en ninguna coleccin o sin permisos`),new Error("No se pudo obtener el set de preguntas")}async function X9(e){try{const t=Lt(pt(dt,wf),ur("creadorId","==",e),tr("fechaCreacion","desc")),n=(await Rr(t)).docs.map(l=>({id:l.id,...l.data()})),a=Lt(pt(dt,"simce_evaluaciones"),ur("creadorId","==",e),tr("fechaCreacion","desc")),o=(await Rr(a)).docs.map(l=>({id:l.id,...l.data(),preguntas:l.data().preguntas||[]}));return[...n,...o]}catch(t){throw console.error("Error al obtener sets de preguntas:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function $Ae(e){try{if(console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Buscando sets para curso ${e}`),!e)return console.error("[DEBUG] obtenerSetsPreguntasPorCurso - Error: cursoId es undefined o vaco"),[];const t=Lt(pt(dt,wf),ur("cursosAsignados","array-contains",e),tr("fechaCreacion","desc"));console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en ${wf}:`,t);const r=await Rr(t);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en ${wf}: ${r.docs.length}`);const n=Lt(pt(dt,"simce_evaluaciones"),ur("cursosAsignados","array-contains",e),tr("fechaCreacion","desc"));console.log("[DEBUG] obtenerSetsPreguntasPorCurso - Query ejecutando en simce_evaluaciones:",n);const a=await Rr(n);console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Resultados encontrados en simce_evaluaciones: ${a.docs.length}`);let s=[...r.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en ${wf}: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l}}),...a.docs.map(o=>{const l=o.data();return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Set encontrado en simce_evaluaciones: ${o.id}, cursosAsignados:`,l.cursosAsignados),{id:o.id,...l,preguntas:l.preguntas||[]}})];return console.log(`[DEBUG] obtenerSetsPreguntasPorCurso - Total sets combinados: ${s.length}`),s}catch(t){throw console.error("Error al obtener sets de preguntas por curso:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function zAe(e){try{if(!e)return[];const t=Lt(pt(dt,wf),ur("estudiantesAsignados","array-contains",e),tr("fechaCreacion","desc")),r=await Rr(t),n=Lt(pt(dt,"simce_evaluaciones"),ur("estudiantesAsignados","array-contains",e),tr("fechaCreacion","desc")),a=await Rr(n);return[...r.docs.map(s=>({id:s.id,...s.data()})),...a.docs.map(s=>({id:s.id,...s.data(),preguntas:s.data().preguntas||[]}))]}catch(t){return console.error("Error al obtener sets por estudiante:",t),[]}}async function GAe(e){try{await fa(er(dt,wf,e))}catch(t){throw console.error("Error al eliminar set de preguntas:",t),new Error("No se pudo eliminar el set de preguntas")}}async function qAe(e){try{return(await dn(pt(dt,kE),e)).id}catch(t){throw console.error("Error al guardar resultado de intento:",t),new Error("No se pudo guardar el resultado")}}async function KAe(e){try{const t=Lt(pt(dt,kE),ur("setId","==",e),tr("fechaEnvio","desc"));return(await Rr(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por set:",t),new Error("No se pudieron obtener los resultados")}}async function WAe(e,t){try{if(!t||t.length===0)return[];const r=10,n=[];for(let o=0;o<t.length;o+=r)n.push(t.slice(o,o+r));const a=[];for(const o of n){const l=Lt(pt(dt,kE),ur("setId","==",e),ur("estudianteId","in",o)),c=await Rr(l);a.push(...c.docs.map(u=>({id:u.id,...u.data()})))}const s=new Map;for(const o of a)s.set(o.id,o);return Array.from(s.values())}catch(r){throw console.error("Error al obtener resultados por curso:",r),new Error("No se pudieron obtener los resultados del curso")}}async function XAe(e){try{const t=Lt(pt(dt,kE),ur("estudianteId","==",e),tr("fechaEnvio","desc"));return(await Rr(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por estudiante:",t),new Error("No se pudieron obtener los resultados del estudiante")}}async function got(e){try{await fa(er(dt,kE,e))}catch(t){throw console.error("Error al eliminar resultado:",t),new Error("No se pudo eliminar el resultado")}}async function xot(e,t){try{console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Buscando evaluaciones para estudiante ${e} en curso ${t}`);const n=(u=>{if(!u)return"";let d=u.trim().toLowerCase();return d=d.replace(//g,""),d=d.replace(/\s+(medio|bsico|basico)/g,""),d=d.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),d=d.replace(/^(\d)(?![])/,"$1"),d=d.replace(/\s+/g,"").toUpperCase(),d})(t),[a,s]=await Promise.all([$Ae(n),zAe(e)]),o=new Map;[...a,...s].forEach(u=>o.set(u.id,u));const l=Array.from(o.values());console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Encontradas ${l.length} evaluaciones asignadas al curso ${t}`);const c=l.map(u=>{const d={id:u.id,titulo:u.titulo,descripcion:u.descripcion||"",asignatura:(()=>{const A=String(u.asignatura||"").toLowerCase();return A.includes("lect")?"Competencia Lectora":A.includes("lg")||A.includes("log")||A.includes("mat")?"Pensamiento Lgico":u.asignatura})(),preguntas:[...u.preguntas],fechaAsignacion:u.fechaCreacion||new Date().toISOString(),textoBase:""};if(String(d.asignatura||"").toLowerCase().includes("lect")){let A="";for(const m of u.preguntas)if(m.textoBase&&m.textoBase.trim()){A=m.textoBase.trim(),console.log(`[DEBUG] Texto base encontrado en pregunta ${m.id}:`,A.substring(0,50)+"...");break}A&&d.preguntas.length>0&&(console.log(`[DEBUG] Asignando texto base a la evaluacin y primera pregunta: ${u.id}`),d.textoBase=A,d.preguntas[0].textoBase=A)}return d});return console.log(`[DEBUG] obtenerEvaluacionesEstudiante - Evaluaciones mapeadas: ${c.length}`),c}catch(r){return console.error("Error en obtenerEvaluacionesEstudiante:",r),[]}}async function hN(e){var t,r;try{console.log(`[DEBUG] obtenerEvaluacionPorId - Buscando evaluacin con ID: ${e}`);const n=await VAe(e);if(n){console.log(`[DEBUG] obtenerEvaluacionPorId - Evaluacin encontrada: ${n.titulo}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Asignatura: ${n.asignatura}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Cantidad de preguntas: ${((t=n.preguntas)==null?void 0:t.length)||0}`);const a=n.preguntas.some(s=>s.textoBase);if(console.log(`[DEBUG] obtenerEvaluacionPorId - Tiene texto base?: ${a}`),a){const s=n.preguntas.find(o=>o.textoBase);console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base encontrado en pregunta: ${s==null?void 0:s.id}`),console.log(`[DEBUG] obtenerEvaluacionPorId - Texto base (primeros 50 caracteres): ${(r=s==null?void 0:s.textoBase)==null?void 0:r.substring(0,50)}...`)}}else console.log(`[DEBUG] obtenerEvaluacionPorId - No se encontr evaluacin con ID: ${e}`);return n||null}catch(n){return console.error("Error en obtenerEvaluacionPorId:",n),null}}async function YAe(e){try{const t={...e,setId:e.evaluacionId||e.setId||null,respuestas:e.respuestas||[],porcentajeAciertos:e.porcentajeAciertos??e.porcentajeLogro??0,porcentajeLogro:e.porcentajeLogro??e.porcentajeAciertos??0,nivelLogro:e.nivelLogro||"Insuficiente",fechaEnvio:e.fechaRealizacion||new Date().toISOString(),tiempoRealizacion:e.tiempoRealizacion??e.duracionSegundos??null};return await qAe(t)}catch(t){throw console.error("Error en guardarIntentoEvaluacion:",t),t}}async function JAe(e,t){try{return(await XAe(e)).filter(a=>a.setId===t)}catch(r){return console.error("Error en verificarIntentoExistente:",r),[]}}async function ZAe(e){try{let t=[];try{t=await X9(e)}catch(r){console.warn("[DEBUG] obtenerEvaluacionesPorProfesor - Falla query directa, intento fallback:",r)}return t.map(r=>({id:r.id,titulo:r.titulo,descripcion:r.descripcion||"",asignatura:r.asignatura,preguntas:Array.isArray(r.preguntas)?r.preguntas:[],fechaCreacion:Aot(r.fechaCreacion),cursosAsignados:r.cursosAsignados||[]}))}catch(t){return console.error("Error en obtenerEvaluacionesPorProfesor:",t),[]}}async function aL(e){try{return await KAe(e)}catch(t){return console.error("Error en obtenerIntentosPorEvaluacion:",t),[]}}async function eme(e,t){try{const r=v=>{if(!v)return"";let y=v.trim().toLowerCase();return y=y.replace(//g,""),y=y.replace(/\s+(medio|bsico|basico)/g,""),y=y.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),y=y.replace(/^(\d)(?![])/,"$1"),y=y.replace(/\s+/g,"").toUpperCase(),y},n=r(t),s=(await pv()).filter(v=>v.profile==="ESTUDIANTE"&&r(v.curso||"")===n).map(v=>v.id);if(s.length===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const o=await WAe(e,s),l=o.length;if(l===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const c=o.map(v=>v.porcentajeAciertos||v.porcentajeLogro||0),u=c.reduce((v,y)=>v+y,0)/l;let d=0,f=0,A=0;c.forEach(v=>{v>=80?d++:v>=50?f++:A++});const m=d/l*100,g=f/l*100,x=A/l*100;return{totalEstudiantes:l,promedioLogro:u,nivelPredominante:m>=Math.max(g,x)?"Adecuado":g>=x?"Elemental":"Insuficiente",porcentajeAdecuado:m,porcentajeElemental:g,porcentajeInsuficiente:x,porEjeTematico:[],porPregunta:[]}}catch(r){return console.error("Error en obtenerEstadisticasPorCurso:",r),null}}const sL=Object.freeze(Object.defineProperty({__proto__:null,actualizarSetPreguntas:pot,crearSetPreguntas:mot,eliminarResultado:got,eliminarSetPreguntas:GAe,guardarIntentoEvaluacion:YAe,guardarResultadoIntento:qAe,obtenerEstadisticasPorCurso:eme,obtenerEvaluacionPorId:hN,obtenerEvaluacionesEstudiante:xot,obtenerEvaluacionesPorProfesor:ZAe,obtenerIntentosPorEvaluacion:aL,obtenerResultadosPorCurso:WAe,obtenerResultadosPorEstudiante:XAe,obtenerResultadosPorSet:KAe,obtenerSetPreguntas:VAe,obtenerSetsPreguntasPorCurso:$Ae,obtenerSetsPreguntasPorEstudiante:zAe,obtenerSetsPreguntasPorProfesor:X9,verificarIntentoExistente:JAe},Symbol.toStringTag,{value:"Module"}));function vot(e){if(!e)return;let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/\t/g,"  ").trim();const r=4e3;return t.length>r&&(console.log(`Texto proporcionado truncado de ${t.length} a ${r} caracteres`),t=t.substring(0,r)+`

[Texto truncado por lmite de tamao]`),t}async function bot(e,t){try{let r;if(typeof e=="string"?r={asignatura:e,cantidad:t??5}:(r=e,r.textoProporcionado&&(r.textoProporcionado=vot(r.textoProporcionado))),r.asignatura){const l=r.asignatura.toLowerCase();l.includes("lectora")||l.includes("lectura")?r.asignatura="Lectura":(l.includes("lg")||l.includes("log")||l.includes("matem"))&&(r.asignatura="Matemtica")}const n=r.cantidad??4,a=4;r.nivel&&!["1M","2M"].includes(r.nivel)&&(r.nivel=r.nivel==="1"?"1M":r.nivel==="2"?"2M":r.nivel),console.log(`Generando ${n} preguntas de ${r.asignatura}, nivel ${r.nivel||"1M"}`);const s=yot(r,n,a);console.log("Enviando prompt a la IA (usando modelo Pro para mejor calidad)...");const o=await U7(s,2,!0);if(!o)throw console.error("La IA no devolvi respuesta"),new Error("No se recibi respuesta del modelo de IA. Por favor, intente nuevamente.");return console.log("Procesando respuesta de la IA..."),Not(o,n,r)}catch(r){throw console.error("Error en generarPreguntasSimce:",r),r instanceof Error?r:new Error("Ocurri un error al generar las preguntas SIMCE. Por favor, intente nuevamente.")}}function yot(e,t,r){const n=e.asignatura,s=(e.nivel||"1M")==="1M"?"1 medio":"2 medio",o=e.dificultad||"media",l={baja:"facil",media:"media",alta:"dificil"},c=[];if(c.push("Eres un generador pedaggico especializado en preguntas tipo SIMCE para Chile."),c.push(`Tu tarea es crear exactamente ${t} preguntas de alta calidad de la asignatura "${n}" para nivel ${s} (Chile).`),n==="Lectura"){c.push(`
ESPECIFICACIONES PARA LECTURA:`);const u=e.habilidadesLectura&&e.habilidadesLectura.length>0?e.habilidadesLectura:["Localizar informacin","Relacionar informacin","Interpretar","Reflexionar y evaluar"];c.push(`- Habilidades a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar especficamente UNA de estas habilidades."),c.push("- Distribuye las preguntas entre las habilidades seleccionadas.");const d=e.textoProporcionado&&e.textoProporcionado.trim().length>0,f=e.textoBaseLectura&&e.textoBaseLectura.trim().length>0;d?(c.push(`
- IMPORTANTE: Utilizars EXCLUSIVAMENTE el texto proporcionado por el usuario para generar preguntas.`),c.push("- NO generes un texto adicional, usa nicamente el texto que se proporciona ms adelante."),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):f?(c.push(`
- Utilizars el texto base proporcionado para generar preguntas.`),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):(c.push(`
- Como no se ha proporcionado un texto base, DEBES CREAR un texto original:`),c.push("  * Extensin: 200-350 palabras"),c.push("  * Apropiado para estudiantes de "+s),c.push("  * Culturalmente relevante para Chile, pero neutro (sin controversias)"),c.push("  * Sin marcas comerciales ni contenido con derechos de autor"),c.push('  * El texto debe incluirse en la propiedad "textoBase" del primer tem solamente'))}else if(n==="Matemtica"){c.push(`
ESPECIFICACIONES PARA MATEMTICA:`);const u=e.ejesMatematica&&e.ejesMatematica.length>0?e.ejesMatematica:["Nmeros","lgebra","Probabilidad y estadstica","Geometra"];c.push(`- Ejes temticos a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar especficamente UNO de estos ejes."),c.push("- Distribuye las preguntas entre los ejes seleccionados."),c.push("- Usa contextos matemticos realistas y escolares, relevantes para la vida diaria de estudiantes chilenos."),e.textoProporcionado&&(c.push(`
- IMPORTANTE: Utilizars el texto proporcionado por el usuario como contexto o referencia para generar problemas matemticos.`),c.push("- Las preguntas pueden incluir datos o situaciones mencionadas en el texto."))}if(c.push(`
REGLAS DE FORMATO DE SALIDA:`),c.push("- Devuelve UN NICO bloque JSON (sin texto adicional antes o despus)."),c.push("- El JSON debe ser un arreglo de objetos; cada objeto representa una pregunta con este esquema EXACTO:"),c.push("  {"),c.push('    "id": "p1",'),c.push('    "enunciado": "Texto del enunciado...",'),c.push('    "alternativas": ['),c.push('      {"id": "A", "texto": "...", "esCorrecta": true, "explicacion": "Justificacin detallada..."},'),c.push('      {"id": "B", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "C", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "D", "texto": "...", "esCorrecta": false}'),c.push("    ],"),n==="Lectura"?(c.push('    "habilidad": "Una de las habilidades especificadas",'),e.textoBaseLectura||c.push('    "textoBase": "El texto completo aqu (solo en el primer tem)",')):c.push('    "eje": "Uno de los ejes especificados",'),c.push('    "estandarAprendizaje": "Estndar curricular especfico",'),c.push(`    "dificultad": "${l[o]}"`),c.push("  }"),c.push(`
REGLAS DE CALIDAD:`),c.push("1. Enunciados claros y directos, sin ambigedades."),c.push(`2. EXACTAMENTE ${r} alternativas por pregunta (etiquetadas A, B, C, D).`),c.push("3. Solo UNA alternativa correcta por pregunta."),c.push('4. La alternativa correcta debe tener "esCorrecta": true y debe incluir una "explicacion" pedaggica.'),c.push("5. Distractores (alternativas incorrectas) deben representar errores tpicos (conceptuales o procedimentales)."),c.push("6. Las preguntas deben estar alineadas rigurosamente con el currculum chileno para "+s+"."),c.push(`7. Ajusta el nivel de dificultad a "${o}" (${l[o]}).`),c.push("8. Usa lenguaje claro, inclusivo y espaol chileno estndar."),c.push("9. Evita contenido con derechos de autor, marcas comerciales y temas sensibles."),e.contextoCurricular&&(c.push(`
CONTEXTO CURRICULAR ESPECFICO:`),c.push(e.contextoCurricular),c.push("- Alinea tus tems al contexto curricular provisto.")),e.textoProporcionado||e.textoBaseLectura&&n==="Lectura"){const u=!!e.textoProporcionado,d=u?`
TEXTO PROPORCIONADO POR EL USUARIO:`:`
TEXTO BASE PARA LECTURA:`;c.push(d);const f=e.textoProporcionado||e.textoBaseLectura;c.push('"""'),c.push(f),c.push('"""'),c.push(`
- Formula las preguntas NICAMENTE sobre este texto.`),c.push("- IMPORTANTE: NO incluyas el texto en la propiedad textoBase del JSON, ya fue provisto externamente."),u&&(c.push("- Este es un texto proporcionado por el usuario, asegrate de formular preguntas relevantes y precisas."),n==="Matemtica"&&(c.push("- Para matemticas, extrae datos numricos y situaciones del texto para formular problemas matemticos relacionados."),c.push("- Cuando sea relevante, inventa datos numricos coherentes con la situacin para completar los problemas.")))}return c.push(`
IMPORTANTE: Produce SOLO el arreglo JSON, sin texto introductorio ni comentarios adicionales.`),c.join(`
`)}function vZ(e){if(!e)return e;try{const t=["como","as","tambin","segn","vase","ejemplo"];let r=e;return t.forEach(n=>{const a=new RegExp(`"([^"]*)"${n}"([^"]*)"`,"g");r=r.replace(a,`"$1\\"${n}\\"$2"`)}),r=r.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),r=r.replace(/,(\s*[\]}])/g,"$1"),r}catch(t){return console.log("Error al corregir problemas comunes:",t),e}}function wot(e){if(!e||typeof e!="string")return console.error("Texto de entrada invlido:",e),null;console.log("Iniciando extraccin JSON con algoritmo mejorado..."),e=e.replace(/^\uFEFF/,"");try{e=vZ(e)}catch(t){console.log("Error durante pre-procesamiento de palabras problemticas:",t)}try{const t=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/ig);if(t&&t.length>0){console.log(`Encontrados ${t.length} bloques de cdigo potenciales`);for(const r of t){const n=r.replace(/```(?:json)?|```/ig,"").trim();console.log(`Probando bloque de cdigo: ${n.substring(0,50)}...`);const a=vZ(n),s=nb(a);try{return JSON.parse(s),console.log("JSON vlido extrado del bloque de cdigo"),s}catch{console.log("JSON en este bloque de cdigo es invlido, continuando con siguiente bloque...")}}}}catch(t){console.log("Error procesando bloques de cdigo:",t)}try{const t=/(\[\s*\{[\s\S]*?\}\s*\])/i.exec(e);if(t&&t[1]){const r=nb(t[1].trim());try{return JSON.parse(r),console.log("JSON completo vlido encontrado directamente"),r}catch{console.log("JSON completo parece invlido, continuando...")}}}catch(t){console.log("Error buscando JSON completo:",t)}try{const t=e.indexOf("[");if(t>=0&&e.indexOf('"id":',t)>t){console.log("Analizando estructura desde el inicio del array...");const n=e.lastIndexOf("]");let a;if(n>t)a=e.substring(t,n+1);else{const o=/"id"\s*:\s*"p\d+"/g;let l,c=-1,u="";for(;(l=o.exec(e))!==null;)c=l.index,u=l[0];if(console.log(`ltima pregunta encontrada: ${u} en posicin ${c}`),c>0){let d=e.indexOf('"id":',c+u.length);d===-1?d=e.length:(d=e.lastIndexOf("}",d),d===-1?d=e.length:d+=1),a=e.substring(t,d)+"]"}else a=e.substring(t)+"]"}const s=nb(a);try{return JSON.parse(s),console.log("JSON reconstruido desde inicio del array"),s}catch{console.log("JSON reconstruido invlido, continuando...")}}}catch(t){console.log("Error en estrategia de reconstruccin desde inicio:",t)}try{console.log("Buscando primera pregunta completa...");const r=/\{[\s\S]*?"id"\s*:\s*"p1"[\s\S]*?"enunciado"[\s\S]*?"alternativas"[\s\S]*?\}/.exec(e);if(r){let n=r[0];if(n.includes('"alternativas"')&&n.includes('"id": "A"')){const a=["A","B","C","D"],s=[];for(const o of a)n.includes(`"id": "${o}"`)&&s.push(o);if(console.log(`Alternativas encontradas en p1: ${s.join(", ")}`),s.length>0){const o=n.indexOf('"alternativas"');if(!n.substring(o).includes("]}")){console.log("Estructura de alternativas incompleta, reconstruyendo...");let d=-1,f="";for(const A of s){const m=n.lastIndexOf(`"id": "${A}"`);m>d&&(d=m,f=A)}if(d!==-1){console.log(`ltima alternativa completa: ${f}`);const A=n.indexOf("}",d);A!==-1&&(n=n.substring(0,A+1),n.includes("]}")||(n+="]}"))}}let c=`[${n}]`;const u=nb(c);try{return JSON.parse(u),console.log("Primera pregunta reconstruida con xito"),u}catch(d){console.log("Error al parsear primera pregunta reconstruida:",d)}}}}}catch(t){console.log("Error buscando primera pregunta:",t)}try{console.log("Intentando extraccin quirrgica del enunciado...");const t=e.match(/"enunciado"\s*:\s*"([^"]+)"/);if(t&&t[1]){const r=t[1].replace(/"/g,'\\"');console.log("Enunciado encontrado:",r.substring(0,30)+"...");let n="A";const a=e.match(/"respuesta"\s*:\s*"([A-D])"/);a&&a[1]&&(n=a[1]);let s="No disponible";const o=e.match(/"explicacion"\s*:\s*"([^"]+)"/);o&&o[1]&&(s=o[1].replace(/"/g,'\\"'));const l=`[{
        "id": "p1",
        "enunciado": "${r}",
        "alternativas": [
          {"id": "A", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${n==="A"}, "explicacion": "${n==="A"?s:""}"},
          {"id": "B", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${n==="B"}, "explicacion": "${n==="B"?s:""}"},
          {"id": "C", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${n==="C"}, "explicacion": "${n==="C"?s:""}"},
          {"id": "D", "texto": "Opcin recuperada parcialmente", "esCorrecta": ${n==="D"}, "explicacion": "${n==="D"?s:""}"}
        ],
        "respuesta": "${n}",
        "explicacion": "${s}",
        "habilidad": "Recuperacin parcial",
        "estandarAprendizaje": "Contenido recuperado parcialmente"
      }]`;try{const c=nb(l);return JSON.parse(c),console.log("Generado JSON de emergencia con enunciado recuperado"),c}catch(c){console.log("Error al parsear JSON de emergencia:",c)}}}catch(t){console.log("Error en extraccin quirrgica:",t)}try{return console.log("Construyendo JSON mnimo de respaldo..."),nb(`[{
      "id": "p1",
      "enunciado": "La respuesta de la IA no pudo ser procesada correctamente. Por favor, intente nuevamente.",
      "alternativas": [
        {"id": "A", "texto": "Volver a generar preguntas", "esCorrecta": true, "explicacion": "El sistema detect un formato incorrecto en la respuesta de la IA y no pudo procesarla."},
        {"id": "B", "texto": "Opcin no disponible", "esCorrecta": false},
        {"id": "C", "texto": "Opcin no disponible", "esCorrecta": false},
        {"id": "D", "texto": "Opcin no disponible", "esCorrecta": false}
      ],
      "respuesta": "A",
      "explicacion": "Se recomienda intentar generar nuevamente o con diferentes parmetros."
    }]`)}catch(t){console.error("Error final en construccin de JSON de respaldo:",t)}return console.error("Todos los mtodos de extraccin JSON fallaron"),null}function nb(e){const t=e;console.log(`Limpiando JSON (primeros 50 caracteres): ${e.substring(0,50).replace(/\n/g,"\\n")}...`);const r=()=>{if(e.includes('"alternativas"')&&e.lastIndexOf('"alternativas"')>e.lastIndexOf("]"))return console.log("JSON truncado detectado en array de alternativas"),!0;const A=e.lastIndexOf("{"),m=e.lastIndexOf("}");if(A>m)return console.log("JSON truncado con objeto incompleto al final"),!0;const g=(C,_)=>(C.match(new RegExp("\\"+_,"g"))||[]).length,x=g(e,"{"),v=g(e,"}"),y=g(e,"["),N=g(e,"]");return x!==v||y!==N?(console.log("JSON con estructura desbalanceada",{llaveAbiertas:x,llaveCerradas:v,corcheteAbiertos:y,corcheteCerrados:N}),!0):!1},n=[];for(let A=0;A<e.length;A++){const m=e.charCodeAt(A);m<32&&m!==9&&m!==10&&m!==13&&n.push({posicion:A,codigo:m,contexto:e.substring(Math.max(0,A-15),A)+"|PROBLEMA|"+e.substring(A+1,A+15)})}n.length>0&&(console.log(`Detectados ${n.length} caracteres de control problemticos`),n.slice(0,3).forEach(A=>{console.log(`Carcter de control en posicin ${A.posicion}, cdigo U+${A.codigo.toString(16).padStart(4,"0")}`),console.log(`Contexto: ${A.contexto}`)})),e=e.replace(/^\uFEFF/,"");let a="";for(let A=0;A<e.length;A++){const m=e.charCodeAt(A);m>=32&&m<=126||m>=128&&m<=255||m===9||m===10||m===13?a+=e[A]:a+=" "}if(e=a,e=e.replace(/\/\/.*/g,""),e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),e=e.replace(/,(\s*[\]}])/g,"$1"),r()){console.log("Intentando reparar JSON truncado...");const A=e.match(/\{\s*"id"\s*:\s*"p1"[\s\S]*?(?="id"|$)/);if(A){let m=A[0];if(m.includes('"enunciado"')&&m.includes('"alternativas"')&&!m.includes('"}]}')&&(m.match(/"id"\s*:\s*"[A-D]"/g)||[]).length>0){let x=-1,v=-1,y=0;for(;(v=m.indexOf(`"id": "${String.fromCharCode(65+y)}"`,v+1))!==-1&&(x=v,y++,!(y>=4)););if(x!==-1){const N=m.indexOf("}",x);if(N!==-1){let C=m.substring(0,N+1);C+=" ] }",e=`[ ${C} ]`,console.log("JSON reconstruido desde alternativa incompleta")}}}}}let s="",o=!1,l=!1;for(let A=0;A<e.length;A++){const m=e[A],g=e.charCodeAt(A);o?l?(s+=m,l=!1):m==="\\"?(s+=m,l=!0):m==='"'?(s+=m,o=!1):g<32?(s+="\\u"+("0000"+g.toString(16)).slice(-4),console.log(`Escapado carcter de control en posicin ${A}: U+${g.toString(16).padStart(4,"0")}`)):m==='"'&&e[A-1]!=="\\"?(s+='\\"',console.log(`Escapada comilla sin escapar en posicin ${A}`)):s+=m:(m==='"'&&!o&&(o=!0),s+=m)}e=s,e=e.replace(/:(\s*)(true|false)(\s*[,}])/g,(A,m,g,x)=>": "+g+x),["explicacion","explanation","texto","textoBase","enunciado","habilidad","eje","estandarAprendizaje"].forEach(A=>{const m=new RegExp(`"${A}"\\s*:\\s*"([^"]*)"`,"g");e=e.replace(m,(g,x)=>{const v=x.replace(/"/g,'\\"');return`"${A}": "${v}"`})}),e=e.replace(/"([^"]*)"([^"]*)"([^"]*)"/g,(A,m,g,x)=>g.trim().length<15&&(g.includes("como")||g.includes("as")||g.includes("tambin")||g.includes("segn"))?`"${m}\\"${g}\\"${x}"`:A),e=e.replace(/[ \t]+/g," ").trim(),!e.startsWith("[")&&e.includes('"id": "p1"')&&(e=`[${e}]`,console.log("Encapsulando objeto en array")),!(e.endsWith("}]")||e.endsWith('"]'))&&e.includes('"id": "p1"')&&(e.lastIndexOf("{")>e.lastIndexOf("}")&&(e+="}",console.log("Cerrando objeto abierto")),e.lastIndexOf("[")>e.lastIndexOf("]")&&(e+="]",console.log("Cerrando array abierto"))),e.includes('"alternativas"')&&!e.includes("]")&&(e+="]",console.log("Cerrando array de alternativas truncado"));const d=e.match(/"alternativas"\s*:\s*\[\s*{\s*"id"\s*:\s*"A".*?"explicacion"\s*:\s*"[^"]*"(?!\s*})/);if(d){const A=e.indexOf(d[0])+d[0].length;e=e.substring(0,A)+" }"+e.substring(A),console.log("Reparado cierre de alternativa")}const f=A=>{if(e.length>=A+10){const m=e.substring(Math.max(0,A-20),Math.min(e.length,A+20));console.log(`Verificando contexto alrededor de posicin ${A}: "${m}"`);const g=[];for(let x=Math.max(0,A-5);x<Math.min(e.length,A+5);x++)g.push({pos:x,char:e[x],code:e.charCodeAt(x),hex:e.charCodeAt(x).toString(16).padStart(4,"0")});console.log("Anlisis de caracteres alrededor de posicin especfica:"),g.forEach(x=>{console.log(`Pos ${x.pos}: "${x.char}" (U+${x.hex})`)})}};f(392);try{e.includes("textoBase")&&(e=e.replace(/"textoBase"\s*:\s*"([^"]*)"/g,(A,m)=>`"textoBase": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalizacin especial para campo textoBase")),e.includes('"explicacion"')&&(e=e.replace(/"explicacion"\s*:\s*"([^"]*)"/g,(A,m)=>`"explicacion": "${m.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalizacin especial para campos explicacion")),JSON.parse(e),console.log("JSON limpio vlido")}catch(A){console.log("JSON sigue siendo invlido despus de limpieza, intentando reparacin ms agresiva"),console.error("Error especfico:",A.message);try{if(A.message&&A.message.includes("position")){const x=A.message.match(/position (\d+)/);if(x){const v=parseInt(x[1]);console.log(`Error en posicin especfica: ${v}`);const y=e.substring(Math.max(0,v-30),Math.min(e.length,v+30));if(console.log(`Contexto del error: "${y}"`),v===392||v>380&&v<400){console.log("Detectado el error tpico en posicin ~392! Aplicando correccin especfica..."),f(v);try{const N=e.lastIndexOf('"',v),C=e.indexOf('"',v);if(N!==-1&&C!==-1){const _=e.substring(0,N+1),j=e.substring(C);e=_+"Contenido reemplazado debido a caracteres de control"+j,console.log("Aplicada correccin especfica para error en posicin 392");try{return JSON.parse(e),console.log("Correccin especfica exitosa"),e}catch{console.log("La correccin especfica fall, continuando...")}}}catch(N){console.log("Error durante correccin especfica:",N)}}if(y.includes('"textoBase"')||y.includes('"explicacion"')){const N=e.lastIndexOf('"',v)+1,C=e.indexOf('"',v);if(N>=0&&C>=0){const _=e.substring(N,C),j=_.substring(0,Math.min(100,_.length));e=e.substring(0,N)+j+e.substring(C),console.log("Aplicada reparacin de campo con truncado de contenido");try{return JSON.parse(e),console.log("Reparacin exitosa por truncado de contenido"),e}catch{console.log("Reparacin por truncado fall, continuando con reconstruccin completa")}}}}}const m=e.match(/"id"\s*:\s*"([^"]*)"/),g=e.match(/"enunciado"\s*:\s*"([^"]*)"/);if(m&&g){const x=m[1],v=g[1],y=v.length>150?v.substring(0,150)+"...":v;console.log(`Reconstruyendo con id="${x}" y enunciado="${y.substring(0,30)}..."`);const N=`[{
          "id": "${x}",
          "enunciado": "${y}",
          "alternativas": [
            {"id": "A", "texto": "Alternativa A (reconstruida)", "esCorrecta": true, "explicacion": "Alternativa reconstruida automticamente debido a problemas en el formato JSON."},
            {"id": "B", "texto": "Alternativa B", "esCorrecta": false},
            {"id": "C", "texto": "Alternativa C", "esCorrecta": false},
            {"id": "D", "texto": "Alternativa D", "esCorrecta": false}
          ],
          "estandarAprendizaje": "Contenido reconstruido debido a problemas en el formato JSON"
        }]`;try{JSON.parse(N),console.log("Generada versin de emergencia del JSON"),e=N}catch{console.log("Error al parsear JSON de emergencia, creando versin bsica"),e=`[{
            "id": "p1",
            "enunciado": "No fue posible procesar la respuesta. Por favor, intente nuevamente.",
            "alternativas": [
              {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Se recomienda volver a intentar la generacin."},
              {"id": "B", "texto": "Opcin B", "esCorrecta": false},
              {"id": "C", "texto": "Opcin C", "esCorrecta": false},
              {"id": "D", "texto": "Opcin D", "esCorrecta": false}
            ],
            "habilidad": "Diagnstico",
            "estandarAprendizaje": "Error en generacin"
          }]`}}else console.log("No se encontraron datos mnimos para reconstruccin, usando JSON de fallback mnimo"),e=`[{
          "id": "p1",
          "enunciado": "No fue posible procesar la respuesta de la IA. Por favor, intente nuevamente.",
          "alternativas": [
            {"id": "A", "texto": "Volver a intentar", "esCorrecta": true, "explicacion": "El sistema detect un formato incorrecto en la respuesta de la IA."},
            {"id": "B", "texto": "Modificar parmetros", "esCorrecta": false},
            {"id": "C", "texto": "Usar menos preguntas", "esCorrecta": false},
            {"id": "D", "texto": "Contactar soporte", "esCorrecta": false}
          ],
          "habilidad": "Diagnstico",
          "estandarAprendizaje": "Error en formato de respuesta"
        }]`}catch(m){console.log("Error durante la reconstruccin manual:",m),e=`[{
        "id": "p1",
        "enunciado": "Error crtico en el procesamiento de la respuesta.",
        "alternativas": [
          {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Error tcnico en el procesamiento de la respuesta."},
          {"id": "B", "texto": "Opcin B", "esCorrecta": false},
          {"id": "C", "texto": "Opcin C", "esCorrecta": false},
          {"id": "D", "texto": "Opcin D", "esCorrecta": false}
        ]
      }]`}}if(t!==e){console.log("Se realizaron modificaciones al JSON original");try{JSON.parse(e)}catch(A){console.error("JSON final sigue siendo invlido:",A),console.log("JSON limpiado (primeros 100 caracteres):",e.substring(0,100))}}return e}function Not(e,t,r){if(!e||typeof e!="string")throw console.error("Respuesta de IA invlida:",e),new Error("No se recibi una respuesta vlida de la IA");console.log("Procesando respuesta de la IA...");try{console.log(`Respuesta recibida: ${e.length} caracteres. Primeros 100:`,e.substring(0,100).replace(/\n/g,"\\n"));const n=wot(e);if(!n)return console.error("No se pudo extraer JSON de la respuesta despus de mltiples intentos"),Ww(1,"La IA gener una respuesta en un formato que no se pudo procesar. Por favor, intente nuevamente.");console.log("JSON extrado correctamente, intentando parsear...");let a;try{a=JSON.parse(n),console.log("JSON parseado correctamente:",typeof a,Array.isArray(a)?a.length:"no es array")}catch(l){console.error("Error al parsear el JSON final:",l,"JSON parcial:",n.substring(0,200)),console.log("Intentando reparacin de emergencia del JSON...");try{const c=n.match(/\[\s*\{.*?\}\s*(?:\]|$)/s);if(c){const u=c[0].endsWith("]")?c[0]:c[0]+"]";a=JSON.parse(u),console.log("Reparacin parcial exitosa")}else throw new Error("No se pudo reparar el JSON")}catch{return console.log("Creando objeto de respaldo despus de error de parseo final"),Ww(1,"La IA gener una respuesta en formato incorrecto. Por favor, intente nuevamente con diferentes parmetros.")}}if(!Array.isArray(a))if(console.log("La respuesta no es un array, encapsulndola"),typeof a=="object"&&a!==null)a=[a];else return console.error("La respuesta no es un objeto que podamos encapsular:",typeof a),Ww(1,"La respuesta recibida no tiene el formato esperado. Por favor, intente nuevamente.");if(a=a.filter(l=>l&&typeof l=="object"),a.length===0)return console.error("No se encontraron preguntas vlidas despus de filtrar"),Ww(1,"No se pudieron extraer preguntas vlidas de la respuesta. Por favor, intente nuevamente.");console.log(`Se encontraron ${a.length} preguntas para procesar`),a.length<t&&(console.warn(` Solo se generaron ${a.length} preguntas de ${t} solicitadas. Intentando re-generacin automtica.`),a.length===1&&t>1&&r&&r.asignatura&&console.log("Detectado problema de generacin parcial. Intentando recuperar ms preguntas..."));let s;r!=null&&r.textoProporcionado?(s=r.textoProporcionado,console.log("Usando texto proporcionado por el usuario como textoBase")):a.length>0&&a[0].textoBase?(s=a[0].textoBase,console.log("Se encontr textoBase generado por la IA para preguntas de Lectura")):r!=null&&r.textoBaseLectura&&(s=r.textoBaseLectura,console.log("Usando textoBaseLectura de las opciones"));const o=a.slice(0,t).map((l,c)=>{try{if(console.log(`Procesando pregunta ${c+1}...`),!l||typeof l!="object")throw new Error(`La pregunta ${c+1} no es un objeto vlido`);if(!l.enunciado&&!l.pregunta&&!l.texto){console.warn(`La pregunta ${c+1} no tiene enunciado, buscando alternativas...`);const g=Object.entries(l).find(([x,v])=>typeof v=="string"&&v.length>20&&["contenido","stem","question","statement"].includes(x.toLowerCase()));if(g)l.enunciado=g[1],console.log(`Usando '${g[0]}' como enunciado`);else throw new Error(`No se encontr enunciado para la pregunta ${c+1}`)}let u=Array.isArray(l.alternativas)?l.alternativas:[];u.length===0&&(l.A||l.a||l.opciones||l.options)&&(console.log("Detectado formato alternativo de alternativas"),l.opciones&&Array.isArray(l.opciones)?u=l.opciones:l.options&&Array.isArray(l.options)?u=l.options:u=["A","B","C","D"].map(g=>{const x=l[g],v=l[g.toLowerCase()],y=x!==void 0?x:v;if(y){if(typeof y=="string")return{id:g,texto:y,esCorrecta:l.respuesta===g||l.correcta===g};if(typeof y=="object")return{id:g,...y}}return{id:g,texto:`Alternativa ${g}`,esCorrecta:!1}})),u.length===0&&(console.log("No se encontraron alternativas, creando alternativas por defecto"),u=[{id:"A",texto:"Opcin A (generada automticamente)",esCorrecta:!0},{id:"B",texto:"Opcin B (generada automticamente)",esCorrecta:!1},{id:"C",texto:"Opcin C (generada automticamente)",esCorrecta:!1},{id:"D",texto:"Opcin D (generada automticamente)",esCorrecta:!1}]);const d=u.map((g,x)=>{if(!g)return console.warn(`Alternativa ${x} es nula o indefinida, creando alternativa por defecto`),{id:String.fromCharCode(65+x),texto:`Alternativa ${String.fromCharCode(65+x)} (generada por defecto)`,esCorrecta:!1};if(typeof g=="string")return{id:String.fromCharCode(65+x),texto:g,esCorrecta:l.respuesta===String.fromCharCode(65+x)||l.correcta===String.fromCharCode(65+x)||l.respuesta===x||l.respuesta===(x+1).toString()};const v=(g==null?void 0:g.texto)||(g==null?void 0:g.text)||(g==null?void 0:g.contenido)||(g==null?void 0:g.content)||`Alternativa ${String.fromCharCode(65+x)}`;let y=(g==null?void 0:g.id)||String.fromCharCode(65+x);typeof y=="number"&&(y=String.fromCharCode(64+y));let N=!1;((g==null?void 0:g.esCorrecta)===!0||(g==null?void 0:g.isCorrect)===!0||(g==null?void 0:g.correct)===!0)&&(N=!0);const C=l.respuesta||l.correcta||l.respuestaCorrecta||l.correct;return C&&(C===y||C===x||C===x+1||C===(x+1).toString())&&(N=!0),{id:y,texto:v,esCorrecta:N,explicacion:(g==null?void 0:g.explicacion)||(g==null?void 0:g.explanation)||""}}).filter(g=>g&&g.texto);for(d.length===0&&(console.warn("No hay alternativas vlidas despus de filtrar, creando por defecto"),d.push({id:"A",texto:"Alternativa A (por defecto)",esCorrecta:!0},{id:"B",texto:"Alternativa B (por defecto)",esCorrecta:!1},{id:"C",texto:"Alternativa C (por defecto)",esCorrecta:!1},{id:"D",texto:"Alternativa D (por defecto)",esCorrecta:!1}));d.length<4;){const g=String.fromCharCode(65+d.length);console.log(`Agregando alternativa ${g} faltante`),d.push({id:g,texto:`Alternativa ${g} (agregada automticamente)`,esCorrecta:!1})}d.length>4&&(console.log(`Demasiadas alternativas (${d.length}), conservando solo 4`),d.splice(4)),d.some(g=>g.esCorrecta)||(console.log("No se encontr alternativa marcada como correcta, marcando la primera"),d[0].esCorrecta=!0);const f=d.find(g=>g.esCorrecta),A=(f==null?void 0:f.explicacion)||l.explicacion||l.explanation||"";return A&&f&&!f.explicacion&&(f.explicacion=A),f&&!f.explicacion&&(f.explicacion=`La respuesta correcta es la alternativa ${f.id}`),{id:l.id||`p${c+1}`,enunciado:l.enunciado||l.pregunta||l.texto||`Pregunta ${c+1}`,alternativas:d,estandarAprendizaje:l.estandarAprendizaje||l.estandar||l.standard||"",habilidad:l.habilidad||l.eje||l.skill||l.axis||"",textoBase:c===0?s:void 0,createdAt:Xn(),dificultad:l.dificultad||l.difficulty||"media"}}catch(u){return console.error(`Error procesando pregunta ${c+1}:`,u),bZ(c+1)}});if(console.log(`Procesamiento completado: ${o.length} preguntas procesadas`),o.length<t){const l=t-o.length;console.warn(`Rellenando ${l} pregunta(s) para alcanzar la cantidad solicitada (${t})`);for(let c=0;c<l;c++)o.push(bZ(o.length+1))}return o}catch(n){return console.error("Error general en procesarRespuestaIA:",n),Ww(t,"Ocurri un error al procesar la respuesta de la IA. Por favor, intente nuevamente.")}}function bZ(e){return{id:`p${e}`,enunciado:`Pregunta ${e} (no se pudo generar correctamente)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generacin con el modelo Pro."},{id:"B",texto:"Modificar parmetros",esCorrecta:!1},{id:"C",texto:"Reducir complejidad",esCorrecta:!1},{id:"D",texto:"Contactar soporte",esCorrecta:!1}],habilidad:"No disponible",estandarAprendizaje:"No disponible",createdAt:Xn(),dificultad:"media"}}function Ww(e,t){const r=[];for(let n=0;n<e;n++)r.push({id:`p${n+1}`,enunciado:n===0?t:`Pregunta ${n+1} (no disponible)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generacin."},{id:"B",texto:"Modificar parmetros de generacin",esCorrecta:!1},{id:"C",texto:"Usar menos cantidad de preguntas",esCorrecta:!1},{id:"D",texto:"Revisar el contexto proporcionado",esCorrecta:!1}],habilidad:"Diagnstico",estandarAprendizaje:"Error en generacin",createdAt:Xn(),dificultad:"media"});return r}async function Cot(e){try{const t=V0(),r=Nl(t,"generarPreguntasSimce");console.log("Llamando a Cloud Function para generar preguntas SIMCE...");const n=await r({options:e}),{preguntas:a,textoBase:s}=n.data;if(!a||!Array.isArray(a)||a.length===0)throw new Error("La respuesta no contiene preguntas vlidas");return console.log(`Se generaron ${a.length} preguntas correctamente mediante Cloud Function`),s&&a.length>0&&(a[0].textoBase=s),a}catch(t){throw console.error("Error al generar preguntas SIMCE mediante Cloud Function:",t),t}}const SE=({content:e,context:t="unknown"})=>{if(typeof e=="string")return/<[a-z][\s\S]*>/i.test(e)?i.jsx("span",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e}}):i.jsx("span",{className:"whitespace-pre-wrap",children:e});if(At.isValidElement(e))return e;try{return i.jsx("span",{children:JSON.stringify(e)})}catch{return i.jsx("span",{children:"[Sin contenido disponible]"})}},gu=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},Eot=e=>{for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null},jot=(e,t)=>t.trim()?e.map((r,n)=>n===0?{...r,textoBase:t.trim()}:r):e,kot=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(!0),[s,o]=w.useState("lista"),[l,c]=w.useState(null),[u,d]=w.useState(""),[f,A]=w.useState("todas"),[m,g]=w.useState(!1),[x,v]=w.useState({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),[y,N]=w.useState(!1),[C,_]=w.useState(null),[j,I]=w.useState([]),[T,k]=w.useState([]),[B,M]=w.useState(""),[P,S]=w.useState(!1),[L,U]=w.useState(null),[q,H]=w.useState(null),[z,W]=w.useState([]);w.useEffect(()=>{(async()=>{try{a(!0);const ye=await X9(e.id||"");r(ye);const Ae=await pv();W(Ae);const se=new Set;e.cursos&&e.cursos.length>0?e.cursos.forEach(de=>se.add(gu(de))):Sa.forEach(de=>se.add(gu(de))),Ae.filter(de=>de.profile==="ESTUDIANTE"&&de.curso).forEach(de=>{de.curso&&(de.curso=gu(de.curso),se.add(de.curso))});const ne=Array.from(se).sort().map(de=>({id:de,nombre:Z(de)}));I(ne)}catch(ye){console.error("Error al cargar datos iniciales:",ye),_("No se pudieron cargar los datos necesarios")}finally{a(!1)}})()},[e]);const Z=fe=>{const ye=fe.match(/^(\d+)?([A-E])$/i);if(ye){const Ae=ye[1],se=ye[2].toUpperCase();return`${Ae} Medio ${se}`}return fe};w.useEffect(()=>{k(B?j.filter(fe=>fe.nombre.toLowerCase().includes(B.toLowerCase())):[])},[B,j]);const V=()=>t.filter(fe=>{const ye=fe.titulo.toLowerCase().includes(u.toLowerCase()),Ae=f==="todas"||fe.asignatura===f;return ye&&Ae}),Y=()=>{g(!0),c(null),v({titulo:"",descripcion:"",asignatura:"Competencia Lectora",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),U(null),H(null),ce(fe=>({...fe,textoProporcionado:""})),o("detalle")},R=fe=>{g(!0),c(fe),v({...fe}),o("detalle")},O=async fe=>{if(window.confirm(`Ests seguro de eliminar el set "${fe.titulo}"? Esta accin no se puede deshacer.`))try{await GAe(fe.id),r(ye=>ye.filter(Ae=>Ae.id!==fe.id))}catch(ye){console.error("Error al eliminar set:",ye),_("No se pudo eliminar el set de preguntas")}},K=async()=>{try{if(!x.titulo){_("El ttulo de la evaluacin es obligatorio");return}if(!x.preguntas||x.preguntas.length===0){_("Debes agregar al menos una pregunta");return}const fe=(x.cursosAsignados||[]).map(gu),ye=fe.length>0;a(!0);let Ae=[];ye&&(Ae=z.filter(He=>He.profile==="ESTUDIANTE"&&He.curso&&fe.includes(gu(He.curso))).map(He=>He.id));const se=new Date().toISOString(),ne=e.id||"",de=e.nombreCompleto||e.displayName||e.email||"Docente",me={...x,cursosAsignados:fe,estudiantesAsignados:Ae,creadorId:l&&l.creadorId||ne,creadorNombre:l&&l.creadorNombre||de,fechaCreacion:l&&l.fechaCreacion||se},ge=(me.preguntas||[]).map(He=>{var Ie;const Tt=((Ie=He.alternativas.find(ft=>ft.esCorrecta))==null?void 0:Ie.id)||He.respuestaCorrecta;return{...He,respuestaCorrecta:Tt}});me.preguntas=ge;let Te="";const{collection:Ve,addDoc:Xe,updateDoc:Ke,doc:Qe}=await gi(async()=>{const{collection:He,addDoc:Tt,updateDoc:Ie,doc:ft}=await Promise.resolve().then(()=>O1);return{collection:He,addDoc:Tt,updateDoc:Ie,doc:ft}},void 0),{db:Je}=await gi(async()=>{const{db:He}=await Promise.resolve().then(()=>YM);return{db:He}},void 0),mt="simce_evaluaciones";console.log("[DEBUG] Guardando evaluacin:",me);try{if(l&&l.id){const He=Qe(Je,mt,l.id),{getDoc:Tt,deleteDoc:Ie}=await gi(async()=>{const{getDoc:vt,deleteDoc:et}=await Promise.resolve().then(()=>O1);return{getDoc:vt,deleteDoc:et}},void 0),ft=await Tt(He);if(console.log("[DEBUG] Documento a editar existe en simce_evaluaciones:",ft.exists()),ft.exists())await Ke(He,me),Te=l.id,console.log("[DEBUG] Evaluacin actualizada en simce_evaluaciones:",Te);else{Te=(await Xe(Ve(Je,mt),me)).id,console.log("[DEBUG] Evaluacin migrada a simce_evaluaciones:",Te);const et=Qe(Je,"simce_sets",l.id),Ct=await Tt(et);console.log("[DEBUG] Documento antiguo existe en simce_sets:",Ct.exists()),Ct.exists()&&(await Ie(et),console.log("[DEBUG] Documento antiguo eliminado de simce_sets:",l.id))}}else Te=(await Xe(Ve(Je,mt),me)).id,console.log("[DEBUG] Evaluacin nueva creada en simce_evaluaciones:",Te)}catch(He){throw console.error("[ERROR] Guardando evaluacin:",He),He}const We={id:Te,...me};r(He=>{const Tt=He.findIndex(Ie=>Ie.id===Te);if(Tt>=0){const Ie=[...He];return Ie[Tt]=We,Ie}return[We,...He]}),re({tipo:"success",mensaje:ye?`Evaluacin guardada y asignada a ${fe.length} curso${fe.length!==1?"s":""} correctamente`:"Evaluacin guardada correctamente"}),setTimeout(()=>{re({tipo:"",mensaje:""})},3e3),g(!1),o("lista"),_(null)}catch(fe){console.error("Error al guardar evaluacin:",fe),_("No se pudo guardar la evaluacin"),re({tipo:"error",mensaje:"Ocurri un error al guardar la evaluacin"}),setTimeout(()=>{re({tipo:"",mensaje:""})},3e3)}finally{a(!1)}},[J,ce]=w.useState({cantidadPreguntas:"4",dificultad:"media",textoProporcionado:"",habilidadesLectura:{"Localizar informacin":!0,"Relacionar informacin":!0,Interpretar:!0,"Reflexionar y evaluar":!0},ejesMatematica:{Nmeros:!0,lgebra:!0,"Probabilidad y estadstica":!0,Geometra:!0}}),[oe,re]=w.useState({tipo:"",mensaje:""}),ue=async()=>{var fe,ye,Ae,se,ne;try{if(!x.asignatura){_("Seleccione una asignatura para generar preguntas");return}N(!0),_(null),re({tipo:"",mensaje:""});let de,me;x.asignatura==="Competencia Lectora"?(de=Object.entries(J.habilidadesLectura).filter(([Ke,Qe])=>Qe).map(([Ke])=>Ke),de.length===0&&(de=["Localizar informacin","Relacionar informacin","Interpretar","Reflexionar y evaluar"])):x.asignatura==="Pensamiento Lgico"&&(me=Object.entries(J.ejesMatematica).filter(([Ke,Qe])=>Qe).map(([Ke])=>Ke),me.length===0&&(me=["Nmeros","lgebra","Probabilidad y estadstica","Geometra"])),re({tipo:"warning",mensaje:`Generando ${J.cantidadPreguntas} preguntas de ${x.asignatura}. Este proceso puede tardar unos segundos...`});const Te={asignatura:(()=>{const Ke=(x.asignatura||"").toLowerCase();if(Ke.includes("lectora")||Ke.includes("lectura"))return"Lectura";if(Ke.includes("lg")||Ke.includes("log")||Ke.includes("matem"))return"Matemtica";const Qe=x.asignatura||"Lectura";return Qe==="Lectura"||Qe==="Matemtica"?Qe:"Lectura"})(),cantidad:parseInt(J.cantidadPreguntas),opcionesPorPregunta:4,habilidadesLectura:de,ejesMatematica:me,dificultad:J.dificultad,contextoCurricular:x.descripcion,textoProporcionado:((fe=J.textoProporcionado)==null?void 0:fe.trim())||void 0};let Ve,Xe=[];try{if(console.log("Intentando generar preguntas usando Cloud Function..."),Xe.push("Cloud Function"),Ve=await Cot(Te),!Array.isArray(Ve)||Ve.length===0)throw new Error("La respuesta de Cloud Function no es vlida");Ve.forEach((Ke,Qe)=>{if(!Ke.enunciado||!Array.isArray(Ke.alternativas)||Ke.alternativas.length!==4)throw new Error(`Pregunta ${Qe+1} tiene estructura invlida`)})}catch(Ke){console.error("Error con Cloud Function:",Ke);try{if(console.log("Usando generacin local como respaldo..."),Xe.push("Local"),re({tipo:"warning",mensaje:"Usando generacin local como respaldo. Procesando..."}),Ve=await bot(Te),!Array.isArray(Ve)||Ve.length===0)throw new Error("La generacin local no produjo resultados vlidos");Ve.forEach((Qe,Je)=>{if(!Qe.enunciado||!Array.isArray(Qe.alternativas)||Qe.alternativas.length!==4)throw new Error(`Pregunta ${Je+1} generada localmente tiene estructura invlida`)})}catch(Qe){console.error("Error con generacin local:",Qe);const Je=[];throw(ye=Ke.message)!=null&&ye.includes("JSON")&&Je.push("Problema de formato en servidor remoto"),(Ae=Qe.message)!=null&&Ae.includes("JSON")&&Je.push("Problema de formato en generacin local"),new Error(`No se pudieron generar preguntas con ningn mtodo (intentos: ${Xe.join(", ")}). Errores: ${Je.join(", ")||"Problemas de conexin o formato"}. Por favor, intente nuevamente o genere preguntas manualmente.`)}}if(!Ve||Ve.length===0)throw new Error("No se generaron preguntas vlidas despus de todos los intentos");if(x.asignatura==="Competencia Lectora"){let Ke=(se=J.textoProporcionado)==null?void 0:se.trim();Ke||(Ke=(ne=Ve[0].textoBase)==null?void 0:ne.trim()),Ke||(Ke="Texto de comprensin generado automticamente."),Ve[0].textoBase=Ke,console.log("[DEBUG] Texto base final asignado a la primera pregunta:",Ke.substring(0,50)+"...")}v(Ke=>({...Ke,preguntas:[...Ke.preguntas||[],...Ve]})),re({tipo:"success",mensaje:`Se generaron ${Ve.length} preguntas correctamente usando ${Xe[Xe.length-1]}!`}),setTimeout(()=>{re({tipo:"",mensaje:""})},5e3)}catch(de){console.error("Error general al generar preguntas:",de);let me="No se pudieron generar las preguntas.";de instanceof Error&&(de.message.includes("JSON")?me="Hubo un problema con el formato de las respuestas del servidor. Esto puede deberse a sobrecarga del sistema de IA. Intente nuevamente en unos minutos.":de.message.includes("red")||de.message.includes("network")?me="Problema de conexin. Verifique su conexin a internet e intente nuevamente.":de.message.length>10&&(me=de.message)),_(me),re({tipo:"error",mensaje:me+" Puede agregar preguntas manualmente como alternativa."}),setTimeout(()=>{re({tipo:"",mensaje:""})},8e3)}finally{N(!1)}},le=fe=>{H({...fe})},ve=()=>{var se,ne;if(!q)return;if(!q.enunciado){_("El enunciado de la pregunta es obligatorio");return}if(!q.alternativas.find(de=>de.esCorrecta)){_("Debe marcar una alternativa como correcta");return}if(q.alternativas.filter(de=>!de.texto).length>0){_("Todas las alternativas deben tener texto");return}const Ae=q.textoBase&&x.asignatura==="Competencia Lectora";if(q.id.startsWith("p"))if(Ae){console.log("Nueva pregunta con texto base detectado:",q.textoBase);const de=[...x.preguntas||[]];v(me=>({...me,preguntas:[q,...de]}))}else v(de=>({...de,preguntas:[...de.preguntas||[],q]}));else if(Ae){console.log("Actualizando pregunta con texto base:",q.textoBase);const de=((se=x.preguntas)==null?void 0:se.map(me=>me.id===q.id?q:me))||[];if(q===((ne=x.preguntas)==null?void 0:ne[0])){const me=q.textoBase||"",ge=jot(de,me);v(Te=>({...Te,preguntas:ge}))}else v(me=>({...me,preguntas:de}))}else v(de=>{var me;return{...de,preguntas:((me=de.preguntas)==null?void 0:me.map(ge=>ge.id===q.id?q:ge))||[]}});H(null),_(null)},X=fe=>{v(ye=>{var Ae;return{...ye,preguntas:((Ae=ye.preguntas)==null?void 0:Ae.filter(se=>se.id!==fe))||[]}})},Ee=fe=>{const ye=gu(fe);v(Ae=>{const se=(Ae.cursosAsignados||[]).map(gu);return se.includes(ye)?{...Ae,cursosAsignados:se.filter(ne=>ne!==ye)}:{...Ae,cursosAsignados:[...se,ye]}})},Be=()=>{const fe=V();return n?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(zh,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Cy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Buscar evaluaciones...",className:"pl-9 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:u,onChange:ye=>d(ye.target.value)})]}),i.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:ye=>A(ye.target.value),children:[i.jsx("option",{value:"todas",children:"Todas las asignaturas"}),i.jsx("option",{value:"Competencia Lectora",children:"Competencia Lectora"}),i.jsx("option",{value:"Pensamiento Lgico",children:"Pensamiento Lgico"})]})]}),i.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md",children:[i.jsx(xi,{className:"w-4 h-4"}),"Nueva evaluacin"]})]}),i.jsx("div",{className:"space-y-4",children:fe.length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(p3,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u||f!=="todas"?"No se encontraron evaluaciones con los filtros seleccionados":"No hay evaluaciones creadas an. Crea tu primera evaluacin SIMCE."}),(u||f!=="todas")&&i.jsx("button",{onClick:()=>{d(""),A("todas")},className:"mt-4 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 hover:dark:text-indigo-300 text-sm font-medium",children:"Limpiar filtros"})]}):fe.map(ye=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-3 ${ye.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:ye.asignatura==="Competencia Lectora"?i.jsx(ys,{className:"w-5 h-5"}):i.jsx(GM,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-800 dark:text-slate-200",children:ye.titulo}),ye.descripcion&&i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:ye.descripcion}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:[ye.preguntas.length," preguntas"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:ye.asignatura}),ye.cursosAsignados&&ye.cursosAsignados.length>0&&i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs flex items-center gap-1",children:[i.jsx(Ys,{className:"w-3 h-3"}),ye.cursosAsignados.length," ",ye.cursosAsignados.length===1?"curso":"cursos"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:ye.fechaCreacion?new Date(ye.fechaCreacion).toLocaleDateString():"-"})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>c(ye),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Ver detalles",children:i.jsx(fp,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>R(ye),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar evaluacin",children:i.jsx(X0,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>O(ye),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded-full hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar evaluacin",children:i.jsx(Qn,{className:"w-4 h-4"})})]})]}),(l==null?void 0:l.id)===ye.id&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 p-4",children:[ye.asignatura==="Competencia Lectora"&&(()=>{const Ae=Eot(ye.preguntas);return Ae?i.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(ys,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:" Texto de Comprensin Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx(SE,{content:Ae,context:"simce-texto-base"})})]}):null})(),i.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[i.jsx("span",{className:"mr-2",children:""}),"Preguntas (",ye.preguntas.length,")"]}),i.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:ye.preguntas.map((Ae,se)=>{var ne,de;return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("p",{className:"font-medium",children:[i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2 rounded-md text-sm mr-2 font-semibold",children:se+1}),Ae.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:Ae.alternativas.map(me=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${me.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[me.id,")"]}),i.jsx("span",{className:"flex-1",children:me.texto}),me.esCorrecta&&i.jsx(va,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"})]},me.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:" Estndar:"})," ",Ae.estandarAprendizaje]}),Ae.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:" Habilidad:"})," ",Ae.habilidad]}),((ne=Ae.alternativas.find(me=>me.esCorrecta))==null?void 0:ne.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:" Explicacin:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(de=Ae.alternativas.find(me=>me.esCorrecta))==null?void 0:de.explicacion})]})]})]},Ae.id)})}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:()=>c(null),className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 px-3 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:" Cerrar vista detallada"})})]})]},ye.id))})]})},je=()=>{var fe,ye,Ae,se;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:l?"Editar evaluacin":"Nueva evaluacin"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{g(!1),o("lista"),_(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:K,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",disabled:n,children:[i.jsx(Ml,{className:"w-4 h-4"}),(x.cursosAsignados||[]).length>0?"Guardar y asignar":"Guardar evaluacin"]})]})]}),C&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-3 rounded-md flex items-center gap-2",children:[i.jsx(L1,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:C})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la evaluacin *"}),i.jsx("input",{type:"text",value:x.titulo,onChange:ne=>v({...x,titulo:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Evaluacin SIMCE 4 Bsico - Competencia Lectora"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Asignatura"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>v({...x,asignatura:"Competencia Lectora"}),className:`flex-1 px-3 py-2 rounded-md border text-sm transition-colors ${x.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/40 dark:text-blue-300 dark:border-blue-700":"bg-slate-100 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600"}`,children:"Competencia Lectora"}),i.jsx("button",{type:"button",onClick:()=>v({...x,asignatura:"Pensamiento Lgico"}),className:`flex-1 px-3 py-2 rounded-md border text-sm transition-colors ${x.asignatura==="Pensamiento Lgico"?"bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900/40 dark:text-purple-300 dark:border-purple-700":"bg-slate-100 text-slate-700 border-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:border-slate-600"}`,children:"Pensamiento Lgico"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin (opcional)"}),i.jsx("textarea",{value:x.descripcion,onChange:ne=>v({...x,descripcion:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Breve descripcin de la evaluacin",rows:3})]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsxs("label",{className:"flex items-center mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[i.jsx(Ys,{className:"w-4 h-4 mr-1.5"}),"Asignar a cursos",(x.cursosAsignados||[]).length>0&&i.jsxs("span",{className:"ml-2 text-xs bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 py-0.5 px-1.5 rounded-full",children:[(x.cursosAsignados||[]).length," seleccionado",(x.cursosAsignados||[]).length!==1?"s":""]})]}),i.jsx("p",{className:"mb-2 text-xs text-slate-500 dark:text-slate-400",children:"Seleccione los cursos a los que estar asignada esta evaluacin. Estar disponible para los estudiantes en cuanto guarde."}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:B,onChange:ne=>{M(ne.target.value),S(!0)},onFocus:()=>S(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Buscar curso..."}),P&&(T.length>0||B)&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-md max-h-60 overflow-y-auto",children:T.length===0&&B?i.jsx("div",{className:"p-3 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron cursos"}):T.map(ne=>i.jsxs("div",{className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center",onClick:()=>{Ee(ne.id),M("")},children:[i.jsx("div",{className:`w-4 h-4 border rounded mr-2 flex items-center justify-center ${(x.cursosAsignados||[]).includes(ne.id)?"bg-indigo-600 border-indigo-600":"border-slate-400 dark:border-slate-500"}`,children:(x.cursosAsignados||[]).includes(ne.id)&&i.jsx(hoe,{className:"w-3 h-3 text-white"})}),i.jsx("span",{children:ne.nombre})]},ne.id))})]}),(x.cursosAsignados||[]).length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(x.cursosAsignados||[]).map(ne=>{const de=j.find(me=>me.id===ne);return i.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-md text-sm",children:[i.jsx("span",{children:(de==null?void 0:de.nombre)||ne}),i.jsx("button",{onClick:()=>Ee(ne),className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 hover:dark:text-slate-200",children:i.jsx(No,{className:"w-3 h-3"})})]},ne)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Estudiantes asignados"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md p-3 max-h-40 overflow-y-auto text-sm",children:(()=>{const ne=z.filter(de=>{if(de.profile!=="ESTUDIANTE"||!de.curso)return!1;const me=gu(de.curso);return(x.cursosAsignados||[]).includes(me)});return ne.length===0?i.jsx("span",{className:"text-slate-500",children:"No hay estudiantes asignados a los cursos seleccionados."}):i.jsx("ul",{className:"list-disc pl-4",children:ne.map(de=>i.jsxs("li",{className:"mb-1",children:[de.nombreCompleto||de.nombre||de.id," ",i.jsxs("span",{className:"text-xs text-slate-400",children:["(",Z(gu(de.curso)),")"]})]},de.id))})})()})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Configuracin de presentacin"})}),i.jsx("div",{className:"flex space-x-6",children:i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.barajarAlternativas,onChange:ne=>v({...x,barajarAlternativas:ne.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Barajar alternativas"})]})})]})]}),i.jsxs("div",{className:"mb-5 bg-slate-50 dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-md font-semibold mb-3",children:"Opciones de generacin con IA"}),oe.mensaje&&i.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center gap-2 ${oe.tipo==="error"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300":oe.tipo==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-300":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300"}`,children:[oe.tipo==="error"&&i.jsx(L1,{className:"w-5 h-5 flex-shrink-0"}),oe.tipo==="warning"&&i.jsx(zh,{className:"w-5 h-5 flex-shrink-0 animate-spin"}),oe.tipo==="success"&&i.jsx(va,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:oe.mensaje})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto base (opcional)"}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:"Si proporciona un texto, las preguntas se generarn basadas en l. Si lo deja vaco, la IA generar automticamente un texto adecuado."}),i.jsx("textarea",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500 resize-y",value:J.textoProporcionado||"",onChange:ne=>ce({...J,textoProporcionado:ne.target.value}),placeholder:x.asignatura==="Competencia Lectora"?"Ingrese aqu un texto para generar preguntas de comprensin lectora...":"Ingrese aqu un texto para crear problemas de pensamiento lgico relacionados...",rows:6})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cantidad de preguntas"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:J.cantidadPreguntas,onChange:ne=>ce({...J,cantidadPreguntas:ne.target.value}),children:[i.jsx("option",{value:"2",children:"2 preguntas"}),i.jsx("option",{value:"4",children:"4 preguntas"}),i.jsx("option",{value:"6",children:"6 preguntas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dificultad"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:J.dificultad,onChange:ne=>ce({...J,dificultad:ne.target.value}),children:[i.jsx("option",{value:"baja",children:"Baja"}),i.jsx("option",{value:"media",children:"Media"}),i.jsx("option",{value:"alta",children:"Alta"})]})]})]}),x.asignatura==="Competencia Lectora"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades de Competencia Lectora"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(J.habilidadesLectura).map(([ne,de])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:de,onChange:()=>{ce({...J,habilidadesLectura:{...J.habilidadesLectura,[ne]:!de}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:ne})]},ne))})]}),x.asignatura==="Pensamiento Lgico"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ejes de Pensamiento Lgico"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(J.ejesMatematica).map(([ne,de])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:de,onChange:()=>{ce({...J,ejesMatematica:{...J.ejesMatematica,[ne]:!de}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:ne})]},ne))})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:ue,disabled:y,className:`px-4 py-2 text-white rounded-md text-sm flex items-center gap-2 ${y?"bg-amber-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:y?i.jsxs(i.Fragment,{children:[i.jsx(zh,{className:"w-4 h-4 animate-spin"}),"Generando preguntas..."]}):i.jsxs(i.Fragment,{children:[i.jsx(xi,{className:"w-4 h-4"}),"Generar preguntas automticamente"]})})}),q?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[x.asignatura==="Competencia Lectora"&&((fe=x.preguntas[0])==null?void 0:fe.id)===q.id&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Texto base para preguntas de comprensin"}),i.jsx("textarea",{value:q.textoBase||"",onChange:ne=>H({...q,textoBase:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Texto de lectura para las preguntas...",rows:5})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Enunciado de la pregunta *"}),i.jsx("textarea",{value:q.enunciado,onChange:ne=>H({...q,enunciado:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Escribe el enunciado de la pregunta...",rows:3})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Estndar de aprendizaje *"}),i.jsx("select",{value:q.estandarAprendizaje,onChange:ne=>H({...q,estandarAprendizaje:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:x.asignatura==="Competencia Lectora"?fot.map((ne,de)=>i.jsx("option",{value:ne,children:ne},de)):hot.map((ne,de)=>i.jsx("option",{value:ne,children:ne},de))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Habilidad (opcional)"}),i.jsx("input",{value:q.habilidad||"",onChange:ne=>H({...q,habilidad:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Interpretar, Analizar, Resolver problemas..."})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Alternativas * (marca una como correcta)"}),i.jsx("div",{className:"space-y-3",children:q.alternativas.map((ne,de)=>i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"flex items-center mt-1 mr-2",children:[i.jsx("input",{type:"radio",checked:ne.esCorrecta,onChange:()=>{H({...q,alternativas:q.alternativas.map(me=>({...me,esCorrecta:me.id===ne.id}))})},className:"rounded-full border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsxs("span",{className:"ml-1 font-semibold",children:[ne.id,")"]})]}),i.jsx("div",{className:"flex-1",children:i.jsx("textarea",{value:ne.texto,onChange:me=>{H({...q,alternativas:q.alternativas.map(ge=>ge.id===ne.id?{...ge,texto:me.target.value}:ge)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:`Texto de la alternativa ${ne.id}...`,rows:2})})]},ne.id))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Explicacin para alternativa correcta (recomendado)"}),i.jsx("textarea",{value:((ye=q.alternativas.find(ne=>ne.esCorrecta))==null?void 0:ye.explicacion)||"",onChange:ne=>{H({...q,alternativas:q.alternativas.map(de=>de.esCorrecta?{...de,explicacion:ne.target.value}:de)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Explica por qu esta es la respuesta correcta...",rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{H(null),_(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:ve,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",children:[i.jsx(Ml,{className:"w-4 h-4"}),"Guardar pregunta"]})]})]}):i.jsx("div",{className:"space-y-4",children:(x.preguntas||[]).length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(Aoe,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay preguntas agregadas an. Puedes generar preguntas automticamente o agregarlas manualmente."})]}):i.jsxs(i.Fragment,{children:[x.asignatura==="Competencia Lectora"&&((se=(Ae=x.preguntas)==null?void 0:Ae[0])==null?void 0:se.textoBase)&&i.jsxs("div",{className:"p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(ys,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:"Texto Base de Comprensin Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Este texto acompaar a todas las preguntas de lectura"})]})]}),i.jsx("button",{onClick:()=>{var de;const ne=(de=x.preguntas)==null?void 0:de[0];ne&&le(ne)},className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:dark:text-blue-200 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800/50",title:"Editar texto base",children:i.jsx(X0,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800 shadow-inner",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-base",children:x.preguntas[0].textoBase})})})]}),(x.preguntas||[]).map((ne,de)=>{var me,ge;return i.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"font-medium",children:[i.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-1 px-2.5 rounded-md mr-2 text-sm font-semibold",children:["Pregunta ",de+1]}),ne.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-2",children:ne.alternativas.map(Te=>i.jsxs("div",{className:`flex items-start p-2 rounded-md transition-colors ${Te.esCorrecta?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 font-medium border border-green-200 dark:border-green-800":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("span",{className:"font-semibold mr-2 min-w-[20px]",children:[Te.id,")"]}),i.jsx("span",{className:"flex-1",children:Te.texto}),Te.esCorrecta&&i.jsx(va,{className:"ml-2 w-4 h-4 text-green-600 dark:text-green-400"})]},Te.id))}),i.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estndar:"})," ",ne.estandarAprendizaje]}),ne.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Habilidad:"})," ",ne.habilidad]}),((me=ne.alternativas.find(Te=>Te.esCorrecta))==null?void 0:me.explicacion)&&i.jsxs("div",{className:"mt-2 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800",children:[i.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"Explicacin:"}),i.jsx("span",{className:"text-green-700 dark:text-green-300 ml-1",children:(ge=ne.alternativas.find(Te=>Te.esCorrecta))==null?void 0:ge.explicacion})]})]})]}),i.jsxs("div",{className:"flex gap-1 ml-3",children:[i.jsx("button",{onClick:()=>le(ne),className:"p-1.5 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar pregunta",children:i.jsx(X0,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>X(ne.id),className:"p-1.5 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar pregunta",children:i.jsx(Qn,{className:"w-4 h-4"})})]})]})},ne.id)})]})})]})]})};return i.jsxs(i.Fragment,{children:[s==="lista"&&!m&&Be(),(s==="detalle"||m)&&je()]})},Sot=e=>(console.log("Google Sans Code font would be added here"),e);var yZ={};const _ot=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),wZ=["Seleccin mltiple","Verdadero o Falso","Trminos pareados","Desarrollo","Comprensin de lectura"],tme=V0(nv),Tot=Nl(tme,"generarRubricaConGemini"),Bot=Nl(tme,"generarDescriptorDimensionConGemini"),EO={"Seleccin mltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Trminos pareados":[5,10,15],Desarrollo:[5,10,15],"Comprensin de lectura":[5,10,15]},Iot=({item:e,showAnswers:t=!1,shuffledDefinitions:r=[]})=>{var o;const n=e.puntaje??1,a=l=>{const c=Array.isArray(l)?l.slice(0,4):[];for(;c.length<4;)c.push("");return c},s=l=>l.length<=1?l:[...l.slice(1),l[0]];return i.jsxs("div",{className:"p-3 border rounded-lg bg-white dark:bg-slate-800 dark:border-slate-700",children:[i.jsxs("div",{className:"mb-2 flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:e.tipo}),i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:e.pregunta||(e.tipo==="Comprensin de lectura"?"Comprensin de lectura":"")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in e&&e.habilidadBloom&&i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",e.habilidadBloom]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[n," pts"]})]})]}),e.tipo==="Seleccin mltiple"&&i.jsxs("div",{className:"ml-1 mt-2 space-y-2",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-1",children:"Marca la alternativa correcta."}),a(e.opciones).map((l,c)=>{const u=t&&c===e.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/30":""}`,children:[i.jsx("div",{className:"w-5 h-5 border rounded-full flex-shrink-0"}),i.jsxs("span",{children:[String.fromCharCode(65+c),") ",l]})]},c)})]}),e.tipo==="Verdadero o Falso"&&i.jsxs("div",{className:"ml-1 mt-2 flex items-center gap-6",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400",children:"Indica si la afirmacin es verdadera (V) o falsa (F)."}),i.jsx("div",{className:"flex-1"}),i.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!0?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"V"}),i.jsx("div",{className:`px-3 py-1 rounded ${t&&e.respuestaCorrecta===!1?"bg-green-100 dark:bg-green-900/30":"bg-slate-100 dark:bg-slate-700"}`,children:"F"})]}),e.tipo==="Desarrollo"&&i.jsx("div",{className:"mt-3 border rounded-md h-24 bg-slate-50 dark:bg-slate-700/40"}),e.tipo==="Trminos pareados"&&(()=>{const l=e.pares||[],c=l.map(f=>f.concepto),u=s(l.map(f=>f.definicion)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-xs italic text-slate-500 dark:text-slate-400 mb-2",children:"Une cada concepto (columna izquierda) con su definicin (columna derecha)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Columna A: Conceptos"}),i.jsx("div",{className:"space-y-1",children:c.map((f,A)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"font-semibold w-6 text-right",children:[A+1,"."]}),i.jsx("span",{children:f})]},A))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Columna B: Definiciones"}),i.jsx("div",{className:"space-y-1",children:u.map((f,A)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"font-semibold w-6 text-right",children:[d[A]||"?","."]}),i.jsx("span",{children:f})]},A))})]})]})]})})(),e.tipo==="Comprensin de lectura"&&i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/40 rounded-md whitespace-pre-wrap",children:e.texto}),i.jsx("div",{className:"space-y-3",children:(o=e.preguntas)==null?void 0:o.map((l,c)=>{var u;return i.jsxs("div",{className:"p-3 border rounded-md bg-white dark:bg-slate-800 dark:border-slate-700",children:[i.jsxs("div",{className:"mb-1 flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:["CL-",c+1]}),i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:l.tipo}),i.jsx("div",{className:"font-medium",children:l.pregunta})]}),i.jsxs("div",{className:"flex items-center gap-2",children:["habilidadBloom"in l&&l.habilidadBloom&&i.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:["Bloom: ",l.habilidadBloom]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[l.puntaje??1," pts"]})]})]}),l.tipo==="Seleccin mltiple"?i.jsx("div",{className:"ml-1 mt-1 space-y-1",children:(u=l.opciones)==null?void 0:u.map((d,f)=>{const A=t&&f===l.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${A?"bg-green-100 dark:bg-green-900/30":""}`,children:[i.jsx("div",{className:"w-4 h-4 border rounded-full flex-shrink-0"}),i.jsxs("span",{children:[String.fromCharCode(65+f),") ",d]})]},f)})}):i.jsx("div",{className:"mt-2 border rounded-md h-16 bg-slate-50 dark:bg-slate-700/40"})]},c)})})]})]})},Dot=()=>{const e=w.useMemo(()=>wZ.reduce((V,Y)=>(V[Y]=0,V),{}),[]),t=w.useMemo(()=>({nombre:"",asignatura:(xa==null?void 0:xa[0])||"",nivel:(Y0==null?void 0:Y0[0])||"",contenido:"",tiposActividad:e,dificultad:"Intermedio",isNee:!1,selectedNee:[]}),[e]),[r,n]=w.useState(t),[a,s]=w.useState(!1),[o,l]=w.useState(null),[c,u]=w.useState(null),[d,f]=w.useState([]),[A,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(!1),{currentUser:N}=jE();w.useEffect(()=>{if(N){const V=yst(f);return()=>V()}},[N]);const C=V=>{const{name:Y,value:R}=V.target;n(O=>({...O,[Y]:R}))},_=V=>{n(Y=>{var O;const R={...Y.tiposActividad};return R[V]>0?R[V]=0:R[V]=((O=EO[V])==null?void 0:O[0])||1,{...Y,tiposActividad:R}})},j=(V,Y)=>{n(R=>({...R,tiposActividad:{...R.tiposActividad,[V]:Y}}))},I=V=>{n(Y=>{const R=Y.selectedNee.includes(V)?Y.selectedNee.filter(O=>O!==V):[...Y.selectedNee,V];return{...Y,selectedNee:R}})},T=V=>{const Y=String(V||"").trim().toLowerCase();if(Y){if(Y.includes("record"))return"Recordar";if(Y.includes("comprend")||Y.includes("entend"))return"Comprender";if(Y.includes("aplic"))return"Aplicar";if(Y.includes("analiz"))return"Analizar";if(Y.includes("evalu"))return"Evaluar";if(Y.includes("crea")||Y.includes("sintet"))return"Crear"}},k=V=>{switch(V){case"Seleccin mltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Trminos pareados":return"Comprender";case"Comprensin de lectura":return"Comprender";default:return"Comprender"}},B=V=>{const R=(Array.isArray(V)?V.map(O=>typeof O=="string"?O:(O==null?void 0:O.texto)??""):[]).slice(0,4);for(;R.length<4;)R.push("");return R},M=V=>{if(typeof(V==null?void 0:V.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,V.respuestaCorrecta));if(Array.isArray(V==null?void 0:V.alternativas)){const O=V.alternativas.findIndex(K=>K&&(K.esCorrecta===!0||K.correcta===!0));if(O>=0&&O<4)return O}const Y=String((V==null?void 0:V.correcta)||(V==null?void 0:V.respuesta)||(V==null?void 0:V.respuestaCorrecta)||"").trim().toUpperCase(),R={A:0,B:1,C:2,D:3};return Y in R?R[Y]:0},P=V=>{const Y=B(V.opciones??V.alternativas),R=M(V),O=T(V.habilidadBloom)||k("Seleccin mltiple");return{id:V.id||crypto.randomUUID(),tipo:"Seleccin mltiple",pregunta:V.pregunta||V.enunciado||"Pregunta",puntaje:V.puntaje??1,opciones:Y,respuestaCorrecta:R,habilidadBloom:O}},S=V=>{let Y=!1;typeof(V==null?void 0:V.respuestaCorrecta)=="boolean"?Y=V.respuestaCorrecta:typeof(V==null?void 0:V.esVerdadero)=="boolean"?Y=V.esVerdadero:V!=null&&V.correcta&&(Y=String(V.correcta).toUpperCase().startsWith("V"));const R=T(V.habilidadBloom)||k("Verdadero o Falso");return{id:V.id||crypto.randomUUID(),tipo:"Verdadero o Falso",pregunta:V.pregunta||V.enunciado||"Afirmacin",puntaje:V.puntaje??1,respuestaCorrecta:Y,habilidadBloom:R}},L=V=>{const Y=T(V.habilidadBloom)||k("Desarrollo");return{id:V.id||crypto.randomUUID(),tipo:"Desarrollo",pregunta:V.pregunta||V.enunciado||"Pregunta abierta",puntaje:V.puntaje??1,habilidadBloom:Y}},U=V=>{let Y=Array.isArray(V==null?void 0:V.pares)?V.pares:[];if((!Y||Y.length===0)&&Array.isArray(V==null?void 0:V.conceptos)&&Array.isArray(V==null?void 0:V.definiciones)){const O=Math.min(V.conceptos.length,V.definiciones.length);Y=Array.from({length:O},(K,J)=>({concepto:V.conceptos[J],definicion:V.definiciones[J]}))}Y=(Y||[]).map(O=>({concepto:(O==null?void 0:O.concepto)??"",definicion:(O==null?void 0:O.definicion)??""}));const R=T(V.habilidadBloom)||k("Trminos pareados");return{id:V.id||crypto.randomUUID(),tipo:"Trminos pareados",pregunta:V.pregunta||V.enunciado||"Relaciona los trminos",puntaje:V.puntaje??1,pares:Y,habilidadBloom:R}},q=V=>{const Y=typeof(V==null?void 0:V.texto)=="string"?V.texto:Array.isArray(V==null?void 0:V.texto)?V.texto.join(`
`):(V==null?void 0:V.lectura)||"",O=(Array.isArray(V==null?void 0:V.preguntas)?V.preguntas:[]).map(J=>{const ce=T(J==null?void 0:J.habilidadBloom),oe=((J==null?void 0:J.tipo)||"").toLowerCase();if(oe.includes("multiple")||oe.includes("seleccion")){const re=P(J);return re.habilidadBloom||(re.habilidadBloom=ce||k("Seleccin mltiple")),re}if(oe.includes("desarrollo")||oe.includes("abierta")){const re=L(J);return re.habilidadBloom||(re.habilidadBloom=ce||k("Desarrollo")),re}if(J!=null&&J.alternativas||J!=null&&J.opciones){const re=P(J);return re.habilidadBloom||(re.habilidadBloom=ce||k("Seleccin mltiple")),re}return null}).filter(Boolean),K=T(V.habilidadBloom)||k("Comprensin de lectura");return{id:V.id||crypto.randomUUID(),tipo:"Comprensin de lectura",pregunta:V.pregunta||V.enunciado||"Comprensin de lectura",puntaje:V.puntaje??Math.max(1,O.reduce((J,ce)=>J+(ce.puntaje??1),0)),texto:Y,preguntas:O,habilidadBloom:K}},H=async V=>{var R;if(V.preventDefault(),!N||!N.uid||!N.email||!N.id){l("Debes iniciar sesin para generar una evaluacin.");return}const Y=Object.values(r.tiposActividad||{}).reduce((O,K)=>O+(Number(K)||0),0);if(!r.nombre.trim()||!r.contenido.trim()||Y===0){l("Nombre, Contenido y al menos un tipo con cantidad (> 0) son obligatorios.");return}s(!0),l(null);try{W9("Evaluacin - Pruebas",N);const K={objetivo:"",cantidadesPorTipo:Object.entries(r.tiposActividad).reduce((Qe,[Je,mt])=>{const We=Number(mt)||0;return We>0&&(Qe[Je]=We),Qe},{}),metadata:{nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenido:r.contenido,dificultad:r.dificultad,nee:r.isNee?r.selectedNee:[]},contextoAdicional:"Directrices: vocabulario y contexto adecuados al nivel educativo en Chile. Si hay NEE, usar lenguaje claro, reducir complejidad, textos ms cortos y distractores no ambiguos."},ce=`${yZ.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,oe=await((R=ua.currentUser)==null?void 0:R.getIdToken());if(!oe)throw new Error("No se pudo obtener token de autenticacin.");const re=await fetch(ce,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${oe}`},body:JSON.stringify(K)});if(!re.ok){const Qe=await re.text();throw new Error(`Error en funcin: ${re.status} ${Qe}`)}const ue=await re.json(),le=ue.prueba||ue.data&&ue.data.prueba,ve=Qe=>Qe.normalize("NFD").replace(/[\u0300-\u036f]/g,""),X=Qe=>ve((Qe||"").toLowerCase()),Ee=Qe=>{const Je=X(String(Qe||""));return Je?Je.includes("comprension")||Je.includes("lectura")||Je.includes("reading")?"Comprensin de lectura":Je.includes("multiple")||Je.includes("seleccion")||Je.includes("mcq")?"Seleccin mltiple":Je.includes("verdadero")||Je.includes("falso")||Je==="vf"||Je.includes("true")||Je.includes("false")?"Verdadero o Falso":Je.includes("paread")||Je.includes("matching")||Je.includes("emparejar")?"Trminos pareados":Je.includes("desarrollo")||Je.includes("respuesta corta")||Je.includes("abierta")?"Desarrollo":null:null},Be=Qe=>{const mt=(Array.isArray(Qe)?Qe.map(We=>typeof We=="string"?We:(We==null?void 0:We.texto)??""):[]).slice(0,4);for(;mt.length<4;)mt.push("");return mt},je=Qe=>{if(typeof(Qe==null?void 0:Qe.respuestaCorrecta)=="number")return Math.max(0,Math.min(3,Qe.respuestaCorrecta));if(Array.isArray(Qe==null?void 0:Qe.alternativas)){const We=Qe.alternativas.findIndex(He=>He&&(He.esCorrecta===!0||He.correcta===!0));if(We>=0&&We<4)return We}const Je=String((Qe==null?void 0:Qe.correcta)||(Qe==null?void 0:Qe.respuesta)||"").trim().toUpperCase(),mt={A:0,B:1,C:2,D:3};return Je in mt?mt[Je]:0},fe=Qe=>{const Je=String(Qe||"").trim().toLowerCase();if(Je){if(Je.includes("record"))return"Recordar";if(Je.includes("comprend")||Je.includes("entend"))return"Comprender";if(Je.includes("aplic"))return"Aplicar";if(Je.includes("analiz"))return"Analizar";if(Je.includes("evalu"))return"Evaluar";if(Je.includes("crea")||Je.includes("sintet"))return"Crear"}},ye=Qe=>{switch(Qe){case"Seleccin mltiple":return"Comprender";case"Verdadero o Falso":return"Recordar";case"Desarrollo":return"Analizar";case"Trminos pareados":return"Comprender";case"Comprensin de lectura":return"Comprender";default:return"Comprender"}},Ae=P,se=S,ne=L,de=U,me=q,ge=Qe=>{switch(Ee(Qe.tipo)||(Qe!=null&&Qe.alternativas||Qe!=null&&Qe.opciones?"Seleccin mltiple":null)){case"Seleccin mltiple":return Ae(Qe);case"Verdadero o Falso":return se(Qe);case"Desarrollo":return ne(Qe);case"Trminos pareados":return de(Qe);case"Comprensin de lectura":return me(Qe);default:return Qe!=null&&Qe.alternativas||Qe!=null&&Qe.opciones?Ae(Qe):Qe!=null&&Qe.pares||Qe!=null&&Qe.conceptos&&(Qe!=null&&Qe.definiciones)?de(Qe):(Qe!=null&&Qe.texto||Qe!=null&&Qe.lectura)&&Array.isArray(Qe==null?void 0:Qe.preguntas)?me(Qe):typeof(Qe==null?void 0:Qe.respuestaCorrecta)=="boolean"||typeof(Qe==null?void 0:Qe.esVerdadero)=="boolean"||/^(v|f)$/i.test(String((Qe==null?void 0:Qe.correcta)||""))?se(Qe):ne(Qe)}},Te=(Array.isArray(le==null?void 0:le.preguntas)?le.preguntas:[]).map((Qe,Je)=>{const mt=ge(Qe);return mt?{...mt,id:mt.id||crypto.randomUUID(),pregunta:mt.pregunta||`tem ${Je+1}`,puntaje:mt.puntaje??1}:null}).filter(Boolean),Ve=le.instruccionesGenerales&&le.instruccionesGenerales.trim().length>0?le.instruccionesGenerales:"Lee atentamente y responde cada tem segn se indique. Marca solo una alternativa cuando corresponda. Justifica tus respuestas en los tems de desarrollo.",Xe=(Te||[]).reduce((Qe,Je)=>{if(Je.tipo==="Comprensin de lectura"&&Array.isArray(Je.preguntas)){const mt=Je.preguntas.reduce((We,He)=>We+(He.puntaje??1),0);return Qe+mt}return Qe+(Je.puntaje??1)},0),Ke={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:r.nombre,asignatura:r.asignatura,nivel:r.nivel,contenidoOriginal:r.contenido,tiposActividadOriginal:r.tiposActividad,objetivo:le.objetivo||"",instruccionesGenerales:Ve,puntajeIdeal:Xe,actividades:[{id:crypto.randomUUID(),titulo:r.nombre,instrucciones:Ve,items:Te}],dificultad:r.dificultad,...r.isNee&&{adaptacionNEE:r.selectedNee}};u(Ke),m(!1)}catch(O){console.error(O),l("Error al generar la prueba con IA. Revisa la consola para ms detalles.")}finally{s(!1)}},z=async()=>{if(c)try{await wst(c),alert("Prueba guardada con xito.")}catch(V){console.error(V),alert("No se pudo guardar la prueba.")}},W=async V=>{if(window.confirm("Eliminar esta prueba?"))try{await Nst(V),(c==null?void 0:c.id)===V&&u(null)}catch(Y){console.error(Y),alert("No se pudo eliminar la prueba.")}},Z=async V=>{try{x(!0);const Y=new Tr({unit:"pt",format:"letter"});try{Sot(Y),Y.setFont("GoogleSansCode","normal")}catch{}const R=40;let O=R;Y.setFontSize(12),Y.text("LICEO INDUSTRIAL DE RECOLETA",R,O),Y.text("SUBDIRECCIN DE GESTIN PEDAGGICA",Y.internal.pageSize.getWidth()-R,O,{align:"right"}),O+=24,Y.setFont(void 0,"bold"),Y.setFontSize(18),Y.text(V.nombre,Y.internal.pageSize.getWidth()/2,O,{align:"center"}),Y.setFont(void 0,"normal"),O+=18,Li(Y,{startY:O+6,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Campo","Valor"]],body:[["Fecha",new Date(V.fechaCreacion).toLocaleDateString()],["Asignatura",V.asignatura],["Nivel",V.nivel],["Puntaje Ideal",String(V.puntajeIdeal)],["Objetivo",V.objetivo],["Instrucciones Generales",V.instruccionesGenerales]]}),O=Y.lastAutoTable.finalY+16,V.actividades.forEach((ce,oe)=>{O>Y.internal.pageSize.getHeight()-120&&(Y.addPage(),O=R),Y.setFontSize(13),Y.setFont(void 0,"bold"),Y.text(`Actividad ${oe+1}: ${ce.titulo}`,R,O),O+=14,Y.setFont(void 0,"normal"),Y.setFontSize(10);const re=Y.splitTextToSize(ce.instrucciones,Y.internal.pageSize.getWidth()-R*2);Y.text(re,R,O),O+=re.length*12+6,ce.items.forEach((ue,le)=>{const ve=ue.habilidadBloom?` [Bloom: ${ue.habilidadBloom}]`:"",X=`${le+1}. ${ue.pregunta} (${ue.puntaje} pts)${ve}`,Ee=Y.splitTextToSize(X,Y.internal.pageSize.getWidth()-R*2);switch(O>Y.internal.pageSize.getHeight()-100&&(Y.addPage(),O=R),Y.setFont(void 0,"bold"),Y.text(Ee,R,O),O+=Ee.length*12+4,Y.setFont(void 0,"normal"),ue.tipo){case"Seleccin mltiple":{ue.opciones.forEach((Be,je)=>{const fe=`${String.fromCharCode(65+je)}) ${Be}`,ye=Y.splitTextToSize(fe,Y.internal.pageSize.getWidth()-R*2-16);Y.text(ye,R+16,O),O+=ye.length*12}),O+=8;break}case"Verdadero o Falso":{Y.text("V ____    F ____",R+16,O),O+=18;break}case"Desarrollo":{Y.rect(R,O-10,Y.internal.pageSize.getWidth()-R*2,60),O+=70;break}case"Trminos pareados":{const Be=ue.pares;Li(Y,{startY:O,theme:"grid",styles:{fontSize:10,cellPadding:6},head:[["Columna A: Concepto","Columna B: Definicin"]],body:Be.map((je,fe)=>[`${fe+1}. ${je.concepto}`,je.definicion])}),O=Y.lastAutoTable.finalY+8;break}case"Comprensin de lectura":{const Be=ue,je=Y.splitTextToSize(Be.texto,Y.internal.pageSize.getWidth()-R*2);Y.text(je,R,O),O+=je.length*12+8,Be.preguntas.forEach((fe,ye)=>{const Ae=fe.habilidadBloom?` [Bloom: ${fe.habilidadBloom}]`:"",se=`CL-${ye+1}. ${fe.pregunta} (${fe.puntaje} pts)${Ae}`,ne=Y.splitTextToSize(se,Y.internal.pageSize.getWidth()-R*2);O>Y.internal.pageSize.getHeight()-100&&(Y.addPage(),O=R),Y.setFont(void 0,"bold"),Y.text(ne,R+8,O),O+=ne.length*12+4,Y.setFont(void 0,"normal"),fe.tipo==="Seleccin mltiple"?(fe.opciones.forEach((de,me)=>{const ge=`${String.fromCharCode(65+me)}) ${de}`,Te=Y.splitTextToSize(ge,Y.internal.pageSize.getWidth()-R*2-24);Y.text(Te,R+24,O),O+=Te.length*12}),O+=6):(Y.rect(R+8,O-10,Y.internal.pageSize.getWidth()-R*2-16,50),O+=58)});break}}})});const K=new Date().toISOString().split("T")[0],J=`${V.nombre.replace(/\s/g,"_")}_${V.asignatura.replace(/\s/g,"_")}_${K}.pdf`;Y.save(J),x(!1),alert(`PDF generado y descargado como "${J}"`)}catch(Y){console.error(Y),x(!1),alert("No se pudo generar el PDF.")}};if(c){const V=async(Y,R)=>{var O,K;try{const J=c.actividades.findIndex(ge=>ge.id===Y);if(J<0)return;const ce=c.actividades[J],oe=ce.items.findIndex(ge=>ge.id===R);if(oe<0)return;const re=ce.items[oe],ue=ge=>ge,le=c.objetivo&&c.objetivo.trim().length>0?c.objetivo:"",ve={[ue(re.tipo)]:1},X={objetivo:le,cantidadesPorTipo:ve,metadata:{nombre:c.nombre,asignatura:c.asignatura,nivel:c.nivel,contenido:c.contenidoOriginal,dificultad:c.dificultad||"Intermedio",nee:c.adaptacionNEE||[]},contextoAdicional:`Regenerar 1 tem del tipo ${re.tipo} manteniendo nivel y asignatura indicados.`},Be=`${yZ.REACT_APP_FUNCTIONS_BASE_URL||"https://us-central1-plania-clase.cloudfunctions.net"}/generarPruebaConGeminiHttp`,je=await((O=ua.currentUser)==null?void 0:O.getIdToken());if(!je)throw new Error("No se pudo obtener token de autenticacin.");const fe=await fetch(Be,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je}`},body:JSON.stringify(X)});if(!fe.ok)throw new Error(await fe.text());const ye=await fe.json(),Ae=Array.isArray((K=ye==null?void 0:ye.prueba)==null?void 0:K.preguntas)?ye.prueba.preguntas:[];if(Ae.length===0)throw new Error("La IA no devolvi tems nuevos.");const se=Ae[0],ne=(()=>{const ge=((se==null?void 0:se.tipo)||"").toLowerCase();return ge.includes("mltiple")||ge.includes("multiple")||ge.includes("seleccion")?"Seleccin mltiple":ge.includes("verdadero")||ge.includes("falso")||ge==="vf"?"Verdadero o Falso":ge.includes("paread")||ge.includes("matching")||ge.includes("emparejar")?"Trminos pareados":ge.includes("comprension")||ge.includes("lectura")?"Comprensin de lectura":ge.includes("desarrollo")||ge.includes("respuesta corta")||ge.includes("abierta")?"Desarrollo":null})();let de=null;if(ne==="Seleccin mltiple"?de=P(se):ne==="Verdadero o Falso"?de=S(se):ne==="Desarrollo"?de=L(se):ne==="Trminos pareados"?de=U(se):ne==="Comprensin de lectura"?de=q(se):(se!=null&&se.opciones||se!=null&&se.alternativas)&&(de=P(se)),!de)throw new Error("No se pudo normalizar el tem generado.");const me={...c};me.actividades=c.actividades.map((ge,Te)=>Te!==J?ge:{...ge,items:ge.items.map((Ve,Xe)=>Xe===oe?{...de,id:Ve.id}:Ve)}),u(me)}catch(J){console.error("No se pudo regenerar el tem:",J),alert("No se pudo regenerar el tem. Intenta de nuevo.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:()=>u(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>m(!A),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[i.jsx(_ot,{open:!A})," ",i.jsxs("span",{children:[A?"Ocultar":"Mostrar"," Respuestas"]})]}),i.jsx("button",{onClick:()=>y(Y=>!Y),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:v?"Orden original":"Ordenar por tipo"}),i.jsx("button",{onClick:z,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),i.jsxs("button",{onClick:()=>c&&Z(c),disabled:g,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[g?"...":i.jsx(Noe,{})," PDF"]})]})]}),i.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),i.jsx("span",{children:"SUBDIRECCIN DE GESTIN PEDAGGICA"})]}),i.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:c.nombre}),i.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Asignatura:"})," ",c.asignatura]}),i.jsxs("p",{className:"text-right",children:[i.jsx("strong",{children:"Puntaje Ideal:"})," ",c.puntajeIdeal]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nivel:"})," ",c.nivel]})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[i.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",c.dificultad||"Intermedio"]}),c.adaptacionNEE&&c.adaptacionNEE.length>0&&i.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",c.adaptacionNEE.join(", ")]})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",c.objetivo]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Instrucciones Generales:"})," ",c.instruccionesGenerales]})]}),c.actividades.map(Y=>i.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:Y.titulo}),i.jsx("p",{className:"italic text-sm mb-4",children:Y.instrucciones}),i.jsx("div",{className:"space-y-6",children:(()=>{const R={"Comprensin de lectura":0,"Seleccin mltiple":1,"Verdadero o Falso":2,"Trminos pareados":3,Desarrollo:4};return(v?[...Y.items||[]].sort((K,J)=>(R[K.tipo]??99)-(R[J.tipo]??99)):Y.items||[]).map(K=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>V(Y.id,K.id),className:"text-xs bg-sky-600 text-white px-3 py-1 rounded hover:bg-sky-700",children:"Regenerar tem"})}),i.jsx(Iot,{item:K,showAnswers:A})]},K.id))})()})]},Y.id))]})]})}return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Gua"}),i.jsxs("form",{onSubmit:H,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Gua ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"nombre",value:r.nombre,onChange:C,placeholder:"Ej: Gua N1 - La Clula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:r.asignatura,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:xa.map(V=>i.jsx("option",{children:V},V))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Nivel"}),i.jsx("select",{name:"nivel",value:r.nivel,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Y0.map(V=>i.jsx("option",{children:V},V))})]}),i.jsx("div",{})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),i.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fcil","Intermedio","Avanzado"].map((V,Y)=>i.jsx("button",{type:"button",onClick:()=>n(R=>({...R,dificultad:V})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50 ${Y===0?"rounded-l-lg":""} ${Y===2?"rounded-r-lg":""} ${r.dificultad===V?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:V},V))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:r.isNee,onChange:V=>n(Y=>({...Y,isNee:V.target.checked,selectedNee:V.target.checked?Y.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),r.isNee&&i.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:$5.map(V=>i.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:r.selectedNee.includes(V),onChange:()=>I(V),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:V})]},V))})]})]})]}),i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:"Contenido a evaluar"}),i.jsx("textarea",{name:"contenido",value:r.contenido,onChange:C,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"space-y-3",children:wZ.map(V=>{var Y;return i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:!!r.tiposActividad[V],onChange:()=>_(V),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:V})]}),r.tiposActividad[V]&&EO[V]&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),(Y=EO[V])==null?void 0:Y.map(R=>i.jsx("button",{type:"button",onClick:()=>j(V,R),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${r.tiposActividad[V]===R?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:R},R))]})]},V)})}),o&&i.jsx("p",{className:"text-red-500 text-sm",children:o}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),i.jsx("div",{className:"space-y-2",children:d.length>0?d.map(V=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:V.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[V.asignatura," - ",V.nivel," (",new Date(V.fechaCreacion).toLocaleDateString(),")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>u(V),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),i.jsx("button",{onClick:()=>W(V.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},V.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Oot=({rubricas:e,onSave:t,onDelete:r,onCreate:n,allUsers:a,onCreatedInteractiva:s})=>{const[o,l]=w.useState(null),[c,u]=w.useState("list"),[d,f]=w.useState(!1),[A,m]=w.useState(""),{currentUser:g}=jE(),[x,v]=w.useState(!1),[y,N]=w.useState(""),[C,_]=w.useState(""),j=w.useMemo(()=>Array.from(new Set(a.filter(q=>q.profile===Ot.ESTUDIANTE&&q.curso).map(q=>gu(q.curso)))).sort(),[a]),I=async(q,H,z)=>{try{q.id||(q.id=crypto.randomUUID()),await VR(q);const W=a.filter(R=>R.profile===Ot.ESTUDIANTE&&gu(R.curso||"")===H),Z={};W.forEach(R=>{Z[R.id]={puntajes:{},feedback:""}});const V={nombre:q.titulo,curso:H,asignatura:z,rubricaEstaticaId:q.id,resultados:Z},Y=await kst(V);v(!1),alert("Rbrica interactiva creada."),s==null||s(Y)}catch(W){console.error(W),alert("No se pudo crear la rbrica interactiva.")}},T=async(q,H)=>{if(!q.trim()||!H.trim()){alert("El ttulo y la descripcin son obligatorios.");return}f(!0);try{W9("Evaluacin - Rbricas",g);const W=(await Tot({objetivo:q,niveles:["Insuficiente","Suficiente","Competente","Avanzado"],dimensiones:[],contextoAdicional:`El propsito de la rbrica es: "${H}". Por favor, genera entre 3 y 5 dimensiones de evaluacin relevantes.`})).data.rubrica,Z={id:crypto.randomUUID(),titulo:W.nombre,descripcion:W.descripcion,fechaCreacion:new Date().toISOString(),dimensiones:W.dimensiones.map(V=>({id:crypto.randomUUID(),nombre:V.nombre,niveles:V.descriptores.reduce((Y,R)=>{const K={Insuficiente:"insuficiente",Suficiente:"suficiente",Competente:"competente",Avanzado:"avanzado"}[R.nivel]||R.nivel.toLowerCase().replace(/\s/g,"");return K&&(Y[K]=R.descripcion),Y},{insuficiente:"",suficiente:"",competente:"",avanzado:""})}))};await n(Z),l(Z),u("form"),v(!0)}catch(z){console.error(z),alert("Error al generar la rbrica con IA.")}finally{f(!1)}},k=()=>{l({id:"",titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),u("form")},B=q=>{l(q),u("form")},M=async()=>{if(!o||!A.trim())return;const q=A;m("");const H=`temp-${crypto.randomUUID()}`;l(z=>z?{...z,dimensiones:[...z.dimensiones,{id:H,nombre:q,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0}]}:null);try{const W=(await Bot({objetivo:o.titulo,dimension:q,nivel:"todos",contextoAdicional:'Genera descriptores para los 4 niveles: Insuficiente, Suficiente, Competente y Avanzado. La respuesta debe ser un objeto JSON con claves "insuficiente", "suficiente", "competente", "avanzado".'})).data.descriptores;l(Z=>Z?{...Z,dimensiones:Z.dimensiones.map(V=>V.id===H?{...V,niveles:W,isLoading:!1}:V)}:null)}catch(z){console.error(z),alert("No se pudo generar la dimensin con IA."),l(W=>W?{...W,dimensiones:W.dimensiones.filter(Z=>Z.id!==H)}:null)}},P=(q,H,z)=>{o&&l(W=>W?{...W,dimensiones:W.dimensiones.map(Z=>Z.id!==q?Z:H==="nombre"?{...Z,nombre:z}:{...Z,niveles:{...Z.niveles,[H]:z}})}:null)},S=(q,H)=>{l(z=>z?{...z,[q]:H}:null)},L=q=>{o&&l(H=>H?{...H,dimensiones:H.dimensiones.filter(z=>z.id!==q)}:null)},U=()=>{if(!o)return null;const q="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",H=`${q} resize-none text-sm`;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rbrica de Aprendizaje"}),i.jsx("button",{onClick:()=>u("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la Rbrica"}),i.jsx("input",{value:o.titulo,onChange:z=>S("titulo",z.target.value),placeholder:"Ej. Rbrica de Presentaciones Orales",className:`${q} mt-1`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin de la Rbrica"}),i.jsx("textarea",{value:o.descripcion,onChange:z=>S("descripcion",z.target.value),placeholder:"Describe el propsito y los criterios de evaluacin de esta rbrica.",rows:3,className:`${q} mt-1`})]})]}),o.dimensiones.length===0&&i.jsx("div",{className:"text-center py-4",children:i.jsx("button",{onClick:()=>T(o.titulo,o.descripcion),disabled:d||!o.titulo||!o.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:d?"Generando...":" Generar Rbrica con IA"})}),o.dimensiones.length>0&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),i.jsx("button",{type:"button",onClick:()=>v(!0),className:"bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Usar como Rbrica Interactiva"})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsx("tr",{children:["Dimensin","Insuficiente","Suficiente","Competente","Avanzado",""].map(z=>i.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:z},z))})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.dimensiones.map(z=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 w-1/5",children:i.jsx("textarea",{value:z.nombre,onChange:W=>P(z.id,"nombre",W.target.value),rows:4,className:H})}),Object.keys(z.niveles).map(W=>i.jsx("td",{className:"p-2 w-1/5",children:"isLoading"in z&&z.isLoading?i.jsx("div",{className:"flex justify-center items-center h-full",children:i.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):i.jsx("textarea",{value:z.niveles[W],onChange:Z=>P(z.id,W,Z.target.value),rows:4,className:H})},W)),i.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:i.jsx("button",{onClick:()=>L(z.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:""})})]},z.id))})]})}),i.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("label",{className:"text-sm font-medium",children:"Aadir Dimensin"}),i.jsx("input",{value:A,onChange:z=>m(z.target.value),placeholder:"Escribe el nombre de la nueva dimensin...",className:`${q} mt-1`})]}),i.jsx("button",{onClick:M,disabled:!A.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]}),x&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg w-full max-w-md space-y-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Asignar a Curso"}),i.jsx("label",{className:"text-sm font-medium",children:"Curso"}),i.jsxs("select",{value:y,onChange:z=>N(z.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona un curso..."}),j.map(z=>i.jsx("option",{value:z,children:z},z))]}),i.jsx("label",{className:"text-sm font-medium",children:"Asignatura"}),i.jsxs("select",{value:C,onChange:z=>_(z.target.value),className:"w-full border rounded p-2 dark:bg-slate-700",children:[i.jsx("option",{value:"",children:"Selecciona una asignatura..."}),xa.map(z=>i.jsx("option",{value:z,children:z},z))]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2",children:"Cancelar"}),i.jsx("button",{disabled:!y||!o||!C,onClick:()=>o&&I(o,y,C),className:"bg-emerald-600 text-white px-4 py-2 rounded",children:"Crear Interactiva"})]})]})})]})};return c==="list"?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rbricas"}),i.jsx("button",{onClick:k,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(q=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:q.titulo}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:q.descripcion})]}),i.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>B(q),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>r(q.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},q.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rbricas guardadas."})]}):U()},Pot=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=w.useState([]),[a,s]=w.useState(null);w.useEffect(()=>{const f=jst(n);return()=>f()},[]);const o=w.useMemo(()=>r.find(f=>f.id===a)||null,[r,a]),l=w.useMemo(()=>o&&t.find(f=>f.id===o.rubricaEstaticaId)||null,[o,t]),c=w.useMemo(()=>o?e.filter(f=>f.profile===Ot.ESTUDIANTE&&gu(f.curso||"")===gu(o.curso)):[],[o,e]),u=async(f,A,m)=>{if(!o)return;const g=o.resultados[f]||{puntajes:{},feedback:""},x={...o.resultados,[f]:{...g,puntajes:{...g.puntajes,[A]:m}}};await Sst(o.id,{resultados:x})},d=f=>{if(!l)return 1;const A=l.dimensiones.map(N=>N.nombre),m=o==null?void 0:o.resultados[f];if(!m)return 1;const g=A.reduce((N,C)=>N+(m.puntajes[C]||0),0),x=A.length*4,y=1+6*(x>0?g/x:0);return Math.round(y*10)/10};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Rbricas Interactivas"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"w-1/3 space-y-2",children:[r.map(f=>i.jsxs("button",{onClick:()=>s(f.id),className:`w-full text-left p-3 rounded border ${a===f.id?"bg-amber-100 dark:bg-amber-900/30":"bg-slate-50 dark:bg-slate-700/50"}`,children:[i.jsx("div",{className:"font-semibold",children:f.nombre}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Curso: ",f.curso,"  Asignatura: ",f.asignatura]})]},f.id)),r.length===0&&i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay rbricas interactivas."})]}),i.jsx("div",{className:"flex-1",children:o&&l?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:[o.nombre,"  ",o.curso]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Estudiante"}),l.dimensiones.map(f=>i.jsx("th",{className:"p-2 text-left",children:f.nombre},f.id)),i.jsx("th",{className:"p-2 text-left",children:"Nota"})]})}),i.jsx("tbody",{children:c.map(f=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:f.nombreCompleto}),l.dimensiones.map(A=>{var g,x;const m=((x=(g=o.resultados[f.id])==null?void 0:g.puntajes)==null?void 0:x[A.nombre])||0;return i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:m,onChange:v=>u(f.id,A.nombre,Number(v.target.value)),className:"border rounded p-1 dark:bg-slate-700",children:[i.jsx("option",{value:0,children:""}),i.jsx("option",{value:1,children:"1 - Insuficiente"}),i.jsx("option",{value:2,children:"2 - Suficiente"}),i.jsx("option",{value:3,children:"3 - Competente"}),i.jsx("option",{value:4,children:"4 - Avanzado"})]})},A.id)}),i.jsx("td",{className:"p-2 font-semibold",children:d(f.id).toFixed(1)})]},f.id))})]})})]}):i.jsx("p",{className:"text-slate-500",children:"Selecciona una rbrica interactiva para calificar."})})]})]})},Fot=()=>{const[e,t]=w.useState("pruebas"),[r,n]=w.useState([]),[a,s]=w.useState([]),[o,l]=w.useState(!0);return w.useEffect(()=>{l(!0);const c=_st(n),u=Cst(d=>{s(d),l(!1)});return()=>{c(),u()}},[]),o?i.jsx("div",{className:"text-center py-10 text-lg",children:"Cargando datos..."}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("pruebas"),children:"Pruebas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricas"),children:"Rbricas"}),i.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold ${e==="rubricasInteractivas"?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700 dark:text-slate-200"}`,onClick:()=>t("rubricasInteractivas"),children:"Rbricas Interactivas"})]}),e==="pruebas"&&i.jsx(Dot,{}),e==="rubricas"&&i.jsx(Oot,{rubricas:a,onSave:VR,onDelete:Est,onCreate:VR,allUsers:r,onCreatedInteractiva:()=>t("rubricasInteractivas")}),e==="rubricasInteractivas"&&i.jsx(Pot,{allUsers:r,rubricasEstaticas:a})]})},Rot=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=pt(xr,c),d=await Rr(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let A=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&A++}),a+=A}catch(u){console.warn(`Error accediendo a coleccin ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const o=[];try{const c=pt(xr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=Lt(c,ur("timestamp",">=",u.toISOString()),tr("timestamp","desc")),f=await Rr(d),A={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");A[x]=(A[x]||0)+1}),Object.entries(A).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{o.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:l,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:o}}catch(e){return console.error("Error al obtener estadsticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},NZ=500,ab=({title:e,value:t,description:r,alert:n})=>i.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),i.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),jO=({title:e,data:t,colorClass:r})=>{const n=w.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),i.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},Lot=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!0),[a,s]=w.useState(null),[o,l]=w.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});w.useEffect(()=>{n(!0);const f=dot(g=>{t(g),n(!1)}),A=async()=>{try{const g=await Rot();l(g)}catch(g){console.error("Error al cargar estadsticas de Firestore:",g)}};A();const m=setInterval(A,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=w.useMemo(()=>{const f=new Date,A=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=A-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(_=>{const j=new Date(_.timestamp).getTime();j>=A&&x.today++,j>=m&&x.week++,j>=g&&x.month++;const I=_.userEmail||"Desconocido";v[I]||(v[I]={email:I,today:0,month:0,total:0}),v[I].total++,j>=A&&v[I].today++,j>=g&&v[I].month++,y[_.module]=(y[_.module]||0)+1});const N=Object.values(v).sort((_,j)=>j.total-_.total),C=Object.entries(y).map(([_,j])=>({label:_,value:j})).sort((_,j)=>j.value-_.value);return{stats:x,userStats:N,moduleStats:C}},[e]);return i.jsxs("div",{className:"space-y-8",children:[a&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadsticas..."}),!r&&e.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(ab,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Lmite recomendado: ${NZ}`,alert:c.today>NZ}),i.jsx(ab,{title:"Llamadas esta Semana",value:r?"--":c.week}),i.jsx(ab,{title:"Llamadas este Mes",value:r?"--":c.month})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(jO,{title:"Uso por Mdulo",data:d,colorClass:"bg-sky-500"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),i.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadsticas de uso de Firestore (simuladas)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(ab,{title:"Documentos Creados (Hoy)",value:o.documentsCreatedToday,description:"Nuevos documentos"}),i.jsx(ab,{title:"Lecturas de Firestore (Hoy)",value:o.readsToday,description:"Operaciones de lectura"}),i.jsx(ab,{title:"Total de Documentos",value:o.totalDocuments,description:"En todas las colecciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(jO,{title:"Actividad por Coleccin",data:o.collectionsActivity,colorClass:"bg-green-500"}),i.jsx(jO,{title:"Actividad Diaria (ltimos 7 das)",data:o.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},kO=Object.values(Ot),SO=e=>e?e.trim().toLowerCase().replace(//g,"").replace(/\s+(medio|bsico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1").replace(/^(\d)(?![])/,"$1").replace(/\s+/g,"").toUpperCase():"",Mot=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[a,s]=w.useState("Usuarios"),[o,l]=w.useState(""),[c,u]=w.useState(""),[d,f]=w.useState(""),[A,m]=w.useState(null),[g,x]=w.useState(!1),[v,y]=w.useState(null),[N,C]=w.useState({nombreCompleto:"",email:"",rut:"",profile:Ot.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[_,j]=w.useState(null),[I,T]=w.useState(""),[k,B]=w.useState(""),[M,P]=w.useState(""),[S,L]=w.useState(null),[U,q]=w.useState(null),[H,z]=w.useState(null),W=w.useCallback(async()=>{n(!0);try{const le=await pv();t(le)}catch(le){console.error("Error al cargar usuarios",le),L("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);w.useEffect(()=>{W()},[W]);const Z=w.useCallback(le=>{const{name:ve,value:X}=le.target;C(Ee=>({...Ee,[ve]:X,curso:ve==="profile"&&X!==Ot.ESTUDIANTE?"":Ee.curso,cursos:ve==="profile"&&X!==Ot.PROFESORADO?[]:Ee.cursos,asignaturas:ve==="profile"&&X!==Ot.PROFESORADO?[]:Ee.asignaturas}))},[]),V=w.useCallback((le,ve)=>{C(X=>{const Ee=X[le]||[],Be=Ee.includes(ve)?Ee.filter(je=>je!==ve):[...Ee,ve];return{...X,[le]:Be}})},[]),Y=w.useCallback(()=>{C({nombreCompleto:"",email:"",rut:"",profile:Ot.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),j(null),L(null)},[]),R=w.useCallback(async le=>{le.preventDefault(),L(null);const{nombreCompleto:ve,email:X,profile:Ee,curso:Be,password:je}=N;if(!ve.trim()||!X.trim()){L("Nombre Completo y Email son obligatorios.");return}if(Ee===Ot.ESTUDIANTE&&!Be){L('El campo "Curso" es obligatorio para Estudiantes.');return}if(!_&&!(je!=null&&je.trim())){L("La contrasea es obligatoria al crear un nuevo usuario.");return}const fe=V0();try{if(_){const ye=Nl(fe,"updateUser"),Ae={...N,password:(je==null?void 0:je.trim())||void 0,curso:Ee===Ot.ESTUDIANTE?SO(Be||""):void 0};await ye(Ae)}else{const ye=Nl(fe,"createUser"),Ae={...N,curso:Ee===Ot.ESTUDIANTE?SO(Be||""):void 0};await ye(Ae)}await W(),Y()}catch(ye){console.error("Error al guardar usuario:",ye),L(ye.message||"Error al guardar el usuario.")}},[N,_,W,Y]),O=w.useCallback(le=>{j(le.email),C({nombreCompleto:le.nombreCompleto,email:le.email,rut:le.rut||"",profile:le.profile,password:"",curso:le.curso||"",cursos:le.cursos||[],asignaturas:le.asignaturas||[]}),setTimeout(()=>{const ve=document.querySelector("form");ve&&ve.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),K=w.useCallback(async le=>{if(window.confirm(`Est seguro de que desea eliminar al usuario ${le}? Esta accin es irreversible.`))try{const ve=V0();await Nl(ve,"deleteUser")({email:le}),await W()}catch(ve){console.error("Error al eliminar usuario:",ve),L(ve.message||"No se pudo borrar el usuario.")}},[W]),J=async le=>{var je;const ve=(je=le.target.files)==null?void 0:je[0];if(!ve)return;q({message:"Procesando archivo...",isError:!1});const X=V0(),Ee=Nl(X,"createUser"),Be=new FileReader;Be.onload=async fe=>{var ye;try{const Ae=new Uint8Array((ye=fe.target)==null?void 0:ye.result),se=Q1(Ae,{type:"array"}),ne=se.Sheets[se.SheetNames[0]],de=Ws.sheet_to_json(ne);if(de.length===0){q({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const me=de.map(Ke=>{const Qe=Ke.Nombre||Ke.nombre,Je=Ke.Correo||Ke.correo||Ke.Email||Ke.email,mt=Ke.Curso||Ke.curso,We=Ke.RUT||Ke.rut;return!Qe||!Je||!mt?Promise.resolve({email:Je||"Sin email",error:"Datos incompletos"}):Ee({nombreCompleto:String(Qe).trim(),email:String(Je).trim(),profile:Ot.ESTUDIANTE,curso:SO(String(mt).trim()),rut:We?String(We).trim():"",password:"recoleta"}).catch(He=>({email:Je,error:He.message}))}),ge=await Promise.all(me),Te=ge.filter(Ke=>!Ke.error).length,Ve=ge.filter(Ke=>Ke.error);let Xe=`Carga completada. ${Te} estudiantes agregados.`;Ve.length>0&&(Xe+=` ${Ve.length} fallaron.`,console.error("Errores en carga masiva:",Ve)),q({message:Xe,isError:Ve.length>0}),await W()}catch(Ae){q({message:`Error: ${Ae.message}`,isError:!0})}},Be.readAsArrayBuffer(ve),le.target.value=""},ce=async le=>{var je;const ve=(je=le.target.files)==null?void 0:je[0];if(!ve)return;z({message:"Procesando archivo...",isError:!1});const X=V0(),Ee=Nl(X,"createUser"),Be=new FileReader;Be.onload=async fe=>{var ye;try{const Ae=new Uint8Array((ye=fe.target)==null?void 0:ye.result),se=Q1(Ae,{type:"array"}),ne=se.Sheets[se.SheetNames[0]],de=Ws.sheet_to_json(ne);if(de.length===0){z({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const me=de.map(Ke=>{const Qe=Ke.Nombre||Ke.nombre,Je=Ke.Correo||Ke.correo||Ke.Email||Ke.email,mt=Ke.Perfil||Ke.perfil||Ke.Profile||Ke.profile,We=Ke.RUT||Ke.rut;return!Qe||!Je||!mt?Promise.resolve({email:Je||"Sin email",error:"Datos incompletos"}):Ee({nombreCompleto:String(Qe).trim(),email:String(Je).trim(),profile:mt,rut:We?String(We).trim():"",password:"recoleta"}).catch(He=>({email:Je,error:He.message}))}),ge=await Promise.all(me),Te=ge.filter(Ke=>!Ke.error).length,Ve=ge.filter(Ke=>Ke.error);let Xe=`Carga completada. ${Te} usuarios agregados.`;Ve.length>0&&(Xe+=` ${Ve.length} fallaron.`,console.error("Errores en carga masiva:",Ve)),z({message:Xe,isError:Ve.length>0}),await W()}catch(Ae){z({message:`Error: ${Ae.message}`,isError:!0})}},Be.readAsArrayBuffer(ve),le.target.value=""},oe="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",re=w.useMemo(()=>Array.from(new Set(e.filter(le=>le.profile===Ot.ESTUDIANTE&&le.curso).map(le=>le.curso))).sort(),[e]),ue=w.useMemo(()=>e.filter(le=>(I===""||le.nombreCompleto.toLowerCase().includes(I.toLowerCase())||le.email.toLowerCase().includes(I.toLowerCase()))&&(k===""||le.profile===k)&&(M===""||le.curso===M)),[e,I,k,M]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administracin"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestin de Usuarios"}),i.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cambio masivo de contraseas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nueva contrasea"}),i.jsx("input",{type:"password",value:o,onChange:le=>l(le.target.value),placeholder:"Mnimo 6 caracteres",className:oe})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil"}),i.jsxs("select",{value:c,onChange:le=>{u(le.target.value),le.target.value!==Ot.ESTUDIANTE&&f("")},className:oe,children:[i.jsx("option",{value:"",children:"Selecciona un perfil"}),kO.map(le=>i.jsx("option",{value:le,children:le},le))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso (solo estudiantes)"}),i.jsxs("select",{value:d,onChange:le=>f(le.target.value),className:oe,disabled:c!==Ot.ESTUDIANTE,children:[i.jsx("option",{value:"",children:"Todos los cursos"}),re.map(le=>i.jsx("option",{value:le,children:le},le))]})]})]}),i.jsx("div",{className:"flex items-center justify-end gap-3",children:i.jsx("button",{type:"button",onClick:async()=>{if(m(null),y(null),!o||o.length<6){m({message:"La contrasea debe tener al menos 6 caracteres.",isError:!0});return}if(!c){m({message:"Debes seleccionar un perfil.",isError:!0});return}const le=c===Ot.ESTUDIANTE&&!d?"Se cambiarn contraseas de TODOS los estudiantes. Deseas continuar?":`Se cambiarn contraseas para ${c}${c===Ot.ESTUDIANTE&&d?" del curso "+d:""}. Confirmas?`;if(window.confirm(le))try{x(!0);const ve=V0(),X=Nl(ve,"bulkUpdatePasswords"),Ee={newPassword:o,profile:c};c===Ot.ESTUDIANTE&&d&&(Ee.curso=d);const Be=await X(Ee),je=(Be==null?void 0:Be.data)||Be,fe=`Coincidieron: ${je.matched??0} | Procesados: ${je.processed??0} | Actualizados: ${je.updated??0} | Fallidos: ${je.failed??0}`;m({message:fe,isError:(je.failed??0)>0}),y(je),await W()}catch(ve){console.error("Error en cambio masivo:",ve),m({message:(ve==null?void 0:ve.message)||"Error al ejecutar cambio masivo",isError:!0})}finally{x(!1)}},disabled:g||!c||!o||o.length<6,className:`bg-amber-600 text-white font-bold py-2 px-6 rounded-lg ${g||!c||!o||o.length<6?"opacity-60 cursor-not-allowed":"hover:bg-amber-700"}`,children:g?"Procesando":"Cambiar contraseas"})}),A&&i.jsxs("div",{className:"mt-3",children:[i.jsx("p",{className:`text-sm ${A.isError?"text-red-600":"text-green-600"}`,children:A.message}),(v==null?void 0:v.failed)&&v.failed>0&&i.jsxs("details",{className:"mt-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-3",children:[i.jsxs("summary",{className:"cursor-pointer text-red-700 dark:text-red-300 text-sm font-medium",children:["Ver errores (",v.failed,")"]}),i.jsx("div",{className:"mt-2 max-h-56 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-xs",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-slate-600 dark:text-slate-300",children:[i.jsx("th",{className:"pr-4 py-1",children:"Email"}),i.jsx("th",{className:"py-1",children:"Error"})]})}),i.jsx("tbody",{children:(v.errors||[]).map((le,ve)=>i.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[i.jsx("td",{className:"pr-4 py-1 text-slate-800 dark:text-slate-200 whitespace-nowrap",children:le.email}),i.jsx("td",{className:"py-1 text-slate-700 dark:text-slate-300",children:le.error})]},ve))})]})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:J,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),U&&i.jsx("p",{className:`text-sm mt-2 ${U.isError?"text-red-600":"text-green-600"}`,children:U.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:ce,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),H&&i.jsx("p",{className:`text-sm mt-2 ${H.isError?"text-red-600":"text-green-600"}`,children:H.message})]})]})]}),i.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:_?"Editando usuario":"Agregar nuevo usuario"}),i.jsxs("form",{onSubmit:R,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",name:"nombreCompleto",value:N.nombreCompleto,onChange:Z,className:oe,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:N.email,onChange:Z,className:oe,required:!0,readOnly:!!_})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contrasea"}),i.jsx("input",{type:"password",name:"password",value:N.password||"",onChange:Z,placeholder:_?"Dejar en blanco para no cambiar":"Contrasea temporal",className:oe})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),i.jsx("input",{type:"text",name:"rut",value:N.rut||"",onChange:Z,placeholder:"12.345.678-9",className:oe})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),i.jsx("select",{name:"profile",value:N.profile,onChange:Z,className:oe,required:!0,children:kO.map(le=>i.jsx("option",{value:le,children:le},le))})]}),N.profile===Ot.ESTUDIANTE&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{name:"curso",value:N.curso,onChange:Z,className:oe,required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),Sa.map(le=>i.jsx("option",{value:le,children:le},le))]})]})]}),N.profile===Ot.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Cursos"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Sa.map(le=>{var ve;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[i.jsx("input",{type:"checkbox",checked:((ve=N.cursos)==null?void 0:ve.includes(le))||!1,onChange:()=>V("cursos",le),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:le})]},le)})})]}),N.profile===Ot.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Asignaturas"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:xa.map(le=>{var ve;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[i.jsx("input",{type:"checkbox",checked:((ve=N.asignaturas)==null?void 0:ve.includes(le))||!1,onChange:()=>V("asignaturas",le),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:le})]},le)})})]}),S&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:S}),i.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[_&&i.jsx("button",{type:"button",onClick:Y,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:async()=>{try{console.log(" Agregando custom claim...");const le=V0(),X=await Nl(le,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log(" Custom claim agregado:",X),L(" Custom claim agregado exitosamente")}catch(le){console.error(" Error al agregar custom claim:",le),L(`Error: ${le.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:" Claim"}),i.jsx("button",{type:"button",onClick:async()=>{var le,ve,X,Ee,Be;try{const{auth:je}=await gi(async()=>{const{auth:Ae}=await Promise.resolve().then(()=>coe);return{auth:Ae}},void 0);console.log(" Usuario actual:",(le=je.currentUser)==null?void 0:le.email);const fe=await((ve=je.currentUser)==null?void 0:ve.getIdToken(!0));console.log(" Token refreshed:",!!fe);const ye=await((X=je.currentUser)==null?void 0:X.getIdTokenResult());console.log(" Claims completos:",ye==null?void 0:ye.claims),console.log(" Profile claim:",(Ee=ye==null?void 0:ye.claims)==null?void 0:Ee.profile),((Be=ye==null?void 0:ye.claims)==null?void 0:Be.profile)==="SUBDIRECCION"?L(" Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):L(` Custom claim faltante. Claims: ${JSON.stringify(ye==null?void 0:ye.claims)}`)}catch(je){console.error(" Error verificando token:",je),L(`Error verificando token: ${je.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:" Token"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:_?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsx("div",{children:i.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:I,onChange:le=>T(le.target.value),className:oe})}),i.jsx("div",{children:i.jsxs("select",{value:k,onChange:le=>B(le.target.value),className:oe,children:[i.jsx("option",{value:"",children:"Todos los perfiles"}),kO.map(le=>i.jsx("option",{value:le,children:le},le))]})}),i.jsx("div",{children:i.jsxs("select",{value:M,onChange:le=>P(le.target.value),className:oe,children:[i.jsx("option",{value:"",children:"Todos los cursos"}),re.map(le=>i.jsx("option",{value:le,children:le},le))]})})]}),r?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ue.map(le=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:le.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:le.email}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${le.profile===Ot.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":le.profile===Ot.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:le.profile})}),i.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[le.profile===Ot.ESTUDIANTE&&i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:le.curso||"Sin curso"}),le.profile===Ot.PROFESORADO&&i.jsxs("div",{className:"space-y-1",children:[le.cursos&&le.cursos.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[le.cursos.slice(0,3).map(ve=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:ve},ve)),le.cursos.length>3&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",le.cursos.length-3]})]})]}),le.asignaturas&&le.asignaturas.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[le.asignaturas.slice(0,2).map(ve=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:ve},ve)),le.asignaturas.length>2&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",le.asignaturas.length-2]})]})]}),(!le.cursos||le.cursos.length===0)&&(!le.asignaturas||le.asignaturas.length===0)&&i.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),le.profile!==Ot.ESTUDIANTE&&le.profile!==Ot.PROFESORADO&&i.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[i.jsx("button",{onClick:()=>O(le),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),i.jsx("button",{onClick:()=>K(le.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},le.email))})]}),ue.length===0&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&i.jsx(Lot,{})]})},ey="seguimiento_dual_records",Uot=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},Hot=e=>{const t=Lt(pt(dt,ey),tr("nombreEstudiante","asc"));return hr(t,n=>{const a=n.docs.map(s=>Uot(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},Y_=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=wr.fromDate(new Date(t[n]+"T00:00:00")))}),t},Qot=async e=>{try{const t=Y_(e);return(await dn(pt(dt,ey),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},CZ=async(e,t)=>{try{const r=er(dt,ey,e),n=Y_(t);await yi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},Vot=async e=>{try{const t=er(dt,ey,e);await fa(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},$ot=async e=>{const t=$p(dt),r=pt(dt,ey);let n=0,a=0;for(const s of e){const o=Lt(r,ur("rutEstudiante","==",s.rutEstudiante)),l=await Rr(o);if(l.empty){const c=er(r);t.set(c,Y_(s)),a++}else{const c=l.docs[0].id,u=er(dt,ey,c);t.set(u,Y_(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},zot={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Got=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},qot=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","s","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},Kot=({record:e,onSave:t,onClose:r})=>{const[n,a]=w.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",o=c=>{const{name:u,value:d,type:f,checked:A}=c.target;a(m=>({...m,[u]:f==="checkbox"?A:d}))},l=()=>{t(n)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisin"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),i.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),i.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),i.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),i.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),i.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisin Excepcional"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisin"}),i.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Gua (Empresa)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Gua"}),i.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:o,className:s+" mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Telfono)"}),i.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:o,className:s+" mt-1"})]})]})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),i.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Wot=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!0),a=w.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:hp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:ZI[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,o]=w.useState(a),[l,c]=w.useState(null),[u,d]=w.useState(""),[f,A]=w.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(!1),[C,_]=w.useState(null);w.useEffect(()=>{n(!0);const W=Hot(Z=>{t(Z),n(!1)});return()=>W()},[]);const j=w.useCallback(W=>{const{name:Z,value:V}=W.target;o(Y=>({...Y,[Z]:V}))},[]),I=w.useCallback(W=>{const{name:Z,value:V}=W.target;A(Y=>({...Y,[Z]:V}))},[]),T=w.useCallback(()=>{o(a),c(null),g(null)},[a]),k=async W=>{W.preventDefault(),g(null);const V=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(Y=>{var R;return!((R=s[Y])!=null&&R.trim())});if(V){g(`El campo '${V}' es obligatorio.`);return}try{l?await CZ(l,s):await Qot(s),T()}catch(Y){console.error(Y),g("No se pudo guardar el registro.")}},B=w.useCallback(W=>{window.scrollTo({top:0,behavior:"smooth"}),c(W.id),o(W)},[]),M=async W=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await Vot(W)}catch(Z){console.error(Z),g("No se pudo eliminar el registro.")}},P=W=>{_(W),N(!0)},S=()=>{_(null),N(!1)},L=async W=>{try{await CZ(W.id,W),S()}catch(Z){console.error(Z),alert("No se pudieron guardar los cambios de supervisin.")}},U=()=>{const W=["Nombre","RUT","Curso 2025","Profesor Tutor","1 Visita 1 Semestre","Realizada 1 Visita S1","2 Visita 1 Semestre","Realizada 2 Visita S1","Visita Emergencia 1 Semestre","3 Visita","Realizada 3 Visita S2","4 Visita","Realizada 4 Visita S2","Empresa","RUT-Empresa","Direccin","Comuna","Estado","Fecha de Desvinculacin","Motivo Desvinculacin","Maestro Gua","Correo maestro gua"],Z=Ws.aoa_to_sheet([W]),V=Ws.book_new();Ws.book_append_sheet(V,Z,"Plantilla"),_y(V,"Plantilla_Seguimiento_Dual.xlsx")},q=W=>{var Y;const Z=(Y=W.target.files)==null?void 0:Y[0];if(!Z)return;v({message:"Procesando archivo...",isError:!1});const V=new FileReader;V.onload=async R=>{var O;try{const K=new Uint8Array((O=R.target)==null?void 0:O.result),J=Q1(K,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ce=J.SheetNames[0],oe=J.Sheets[ce],re=Ws.sheet_to_json(oe,{raw:!1,dateNF:"yyyy-mm-dd"});if(re.length===0)throw new Error("El archivo est vaco.");const ue={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1 visita 1 semestre":"fecha1raSupervision1erSemestre","realizada 1 visita s1":"realizada1raSupervision1erSemestre","2 visita 1 semestre":"fecha2daSupervision1erSemestre","realizada 2 visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1 semestre":"fechaSupervisionExcepcional","3 visita":"fecha1raSupervision2doSemestre","realizada 3 visita s2":"realizada1raSupervision2doSemestre","4 visita":"fecha2daSupervision2doSemestre","realizada 4 visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",direccin:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculacin":"fechaDesvinculacion","motivo desvinculacin":"motivoDesvinculacion","maestro gua":"nombreMaestroGuia","correo maestro gua":"contactoMaestroGuia"},le=Object.keys(re[0]).map(Be=>Be.trim().toLowerCase()),X=["nombre","rut","curso 2025","empresa","estado"].find(Be=>!le.includes(Be));if(X)throw new Error(`Falta la columna requerida: '${X}'`);const Ee=re.map((Be,je)=>{try{const fe={};for(const ye in Be){const Ae=ue[ye.trim().toLowerCase()];if(Ae){let se=Be[ye];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Ae)?(se=Got(se),se&&(fe[Ae]=se)):Ae.includes("realizada")?fe[Ae]=qot(se):se!=null&&se!==""&&(fe[Ae]=String(se).trim())}}return!fe.nombreEstudiante||!fe.rutEstudiante?(console.warn(`Fila ${je+2}: Faltan campos requeridos`),null):fe}catch(fe){return console.error(`Error procesando fila ${je+2}:`,fe),null}}).filter(Be=>Be!==null);if(console.log("Registros procesados:",Ee),Ee.length>0){const{updated:Be,created:je}=await $ot(Ee);v({message:`Carga exitosa. ${je} registros creados, ${Be} actualizados.`,isError:!1})}else v({message:"No se encontraron registros vlidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(K){console.error("Error completo:",K),v({message:`Error al procesar el archivo: ${K.message}. Verifique que las fechas estn en formato correcto.`,isError:!0})}},V.readAsArrayBuffer(Z)},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",z=w.useMemo(()=>e.filter(W=>(u===""||W.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||W.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||W.rutEstudiante.includes(u))&&(f.curso===""||W.curso===f.curso)&&(f.empresa===""||W.nombreEmpresa===f.empresa)&&(f.estado===""||W.estado===f.estado)&&(f.comuna===""||W.comuna===f.comuna)&&(f.profesor===""||W.profesorTutorEmpresa===f.profesor)).sort((W,Z)=>W.nombreEstudiante.localeCompare(Z.nombreEstudiante)),[e,u,f]);return w.useMemo(()=>{const W=new Set,Z=new Set;return e.forEach(V=>{V.nombreEmpresa&&W.add(V.nombreEmpresa),V.comuna&&Z.add(V.comuna)}),{empresas:Array.from(W).sort(),comunas:Array.from(Z).sort()}},[e]),r?i.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Prctica Dual"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en prctica."})]})]}),i.jsxs("form",{onSubmit:k,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),i.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:j,className:H,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),i.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:j,className:H,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{name:"curso",value:s.curso,onChange:j,className:H,required:!0,children:hp.map(W=>i.jsx("option",{value:W,children:W},W))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),i.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:j,className:H,children:[i.jsx("option",{value:"",children:"Seleccione un profesor"}),TF.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),i.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:j,className:H,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),i.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:j,className:H})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Direccin Empresa"}),i.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:j,className:H})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),i.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:j,className:H})]}),i.jsxs("div",{className:"lg:col-span-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),i.jsx("select",{name:"estado",value:s.estado,onChange:j,className:H,children:ZI.map(W=>i.jsx("option",{value:W,children:W},W))})]})]}),s.estado==="Desvinculado"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculacin"}),i.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:j,className:`${H} border-red-300`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculacin"}),i.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:j,className:`${H} border-red-300`})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),i.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&i.jsx("button",{type:"button",onClick:T,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[i.jsx("button",{onClick:U,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),i.jsx("input",{type:"file",onChange:q,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&i.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[i.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:W=>d(W.target.value),className:`${H} md:col-span-2 lg:col-span-1`}),i.jsxs("select",{name:"curso",value:f.curso,onChange:I,className:H,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),hp.map(W=>i.jsx("option",{children:W},W))]}),i.jsxs("select",{name:"estado",value:f.estado,onChange:I,className:H,children:[i.jsx("option",{value:"",children:"Todos los Estados"}),ZI.map(W=>i.jsx("option",{children:W},W))]}),i.jsxs("select",{name:"profesor",value:f.profesor,onChange:I,className:H,children:[i.jsx("option",{value:"",children:"Todos los Profesores"}),TF.map(W=>i.jsx("option",{children:W},W))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:z.map(W=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:W.nombreEstudiante}),i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:W.curso})]}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:W.nombreEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:W.profesorTutorEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${zot[W.estado]}`,children:W.estado})}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[i.jsx("button",{onClick:()=>P(W),className:"text-blue-600 hover:underline",children:"Supervisin"}),i.jsx("button",{onClick:()=>B(W),className:"text-yellow-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>M(W.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},W.id))})]})})]}),y&&C&&i.jsx(Kot,{record:C,onClose:S,onSave:L})]})},Y9="actividades_remotas",rme="respuestas_actividades",nme="pruebas_estandarizadas",Xot="usuarios",ame=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},J9=e=>{const t=ame(e);return t?t.toISOString():void 0},J_=e=>{const t=ame(e);return t?t.toISOString().split("T")[0]:void 0},Z9=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:wr.fromDate(t)},eH=e=>wr.fromDate(new Date(e||new Date().toISOString())),Yot=e=>!!e&&/^data:/.test(e),ty=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(ty);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=ty(n))}),t},Jot=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL invlida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const l=typeof Buffer<"u"?Buffer:null;if(l)a=l.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,o=new Uint8Array(s);for(let l=0;l<s;l++)o[l]=a.charCodeAt(l);return{bytes:o,contentType:r}},Zot=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:J9(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:J_(t.plazoEntrega)||J_(new Date)}},elt=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:J9(t.fechaCompletado)||new Date().toISOString()}},tlt=e=>{const t=e.data()||{};return{id:e.id,...t}},rlt=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:J9(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:J_(t.plazoEntrega)||J_(new Date)}},nlt=e=>{const t=Lt(pt(dt,Y9),tr("fechaCreacion","desc"));return hr(t,r=>e(r.docs.map(Zot)),r=>{console.error("subscribeToActividades error:",r),e([])})},alt=(e,t)=>{const r=pt(dt,rme),n=Lt(r,tr("fechaCompletado","desc"));return hr(n,a=>e(a.docs.map(elt)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},slt=e=>{const t=Lt(pt(dt,Xot),tr("nombreCompleto","asc"));return hr(t,r=>e(r.docs.map(tlt)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},ilt=e=>{const t=Lt(pt(dt,nme),tr("fechaCreacion","desc"));return hr(t,r=>e(r.docs.map(rlt)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},olt=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=ty({...a,fechaCreacion:eH(r),plazoEntrega:Z9(n)});return(await dn(pt(dt,Y9),s)).id},llt=async(e,t)=>{const{fechaCreacion:r,plazoEntrega:n,...a}=t||{},s=ty({...a});r!==void 0&&(s.fechaCreacion=eH(r)),n!==void 0&&(s.plazoEntrega=Z9(n)),await Zi(er(dt,Y9,e),s)},clt=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=ty({...a,fechaCreacion:eH(r),plazoEntrega:Z9(n)});return(await dn(pt(dt,nme),s)).id},ult=async(e,t)=>{const r=ty(t);await Zi(er(dt,rme,e),r)},dlt=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},flt=async(e,t,r)=>{const{bytes:n,contentType:a}=Jot(e),s=Date.now(),o=t.replace(/\s+/g,"_"),c=`recursos/${r!==""?r:"general"}/${s}/${o}`,u=Iu(b3,c);await WC(u,n,{contentType:a});const d=await MA(u);return{nombre:t,url:d}},hlt=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(o,l)=>{if(Yot(o==null?void 0:o.url)){const c=(o==null?void 0:o.nombre)||`archivo_${l}.bin`;return flt(o.url,c,t)}return{nombre:(o==null?void 0:o.nombre)||`archivo_${l}`,url:o==null?void 0:o.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return olt(a)},Xw=e=>e?new Date(e).toLocaleDateString("es-CL"):"",EZ=e=>e?new Date(e).toLocaleString("es-CL"):"",Alt=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),sme=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Ii=(e,t)=>{if(t&&sme(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Ii(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rbrica de evaluacin]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Nc=(e,t,...r)=>{if(sme(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=Ii(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Qa=({content:e,context:t="unknown"})=>{try{const r=Ii(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}},_O={Quiz:[5,10,15],"Trminos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de Lectura":[1,2,3,4,5]},TO=["Localizar informacin","Interpretar y relacionar","Reflexionar","Extraer informacin explcita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],mlt=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState(null),[d,f]=w.useState(null),[A,m]=w.useState(!1),[g,x]=w.useState(!1),[v,y]=w.useState(!1),[N,C]=w.useState(!1),[_,j]=w.useState(!1),[I,T]=w.useState(!0),[k,B]=w.useState(null),[M,P]=w.useState(""),[S,L]=w.useState(null),[U,q]=w.useState(null),[H,z]=w.useState([]),[W,Z]=w.useState("carpetas"),[V,Y]=w.useState("Todas"),[R,O]=w.useState("Todos"),[K,J]=w.useState(null),[ce,oe]=w.useState([]),[re,ue]=w.useState(!1),[le,ve]=w.useState(null),[X,Ee]=w.useState(null),[Be,je]=w.useState([]),[fe,ye]=w.useState(""),Ae={asignatura:xa[0],nivel:"",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[se,ne]=w.useState(Ae),de={asignatura:xa[0],nivel:"",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[me,ge]=w.useState(de);w.useEffect(()=>{T(!0);const we=nlt(t),xe=ilt(n),De=alt(s),Ge=slt(Ue=>{l(Ue),T(!1)});return()=>{we(),xe(),De(),Ge()}},[]);const Te=we=>{ne(xe=>({...xe,[we.target.name]:we.target.value}))},Ve=we=>{ge(xe=>({...xe,[we.target.name]:we.target.value}))},Xe=we=>{ne(xe=>({...xe,recursos:{...xe.recursos,[we.target.name]:we.target.value}}))},Ke=we=>{we.target.files&&z(Array.from(we.target.files))},Qe=we=>{ne(xe=>{const De=xe.tipos.includes(we)?xe.tipos.filter(Ue=>Ue!==we):[...xe.tipos,we],Ge={...xe.cantidadPreguntas};return De.includes(we)?Ge[we]||(Ge[we]=_O[we][0]):delete Ge[we],{...xe,tipos:De,cantidadPreguntas:Ge}})},Je=(we,xe)=>{ne(De=>({...De,cantidadPreguntas:{...De.cantidadPreguntas,[we]:xe}}))},mt=(we,xe=!1)=>{(xe?ge:ne)(Ge=>{const Ue=Ge.estudiantesDestino||[],Ze=Ue.includes(we)?Ue.filter(rt=>rt!==we):[...Ue,we];return{...Ge,estudiantesDestino:Ze}})},We=()=>{const{tipos:we,contenido:xe,asignatura:De,nivel:Ge,cantidadPreguntas:Ue}=se;let Ze=`Eres un experto diseador de actividades pedaggicas con nfasis en la Taxonoma de Bloom y metodologas activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${xe}"
Asignatura: ${De}
Nivel educativo: ${Ge}

REQUISITOS PEDAGGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigedades
2. Distribuye las preguntas segn Taxonoma de Bloom: 20% conocimiento, 30% comprensin, 30% aplicacin, 20% anlisis/evaluacin 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prcticas cuando sea posible
5. Para mltiple opcin, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rbricas de desarrollo deben incluir criterios especficos y niveles de desempeo claros
7. En comprensin lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Ttulo descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subttulo",
        "texto": "Explicacin detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subttulo",
        "texto": "Explicacin detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subttulo (opcional)",
        "texto": "Explicacin detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definicin",
      "Concepto 2: breve definicin",
      "Concepto 3: breve definicin"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return we.forEach(rt=>{const _t=Ue[rt]||_O[rt][0];switch(rt){case"Quiz":Ze+=`- "Quiz": Array de ${_t} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opcin correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensin de Lectura":Ze+=`- "Comprensin de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con informacin relevante,
  preguntas: Array de ${_t} objetos {
    pregunta: enfocadas en distintos niveles de comprensin (literal, inferencial y crtica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opcin correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Trminos Pareados":Ze+=`- "Trminos Pareados": Array de ${_t} objetos {
  concepto: trmino clave del contenido, claro y especfico,
  definicion: explicacin precisa y nica que no sea ambigua
}
`;break;case"Desarrollo":Ze+=`- "Desarrollo": Array de ${_t} objetos {
  pregunta: pregunta que fomente el pensamiento crtico y la aplicacin de conocimientos,
  rubrica: criterios de evaluacin detallados con niveles de desempeo especficos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),Ze+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,we.includes("Quiz")&&(Ze+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la funcin fotosinttica de las plantas, qu ocurrira si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentara su tasa fotosinttica debido a la mayor disponibilidad de luz",
    "La planta morira inmediatamente por exceso de radiacin",
    "La tasa fotosinttica disminuira significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habra cambios en la fotosntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosinttica disminuira significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),we.includes("Comprensin de Lectura")&&(Ze+=`
Comprensin de Lectura de ejemplo: {
  "texto": "La revolucin industrial transform profundamente las estructuras sociales y econmicas de Europa durante el siglo XIX. El paso de una economa agraria y artesanal a una dominada por la industria y la manufactura mecanizada signific cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros aos de industrializacin. No obstante, este periodo tambin represent un aumento en la produccin de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Segn el texto, cul fue una consecuencia negativa inmediata de la revolucin industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminucin en la produccin de bienes manufacturados",
        "La eliminacin de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),Ze},He=()=>{const{contenido:we,objetivosAprendizaje:xe,asignatura:De,nivel:Ge}=me;return`Eres un experto pedagogo especializado en evaluacin educativa y diseo de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON vlido segn la estructura solicitada.

INFORMACIN CURRICULAR:
- Asignatura: ${De}
- Nivel educativo: ${Ge}
- Contenido principal: ${we}
- Objetivos de Aprendizaje: ${xe}

REQUISITOS PEDAGGICOS:
1. Genera preguntas equilibradas en dificultad: 25% bsicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada segn taxonoma SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorizacin de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones errneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensin y aplicacin

FORMATO REQUERIDO:
{
  "titulo": "Ttulo descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Ttulo representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evale una habilidad especfica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE especfica que evala",
      "justificacion": "Explicacin pedaggica de por qu es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECFICOS:
- ${De==="Lenguaje y Comunicacin"||De==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o potico) con temticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una nica respuesta correcta
- Habilidades a evaluar segn SIMCE: ${TO.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluacin de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function Tt(we,xe){if(we==="Desarrollo"&&Array.isArray(xe))return xe.map((De,Ge)=>{if(typeof De=="string"){const Ue=De.match(/^(.*?)(?:R[u]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Ue?{pregunta:Nc(Ue[1],`desarrollo-pregunta-${Ge}`),rubrica:Nc(Ue[2],`desarrollo-rubrica-${Ge}`)}:{pregunta:Nc(De,`desarrollo-pregunta-simple-${Ge}`),rubrica:""}}if(De&&typeof De=="object"){const Ue=Nc(De,`desarrollo-obj-pregunta-${Ge}`,"pregunta","Pregunta","texto");let Ze="";if(De.rubrica||De.Rubrica||De.rbrica||De.Rbrica){const rt=De.rubrica||De.Rubrica||De.rbrica||De.Rbrica;Ze=Ii(rt,`desarrollo-rubrica-${Ge}`)}return{pregunta:Ue,rubrica:Ze}}return{pregunta:Ii(De,`desarrollo-fallback-${Ge}`),rubrica:""}});if(we==="Trminos Pareados"&&Array.isArray(xe))return xe.map((De,Ge)=>{if(typeof De=="string"){const Ue=De.match(/^(.+?)[\s:-]+(.+)$/);return Ue?{id:Ge,concepto:Nc(Ue[1],`pareados-concepto-${Ge}`),definicion:Nc(Ue[2],`pareados-definicion-${Ge}`)}:{id:Ge,concepto:Nc(De,`pareados-concepto-simple-${Ge}`),definicion:""}}return De&&typeof De=="object"?{id:Ge,concepto:Nc(De,`pareados-obj-concepto-${Ge}`,"concepto","termino"),definicion:Nc(De,`pareados-obj-definicion-${Ge}`,"definicion","significado")}:{id:Ge,concepto:Ii(De,`pareados-fallback-${Ge}`),definicion:""}});if(we==="Comprensin de Lectura"){if(xe&&typeof xe=="object"&&!Array.isArray(xe)&&Array.isArray(xe.preguntas))return{texto:Nc(xe,"comprension-texto","texto"),preguntas:xe.preguntas.map((De,Ge)=>({pregunta:Nc(De,`comprension-pregunta-${Ge}`,"pregunta"),opciones:Array.isArray(De.opciones)?De.opciones.map(Ue=>Ii(Ue,`comprension-opcion-${Ge}`)):[],respuestaCorrecta:Ii(De.respuestaCorrecta,`comprension-respuesta-${Ge}`),puntaje:typeof De.puntaje=="number"?De.puntaje:1}))};if(Array.isArray(xe)){const De=xe.map((Ue,Ze)=>Nc(Ue,`comprension-bloque-${Ze}`,"texto")).join(`

---

`),Ge=xe.flatMap(Ue=>Array.isArray(Ue.preguntas)?Ue.preguntas:[]);return{texto:De,preguntas:Ge.map((Ue,Ze)=>({pregunta:Nc(Ue,`comprension-combined-pregunta-${Ze}`,"pregunta"),opciones:Array.isArray(Ue.opciones)?Ue.opciones.map(rt=>Ii(rt,`comprension-combined-opcion-${Ze}`)):[],respuestaCorrecta:Ii(Ue.respuestaCorrecta,`comprension-combined-respuesta-${Ze}`),puntaje:typeof Ue.puntaje=="number"?Ue.puntaje:1}))}}}return we==="Quiz"&&Array.isArray(xe)?xe.map((De,Ge)=>({pregunta:Nc(De,`quiz-pregunta-${Ge}`,"pregunta"),opciones:Array.isArray(De.opciones)?De.opciones.map(Ue=>Ii(Ue,`quiz-opcion-${Ge}`)):[],respuestaCorrecta:Ii(De.respuestaCorrecta,`quiz-respuesta-${Ge}`),puntaje:typeof De.puntaje=="number"?De.puntaje:1})):xe}const Ie=async we=>{var xe;if(we.preventDefault(),!se.contenido.trim()||se.tipos.length===0){B("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),B(null);try{const De=await Promise.all(H.map(async Ut=>({nombre:Ut.name,url:await Alt(Ut)}))),Ge=We(),Ue=await ua.currentUser.getIdToken(),Ze=await fetch("/api/generarActividadRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue}`},body:JSON.stringify({prompt:Ge,formData:se,selectedFiles:H})});if(!Ze.ok)throw new Error("Error al generar la actividad con IA");const rt=await Ze.json(),_t={};for(const Ut of se.tipos){const Jt=(xe=rt.actividades)==null?void 0:xe[Ut];_t[Ut]=Tt(Ut,Jt)}let Bt="";rt.panelDidactico&&(Bt=typeof rt.panelDidactico=="string"?rt.panelDidactico:JSON.stringify(rt.panelDidactico));const Kt={id:"",fechaCreacion:new Date().toISOString(),...se,recursos:{...se.recursos,archivos:De},introduccion:Ii(rt.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:Bt,generatedContent:_t};L(Kt)}catch(De){B(`Error al generar la actividad: ${(De==null?void 0:De.message)||De}`)}finally{y(!1)}},ft=async we=>{if(we.preventDefault(),!me.contenido.trim()||!me.objetivosAprendizaje.trim()){B("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),B(null);try{const xe=He(),De=await ua.currentUser.getIdToken(),Ge=await fetch("/api/generarPruebaRemota",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${De}`},body:JSON.stringify({prompt:xe,pruebaFormData:me})});if(!Ge.ok)throw new Error("Error al generar la prueba con IA");const Ue=await Ge.json();if(!Ue.preguntas||!Array.isArray(Ue.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas vlido");const Ze=(Ue.textos||[]).map((Bt,Kt)=>({id:Bt.id||Kt+1,titulo:Ii(Bt.titulo,`texto-titulo-${Kt}`)||`Texto ${Kt+1}`,contenido:Ii(Bt.contenido,`texto-contenido-${Kt}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(Bt.tipo)?Bt.tipo:"informativo",palabras:Bt.palabras||(Bt.contenido?String(Bt.contenido).split(" ").length:0)})),rt=Ue.preguntas.slice(0,30).map((Bt,Kt)=>({numero:Bt.numero||Kt+1,pregunta:Ii(Bt.pregunta,`pregunta-${Kt}`)||`Pregunta ${Kt+1}`,opciones:Array.isArray(Bt.opciones)&&Bt.opciones.length>=4?Bt.opciones.slice(0,4).map((Ut,Jt)=>Ii(Ut,`pregunta-opcion-${Kt}-${Jt}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(Bt.respuestaCorrecta)?Bt.respuestaCorrecta:"A",habilidad:TO.includes(Bt.habilidad)?Bt.habilidad:TO[0],justificacion:Ii(Bt.justificacion,`justificacion-${Kt}`)||"Justificacin no disponible",...Bt.textoId&&typeof Bt.textoId=="number"?{textoId:Bt.textoId}:{}})),_t={id:"",fechaCreacion:new Date().toISOString(),...me,titulo:Ii(Ue.titulo,"prueba-titulo")||`Prueba ${me.asignatura}`,instrucciones:Ii(Ue.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:Ze,preguntas:rt};q(_t)}catch(xe){B(`Error al generar la prueba: ${(xe==null?void 0:xe.message)||xe}`)}finally{y(!1)}},vt=async()=>{if(S)try{C(!0),await hlt(S),ne(Ae),z([]),m(!1),L(null)}catch(we){console.error("Error al guardar la actividad con archivos:",we),B("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{C(!1)}},et=async()=>{if(U)try{C(!0);const we={...U,cursosDestino:U.cursosDestino||[],estudiantesDestino:U.estudiantesDestino||[],textos:U.textos||[],preguntas:U.preguntas.map(xe=>({...xe,textoId:xe.textoId||null}))};await clt(we),ge(de),x(!1),q(null)}catch(we){console.error("Error al guardar la prueba:",we),B("No se pudo guardar la prueba.")}finally{C(!1)}},Ct=w.useMemo(()=>{var De,Ge,Ue;const we=c||d;if(!we||!o.length)return[];const xe=new Map;return!((De=we.cursosDestino)!=null&&De.length)&&!((Ge=we.estudiantesDestino)!=null&&Ge.length)?[]:((Ue=we.estudiantesDestino)!=null&&Ue.length&&o.filter(Ze=>Ze.profile===Ot.ESTUDIANTE&&we.estudiantesDestino.includes(Ze.nombreCompleto)).forEach(Ze=>xe.set(Ze.id,Ze)),Array.from(xe.values()).sort((Ze,rt)=>Ze.nombreCompleto.localeCompare(rt.nombreCompleto)))},[c,d,o]),St=w.useMemo(()=>{const we=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(xe=>xe.actividadId===we)},[a,c,d]),ot=w.useMemo(()=>o.filter(we=>we.profile===Ot.ESTUDIANTE).sort((we,xe)=>we.nombreCompleto.localeCompare(xe.nombreCompleto)),[o]),nr=w.useMemo(()=>M.trim()?ot.filter(we=>we.nombreCompleto.toLowerCase().includes(M.toLowerCase())):ot,[ot,M]),fr=w.useMemo(()=>{const we=new Set;return e.forEach(xe=>{(xe.estudiantesDestino||[]).forEach(De=>{const Ge=o.find(Ue=>Ue.profile===Ot.ESTUDIANTE&&Ue.nombreCompleto===De);Ge&&we.add(Ge.id)})}),r.forEach(xe=>{(xe.estudiantesDestino||[]).forEach(De=>{const Ge=o.find(Ue=>Ue.profile===Ot.ESTUDIANTE&&Ue.nombreCompleto===De);Ge&&we.add(Ge.id)})}),a.forEach(xe=>we.add(xe.estudianteId)),o.filter(xe=>xe.profile===Ot.ESTUDIANTE&&we.has(xe.id)).sort((xe,De)=>xe.nombreCompleto.localeCompare(De.nombreCompleto))},[e,r,a,o]),Zt=w.useMemo(()=>o.find(we=>we.id===le)||null,[o,le]),Ft=w.useMemo(()=>{if(!Zt)return{asignadas:[],respuestas:[]};const we=[...e.filter(De=>(De.estudiantesDestino||[]).includes(Zt.nombreCompleto)).map(De=>({tipo:"Actividad",item:De})),...r.filter(De=>(De.estudiantesDestino||[]).includes(Zt.nombreCompleto)).map(De=>({tipo:"Prueba",item:De}))],xe=a.filter(De=>De.estudianteId===Zt.id);return{asignadas:we,respuestas:xe}},[Zt,e,r,a]),dr=()=>i.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas","gestion"].map(we=>i.jsxs("button",{onClick:()=>{Z(we),u(null),f(null),ve(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${W===we?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[we==="carpetas"&&i.jsx(IG,{size:18}),we==="actividades"&&i.jsx(Wi,{size:18}),we==="pruebas"&&i.jsx(foe,{size:18}),we==="carpetas"?"Carpetas de Estudiantes":we==="actividades"?"Actividades Remotas":we==="pruebas"?"Pruebas Estandarizadas":"Gestin de Trabajos"]},we)),i.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Cy,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:we=>P(we.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),W==="actividades"&&!S&&!c&&i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(Kj,{size:18})," Nueva"]}),W==="pruebas"&&!U&&!d&&i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(Kj,{size:18})," Nueva"]})]})]}),Sr=w.useMemo(()=>{const we=new Set;return e.forEach(xe=>(xe==null?void 0:xe.asignatura)&&we.add(xe.asignatura)),["Todas",...Array.from(we).sort()]},[e]),_r=w.useMemo(()=>{const we=new Set;return e.forEach(De=>(De==null?void 0:De.nivel)&&we.add(De.nivel)),["Todos","",...Array.from(we).filter(De=>!!De&&De!=="").sort()]},[e]),Vn=w.useMemo(()=>{const we=[];for(const xe of e){const De=xe.estudiantesDestino||[];for(const Ge of De){const Ue=o.find(rt=>rt.profile===Ot.ESTUDIANTE&&rt.nombreCompleto===Ge)||null,Ze=Ue?a.find(rt=>rt.estudianteId===Ue.id&&rt.actividadId===xe.id):void 0;we.push({actividad:xe,estudiante:Ue,estado:Ze?"Completado":"Pendiente",respuesta:Ze})}}return we},[e,o,a]),qa=w.useMemo(()=>Vn.filter(we=>{const xe=V==="Todas"||we.actividad.asignatura===V,De=R==="Todos"||we.actividad.nivel===R;return xe&&De}),[Vn,V,R]),ar=()=>{var we;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Gestin de Trabajos"}),i.jsx("p",{className:"text-slate-500",children:"Organiza envos y realizados por asignatura y nivel. Reasigna actividades ya creadas sin consumir tokens."})]}),i.jsxs("div",{className:"md:ml-auto flex flex-wrap gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),i.jsx("select",{value:V,onChange:xe=>Y(xe.target.value),className:"border-slate-300 rounded-md",children:Sr.map(xe=>i.jsx("option",{value:xe,children:xe},xe))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),i.jsx("select",{value:R,onChange:xe=>O(xe.target.value),className:"border-slate-300 rounded-md",children:_r.map(xe=>i.jsx("option",{value:xe,children:xe},xe))})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipos"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:qa.map((xe,De)=>{var Ge,Ue,Ze;return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(Qa,{content:xe.actividad.asignatura,context:"gestion-asig"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:xe.actividad.nivel||""}),i.jsx("td",{className:"px-4 py-3 text-sm",children:((Ge=xe.estudiante)==null?void 0:Ge.nombreCompleto)||""}),i.jsx("td",{className:"px-4 py-3 text-sm",children:(Ue=xe.actividad.tipos)==null?void 0:Ue.join(", ")}),i.jsx("td",{className:"px-4 py-3 text-sm",children:xe.estado==="Completado"?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(va,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Dc,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:xe.respuesta?`${xe.respuesta.puntaje}/${xe.respuesta.puntajeMaximo}`:""}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:xe.respuesta?xe.respuesta.nota:""}),i.jsx("td",{className:"px-4 py-3 text-sm",children:xe.respuesta?EZ(xe.respuesta.fechaCompletado):""}),i.jsx("td",{className:"px-4 py-3 text-sm text-right",children:i.jsx("button",{onClick:()=>{J(xe.actividad),oe([])},className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Reasignar a nuevos estudiantes",children:"Reasignar"})})]},`${xe.actividad.id}-${((Ze=xe.estudiante)==null?void 0:Ze.id)||De}`)})})]})}),K&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Reasignar Actividad"}),i.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Selecciona estudiantes adicionales para la actividad de ",i.jsx("strong",{children:K.asignatura}),"  ",(we=K.tipos)==null?void 0:we.join(", "),"."]}),i.jsx("div",{className:"mb-3",children:i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:xe=>P(xe.target.value),className:"w-full border-slate-300 rounded-md shadow-sm"})}),i.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-md p-2 bg-slate-50",children:(M?nr:ot).map(xe=>{const De=(K.estudiantesDestino||[]).includes(xe.nombreCompleto);return i.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer ${De?"opacity-50":"hover:bg-slate-100"}`,children:[i.jsx("input",{type:"checkbox",disabled:De,checked:ce.includes(xe.nombreCompleto),onChange:()=>{oe(Ge=>Ge.includes(xe.nombreCompleto)?Ge.filter(Ue=>Ue!==xe.nombreCompleto):[...Ge,xe.nombreCompleto])},className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:xe.nombreCompleto,children:xe.nombreCompleto}),De&&i.jsx("span",{className:"ml-auto text-xs text-slate-400",children:"Ya asignado"})]},xe.id)})}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{J(null),oe([])},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{disabled:re||ce.length===0,onClick:async()=>{if(K)try{ue(!0);const xe=K.estudiantesDestino||[],De=Array.from(new Set([...xe,...ce]));await llt(K.id,{estudiantesDestino:De}),J(null),oe([])}catch(xe){console.error("Error reasignando actividad:",xe),B("No se pudo reasignar la actividad.")}finally{ue(!1)}},className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:re?"Guardando...":"Confirmar reasignacin"})]})]})})]})},fn=()=>{const we=M?nr:fr;return we.length?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:we.map(xe=>{const De=a.filter(Ze=>Ze.estudianteId===xe.id),Ge=De.length,Ue=e.filter(Ze=>(Ze.estudiantesDestino||[]).includes(xe.nombreCompleto)).length+r.filter(Ze=>(Ze.estudiantesDestino||[]).includes(xe.nombreCompleto)).length;return i.jsxs("button",{onClick:()=>ve(xe.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[i.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:i.jsx(IG,{})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"font-semibold text-slate-800 truncate",children:xe.nombreCompleto}),i.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(fx,{size:14})," ",xe.curso||""]})]})]}),i.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:Ue}),i.jsx("p",{className:"text-xs",children:"Asignadas"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:Ge}),i.jsx("p",{className:"text-xs",children:"Entregas"})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Dc,{size:16,className:"opacity-70"}),i.jsx("span",{className:"text-xs mt-1",children:De.length?Xw(De.sort((Ze,rt)=>(Ze.fechaCompletado||"").localeCompare(rt.fechaCompletado||"")).slice(-1)[0].fechaCompletado):""})]})]})]},xe.id)})}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados an."})},$r=()=>{if(!Zt)return null;const{asignadas:we,respuestas:xe}=Ft;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>ve(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[i.jsx(qj,{size:18})," Volver"]}),i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial  ",Zt.nombreCompleto]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Ttulo / Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:we.map(({tipo:De,item:Ge})=>{var _t;const Ue=xe.find(Bt=>Bt.actividadId===Ge.id),Ze=De==="Actividad"?`${Ge.asignatura}  ${(_t=Ge.tipos)==null?void 0:_t.join(", ")}`:Ge.titulo,rt=Ge.plazoEntrega?Xw(Ge.plazoEntrega):"";return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm",children:De}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(Qa,{content:Ze,context:"hist-titulo"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:rt}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Ue?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(va,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Dc,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Ue?`${Ue.puntaje}/${Ue.puntajeMaximo}`:""}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Ue?Ue.nota:""})]},Ge.id)})})]})})]})},mn=()=>{var we,xe,De;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Qa,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):i.jsx(Qa,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",Xw((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duracin: ${d.duracionMinutos} min`]})]}),i.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(qj,{size:18})," Volver al listado"]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((we=c==null?void 0:c.tipos)==null?void 0:we.includes("Desarrollo"))&&i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Ct.map(Ge=>{var Ze;const Ue=St.find(rt=>rt.estudianteId===Ge.id);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:Ge.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Ue?i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Ue?`${Ue.puntaje}/${Ue.puntajeMaximo}`:"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Ue?i.jsx("span",{className:parseFloat(Ue.nota)>=4?"text-green-600":"text-red-600",children:Ue.nota}):"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Ue?EZ(Ue.fechaCompletado):"-"}),((Ze=c==null?void 0:c.tipos)==null?void 0:Ze.includes("Desarrollo"))&&i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Ue?i.jsx("button",{onClick:()=>{var _t,Bt,Kt;Ee(Ue);const rt=Array.from({length:((Bt=(_t=c.generatedContent)==null?void 0:_t.Desarrollo)==null?void 0:Bt.length)||0},(Ut,Jt)=>({index:Jt,puntaje:0,observacion:""}));je(rt),ye(((Kt=Ue==null?void 0:Ue.revisionDocente)==null?void 0:Kt.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):i.jsx("span",{className:"text-slate-400",children:"-"})})]},Ge.id)})})]})})]}),X&&((xe=c==null?void 0:c.tipos)==null?void 0:xe.includes("Desarrollo"))&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisin de Desarrollo  ",(X==null?void 0:X.estudianteNombre)||""]}),i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((De=c.generatedContent)==null?void 0:De.Desarrollo)||[]).map((Ge,Ue)=>{var Ze,rt;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("p",{className:"font-semibold",children:[Ue+1,". ",i.jsx(Qa,{content:Ge.pregunta,context:`revision-pregunta-${Ue}`})]}),Ge.rubrica&&i.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[i.jsx("strong",{children:"Rbrica:"})," ",i.jsx(Qa,{content:Ge.rubrica,context:`revision-rubrica-${Ue}`})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),i.jsx("input",{type:"number",min:0,step:.5,value:((Ze=Be[Ue])==null?void 0:Ze.puntaje)??0,onChange:_t=>{const Bt=Number(_t.target.value)||0;je(Kt=>{const Ut=[...Kt];return Ut[Ue]={...Ut[Ue]||{index:Ue,puntaje:0},puntaje:Bt},Ut})},className:"w-24 border-slate-300 rounded-md"}),i.jsx("input",{type:"text",placeholder:"Observacin (opcional)",value:((rt=Be[Ue])==null?void 0:rt.observacion)||"",onChange:_t=>{const Bt=_t.target.value;je(Kt=>{const Ut=[...Kt];return Ut[Ue]={...Ut[Ue]||{index:Ue,puntaje:0},observacion:Bt},Ut})},className:"flex-1 border-slate-300 rounded-md"})]})]},Ue)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),i.jsx("textarea",{rows:3,value:fe,onChange:Ge=>ye(Ge.target.value),className:"w-full border-slate-300 rounded-md"})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{Ee(null),je([]),ye("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:async()=>{if(X)try{j(!0);const Ge=Number(X.puntaje)||0,Ue=Number(X.puntajeMaximo)||0,Ze=(Be||[]).reduce((Bt,Kt)=>Bt+(Number(Kt.puntaje)||0),0),rt=Ge+Ze,_t=dlt(rt,Ue);await ult(X.id,{puntaje:rt,puntajeMaximo:Ue,nota:_t,revisionDocente:{completada:!0,observacionesGenerales:fe||"",detalle:Be||[],puntajeDocente:Ze}}),Ee(null),je([]),ye("")}catch(Ge){console.error("Error guardando revisin:",Ge),B("No se pudo guardar la revisin del docente.")}finally{j(!1)}},disabled:_,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:_?"Guardando...":"Guardar Revisin"})]})]})})]})},In=()=>{var we,xe;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),i.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(qj,{size:18})," Volver"]})]}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generar una actividad."}),i.jsxs("form",{onSubmit:Ie,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:se.asignatura,onChange:Te,className:"w-full border-slate-300 rounded-md shadow-sm",children:xa.map(De=>i.jsx("option",{value:De,children:De},De))})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),i.jsx("textarea",{name:"instrucciones",value:(we=se.recursos)==null?void 0:we.instrucciones,onChange:Xe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),i.jsx("textarea",{name:"enlaces",value:(xe=se.recursos)==null?void 0:xe.enlaces,onChange:Xe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por lnea..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),i.jsx("input",{type:"file",multiple:!0,onChange:Ke,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Slo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:De=>P(De.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(M?nr:ot).map(De=>{var Ge;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ge=se.estudiantesDestino)==null?void 0:Ge.includes(De.nombreCompleto),onChange:()=>mt(De.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:De.nombreCompleto,children:De.nombreCompleto})]},De.id)})})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"contenido",value:se.contenido,onChange:Te,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:se.plazoEntrega,onChange:Te,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),i.jsx("div",{className:"space-y-3",children:yTe.map(De=>i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:se.tipos.includes(De),onChange:()=>Qe(De),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:De})]}),se.tipos.includes(De)&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),_O[De].map(Ge=>i.jsx("button",{type:"button",onClick:()=>Je(De,Ge),className:`px-3 py-1 rounded-full font-semibold text-xs ${se.cantidadPreguntas[De]===Ge?"bg-amber-500 text-white":"bg-slate-200"}`,children:Ge},Ge))]})]},De))})]})]}),k&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:k}),i.jsx("div",{className:"pt-2 text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?i.jsx(Dc,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},$n=()=>{var we;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin de la Actividad"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo est correcto, confirma para asignar."}),i.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introduccin para el Estudiante"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Qa,{content:S==null?void 0:S.introduccion,context:"preview-introduccion"})})]}),(S==null?void 0:S.panelDidactico)&&i.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didctico - Material de Apoyo"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof S.panelDidactico=="string"&&S.panelDidactico.trim().startsWith("{")){const xe=JSON.parse(S.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[xe.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:xe.titulo}),Array.isArray(xe.subtitulos)&&xe.subtitulos.map((De,Ge)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:De.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:De.texto})]},Ge)),Array.isArray(xe.conceptosClave)&&xe.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:xe.conceptosClave.map((De,Ge)=>i.jsx("li",{className:"text-emerald-800",children:De},Ge))})]}),!xe.subtitulos&&!xe.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(xe,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:S.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:S.panelDidactico})}})()})]}),(S==null?void 0:S.recursos)&&(S.recursos.instrucciones||S.recursos.enlaces||((we=S.recursos.archivos)==null?void 0:we.length))&&i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),i.jsxs("div",{className:"space-y-3",children:[S.recursos.instrucciones&&i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Qa,{content:S.recursos.instrucciones,context:"preview-instrucciones"})}),S.recursos.enlaces&&i.jsx("div",{children:S.recursos.enlaces.split(`
`).map((xe,De)=>xe.trim()&&i.jsx("a",{href:xe,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:xe},De))}),S.recursos.archivos&&S.recursos.archivos.length>0&&i.jsx("ul",{className:"list-disc list-inside",children:S.recursos.archivos.map(xe=>i.jsx("li",{className:"text-slate-700",children:xe.nombre},xe.nombre))})]})]}),S==null?void 0:S.tipos.map(xe=>{const De=S.generatedContent[xe];return De?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:xe}),i.jsxs("div",{className:"space-y-4 text-sm",children:[xe==="Quiz"&&Array.isArray(De)&&De.map((Ge,Ue)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Ue+1,". ",i.jsx(Qa,{content:Ge.pregunta,context:`preview-quiz-pregunta-${Ue}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Ge.opciones.map((Ze,rt)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+rt),"."]})," ",i.jsx(Qa,{content:Ze,context:`preview-quiz-opcion-${Ue}-${rt}`})]},rt))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Qa,{content:Ge.respuestaCorrecta,context:`preview-quiz-respuesta-${Ue}`})]})]},Ue)),xe==="Comprensin de Lectura"&&De&&typeof De=="object"&&"preguntas"in De&&Array.isArray(De.preguntas)&&i.jsxs("div",{children:[i.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:i.jsx(Qa,{content:De.texto,context:"preview-lectura-texto"})}),De.preguntas.map((Ge,Ue)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Ue+1,". ",i.jsx(Qa,{content:Ge.pregunta,context:`preview-lectura-pregunta-${Ue}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Ge.opciones.map((Ze,rt)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+rt),"."]})," ",i.jsx(Qa,{content:Ze,context:`preview-lectura-opcion-${Ue}-${rt}`})]},rt))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Qa,{content:Ge.respuestaCorrecta,context:`preview-lectura-respuesta-${Ue}`})]})]},Ue))]}),xe==="Trminos Pareados"&&Array.isArray(De)&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border border-slate-200",children:[i.jsx("thead",{className:"bg-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definicin"})]})}),i.jsx("tbody",{children:De.map((Ge,Ue)=>i.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[i.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:i.jsx(Qa,{content:Ge.concepto,context:`preview-pareado-concepto-${Ue}`})}),i.jsx("td",{className:"p-2 align-top text-slate-700",children:i.jsx(Qa,{content:Ge.definicion,context:`preview-pareado-definicion-${Ue}`})})]},Ge.id))})]})}),xe==="Desarrollo"&&Array.isArray(De)&&De.map((Ge,Ue)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Ue+1,". ",i.jsx(Qa,{content:Ge.pregunta,context:`preview-desarrollo-pregunta-${Ue}`})]}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[i.jsx("strong",{className:"font-semibold",children:"Rbrica:"})," ",i.jsx(Qa,{content:Ge.rubrica,context:`preview-desarrollo-rubrica-${Ue}`})]})]},Ue))]})]},xe):null})]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>L(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:vt,disabled:N,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:N?"Guardando...":"Confirmar y Asignar"})]})]})},ke=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify_between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),i.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(qj,{size:18})," Volver"]})]}),i.jsxs("form",{onSubmit:ft,className:"space-y-6 mt-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:me.asignatura,onChange:Ve,className:"w-full border-slate-300 rounded-md shadow-sm",children:xa.map(we=>i.jsx("option",{value:we,children:we},we))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),i.jsx("textarea",{name:"objetivosAprendizaje",value:me.objetivosAprendizaje,onChange:Ve,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),i.jsx("textarea",{name:"contenido",value:me.contenido,onChange:Ve,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:me.plazoEntrega,onChange:Ve,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Slo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:we=>P(we.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(M?nr:ot).map(we=>{var xe;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(xe=me.estudiantesDestino)==null?void 0:xe.includes(we.nombreCompleto),onChange:()=>mt(we.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:we.nombreCompleto,children:we.nombreCompleto})]},we.id)})})]})]})]}),k&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:k}),i.jsx("div",{className:"text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?i.jsx(Dc,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),$e=()=>{var we,xe;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin Prueba"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),i.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:i.jsx(Qa,{content:U==null?void 0:U.titulo,context:"preview-prueba-titulo"})}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Qa,{content:U==null?void 0:U.instrucciones,context:"preview-prueba-instrucciones"})})]}),(we=U==null?void 0:U.textos)!=null&&we.length?i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),i.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:U.textos.map((De,Ge)=>i.jsxs("li",{children:[i.jsxs("p",{className:"font-semibold",children:[i.jsx(Qa,{content:De.titulo,context:`preview-texto-titulo-${Ge}`}),i.jsxs("span",{className:"text-xs text-slate-500",children:["(",De.tipo,")"]})]}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:i.jsx(Qa,{content:De.contenido,context:`preview-texto-contenido-${Ge}`})})]},De.id))})]}):null,(xe=U==null?void 0:U.preguntas)!=null&&xe.length?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),U.preguntas.slice(0,10).map((De,Ge)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[De.numero,". ",i.jsx(Qa,{content:De.pregunta,context:`preview-pregunta-texto-${Ge}`})]}),i.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:De.opciones.map((Ue,Ze)=>i.jsx("li",{children:i.jsx(Qa,{content:Ue,context:`preview-pregunta-opcion-${Ge}-${Ze}`})},Ze))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",De.respuestaCorrecta]})]},De.numero))]}):null]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>q(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:et,disabled:N,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:N?"Guardando...":"Confirmar y Asignar"})]})]})},Re=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(Kj,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:e.length>0?e.map(we=>{var Ge;const xe=[];(Ge=we.estudiantesDestino)!=null&&Ge.length&&xe.push(`Estudiantes: ${we.estudiantesDestino.length}`);const De=xe.length?xe.join(" | "):"Estudiantes seleccionados";return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Qa,{content:we.asignatura,context:`lista-asignatura-${we.id}`}),"  ",we.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",De," | Creado: ",Xw(we.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>u(we),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},we.id)}):i.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),Me=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(Kj,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:r.length>0?r.map(we=>i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800",children:i.jsx(Qa,{content:we.titulo,context:`lista-prueba-titulo-${we.id}`})}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",Xw(we.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>f(we),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},we.id)):i.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return I?i.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):i.jsxs("div",{className:"animate-fade-in",children:[dr(),le?$r():U?$e():S?$n():c||d?mn():W==="gestion"?ar():W==="pruebas"?g?ke():Me():W==="actividades"?A?In():Re():fn()]})},AN="actividades_remotas",qg="respuestas_actividades",ime=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},jZ=e=>{const t=ime(e);return t?t.toISOString():void 0},plt=e=>{const t=ime(e);return t?t.toISOString().split("T")[0]:void 0},Kg=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:jZ(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:plt(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:jZ(t.fechaCompletado)||t.fechaCompletado}},v1=(e,t)=>{var n,a;console.error(` Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un ndice en la base de datos. Contacta al administrador.",console.log(" Enlace para crear ndice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},glt=e=>new Promise(t=>setTimeout(t,e)),ome=async(e,t=3,r="operacin")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(` Intento ${n} fall en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(` Reintentando en ${s}ms...`),await glt(s)}else throw a}throw new Error("Max retries exceeded")},xlt=(e,t,r)=>{var o;console.log(" Suscribindose a actividades disponibles para:",e.nombreCompleto);const n=[],a=new Map,s=l=>{for(const u of l){const d=Kg(u);a.set(d.id,d)}const c=Array.from(a.values());c.sort((u,d)=>new Date(d.fechaCreacion||"").getTime()-new Date(u.fechaCreacion||"").getTime()),console.log(" Actividades combinadas para el estudiante:",c.length),t(c)};try{const l=e.curso||"";if(l){const A=Lt(pt(dt,AN),ur("cursosDestino","array-contains",l)),m=hr(A,{next:g=>{console.log(" Actividades por curso:",g.docs.length),s(g.docs)},error:g=>{if((g==null?void 0:g.code)==="permission-denied")console.warn(" Sin permisos para actividades por curso; verificando doc usuarios/{email} y campo curso.",g);else{const x=v1(g,"suscripcin a actividades por curso");r==null||r(x)}}});n.push(m)}const c=(o=ua.currentUser)==null?void 0:o.uid,u=e.email,d=e.nombreCompleto,f=[u,c,d].filter(Boolean);if(f.length){const A=Lt(pt(dt,AN),ur("estudiantesDestino","array-contains-any",f)),m=hr(A,{next:g=>{console.log(" Actividades por estudiante:",g.docs.length),s(g.docs)},error:g=>{if((g==null?void 0:g.code)==="permission-denied")console.warn(" Sin permisos para actividades por estudiante; continuando con filtro por curso.",g);else{const x=v1(g,"suscripcin a actividades por estudiante");r==null||r(x)}}});n.push(m)}n.length===0&&(console.warn(" Usuario sin curso ni identificadores para filtrar actividades."),t([]))}catch(l){const c=v1(l,"configuracin de suscripciones de actividades");r==null||r(c)}return()=>n.forEach(l=>l&&l())},vlt=(e,t,r)=>{var d,f;console.log(" Suscribindose a respuestas del estudiante:",e);const n=(d=ua.currentUser)==null?void 0:d.uid,a=(f=ua.currentUser)==null?void 0:f.email,s=Array.from(new Set([e,n,a].filter(Boolean)));if(s.length===0)return console.warn(" Sin identificadores vlidos para suscripcin de respuestas."),t([]),()=>{};const o=[],l=new Map;let c=0;const u=()=>{const A=Array.from(l.values()).sort((m,g)=>new Date(g.fechaCompletado).getTime()-new Date(m.fechaCompletado).getTime());console.log(" Enviando respuestas procesadas al componente (combinadas):",A.length),t(A)};for(const A of s){const m=Lt(pt(dt,qg),ur("estudianteId","==",A)),g=hr(m,{next:x=>{try{console.log(` Respuestas recibidas para identificador ${A}:`,x.docs.length);for(const v of x.docs){const y=Kg(v);l.set(y.id,y)}u()}catch(v){console.error(" Error procesando respuestas:",v);const y=v1(v,"procesamiento de respuestas");r==null||r(y)}},error:x=>{if((x==null?void 0:x.code)==="permission-denied"){if(console.warn(` Sin permisos para suscripcin de respuestas con identificador ${A}. Continuando con otras.`,x),c++,c===s.length){const y=v1(x,"suscripcin a respuestas (todas fallaron)");r==null||r(y)}return}const v=v1(x,"suscripcin a respuestas");r==null||r(v)}});o.push(g)}return()=>{for(const A of o)try{A()}catch{}}},blt=async e=>ome(async()=>{var s;console.log(" Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,calificacion:e.calificacion});const r=((s=ua.currentUser)==null?void 0:s.uid)||e.estudianteId,n={...e,estudianteId:r,fechaCompletado:wr.fromDate(new Date(e.fechaCompletado))},a=await dn(pt(dt,qg),n);return console.log(" Respuesta guardada exitosamente con ID:",a.id),a.id},3,"guardado de respuesta"),ylt=async(e,t)=>ome(async()=>{var a,s,o,l;const r=["actividadId","idActividad","actividadID"];for(const c of r)try{const u=Lt(pt(dt,qg),ur(c,"==",e),ur("estudianteId","==",t)),d=await Rr(u);if(d.docs.length>0)return Kg(d.docs[0])}catch(u){(u==null?void 0:u.code)==="failed-precondition"&&((a=u==null?void 0:u.message)!=null&&a.includes("requires an index"))?console.warn(` Falta ndice para ${c}+estudianteId; probando otras variantes...`):console.debug(` Consulta por ${c} no retorn resultados o fall:`,(u==null?void 0:u.code)||"")}try{const c=er(dt,AN,e);try{const u=Lt(pt(dt,qg),ur("actividadRef","==",c),ur("estudianteId","==",t)),d=await Rr(u);if(d.docs.length>0)return Kg(d.docs[0])}catch(u){if((u==null?void 0:u.code)==="failed-precondition"&&((s=u==null?void 0:u.message)!=null&&s.includes("requires an index"))){console.warn(" Falta ndice para actividadRef+estudianteId; usando fallback con filtro en memoria.");const d=Lt(pt(dt,qg),ur("actividadRef","==",c)),A=(await Rr(d)).docs.map(m=>Kg(m)).find(m=>m.estudianteId===t);if(A)return A}}}catch{}try{const c=Lt(pt(dt,qg),ur("actividad.id","==",e),ur("estudianteId","==",t)),u=await Rr(c);if(u.docs.length>0)return Kg(u.docs[0])}catch(c){(c==null?void 0:c.code)==="failed-precondition"&&((o=c==null?void 0:c.message)!=null&&o.includes("requires an index"))&&console.warn(" Falta ndice para actividad.id+estudianteId; omitiendo este intento.")}const n=[`${AN}/${e}`,`/${AN}/${e}`];for(const c of n)try{const u=Lt(pt(dt,qg),ur("actividadPath","==",c),ur("estudianteId","==",t)),d=await Rr(u);if(d.docs.length>0)return Kg(d.docs[0])}catch(u){(u==null?void 0:u.code)==="failed-precondition"&&((l=u==null?void 0:u.message)!=null&&l.includes("requires an index"))&&console.warn(" Falta ndice para actividadPath+estudianteId; probando siguiente variante...")}return null},2,`verificacin de actividad completada ${e}`),wlt=.6,iL=(e,t,r=wlt,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},oL=({className:e="w-5 h-5"})=>i.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Nlt=async(e,t,r,n=3)=>{try{for(let a=1;a<=n;a++)try{const s=ua.currentUser;if(!s)throw new Error("Usuario no autenticado.");const o=await s.getIdToken(),l=await fetch("/api/generarFeedbackAutoaprendizaje",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({actividad:e,respuestas:t,estudianteId:r||s.uid})});if(!l.ok){const d=await l.json();throw new Error(d.error||`Error del servidor: ${l.status}`)}const u=(await l.json()).feedback;if(u)return u;throw new Error("La respuesta de la IA no tiene el formato esperado.")}catch(s){if(console.error(`Error en intento ${a} de generar feedback:`,s),a===n)return null}}catch(a){return console.error("Error al generar feedback con IA:",a),null}},Clt=async(e,t,r)=>{console.log(" Iniciando guardado de respuesta...");try{const n=await blt(e);console.log(" Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await Nlt(t,r);if(s){const{updateDoc:o,doc:l}=await gi(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>O1);return{updateDoc:u,doc:d}},void 0),{db:c}=await gi(async()=>{const{db:u}=await Promise.resolve().then(()=>coe);return{db:u}},void 0);return await o(l(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log(" Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn(" No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error(" Error crtico al guardar respuesta:",n),n}},Wo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Sc=(e,t)=>{if(t&&Wo(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Sc(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluacin]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Nf=(e,t,...r)=>{if(Wo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Sc(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Sc(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},$s=({content:e,context:t="unknown"})=>{try{const r=Sc(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}};function Ok(e){var t,r;try{const n=s=>{if(s==null)return null;const o=String(s).trim();return o?(o.includes("/")?o.split("/").filter(Boolean).pop():o).toLowerCase():null},a=[e==null?void 0:e.actividadId,e==null?void 0:e.actividadID,e==null?void 0:e.idActividad,(t=e==null?void 0:e.actividad)==null?void 0:t.id,(r=e==null?void 0:e.actividadRef)==null?void 0:r.id,e==null?void 0:e.actividadPath];for(const s of a){const o=n(s);if(o)return o}}catch{}return null}function kZ(e){if(console.log(" Normalizando lectura:",e),Wo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{Wo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,o)=>Sc(s,`opcion-${n}-${o}`)).filter(Boolean):[];return{pregunta:Nf(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Sc(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Nf(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Nf(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(Wo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function SZ(e){return console.log(" Normalizando pareados:",e),Wo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(Wo(t,`pareado-${r}`),{izquierda:Nf(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Nf(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(Wo(t,`pareado-array-${r}`),{izquierda:Nf(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Nf(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function _Z(e){return console.log(" Normalizando desarrollo:",e),Wo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(Wo(t,`desarrollo-pregunta-${r}`),{enunciado:Nf(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(Wo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(` Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Nf(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const Elt=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=w.useState({}),[s,o]=w.useState(!1),l=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{o(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=n[m];if(console.log(` Procesando tipo: ${m}`,g),Wo(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensin de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,N)=>(Wo(y,`quiz-question-${N}`),{pregunta:Nf(y,`quiz-pregunta-${N}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((C,_)=>Sc(C,`quiz-opcion-${N}-${_}`)):[],respuestaCorrecta:Sc(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${N}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:kZ(g).preguntas).forEach((y,N)=>{const C=x==null?void 0:x[N],_=C===y.respuestaCorrecta,j=y.puntaje??1;_&&(u+=j),d+=j,f.items.push({pregunta:y.pregunta,respuestaUsuario:Sc(C,`feedback-respuesta-${N}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:_,puntajeObtenido:_?j:0,tipo:m})}),m==="Trminos Pareados"){const v=SZ(g),y=x||{};v.forEach((N,C)=>{const _=y[C],j=_===N.derecha,I=N.puntaje??1;j&&(u+=I),d+=I,f.items.push({pregunta:`${N.izquierda}  ?`,respuestaUsuario:Sc(_,`pareado-feedback-${C}`)||"No respondida",respuestaCorrecta:N.derecha,esCorrecta:j,puntajeObtenido:j?I:0,tipo:m})})}if(m==="Desarrollo"){const v=_Z(g),y=x||{};v.forEach((N,C)=>{const _=Sc(y[C],`desarrollo-feedback-${C}`).trim();f.items.push({pregunta:N.enunciado,respuestaUsuario:_||"No respondida",respuestaCorrecta:"Revisin docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const A={puntaje:u,puntajeMaximo:d,respuestas:n,nota:iL(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(A,f)};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:i.jsx($s,{content:e.asignatura,context:"actividad-asignatura"})}),i.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx($s,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&i.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atencin"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const u=JSON.parse(e.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[u.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:u.titulo}),Array.isArray(u.subtitulos)&&u.subtitulos.map((d,f)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:d.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:d.texto})]},f)),Array.isArray(u.conceptosClave)&&u.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.conceptosClave.map((d,f)=>i.jsx("li",{className:"text-emerald-800",children:d},f))})]}),!u.subtitulos&&!u.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(u,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx($s,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:u.startsWith("http")?u:`https://${u}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:u})]},d))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:u.nombre||`Archivo ${d+1}`})]},d))})]})]})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(` Renderizando tipo: ${u}`,d),Wo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((A,m)=>(Wo(A,`render-quiz-question-${m}`),{pregunta:Nf(A,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(A==null?void 0:A.opciones)?A.opciones.map((g,x)=>Sc(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:Sc(A==null?void 0:A.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(A==null?void 0:A.puntaje)=="number"?A.puntaje:1})):[];return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),i.jsx("div",{className:"space-y-6",children:f.map((A,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx($s,{content:A.pregunta,context:`quiz-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:A.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx($s,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensin de Lectura":{const f=kZ(d);return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensin de Lectura"}),i.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:i.jsx($s,{content:f.texto,context:"lectura-texto"})}),i.jsx("div",{className:"space-y-6",children:f.preguntas.map((A,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx($s,{content:A.pregunta,context:`lectura-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:A.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx($s,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Trminos Pareados":{const f=SZ(d),A=n[u]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Trminos Pareados"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>i.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[i.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",i.jsx($s,{content:g.izquierda,context:`pareado-izq-${x}`})]}),i.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:A[x]??"",onChange:v=>l(u,{...A,[x]:v.target.value}),children:[i.jsx("option",{value:"",children:" Selecciona la pareja "}),m.map((v,y)=>i.jsx("option",{value:v,children:Sc(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=_Z(d),A=n[u]||{};return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),i.jsx("div",{className:"space-y-6",children:f.map((m,g)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",i.jsx($s,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),i.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta",value:A[g]??"",onChange:x=>l(u,{...A,[g]:x.target.value})})]},g))}),i.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado ser revisado y calificado por tu profesor/a."})]},u)}default:return null}}),i.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:i.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?i.jsx(oL,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},jlt=({currentUser:e})=>{var z,W,Z;const[t,r]=w.useState(!0),[n,a]=w.useState("list"),[s,o]=w.useState("actividades"),[l,c]=w.useState(!1),[u,d]=w.useState([]),[f,A]=w.useState([]),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(null),[C,_]=w.useState("connecting"),[j,I]=w.useState(!1);w.useEffect(()=>{var re,ue;console.log(" Iniciando carga de datos para usuario:",e.nombreCompleto);let V=!1,Y=!1,R=!1,O=!1;const K=()=>{(V||R)&&(Y||O)&&(R&&O?(_("error"),N("Error al cargar datos. Verifica tu conexin e intenta nuevamente.")):_("connected"),r(!1),console.log(" Carga completada - Actividades:",V,"Respuestas:",Y))},J=xlt(e,le=>{console.log(" Actividades recibidas:",le.length),le.forEach((ve,X)=>{console.log(`  ${X+1}. ${ve.asignatura} (ID: ${ve.id})`),Wo(ve,`actividad-${X}`)}),d(le),V=!0,K()},le=>{console.error(" Error en suscripcin de actividades:",le),R=!0,K()}),ce=((re=ua.currentUser)==null?void 0:re.uid)||((ue=ua.currentUser)==null?void 0:ue.email)||e.email||e.id,oe=vlt(ce,le=>{console.log(" Respuestas del estudiante recibidas:",le.length),le.forEach((ve,X)=>{var Ee;console.log(`  ${X+1}. Actividad ${ve.actividadId} - Fecha: ${ve.fechaCompletado}`),ve.nota&&console.log(`    Nota: ${ve.nota}`),(Ee=ve.revisionDocente)!=null&&Ee.completada&&console.log("     Con revisin docente completada"),Wo(ve,`respuesta-${X}`)}),A(le),Y=!0,K()},le=>{var ve;console.error(" Error en suscripcin de respuestas:",le),(ve=le.message)!=null&&ve.includes("requires an index")&&(console.log(" Detectado error de ndice, intentando consulta alternativa..."),N("Se detect un problema de configuracin. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),O=!0,K()});return()=>{console.log(" Limpiando subscripciones"),J==null||J(),oe==null||oe()}},[e]),w.useEffect(()=>{t||console.log(" ESTADO ACTUALIZADO:",{actividades:u.length,respuestas:f.length,vista:n,conexion:C})},[u.length,f.length,n,C,t]);const T=V=>{console.log(" Iniciando actividad:",V.asignatura);const Y=String(V.id).trim().toLowerCase();if(M.has(Y)){N("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}g(V),a("activity"),N(null)},k=V=>{console.log(" Viendo resultado:",V.actividadId);const Y=Ok(V),R=u.find(O=>String(O.id).trim().toLowerCase()===(Y||String(V.actividadId).trim().toLowerCase()));R?(g(R),v(V),a("result"),N(null)):N("No se pudieron cargar los detalles de esta actividad completada.")},B=w.useCallback(async(V,Y)=>{var K,J,ce,oe;if(!m)return;const R=((K=ua.currentUser)==null?void 0:K.uid)||((J=ua.currentUser)==null?void 0:J.email)||e.email||e.id;console.log(" COMPLETANDO ACTIVIDAD:",{actividadId:m.id,estudianteId:R,puntaje:V.puntaje,nota:V.nota});try{const re=Array.from(new Set([(ce=ua.currentUser)==null?void 0:ce.uid,(oe=ua.currentUser)==null?void 0:oe.email,e.email,e.id].filter(Boolean)));for(const ue of re){const le=await ylt(String(m.id),String(ue));if(le){console.warn(" Intento de repetir actividad detectado. Redirigiendo a resultados existentes."),N("Esta actividad ya fue respondida anteriormente. Te mostramos tus resultados."),v(le),a("result");return}}}catch(re){console.warn(" No se pudo verificar si la actividad ya estaba respondida. Continuando con precaucin.",re)}a("result"),c(!0),N(null);const O={actividadId:m.id,estudianteId:R,fechaCompletado:new Date().toISOString(),...V,retroalimentacionDetallada:Y};console.log(" Guardando respuesta...");try{const re=await Clt(O,m,Y);console.log(" Respuesta completada con ID:",re.id),v(re),setTimeout(()=>{console.log(" Datos sincronizados")},1500)}catch(re){console.error(" Error crtico al completar actividad:",re),N("Ocurri un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),v({id:"error-temp",...O,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema tcnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{c(!1)}},[m,e.id]),M=w.useMemo(()=>{if(f.length===0)return new Set;const V=new Set;for(const Y of f){const R=Ok(Y);R&&V.add(R)}return console.log(" IDs completados calculados (normalizados):",V.size),V},[f]),P=w.useMemo(()=>{if(u.length===0)return[];try{const Y=u.slice(0,5).map(O=>String(O.id).trim()),R=Array.from(M).slice(0,5);console.log(" Diagnstico IDs - Actividades:",Y,"Completadas:",R)}catch{}const V=u.filter(Y=>!M.has(String(Y.id).trim().toLowerCase()));return console.log(" Actividades pendientes:",V.length),V},[u,M]),S=w.useMemo(()=>{if(f.length===0)return[];const V=f.map(Y=>{const R=Ok(Y),O=u.find(K=>String(K.id).trim().toLowerCase()===(R||String(Y.actividadId).trim().toLowerCase()));return{...Y,asignatura:(O==null?void 0:O.asignatura)||"Actividad no disponible",tipos:(O==null?void 0:O.tipos)||[]}}).sort((Y,R)=>new Date(R.fechaCompletado).getTime()-new Date(Y.fechaCompletado).getTime());return console.log(" Historial preparado:",V.length),V},[f,u]),L=w.useMemo(()=>{const V=new Map;for(const Y of f){const R=Ok(Y);R&&V.set(R,Y)}return V},[f]),U=w.useMemo(()=>j?P:u,[u,P,j]),q=w.useMemo(()=>{const V=u.length,Y=M.size,R=Math.max(V-Y,0);return{total:V,comp:Y,pend:R}},[u.length,M]),H=w.useMemo(()=>{if(S.length===0)return[];const V=new Map;for(const R of S){const O=R.asignatura||"Sin asignatura";let K;if(R.nota!=null){const ce=parseFloat(R.nota);isNaN(ce)||(K=ce)}if(K==null&&typeof R.puntaje=="number"&&typeof R.puntajeMaximo=="number"&&R.puntajeMaximo>0){const ce=iL(R.puntaje,R.puntajeMaximo),oe=parseFloat(ce);isNaN(oe)||(K=oe)}if(K==null||isNaN(K))continue;const J=V.get(O)||{suma:0,cantidad:0};V.set(O,{suma:J.suma+K,cantidad:J.cantidad+1})}const Y=Array.from(V.entries()).map(([R,O])=>({asignatura:R,promedio:Math.round(O.suma/O.cantidad*100)/100,cantidad:O.cantidad}));return Y.sort((R,O)=>O.promedio-R.promedio),Y},[S]);return t?i.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[i.jsx(oL,{className:"w-8 h-8 text-slate-500"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),i.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",C==="connecting"?"Conectando...":C==="connected"?"Conectado":"Error de conexin"]})]})]}):C==="error"&&u.length===0&&f.length===0?i.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexin"}),i.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&m?i.jsx(Elt,{actividad:m,onComplete:B,currentUser:e}):n==="result"&&x?(console.log(" Renderizando resultado:",x),i.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),i.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",i.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[x.puntaje," / ",x.puntajeMaximo]})]}),i.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",i.jsx("span",{className:`font-bold text-2xl ${parseFloat(x.nota)>=4?"text-green-600":"text-red-600"}`,children:x.nota})]})]}),(m==null?void 0:m.recursos)&&i.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[i.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),m.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx($s,{content:m.recursos.instrucciones,context:"resultado-instrucciones"})})]}),m.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.enlaces.split(`
`).filter(Boolean).map((V,Y)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:V.startsWith("http")?V:`https://${V}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:V})]},Y))})]}),m.recursos.archivos&&m.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:m.recursos.archivos.map((V,Y)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:""}),i.jsx("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:V.nombre||`Archivo ${Y+1}`})]},Y))})]})]}),y&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("p",{className:"text-red-700 font-medium",children:[" ",y]})}),l&&i.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[i.jsx(oL,{className:"w-8 h-8 text-blue-500"}),i.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),i.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),x.retroalimentacionAI&&!l&&i.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeo "}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-green-700",children:" Principales Logros"}),i.jsx("p",{className:"text-slate-700 mt-1",children:i.jsx($s,{content:x.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((z=x.retroalimentacionAI.desafios)==null?void 0:z.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-amber-700",children:" reas de Mejora"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.desafios.map((V,Y)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx($s,{content:V.pregunta,context:`feedback-desafio-pregunta-${Y}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx($s,{content:V.explicacionDelError,context:`feedback-desafio-explicacion-${Y}`})})]},Y))})]}),((Z=(W=x.retroalimentacionAI)==null?void 0:W.comentariosDesarrollo)==null?void 0:Z.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-sky-700",children:" Retroalimentacin de Desarrollo"}),i.jsx("div",{className:"space-y-3 mt-2",children:x.retroalimentacionAI.comentariosDesarrollo.map((V,Y)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx($s,{content:V.pregunta,context:`feedback-desarrollo-pregunta-${Y}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx($s,{content:V.retroalimentacionBreve,context:`feedback-desarrollo-retro-${Y}`})})]},Y))})]})]}),x.retroalimentacionDetallada&&i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisin Detallada"}),x.retroalimentacionDetallada.items.map((V,Y)=>{const R=V.esCorrecta===null,O=R?"border-slate-400 bg-slate-50":V.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",K=R?"":V.esCorrecta?"":"";return i.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${O}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[Y+1,". ",i.jsx($s,{content:V.pregunta,context:`feedback-item-pregunta-${Y}`})]}),i.jsx("span",{className:"font-bold text-lg",children:K})]}),i.jsxs("div",{className:"mt-2 text-sm pl-4",children:[i.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",i.jsx("span",{className:"font-medium",children:i.jsx($s,{content:V.respuestaUsuario,context:`feedback-item-respuesta-${Y}`})})]}),!R&&!V.esCorrecta&&i.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",i.jsx("span",{className:"font-medium text-green-700",children:i.jsx($s,{content:V.respuestaCorrecta,context:`feedback-item-correcta-${Y}`})})]}),R&&i.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisin docente."})]})]},Y)})]}),i.jsx("div",{className:"flex gap-4",children:i.jsx("button",{onClick:()=>{a("list"),g(null),v(null),N(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[y&&i.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:i.jsxs("p",{className:"text-amber-800",children:[" ",y]})}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"actividades",label:"Actividades Pendientes"},{key:"historial",label:"Historial"},{key:"promedios",label:"Promedios Remotos"}].map(V=>i.jsx("button",{onClick:()=>o(V.key),className:`px-4 py-2 rounded-lg border transition-colors ${s===V.key?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-700 hover:bg-slate-50 border-slate-200"}`,children:V.label},V.key))}),s==="actividades"&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-1",children:"Actividades"}),i.jsxs("p",{className:"text-slate-500",children:[q.total," en total  ",q.comp," completadas, ",q.pend," pendientes"]})]}),i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm select-none",children:[i.jsx("input",{type:"checkbox",checked:j,onChange:V=>I(V.target.checked),className:"h-4 w-4 accent-slate-700"}),"Mostrar solo pendientes"]})]}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Completa las actividades asignadas por tus profesores."}),i.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:i.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),i.jsx("div",{className:"space-y-4",children:U.length>0?U.map(V=>{const Y=String(V.id).trim().toLowerCase(),R=M.has(Y),O=L.get(Y);return i.jsxs("div",{className:`p-4 border rounded-lg flex flex-col sm:flex-row justify-between sm:items-center gap-4 transition-colors ${R?"bg-green-50 hover:bg-green-100 border-green-200":"bg-slate-50 hover:bg-slate-100 border-slate-200"}`,children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800 flex items-center gap-2",children:[i.jsxs("span",{children:[i.jsx($s,{content:V.asignatura,context:`actividad-asignatura-${V.id}`})," - ",V.tipos.join(", ")]}),i.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full inline-block ${R?"bg-green-100 text-green-700 border border-green-200":"bg-slate-100 text-slate-700 border border-slate-200"}`,title:R?"Esta actividad ya fue realizada":"Actividad pendiente",children:R?"Completada":"Pendiente"})]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",i.jsx($s,{content:typeof V.plazoEntrega=="string"?V.plazoEntrega:"",context:`actividad-plazo-${V.id}`})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[i.jsx("button",{onClick:()=>T(V),disabled:R,className:`font-bold py-2 px-6 rounded-lg w-full sm:w-auto transition-colors ${R?"bg-slate-300 text-slate-600 cursor-not-allowed":"bg-amber-500 text-white hover:bg-amber-600"}`,children:R?"Ya realizada":"Comenzar"}),R&&O&&i.jsx("button",{onClick:()=>k(O),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver resultados"})]})]},V.id)}):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:j?"Todo al da!":"Sin actividades disponibles"}),i.jsx("p",{className:"text-slate-500 mt-1",children:j?"No tienes actividades pendientes.":"Revisa ms tarde o consulta con tu profesor(a)."})]})})]})}),s==="historial"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentacin de las actividades completadas."}),i.jsx("div",{className:"space-y-4",children:S.length>0?S.map(V=>i.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx($s,{content:V.asignatura,context:`completada-asignatura-${V.id}`})," - ",V.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(V.fechaCompletado).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",i.jsx("span",{className:`font-bold text-lg ${(parseFloat(V.nota)||0)>=4?"text-green-600":"text-red-600"}`,children:V.nota??iL(V.puntaje,V.puntajeMaximo)})]}),i.jsx("button",{onClick:()=>k(V),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},V.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"An no hay historial"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecern aqu."})]})})]}),s==="promedios"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Promedios Remotos"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Promedio de tus calificaciones por asignatura en actividades remotas."}),H.length>0?i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:H.map(V=>i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 shadow-sm",children:[i.jsx("p",{className:"font-bold text-slate-800 mb-1",children:V.asignatura}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-2xl font-extrabold ${V.promedio>=4?"text-green-600":"text-red-600"}`,children:V.promedio.toFixed(2)}),i.jsx("p",{className:"text-xs text-slate-500",children:"Promedio (1-7)"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-slate-700 font-semibold",children:V.cantidad}),i.jsx("p",{className:"text-xs text-slate-500",children:"actividades"})]})]})]},V.asignatura))}):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Sin datos an"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Completa actividades para ver tus promedios por asignatura."})]})]})]})},IT="estudiantes_inclusion",klt="usuarios",lme=e=>{const t=e.data();return{id:e.id,...t}},Slt=e=>{const t=Lt(pt(dt,IT));return hr(t,n=>{const a=n.docs.map(s=>lme(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusin:",n),e([])})},_lt=e=>{const t=Lt(pt(dt,klt));return hr(t,n=>{const a=n.docs.map(s=>lme(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},Tlt=async e=>{try{return(await dn(pt(dt,IT),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusin:",t),new Error("No se pudo agregar al estudiante.")}},Blt=async(e,t)=>{try{const{id:r,...n}=t,a=er(dt,IT,e);await yi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusin:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},Ilt=async e=>{try{const t=er(dt,IT,e);await fa(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusin:",t),new Error("No se pudo eliminar al estudiante.")}},Dlt=({estudiantes:e})=>{const t=w.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=w.useMemo(()=>{const l=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(l).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=w.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=w.useMemo(()=>{const l=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),s=w.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),o=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...n.map(l=>l.cantidad));return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),i.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),i.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),i.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),i.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),i.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),i.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,""]}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnstico"}),i.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},TZ=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=w.useState(""),[a,s]=w.useState(""),[o,l]=w.useState(!1),c=w.useMemo(()=>e.filter(f=>{const A=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=a===""||f.curso===a;return A&&m}).sort((f,A)=>f.nombreCompleto.localeCompare(A.nombreCompleto)),[e,r,a]),u=w.useMemo(()=>[...new Set(e.map(A=>A.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),l(!1)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),i.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),l(f.target.value.length>0||a!=="")},onFocus:()=>l(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),i.jsxs("select",{value:a,onChange:f=>{s(f.target.value),l(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>i.jsx("option",{value:f,children:f},f))]})]})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),i.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),i.jsx("button",{onClick:()=>l(!o),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:o?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),o&&i.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?i.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de bsqueda.":"No hay estudiantes disponibles."}):i.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>i.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),i.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:""})]})},f.id))})}),r&&c.length===1&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:" Solo hay un resultado! Haga clic para agregarlo directamente:"}),i.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},Olt=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=w.useState($5[0]),s=()=>r(e,n);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),i.jsx("select",{id:"dificultad",value:n,onChange:o=>a(o.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:$5.map(o=>i.jsx("option",{value:o,children:o},o))})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},Plt=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,o]=w.useState("intervenciones"),[l,c]=w.useState(e);w.useEffect(()=>c(e),[e]);const[u,d]=w.useState(null),f={responsable:"",accion:"",observaciones:""},[A,m]=w.useState(f),[g,x]=w.useState({trimestre:"T1",meta:""}),[v,y]=w.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[N,C]=w.useState(null),[_,j]=w.useState(!1),I={motivo:"",acuerdos:"",asistentes:""},[T,k]=w.useState(I),B=()=>{r(l),t()},M=async()=>{var je;if(!A.responsable||!A.accion){alert("Responsable y Accin son campos obligatorios.");return}let X,Ee=!1;u?X=(l.intervenciones||[]).map(fe=>fe.id===u.id?{...fe,...A}:fe):(Ee=!0,X=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...A},...l.intervenciones||[]]);const Be=X.sort((fe,ye)=>new Date(ye.fecha).getTime()-new Date(fe.fecha).getTime());if(c(fe=>({...fe,intervenciones:Be})),Ee)try{await Eoe({docenteNombre:A.responsable,docenteEmail:a?a(A.responsable):void 0,docenteEmailLower:(je=a?a(A.responsable):void 0)==null?void 0:je.toLowerCase(),tipo:"nueva_intervencion",titulo:" Nueva Intervencin Asignada",mensaje:`Se te ha asignado una nueva intervencin para el estudiante ${l.nombre}. Accin: ${A.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:A.accion}),alert(` Intervencin registrada y notificacin enviada a ${A.responsable}`)}catch(fe){console.error("Error al crear notificacin:",fe),alert(" Intervencin guardada, pero no se pudo enviar la notificacin al docente.")}m(f),d(null)},P=X=>{d(X),m({responsable:X.responsable,accion:X.accion,observaciones:X.observaciones})},S=X=>{window.confirm("Eliminar esta intervencin?")&&c(Ee=>({...Ee,intervenciones:(Ee.intervenciones||[]).filter(Be=>Be.id!==X)}))},L=X=>{const{name:Ee,value:Be}=X.target;c(je=>({...je,[Ee]:Be,fechaActualizacionApoyos:new Date().toISOString()}))},U=()=>{if(!g.meta.trim())return;const X={...g,id:crypto.randomUUID(),cumplida:!1};c(Ee=>({...Ee,metasProgreso:[...Ee.metasProgreso||[],X]})),x({trimestre:"T1",meta:""})},q=X=>{c(Ee=>({...Ee,metasProgreso:(Ee.metasProgreso||[]).map(Be=>Be.id===X?{...Be,cumplida:!Be.cumplida}:Be)}))},H=X=>{c(Ee=>({...Ee,metasProgreso:(Ee.metasProgreso||[]).filter(Be=>Be.id!==X)}))},z=w.useMemo(()=>{const X=l.metasProgreso||[];if(X.length===0)return{percent:0,color:"bg-slate-300"};const Ee=X.filter(fe=>fe.cumplida).length,Be=Math.round(Ee/X.length*100),je=Be<40?"bg-red-500":Be<75?"bg-yellow-500":"bg-green-500";return{percent:Be,color:je}},[l.metasProgreso]),W=w.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const X=new Date(l.fechaActualizacionApoyos),Ee=new Date;return Ee.setMonth(Ee.getMonth()-3),X<Ee},[l.fechaActualizacionApoyos]),Z=()=>{if(!v.titulo.trim()||!v.fecha)return;const X={...v,id:crypto.randomUUID(),resuelta:!1};c(Ee=>({...Ee,alertas:[...Ee.alertas||[],X].sort((Be,je)=>new Date(Be.fecha).getTime()-new Date(je.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},V=X=>{c(Ee=>({...Ee,alertas:(Ee.alertas||[]).map(Be=>Be.id===X?{...Be,resuelta:!Be.resuelta}:Be)}))},Y=X=>{c(Ee=>({...Ee,alertas:(Ee.alertas||[]).filter(Be=>Be.id!==X)}))},R=X=>{X.target.files&&X.target.files[0]&&C(X.target.files[0])},O=()=>{if(!N)return;j(!0);const X=new FileReader;X.readAsDataURL(N),X.onloadend=()=>{const Ee={id:crypto.randomUUID(),nombre:N.name,url:X.result,fechaSubida:new Date().toISOString()};c(Be=>({...Be,archivos:[Ee,...Be.archivos||[]]})),C(null),j(!1)},X.onerror=()=>{alert("Error al leer el archivo."),j(!1)}},K=X=>{window.confirm("Eliminar este archivo?")&&c(Ee=>({...Ee,archivos:(Ee.archivos||[]).filter(Be=>Be.id!==X)}))},J=()=>{if(!T.motivo.trim()||!T.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const X={...T,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(Ee=>({...Ee,reuniones:[X,...Ee.reuniones||[]].sort((Be,je)=>new Date(je.fecha).getTime()-new Date(Be.fecha).getTime())})),k(I)},ce=X=>{window.confirm("Eliminar este registro de reunin?")&&c(Ee=>({...Ee,reuniones:(Ee.reuniones||[]).filter(Be=>Be.id!==X)}))},oe=()=>{var ne,de,me;const X=new Tr("p","mm","a4"),Ee=20,Be=X.internal.pageSize.getWidth(),je=X.internal.pageSize.getHeight();let fe=Ee;const ye=ge=>{ge.setFontSize(10),ge.setTextColor(100),ge.text("Ficha de Seguimiento - Mdulo Inclusin",Ee,15)};ye(X),X.setFontSize(18),X.setFont("helvetica","bold"),X.setTextColor(40),X.text(l.nombre,Ee,fe+10),fe+=15,X.setFontSize(11),X.setFont("helvetica","normal"),X.setTextColor(80),X.text(`Curso: ${l.curso}`,Ee,fe),X.text(`Dificultad: ${l.dificultad}`,Ee,fe+6),fe+=15;const Ae=ge=>{fe+ge>je-Ee&&(X.addPage(),ye(X),fe=Ee)},se=ge=>{Ae(15),X.setFontSize(14),X.setFont("helvetica","bold"),X.text(ge,Ee,fe),fe+=10};if((ne=l.intervenciones)!=null&&ne.length&&(se("Historial de Intervenciones"),Li(X,{startY:fe,head:[["Fecha","Responsable","Accin","Observaciones"]],body:l.intervenciones.map(ge=>[new Date(ge.fecha).toLocaleDateString("es-CL"),ge.responsable,ge.accion,ge.observaciones||""]),theme:"grid",didDrawPage:()=>ye(X)}),fe=X.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){Ae(30),se("Seguimiento y Apoyos"),X.setFontSize(11),X.setFont("helvetica","normal");const ge=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,Te=X.splitTextToSize(ge,Be-Ee*2);X.text(Te,Ee,fe),fe+=Te.length*5+10}(de=l.metasProgreso)!=null&&de.length&&(Ae(30),se("Metas de Progreso"),Li(X,{startY:fe,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map(ge=>[ge.trimestre,ge.meta,ge.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>ye(X)}),fe=X.lastAutoTable.finalY+10),(me=l.reuniones)!=null&&me.length&&(se("Reuniones con Apoderados"),Li(X,{startY:fe,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map(ge=>[new Date(ge.fecha).toLocaleDateString("es-CL"),ge.motivo,ge.acuerdos||"",ge.asistentes]),theme:"grid",didDrawPage:()=>ye(X)})),X.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},re=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervencin":"Registrar Nueva Intervencin"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviar notificacin automtica)"]}),i.jsxs("select",{value:A.responsable,onChange:X=>m(Ee=>({...Ee,responsable:X.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(X=>i.jsx("option",{value:X,children:X},X))]}),A.responsable&&!u&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:[" Se enviar una notificacin a ",A.responsable," cuando se guarde la intervencin"]})]}),i.jsx("textarea",{value:A.accion,onChange:X=>m(Ee=>({...Ee,accion:X.target.value})),placeholder:"Accin realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:A.observaciones,onChange:X=>m(Ee=>({...Ee,observaciones:X.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[u&&i.jsx("button",{onClick:()=>{d(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edicin"}),i.jsx("button",{onClick:M,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!A.responsable||!A.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(X=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:X.accion}),X.observaciones&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:X.observaciones}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(X.fecha).toLocaleString("es-CL")," - ",X.responsable]}),i.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:" Notificado"})]})]}),i.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[i.jsx("button",{onClick:()=>P(X),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervencin",children:""}),i.jsx("button",{onClick:()=>S(X.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervencin",children:""})]})]})},X.id)),(!l.intervenciones||l.intervenciones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"No hay intervenciones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera intervencin arriba"})]})]})]}),ue=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),W&&i.jsx("span",{title:"Informacin no actualizada en los ltimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),i.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),i.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",z.percent,"%"]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:i.jsx("div",{className:`${z.color} h-4 rounded-full transition-all duration-500`,style:{width:`${z.percent}%`}})})]}),i.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[i.jsxs("select",{value:g.trimestre,onChange:X=>x(Ee=>({...Ee,trimestre:X.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"T1",children:"T1"}),i.jsx("option",{value:"T2",children:"T2"}),i.jsx("option",{value:"T3",children:"T3"})]}),i.jsx("input",{value:g.meta,onChange:X=>x(Ee=>({...Ee,meta:X.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:U,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),i.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(X=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[i.jsx("input",{type:"checkbox",checked:X.cumplida,onChange:()=>q(X.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${X.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[i.jsxs("strong",{children:[X.trimestre,":"]})," ",X.meta]}),i.jsx("button",{onClick:()=>H(X.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:""})]},X.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No hay metas definidas"}),i.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),le=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),i.jsx("input",{type:"text",value:v.titulo,onChange:X=>y(Ee=>({...Ee,titulo:X.target.value})),placeholder:"Ttulo de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:X=>y(Ee=>({...Ee,fecha:X.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("button",{onClick:Z,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(X=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsx("input",{type:"checkbox",checked:X.resuelta,onChange:()=>V(X.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${X.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[X.titulo," (",new Date(X.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),i.jsx("button",{onClick:()=>Y(X.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:""})]},X.id)),(!l.alertas||l.alertas.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No hay alertas programadas"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),i.jsx("input",{type:"file",onChange:R,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),i.jsx("button",{onClick:O,disabled:!N||_,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:_?"Subiendo...":"Subir"}),N&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",N.name]})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(X=>i.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsxs("a",{href:X.url,download:X.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:X.nombre,children:[" ",X.nombre]}),i.jsx("button",{onClick:()=>K(X.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:""})]},X.id)),(!l.archivos||l.archivos.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),ve=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunin"}),i.jsx("input",{value:T.motivo,onChange:X=>k(Ee=>({...Ee,motivo:X.target.value})),placeholder:"Motivo de la reunin...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:T.acuerdos,onChange:X=>k(Ee=>({...Ee,acuerdos:X.target.value})),placeholder:"Acuerdos tomados en la reunin...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{value:T.asistentes,onChange:X=>k(Ee=>({...Ee,asistentes:X.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"text-right",children:i.jsx("button",{onClick:J,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!T.motivo.trim()||!T.asistentes.trim(),children:"Guardar Reunin"})})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(X=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:X.motivo}),X.acuerdos&&i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[i.jsx("strong",{children:"Acuerdos:"})," ",X.acuerdos]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(X.fecha).toLocaleString("es-CL")," - Asistentes: ",X.asistentes]})]}),i.jsx("button",{onClick:()=>ce(X.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunin",children:""})]})},X.id)),(!l.reuniones||l.reuniones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"No hay reuniones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera reunin con apoderados"})]})]})]});return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:X=>X.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:oe,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:" Exportar PDF"}),i.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:""})]})]}),i.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:i.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(X=>i.jsx("button",{onClick:()=>o(X),className:`${s===X?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:X==="alertas"?"Alertas y Archivos":X==="seguimiento"?"Seguimiento y Metas":X},X))})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&re(),s==="seguimiento"&&ue(),s==="reuniones"&&ve(),s==="alertas"&&le()]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),i.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},BZ=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState([]),[s,o]=w.useState(!0),[l,c]=w.useState(null),[u,d]=w.useState(null),[f,A]=w.useState(""),[m,g]=w.useState(""),[x,v]=w.useState(""),[y,N]=w.useState("dashboard");w.useEffect(()=>{o(!0);const M=Slt(S=>{r(S),o(!1)}),P=_lt(S=>a(S));return()=>{M(),P()}},[]);const C=async(M,P)=>{if(t.some(L=>L.nombre===M.nombreCompleto)){alert("Este estudiante ya est en el programa de inclusin.");return}const S={nombre:M.nombreCompleto,curso:M.curso||"",dificultad:P,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await Tlt(S),alert(` ${M.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(L){console.error("Error al agregar estudiante:",L),alert("Hubo un error al agregar al estudiante al programa.")}},_=async M=>{try{await Blt(M.id,M)}catch(P){console.error("Error al actualizar la ficha:",P),alert("Hubo un error al guardar los cambios en la ficha.")}},j=async M=>{if(window.confirm("Est seguro de que desea eliminar a este estudiante del programa de inclusin? Esta accin es irreversible."))try{await Ilt(M),(l==null?void 0:l.id)===M&&c(null),alert(" Estudiante eliminado del programa PIE")}catch(P){console.error("Error al eliminar estudiante:",P),alert("Hubo un error al eliminar al estudiante.")}},I=M=>{const P=k;if(P.length===0){alert("No hay datos para exportar.");return}const S=P.map(L=>{var U;return{Nombre:L.nombre,Curso:L.curso,Dificultad:L.dificultad,"N Intervenciones":((U=L.intervenciones)==null?void 0:U.length)||0,"Alertas Pendientes":(L.alertas||[]).filter(q=>!q.resuelta).length,"Metas Cumplidas":(L.metasProgreso||[]).filter(q=>q.cumplida).length,"Total Metas":(L.metasProgreso||[]).length,"ltima Actualizacin":L.fechaActualizacionApoyos?new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(M==="xlsx"){const L=Ws.json_to_sheet(S),U=Ws.book_new();Ws.book_append_sheet(U,L,"Estudiantes_Inclusion"),_y(U,"Estudiantes_Inclusion.xlsx"),alert(" Archivo Excel exportado exitosamente")}else{const L=new Tr;L.text("Listado de Estudiantes - Programa de Inclusin",14,15),Li(L,{startY:20,head:[Object.keys(S[0])],body:S.map(Object.values)}),L.save("Estudiantes_Inclusion.pdf"),alert(" Archivo PDF exportado exitosamente")}},T=w.useMemo(()=>n.filter(M=>{var P;return M.profile===Ot.ESTUDIANTE&&(((P=e.cursos)==null?void 0:P.includes(M.curso||""))||e.profile===Ot.SUBDIRECCION)}).filter(M=>!t.some(P=>P.nombre===M.nombreCompleto)),[n,t,e]),k=w.useMemo(()=>t.filter(M=>M.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||M.curso===m)&&(x===""||M.dificultad===x)).sort((M,P)=>M.nombre.localeCompare(P.nombre)),[t,f,m,x]),B=w.useMemo(()=>n.filter(M=>M.profile===Ot.PROFESORADO).map(M=>M.nombreCompleto).sort(),[n]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusin Escolar (PIE)"}),i.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>N("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Dashboard"}),i.jsx("button",{onClick:()=>N("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Lista de Estudiantes"})]})]}),s?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):i.jsxs(i.Fragment,{children:[y==="dashboard"&&i.jsxs("div",{className:"space-y-8",children:[i.jsx(Dlt,{estudiantes:t}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),i.jsx("button",{onClick:()=>N("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos "})]}),i.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(M=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:M.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[M.curso," - ",M.dificultad]})]}),i.jsx("button",{onClick:()=>c(M),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},M.id)),t.length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),i.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nmina"})]})]})]}),i.jsx(TZ,{estudiantesDisponibles:T,onSelect:M=>d(M)})]})]}),y==="lista"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",k.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:" Excel"}),i.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:" PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),i.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:M=>A(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),i.jsxs("select",{value:m,onChange:M=>g(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),Sa.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnstico"}),i.jsxs("select",{value:x,onChange:M=>v(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas las Dificultades"}),$5.map(M=>i.jsx("option",{value:M,children:M},M))]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-blue-600",children:k.length}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-green-600",children:t.length}),i.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((M,P)=>M+(P.alertas||[]).filter(S=>!S.resuelta).length,0)}),i.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(M=>M.curso)).size}),i.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[k.map(M=>{var P;return i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:M.nombre}),(M.alertas||[]).filter(S=>!S.resuelta).length>0&&i.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(M.alertas||[]).filter(S=>!S.resuelta).length," alertas"]})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[M.curso," - ",M.dificultad]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[i.jsxs("span",{children:[((P=M.intervenciones)==null?void 0:P.length)||0," intervenciones"]}),i.jsxs("span",{children:[(M.metasProgreso||[]).filter(S=>S.cumplida).length," metas cumplidas"]}),M.fechaActualizacionApoyos&&i.jsxs("span",{children:["lt. actualizacin: ",new Date(M.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>c(M),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),i.jsx("button",{onClick:()=>j(M.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:""})]})]})},M.id)}),k.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&i.jsx("button",{onClick:()=>{A(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),i.jsx(TZ,{estudiantesDisponibles:T,onSelect:M=>d(M)})]})]}),u&&i.jsx(Olt,{student:u,onClose:()=>d(null),onConfirm:(M,P)=>{C(M,P),d(null)}}),l&&i.jsx(Plt,{student:l,onClose:()=>c(null),onSave:_,profesores:B})]})},lL="asistencia_dual",IZ=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},Flt=(e,t)=>{var l;const r=(l=ua.currentUser)==null?void 0:l.uid,n=[],a=new Map,s=()=>t(Array.from(a.values())),o=Lt(pt(xr,lL),ur("emailEstudiante","==",e),tr("fechaHora","desc"));if(n.push(hr(o,c=>{c.docs.forEach(u=>a.set(u.id,IZ(u))),s()},c=>{(c==null?void 0:c.code)!=="permission-denied"&&console.error("Error subscribing to personal attendance (email):",c)})),r){const c=Lt(pt(xr,lL),ur("estudianteId","==",r),tr("fechaHora","desc"));n.push(hr(c,u=>{u.docs.forEach(d=>a.set(d.id,IZ(d))),s()},u=>{(u==null?void 0:u.code)!=="permission-denied"&&console.error("Error subscribing to personal attendance (uid):",u)}))}return()=>n.forEach(c=>c())},Rlt=async e=>{try{const t={...e,fechaHora:wr.fromDate(new Date(e.fechaHora))};await dn(pt(xr,lL),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},Llt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),Mlt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),Ult=({currentUser:e})=>{const[t,r]=w.useState(e.curso||""),[n,a]=w.useState([]),[s,o]=w.useState(!1),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,A]=w.useState(null),[m,g]=w.useState(null),[x,v]=w.useState(()=>{try{return sessionStorage.getItem("geo-requested")==="1"}catch{return!1}});w.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const _=Flt(e.email,j=>{a(j),c(!1)});return()=>_()},[e.email]),w.useEffect(()=>{var j;if(!window.isSecureContext){A("insecure");return}if(!("geolocation"in navigator)){A("unsupported");return}const _=navigator;(j=_==null?void 0:_.permissions)!=null&&j.query?_.permissions.query({name:"geolocation"}).then(I=>{const T=()=>{const k=I.state;A(k==="denied"&&!x?"prompt":k)};T(),I.onchange=T}).catch(()=>A(null)):A(null)},[x]);const y={enableHighAccuracy:!0,timeout:15e3,maximumAge:0},N=w.useCallback(()=>{if(o(!0),d(null),!window.isSecureContext){A("insecure"),d({text:"El sitio no est en un contexto seguro (HTTPS). La ubicacin est bloqueada por el navegador.",type:"error"}),o(!1);return}if(!("geolocation"in navigator)){A("unsupported"),d({text:"Tu navegador no soporta geolocalizacin.",type:"error"}),o(!1);return}try{sessionStorage.setItem("geo-requested","1")}catch{}v(!0),navigator.geolocation.getCurrentPosition(_=>{A("granted"),g(typeof _.coords.accuracy=="number"?_.coords.accuracy:null),d({text:"Ubicacin habilitada. Ya puedes marcar tu asistencia.",type:"success"}),o(!1)},_=>{let j="No se pudo obtener la ubicacin.";_.code===_.PERMISSION_DENIED?(A("denied"),j="Permiso de ubicacin denegado. Habiltalo en la configuracin del navegador."):_.code===_.POSITION_UNAVAILABLE?j="La informacin de ubicacin no est disponible. Revisa tu conexin y GPS.":_.code===_.TIMEOUT&&(j="La solicitud de ubicacin expir. Intntalo de nuevo con mejor seal."),d({text:j,type:"error"}),o(!1)},y)},[]),C=_=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}if(f==="insecure"){d({text:"La ubicacin est bloqueada porque el sitio no est bajo HTTPS.",type:"error"});return}if(f==="unsupported"){d({text:"Tu navegador no soporta geolocalizacin.",type:"error"});return}if(f==="denied"&&!x){try{sessionStorage.setItem("geo-requested","1")}catch{}v(!0)}o(!0),d(null),navigator.geolocation.getCurrentPosition(async j=>{const I={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:_,fechaHora:new Date().toISOString(),ubicacion:{latitud:j.coords.latitude,longitud:j.coords.longitude,precision:typeof j.coords.accuracy=="number"?j.coords.accuracy:void 0}};try{await Rlt(I),d({text:`Marca de ${_} registrada con xito!`,type:"success"}),g(typeof j.coords.accuracy=="number"?j.coords.accuracy:null)}catch(T){console.error("Error saving record to Firestore:",T),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{o(!1)}},j=>{console.error("Geolocation error:",j);let I="No se pudo obtener la ubicacin.";switch(j.code){case j.PERMISSION_DENIED:I="Permiso de ubicacin denegado. Por favor, habilite la ubicacin en su navegador y dispositivo.",A("denied");break;case j.POSITION_UNAVAILABLE:I="La informacin de ubicacin no est disponible en este momento. Verifique su conexin y GPS.";break;case j.TIMEOUT:I="La solicitud de ubicacin ha tardado demasiado. Intntelo de nuevo en un lugar con mejor seal.";break;default:I=`Ocurri un error desconocido al obtener la ubicacin (cdigo: ${j.code}).`;break}d({text:I,type:"error"}),o(!1)},y)};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de prctica."}),f==="insecure"&&i.jsx("div",{className:"mb-4 p-3 rounded-md bg-red-50 text-red-800 border border-red-200",children:"La ubicacin est bloqueada porque el sitio no est bajo HTTPS. Usa la URL segura (https://) o contacta soporte."}),f==="unsupported"&&i.jsx("div",{className:"mb-4 p-3 rounded-md bg-amber-50 text-amber-800 border border-amber-200",children:"Tu navegador no soporta geolocalizacin. Prueba con otro navegador actualizado."}),f==="denied"&&i.jsxs("div",{className:"mb-4 p-3 rounded-md bg-red-50 text-red-800 border border-red-200",children:["Permiso de ubicacin denegado. Habiltalo en los ajustes del navegador:",i.jsxs("ul",{className:"list-disc pl-6 mt-2 text-sm",children:[i.jsxs("li",{children:[i.jsx("b",{children:"Android (Chrome)"}),": Icono de candado  Permisos  Ubicacin  Permitir."]}),i.jsxs("li",{children:[i.jsx("b",{children:"iOS (Safari)"}),": Ajustes  Safari  Ubicacin  Permitir al usar."]})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:N,disabled:s,className:"px-3 py-2 rounded-md bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-400",children:"Reintentar solicitud"}),i.jsx("span",{className:"text-xs text-slate-500",children:"Si no se abre la solicitud, ajusta los permisos del sitio."})]})]}),(f==="prompt"||f===null)&&i.jsxs("div",{className:"mb-4 p-3 rounded-md bg-sky-50 text-sky-800 border border-sky-200 flex items-center justify-between gap-3",children:[i.jsx("div",{children:"Para marcar asistencia, permite el acceso a tu ubicacin."}),i.jsx("button",{type:"button",onClick:N,disabled:s,className:"px-3 py-2 rounded-md bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-400",children:"Habilitar ubicacin"})]}),i.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),i.jsxs("select",{id:"curso",value:t,onChange:_=>r(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Mi curso --"}),hp.map(_=>i.jsx("option",{value:_,children:_},_))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[i.jsx("button",{onClick:()=>C("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),i.jsx("button",{onClick:()=>C("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&i.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("span",{children:"Obteniendo ubicacin..."})]}),m!=null&&!s&&i.jsxs("div",{className:"text-center text-slate-500 text-sm",children:["Precisin GPS ~ ",Math.round(m)," m"]}),u&&i.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(_=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(_.fechaHora).toLocaleString("es-CL")}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${_.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[_.tipo==="Entrada"?i.jsx(Llt,{}):i.jsx(Mlt,{}),_.tipo]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:_.curso})]},_.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},sb=e=>e?typeof e=="string"?new Date(e):e!=null&&e.toDate?e.toDate():e instanceof Date?e:new Date(e):new Date(NaN),Hlt=async()=>{try{console.log(" Debugging users collection...");const e=pt(xr,"usuarios"),t=Lt(e,Fl(10)),r=await Rr(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach(s=>{const o=s.data(),l={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(c=>a.add(c))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(l=>s in l.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},Qlt=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=wr.fromDate(r),s=wr.fromDate(n),o=["asistencia_dual","asistencia_empresa","asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const f of o)try{const A=pt(xr,f);try{const m=Lt(A,ur("fechaHora",">=",a),ur("fechaHora","<=",s)),g=await Rr(m);l[f]={exists:!0,hasDateField:!0,count:g.size,totalDocs:(await Rr(Lt(A,Fl(5)))).size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=Lt(A,ur(v,">=",a),ur(v,"<=",s)),N=await Rr(y);l[f]={exists:!0,hasDateField:v,count:N.size,totalDocs:(await Rr(Lt(A,Fl(5)))).size,sampleDoc:((u=N.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=Lt(A,tr("__name__"),Fl(5)),y=await Rr(v);l[f]={exists:!0,hasDateField:!1,count:y.size,totalDocs:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(A){l[f]={exists:!1,error:A instanceof Error?A.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},Vlt=(e,t,r,n,a)=>{try{const s=new Date(e,t,1);s.setHours(0,0,0,0);const o=new Date(e,t+1,0);o.setHours(23,59,59,999),console.log(` Buscando registros entre: ${s.toISOString()} y ${o.toISOString()}`),console.log(` Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const l=wr.fromDate(s),c=wr.fromDate(o),u=[],d=new Map,f=(a==null?void 0:a.includeAll)===!0,A=(a==null?void 0:a.limit)??1e3,m=()=>{const x=Array.from(d.values());console.log(` Total registros encontrados: ${x.length}`),x.length>0&&console.log(" Registros por da:",x.reduce((v,y)=>{const C=sb(y.fechaHora).getDate();return v[C]=(v[C]||0)+1,v},{})),r(x)};return["asistencia_dual"].forEach(x=>{try{console.log(` Configurando suscripcin para: ${x}`);const v=pt(xr,x);if(f){const C=Lt(v,tr("fechaHora","desc"),Fl(A)),_=hr(C,j=>{console.log(` ${x} (histrico): ${j.size} documentos`),Array.from(d.keys()).filter(T=>T.startsWith(`${x}_`)).forEach(T=>d.delete(T)),j.forEach(T=>{const k=T.data(),B=sb(k.fechaHora),M=isNaN(B.getTime())?new Date().toISOString():B.toISOString(),P={id:T.id,emailEstudiante:k.emailEstudiante||k.email||"",nombreEstudiante:k.nombreEstudiante||k.nombre||"",curso:k.curso||"",fechaHora:M,tipo:k.tipo||"Entrada",ubicacion:k.ubicacion||{latitud:null,longitud:null},origen:x},S=`${x}_${T.id}`;d.set(S,P)}),m()},j=>{console.warn(` Error en histrico ${x} con orderBy fechaHora:`,j);const I=Lt(v,Fl(A)),T=hr(I,k=>{console.log(` ${x} (histrico sin orderBy): ${k.size} documentos`),Array.from(d.keys()).filter(M=>M.startsWith(`${x}_`)).forEach(M=>d.delete(M)),k.forEach(M=>{const P=M.data(),S=sb(P.fechaHora),L=isNaN(S.getTime())?new Date().toISOString():S.toISOString(),U={id:M.id,emailEstudiante:P.emailEstudiante||P.email||"",nombreEstudiante:P.nombreEstudiante||P.nombre||"",curso:P.curso||"",fechaHora:L,tipo:P.tipo||"Entrada",ubicacion:P.ubicacion||{latitud:null,longitud:null},origen:x},q=`${x}_${M.id}`;d.set(q,U)}),m()});u.push(T)});u.push(_);return}const y=Lt(v,ur("fechaHora",">=",l),ur("fechaHora","<=",c),tr("fechaHora","desc")),N=hr(y,C=>{console.log(` ${x}: ${C.size} documentos encontrados con filtro`),C.size>0?(console.log(` Registros encontrados en ${x}:`),Array.from(d.keys()).filter(j=>j.startsWith(`${x}_`)).forEach(j=>d.delete(j)),C.docs.forEach((j,I)=>{var T;if(I<5){const k=j.data();let B;(T=k.fechaHora)!=null&&T.toDate?B=k.fechaHora.toDate():typeof k.fechaHora=="string"?B=new Date(k.fechaHora):B=new Date,console.log(`   ${I+1}. ${k.emailEstudiante} - ${B.toLocaleString()} - ${k.tipo}`),console.log(`       Fecha original: ${k.fechaHora} (tipo: ${typeof k.fechaHora})`)}}),C.forEach(j=>{const I=j.data(),T=sb(I.fechaHora),k=isNaN(T.getTime())?new Date().toISOString():T.toISOString(),B={id:j.id,emailEstudiante:I.emailEstudiante||I.email||"",nombreEstudiante:I.nombreEstudiante||I.nombre||"",curso:I.curso||"",fechaHora:k,tipo:I.tipo||"Entrada",ubicacion:I.ubicacion||{latitud:null,longitud:null},origen:x},M=`${x}_${j.id}`;d.set(M,B)}),m()):(console.log(` ${x}: sin registros en el perodo, limpiando y notificando vaco`),Array.from(d.keys()).filter(j=>j.startsWith(`${x}_`)).forEach(j=>d.delete(j)),m())},C=>{console.warn(` Error con filtro en ${x}:`,C),console.log(` Intentando estrategia alternativa en ${x}...`);const _=Lt(v,Fl(A)),j=hr(_,T=>{if(console.log(` ${x} (sin filtro): ${T.size} documentos`),T.size>0){const M=T.docs[0].data();console.log(` Estructura en ${x}:`,Object.keys(M)),console.log(" Primer documento:",M)}const k=T.docs.filter(M=>{const P=M.data();if(!P.fechaHora)return!1;const S=sb(P.fechaHora);return S>=s&&S<=o});console.log(` ${x}: ${k.length} registros despus de filtro manual`),Array.from(d.keys()).filter(M=>M.startsWith(`${x}_`)).forEach(M=>d.delete(M)),k.length>0&&k.forEach(M=>{const P=M.data(),S=sb(P.fechaHora),L=isNaN(S.getTime())?new Date().toISOString():S.toISOString(),U={id:M.id,emailEstudiante:P.emailEstudiante||P.email||"",nombreEstudiante:P.nombreEstudiante||P.nombre||"",curso:P.curso||"",fechaHora:L,tipo:P.tipo||"Entrada",ubicacion:P.ubicacion||null},q=`${x}_${M.id}`;d.set(q,U)}),m()}),I=u.findIndex(T=>T===N);I>=0?u[I]=j:u.push(j)});u.push(N)}catch(v){console.warn(` Error configurando ${x}:`,v)}}),()=>{u.forEach(x=>{try{x()}catch(v){console.warn("Error unsubscribing:",v)}})}}catch(s){return console.error("Error setting up subscribeToAsistenciaByMonth:",s),n&&n(new Error(`Error al configurar suscripcin: ${s instanceof Error?s.message:"Error desconocido"}`)),()=>{}}},$lt=(e,t)=>{try{console.log(" Buscando usuarios en mltiples colecciones...");const r=["usuarios"],n=[],a=new Map,s=()=>{const l=Array.from(a.values());console.log(` Total usuarios encontrados: ${l.length}`);const c=l.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log(" Usuarios por perfil:",c);const u=l.filter(d=>d.profile===Ot.ESTUDIANTE);console.log(` Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(l)};let o=!1;return r.forEach(l=>{try{const c=pt(xr,l),u=Lt(c),d=hr(u,f=>{Array.from(a.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>a.delete(m)),f.size>0?(console.log(` Encontrados ${f.size} usuarios en coleccin: ${l}`),o=!0,f.forEach(m=>{try{const g=m.data(),x=g.email||g.userEmail||g.mail||g.correo||"",v=g.nombreCompleto||g.displayName||g.name||g.nombre||g.fullName||"",y=g.curso||g.course||g.class||g.grade||"";let N=g.profile||g.role||g.tipo||g.userType||Ot.ESTUDIANTE;if(typeof N=="string"){const j=N.toLowerCase();j.includes("estudiante")||j.includes("student")||j.includes("alumno")?N=Ot.ESTUDIANTE:j.includes("coordinador")||j.includes("coordinator")?N=Ot.COORDINACION_TP:j.includes("profesor")||j.includes("teacher")||j.includes("docente")?N=Ot.PROFESORADO:(j.includes("subdireccion")||j.includes("subdir"))&&(N=Ot.COORDINACION_TP)}const C={id:m.id,email:x,nombreCompleto:v,curso:y,profile:N},_=`${l}_${m.id}`;a.set(_,C)}catch(g){console.warn(`Error procesando documento ${m.id} en ${l}:`,g)}})):console.log(` Coleccin ${l}: vaca`),s()},f=>{console.warn(` Error en coleccin ${l}:`,f)});n.push(d)}catch(c){console.warn(` Error configurando ${l}:`,c)}}),setTimeout(()=>{o||(console.error(" No se encontraron usuarios en ninguna coleccin"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripcin multi-coleccin: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},zlt=(e,t)=>{try{console.log("Setting up users subscription...");const r=pt(xr,"usuarios"),n=Lt(r);return hr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const o=[];s.forEach(d=>{try{const f=d.data();console.log(`Processing user doc ${d.id}:`,f);const A=f.email||f.userEmail||f.mail||"",m=f.nombreCompleto||f.displayName||f.name||f.nombre||"",g=f.curso||f.course||f.class||"";let x=f.profile||f.role||f.tipo||Ot.ESTUDIANTE;if(typeof x=="string"){const y=x.toLowerCase();y.includes("estudiante")||y.includes("student")||y.includes("alumno")?x=Ot.ESTUDIANTE:y.includes("coordinador")||y.includes("coordinator")?x=Ot.COORDINACION_TP:y.includes("profesor")||y.includes("teacher")||y.includes("docente")?x=Ot.PROFESORADO:(y.includes("subdireccion")||y.includes("subdir"))&&(x=Ot.COORDINACION_TP)}const v={id:d.id,email:A,nombreCompleto:m,curso:g,profile:x};o.push(v)}catch(f){console.warn(`Error processing user document ${d.id}:`,f)}}),o.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${o.length} users successfully`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",l);const c=o.filter(d=>d.profile===Ot.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(o)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripcin de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},Z_="empresas_practicas",cL="usuarios",tH="rutas_supervision",DT=e=>{const t=e.data();return{id:e.id,...t}};async function Glt(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificacin:",n),null}}const cme=e=>{const t=Lt(pt(dt,Z_),tr("nombre","asc"));return hr(t,r=>{const n=r.docs.map(a=>DT(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},Yw=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await Glt(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=er(dt,Z_,n);return await yi(s,a,{merge:!0}),n}else return(await dn(pt(dt,Z_),{...r,createdAt:Xn()})).id},qlt=async e=>{const t=er(dt,Z_,e);await fa(t)},Klt=e=>{const t=Lt(pt(dt,cL),ur("profile","==",Ot.ESTUDIANTE),tr("nombreCompleto","asc"));return hr(t,r=>{const n=r.docs.map(a=>DT(a));e(n)},r=>console.error("Error al suscribirse a estudiantes:",r))},Wlt=e=>{const t=Lt(pt(dt,cL),ur("profile","==",Ot.PROFESORADO),tr("nombreCompleto","asc")),r=Lt(pt(dt,cL),ur("profile","==",Ot.COORDINACION_TP),tr("nombreCompleto","asc")),n=new Map,a=()=>{const c=Array.from(n.values()).sort((u,d)=>(u.nombreCompleto||"").localeCompare(d.nombreCompleto||"","es"));e(c)},s=c=>{c.docChanges().forEach(u=>{const d=u.doc.id;u.type==="removed"?n.delete(d):n.set(d,DT(u.doc))}),a()},o=hr(t,s,c=>console.error("Error al suscribirse a profesores:",c)),l=hr(r,s,c=>console.error("Error al suscribirse a coordinacin:",c));return()=>{o(),l()}},Xlt=async e=>(await dn(pt(dt,tH),{...e,createdAt:Xn()})).id,Ylt=e=>{const t=Lt(pt(dt,tH),tr("createdAt","desc"));return hr(t,r=>{const n=r.docs.map(a=>DT(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},Jlt=async e=>{const t=er(dt,tH,e);await fa(t)},Pk=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},Zlt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),ect=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),tct=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null),[d,f]=w.useState(new Date),[A,m]=w.useState("todos"),[g,x]=w.useState(""),[v,y]=w.useState(!1),{currentUser:N}=jE(),C=oe=>`asistenciaDual.threshold.${oe||"default"}`,[_,j]=w.useState(()=>{try{const oe=localStorage.getItem(C(null)),re=oe?parseInt(oe,10):NaN;return Number.isFinite(re)&&re>0?re:200}catch{return 200}});w.useEffect(()=>{try{const oe=C(N==null?void 0:N.email),re=localStorage.getItem(oe);if(re){const ue=parseInt(re,10);Number.isFinite(ue)&&ue>0&&j(ue)}}catch{}},[N==null?void 0:N.email]),w.useEffect(()=>{try{const oe=C(N==null?void 0:N.email);localStorage.setItem(oe,String(_))}catch{}},[_,N==null?void 0:N.email]);const[I,T]=w.useState("tabla");w.useEffect(()=>{l(!0),u(null);const oe=d.getFullYear(),re=d.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Ao:",oe,"Mes:",re);let ue=!1,le=!1;const ve=()=>{ue&&le&&(console.log("=== CARGA COMPLETA ==="),l(!1))};(async()=>{console.log(" INICIANDO PRUEBA DIRECTA SIMPLE...");try{const Ee=pt(xr,"asistencia_dual"),Be=Lt(Ee,Fl(5)),je=await Rr(Be);if(console.log(` asistencia_dual - Documentos encontrados: ${je.size}`),je.size>0)je.docs.forEach((fe,ye)=>{const Ae=fe.data();console.log(`   ${ye+1}. ${fe.id.slice(0,8)} - ${Ae.emailEstudiante} - ${Ae.tipo}`),console.log("      Fecha original:",Ae.fechaHora),console.log("      Todos los campos:",Object.keys(Ae))});else{console.log(" No se encontraron documentos en asistencia_dual");const fe=["asistenciaEmpresa","asistencia_empresa"];for(const ye of fe)try{const Ae=pt(xr,ye),se=Lt(Ae,Fl(3)),ne=await Rr(se);if(console.log(` ${ye}: ${ne.size} documentos`),ne.size>0){const de=ne.docs[0].data();console.log("   Estructura:",Object.keys(de)),console.log("   Email:",de.emailEstudiante||de.email),console.log("   Fecha:",de.fechaHora||de.fecha)}}catch(Ae){console.log(` ${ye}: ${Ae instanceof Error?Ae.message:"Error"}`)}}}catch(Ee){console.error(" Error en prueba directa:",Ee),Ee.code==="permission-denied"?(console.log(" PROBLEMA: Permisos de Firestore denegados"),console.log(" Ve a Firebase Console  Firestore  Rules y verifica los permisos")):Ee.code==="failed-precondition"&&(console.log(" PROBLEMA: Faltan ndices en Firestore"),console.log(" Ve a Firebase Console  Firestore  Indexes"))}})(),Qlt(oe,re).then(Ee=>{console.log(" Debug info for collections:",Ee),Object.entries(Ee).forEach(([Be,je])=>{if(je.exists&&je.totalDocs>0){if(console.log(`
 COLECCIN ${Be.toUpperCase()}:`),console.log(`    Total documentos: ${je.totalDocs}`),console.log(`    Documentos del perodo: ${je.count}`),console.log(`    Campo de fecha: ${je.hasDateField}`),je.sampleDoc){console.log("    Documento ejemplo:",je.sampleDoc);const fe=je.sampleDoc,ye=fe.emailEstudiante||fe.email||fe.userEmail||fe.correo||"NO ENCONTRADO",Ae=fe.tipo||fe.type||fe.action||fe.tipoRegistro||"NO ENCONTRADO",se=fe.fechaHora||fe.fecha||fe.timestamp||fe.createdAt||"NO ENCONTRADO";console.log(`    Email estudiante: ${ye}`),console.log(`    Tipo registro: ${Ae}`),console.log(`    Fecha: ${se}`),console.log("    Todos los campos:",Object.keys(fe))}je.filteredDocs&&je.filteredDocs.length>0&&(console.log("    Registros del perodo encontrados:",je.filteredDocs.length),je.filteredDocs.forEach((fe,ye)=>{ye<3&&console.log(`      ${ye+1}. ID: ${fe.id}`,fe.data)}))}else je.exists?console.log(` Coleccin ${Be}: vaca`):console.log(` Coleccin ${Be}: no existe`)})}).catch(Ee=>{console.error("Debug error:",Ee)}),Hlt().then(Ee=>{console.log(" Debug info for users:",Ee),(!Ee.exists||"totalDocs"in Ee&&Ee.totalDocs===0)&&(console.log(' Coleccin "users" vaca o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async je=>{var fe;try{const ye=pt(xr,je),Ae=Lt(ye,Fl(5)),se=await Rr(Ae);se.size>0?(console.log(` Encontrada coleccin alternativa: ${je} con ${se.size} documentos`),console.log("Documento muestra:",(fe=se.docs[0])==null?void 0:fe.data())):console.log(` Coleccin ${je}: vaca`)}catch{console.log(` Coleccin ${je}: no existe`)}}))}).catch(Ee=>{console.error("Users debug error:",Ee)});try{console.log("Configurando suscripcin a asistencia...");let Ee=Vlt(oe,re,fe=>{if(console.log(" Received registros:",fe.length),fe.length>0){console.log(" ANLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",fe[0]);const ye=[...new Set(fe.map(ge=>ge.emailEstudiante).filter(Boolean))];console.log(" Emails de estudiantes en registros:",ye);const Ae=[...new Set(fe.map(ge=>ge.tipo).filter(Boolean))];console.log(" Tipos de registro encontrados:",Ae);const se=fe.reduce((ge,Te)=>{const Ve=new Date(Te.fechaHora).getDate();return ge[Ve]||(ge[Ve]=[]),ge[Ve].push(Te),ge},{});console.log(" Registros por da del mes:",Object.keys(se).map(ge=>({dia:parseInt(ge),cantidad:se[parseInt(ge)].length})));const ne=r.map(ge=>ge.email).filter(Boolean);console.log(" Emails de estudiantes cargados:",ne);const de=ye.filter(ge=>ne.includes(ge)),me=ye.filter(ge=>!ne.includes(ge));console.log(" Emails que coinciden:",de),console.log(" Emails que NO coinciden:",me)}else console.log(" No se encontraron registros de asistencia para el perodo");t(fe),ue=!0,ve()},fe=>{console.error(" Error fetching asistencia:",fe),u("Error al cargar datos de asistencia: "+fe.message),ue=!0,ve()},{includeAll:v});console.log("Configurando suscripcin a usuarios...");let Be=null,je=null;return Be=$lt(fe=>{if(console.log(" Received users (multi-collection):",fe.length),fe.length>0){console.log("Sample user:",fe[0]);const ye=fe.filter(Ae=>Ae.profile===Ot.ESTUDIANTE&&Ae.curso);console.log("Dual students found:",ye.length),ye.forEach(Ae=>{console.log(`- ${Ae.nombreCompleto} (${Ae.curso}) - ${Ae.email}`)})}n(fe),le=!0,ve()},fe=>{console.error(" Error fetching users (multi-collection):",fe),console.log(" Intentando con funcin original de usuarios..."),je=zlt(ye=>{console.log(" Received users (fallback):",ye.length),n(ye),le=!0,ve()},ye=>{console.error(" Error en fallback tambin:",ye),u("Error al cargar estudiantes: "+fe.message),le=!0,ve()})}),setTimeout(async()=>{if(!le&&r.length===0)try{console.log(" Timeout de usuarios: aplicando fallback getAllUsersFromAlt()...");const fe=await pv();fe.length>0?(console.log(` Fallback carg ${fe.length} usuarios desde coleccin "usuarios"`),n(fe),le=!0,ve()):(console.warn(' Fallback no encontr usuarios en "usuarios"'),le=!0,ve())}catch(fe){console.error(" Error en fallback getAllUsersFromAlt:",fe),le=!0,ve()}},4e3),()=>{console.log("Limpiando suscripciones..."),Ee&&Ee(),Be&&Be(),je&&je()}}catch(Ee){console.error(" Error setting up subscriptions:",Ee),u("Error al inicializar conexiones: "+(Ee instanceof Error?Ee.message:"Error desconocido")),l(!1)}},[d,v]),w.useEffect(()=>{const oe=cme(s);return()=>oe&&oe()},[]);const{monthDays:k,monthName:B,year:M}=w.useMemo(()=>{const oe=d.getFullYear(),re=d.getMonth();return{monthDays:new Date(oe,re+1,0).getDate(),monthName:d.toLocaleString("es-CL",{month:"long"}),year:oe}},[d]),P=w.useMemo(()=>{let oe=r.filter(re=>re.profile===Ot.ESTUDIANTE&&re.curso&&hp.includes(Pk(re.curso)));if(A!=="todos"&&(oe=oe.filter(re=>Pk(re.curso||"")===A)),g&&(oe=oe.filter(re=>re.nombreCompleto.toLowerCase().includes(g.toLowerCase()))),e.length>0){const re=[...new Set(e.map(ve=>ve.emailEstudiante).filter(ve=>!!ve))],ue=oe.map(ve=>ve.email),le=re.filter(ve=>!ue.includes(ve));if(le.length>0){console.log(" Agregando estudiantes faltantes con registros:",le);const X=le.map(Ee=>{const Be=e.find(je=>je.emailEstudiante===Ee);return{id:Ee,email:Ee,nombreCompleto:(Be==null?void 0:Be.nombreEstudiante)||Ee.split("@")[0],curso:(Be==null?void 0:Be.curso)||"3C",profile:Ot.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(Ee=>{const Be=A==="todos"||Pk(Ee.curso)===A,je=!g||Ee.nombreCompleto.toLowerCase().includes(g.toLowerCase());return Be&&je&&hp.includes(Pk(Ee.curso))});oe=[...oe,...X]}}return console.log(` Estudiantes filtrados para mostrar: ${oe.length}`),oe.forEach(re=>{console.log(`   - ${re.nombreCompleto} (${re.curso}) - ${re.email}`)}),oe.sort((re,ue)=>re.nombreCompleto.localeCompare(ue.nombreCompleto))},[r,A,g,e]),S=w.useMemo(()=>{console.log(" Procesando datos de asistencia para la tabla..."),console.log(` Total registros a procesar: ${e.length}`),console.log(` Estudiantes disponibles: ${P.length}`);const oe=new Map;return e.length===0?(console.log(" No hay registros para procesar an"),oe):(e.forEach((re,ue)=>{const le=re.emailEstudiante;if(!le)return;let ve;if(re.fechaHora instanceof Date)ve=re.fechaHora;else if(re.fechaHora&&typeof re.fechaHora=="object"&&"toDate"in re.fechaHora)ve=re.fechaHora.toDate();else if(typeof re.fechaHora=="string")ve=new Date(re.fechaHora);else{console.warn("Fecha no vlida en registro:",re);return}const X=ve.getDate(),Ee=ve.getMonth(),Be=ve.getFullYear();ue<3&&console.log(` Registro ${ue+1}:`,{email:le,tipo:re.tipo,fechaOriginal:re.fechaHora,fechaProcesada:ve.toLocaleString(),ao:Be,mes:Ee,da:X}),oe.has(le)||oe.set(le,new Map);const je=oe.get(le);je.has(X)||je.set(X,{});const fe=je.get(X);re.tipo==="Entrada"?(!fe.entrada||ve<new Date(fe.entrada.fechaHora))&&(fe.entrada=re):re.tipo==="Salida"&&(!fe.salida||ve>new Date(fe.salida.fechaHora))&&(fe.salida=re)}),console.log(" Datos de asistencia procesados:",{estudiantesConRegistros:oe.size,estudiantes:Array.from(oe.keys()),registrosPorEstudiante:Array.from(oe.entries()).map(([re,ue])=>({email:re,dias:Array.from(ue.keys()),totalRegistros:Array.from(ue.values()).reduce((le,ve)=>le+(ve.entrada?1:0)+(ve.salida?1:0),0)}))}),oe)},[e]),L=w.useMemo(()=>{if(!e.length)return 0;const oe=d.getFullYear(),re=d.getMonth();return e.reduce((ue,le)=>{let ve=null;return le.fechaHora instanceof Date?ve=le.fechaHora:le.fechaHora&&typeof le.fechaHora=="object"&&"toDate"in le.fechaHora?ve=le.fechaHora.toDate():typeof le.fechaHora=="string"&&(ve=new Date(le.fechaHora)),!ve||isNaN(ve.getTime())?ue:ve.getFullYear()===oe&&ve.getMonth()===re?ue+1:ue},0)},[e,d]),U=oe=>{f(re=>{const ue=new Date(re);return ue.setMonth(ue.getMonth()+oe),ue})},q=oe=>{oe!=null&&oe.latitud&&(oe!=null&&oe.longitud)&&window.open(`https://www.google.com/maps?q=${oe.latitud},${oe.longitud}`,"_blank")},H=["D","L","M","M","J","V","S"],z=w.useMemo(()=>{const oe=new Map;return a.forEach(re=>{(re.estudiantesAsignados||[]).forEach(ue=>{ue&&oe.set(ue,re)})}),oe},[a]),W=(oe,re,ue,le)=>{const ve=ye=>ye*Math.PI/180,Ee=ve(ue-oe),Be=ve(le-re),je=Math.sin(Ee/2)**2+Math.cos(ve(oe))*Math.cos(ve(ue))*Math.sin(Be/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(je),Math.sqrt(1-je)))},Z=oe=>{const re=oe.email,ue=S.get(re),le=z.get(oe.id),ve=le==null?void 0:le.coordenadas;if(!ue||!ve||ve.lat==null||ve.lng==null)return{hasData:!!ue,undetermined:!0,anyDeviation:!1,count:0,max:0};let X=0,Ee=0;for(let Be=1;Be<=k;Be++){const je=ue.get(Be);if(!je)continue;const fe=ye=>{if(!ye||ye.latitud==null||ye.longitud==null)return;const Ae=W(ye.latitud,ye.longitud,ve.lat,ve.lng);Ae>_&&(X+=1),Ae>Ee&&(Ee=Ae)};je.entrada&&fe(je.entrada.ubicacion),je.salida&&fe(je.salida.ubicacion)}return{hasData:!0,undetermined:!1,anyDeviation:X>0,count:X,max:Ee}},[V,Y]=w.useState(()=>{try{return localStorage.getItem("asistenciaDual.onlyDeviations.default")==="1"}catch{return!1}});w.useEffect(()=>{try{const oe=`asistenciaDual.onlyDeviations.${(N==null?void 0:N.email)||"default"}`,re=localStorage.getItem(oe);re!=null&&Y(re==="1")}catch{}},[N==null?void 0:N.email]),w.useEffect(()=>{try{const oe=`asistenciaDual.onlyDeviations.${(N==null?void 0:N.email)||"default"}`;localStorage.setItem(oe,V?"1":"0")}catch{}},[V,N==null?void 0:N.email]);const R=w.useMemo(()=>V?P.filter(oe=>{const re=Z(oe);return re.hasData&&!re.undetermined&&re.anyDeviation}):P,[P,V,S,z,k]),O=w.useMemo(()=>{const oe=R,re=new Set(oe.map(Ae=>Ae.email)),ue=[];for(let Ae=1;Ae<=k;Ae++){let se=0;re.forEach(ne=>{var me;const de=(me=S.get(ne))==null?void 0:me.get(Ae);de!=null&&de.entrada&&(se+=1)}),ue.push({day:Ae,entradas:se})}const le={0:0,1:0,2:0,3:0,4:0,5:0,6:0};ue.forEach(({day:Ae,entradas:se})=>{const de=new Date(M,d.getMonth(),Ae).getDay();le[de]+=se});const ve=[0,1,2,3,4,5,6].map(Ae=>({nombre:H[Ae],registros:le[Ae]}));let X=0;oe.forEach(Ae=>{var de;const se=S.get(Ae.email);if(!se)return;let ne=0;for(let me=1;me<=k;me++)(de=se.get(me))!=null&&de.entrada&&(ne+=1);X+=ne});const Ee=oe.length?X/oe.length:0,Be=oe.map(Ae=>{const se=Z(Ae);return{id:Ae.id,nombre:Ae.nombreCompleto,count:se.count,any:se.anyDeviation}}),je=Be.reduce((Ae,se)=>Ae+(se.count||0),0),fe=Be.filter(Ae=>Ae.count>0).sort((Ae,se)=>se.count-Ae.count).slice(0,5);let ye=[];if(A==="todos"){const Ae=new Map;oe.forEach(se=>{const ne=se.curso||"";Ae.has(ne)||Ae.set(ne,[]),Ae.get(ne).push(se)}),ye=Array.from(Ae.entries()).map(([se,ne])=>{let de=0;ne.forEach(ge=>{var Xe;const Te=S.get(ge.email);if(!Te)return;let Ve=0;for(let Ke=1;Ke<=k;Ke++)(Xe=Te.get(Ke))!=null&&Xe.entrada&&(Ve+=1);de+=Ve});const me=ne.length?de/ne.length:0;return{curso:se,promedioDias:me,estudiantes:ne.length}}).sort((se,ne)=>se.curso.localeCompare(ne.curso,"es"))}return{estudiantesCount:oe.length,dailyEntries:ue,weekdaySeries:ve,avgDiasConEntrada:Ee,totalDesviaciones:je,topDesviadores:fe,porCurso:ye}},[R,S,k,M,d,A]),K=oe=>{if(oe==null)return"";let re=String(oe);const ue=/[",\n]/.test(re);return re=re.replace(/"/g,'""'),ue?`"${re}"`:re},J=(oe,re)=>{const ue=re.map(Ee=>Ee.map(K).join(",")).join(`
`),le=new Blob([ue],{type:"text/csv;charset=utf-8;"}),ve=URL.createObjectURL(le),X=document.createElement("a");X.href=ve,X.setAttribute("download",oe),document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(ve)},ce=()=>{try{const oe=["Estudiante","Curso"];for(let Ee=1;Ee<=k;Ee++)oe.push(String(Ee));oe.push("Ingresos","Salidas","Desv","DesvEventos","DesvMax(m)");const re=[oe];R.forEach(Ee=>{const Be=S.get(Ee.email);let je=0,fe=0;const ye=[];for(let ne=1;ne<=k;ne++){const de=Be==null?void 0:Be.get(ne),me=!!(de!=null&&de.entrada),ge=!!(de!=null&&de.salida);me&&(je+=1),ge&&(fe+=1),me&&ge?ye.push("E/S"):me?ye.push("E"):ge?ye.push("S"):ye.push("")}const Ae=Z(Ee),se=Ae.hasData?Ae.undetermined?"N/D":Ae.anyDeviation?"S":"No":"";re.push([Ee.nombreCompleto||"",Ee.curso||"",...ye,String(je),String(fe),se,Ae.hasData&&!Ae.undetermined?String(Ae.count):"",Ae.hasData&&!Ae.undetermined?String(Math.round(Ae.max)):""])});const le=d.toLocaleString("es-CL",{month:"long"}).normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/\s+/g,"_"),X=`asistencia_dual_${A==="todos"?"Todos":A.replace(/[^A-Za-z0-9]/g,"_")}_${le}_${M}${V?"_solo_desv":""}.csv`;J(X,re)}catch(oe){console.error("Error al exportar CSV:",oe),alert("No se pudo generar el informe. Intenta nuevamente.")}};return c?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:c})}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[i.jsx("button",{onClick:()=>U(-1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors","aria-label":"Mes anterior",children:""}),i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${B} ${M}`}),i.jsx("button",{onClick:()=>U(1),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors","aria-label":"Mes siguiente",children:""})]}),i.jsxs("label",{className:"flex items-center gap-2 justify-center md:justify-start",children:[i.jsx("input",{type:"checkbox",checked:v,onChange:oe=>y(oe.target.checked),disabled:o}),i.jsx("span",{className:"text-slate-700 dark:text-slate-200 text-sm",children:"Mostrar todo"})]}),i.jsxs("select",{value:A,onChange:oe=>m(oe.target.value),disabled:o,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"todos",children:"Todos los Cursos"}),hp.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:g,onChange:oe=>x(oe.target.value),disabled:o,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsxs("div",{className:"text-center md:text-right text-sm text-slate-600 dark:text-slate-300",children:[i.jsxs("span",{className:"inline-block px-2 py-1 rounded bg-slate-100 dark:bg-slate-600/50 mr-2",children:["Estudiantes: ",P.length]}),i.jsxs("span",{className:"inline-block px-2 py-1 rounded bg-slate-100 dark:bg-slate-600/50",children:["Registros del perodo: ",L]})]}),i.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-2",children:[i.jsx("button",{onClick:()=>T(oe=>oe==="tabla"?"dashboard":"tabla"),className:"px-4 py-2 rounded-md bg-emerald-600 text-white font-medium hover:bg-emerald-700 w-full sm:w-auto min-w-[140px]",title:"Alternar entre Tabla y Dashboard",children:I==="tabla"?"Ver Dashboard":"Ver Tabla"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600 dark:text-slate-300",title:"Umbral de desviacin geogrfica",children:"Umbral"}),i.jsxs("select",{value:_,onChange:oe=>j(parseInt(oe.target.value)||200),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm px-2 py-1 w-full sm:w-[120px]",children:[i.jsx("option",{value:100,children:"100 m"}),i.jsx("option",{value:200,children:"200 m"}),i.jsx("option",{value:300,children:"300 m"}),i.jsx("option",{value:500,children:"500 m"})]})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[i.jsx("input",{type:"checkbox",checked:V,onChange:oe=>Y(oe.target.checked)}),"Solo con desviaciones"]}),i.jsx("button",{onClick:ce,disabled:o||R.length===0,title:"Descargar informe mensual (CSV)",className:"px-4 py-2 rounded-md bg-blue-600 text-white font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed w-full sm:w-auto min-w-[160px]",children:"Descargar informe"})]})]}),o?i.jsxs("div",{className:"text-center text-amber-600 py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),i.jsx("div",{children:"Cargando datos de asistencia..."})]}):I==="dashboard"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-indigo-500 to-indigo-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Estudiantes"}),i.jsx("div",{className:"text-2xl font-bold",children:O.estudiantesCount})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-cyan-500 to-cyan-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Registros (mes)"}),i.jsx("div",{className:"text-2xl font-bold",children:L})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-emerald-500 to-emerald-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Promedio das con entrada"}),i.jsx("div",{className:"text-2xl font-bold",children:O.avgDiasConEntrada.toFixed(1)})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-amber-500 to-amber-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Desviaciones (mes)"}),i.jsx("div",{className:"text-2xl font-bold",children:O.totalDesviaciones})]})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold mb-3",children:"Entradas por da del mes"}),i.jsx(Ko,{width:"100%",height:260,children:i.jsxs(Qat,{data:O.dailyEntries,margin:{left:8,right:8,top:8,bottom:8},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradEntradas",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#22C55E",stopOpacity:.8}),i.jsx("stop",{offset:"100%",stopColor:"#22C55E",stopOpacity:.1})]})}),i.jsx(Rh,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(Rc,{dataKey:"day",tick:{fill:"#64748b",fontSize:12}}),i.jsx(Lc,{allowDecimals:!1,tick:{fill:"#64748b",fontSize:12}}),i.jsx(qo,{}),i.jsx(_0e,{dataKey:"entradas",name:"Entradas",type:"monotone",stroke:"#22C55E",fill:"url(#gradEntradas)"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold mb-3",children:"Registros por da de semana"}),i.jsx(Ko,{width:"100%",height:260,children:i.jsxs(yf,{data:O.weekdaySeries,margin:{left:8,right:8,top:8,bottom:8},children:[i.jsx(Rh,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(Rc,{dataKey:"nombre",tick:{fill:"#64748b",fontSize:12}}),i.jsx(Lc,{allowDecimals:!1,tick:{fill:"#64748b",fontSize:12}}),i.jsx(qo,{}),i.jsx(Ed,{dataKey:"registros",name:"Entradas",fill:"#6366F1",radius:[6,6,0,0]}),i.jsx(Xp,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold mb-3",children:"Top 5 con ms desviaciones"}),O.topDesviadores.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"Sin desviaciones registradas en el mes."}):i.jsx("ul",{className:"divide-y",children:O.topDesviadores.map((oe,re)=>i.jsxs("li",{className:"py-2 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-sm font-semibold text-slate-600",children:re+1}),i.jsx("span",{className:"font-medium",children:oe.nombre})]}),i.jsx("span",{className:"font-bold text-red-600",children:oe.count})]},oe.id))})]}),A==="todos"&&i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold mb-3",children:"Promedio de das con entrada por curso"}),i.jsx(Ko,{width:"100%",height:260,children:i.jsxs(yf,{data:O.porCurso,margin:{left:8,right:8,top:8,bottom:8},children:[i.jsx(Rh,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(Rc,{dataKey:"curso",tick:{fill:"#64748b",fontSize:12}}),i.jsx(Lc,{allowDecimals:!1,tick:{fill:"#64748b",fontSize:12}}),i.jsx(qo,{}),i.jsx(Ed,{dataKey:"promedioDias",name:"Prom. das con entrada",fill:"#0ea5e9",radius:[6,6,0,0]})]})}),i.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["Entre 0 y ",k," das posibles"]})]})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:k},(oe,re)=>{const le=new Date(M,d.getMonth(),re+1).getDay(),ve=le===0||le===6;return i.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${ve?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[i.jsx("div",{className:"font-semibold",children:H[le]}),i.jsx("div",{children:re+1})]},re)}),i.jsx("th",{className:"p-2 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-20 text-center",children:"Ingresos"}),i.jsx("th",{className:"p-2 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-20 text-center",children:"Salidas"}),i.jsx("th",{className:"p-2 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-24 text-center",title:`Marcajes fuera de ${_} m de la empresa`,children:"Desv."})]})}),i.jsx("tbody",{children:R.length>0?R.map(oe=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:oe.nombreCompleto}),Array.from({length:k},(re,ue)=>{var Be;const le=ue+1,ve=(Be=S.get(oe.email))==null?void 0:Be.get(le),X=new Date(M,d.getMonth(),ue+1),Ee=X.getDay()===0||X.getDay()===6;return oe.email==="alexis.robles@industrialderecoleta.cl"&&le===2&&console.log(" Verificando da 2 para Alexis:",{email:oe.email,day:le,hasDataForStudent:S.has(oe.email),studentDayRecords:ve,allAttendanceKeys:Array.from(S.keys()),daysForStudent:S.get(oe.email)?Array.from(S.get(oe.email).keys()):[]}),i.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${Ee?"bg-slate-100 dark:bg-slate-700/50":""}`,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(()=>{var se,ne;if(!(ve!=null&&ve.entrada))return null;const je=z.get(oe.id),fe=je==null?void 0:je.coordenadas;let ye=null,Ae=!1;return fe&&((se=ve.entrada.ubicacion)==null?void 0:se.latitud)!=null&&((ne=ve.entrada.ubicacion)==null?void 0:ne.longitud)!=null&&(ye=W(ve.entrada.ubicacion.latitud,ve.entrada.ubicacion.longitud,fe.lat,fe.lng),Ae=ye>_),i.jsxs("div",{className:`group relative cursor-pointer ${Ae?"ring-2 ring-red-400 rounded-full":""}`,onClick:()=>{var de;return q((de=ve.entrada)==null?void 0:de.ubicacion)},children:[i.jsx(Zlt,{}),i.jsxs("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:[new Date(ve.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),ye!=null?`  ${Math.round(ye)} m`:""]})]})})(),(()=>{var se,ne;if(!(ve!=null&&ve.salida))return null;const je=z.get(oe.id),fe=je==null?void 0:je.coordenadas;let ye=null,Ae=!1;return fe&&((se=ve.salida.ubicacion)==null?void 0:se.latitud)!=null&&((ne=ve.salida.ubicacion)==null?void 0:ne.longitud)!=null&&(ye=W(ve.salida.ubicacion.latitud,ve.salida.ubicacion.longitud,fe.lat,fe.lng),Ae=ye>_),i.jsxs("div",{className:`group relative cursor-pointer ${Ae?"ring-2 ring-red-400 rounded-full":""}`,onClick:()=>{var de;return q((de=ve.salida)==null?void 0:de.ubicacion)},children:[i.jsx(ect,{}),i.jsxs("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:[new Date(ve.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),ye!=null?`  ${Math.round(ye)} m`:""]})]})})()]})},le)}),i.jsx("td",{className:"p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle font-semibold",children:(()=>{const re=S.get(oe.email);if(!re)return 0;let ue=0;for(let le=1;le<=k;le++){const ve=re.get(le);ve&&ve.entrada&&(ue+=1)}return ue})()}),i.jsx("td",{className:"p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle font-semibold",children:(()=>{const re=S.get(oe.email);if(!re)return 0;let ue=0;for(let le=1;le<=k;le++){const ve=re.get(le);ve&&ve.salida&&(ue+=1)}return ue})()}),i.jsx("td",{className:"p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle",children:(()=>{const re=Z(oe);if(!re.hasData)return"";if(re.undetermined)return i.jsx("span",{className:"text-xs text-slate-500",title:"Sin empresa asignada o sin coordenadas",children:"N/D"});const ue=re.anyDeviation?"S":"No",le=re.anyDeviation?"text-red-600":"text-emerald-600";return i.jsx("span",{className:`text-sm font-semibold ${le}`,title:`Eventos fuera de umbral: ${re.count}
Distancia mxima: ${Math.round(re.max)} m`,children:ue})})()})]},oe.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:k+4,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la bsqueda."})})})]})})]})},OT="evaluaciones_formativas",PT="calificaciones_formativas",rH="trabajos_grupales_formativos",rct="usuarios",nH=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},nct=(e,t,r)=>{const n=Lt(pt(dt,OT),ur("curso","==",e),ur("asignatura","==",t),tr("fecha","asc"));return hr(n,a=>{r(a.docs.map(s=>nH(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},act=async(e,t)=>{const r=$p(dt),n=er(pt(dt,OT));r.set(n,{...e,fecha:wr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=er(dt,PT,n.id);return r.set(a,t),await r.commit(),n.id},sct=async(e,t)=>{const r=er(dt,OT,e);await yi(r,t,{merge:!0})},ict=async e=>{const t=$p(dt);t.delete(er(dt,OT,e)),t.delete(er(dt,PT,e)),await t.commit()},oct=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=er(dt,PT,n);return hr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},lct=async(e,t)=>{const r=er(dt,PT,e);await yi(r,t,{merge:!0})},cct=(e,t,r)=>{const n=Lt(pt(dt,rH),ur("curso","==",e),ur("asignatura","==",t),tr("fechaPresentacion","desc"));return hr(n,a=>{r(a.docs.map(s=>nH(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},uct=async e=>{const t={...e,fechaPresentacion:wr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await dn(pt(dt,rH),t)},dct=async(e,t)=>{const r=er(dt,rH,e);await yi(r,t,{merge:!0})},fct=e=>{const t=Lt(pt(dt,rct));return hr(t,r=>{e(r.docs.map(n=>nH(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},ume=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},Qb={"Lengua y Literatura":"",Matemtica:"",Ingls:"",Filosofa:"","Historia y Geografa":"","Educacin Ciudadana":"",Ciencias:"","Ciencias para la Ciudadana":"",Artes:"",Msica:"","Educacin Fsica":"",Orientacin:"","Mecnica Industrial":"","Mecnica Automotriz":"",Emprendimiento:"",Tecnologa:"","Pensamiento Lgico":"","Competencia Lectora":"",Default:""},dme=e=>e.startsWith("1")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},hct=({cursos:e,onSelect:t})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=dme(r);return i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[i.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),i.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[i.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),i.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),Act=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=dme(e);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:" Volver a Cursos"}),i.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>i.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[i.jsx("span",{className:"text-2xl",children:Qb[s]||Qb.Default}),i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},mct=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=w.useState([]),[o,l]=w.useState({}),[c,u]=w.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=w.useState(null),[A,m]=w.useState(null),[g,x]=w.useState(!0),v=w.useMemo(()=>r.filter(k=>k.profile===Ot.ESTUDIANTE&&ume(k.curso||"")===e).map(k=>k.nombreCompleto).sort((k,B)=>k.localeCompare(B)),[r,e]);w.useEffect(()=>{x(!0);const k=nct(e,t,B=>{s(B);const M=B.map(S=>S.id),P=oct(M,S=>{l(L=>({...L,...S}))});return x(!1),()=>P()});return()=>k()},[e,t]);const y=k=>{const{name:B,value:M}=k.target;d?f(P=>P?{...P,[B]:M}:null):u(P=>({...P,[B]:M}))},N=async k=>{if(k.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const B={asignatura:t,curso:e,...c},M=v.reduce((P,S)=>(P[S]="trabajado",P),{});try{await act(B,M),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(P){console.error(P),m("No se pudo crear la evaluacin.")}},C=(k,B)=>{var L;const M=((L=o[k])==null?void 0:L[B])||"trabajado";let P;M==="trabajado"?P="no trabajado":M==="no trabajado"?P="ausente":P="trabajado";const S={...o,[k]:{...o[k]||{},[B]:P}};l(S),lct(k,{[B]:P}).catch(U=>{console.error("Error updating grade:",U)})},_=k=>f(k),j=async()=>{if(d)try{await sct(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(k){console.error(k),m("No se pudo guardar la edicin.")}},I=async k=>{if(window.confirm("Eliminar esta evaluacin y todas sus calificaciones?"))try{await ict(k)}catch(B){console.error(B),m("No se pudo eliminar la evaluacin.")}},T=w.useCallback(k=>{if(a.length===0)return"-";let B=0,M=0;return a.forEach(P=>{var L;const S=(L=o[P.id])==null?void 0:L[k];S==="trabajado"?(B+=7,M++):S==="no trabajado"&&(B+=2,M++)}),M===0?"-":(B/M).toFixed(1)},[o,a]);return g?i.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluacin"}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),i.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),i.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"w-full",children:i.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),A&&i.jsx("p",{className:"text-red-500 text-sm col-span-full",children:A})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(k=>i.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===k.id?i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("button",{onClick:j,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:""})]}):i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"font-semibold",children:k.nombreActividad}),i.jsx("span",{className:"font-normal text-slate-500",children:k.fecha}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx("button",{onClick:()=>_(k),className:"text-blue-500 hover:text-blue-700",children:""}),i.jsx("button",{onClick:()=>I(k.id),className:"text-red-500 hover:text-red-700",children:""})]})]})},k.id)),i.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(k=>i.jsxs("tr",{children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:k}),a.map(B=>{var S;const M=(S=o[B.id])==null?void 0:S[k];let P;return M==="trabajado"?P=Qb[t]||Qb.Default:M==="no trabajado"?P="":M==="ausente"?P="A":P=Qb[t]||Qb.Default,i.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:i.jsx("button",{onClick:()=>C(B.id,k),className:`text-3xl transition-opacity duration-200 ${M==="trabajado"?"opacity-100":M==="no trabajado"?"opacity-40":M==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:P})},B.id)}),i.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:T(k)})]},k))})]})})]})},pct=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=w.useState({}),[A,m]=w.useState(2),g=w.useMemo(()=>r.filter(_=>_.profile===Ot.ESTUDIANTE&&ume(_.curso||"")===e).sort((_,j)=>_.nombreCompleto.localeCompare(j.nombreCompleto)),[r,e]);w.useEffect(()=>{const _=cct(e,t,s);return()=>_()},[e,t]),w.useEffect(()=>{if(o){const _={};o.grupos.forEach(j=>{j.integrantes.forEach(I=>{_[I.nombre]={groupNumber:String(j.numero),role:I.rol||""}})}),f(_)}else f({})},[o]);const x=async _=>{if(_.preventDefault(),!c.nombre.trim())return;const j={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await uct(j),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(I){console.error(I),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!o)return;const _=new Map;for(const I of g){const T=d[I.nombreCompleto];if(T&&T.groupNumber){const k=parseInt(T.groupNumber,10);isNaN(k)||(_.has(k)||_.set(k,[]),_.get(k).push({nombre:I.nombreCompleto,rol:T.role||""}))}}const j=Array.from(_.entries()).map(([I,T])=>({numero:I,integrantes:T})).sort((I,T)=>I.numero-T.numero);try{await dct(o.id,{grupos:j}),alert("Grupos guardados con xito.")}catch(I){console.error(I),alert("No se pudieron guardar los grupos.")}},y=()=>{if(A<2){alert("Debe haber al menos 2 grupos.");return}const _=[...g].sort(()=>Math.random()-.5),j={};_.forEach((I,T)=>{var k;j[I.nombreCompleto]={groupNumber:String(T%A+1),role:((k=d[I.nombreCompleto])==null?void 0:k.role)||""}}),f(j)},N=(_,j,I)=>{f(T=>({...T,[_]:{...T[_]||{groupNumber:"",role:""},[j]:I}}))},C=w.useMemo(()=>{const _=new Map;return Object.entries(d).forEach(([j,I])=>{I.groupNumber&&(_.has(I.groupNumber)||_.set(I.groupNumber,[]),_.get(I.groupNumber).push({nombre:j,rol:I.role}))}),Array.from(_.entries()).sort((j,I)=>parseInt(j[0])-parseInt(I[0]))},[d]);return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a Actividades"}),i.jsx("h2",{className:"text-2xl font-bold",children:o.nombreActividad})]}),i.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-1 space-y-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignacin"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:A,onChange:_=>m(parseInt(_.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),i.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Nmina del Curso"}),i.jsx("table",{className:"w-full text-sm",children:i.jsx("tbody",{children:g.map(_=>{var j;return i.jsxs("tr",{children:[i.jsx("td",{className:"py-1 pr-2",children:_.nombreCompleto}),i.jsx("td",{className:"py-1",children:i.jsx("input",{type:"number",value:((j=d[_.nombreCompleto])==null?void 0:j.groupNumber)||"",onChange:I=>N(_.nombreCompleto,"groupNumber",I.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N"})})]},_.id)})})})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:C.map(([_,j])=>i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[i.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",_]}),i.jsx("ul",{className:"space-y-2",children:j.map(I=>i.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"flex-1 truncate",children:I.nombre}),i.jsxs("select",{value:I.rol||"",onChange:T=>N(I.nombre,"role",T.target.value),className:"p-1 border rounded text-xs w-32",children:[i.jsx("option",{value:"",children:"-- Asignar Rol --"}),Coe.map(T=>i.jsx("option",{value:T,children:T},T))]})]},I.nombre))})]},_))})]})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),i.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[i.jsx("input",{value:c.nombre,onChange:_=>u({...c,nombre:_.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("input",{type:"date",value:c.fecha,onChange:_=>u({...c,fecha:_.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(_=>i.jsxs("button",{onClick:()=>l(_),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[i.jsx("p",{className:"font-bold",children:_.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",_.fechaPresentacion]})]},_.id))]})]})},gct=({currentUser:e})=>{const[t,r]=w.useState("calificaciones"),[n,a]=w.useState(null),[s,o]=w.useState(null),[l,c]=w.useState([]),[u,d]=w.useState(!0);w.useEffect(()=>{d(!0);const x=fct(v=>{c(v),d(!1)});return()=>x()},[]);const f=w.useMemo(()=>e.cursos||[],[e.cursos]),A=w.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>i.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return i.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return i.jsx(hct,{cursos:f,onSelect:a});if(!s)return i.jsx(Act,{curso:n,asignaturas:A,onSelect:o,onBack:()=>a(null)});if(t==="calificaciones")return i.jsx(mct,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)});if(t==="grupos")return i.jsx(pct,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),i.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),i.jsx("div",{className:"mt-6",children:g()})]})};function xct(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function vct(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[a]|cu[a]l|qu[e]|c[o]mo|por qu[e]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[e] m[a]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[o]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[i] es|mejorar[i]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function bct(e,t){var o;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=xct(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),A=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?l+=A:c+=A}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const n=new Map;let a=0;(o=e.detallesObservacion)==null||o.forEach(l=>{vct(l.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=l.accionesDocente.length}),n.forEach((l,c)=>{const u=a>0?l/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=s.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crtico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensin";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentacin inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar ms secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar ms ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar ms retroalimentacin inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la tcnica de "Por qu?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificacin cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participacin estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicacin vs. interaccin"),r}const yct=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=w.useState(null),[s,o]=w.useState(null),[l,c]=w.useState(!1),u=e.length,d=Object.values(t).reduce((y,N)=>y+N.length,0)+r.length,f=[...Object.values(t).flat(),...r],A=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,N)=>{const C=new Date(N.fecha).toLocaleDateString("es-ES",{month:"long"});return y[C]=(y[C]||0)+1,y},{}),g=f.reduce((y,N)=>(N.asignaturaInfo&&(y[N.asignaturaInfo]=(y[N.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,N])=>N-y).slice(0,5);f.reduce((y,N)=>{if(!N.horaInicio||!N.horaTermino)return y;const C=new Date("2000/01/01 "+N.horaInicio),j=(new Date("2000/01/01 "+N.horaTermino).getTime()-C.getTime())/(1e3*60);return y+j},0)/f.length;const v=f.filter(y=>{var N,C,_;return((N=y.retroalimentacion)==null?void 0:N.exito)&&((C=y.retroalimentacion)==null?void 0:C.modelo)&&((_=y.retroalimentacion)==null?void 0:_.foco)}).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:i.jsx(Wi,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompaamientos"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:i.jsx(wu,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(Ys,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(va,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentacin Completa"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Yo,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),i.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,N])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:N})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${N/d*100}%`}})})]})},y))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(MN,{className:"w-5 h-5 text-purple-600"}),"Anlisis Inteligente"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Anlisis"}),i.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const N=f.find(C=>C.id===y.target.value);o(N||null)},children:[i.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>i.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&i.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(C=>C.docenteInfo===s.docenteInfo&&C.id!==s.id),N=await bct(s,y);a(N)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(MN,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participacin"}),i.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interaccin vs Explicacin"}),i.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[i.jsx(va,{className:"w-4 h-4"})," Fortalezas"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,N)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},N))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[i.jsx(R1,{className:"w-4 h-4"})," reas de Mejora"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,N)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},N))})]})]}),n.alerts.length>0&&i.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[i.jsx(Uc,{className:"w-4 h-4"})," Alertas"]}),i.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,N)=>i.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},N))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[i.jsx(Q5,{className:"w-4 h-4"})," Recomendaciones"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,N)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},N))})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(ys,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Ms Observadas"]}),i.jsx("div",{className:"space-y-2",children:x.map(([y,N])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:N})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${N/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Q5,{className:"w-5 h-5 text-blue-600"}),"ltimos Ciclos OPR"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),i.jsx("tbody",{children:f.sort((y,N)=>new Date(N.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var N;return i.jsxs("tr",{className:"border-t dark:border-slate-700",children:[i.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),i.jsx("td",{className:"py-2 px-3",children:(N=y.retroalimentacion)!=null&&N.exito?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[i.jsx(va,{className:"w-3 h-3"})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[i.jsx(R1,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},fme=$M(),$y="acompanamientos",Of="ciclos_opr",Pf=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},hme=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},wct=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=hme(r);return`videos_opr/${n}/${a}/${s}`},Nct=async(e,t,r)=>{try{if(!$N.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesin nuevamente.");if(!e)throw new Error("No se proporcion un archivo vlido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Mximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const o=(t||"").split("/");if(o.length>=4&&o[0]==="videos_opr"){const d=o[1],f=o[2],A=o.slice(3).join("/");s=wct(d,f,A)}else{const d=Date.now(),f=hme(e.name);s=`videos_opr/general/${d}_${f}`}const l=Iu(fme,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:$N.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=soe(l,e,c);return new Promise((d,f)=>{let A=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==A&&(A=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agot el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexin a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await MA(u.snapshot.ref);d(m)}catch{f(new Error("El archivo se subi, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},aH=async e=>{try{const t=Iu(fme,e),{items:r,prefixes:n}=await ioe(t);await Promise.all(r.map(a=>VM(a))),await Promise.all(n.map(a=>aH(a.fullPath)))}catch{}},Cct=async()=>{try{const e=Lt(pt(dt,$y),tr("fecha","desc"));return(await Rr(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Pf(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompaamientos")}},Ect=async e=>{var t,r;try{const n=e.docenteEmailLower||((r=(t=$N.currentUser)==null?void 0:t.email)==null?void 0:r.toLowerCase())||void 0,a={...e,docenteEmailLower:n,fecha:wr.fromDate(new Date(e.fecha)),fechaCreacion:wr.now()},s=await dn(pt(dt,$y),a);return{...e,id:s.id,fecha:Pf(e.fecha)}}catch{throw new Error("No se pudo crear el acompaamiento")}},DZ=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:wr.fromDate(new Date(t.fecha))}:{},fechaModificacion:wr.now()};await Zi(er(dt,$y,e),r)}catch{throw new Error("No se pudo actualizar el acompaamiento")}},jct=async e=>{try{const t=Lt(pt(dt,Of),ur("acompanamientoId","==",e)),r=await Rr(t),n=$p(dt);r.forEach(a=>n.delete(er(dt,Of,a.id))),await n.commit(),await aH(`videos_opr/${e}`),await fa(er(dt,$y,e))}catch{throw new Error("No se pudo eliminar el acompaamiento y sus datos asociados")}},OZ=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:wr.fromDate(new Date(e.fecha)),fechaCreacion:wr.now(),...e.docenteEmailLower?{docenteEmailLower:e.docenteEmailLower}:{}};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:wr.fromDate(new Date(e.seguimiento.fecha))});const n=await dn(pt(dt,Of),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:Pf(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},kct=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=wr.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:wr.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=wr.now(),await Zi(er(dt,Of,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},uL=async e=>{try{const t=Lt(pt(dt,Of),ur("acompanamientoId","==",e),tr("fecha","desc"));return(await Rr(t)).docs.map(a=>{var l;const s=a.data(),o={id:a.id,...s,fecha:Pf(s==null?void 0:s.fecha)};return(l=s==null?void 0:s.seguimiento)!=null&&l.fecha&&(o.seguimiento={...s.seguimiento,fecha:Pf(s.seguimiento.fecha)}),o})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el ndice compuesto (acompanamientoId + fecha).")}},Ame=async()=>{try{const e=Lt(pt(dt,Of),ur("acompanamientoId","==",""),tr("fecha","desc"));return(await Rr(e)).docs.map(n=>{var o;const a=n.data(),s={id:n.id,...a,fecha:Pf(a==null?void 0:a.fecha)};return(o=a==null?void 0:a.seguimiento)!=null&&o.fecha&&(s.seguimiento={...a.seguimiento,fecha:Pf(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},Sct=(e,t,r)=>{const n=Lt(pt(dt,Of),ur("acompanamientoId","==",e),tr("fecha","desc"));return hr(n,a=>{const s=a.docs.map(o=>{var u;const l=o.data(),c={id:o.id,...l,fecha:Pf(l==null?void 0:l.fecha)};return(u=l==null?void 0:l.seguimiento)!=null&&u.fecha&&(c.seguimiento={...l.seguimiento,fecha:Pf(l.seguimiento.fecha)}),c});t(s)},a=>r==null?void 0:r(a))},dL=async e=>{try{const t=await bA(er(dt,Of,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await aH(`videos_opr/${n}/${e}`),await fa(er(dt,Of,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},_ct=async e=>{const t=e.id;if(!t)return{updated:0,total:0};const r=Lt(pt(dt,Of),ur("acompanamientoId","==",t)),n=await Rr(r);if(n.empty)return{updated:0,total:0};const a=$p(dt);let s=0;return n.forEach(o=>{const l=o.data(),c={};!l.docenteEmailLower&&e.docenteEmailLower&&(c.docenteEmailLower=e.docenteEmailLower),!l.docenteInfo&&e.docente&&(c.docenteInfo=e.docente),!l.docente&&e.docente&&(c.docente=e.docente),!l.cursoInfo&&e.curso&&(c.cursoInfo=e.curso),!l.asignaturaInfo&&e.asignatura&&(c.asignaturaInfo=e.asignatura),Object.keys(c).length>0&&(s++,a.update(er(dt,Of,o.id),c))}),s>0&&await a.commit(),{updated:s,total:n.size}},PZ=async e=>{try{const t=Lt(pt(dt,$y),ur("docente","==",e),tr("fecha","desc"));return(await Rr(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Pf(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompaamientos del docente")}},Tct=async e=>{try{const t=Lt(pt(dt,$y),ur("docenteEmailLower","==",e),tr("fecha","desc"));return(await Rr(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Pf(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompaamientos del docente")}},Bct=async e=>{try{const t=Lt(pt(dt,"rubricas_personalizadas"),ur("docente","==",e)),r=await Rr(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},Ict=async()=>await pv(),Dct=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:o="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:u=!1})=>{const[d,f]=w.useState(!1),[A,m]=w.useState(!1),[g,x]=w.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=T=>{T.preventDefault(),T.stopPropagation(),T.type==="dragenter"||T.type==="dragover"?f(!0):T.type==="dragleave"&&f(!1)},N=T=>{if(T.preventDefault(),T.stopPropagation(),f(!1),T.dataTransfer.files&&T.dataTransfer.files[0]&&!s){const k=T.dataTransfer.files[0];_(k)}},C=T=>{if(T.target.files&&T.target.files[0]&&!s){const k=T.target.files[0];_(k)}},_=T=>{if(T.size>524288e3){alert(`El archivo es demasiado grande. Tamao mximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(T.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(T)},j=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",I=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL vlida que comience con http:// o https://");return}r(g),m(!1),x("")}};return i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&i.jsx("button",{type:"button",onClick:()=>m(!A),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:A?"Cancelar":"Insertar enlace"})]}),A&&i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"url",value:g,onChange:T=>x(T.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?i.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[i.jsx(va,{className:"w-5 h-5 text-green-600"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),i.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:i.jsx(Qn,{className:"w-4 h-4"})})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:N,onClick:()=>{var T;return!s&&((T=document.getElementById(v))==null?void 0:T.click())},children:[i.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?i.jsxs("div",{className:"text-center",children:[i.jsx(Uc,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):i.jsxs("div",{className:"text-center",children:[i.jsx(av,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aqu"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (mx. 500MB)"})]})}),i.jsx("input",{id:v,type:"file",onChange:C,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:o,style:{display:"none"}})]}),s&&i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:`${j()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[i.jsx(Uc,{className:"w-4 h-4 text-red-500"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},Oct=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,o]=w.useState(!1),[l,c]=w.useState({}),[u,d]=w.useState({}),[f,A]=w.useState({}),[m,g]=w.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=w.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=w.useState(t||x);w.useEffect(()=>{t&&(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""}))},[t]);const N=S=>{const{name:L,value:U}=S.target,q=L.split(".");q.length>1?y(H=>{const z=JSON.parse(JSON.stringify(H));let W=z;for(let Z=0;Z<q.length-1;Z++)W=W[q[Z]];return W[q[q.length-1]]=U,z}):y(H=>({...H,[L]:U}))},C=(S,L,U)=>{y(q=>({...q,detallesObservacion:q.detallesObservacion.map(H=>H.id===S?{...H,[L]:U}:H)}))},_=()=>{const S=v.detallesObservacion[v.detallesObservacion.length-1],L=S&&parseInt(S.minuto.split("-")[1],10)||0,U=`${L+1}-${L+5}`;y(q=>({...q,detallesObservacion:[...q.detallesObservacion,{id:`row_${Date.now()}`,minuto:U,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},j=S=>{y(L=>({...L,detallesObservacion:L.detallesObservacion.filter(U=>U.id!==S)}))},I=async(S,L)=>{A(U=>({...U,[S]:null})),c(U=>({...U,[S]:!0})),d(U=>({...U,[S]:0}));try{const U=Date.now(),q=L.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),H=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",z=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",W=`videos_opr/${H}/${z}/${U}_${q}`,Z=await Nct(L,W,V=>{d(Y=>({...Y,[S]:V}))});T(S,Z),d(V=>({...V,[S]:100}))}catch(U){const q=(U==null?void 0:U.message)||"Error desconocido al subir el archivo";A(H=>({...H,[S]:q})),alert(`Error al subir el video: ${q}`)}finally{c(U=>({...U,[S]:!1})),setTimeout(()=>{d(U=>({...U,[S]:0}))},2e3)}},T=(S,L)=>{const U=S.split(".");U.length>1?y(q=>{const H=JSON.parse(JSON.stringify(q));let z=H;for(let W=0;W<U.length-1;W++)z=z[U[W]];return z[U[U.length-1]]=L,H}):y(q=>({...q,[S]:L}))},k=S=>{const L=S.split(".");L.length>1?y(U=>{const q=JSON.parse(JSON.stringify(U));let H=q;for(let z=0;z<L.length-1;z++)H=H[L[z]];return H[L[L.length-1]]="",q}):y(U=>({...U,[S]:""})),A(U=>({...U,[S]:null})),d(U=>({...U,[S]:0}))},B=async()=>{o(!0);try{const S=ua.currentUser;if(!S){alert("No se pudo obtener el token de autenticacin. Inicia sesin nuevamente."),o(!1);return}const L=await S.getIdToken(),U=await fetch("/api/mejorarTextoOPR",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify({formData:v})});if(!U.ok){const H=await U.json();throw new Error(H.error||"Error al mejorar el texto con IA")}const{retroalimentacion:q}=await U.json();y(H=>({...H,retroalimentacion:{...H.retroalimentacion,...q}})),alert("Textos mejorados exitosamente con IA")}catch(S){console.error(S),alert(S.message||"No se pudo mejorar la redaccin. Intenta nuevamente.")}finally{o(!1)}},M=()=>{const S=new Tr,L=S.internal.pageSize.getWidth(),U=S.internal.pageSize.getHeight(),q=15,H="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",z=15,W=15;let Z=25;const V=()=>{const re="Liceo Industrial de Recoleta";S.setFontSize(8),S.setFont("helvetica","normal"),S.text(re,L/2,U-10,{align:"center"}),S.setFontSize(10),S.setFont("helvetica","normal");const ue=U-25;S.line(q,ue,q+70,ue),S.text("Firma Docente",q+15,ue+5),S.line(L-q-70,ue,L-q,ue),S.text("Firma Observador",L-q-55,ue+5)},Y=()=>{try{S.addImage(H,"PNG",L-W-10,10,W,z)}catch(re){console.error("Error al cargar el logo:",re)}};Y();const R=S.addPage;S.addPage=function(){return R.apply(this,arguments),Y(),V(),this};const O=re=>{Z>240&&(S.addPage(),Z=25),S.setFontSize(14),S.setFont("helvetica","bold"),S.text(re,q,Z),Z+=12};S.setFontSize(18),S.setFont("helvetica","bold"),S.text("Informe de Ciclo OPR",L/2,Z,{align:"center"}),Z+=18,O("1. Datos Generales");const K=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];Li(S,{body:K,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:q,right:q}}),Z=S.lastAutoTable.finalY+15,O("2. Registro Detallado de Observacin");const J=v.detallesObservacion.map(re=>[re.minuto,re.accionesDocente,re.accionesEstudiantes,re.actividades]);Li(S,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:J,startY:Z,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:q,right:q},didDrawPage:re=>{var ue;Z=((ue=re.cursor)==null?void 0:ue.y)||25}}),Z=S.lastAutoTable.finalY+15,O("3. Retroalimentacin Docente");const ce=[];if(v.retroalimentacion.exito&&ce.push(["xito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&ce.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&ce.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&ce.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),ce.length>0&&(Li(S,{body:ce,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:q,right:q}}),Z=S.lastAutoTable.finalY+10),v.retroalimentacion.brecha){Z>240&&(S.addPage(),Z=40),S.setFontSize(12),S.setFont("helvetica","bold"),S.text("Anlisis de Brecha",q,Z),Z+=8;const re=[],ue=v.retroalimentacion.brecha.minutoInicial,le=v.retroalimentacion.brecha.minutoFinal;ue&&le&&re.push(["Minutos:",`${ue} a ${le}`]),v.retroalimentacion.brecha.preguntas&&re.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&re.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),re.length>0&&(Li(S,{body:re,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:q+5,right:q}}),Z=S.lastAutoTable.finalY+10)}O("4. Planificacin de Prctica");const oe=[];v.planificacion.preparacion&&oe.push(["Preparacin:",v.planificacion.preparacion]),v.planificacion.objetivo&&oe.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&oe.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&oe.push(["Tiempo:",v.planificacion.tiempo]),oe.length>0&&(Li(S,{body:oe,startY:Z,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:q,right:q}}),Z=S.lastAutoTable.finalY+10),V(),S.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},P=async S=>{if(S.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const L={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(L)}catch(U){console.error("Error al guardar ciclo OPR:",U),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Bsicos del Ciclo OPR"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),i.jsxs("select",{value:m.docente,onChange:S=>g(L=>({...L,docente:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{value:m.curso,onChange:S=>g(L=>({...L,curso:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),Sa.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:m.asignatura,onChange:S=>g(L=>({...L,asignatura:S.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),xa.map(S=>i.jsx("option",{value:S,children:S},S))]})]})]})]}),i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:B,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[i.jsx(x3,{className:"w-4 h-4"}),s?"Mejorando redaccin...":"Mejorar Redaccin del Ciclo"]}),i.jsxs("button",{type:"button",onClick:M,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(Df,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redaccin de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),i.jsxs("form",{onSubmit:P,className:"space-y-8",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(wu,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:N,placeholder:"Nombre o N del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:N,placeholder:"Registro de Observacin N",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),i.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx(Dct,{label:"Video de observacin de clase",onFileChange:S=>I("videoObservacionUrl",S),onLinkChange:S=>T("videoObservacionUrl",S),uploadedUrl:v.videoObservacionUrl,onRemove:()=>k("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(e0,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observacin"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b dark:border-slate-600",children:[i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),i.jsx("th",{className:"p-2"})]})}),i.jsx("tbody",{children:v.detallesObservacion.map(S=>i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:S.minuto,onChange:L=>C(S.id,"minuto",L.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:S.accionesDocente,onChange:L=>C(S.id,"accionesDocente",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:S.accionesEstudiantes,onChange:L=>C(S.id,"accionesEstudiantes",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:S.actividades,onChange:L=>C(S.id,"actividades",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),i.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&i.jsx("button",{type:"button",onClick:()=>j(S.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:i.jsx(Qn,{className:"w-4 h-4"})})})]},S.id))})]})}),i.jsxs("button",{type:"button",onClick:_,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[i.jsx(_F,{className:"w-4 h-4"})," Agregar Fila"]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Px,{className:"w-5 h-5 text-green-600"})," Retroalimentacin Docente"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"xito"}),i.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:N,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),i.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:N,placeholder:"Modelo pedaggico o metodologa observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),i.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:N,placeholder:"Foco principal de la observacin y retroalimentacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),i.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:N,placeholder:"Elementos especficos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(qM,{className:"w-5 h-5 text-purple-600"})," Planificacin de Prctica y Seguimiento"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparacin"}),i.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:N,placeholder:"Aspectos de preparacin para la prxima prctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),i.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:N,placeholder:"Objetivo especfico para la siguiente observacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),i.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:N,placeholder:"Actividades especficas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),i.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:N,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(Ys,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),i.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:N,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),i.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:N,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},Pct=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState({}),[o,l]=w.useState(!0),[c,u]=w.useState(!0),[d,f]=w.useState(null),[A,m]=w.useState("list"),[g,x]=w.useState(null),[v,y]=w.useState(null),[N,C]=w.useState("general"),[_,j]=w.useState(!1),[I,T]=w.useState({}),[k,B]=w.useState([]),M=Y2,P=w.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[S,L]=w.useState(P),U=w.useCallback(async()=>{l(!0),f(null);try{const re=await Cct();t(re)}catch(re){f("No se pudieron cargar los registros de acompaamiento."),console.error(" Error al cargar acompaamientos:",re)}finally{l(!1)}},[]),q=w.useCallback(async()=>{u(!0);try{const ue=(await Ict()).filter(X=>X.profile==="PROFESORADO").map(X=>({nombre:X.nombreCompleto,email:(X.email||"").toLowerCase()})),le=ue.map(X=>X.nombre).sort(),ve={};ue.forEach(X=>{X.nombre&&X.email&&(ve[X.nombre]=X.email)}),n(le),s(ve)}catch(re){f("No se pudo cargar la lista de profesores."),console.error(" Error al cargar profesores:",re)}finally{u(!1)}},[]),H=w.useCallback(async()=>{try{const re={};for(const ue of e)if(ue.id)try{const le=await uL(ue.id);le.length>0&&(re[ue.id]=le)}catch(le){console.error(`Error loading OPR cycles for ${ue.id}:`,le)}try{const ue=await Ame();B(ue)}catch(ue){console.error("Error loading standalone OPR cycles:",ue),B([])}T(re)}catch(re){console.error("Error fetching OPR cycles:",re)}},[e]);w.useEffect(()=>{U(),q()},[U,q]),w.useEffect(()=>{e.length>0&&H()},[e,H]);const z=(re,ue)=>{if(y(re),ue)L(ue),x(ue.id);else{const le={id:"temp-"+Date.now(),fecha:re.fecha,docente:re.docenteInfo||"",curso:re.cursoInfo||"",asignatura:re.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};L(le),x(null)}m("form"),C("opr"),f(null)},W=async()=>{if(!("docente"in S)||!S.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentacin.');return}j(!0),f(null);try{const re=ua.currentUser;if(!re){alert("No se pudo obtener el token de autenticacin. Inicia sesin nuevamente."),j(!1);return}const ue=await re.getIdToken(),le=await fetch("/api/generarFeedbackAcompanamientoDocente",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ue}`},body:JSON.stringify({formData:S})});if(!le.ok)throw new Error("Error al generar la retroalimentacin con IA");const{feedback:ve}=await le.json();L(X=>({...X,retroalimentacionConsolidada:ve})),alert("Retroalimentacin generada exitosamente con IA.")}catch{f("No se pudo generar la retroalimentacin automtica."),alert("Error: No se pudo generar la retroalimentacin automtica.")}finally{j(!1)}},Z=async re=>{var ue;if(re.preventDefault(),!("docente"in S)||!S.docente||!S.curso||!S.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}f(null);try{const le=(ue=a[S.docente])==null?void 0:ue.toLowerCase();if(g)await DZ(g,{...S,docenteEmailLower:le}),alert("Acompaamiento actualizado correctamente!");else{const ve=await Ect({...S,docenteEmailLower:le});x(ve.id),L(ve),alert("Acompaamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await U()}catch(le){const ve=(le==null?void 0:le.message)??"Error al guardar el registro de acompaamiento.";f(ve),console.error(" Error al guardar:",le),alert(`Error: ${ve}`)}},V=()=>{L(P),x(null),y(null),m("form"),C("general"),f(null)},Y=re=>{L(re),x(re.id),y(null),m("form"),C("general"),f(null)},R=async re=>{if(window.confirm("Est seguro de que desea eliminar este registro? Esta accin no se puede deshacer."))try{await jct(re),await U(),alert("Registro eliminado exitosamente.")}catch(ue){const le="No se pudo eliminar el registro.";f(le),console.error(" Error al eliminar:",ue),alert(`Error: ${le}`)}},O=(re,ue)=>{L(le=>({...le,rubricaResultados:{...le.rubricaResultados||{},[re]:ue}}))},K=()=>{var re;if(!("docente"in S)||!S.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const ue=new Tr,le=ue.internal.pageSize.getWidth(),ve=ue.internal.pageSize.getHeight(),X=20,Ee=le-X*2,Be=(se,ne)=>ne+se>ve-X,je=()=>{const se=ue.getNumberOfPages();for(let ne=1;ne<=se;ne++)ue.setPage(ne),ue.setFontSize(9),ue.setTextColor(128),ue.text(`pg. ${ne} de ${se}`,le-X,ve-10,{align:"right"})};let fe=X;ue.setFontSize(16),ue.setFont("helvetica","bold"),ue.text("INFORME DE ACOMPAAMIENTO DOCENTE",le/2,fe,{align:"center"}),fe+=15;const ye=40;if(Li(ue,{startY:fe,head:[],body:[["Docente:",S.docente],["Curso:",S.curso],["Asignatura:",S.asignatura],["Fecha:",new Date(S.fecha).toLocaleDateString("es-CL")],["Bloques:",S.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:X,right:X}}),fe=ue.lastAutoTable.finalY+10,Object.keys(S.rubricaResultados||{}).length>0){ue.setFontSize(14),ue.setFont("helvetica","bold"),ue.text("Evaluacin por Indicadores",X,fe),fe+=10;const se=Object.entries(S.rubricaResultados).map(([ne,de])=>{let me;switch(de){case 1:me="Dbil";break;case 2:me="Incipiente";break;case 3:me="Satisfactorio";break;case 4:me="Avanzado";break;default:me="No evaluado"}return[ne,me,de]});Li(ue,{startY:fe,head:[["Indicador","Nivel de Logro","Puntuacin"]],body:se,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:X,right:X}})}ue.addPage(),fe=X,ue.setFontSize(14),ue.setFont("helvetica","bold"),ue.text("Observaciones Generales y Sugerencias de Mejora",X,fe),fe+=15,S.observacionesGenerales&&(ue.setFontSize(12),ue.setFont("helvetica","bold"),ue.text("Fortalezas:",X,fe),fe+=10,ue.setFont("helvetica","normal"),ue.setFontSize(11),ue.splitTextToSize(S.observacionesGenerales,Ee).forEach(ne=>{Be(7,fe)&&(ue.addPage(),fe=X),ue.text(ne,X,fe,{align:"justify"}),fe+=7}),fe+=10),S.retroalimentacionConsolidada&&(Be(50,fe)&&(ue.addPage(),fe=X),ue.setFontSize(12),ue.setFont("helvetica","bold"),ue.text("Sugerencias de mejora:",X,fe),fe+=10,ue.setFont("helvetica","normal"),ue.setFontSize(11),ue.splitTextToSize(S.retroalimentacionConsolidada,Ee).forEach(ne=>{Be(7,fe)&&(ue.addPage(),fe=X),ue.text(ne,X,fe,{align:"justify"}),fe+=7})),je();const Ae=`Informe_Acompanamiento_${(re=S.docente)==null?void 0:re.replace(/\s+/g,"_")}_${S.curso}_${new Date().toISOString().split("T")[0]}.pdf`;ue.save(Ae)}catch(ue){console.error(" Error al generar PDF:",ue),alert("Error al generar el PDF. Intenta nuevamente.")}},J=re=>{const{name:ue,value:le}=re.target;L(ve=>({...ve,[ue]:le}))},ce=()=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mdulo de Acompaamiento Docente"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:async()=>{var re;try{const ue=e.filter(ve=>ve.id);let le=0;for(const ve of ue){const X=(re=a[ve.docente||""])==null?void 0:re.toLowerCase();X&&ve.docenteEmailLower!==X&&(await DZ(ve.id,{...ve,docenteEmailLower:X}),le++)}await U(),alert(`Reparacin completada: ${le} acompaamiento(s) actualizados`)}catch(ue){console.error("Error reparando acompaamientos:",ue),alert("No se pudo reparar docenteEmailLower en algunos acompaamientos.")}},className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 flex items-center gap-2 transition-colors",title:"Backfill docenteEmailLower desde el nombre del docente",children:"Reparar Acompaamientos"}),i.jsxs("button",{onClick:()=>{V(),C("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[i.jsx(_F,{className:"w-5 h-5"})," Acompaamiento General"]}),i.jsxs("button",{onClick:()=>{L(P),x(null),y(null),m("form"),C("opr"),f(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[i.jsx(_F,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),d&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:d})]})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(Dl,{className:"w-6 h-6 text-amber-500"})," Acompaamientos Generales"]}),i.jsxs("div",{className:"space-y-3",children:[o&&i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),i.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!o&&e.filter(re=>re.id).length>0?i.jsx("div",{className:"grid gap-3",children:e.filter(re=>re.id).map(re=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ys,{className:"w-4 h-4 text-amber-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.docente})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Curso:"})," ",re.curso," "," ",i.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",re.asignatura]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(re.fecha).toLocaleDateString("es-CL")]}),re.bloques&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Bloques:"})," ",re.bloques]}),re.retroalimentacionConsolidada&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(va,{className:"w-3 h-3"}),"Con retroalimentacin IA"]}),I[re.id]&&I[re.id].length>0&&i.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[i.jsx(wu,{className:"w-3 h-3"}),I[re.id].length," Ciclo",I[re.id].length>1?"s":""," OPR"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{Y(re),C("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:()=>{Y(re),C("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),i.jsx("button",{onClick:async()=>{try{const ue=await _ct(re);await H(),alert(`Reparacin completada: ${ue.updated}/${ue.total} ciclos actualizados`)}catch(ue){console.error("Error reparando ciclos:",ue),alert("No se pudo ejecutar la reparacin de ciclos.")}},title:"Reparar visibilidad de ciclos (backfill)",className:"text-amber-700 hover:text-amber-900 dark:text-amber-400 dark:hover:text-amber-300 font-semibold text-sm px-3 py-1 rounded border border-amber-300 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:"Reparar Ciclos"}),i.jsx("button",{onClick:()=>R(re.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Qn,{className:"w-4 h-4"})})]})]}),I[re.id]&&I[re.id].length>0&&i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[i.jsx(wu,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),i.jsx("div",{className:"space-y-2",children:I[re.id].map(ue=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:ue.nombreCiclo||`Registro N ${ue.registroN}`}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(ue.fecha).toLocaleDateString("es-CL"),ue.horaInicio&&ue.horaTermino&&i.jsxs("span",{children:["  ",ue.horaInicio," - ",ue.horaTermino]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>{const le=e.find(ve=>ve.id===re.id);z(ue,le)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("Seguro que desea eliminar este Ciclo OPR?"))try{await dL(ue.id),await H(),alert("Ciclo OPR eliminado exitosamente")}catch(le){console.error("Error deleting OPR cycle:",le),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:i.jsx(Qn,{className:"w-3 h-3"})})]})]},ue.id))})]})]},re.id))}):!o&&i.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsx(Wi,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompaamientos generales registrados"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompaamiento usando el botn superior"})]})]})]}),k.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(wu,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),i.jsx("div",{className:"space-y-3",children:k.map(re=>i.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(wu,{className:"w-4 h-4 text-blue-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.nombreCiclo||`Registro N ${re.registroN}`})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Docente:"})," ",re.docenteInfo||"No especificado"," "," ",i.jsx("span",{className:"font-medium",children:"Curso:"})," ",re.cursoInfo||"No especificado"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(re.fecha).toLocaleDateString("es-CL"),re.horaInicio&&re.horaTermino&&i.jsxs("span",{children:["  ",re.horaInicio," - ",re.horaTermino]})]}),re.videoObservacionUrl&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(va,{className:"w-3 h-3"}),"Con video de observacin"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{z(re)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("Seguro que desea eliminar este Ciclo OPR?"))try{await dL(re.id),await H(),alert("Ciclo OPR eliminado exitosamente")}catch(ue){console.error("Error deleting standalone OPR cycle:",ue),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Qn,{className:"w-4 h-4"})})]})]})},re.id))})]})]}),oe=()=>{const re=g?e.find(le=>le.id===g):null,ue={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in S&&S.docente||"",curso:"curso"in S&&S.curso||"",asignatura:"asignatura"in S&&S.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:N==="general"?g?"Editando Acompaamiento General":"Nuevo Acompaamiento General":v?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),i.jsx("button",{type:"button",onClick:()=>{m("list"),y(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:" Volver al listado"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>C("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Wi,{className:"w-4 h-4"}),"Acompaamiento General"]})}),i.jsx("button",{onClick:()=>C("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(wu,{className:"w-4 h-4"}),"Ciclos OPR"]})}),i.jsx("button",{onClick:()=>C("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${N==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Dl,{className:"w-4 h-4"}),"Dashboard"]})})]})}),d&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:d})]})}),N==="dashboard"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(yct,{acompanamientos:e,ciclosOPR:I,standaloneCiclos:k})}),N==="general"&&i.jsxs("form",{onSubmit:Z,className:"space-y-8",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[i.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(hx,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:W,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:_,children:[i.jsx(x3,{className:"w-4 h-4"}),_?"Generando...":"Generar Retroalimentacin con IA"]}),i.jsxs("button",{type:"button",onClick:K,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(Df,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observacin y rbrica, luego genera automticamente la retroalimentacin. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in S&&S.retroalimentacionConsolidada&&i.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[i.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(va,{className:"w-4 h-4"}),"Retroalimentacin Consolidada Generada:"]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:i.jsx("textarea",{readOnly:!0,rows:8,value:S.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),i.jsxs("select",{name:"docente",value:"docente"in S?S.docente:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:c,children:[i.jsx("option",{value:"",children:c?"Cargando profesores...":"Seleccione un docente"}),r.map(le=>i.jsx("option",{value:le,children:le},le))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),i.jsxs("select",{name:"curso",value:"curso"in S?S.curso:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),Sa.map(le=>i.jsx("option",{value:le,children:le},le))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),i.jsxs("select",{name:"asignatura",value:"asignatura"in S?S.asignatura:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),xa.map(le=>i.jsx("option",{value:le,children:le},le))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),i.jsx("input",{type:"text",name:"bloques",value:"bloques"in S?S.bloques:"",onChange:J,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),i.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in S?S.observacionesGenerales:"",onChange:J,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodologa utilizada, participacin de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(Dl,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observacin - Rbrica de Evaluacin"]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Dbil (1)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:M.map(le=>i.jsx(At.Fragment,{children:le.criteria.map((ve,X)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[X===0&&i.jsx("td",{rowSpan:le.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:le.domain}),i.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ve.name}),ve.levels.map((Ee,Be)=>{const je=Be+1,fe="rubricaResultados"in S&&S.rubricaResultados[ve.name]===je,ye=fe?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return i.jsx("td",{onClick:()=>O(ve.name,je),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${ye} ${fe?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${je} para ${ve.name}`,children:i.jsxs("div",{className:"text-xs leading-relaxed",children:[fe&&i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(va,{className:"w-3 h-3 text-amber-600"}),i.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),Ee]})},je)})]},ve.name))},le.domain))})]})}),Object.keys(S.rubricaResultados||{}).length>0&&i.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[i.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[i.jsx(Dl,{className:"w-4 h-4"}),"Resumen de Evaluacin (",Object.keys(S.rubricaResultados).length," criterios evaluados)"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(S.rubricaResultados).map(([le,ve])=>i.jsxs("div",{className:"flex justify-between items-center py-1",children:[i.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[le,":"]}),i.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${ve===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":ve===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":ve===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",ve]})]},le))})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:()=>m("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:_,children:[_&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g?"Actualizar":"Guardar"," Acompaamiento"]})]})]}),N==="opr"&&i.jsx(Oct,{acompanamiento:re||ue,cicloToEdit:v,profesores:r,onSave:async le=>{var ve;try{const X=(re==null?void 0:re.id)||typeof le.acompanamientoId=="string"&&le.acompanamientoId||void 0,Ee=(re==null?void 0:re.docente)||le.docenteInfo||"",Be=(ve=a[Ee])==null?void 0:ve.toLowerCase();if(v&&v.id)await kct(v.id,{...le,docenteEmailLower:Be}),alert("Ciclo OPR actualizado exitosamente");else{if(!X||String(X).startsWith("temp-")){const je={...le,docenteEmailLower:Be,acompanamientoId:""};await OZ(je)}else{const je={...le,docenteEmailLower:Be,acompanamientoId:String(X)};await OZ(je)}alert("Ciclo OPR guardado exitosamente")}y(null),await U(),await H(),m("list")}catch(X){console.error(" Error al guardar ciclo OPR:",X);const Ee=X.message||"Error desconocido al guardar el ciclo OPR";f(Ee),alert(`Error al guardar el ciclo OPR: ${Ee}`)}},onCancel:()=>{y(null),m("list")}})]})};return o||c?i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando mdulo de acompaamiento..."}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[o&&"Cargando registros...",c&&" Cargando profesores..."]})]})})}):i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:A==="list"?ce():oe()})})},FT="proyectos_interdisciplinarios",sH="entregas_interdisciplinarias",Fct="usuarios",iH=e=>{const t=e.data();return{id:e.id,...t}},Rct=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),Lct=e=>{const t=Lt(pt(dt,FT),tr("nombreProyecto","asc"));return hr(t,n=>{try{const a=n.docs.map(s=>Rct(iH(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},Mct=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:wr.now(),updatedAt:wr.now()};return(await dn(pt(dt,FT),t)).id},FZ=async(e,t)=>{const{id:r,...n}=t,a=er(dt,FT,e);await yi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:wr.now()},{merge:!0})},Uct=async e=>{const t=er(dt,FT,e),r=Lt(pt(dt,sH),ur("planificacionId","==",e)),n=await Rr(r),a=$p(dt);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},Hct=(e,t)=>{const r=Lt(pt(dt,sH),ur("planificacionId","==",e));return hr(r,a=>{const s=a.docs.map(o=>iH(o));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},Qct=async(e,t)=>{const r=er(dt,sH,e);await yi(r,{feedbackProfesor:t,fechaFeedback:wr.fromDate(new Date)},{merge:!0})},mme=e=>{const t=Lt(pt(dt,Fct));return hr(t,n=>{const a=n.docs.map(s=>iH(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},BO={},fL={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hiptesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Disear","Construir","Idear"]},mN=({href:e})=>{if(!e)return i.jsx("span",{className:"text-slate-400",children:""});const t=e.startsWith("http")?e:`https://${e}`;return i.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(H5,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},_g=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>i.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),Vct=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=w.useState(null),a=w.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=w.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),o=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},l=({data:c,onClose:u,onSave:d})=>{const[f,A]=w.useState(c.activity),m=x=>A({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(X0,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),i.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),i.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),i.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),i.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),i.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),i.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Uc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):i.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:i.jsx(Dc,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),A=d.type==="activity";return i.jsxs("tr",{className:`${A?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>A&&n({planId:d.planId,activity:d}),children:[i.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),i.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),i.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(mN,{href:d.recursoUrl})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(o,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&i.jsx(l,{data:r,onClose:()=>n(null),onSave:t})]})},$ct=({planificaciones:e,onBack:t})=>{const r=w.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(A=>{var m;(m=A.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(fL).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=w.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(A=>{u[A]=(u[A]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(A=>{A.contenidos&&A.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","ms","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=w.useMemo(()=>{const c=e.length,u=e.reduce((A,m)=>{var g;return A+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((A,m)=>{var g;return A+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(A=>A.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((m,g)=>g[1]-m[1]).slice(0,20),A=Math.max(...f.map(([,m])=>m));return A?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),i.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/A*2),v=Math.max(.6,g/A);return i.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},o=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:i.jsx(MN,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonoma de Bloom"})]}),i.jsx("div",{className:"space-y-4",children:Object.keys(fL).map(A=>{const m=c[A]||0,g=d>0?m/d*100:0,x=f[A]||"bg-slate-400";return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:A}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},A)})})]})},l=({icon:c,title:u,value:d,description:f,color:A})=>i.jsxs("div",{className:`bg-gradient-to-br ${A} p-6 rounded-2xl shadow-lg text-white`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold",children:d}),i.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),i.jsx("p",{className:"text-white/90 text-sm",children:f})]});return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:i.jsx(Q5,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analtico"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Anlisis de habilidades y contenidos desarrollados"})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(UN,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(l,{icon:i.jsx(wA,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),i.jsx(l,{icon:i.jsx($5e,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),i.jsx(l,{icon:i.jsx(Wi,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),i.jsx(l,{icon:i.jsx(ys,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(o,{data:r.categoriaCount}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(s1,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribucin de Asignaturas"})]}),i.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),i.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(s,{data:n.palabrasCount,title:"Contenidos Ms Frecuentes"}),i.jsx(s,{data:r.habilidadesCount,title:"Habilidades Ms Desarrolladas"})]})]})},zct=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=w.useState([]),[s,o]=w.useState([]),[l,c]=w.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=w.useState(null);w.useEffect(()=>{const v=mme(a),y=Hct(e.id,o);return()=>{v(),y()}},[e.id]);const f=w.useMemo(()=>n.filter(v=>v.profile===Ot.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),A=async v=>{d(v.id);{alert("La API Key de Gemini no est configurada."),d(null);return}},m=v=>v.map(y=>{var N;return((N=r.find(C=>C.id===y))==null?void 0:N.nombreCompleto)||y}).join(", ");return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(UN,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),i.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(N=>N.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>i.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),i.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=s.find(N=>N.tareaId===l.id&&N.estudianteId===v.id);return i.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[i.jsx(YC,{className:"w-4 h-4"})," Entregado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[i.jsx(Uc,{className:"w-4 h-4"})," Pendiente"]})})]}),y?i.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),i.jsx(mN,{href:y.enlaceUrl})]}),y.archivoAdjunto&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),i.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[i.jsx(Df,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentacin del profesor:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{placeholder:"Escribir retroalimentacin...",defaultValue:y.feedbackProfesor||"",onBlur:N=>Qct(y.id,N.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),i.jsx("button",{onClick:()=>A(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(dx,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):i.jsxs("div",{className:"text-center py-6",children:[i.jsx(Uc,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante an no ha realizado la entrega"})]})]},v.id)})})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Uc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),i.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[i.jsx(UN,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},Gct=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:o})=>{const[l,c]=w.useState(null),u=BO==null?void 0:BO.VITE_GEMINI_API_KEY,d=A=>A.map(m=>{var g;return((g=o.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async A=>{var m,g,x;if(!u){alert("La API Key de Gemini no est configurada.");return}if(!e.trim()){alert("Ingrese una descripcin del proyecto.");return}c(A);try{const y=new s_(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(A==="obj"){const N=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripcin: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,C=await y.generateContent(N);n(C.response.text().replace(/(\*\*|\*)/g,""))}else if(A==="ind"){const N=`Genera 5 a 7 indicadores de logro observables.
Descripcin: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,C=await y.generateContent(N);a(C.response.text().replace(/(\*\*|\*)/g,""))}else{const N=`Devuelve SOLO un JSON vlido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripcin: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,_=(await y.generateContent(N)).response.text().replace(/^```json\s*|```\s*$/g,""),j=JSON.parse(_);s({actividades:(m=j.actividades)==null?void 0:m.map(I=>({...I,id:crypto.randomUUID()})),fechasClave:(g=j.fechasClave)==null?void 0:g.map(I=>({id:crypto.randomUUID(),nombre:I.nombre,fecha:I.fecha,recursoUrl:I.recursoUrl})),tareas:(x=j.tareas)==null?void 0:x.map((I,T)=>({...I,id:crypto.randomUUID(),numero:T+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generacin con IA.")}finally{c(null)}};return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(dx,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(dx,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",i.jsx("span",{children:"Generando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(dx,{className:"w-4 h-4"})," ",i.jsx("span",{children:"Estructura IA"})]})})]})},qct=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=w.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[o,l]=w.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=w.useState(null),[d,f]=w.useState({nombre:"",fecha:"",recursoUrl:""}),[A,m]=w.useState(null),[g,x]=w.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[v,y]=w.useState(null);w.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const N=z=>s(W=>({...W,[z.target.name]:z.target.value})),C=z=>{s(W=>{const Z=W.asignaturas,V=Z.includes(z)?Z.filter(R=>R!==z):[...Z,z];let Y=W.contenidosPorAsignatura;return V.includes(z)&&!Z.includes(z)&&(Y=[...Y,{asignatura:z,contenidos:"",habilidades:[]}]),!V.includes(z)&&Z.includes(z)&&(Y=Y.filter(R=>R.asignatura!==z)),{...W,asignaturas:V,contenidosPorAsignatura:Y}})},_=z=>s(W=>({...W,cursos:W.cursos.includes(z)?W.cursos.filter(Z=>Z!==z):[...W.cursos,z]})),j=z=>s(W=>({...W,docentesResponsables:W.docentesResponsables.includes(z)?W.docentesResponsables.filter(Z=>Z!==z):[...W.docentesResponsables,z]})),I=(z,W,Z)=>s(V=>({...V,contenidosPorAsignatura:V.contenidosPorAsignatura.map(Y=>Y.asignatura===z?{...Y,[W]:Z}:Y)})),T=(z,W)=>s(Z=>({...Z,contenidosPorAsignatura:Z.contenidosPorAsignatura.map(V=>V.asignatura===z?{...V,habilidades:V.habilidades.includes(W)?V.habilidades.filter(Y=>Y!==W):[...V.habilidades,W]}:V)})),k=()=>{if(!o.nombre||!o.fechaInicio||!o.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}c?(s(z=>({...z,actividades:z.actividades.map(W=>W.id===c?{...o,id:c}:W)})),u(null)):s(z=>({...z,actividades:[...z.actividades||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},B=z=>{u(z.id),l(z)},M=z=>{window.confirm("Eliminar esta actividad?")&&s(W=>({...W,actividades:W.actividades.filter(Z=>Z.id!==z)}))},P=()=>{if(!d.nombre||!d.fecha){alert("Nombre y fecha son obligatorios para el hito.");return}A?(s(z=>({...z,fechasClave:z.fechasClave.map(W=>W.id===A?{...d,id:A}:W)})),m(null)):s(z=>({...z,fechasClave:[...z.fechasClave||[],{...d,id:crypto.randomUUID()}]})),f({nombre:"",fecha:"",recursoUrl:""})},S=z=>{m(z.id),f(z)},L=z=>{window.confirm("Eliminar este hito?")&&s(W=>({...W,fechasClave:W.fechasClave.filter(Z=>Z.id!==z)}))},U=()=>{var z,W;if(!g.instrucciones||!g.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}if(v){const Z={...g,id:v,numero:((z=a.tareas.find(V=>V.id===v))==null?void 0:z.numero)||0};s(V=>({...V,tareas:V.tareas.map(Y=>Y.id===v?Z:Y)})),y(null)}else{const Z={id:crypto.randomUUID(),numero:(((W=a.tareas)==null?void 0:W.length)||0)+1,...g};s(V=>({...V,tareas:[...V.tareas||[],Z]}))}x({instrucciones:"",fechaEntrega:"",recursoUrl:""})},q=z=>{y(z.id),x({instrucciones:z.instrucciones,fechaEntrega:z.fechaEntrega,recursoUrl:z.recursoUrl||""})},H=z=>{window.confirm("Eliminar esta tarea?")&&s(W=>({...W,tareas:W.tareas.filter(Z=>Z.id!==z)}))};return i.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:i.jsx(wA,{className:"w-10 h-10 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Disee experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx(_g,{icon:i.jsx(Wi,{className:"w-6 h-6 text-slate-600"}),label:"Informacin del Proyecto",aiButton:i.jsx(Gct,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:z=>s(W=>({...W,objetivos:z})),onIndicadores:z=>s(W=>({...W,indicadoresLogro:z})),onEstructura:z=>s(W=>{var Z,V,Y;return{...W,actividades:(Z=z.actividades)!=null&&Z.length?z.actividades:W.actividades,fechasClave:(V=z.fechasClave)!=null&&V.length?z.fechasClave:W.fechasClave,tareas:(Y=z.tareas)!=null&&Y.length?z.tareas:W.tareas}})}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),i.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:N,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripcin del Proyecto"}),i.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:N,placeholder:"Detalle metodologa, producto final y propsito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),i.jsx(_g,{icon:i.jsx(Ys,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:i.jsx("div",{className:"space-y-3",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(z=>i.jsx("button",{type:"button",onClick:()=>j(z.id),className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(z.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(z.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:i.jsx(fx,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm",children:z.nombreCompleto}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:z.email})]})]})},z.id))})})}),i.jsx(_g,{icon:i.jsx(a1,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:Sa.map(z=>i.jsx("button",{type:"button",onClick:()=>_(z),className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(z)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:z},z))})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(_g,{icon:i.jsx(ys,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:xa.map(z=>i.jsx("button",{type:"button",onClick:()=>C(z),className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(z)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:z},z))})]}),a.contenidosPorAsignatura.length>0&&i.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(z=>i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[i.jsx(ys,{className:"w-4 h-4"})," ",z.asignatura]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),i.jsx("textarea",{value:z.contenidos,onChange:W=>I(z.asignatura,"contenidos",W.target.value),placeholder:`Detalle los contenidos especficos de ${z.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades segn Taxonoma de Bloom:"}),i.jsx("div",{className:"space-y-2",children:Object.entries(fL).map(([W,Z])=>i.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[i.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[W,":"]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:Z.map(V=>i.jsx("button",{type:"button",onClick:()=>T(z.asignatura,V),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${z.habilidades.includes(V)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:V},V))})]},W))}),z.habilidades.length>0&&i.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[i.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:z.habilidades.map(W=>i.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:W},W))})]})]})]})]},z.asignatura))]})]})}),i.jsx(_g,{icon:i.jsx(R1,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:i.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:N,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsx(_g,{icon:i.jsx(Dl,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de xito",children:i.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:N,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsxs(_g,{icon:i.jsx(Yo,{className:"w-6 h-6 text-slate-600"}),label:"Planificacin y Cronograma",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Dc,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),i.jsx("input",{value:o.nombre,onChange:z=>l({...o,nombre:z.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),i.jsx("input",{type:"date",value:o.fechaInicio,onChange:z=>l({...o,fechaInicio:z.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),i.jsx("input",{type:"date",value:o.fechaFin,onChange:z=>l({...o,fechaFin:z.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:o.recursoUrl||"",onChange:z=>l({...o,recursoUrl:z.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx("button",{type:"button",onClick:k,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:c?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(xi,{className:"w-4 h-4"})," Agregar"]})})})]}),!!a.actividades.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.actividades.map(z=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:z.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",z.fechaInicio," - ",z.fechaFin,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(mN,{href:z.recursoUrl}),i.jsx("button",{onClick:()=>B(z),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(X0,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>M(z.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Qn,{className:"w-3 h-3"})})]})]},z.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(YC,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),i.jsx("input",{value:d.nombre,onChange:z=>f({...d,nombre:z.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),i.jsx("input",{type:"date",value:d.fecha,onChange:z=>f({...d,fecha:z.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"sm:col-span-1",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:d.recursoUrl||"",onChange:z=>f({...d,recursoUrl:z.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("button",{type:"button",onClick:P,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:A?"Actualizar":i.jsxs(i.Fragment,{children:[i.jsx(xi,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.fechasClave.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.fechasClave.map(z=>i.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm flex justify-between items-center gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:z.nombre})," ",i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["(",z.fecha,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(mN,{href:z.recursoUrl}),i.jsx("button",{onClick:()=>S(z),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(X0,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>L(z.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Qn,{className:"w-3 h-3"})})]})]},z.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(MN,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-5",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones"}),i.jsx("input",{value:g.instrucciones,onChange:z=>x({...g,instrucciones:z.target.value}),placeholder:"Descripcin de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),i.jsx("input",{type:"date",value:g.fechaEntrega,onChange:z=>x({...g,fechaEntrega:z.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:g.recursoUrl||"",onChange:z=>x({...g,recursoUrl:z.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx("button",{type:"button",onClick:U,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:v?i.jsx(X0,{className:"w-4 h-4"}):i.jsx(xi,{className:"w-4 h-4"})})})]}),!!a.tareas.length&&i.jsx("div",{className:"mt-4 space-y-2",children:a.tareas.map(z=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",z.numero]}),i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:z.instrucciones})]}),i.jsxs("div",{className:"text-right space-y-1",children:[i.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:z.fechaEntrega}),"recursoUrl"in z?i.jsx(mN,{href:z.recursoUrl}):i.jsx("span",{className:"text-slate-400 text-xs",children:""})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2 pl-2 border-l ml-2",children:[i.jsx("button",{onClick:()=>q(z),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",children:i.jsx(X0,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>H(z.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",children:i.jsx(Qn,{className:"w-3 h-3"})})]})]},z.id))})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),i.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},RZ=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[a,s]=w.useState(!0),[o,l]=w.useState("list"),[c,u]=w.useState(null),[d,f]=w.useState(null),[A,m]=w.useState(null),[g,x]=w.useState("all"),v=w.useMemo(()=>g==="all"?e:e.filter(k=>k.id===g),[e,g]);w.useEffect(()=>{s(!0);const k=mme(M=>{const P=M.filter(S=>S.profile===Ot.PROFESORADO);n(P)}),B=Lct(M=>{const P=M.map(S=>({...S,docentesResponsables:Array.isArray(S.docentesResponsables)?S.docentesResponsables:[S.docentesResponsables].filter(Boolean),contenidosPorAsignatura:S.contenidosPorAsignatura||[],actividades:S.actividades||[],fechasClave:S.fechasClave||[]}));t(P),s(!1)});return()=>{k(),B()}},[]);const y=w.useCallback(async(k,B)=>{const M=e.find(S=>S.id===k);if(!M)return;const P={...M,actividades:(M.actividades||[]).map(S=>S.id===B.id?B:S)};await FZ(k,P)},[e]),N=async k=>{try{const B=k.id&&String(k.id).length>0,M={...k};if(B){const{id:P,...S}=M;await FZ(k.id,S)}else delete M.id,await Mct(M);l("list"),u(null)}catch(B){console.error("Error al guardar la planificacin:",B),alert("No se pudo guardar la planificacin.")}},C=k=>{u(k),l("form")},_=async k=>{if(!k){alert("Error: ID invlido.");return}if(window.confirm("Est seguro de eliminar esta planificacin?"))try{await Uct(k)}catch(B){console.error(B),alert("No se pudo eliminar la planificacin.")}},j=()=>{u(null),l("form")},I=async k=>{f(k.id);try{const B=new Tr("p","mm","a4"),M=B.internal.pageSize.getHeight(),P=B.internal.pageSize.getWidth(),S=15,L=P-S*2;let U=S,q=1;const W=await(await fetch("https://res.cloudinary.com/dwncmu1wu/image/upload/v1756260600/Captura_de_pantalla_2025-08-26_a_la_s_10.09.17_p._m._aakgkt.png")).blob(),Z=await new Promise((re,ue)=>{const le=new FileReader;le.onloadend=()=>re(le.result),le.onerror=ue,le.readAsDataURL(W)}),V=()=>{B.addImage(Z,"PNG",S,U,L,20),U+=25},Y=()=>{B.setFont("helvetica","normal"),B.setFontSize(9),B.setTextColor(149,165,166);const re=`Pgina ${q}`,ue=B.getStringUnitWidth(re)*B.getFontSize()/B.internal.scaleFactor;B.text(re,(P-ue)/2,M-10)},R=re=>U+re>M-S?(Y(),B.addPage(),q++,U=S,V(),!0):!1,O=re=>{R(15),B.setFont("helvetica","bold"),B.setFontSize(14),B.setTextColor(44,62,80),B.text(re,S,U),U+=8},K=re=>{if(!re||!re.trim())return;B.setFont("helvetica","normal"),B.setFontSize(11),B.setTextColor(86,101,115);const ue=B.splitTextToSize(re,L);R(ue.length*5+5),B.text(ue,S,U),U+=ue.length*5+8};V(),B.setFont("helvetica","bold"),B.setFontSize(22),B.setTextColor(41,128,185);const J=B.splitTextToSize(k.nombreProyecto,L);R(J.length*10+10),B.text(J,S,U),U+=J.length*9+10,Li(B,{startY:U,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(re=>re.map(ue=>{var le;return((le=r.find(ve=>ve.id===ue))==null?void 0:le.nombreCompleto)||ue}).join(", "))(k.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},k.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},k.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold",fillColor:[245,245,245]}},didDrawPage:re=>{re.pageNumber>1&&(U=S,V())}}),U=B.lastAutoTable.finalY+10,O("Descripcin del Proyecto"),K(k.descripcionProyecto),O("Objetivos de Aprendizaje"),K(k.objetivos),O("Indicadores de Logro"),K(k.indicadoresLogro),k.contenidosPorAsignatura&&k.contenidosPorAsignatura.length>0&&(O("Contenidos y Habilidades por Asignatura"),k.contenidosPorAsignatura.forEach(re=>{var ue;R(15),B.setFont("helvetica","bold"),B.setFontSize(12),B.setTextColor(52,73,94),B.text(`${re.asignatura}:`,S,U),U+=7,re.contenidos&&K(`Contenidos: ${re.contenidos}`),(ue=re.habilidades)!=null&&ue.length&&K(`Habilidades: ${re.habilidades.join(", ")}`)}));const oe={theme:"striped",headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},styles:{fontSize:10,cellPadding:2.5,halign:"left"},didDrawPage:re=>{re.pageNumber>q&&(q=re.pageNumber,Y()),re.pageNumber>1&&(U=S,V())}};if(k.actividades&&k.actividades.length>0&&(O("Cronograma de Actividades"),Li(B,{...oe,startY:U,head:[["Actividad","Inicio","Fin","Recurso"]],body:k.actividades.map(re=>[re.nombre,re.fechaInicio,re.fechaFin,re.recursoUrl||""])}),U=B.lastAutoTable.finalY+10),k.fechasClave&&k.fechasClave.length>0&&(O("Hitos y Fechas Clave"),Li(B,{...oe,startY:U,head:[["Hito","Fecha","Recurso"]],body:k.fechasClave.map(re=>[re.nombre,re.fecha,re.recursoUrl||""])}),U=B.lastAutoTable.finalY+10),k.tareas&&k.tareas.length>0){O("Tareas para Estudiantes");const re=k.tareas.map(ue=>[String(ue.numero||""),ue.instrucciones,ue.fechaEntrega,ue.recursoUrl||""]);Li(B,{...oe,startY:U,head:[["#","Instrucciones","Entrega","Recurso"]],body:re}),U=B.lastAutoTable.finalY+10}Y(),B.save(`Proyecto_${k.nombreProyecto.replace(/\s/g,"_")}.pdf`)}catch(B){console.error("Error al generar PDF:",B),alert("No se pudo generar el PDF. Verifique la consola para ms detalles.")}finally{f(null)}},T=k=>k.map(B=>{var M;return((M=r.find(P=>P.id===B))==null?void 0:M.nombreCompleto)||B}).join(", ");return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):A?i.jsx(zct,{plan:A,onBack:()=>m(null),availableTeachers:r}):o==="dashboard"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),i.jsx($ct,{planificaciones:e,onBack:()=>l("list")})]}):o==="form"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{l("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsx(qct,{initialPlan:c,onSave:N,onCancel:()=>{l("list"),u(null)},availableTeachers:r})]}):i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:i.jsx(wA,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[i.jsx(Q5,{className:"w-5 h-5"})," Ver Dashboard"]}),i.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[i.jsx(xi,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:i.jsx(wA,{className:"w-12 h-12 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),i.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(xi,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(k=>i.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[i.jsx("div",{className:"flex justify-between items-start mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:k.nombreProyecto}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(a1,{className:"w-4 h-4"}),i.jsxs("span",{children:["Cursos: ",k.cursos.join(", ")]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(Ys,{className:"w-4 h-4"}),i.jsxs("span",{children:["Profesores: ",T(k.docentesResponsables)]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(ys,{className:"w-4 h-4"}),i.jsxs("span",{children:["Asignaturas: ",k.asignaturas.length]})]})]})]})}),!!k.descripcionProyecto&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:k.descripcionProyecto}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>m(k),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[i.jsx(YC,{className:"w-4 h-4"})," Entregas"]}),i.jsxs("button",{type:"button",onClick:()=>I(k),disabled:d===k.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===k.id?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):i.jsx(Df,{className:"w-4 h-4"}),"PDF"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>C(k),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:i.jsx(X0,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",onClick:()=>_(k.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:i.jsx(Qn,{className:"w-4 h-4"})})]})]})]},k.id))})]}),e.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(O4e,{className:"w-5 h-5 text-slate-600"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),i.jsxs("select",{value:g,onChange:k=>x(k.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[i.jsx("option",{value:"all",children:"Todos"}),e.map(k=>i.jsx("option",{value:k.id,children:k.nombreProyecto},k.id))]})]})]}),i.jsx("div",{id:"gantt-container-vertical",children:i.jsx(Vct,{planificaciones:v,onActivityUpdate:y})})]})]})},ry="panol_maquinas",_E="panol_registros",Kct=e=>{const t=Lt(pt(dt,ry),tr("nombre","asc"));return hr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},Wct=e=>{const t=Lt(pt(dt,_E),tr("fecha","desc"));return hr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},Xct=async e=>(await dn(pt(dt,ry),{...e,createdAt:Xn(),updatedAt:Xn()})).id,Yct=async(e,t)=>{await Zi(er(dt,ry,e),{...t,updatedAt:Xn()})},Jct=async e=>{const t=Lt(pt(dt,_E),ur("maquinaId","==",e));if(!(await Rr(t)).empty)throw new Error("No se puede eliminar una mquina con registros de uso. Elimine los registros primero.");await fa(er(dt,ry,e))},Zct=async e=>(await dn(pt(dt,_E),{...e,createdAt:Xn(),updatedAt:Xn()})).id,eut=async(e,t)=>{await Zi(er(dt,_E,e),{...t,updatedAt:Xn()})},tut=async e=>{await fa(er(dt,_E,e))},rut=async()=>{if(!(await Rr(pt(dt,ry))).empty)return;const t=$p(dt);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidrulica",especialidad:"Automotriz"}].forEach(n=>{const a=er(pt(dt,ry));t.set(a,{...n,createdAt:Xn(),updatedAt:Xn()})}),await t.commit()},nut=()=>{var q;const[e,t]=w.useState([]),[r,n]=w.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,o]=w.useState(a),[l,c]=w.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=w.useState(u),[A,m]=w.useState(null),[g,x]=w.useState({maquinaId:"",curso:"",profesor:"",fecha:""});w.useEffect(()=>{rut().catch(console.error);const H=Kct(t),z=Wct(n);return()=>{H&&H(),z&&z()}},[]);const v=async H=>{if(H.preventDefault(),!!d.nombre.trim())try{A?await Yct(A.id,{...d}):await Xct({...d}),f(u),m(null)}catch(z){alert(z.message||"Error al guardar mquina")}},y=w.useCallback(async H=>{try{await Jct(H)}catch(z){alert(z.message||"Error al eliminar mquina")}},[]),N=async H=>{H.preventDefault();const z=l||s;if(!z.curso||!z.profesorResponsable.trim()||!z.maquinaId||Number(z.totalHoras)<=0){alert("Curso, Profesor, Mquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:W,...Z}=l;await eut(W,Z)}else await Zct({...s});o(a),c(null)}catch(W){alert(W.message||"Error al guardar registro")}},C=w.useCallback(async H=>{try{await tut(H)}catch(z){alert(z.message||"Error al eliminar registro")}},[]),_=w.useMemo(()=>r.filter(H=>(g.maquinaId===""||H.maquinaId===g.maquinaId)&&(g.curso===""||H.curso===g.curso)&&(g.profesor===""||H.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||H.fecha===g.fecha)).sort((H,z)=>new Date(z.fecha).getTime()-new Date(H.fecha).getTime()),[r,g]),j=w.useMemo(()=>new Map(e.map(H=>[H.id,H])),[e]),I=w.useMemo(()=>_.reduce((H,z)=>H+(Number(z.totalHoras)||0),0),[_]),T=w.useMemo(()=>{const H=new Map;_.forEach(W=>{var V;const Z=((V=j.get(W.maquinaId))==null?void 0:V.nombre)||"N/A";H.set(Z,(H.get(Z)||0)+(Number(W.totalHoras)||0))});const z=Array.from(H.entries()).map(([W,Z])=>({maquina:W,horas:Number(Z.toFixed(2))}));return z.sort((W,Z)=>Z.horas-W.horas),z},[_,j]),k=()=>{const H=_.map(Z=>{var V,Y;return{Fecha:Z.fecha,Curso:Z.curso,Profesor:Z.profesorResponsable,Mquina:((V=j.get(Z.maquinaId))==null?void 0:V.nombre)||"N/A",Especialidad:((Y=j.get(Z.maquinaId))==null?void 0:Y.especialidad)||"N/A","Total Horas":Z.totalHoras,Observaciones:Z.observaciones}}),z=Ws.json_to_sheet(H),W=Ws.book_new();Ws.book_append_sheet(W,z,"RegistrosPaol"),_y(W,"Registros_Paol.xlsx")},B=()=>{const H=new Tr;Li(H,{head:[["Fecha","Curso","Profesor","Mquina","Especialidad","Total Horas","Observaciones"]],body:_.map(z=>{var W,Z;return[z.fecha,z.curso,z.profesorResponsable,((W=j.get(z.maquinaId))==null?void 0:W.nombre)||"N/A",((Z=j.get(z.maquinaId))==null?void 0:Z.especialidad)||"N/A",z.totalHoras,z.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:z=>{H.setFontSize(12),H.setFont("helvetica","bold"),H.text("LICEO INDUSTRIAL DE RECOLETA",z.settings.margin.left,14),H.setFontSize(10),H.setFont("helvetica","normal"),H.text("Informe de Registros de Paol",z.settings.margin.left,20)}}),H.save("Registros_Paol.pdf")},M="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",P=(H,z)=>i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z}`,children:H}),S=({icon:H,label:z,value:W,accent:Z="from-indigo-500 to-sky-500"})=>i.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${Z} opacity-10`}),i.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[i.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:H}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:z}),i.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:W})]})]})]}),L=({title:H,icon:z,children:W,right:Z,accent:V="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>i.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${V}`}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[z," ",i.jsx("span",{children:H})]}),Z]}),W]})]}),U=()=>{const H=l||s,z=l?c:o;return i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Yo,{size:16})," Fecha"]}),i.jsx("input",{name:"fecha",type:"date",value:H.fecha,onChange:W=>z({...H,fecha:W.target.value}),className:M,required:!0})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Ys,{size:16})," Curso"]}),i.jsxs("select",{name:"curso",value:H.curso,onChange:W=>z({...H,curso:W.target.value}),className:M,required:!0,children:[i.jsx("option",{value:"",children:"Curso"}),Sa.map(W=>i.jsx("option",{children:W},W))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ys,{size:16})," Profesor"]}),i.jsxs("select",{name:"profesorResponsable",value:H.profesorResponsable,onChange:W=>z({...H,profesorResponsable:W.target.value}),className:M,required:!0,children:[i.jsx("option",{value:"",children:"Profesor Responsable"}),TF.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(hx,{size:16})," Mquina"]}),i.jsxs("select",{name:"maquinaId",value:H.maquinaId,onChange:W=>z({...H,maquinaId:W.target.value}),className:M,required:!0,children:[i.jsx("option",{value:"",children:"Mquina"}),e.map(W=>i.jsx("option",{value:W.id,children:W.nombre},W.id))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(M5,{size:16})," Total de Horas"]}),i.jsx("input",{name:"totalHoras",type:"number",value:H.totalHoras,onChange:W=>z({...H,totalHoras:Number(W.target.value)}),className:M,required:!0,min:.5,step:.5})]}),i.jsxs("div",{className:"lg:col-span-6",children:[i.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),i.jsx("textarea",{name:"observaciones",value:H.observaciones,onChange:W=>z({...H,observaciones:W.target.value}),placeholder:"Observaciones...",className:M+" min-h-[40px]",rows:2})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&i.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[i.jsx(No,{size:16})," Cancelar"]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?i.jsx(Ml,{size:16}):i.jsx(xi,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Paol: Registro de Uso de Mquinas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra mquinas, registra usos y exporta informes (Firestore)."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[i.jsx(p3,{size:18})," Excel"]}),i.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[i.jsx(Wi,{size:18})," PDF"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(S,{icon:i.jsx(hx,{className:"w-5 h-5 text-indigo-600"}),label:"Mquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),i.jsx(S,{icon:i.jsx(Wi,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:_.length,accent:"from-sky-500 to-cyan-500"}),i.jsx(S,{icon:i.jsx(M5,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:I.toFixed(1),accent:"from-emerald-500 to-lime-500"}),i.jsx(S,{icon:i.jsx(Yo,{className:"w-5 h-5 text-amber-600"}),label:"ltima actualizacin",value:(q=r[0])!=null&&q.fecha?new Date(r[0].fecha).toLocaleDateString():"",accent:"from-amber-500 to-rose-400"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[i.jsx("div",{className:"xl:col-span-3",children:i.jsx(L,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:i.jsx(Z_e,{size:18}),children:i.jsx(U,{})})}),i.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:i.jsx(L,{title:"Uso por mquina (horas)",icon:i.jsx(Dl,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:i.jsx("div",{className:"flex gap-2 items-center",children:P(`${T.length} mquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:i.jsx("div",{className:"h-[320px] w-full",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(yf,{data:T,margin:{top:8,right:16,bottom:8,left:0},children:[i.jsx(Rh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),i.jsx(Lc,{}),i.jsx(qo,{}),i.jsx(Xp,{}),i.jsx(Ed,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),i.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:i.jsxs(L,{title:"Administrar mquinas",icon:i.jsx(hx,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[i.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[i.jsx("input",{value:d.nombre,onChange:H=>f({...d,nombre:H.target.value}),placeholder:"Nombre mquina",className:M+" md:col-span-2"}),i.jsxs("select",{value:d.especialidad,onChange:H=>f({...d,especialidad:H.target.value}),className:M+" md:col-span-2",children:[i.jsx("option",{value:"Industrial",children:"Industrial"}),i.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[A?i.jsx(Ml,{size:16}):i.jsx(xi,{size:16}),A?"Guardar":"Agregar"]})]}),i.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(H=>i.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:H.nombre}),i.jsx("div",{className:"text-xs",children:H.especialidad==="Industrial"?P("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):P("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{m(H),f(H)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:i.jsx(QN,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>y(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:i.jsx(Qn,{size:16,className:"text-red-600"})})]})]},H.id))})]})}),i.jsx("div",{className:"xl:col-span-2 order-3",children:i.jsxs(L,{title:"Historial de uso",icon:i.jsx(Wi,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(JC,{size:16,className:"text-slate-600"})}),children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[i.jsx("input",{type:"date",value:g.fecha,onChange:H=>x({...g,fecha:H.target.value}),className:M,placeholder:"Fecha"}),i.jsxs("select",{value:g.curso,onChange:H=>x({...g,curso:H.target.value}),className:M,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),Sa.map(H=>i.jsx("option",{children:H},H))]}),i.jsxs("select",{value:g.maquinaId,onChange:H=>x({...g,maquinaId:H.target.value}),className:M,children:[i.jsx("option",{value:"",children:"Todas las Mquinas"}),e.map(H=>i.jsx("option",{value:H.id,children:H.nombre},H.id))]}),i.jsxs("div",{className:"relative",children:[i.jsx(Cy,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),i.jsx("input",{value:g.profesor,onChange:H=>x({...g,profesor:H.target.value}),placeholder:"Buscar profesor...",className:M+" pl-9"})]})]}),i.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Mquina"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),i.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),i.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[_.map(H=>{var z;return i.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.fecha}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((z=j.get(H.maquinaId))==null?void 0:z.nombre)||"N/A"}),i.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[H.profesorResponsable," ",i.jsxs("span",{className:"text-slate-400",children:["(",H.curso,")"]})]}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.totalHoras}),i.jsxs("td",{className:"px-3 py-2 text-center",children:[i.jsx("button",{onClick:()=>c(H),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:i.jsx(QN,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>C(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:i.jsx(Qn,{size:16,className:"text-red-600"})})]})]},H.id)}),_.length===0&&i.jsx("tr",{children:i.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function lc(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=lc(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const aut={},LZ=e=>{let t;const r=new Set,n=(d,f)=>{const A=typeof d=="function"?d(t):d;if(!Object.is(A,t)){const m=t;t=f??(typeof A!="object"||A===null)?A:Object.assign({},t,A),r.forEach(g=>g(t,m))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(aut?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},sut=e=>e?LZ(e):LZ,{useDebugValue:iut}=At,{useSyncExternalStoreWithSelector:out}=RHe,lut=e=>e;function pme(e,t=lut,r){const n=out(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return iut(n),n}const MZ=(e,t)=>{const r=sut(e),n=(a,s=t)=>pme(r,a,s);return Object.assign(n,r),n},cut=(e,t)=>e?MZ(e,t):MZ;function Hl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var uut={value:()=>{}};function RT(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new VS(r)}function VS(e){this._=e}function dut(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}VS.prototype=RT.prototype={constructor:VS,on:function(e,t){var r=this._,n=dut(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=fut(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=UZ(r[a],e.name,t);else if(t==null)for(a in r)r[a]=UZ(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new VS(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function fut(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function UZ(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=uut,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var hL="http://www.w3.org/1999/xhtml";const HZ={svg:"http://www.w3.org/2000/svg",xhtml:hL,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function LT(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),HZ.hasOwnProperty(t)?{space:HZ[t],local:e}:e}function hut(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===hL&&t.documentElement.namespaceURI===hL?t.createElement(e):t.createElementNS(r,e)}}function Aut(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function gme(e){var t=LT(e);return(t.local?Aut:hut)(t)}function mut(){}function oH(e){return e==null?mut:function(){return this.querySelector(e)}}function put(e){typeof e!="function"&&(e=oH(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=new Array(o),c,u,d=0;d<o;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Fu(n,this._parents)}function gut(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function xut(){return[]}function xme(e){return e==null?xut:function(){return this.querySelectorAll(e)}}function vut(e){return function(){return gut(e.apply(this,arguments))}}function but(e){typeof e=="function"?e=vut(e):e=xme(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var o=t[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(n.push(e.call(c,c.__data__,u,o)),a.push(c));return new Fu(n,a)}function vme(e){return function(){return this.matches(e)}}function bme(e){return function(t){return t.matches(e)}}var yut=Array.prototype.find;function wut(e){return function(){return yut.call(this.children,e)}}function Nut(){return this.firstElementChild}function Cut(e){return this.select(e==null?Nut:wut(typeof e=="function"?e:bme(e)))}var Eut=Array.prototype.filter;function jut(){return Array.from(this.children)}function kut(e){return function(){return Eut.call(this.children,e)}}function Sut(e){return this.selectAll(e==null?jut:kut(typeof e=="function"?e:bme(e)))}function _ut(e){typeof e!="function"&&(e=vme(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Fu(n,this._parents)}function yme(e){return new Array(e.length)}function Tut(){return new Fu(this._enter||this._groups.map(yme),this._parents)}function e4(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}e4.prototype={constructor:e4,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function But(e){return function(){return e}}function Iut(e,t,r,n,a,s){for(var o=0,l,c=t.length,u=s.length;o<u;++o)(l=t[o])?(l.__data__=s[o],n[o]=l):r[o]=new e4(e,s[o]);for(;o<c;++o)(l=t[o])&&(a[o]=l)}function Dut(e,t,r,n,a,s,o){var l,c,u=new Map,d=t.length,f=s.length,A=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(A[l]=m=o.call(c,c.__data__,l,t)+"",u.has(m)?a[l]=c:u.set(m,c));for(l=0;l<f;++l)m=o.call(e,s[l],l,s)+"",(c=u.get(m))?(n[l]=c,c.__data__=s[l],u.delete(m)):r[l]=new e4(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(A[l])===c&&(a[l]=c)}function Out(e){return e.__data__}function Put(e,t){if(!arguments.length)return Array.from(this,Out);var r=t?Dut:Iut,n=this._parents,a=this._groups;typeof e!="function"&&(e=But(e));for(var s=a.length,o=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],A=f.length,m=Fut(e.call(d,d&&d.__data__,u,n)),g=m.length,x=l[u]=new Array(g),v=o[u]=new Array(g),y=c[u]=new Array(A);r(d,f,x,v,y,m,t);for(var N=0,C=0,_,j;N<g;++N)if(_=x[N]){for(N>=C&&(C=N+1);!(j=v[C])&&++C<g;);_._next=j||null}}return o=new Fu(o,n),o._enter=l,o._exit=c,o}function Fut(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rut(){return new Fu(this._exit||this._groups.map(yme),this._parents)}function Lut(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function Mut(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,o=Math.min(a,s),l=new Array(a),c=0;c<o;++c)for(var u=r[c],d=n[c],f=u.length,A=l[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(A[g]=m);for(;c<a;++c)l[c]=r[c];return new Fu(l,this._parents)}function Uut(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],o;--a>=0;)(o=n[a])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Hut(e){e||(e=Qut);function t(f,A){return f&&A?e(f.__data__,A.__data__):!f-!A}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var o=r[s],l=o.length,c=a[s]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new Fu(a,this._parents).order()}function Qut(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Vut(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $ut(){return Array.from(this)}function zut(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var o=n[a];if(o)return o}return null}function Gut(){let e=0;for(const t of this)++e;return e}function qut(){return!this.node()}function Kut(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,o=a.length,l;s<o;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function Wut(e){return function(){this.removeAttribute(e)}}function Xut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yut(e,t){return function(){this.setAttribute(e,t)}}function Jut(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Zut(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function edt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function tdt(e,t){var r=LT(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Xut:Wut:typeof t=="function"?r.local?edt:Zut:r.local?Jut:Yut)(r,t))}function wme(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function rdt(e){return function(){this.style.removeProperty(e)}}function ndt(e,t,r){return function(){this.style.setProperty(e,t,r)}}function adt(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function sdt(e,t,r){return arguments.length>1?this.each((t==null?rdt:typeof t=="function"?adt:ndt)(e,t,r??"")):ny(this.node(),e)}function ny(e,t){return e.style.getPropertyValue(t)||wme(e).getComputedStyle(e,null).getPropertyValue(t)}function idt(e){return function(){delete this[e]}}function odt(e,t){return function(){this[e]=t}}function ldt(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function cdt(e,t){return arguments.length>1?this.each((t==null?idt:typeof t=="function"?ldt:odt)(e,t)):this.node()[e]}function Nme(e){return e.trim().split(/^|\s+/)}function lH(e){return e.classList||new Cme(e)}function Cme(e){this._node=e,this._names=Nme(e.getAttribute("class")||"")}Cme.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Eme(e,t){for(var r=lH(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function jme(e,t){for(var r=lH(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function udt(e){return function(){Eme(this,e)}}function ddt(e){return function(){jme(this,e)}}function fdt(e,t){return function(){(t.apply(this,arguments)?Eme:jme)(this,e)}}function hdt(e,t){var r=Nme(e+"");if(arguments.length<2){for(var n=lH(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?fdt:t?udt:ddt)(r,t))}function Adt(){this.textContent=""}function mdt(e){return function(){this.textContent=e}}function pdt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function gdt(e){return arguments.length?this.each(e==null?Adt:(typeof e=="function"?pdt:mdt)(e)):this.node().textContent}function xdt(){this.innerHTML=""}function vdt(e){return function(){this.innerHTML=e}}function bdt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ydt(e){return arguments.length?this.each(e==null?xdt:(typeof e=="function"?bdt:vdt)(e)):this.node().innerHTML}function wdt(){this.nextSibling&&this.parentNode.appendChild(this)}function Ndt(){return this.each(wdt)}function Cdt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Edt(){return this.each(Cdt)}function jdt(e){var t=typeof e=="function"?e:gme(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kdt(){return null}function Sdt(e,t){var r=typeof e=="function"?e:gme(e),n=t==null?kdt:typeof t=="function"?t:oH(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function _dt(){var e=this.parentNode;e&&e.removeChild(this)}function Tdt(){return this.each(_dt)}function Bdt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Idt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ddt(e){return this.select(e?Idt:Bdt)}function Odt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Pdt(e){return function(t){e.call(this,t,this.__data__)}}function Fdt(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Rdt(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function Ldt(e,t,r){return function(){var n=this.__on,a,s=Pdt(t);if(n){for(var o=0,l=n.length;o<l;++o)if((a=n[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function Mdt(e,t,r){var n=Fdt(e+""),a,s=n.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(a=0,d=l[c];a<s;++a)if((o=n[a]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?Ldt:Rdt,a=0;a<s;++a)this.each(l(n[a],t,r));return this}function kme(e,t,r){var n=wme(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Udt(e,t){return function(){return kme(this,e,t)}}function Hdt(e,t){return function(){return kme(this,e,t.apply(this,arguments))}}function Qdt(e,t){return this.each((typeof t=="function"?Hdt:Udt)(e,t))}function*Vdt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,o;a<s;++a)(o=n[a])&&(yield o)}var Sme=[null];function Fu(e,t){this._groups=e,this._parents=t}function TE(){return new Fu([[document.documentElement]],Sme)}function $dt(){return this}Fu.prototype=TE.prototype={constructor:Fu,select:put,selectAll:but,selectChild:Cut,selectChildren:Sut,filter:_ut,data:Put,enter:Tut,exit:Rut,join:Lut,merge:Mut,selection:$dt,order:Uut,sort:Hut,call:Vut,nodes:$ut,node:zut,size:Gut,empty:qut,each:Kut,attr:tdt,style:sdt,property:cdt,classed:hdt,text:gdt,html:ydt,raise:Ndt,lower:Edt,append:jdt,insert:Sdt,remove:Tdt,clone:Ddt,datum:Odt,on:Mdt,dispatch:Qdt,[Symbol.iterator]:Vdt};function wd(e){return typeof e=="string"?new Fu([[document.querySelector(e)]],[document.documentElement]):new Fu([[e]],Sme)}function zdt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ch(e,t){if(e=zdt(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Gdt={passive:!1},bC={capture:!0,passive:!1};function IO(e){e.stopImmediatePropagation()}function b1(e){e.preventDefault(),e.stopImmediatePropagation()}function _me(e){var t=e.document.documentElement,r=wd(e).on("dragstart.drag",b1,bC);"onselectstart"in t?r.on("selectstart.drag",b1,bC):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Tme(e,t){var r=e.document.documentElement,n=wd(e).on("dragstart.drag",null);t&&(n.on("click.drag",b1,bC),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Fk=e=>()=>e;function AL(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}AL.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function qdt(e){return!e.ctrlKey&&!e.button}function Kdt(){return this.parentNode}function Wdt(e,t){return t??{x:e.x,y:e.y}}function Xdt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ydt(){var e=qdt,t=Kdt,r=Wdt,n=Xdt,a={},s=RT("start","drag","end"),o=0,l,c,u,d,f=0;function A(_){_.on("mousedown.drag",m).filter(n).on("touchstart.drag",v).on("touchmove.drag",y,Gdt).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(_,j){if(!(d||!e.call(this,_,j))){var I=C(this,t.call(this,_,j),_,j,"mouse");I&&(wd(_.view).on("mousemove.drag",g,bC).on("mouseup.drag",x,bC),_me(_.view),IO(_),u=!1,l=_.clientX,c=_.clientY,I("start",_))}}function g(_){if(b1(_),!u){var j=_.clientX-l,I=_.clientY-c;u=j*j+I*I>f}a.mouse("drag",_)}function x(_){wd(_.view).on("mousemove.drag mouseup.drag",null),Tme(_.view,u),b1(_),a.mouse("end",_)}function v(_,j){if(e.call(this,_,j)){var I=_.changedTouches,T=t.call(this,_,j),k=I.length,B,M;for(B=0;B<k;++B)(M=C(this,T,_,j,I[B].identifier,I[B]))&&(IO(_),M("start",_,I[B]))}}function y(_){var j=_.changedTouches,I=j.length,T,k;for(T=0;T<I;++T)(k=a[j[T].identifier])&&(b1(_),k("drag",_,j[T]))}function N(_){var j=_.changedTouches,I=j.length,T,k;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),T=0;T<I;++T)(k=a[j[T].identifier])&&(IO(_),k("end",_,j[T]))}function C(_,j,I,T,k,B){var M=s.copy(),P=Ch(B||I,j),S,L,U;if((U=r.call(_,new AL("beforestart",{sourceEvent:I,target:A,identifier:k,active:o,x:P[0],y:P[1],dx:0,dy:0,dispatch:M}),T))!=null)return S=U.x-P[0]||0,L=U.y-P[1]||0,function q(H,z,W){var Z=P,V;switch(H){case"start":a[k]=q,V=o++;break;case"end":delete a[k],--o;case"drag":P=Ch(W||z,j),V=o;break}M.call(H,_,new AL(H,{sourceEvent:z,subject:U,target:A,identifier:k,active:V,x:P[0]+S,y:P[1]+L,dx:P[0]-Z[0],dy:P[1]-Z[1],dispatch:M}),T)}}return A.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Fk(!!_),A):e},A.container=function(_){return arguments.length?(t=typeof _=="function"?_:Fk(_),A):t},A.subject=function(_){return arguments.length?(r=typeof _=="function"?_:Fk(_),A):r},A.touchable=function(_){return arguments.length?(n=typeof _=="function"?_:Fk(!!_),A):n},A.on=function(){var _=s.on.apply(s,arguments);return _===s?A:_},A.clickDistance=function(_){return arguments.length?(f=(_=+_)*_,A):Math.sqrt(f)},A}var ay=0,_2=0,Jw=0,Bme=1e3,t4,T2,r4=0,Kx=0,MT=0,yC=typeof performance=="object"&&performance.now?performance:Date,Ime=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cH(){return Kx||(Ime(Jdt),Kx=yC.now()+MT)}function Jdt(){Kx=0}function n4(){this._call=this._time=this._next=null}n4.prototype=Dme.prototype={constructor:n4,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?cH():+r)+(t==null?0:+t),!this._next&&T2!==this&&(T2?T2._next=this:t4=this,T2=this),this._call=e,this._time=r,mL()},stop:function(){this._call&&(this._call=null,this._time=1/0,mL())}};function Dme(e,t,r){var n=new n4;return n.restart(e,t,r),n}function Zdt(){cH(),++ay;for(var e=t4,t;e;)(t=Kx-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ay}function QZ(){Kx=(r4=yC.now())+MT,ay=_2=0;try{Zdt()}finally{ay=0,tft(),Kx=0}}function eft(){var e=yC.now(),t=e-r4;t>Bme&&(MT-=t,r4=e)}function tft(){for(var e,t=t4,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:t4=r);T2=e,mL(n)}function mL(e){if(!ay){_2&&(_2=clearTimeout(_2));var t=e-Kx;t>24?(e<1/0&&(_2=setTimeout(QZ,e-yC.now()-MT)),Jw&&(Jw=clearInterval(Jw))):(Jw||(r4=yC.now(),Jw=setInterval(eft,Bme)),ay=1,Ime(QZ))}}function VZ(e,t,r){var n=new n4;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var rft=RT("start","end","cancel","interrupt"),nft=[],Ome=0,$Z=1,pL=2,$S=3,zZ=4,gL=5,zS=6;function UT(e,t,r,n,a,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;aft(e,r,{name:t,index:n,group:a,on:rft,tween:nft,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ome})}function uH(e,t){var r=Hf(e,t);if(r.state>Ome)throw new Error("too late; already scheduled");return r}function o0(e,t){var r=Hf(e,t);if(r.state>$S)throw new Error("too late; already running");return r}function Hf(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function aft(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=Dme(s,0,r.time);function s(u){r.state=$Z,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var d,f,A,m;if(r.state!==$Z)return c();for(d in n)if(m=n[d],m.name===r.name){if(m.state===$S)return VZ(o);m.state===zZ?(m.state=zS,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[d]):+d<t&&(m.state=zS,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[d])}if(VZ(function(){r.state===$S&&(r.state=zZ,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=pL,r.on.call("start",e,e.__data__,r.index,r.group),r.state===pL){for(r.state=$S,a=new Array(A=r.tween.length),d=0,f=-1;d<A;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=m);a.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=gL,1),f=-1,A=a.length;++f<A;)a[f].call(e,d);r.state===gL&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=zS,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function GS(e,t){var r=e.__transition,n,a,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){s=!1;continue}a=n.state>pL&&n.state<gL,n.state=zS,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}s&&delete e.__transition}}function sft(e){return this.each(function(){GS(this,e)})}function ift(e,t){var r,n;return function(){var a=o0(this,e),s=a.tween;if(s!==r){n=r=s;for(var o=0,l=n.length;o<l;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}a.tween=n}}function oft(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=o0(this,e),o=s.tween;if(o!==n){a=(n=o).slice();for(var l={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=l;break}c===u&&a.push(l)}s.tween=a}}function lft(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Hf(this.node(),r).tween,a=0,s=n.length,o;a<s;++a)if((o=n[a]).name===e)return o.value;return null}return this.each((t==null?ift:oft)(r,e,t))}function dH(e,t,r){var n=e._id;return e.each(function(){var a=o0(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Hf(a,n).value[t]}}function Pme(e,t){var r;return(typeof t=="number"?Af:t instanceof Gx?k_:(r=Gx(t))?(t=r,k_):Pde)(e,t)}function cft(e){return function(){this.removeAttribute(e)}}function uft(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dft(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttribute(e);return o===a?null:o===n?s:s=t(n=o,r)}}function fft(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?s:s=t(n=o,r)}}function hft(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function Aft(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function mft(e,t){var r=LT(e),n=r==="transform"?sGe:Pme;return this.attrTween(e,typeof t=="function"?(r.local?Aft:hft)(r,n,dH(this,"attr."+e,t)):t==null?(r.local?uft:cft)(r):(r.local?fft:dft)(r,n,t))}function pft(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function gft(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function xft(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&gft(e,s)),r}return a._value=t,a}function vft(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&pft(e,s)),r}return a._value=t,a}function bft(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=LT(e);return this.tween(r,(n.local?xft:vft)(n,t))}function yft(e,t){return function(){uH(this,e).delay=+t.apply(this,arguments)}}function wft(e,t){return t=+t,function(){uH(this,e).delay=t}}function Nft(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yft:wft)(t,e)):Hf(this.node(),t).delay}function Cft(e,t){return function(){o0(this,e).duration=+t.apply(this,arguments)}}function Eft(e,t){return t=+t,function(){o0(this,e).duration=t}}function jft(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cft:Eft)(t,e)):Hf(this.node(),t).duration}function kft(e,t){if(typeof t!="function")throw new Error;return function(){o0(this,e).ease=t}}function Sft(e){var t=this._id;return arguments.length?this.each(kft(t,e)):Hf(this.node(),t).ease}function _ft(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;o0(this,e).ease=r}}function Tft(e){if(typeof e!="function")throw new Error;return this.each(_ft(this._id,e))}function Bft(e){typeof e!="function"&&(e=vme(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new DA(n,this._parents,this._name,this._id)}function Ift(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),o=new Array(n),l=0;l<s;++l)for(var c=t[l],u=r[l],d=c.length,f=o[l]=new Array(d),A,m=0;m<d;++m)(A=c[m]||u[m])&&(f[m]=A);for(;l<n;++l)o[l]=t[l];return new DA(o,this._parents,this._name,this._id)}function Dft(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Oft(e,t,r){var n,a,s=Dft(t)?uH:o0;return function(){var o=s(this,e),l=o.on;l!==n&&(a=(n=l).copy()).on(t,r),o.on=a}}function Pft(e,t){var r=this._id;return arguments.length<2?Hf(this.node(),r).on.on(e):this.each(Oft(r,e,t))}function Fft(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Rft(){return this.on("end.remove",Fft(this._id))}function Lft(e){var t=this._name,r=this._id;typeof e!="function"&&(e=oH(e));for(var n=this._groups,a=n.length,s=new Array(a),o=0;o<a;++o)for(var l=n[o],c=l.length,u=s[o]=new Array(c),d,f,A=0;A<c;++A)(d=l[A])&&(f=e.call(d,d.__data__,A,l))&&("__data__"in d&&(f.__data__=d.__data__),u[A]=f,UT(u[A],t,r,A,u,Hf(d,r)));return new DA(s,this._parents,t,r)}function Mft(e){var t=this._name,r=this._id;typeof e!="function"&&(e=xme(e));for(var n=this._groups,a=n.length,s=[],o=[],l=0;l<a;++l)for(var c=n[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var A=e.call(d,d.__data__,f,c),m,g=Hf(d,r),x=0,v=A.length;x<v;++x)(m=A[x])&&UT(m,t,r,x,A,g);s.push(A),o.push(d)}return new DA(s,o,t,r)}var Uft=TE.prototype.constructor;function Hft(){return new Uft(this._groups,this._parents)}function Qft(e,t){var r,n,a;return function(){var s=ny(this,e),o=(this.style.removeProperty(e),ny(this,e));return s===o?null:s===r&&o===n?a:a=t(r=s,n=o)}}function Fme(e){return function(){this.style.removeProperty(e)}}function Vft(e,t,r){var n,a=r+"",s;return function(){var o=ny(this,e);return o===a?null:o===n?s:s=t(n=o,r)}}function $ft(e,t,r){var n,a,s;return function(){var o=ny(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),ny(this,e))),o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l))}}function zft(e,t){var r,n,a,s="style."+t,o="end."+s,l;return function(){var c=o0(this,e),u=c.on,d=c.value[s]==null?l||(l=Fme(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(o,a=d),c.on=n}}function Gft(e,t,r){var n=(e+="")=="transform"?aGe:Pme;return t==null?this.styleTween(e,Qft(e,n)).on("end.style."+e,Fme(e)):typeof t=="function"?this.styleTween(e,$ft(e,n,dH(this,"style."+e,t))).each(zft(this._id,e)):this.styleTween(e,Vft(e,n,t),r).on("end.style."+e,null)}function qft(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Kft(e,t,r){var n,a;function s(){var o=t.apply(this,arguments);return o!==a&&(n=(a=o)&&qft(e,o,r)),n}return s._value=t,s}function Wft(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Kft(e,t,r??""))}function Xft(e){return function(){this.textContent=e}}function Yft(e){return function(){var t=e(this);this.textContent=t??""}}function Jft(e){return this.tween("text",typeof e=="function"?Yft(dH(this,"text",e)):Xft(e==null?"":e+""))}function Zft(e){return function(t){this.textContent=e.call(this,t)}}function eht(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&Zft(a)),t}return n._value=e,n}function tht(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,eht(e))}function rht(){for(var e=this._name,t=this._id,r=Rme(),n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=Hf(c,t);UT(c,e,r,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new DA(n,this._parents,e,r)}function nht(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--a===0&&s()}};r.each(function(){var u=o0(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),a===0&&s()})}var aht=0;function DA(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Rme(){return++aht}var L0=TE.prototype;DA.prototype={constructor:DA,select:Lft,selectAll:Mft,selectChild:L0.selectChild,selectChildren:L0.selectChildren,filter:Bft,merge:Ift,selection:Hft,transition:rht,call:L0.call,nodes:L0.nodes,node:L0.node,size:L0.size,empty:L0.empty,each:L0.each,on:Pft,attr:mft,attrTween:bft,style:Gft,styleTween:Wft,text:Jft,textTween:tht,remove:Rft,tween:lft,delay:Nft,duration:jft,ease:Sft,easeVarying:Tft,end:nht,[Symbol.iterator]:L0[Symbol.iterator]};function sht(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var iht={time:null,delay:0,duration:250,ease:sht};function oht(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function lht(e){var t,r;e instanceof DA?(t=e._id,e=e._name):(t=Rme(),(r=iht).time=cH(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&UT(c,e,t,u,o,r||oht(c,t));return new DA(n,this._parents,e,t)}TE.prototype.interrupt=sft;TE.prototype.transition=lht;const Rk=e=>()=>e;function cht(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function rA(e,t,r){this.k=e,this.x=t,this.y=r}rA.prototype={constructor:rA,scale:function(e){return e===1?this:new rA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new rA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var pp=new rA(1,0,0);rA.prototype;function DO(e){e.stopImmediatePropagation()}function Zw(e){e.preventDefault(),e.stopImmediatePropagation()}function uht(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function dht(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function GZ(){return this.__zoom||pp}function fht(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function hht(){return navigator.maxTouchPoints||"ontouchstart"in this}function Aht(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function mht(){var e=uht,t=dht,r=Aht,n=fht,a=hht,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=cGe,u=RT("start","zoom","end"),d,f,A,m=500,g=150,x=0,v=10;function y(U){U.property("__zoom",GZ).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",P).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(U,q,H,z){var W=U.selection?U.selection():U;W.property("__zoom",GZ),U!==W?j(U,q,H,z):W.interrupt().each(function(){I(this,arguments).event(z).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},y.scaleBy=function(U,q,H,z){y.scaleTo(U,function(){var W=this.__zoom.k,Z=typeof q=="function"?q.apply(this,arguments):q;return W*Z},H,z)},y.scaleTo=function(U,q,H,z){y.transform(U,function(){var W=t.apply(this,arguments),Z=this.__zoom,V=H==null?_(W):typeof H=="function"?H.apply(this,arguments):H,Y=Z.invert(V),R=typeof q=="function"?q.apply(this,arguments):q;return r(C(N(Z,R),V,Y),W,o)},H,z)},y.translateBy=function(U,q,H,z){y.transform(U,function(){return r(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),o)},null,z)},y.translateTo=function(U,q,H,z,W){y.transform(U,function(){var Z=t.apply(this,arguments),V=this.__zoom,Y=z==null?_(Z):typeof z=="function"?z.apply(this,arguments):z;return r(pp.translate(Y[0],Y[1]).scale(V.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof H=="function"?-H.apply(this,arguments):-H),Z,o)},z,W)};function N(U,q){return q=Math.max(s[0],Math.min(s[1],q)),q===U.k?U:new rA(q,U.x,U.y)}function C(U,q,H){var z=q[0]-H[0]*U.k,W=q[1]-H[1]*U.k;return z===U.x&&W===U.y?U:new rA(U.k,z,W)}function _(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function j(U,q,H,z){U.on("start.zoom",function(){I(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(z).end()}).tween("zoom",function(){var W=this,Z=arguments,V=I(W,Z).event(z),Y=t.apply(W,Z),R=H==null?_(Y):typeof H=="function"?H.apply(W,Z):H,O=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),K=W.__zoom,J=typeof q=="function"?q.apply(W,Z):q,ce=c(K.invert(R).concat(O/K.k),J.invert(R).concat(O/J.k));return function(oe){if(oe===1)oe=J;else{var re=ce(oe),ue=O/re[2];oe=new rA(ue,R[0]-re[0]*ue,R[1]-re[1]*ue)}V.zoom(null,oe)}})}function I(U,q,H){return!H&&U.__zooming||new T(U,q)}function T(U,q){this.that=U,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(U,q),this.taps=0}T.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,q){return this.mouse&&U!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var q=wd(this.that).datum();u.call(U,this.that,new cht(U,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),q)}};function k(U,...q){if(!e.apply(this,arguments))return;var H=I(this,q).event(U),z=this.__zoom,W=Math.max(s[0],Math.min(s[1],z.k*Math.pow(2,n.apply(this,arguments)))),Z=Ch(U);if(H.wheel)(H.mouse[0][0]!==Z[0]||H.mouse[0][1]!==Z[1])&&(H.mouse[1]=z.invert(H.mouse[0]=Z)),clearTimeout(H.wheel);else{if(z.k===W)return;H.mouse=[Z,z.invert(Z)],GS(this),H.start()}Zw(U),H.wheel=setTimeout(V,g),H.zoom("mouse",r(C(N(z,W),H.mouse[0],H.mouse[1]),H.extent,o));function V(){H.wheel=null,H.end()}}function B(U,...q){if(A||!e.apply(this,arguments))return;var H=U.currentTarget,z=I(this,q,!0).event(U),W=wd(U.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",O,!0),Z=Ch(U,H),V=U.clientX,Y=U.clientY;_me(U.view),DO(U),z.mouse=[Z,this.__zoom.invert(Z)],GS(this),z.start();function R(K){if(Zw(K),!z.moved){var J=K.clientX-V,ce=K.clientY-Y;z.moved=J*J+ce*ce>x}z.event(K).zoom("mouse",r(C(z.that.__zoom,z.mouse[0]=Ch(K,H),z.mouse[1]),z.extent,o))}function O(K){W.on("mousemove.zoom mouseup.zoom",null),Tme(K.view,z.moved),Zw(K),z.event(K).end()}}function M(U,...q){if(e.apply(this,arguments)){var H=this.__zoom,z=Ch(U.changedTouches?U.changedTouches[0]:U,this),W=H.invert(z),Z=H.k*(U.shiftKey?.5:2),V=r(C(N(H,Z),z,W),t.apply(this,q),o);Zw(U),l>0?wd(this).transition().duration(l).call(j,V,z,U):wd(this).call(y.transform,V,z,U)}}function P(U,...q){if(e.apply(this,arguments)){var H=U.touches,z=H.length,W=I(this,q,U.changedTouches.length===z).event(U),Z,V,Y,R;for(DO(U),V=0;V<z;++V)Y=H[V],R=Ch(Y,this),R=[R,this.__zoom.invert(R),Y.identifier],W.touch0?!W.touch1&&W.touch0[2]!==R[2]&&(W.touch1=R,W.taps=0):(W.touch0=R,Z=!0,W.taps=1+!!d);d&&(d=clearTimeout(d)),Z&&(W.taps<2&&(f=R[0],d=setTimeout(function(){d=null},m)),GS(this),W.start())}}function S(U,...q){if(this.__zooming){var H=I(this,q).event(U),z=U.changedTouches,W=z.length,Z,V,Y,R;for(Zw(U),Z=0;Z<W;++Z)V=z[Z],Y=Ch(V,this),H.touch0&&H.touch0[2]===V.identifier?H.touch0[0]=Y:H.touch1&&H.touch1[2]===V.identifier&&(H.touch1[0]=Y);if(V=H.that.__zoom,H.touch1){var O=H.touch0[0],K=H.touch0[1],J=H.touch1[0],ce=H.touch1[1],oe=(oe=J[0]-O[0])*oe+(oe=J[1]-O[1])*oe,re=(re=ce[0]-K[0])*re+(re=ce[1]-K[1])*re;V=N(V,Math.sqrt(oe/re)),Y=[(O[0]+J[0])/2,(O[1]+J[1])/2],R=[(K[0]+ce[0])/2,(K[1]+ce[1])/2]}else if(H.touch0)Y=H.touch0[0],R=H.touch0[1];else return;H.zoom("touch",r(C(V,Y,R),H.extent,o))}}function L(U,...q){if(this.__zooming){var H=I(this,q).event(U),z=U.changedTouches,W=z.length,Z,V;for(DO(U),A&&clearTimeout(A),A=setTimeout(function(){A=null},m),Z=0;Z<W;++Z)V=z[Z],H.touch0&&H.touch0[2]===V.identifier?delete H.touch0:H.touch1&&H.touch1[2]===V.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(V=Ch(V,this),Math.hypot(f[0]-V[0],f[1]-V[1])<v)){var Y=wd(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return y.wheelDelta=function(U){return arguments.length?(n=typeof U=="function"?U:Rk(+U),y):n},y.filter=function(U){return arguments.length?(e=typeof U=="function"?U:Rk(!!U),y):e},y.touchable=function(U){return arguments.length?(a=typeof U=="function"?U:Rk(!!U),y):a},y.extent=function(U){return arguments.length?(t=typeof U=="function"?U:Rk([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),y):t},y.scaleExtent=function(U){return arguments.length?(s[0]=+U[0],s[1]=+U[1],y):[s[0],s[1]]},y.translateExtent=function(U){return arguments.length?(o[0][0]=+U[0][0],o[1][0]=+U[1][0],o[0][1]=+U[0][1],o[1][1]=+U[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(U){return arguments.length?(r=U,y):r},y.duration=function(U){return arguments.length?(l=+U,y):l},y.interpolate=function(U){return arguments.length?(c=U,y):c},y.on=function(){var U=u.on.apply(u,arguments);return U===u?y:U},y.clickDistance=function(U){return arguments.length?(x=(U=+U)*U,y):Math.sqrt(x)},y.tapDistance=function(U){return arguments.length?(v=+U,y):v},y}const HT=w.createContext(null),pht=HT.Provider,OA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Lme=OA.error001();function Ds(e,t){const r=w.useContext(HT);if(r===null)throw new Error(Lme);return pme(r,e,t)}const ko=()=>{const e=w.useContext(HT);if(e===null)throw new Error(Lme);return w.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},ght=e=>e.userSelectionActive?"none":"all";function Mme({position:e,children:t,className:r,style:n,...a}){const s=Ds(ght),o=`${e}`.split("-");return At.createElement("div",{className:lc(["react-flow__panel",r,...o]),style:{...n,pointerEvents:s},...a},t)}function xht({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:At.createElement(Mme,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},At.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const vht=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=w.useRef(null),[A,m]=w.useState({x:0,y:0,width:0,height:0}),g=lc(["react-flow__edge-textwrapper",u]);return w.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:At.createElement("g",{transform:`translate(${e-A.width/2} ${t-A.height/2})`,className:g,visibility:A.width?"visible":"hidden",...d},a&&At.createElement("rect",{width:A.width+2*o[0],x:-o[0],y:-o[1],height:A.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),At.createElement("text",{className:"react-flow__edge-text",y:A.height/2,dy:"0.3em",ref:f,style:n},r),c)};var bht=w.memo(vht);const fH=e=>({width:e.offsetWidth,height:e.offsetHeight}),sy=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),hH=(e={x:0,y:0},t)=>({x:sy(e.x,t[0][0],t[1][0]),y:sy(e.y,t[0][1],t[1][1])}),qZ=(e,t,r)=>e<t?sy(Math.abs(e-t),1,50)/50:e>r?-sy(Math.abs(e-r),1,50)/50:0,Ume=(e,t)=>{const r=qZ(e.x,35,t.width-35)*20,n=qZ(e.y,35,t.height-35)*20;return[r,n]},Hme=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},yht=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),AH=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),wht=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),KZ=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),xL=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},Nht=e=>jd(e.width)&&jd(e.height)&&jd(e.x)&&jd(e.y),jd=e=>!isNaN(e)&&isFinite(e),Xs=Symbol.for("internals"),Qme=["Enter"," ","Escape"],Cht=(e,t)=>{},Eht=e=>"nativeEvent"in e;function vL(e){var a,s;const t=Eht(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Vme=e=>"clientX"in e,gp=(e,t)=>{var s,o;const r=Vme(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},a4=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},BE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:A,interactionWidth:m=20})=>At.createElement(At.Fragment,null,At.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:A}),m&&At.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&jd(r)&&jd(n)?At.createElement(bht,{x:r,y:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);BE.displayName="BaseEdge";function e2(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function $me({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,o=Math.abs(n-t)/2,l=n<t?n+o:n-o;return[s,l,a,o]}function zme({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:o,targetControlY:l}){const c=e*.125+a*.375+o*.375+r*.125,u=t*.125+s*.375+l*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Wx;(function(e){e.Strict="strict",e.Loose="loose"})(Wx||(Wx={}));var sx;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(sx||(sx={}));var wC;(function(e){e.Partial="partial",e.Full="full"})(wC||(wC={}));var Xm;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Xm||(Xm={}));var s4;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(s4||(s4={}));var Pr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Pr||(Pr={}));function WZ({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===Pr.Left||e===Pr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function Gme({sourceX:e,sourceY:t,sourcePosition:r=Pr.Bottom,targetX:n,targetY:a,targetPosition:s=Pr.Top}){const[o,l]=WZ({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=WZ({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,A,m]=zme({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${n},${a}`,d,f,A,m]}const mH=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Pr.Bottom,targetPosition:s=Pr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,N]=Gme({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return At.createElement(BE,{path:v,labelX:y,labelY:N,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,interactionWidth:x})});mH.displayName="SimpleBezierEdge";const XZ={[Pr.Left]:{x:-1,y:0},[Pr.Right]:{x:1,y:0},[Pr.Top]:{x:0,y:-1},[Pr.Bottom]:{x:0,y:1}},jht=({source:e,sourcePosition:t=Pr.Bottom,target:r})=>t===Pr.Left||t===Pr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},YZ=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kht({source:e,sourcePosition:t=Pr.Bottom,target:r,targetPosition:n=Pr.Top,center:a,offset:s}){const o=XZ[t],l=XZ[n],c={x:e.x+o.x*s,y:e.y+o.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=jht({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",A=d[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[N,C,_,j]=$me({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*l[f]===-1){g=a.x??N,x=a.y??C;const T=[{x:g,y:c.y},{x:g,y:u.y}],k=[{x:c.x,y:x},{x:u.x,y:x}];o[f]===A?m=f==="x"?T:k:m=f==="x"?k:T}else{const T=[{x:c.x,y:u.y}],k=[{x:u.x,y:c.y}];if(f==="x"?m=o.x===A?k:T:m=o.y===A?T:k,t===n){const L=Math.abs(e[f]-r[f]);if(L<=s){const U=Math.min(s-1,s-L);o[f]===A?v[f]=(c[f]>e[f]?-1:1)*U:y[f]=(u[f]>r[f]?-1:1)*U}}if(t!==n){const L=f==="x"?"y":"x",U=o[f]===l[L],q=c[L]>u[L],H=c[L]<u[L];(o[f]===1&&(!U&&q||U&&H)||o[f]!==1&&(!U&&H||U&&q))&&(m=f==="x"?T:k)}const B={x:c.x+v.x,y:c.y+v.y},M={x:u.x+y.x,y:u.y+y.y},P=Math.max(Math.abs(B.x-m[0].x),Math.abs(M.x-m[0].x)),S=Math.max(Math.abs(B.y-m[0].y),Math.abs(M.y-m[0].y));P>=S?(g=(B.x+M.x)/2,x=m[0].y):(g=m[0].x,x=(B.y+M.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,_,j]}function Sht(e,t,r,n){const a=Math.min(YZ(e,t)/2,YZ(t,r)/2,n),{x:s,y:o}=t;if(e.x===s&&s===r.x||e.y===o&&o===r.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${o}Q ${s},${o} ${s},${o+a*d}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${o+a*c}Q ${s},${o} ${s+a*l},${o}`}function bL({sourceX:e,sourceY:t,sourcePosition:r=Pr.Bottom,targetX:n,targetY:a,targetPosition:s=Pr.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,A,m,g]=kht({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:l,y:c},offset:u});return[d.reduce((v,y,N)=>{let C="";return N>0&&N<d.length-1?C=Sht(d[N-1],y,d[N+1],o):C=`${N===0?"M":"L"}${y.x} ${y.y}`,v+=C,v},""),f,A,m,g]}const QT=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Pr.Bottom,targetPosition:A=Pr.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,N,C]=bL({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:A,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return At.createElement(BE,{path:y,labelX:N,labelY:C,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});QT.displayName="SmoothStepEdge";const pH=w.memo(e=>{var t;return At.createElement(QT,{...e,pathOptions:w.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});pH.displayName="StepEdge";function _ht({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,o,l]=$me({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,o,l]}const gH=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:A,interactionWidth:m})=>{const[g,x,v]=_ht({sourceX:e,sourceY:t,targetX:r,targetY:n});return At.createElement(BE,{path:g,labelX:x,labelY:v,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:A,interactionWidth:m})});gH.displayName="StraightEdge";function Lk(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function JZ({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case Pr.Left:return[t-Lk(t-n,s),r];case Pr.Right:return[t+Lk(n-t,s),r];case Pr.Top:return[t,r-Lk(r-a,s)];case Pr.Bottom:return[t,r+Lk(a-r,s)]}}function qme({sourceX:e,sourceY:t,sourcePosition:r=Pr.Bottom,targetX:n,targetY:a,targetPosition:s=Pr.Top,curvature:o=.25}){const[l,c]=JZ({pos:r,x1:e,y1:t,x2:n,y2:a,c:o}),[u,d]=JZ({pos:s,x1:n,y1:a,x2:e,y2:t,c:o}),[f,A,m,g]=zme({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${n},${a}`,f,A,m,g]}const i4=w.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Pr.Bottom,targetPosition:s=Pr.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,N,C]=qme({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return At.createElement(BE,{path:y,labelX:N,labelY:C,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:A,markerEnd:m,markerStart:g,interactionWidth:v})});i4.displayName="BezierEdge";const xH=w.createContext(null),Tht=xH.Provider;xH.Consumer;const Bht=()=>w.useContext(xH),Iht=e=>"id"in e&&"source"in e&&"target"in e,Dht=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,yL=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,Oht=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Pht=(e,t)=>{if(!e.source||!e.target)return t;let r;return Iht(e)?r={...e}:r={...e,id:Dht(e)},Oht(r,t)?t:t.concat(r)},wL=({x:e,y:t},[r,n,a],s,[o,l])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},Kme=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),y1=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},vH=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:o}=y1(a,t).positionAbsolute;return yht(n,AH({x:s,y:o,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return wht(r)},Wme=(e,t,[r,n,a]=[0,0,1],s=!1,o=!1,l=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:A,selectable:m=!0,hidden:g=!1}=d;if(o&&!m||g)return!1;const{positionAbsolute:x}=y1(d,l),v={x:x.x,y:x.y,width:f||0,height:A||0},y=xL(c,v),N=typeof f>"u"||typeof A>"u"||f===null||A===null,C=s&&y>0,_=(f||0)*(A||0);(N||C||y>=_||d.dragging)&&u.push(d)}),u},Xme=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Yme=(e,t,r,n,a,s=.1)=>{const o=t/(e.width*(1+s)),l=r/(e.height*(1+s)),c=Math.min(o,l),u=sy(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,A=t/2-d*u,m=r/2-f*u;return{x:A,y:m,zoom:u}},Mg=(e,t=0)=>e.transition().duration(t);function ZZ(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var o,l;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),a},[])}function Fht(e,t,r,n,a,s){const{x:o,y:l}=gp(e),u=t.elementsFromPoint(o,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=bH(void 0,u),v=u.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:x});if(y){const N=a.find(C=>C.nodeId===g&&C.type===x&&C.id===v);return{handle:{id:v,type:x,nodeId:g,x:(N==null?void 0:N.x)||r.x,y:(N==null?void 0:N.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const v=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:v}]:x===f&&d.push({handle:g,validHandleResult:v}),f=x)}}),!d.length)return{handle:null,validHandleResult:Jme()};if(d.length===1)return d[0];const A=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":A?x.isValid:!0)||d[0]}const Rht={source:null,target:null,sourceHandle:null,targetHandle:null},Jme=()=>({handleDomNode:null,isValid:!1,connection:Rht,endHandle:null});function Zme(e,t,r,n,a,s,o){const l=a==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Jme(),handleDomNode:c};if(c){const d=bH(void 0,c),f=c.getAttribute("data-nodeid"),A=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?f:r,sourceHandle:l?A:n,target:l?r:f,targetHandle:l?n:A};u.connection=x,m&&g&&(t===Wx.Strict?l&&d==="source"||!l&&d==="target":f!==r||A!==n)&&(u.endHandle={nodeId:f,handleId:A,type:d},u.isValid=s(x))}return u}function Lht({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Xs]){const{handleBounds:o}=s[Xs];let l=[],c=[];o&&(l=ZZ(s,o,"source",`${t}-${r}-${n}`),c=ZZ(s,o,"target",`${t}-${r}-${n}`)),a.push(...l,...c)}return a},[])}function bH(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function OO(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Mht(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function epe({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=Hme(e.target),{connectionMode:f,domNode:A,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:N}=s();let C=0,_;const{x:j,y:I}=gp(e),T=d==null?void 0:d.elementFromPoint(j,I),k=bH(c,T),B=A==null?void 0:A.getBoundingClientRect();if(!B||!k)return;let M,P=gp(e,B),S=!1,L=null,U=!1,q=null;const H=Lht({nodes:y(),nodeId:r,handleId:t,handleType:k}),z=()=>{if(!m)return;const[V,Y]=Ume(P,B);v({x:V,y:Y}),C=requestAnimationFrame(z)};o({connectionPosition:P,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:k,connectionStartHandle:{nodeId:r,handleId:t,type:k},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:k});function W(V){const{transform:Y}=s();P=gp(V,B);const{handle:R,validHandleResult:O}=Fht(V,d,wL(P,Y,!1,[1,1]),g,H,K=>Zme(K,f,r,t,a?"target":"source",l,d));if(_=R,S||(z(),S=!0),q=O.handleDomNode,L=O.connection,U=O.isValid,o({connectionPosition:_&&U?Kme({x:_.x,y:_.y},Y):P,connectionStatus:Mht(!!_,U),connectionEndHandle:O.endHandle}),!_&&!U&&!q)return OO(M);L.source!==L.target&&q&&(OO(M),M=q,q.classList.add("connecting","react-flow__handle-connecting"),q.classList.toggle("valid",U),q.classList.toggle("react-flow__handle-valid",U))}function Z(V){var Y,R;(_||q)&&L&&U&&(n==null||n(L)),(R=(Y=s()).onConnectEnd)==null||R.call(Y,V),c&&(u==null||u(V)),OO(M),N(),cancelAnimationFrame(C),S=!1,U=!1,L=null,q=null,d.removeEventListener("mousemove",W),d.removeEventListener("mouseup",Z),d.removeEventListener("touchmove",W),d.removeEventListener("touchend",Z)}d.addEventListener("mousemove",W),d.addEventListener("mouseup",Z),d.addEventListener("touchmove",W),d.addEventListener("touchend",Z)}const eee=()=>!0,Uht=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Hht=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:o}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===r}},tpe=w.forwardRef(({type:e="source",position:t=Pr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...A},m)=>{var B,M;const g=o||null,x=e==="target",v=ko(),y=Bht(),{connectOnClick:N,noPanClassName:C}=Ds(Uht,Hl),{connecting:_,clickConnecting:j}=Ds(Hht(y,g,e),Hl);y||(M=(B=v.getState()).onError)==null||M.call(B,"010",OA.error010());const I=P=>{const{defaultEdgeOptions:S,onConnect:L,hasDefaultEdges:U}=v.getState(),q={...S,...P};if(U){const{edges:H,setEdges:z}=v.getState();z(Pht(q,H))}L==null||L(q),l==null||l(q)},T=P=>{if(!y)return;const S=Vme(P);a&&(S&&P.button===0||!S)&&epe({event:P,handleId:g,nodeId:y,onConnect:I,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||eee}),S?d==null||d(P):f==null||f(P)},k=P=>{const{onClickConnectStart:S,onClickConnectEnd:L,connectionClickStartHandle:U,connectionMode:q,isValidConnection:H}=v.getState();if(!y||!U&&!a)return;if(!U){S==null||S(P,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const z=Hme(P.target),W=r||H||eee,{connection:Z,isValid:V}=Zme({nodeId:y,id:g,type:e},q,U.nodeId,U.handleId||null,U.type,W,z);V&&I(Z),L==null||L(P),v.setState({connectionClickStartHandle:null})};return At.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:lc(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:j,connectionindicator:n&&(a&&!_||s&&_)}]),onMouseDown:T,onTouchStart:T,onClick:N?k:void 0,ref:m,...A},c)});tpe.displayName="Handle";var iy=w.memo(tpe);const rpe=({data:e,isConnectable:t,targetPosition:r=Pr.Top,sourcePosition:n=Pr.Bottom})=>At.createElement(At.Fragment,null,At.createElement(iy,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,At.createElement(iy,{type:"source",position:n,isConnectable:t}));rpe.displayName="DefaultNode";var NL=w.memo(rpe);const npe=({data:e,isConnectable:t,sourcePosition:r=Pr.Bottom})=>At.createElement(At.Fragment,null,e==null?void 0:e.label,At.createElement(iy,{type:"source",position:r,isConnectable:t}));npe.displayName="InputNode";var ape=w.memo(npe);const spe=({data:e,isConnectable:t,targetPosition:r=Pr.Top})=>At.createElement(At.Fragment,null,At.createElement(iy,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);spe.displayName="OutputNode";var ipe=w.memo(spe);const yH=()=>null;yH.displayName="GroupNode";const Qht=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Mk=e=>e.id;function Vht(e,t){return Hl(e.selectedNodes.map(Mk),t.selectedNodes.map(Mk))&&Hl(e.selectedEdges.map(Mk),t.selectedEdges.map(Mk))}const ope=w.memo(({onSelectionChange:e})=>{const t=ko(),{selectedNodes:r,selectedEdges:n}=Ds(Qht,Vht);return w.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});ope.displayName="SelectionListener";const $ht=e=>!!e.onSelectionChange;function zht({onSelectionChange:e}){const t=Ds($ht);return e||t?At.createElement(ope,{onSelectionChange:e}):null}const Ght=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function ib(e,t){w.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Tn(e,t,r){w.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const qht=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:A,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:N,onEdgesChange:C,elementsSelectable:_,connectionMode:j,snapGrid:I,snapToGrid:T,translateExtent:k,connectOnClick:B,defaultEdgeOptions:M,fitView:P,fitViewOptions:S,onNodesDelete:L,onEdgesDelete:U,onNodeDrag:q,onNodeDragStart:H,onNodeDragStop:z,onSelectionDrag:W,onSelectionDragStart:Z,onSelectionDragStop:V,noPanClassName:Y,nodeOrigin:R,rfId:O,autoPanOnConnect:K,autoPanOnNodeDrag:J,onError:ce,connectionRadius:oe,isValidConnection:re,nodeDragThreshold:ue})=>{const{setNodes:le,setEdges:ve,setDefaultNodesAndEdges:X,setMinZoom:Ee,setMaxZoom:Be,setTranslateExtent:je,setNodeExtent:fe,reset:ye}=Ds(Ght,Hl),Ae=ko();return w.useEffect(()=>{const se=n==null?void 0:n.map(ne=>({...ne,...M}));return X(r,se),()=>{ye()}},[]),Tn("defaultEdgeOptions",M,Ae.setState),Tn("connectionMode",j,Ae.setState),Tn("onConnect",a,Ae.setState),Tn("onConnectStart",s,Ae.setState),Tn("onConnectEnd",o,Ae.setState),Tn("onClickConnectStart",l,Ae.setState),Tn("onClickConnectEnd",c,Ae.setState),Tn("nodesDraggable",u,Ae.setState),Tn("nodesConnectable",d,Ae.setState),Tn("nodesFocusable",f,Ae.setState),Tn("edgesFocusable",A,Ae.setState),Tn("edgesUpdatable",m,Ae.setState),Tn("elementsSelectable",_,Ae.setState),Tn("elevateNodesOnSelect",g,Ae.setState),Tn("snapToGrid",T,Ae.setState),Tn("snapGrid",I,Ae.setState),Tn("onNodesChange",N,Ae.setState),Tn("onEdgesChange",C,Ae.setState),Tn("connectOnClick",B,Ae.setState),Tn("fitViewOnInit",P,Ae.setState),Tn("fitViewOnInitOptions",S,Ae.setState),Tn("onNodesDelete",L,Ae.setState),Tn("onEdgesDelete",U,Ae.setState),Tn("onNodeDrag",q,Ae.setState),Tn("onNodeDragStart",H,Ae.setState),Tn("onNodeDragStop",z,Ae.setState),Tn("onSelectionDrag",W,Ae.setState),Tn("onSelectionDragStart",Z,Ae.setState),Tn("onSelectionDragStop",V,Ae.setState),Tn("noPanClassName",Y,Ae.setState),Tn("nodeOrigin",R,Ae.setState),Tn("rfId",O,Ae.setState),Tn("autoPanOnConnect",K,Ae.setState),Tn("autoPanOnNodeDrag",J,Ae.setState),Tn("onError",ce,Ae.setState),Tn("connectionRadius",oe,Ae.setState),Tn("isValidConnection",re,Ae.setState),Tn("nodeDragThreshold",ue,Ae.setState),ib(e,le),ib(t,ve),ib(x,Ee),ib(v,Be),ib(k,je),ib(y,fe),null},tee={display:"none"},Kht={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},lpe="react-flow__node-desc",cpe="react-flow__edge-desc",Wht="react-flow__aria-live",Xht=e=>e.ariaLiveMessage;function Yht({rfId:e}){const t=Ds(Xht);return At.createElement("div",{id:`${Wht}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Kht},t)}function Jht({rfId:e,disableKeyboardA11y:t}){return At.createElement(At.Fragment,null,At.createElement("div",{id:`${lpe}-${e}`,style:tee},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),At.createElement("div",{id:`${cpe}-${e}`,style:tee},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&At.createElement(Yht,{rfId:e}))}var NC=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=w.useState(!1),a=w.useRef(!1),s=w.useRef(new Set([])),[o,l]=w.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,A)=>f.concat(...A),[]);return[u,d]}return[[],[]]},[e]);return w.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(a.current=m.ctrlKey||m.metaKey||m.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&vL(m))return!1;const x=nee(m.code,l);s.current.add(m[x]),ree(o,s.current,!1)&&(m.preventDefault(),n(!0))},f=m=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&vL(m))return!1;const x=nee(m.code,l);ree(o,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),a.current=!1},A=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",A),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",A)}}},[e,n]),r};function ree(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function nee(e,t){return t.includes(e)?"code":"key"}function upe(e,t,r,n){var l,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),o=y1(s,n);return upe(s,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=s[Xs])==null?void 0:l.z)??0)>(r.z??0)?((c=s[Xs])==null?void 0:c.z)??0:r.z??0},n)}function dpe(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:o,y:l,z:c}=upe(n,e,{...n.position,z:((s=n[Xs])==null?void 0:s.z)??0},t);n.positionAbsolute={x:o,y:l},n[Xs].z=c,r!=null&&r[n.id]&&(n[Xs].isParent=!0)}})}function PO(e,t,r,n){const a=new Map,s={},o=n?1e3:0;return e.forEach(l=>{var m;const c=(jd(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(s[f]=!0);const A=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,Xs,{enumerable:!1,value:{handleBounds:A||(m=u==null?void 0:u[Xs])==null?void 0:m.handleBounds,z:c}}),a.set(l.id,d)}),dpe(a,r,s),a}function fpe(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),A=t.initial&&!u&&d;if(l&&c&&(A||!t.initial)){const g=r().filter(v=>{var N;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(N=t.nodes)!=null&&N.length?y&&t.nodes.some(C=>C.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=vH(g,f),{x:y,y:N,zoom:C}=Yme(v,n,a,t.minZoom??s,t.maxZoom??o,t.padding??.1),_=pp.translate(y,N).scale(C);return typeof t.duration=="number"&&t.duration>0?l.transform(Mg(c,t.duration),_):l.transform(c,_),!0}}return!1}function Zht(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Xs]:n[Xs],selected:r.selected})}),new Map(t)}function e0t(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function Uk({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:Zht(e,a)}),o==null||o(e)),t!=null&&t.length&&(u&&n({edges:e0t(t,s)}),l==null||l(t))}const ob=()=>{},t0t={zoomIn:ob,zoomOut:ob,zoomTo:ob,getZoom:()=>1,setViewport:ob,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ob,fitBounds:ob,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},r0t=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),n0t=()=>{const e=ko(),{d3Zoom:t,d3Selection:r}=Ds(r0t,Hl);return w.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Mg(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Mg(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Mg(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[o,l,c]=e.getState().transform,u=pp.translate(a.x??o,a.y??l).scale(a.zoom??c);t.transform(Mg(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,o]=e.getState().transform;return{x:a,y:s,zoom:o}},fitView:a=>fpe(e.getState,a),setCenter:(a,s,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-a*d,A=c/2-s*d,m=pp.translate(f,A).scale(d);t.transform(Mg(r,o==null?void 0:o.duration),m)},fitBounds:(a,s)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:A}=Yme(a,o,l,c,u,(s==null?void 0:s.padding)??.1),m=pp.translate(d,f).scale(A);t.transform(Mg(r,s==null?void 0:s.duration),m)},project:a=>{const{transform:s,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),wL(a,s,o,l)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return wL(f,s,o,l)},flowToScreenPosition:a=>{const{transform:s,domNode:o}=e.getState();if(!o)return a;const{x:l,y:c}=o.getBoundingClientRect(),u=Kme(a,s);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:t0t,[t,r])};function VT(){const e=n0t(),t=ko(),r=w.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=w.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=w.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),s=w.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),o=w.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:N,onNodesChange:C}=t.getState(),_=v(),j=typeof x=="function"?x(_):x;if(N)y(j);else if(C){const I=j.length===0?_.map(T=>({type:"remove",id:T.id})):j.map(T=>({item:T,type:"reset"}));C(I)}},[]),l=w.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:N,onEdgesChange:C}=t.getState(),_=typeof x=="function"?x(v):x;if(N)y(_);else if(C){const j=_.length===0?v.map(I=>({type:"remove",id:I.id})):_.map(I=>({item:I,type:"reset"}));C(j)}},[]),c=w.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:N,hasDefaultNodes:C,onNodesChange:_}=t.getState();if(C){const I=[...y(),...v];N(I)}else if(_){const j=v.map(I=>({item:I,type:"add"}));_(j)}},[]),u=w.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:N,hasDefaultEdges:C,onEdgesChange:_}=t.getState();if(C)N([...y,...v]);else if(_){const j=v.map(I=>({item:I,type:"add"}));_(j)}},[]),d=w.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[N,C,_]=y;return{nodes:x().map(j=>({...j})),edges:v.map(j=>({...j})),viewport:{x:N,y:C,zoom:_}}},[]),f=w.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:N,edges:C,hasDefaultNodes:_,hasDefaultEdges:j,onNodesDelete:I,onEdgesDelete:T,onNodesChange:k,onEdgesChange:B}=t.getState(),M=(x||[]).map(q=>q.id),P=(v||[]).map(q=>q.id),S=N().reduce((q,H)=>{const z=H.parentNode||H.parentId,W=!M.includes(H.id)&&z&&q.find(V=>V.id===z);return(typeof H.deletable=="boolean"?H.deletable:!0)&&(M.includes(H.id)||W)&&q.push(H),q},[]),L=C.filter(q=>typeof q.deletable=="boolean"?q.deletable:!0),U=L.filter(q=>P.includes(q.id));if(S||U){const q=Xme(S,L),H=[...U,...q],z=H.reduce((W,Z)=>(W.includes(Z.id)||W.push(Z.id),W),[]);if((j||_)&&(j&&t.setState({edges:C.filter(W=>!z.includes(W.id))}),_&&(S.forEach(W=>{y.delete(W.id)}),t.setState({nodeInternals:new Map(y)}))),z.length>0&&(T==null||T(H),B&&B(z.map(W=>({id:W,type:"remove"})))),S.length>0&&(I==null||I(S),k)){const W=S.map(Z=>({id:Z.id,type:"remove"}));k(W)}}},[]),A=w.useCallback(x=>{const v=Nht(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:KZ(y),y,v]},[]),m=w.useCallback((x,v=!0,y)=>{const[N,C,_]=A(x);return N?(y||t.getState().getNodes()).filter(j=>{if(!_&&(j.id===C.id||!j.positionAbsolute))return!1;const I=KZ(j),T=xL(I,N);return v&&T>0||T>=N.width*N.height}):[]},[]),g=w.useCallback((x,v,y=!0)=>{const[N]=A(x);if(!N)return!1;const C=xL(N,v);return y&&C>0||C>=N.width*N.height},[]);return w.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,n,a,s,o,l,c,u,d,f,m,g])}const a0t={actInsideInputWithModifier:!1};var s0t=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=ko(),{deleteElements:n}=VT(),a=NC(e,a0t),s=NC(t);w.useEffect(()=>{if(a){const{edges:o,getNodes:l}=r.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),w.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function i0t(e){const t=ko();w.useEffect(()=>{let r;const n=()=>{var s,o;if(!e.current)return;const a=fH(e.current);(a.height===0||a.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",OA.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const wH={position:"absolute",width:"100%",height:"100%",top:0,left:0},o0t=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Hk=e=>({x:e.x,y:e.y,zoom:e.k}),lb=(e,t)=>e.target.closest(`.${t}`),aee=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),see=e=>{const t=e.ctrlKey&&a4()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},l0t=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),c0t=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=sx.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:A,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:N,noWheelClassName:C,noPanClassName:_})=>{const j=w.useRef(),I=ko(),T=w.useRef(!1),k=w.useRef(!1),B=w.useRef(null),M=w.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:S,d3ZoomHandler:L,userSelectionActive:U}=Ds(l0t,Hl),q=NC(v),H=w.useRef(0),z=w.useRef(!1),W=w.useRef();return i0t(B),w.useEffect(()=>{if(B.current){const Z=B.current.getBoundingClientRect(),V=mht().scaleExtent([g,x]).translateExtent(m),Y=wd(B.current).call(V),R=pp.translate(A.x,A.y).scale(sy(A.zoom,g,x)),O=[[0,0],[Z.width,Z.height]],K=V.constrain()(R,O,m);V.transform(Y,K),V.wheelDelta(see),I.setState({d3Zoom:V,d3Selection:Y,d3ZoomHandler:Y.on("wheel.zoom"),transform:[K.x,K.y,K.k],domNode:B.current.closest(".react-flow")})}},[]),w.useEffect(()=>{S&&P&&(o&&!q&&!U?S.on("wheel.zoom",Z=>{if(lb(Z,C))return!1;Z.preventDefault(),Z.stopImmediatePropagation();const V=S.property("__zoom").k||1;if(Z.ctrlKey&&s){const re=Ch(Z),ue=see(Z),le=V*Math.pow(2,ue);P.scaleTo(S,le,re,Z);return}const Y=Z.deltaMode===1?20:1;let R=c===sx.Vertical?0:Z.deltaX*Y,O=c===sx.Horizontal?0:Z.deltaY*Y;!a4()&&Z.shiftKey&&c!==sx.Vertical&&(R=Z.deltaY*Y,O=0),P.translateBy(S,-(R/V)*l,-(O/V)*l,{internal:!0});const K=Hk(S.property("__zoom")),{onViewportChangeStart:J,onViewportChange:ce,onViewportChangeEnd:oe}=I.getState();clearTimeout(W.current),z.current||(z.current=!0,t==null||t(Z,K),J==null||J(K)),z.current&&(e==null||e(Z,K),ce==null||ce(K),W.current=setTimeout(()=>{r==null||r(Z,K),oe==null||oe(K),z.current=!1},150))},{passive:!1}):typeof L<"u"&&S.on("wheel.zoom",function(Z,V){if(!y&&Z.type==="wheel"&&!Z.ctrlKey||lb(Z,C))return null;Z.preventDefault(),L.call(this,Z,V)},{passive:!1}))},[U,o,c,S,P,L,q,s,y,C,t,e,r]),w.useEffect(()=>{P&&P.on("start",Z=>{var R,O;if(!Z.sourceEvent||Z.sourceEvent.internal)return null;H.current=(R=Z.sourceEvent)==null?void 0:R.button;const{onViewportChangeStart:V}=I.getState(),Y=Hk(Z.transform);T.current=!0,M.current=Y,((O=Z.sourceEvent)==null?void 0:O.type)==="mousedown"&&I.setState({paneDragging:!0}),V==null||V(Y),t==null||t(Z.sourceEvent,Y)})},[P,t]),w.useEffect(()=>{P&&(U&&!T.current?P.on("zoom",null):U||P.on("zoom",Z=>{var Y;const{onViewportChange:V}=I.getState();if(I.setState({transform:[Z.transform.x,Z.transform.y,Z.transform.k]}),k.current=!!(n&&aee(f,H.current??0)),(e||V)&&!((Y=Z.sourceEvent)!=null&&Y.internal)){const R=Hk(Z.transform);V==null||V(R),e==null||e(Z.sourceEvent,R)}}))},[U,P,e,f,n]),w.useEffect(()=>{P&&P.on("end",Z=>{if(!Z.sourceEvent||Z.sourceEvent.internal)return null;const{onViewportChangeEnd:V}=I.getState();if(T.current=!1,I.setState({paneDragging:!1}),n&&aee(f,H.current??0)&&!k.current&&n(Z.sourceEvent),k.current=!1,(r||V)&&o0t(M.current,Z.transform)){const Y=Hk(Z.transform);M.current=Y,clearTimeout(j.current),j.current=setTimeout(()=>{V==null||V(Y),r==null||r(Z.sourceEvent,Y)},o?150:0)}})},[P,o,f,r,n]),w.useEffect(()=>{P&&P.filter(Z=>{const V=q||a,Y=s&&Z.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&Z.button===1&&Z.type==="mousedown"&&(lb(Z,"react-flow__node")||lb(Z,"react-flow__edge")))return!0;if(!f&&!V&&!o&&!u&&!s||U||!u&&Z.type==="dblclick"||lb(Z,C)&&Z.type==="wheel"||lb(Z,_)&&(Z.type!=="wheel"||o&&Z.type==="wheel"&&!q)||!s&&Z.ctrlKey&&Z.type==="wheel"||!V&&!o&&!Y&&Z.type==="wheel"||!f&&(Z.type==="mousedown"||Z.type==="touchstart")||Array.isArray(f)&&!f.includes(Z.button)&&Z.type==="mousedown")return!1;const R=Array.isArray(f)&&f.includes(Z.button)||!Z.button||Z.button<=1;return(!Z.ctrlKey||Z.type==="wheel")&&R})},[U,P,a,s,o,u,f,d,q]),At.createElement("div",{className:"react-flow__renderer",ref:B,style:wH},N)},u0t=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function d0t(){const{userSelectionActive:e,userSelectionRect:t}=Ds(u0t,Hl);return e&&t?At.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function iee(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function hpe(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(l=>l.id===a.id);if(s.length===0)return n.push(a),n;const o={...a};for(const l of s)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&iee(n,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&iee(n,o);break}case"remove":return n}return n.push(o),n},r)}function Ape(e,t){return hpe(e,t)}function f0t(e,t){return hpe(e,t)}const Vm=(e,t)=>({id:e,type:"select",selected:t});function Vb(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(Vm(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(Vm(n.id,!1))),r},[])}const FO=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},h0t=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),mpe=w.memo(({isSelecting:e,selectionMode:t=wC.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const A=w.useRef(null),m=ko(),g=w.useRef(0),x=w.useRef(0),v=w.useRef(),{userSelectionActive:y,elementsSelectable:N,dragging:C}=Ds(h0t,Hl),_=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},j=L=>{s==null||s(L),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},I=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}o==null||o(L)},T=l?L=>l(L):void 0,k=L=>{const{resetSelectedElements:U,domNode:q}=m.getState();if(v.current=q==null?void 0:q.getBoundingClientRect(),!N||!e||L.button!==0||L.target!==A.current||!v.current)return;const{x:H,y:z}=gp(L,v.current);U(),m.setState({userSelectionRect:{width:0,height:0,startX:H,startY:z,x:H,y:z}}),n==null||n(L)},B=L=>{const{userSelectionRect:U,nodeInternals:q,edges:H,transform:z,onNodesChange:W,onEdgesChange:Z,nodeOrigin:V,getNodes:Y}=m.getState();if(!e||!v.current||!U)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const R=gp(L,v.current),O=U.startX??0,K=U.startY??0,J={...U,x:R.x<O?R.x:O,y:R.y<K?R.y:K,width:Math.abs(R.x-O),height:Math.abs(R.y-K)},ce=Y(),oe=Wme(q,J,z,t===wC.Partial,!0,V),re=Xme(oe,H).map(le=>le.id),ue=oe.map(le=>le.id);if(g.current!==ue.length){g.current=ue.length;const le=Vb(ce,ue);le.length&&(W==null||W(le))}if(x.current!==re.length){x.current=re.length;const le=Vb(H,re);le.length&&(Z==null||Z(le))}m.setState({userSelectionRect:J})},M=L=>{if(L.button!==0)return;const{userSelectionRect:U}=m.getState();!y&&U&&L.target===A.current&&(j==null||j(L)),m.setState({nodesSelectionActive:g.current>0}),_(),a==null||a(L)},P=L=>{y&&(m.setState({nodesSelectionActive:g.current>0}),a==null||a(L)),_()},S=N&&(e||y);return At.createElement("div",{className:lc(["react-flow__pane",{dragging:C,selection:e}]),onClick:S?void 0:FO(j,A),onContextMenu:FO(I,A),onWheel:FO(T,A),onMouseEnter:S?void 0:c,onMouseDown:S?k:void 0,onMouseMove:S?B:u,onMouseUp:S?M:void 0,onMouseLeave:S?P:d,ref:A,style:wH},f,At.createElement(d0t,null))});mpe.displayName="Pane";function ppe(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:ppe(n,t):!1}function oee(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function A0t(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!ppe(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,o;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((o=a.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function m0t(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function gpe(e,t,r,n,a=[0,0],s){const o=m0t(e,e.extent||n);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:A,y:m}=y1(f,a).positionAbsolute;l=f&&jd(A)&&jd(m)&&jd(f.width)&&jd(f.height)?[[A+e.width*a[0],m+e.height*a[1]],[A+f.width-e.width+e.width*a[0],m+f.height-e.height+e.height*a[1]]]:l}else s==null||s("005",OA.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:A,y:m}=y1(f,a).positionAbsolute;l=[[e.extent[0][0]+A,e.extent[0][1]+m],[e.extent[1][0]+A,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=r.get(c);u=y1(f,a).positionAbsolute}const d=l&&l!=="parent"?hH(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function RO({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const lee=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),o=t.getBoundingClientRect(),l={x:o.width*n[0],y:o.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/r,y:(u.top-o.top-l.y)/r,...fH(c)}})};function t2(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function CL({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",OA.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function p0t(){const e=ko();return w.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(o-n[0])/n[2],y:(l-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function LO(e){return(t,r,n)=>e==null?void 0:e(t,n)}function xpe({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:o}){const l=ko(),[c,u]=w.useState(!1),d=w.useRef([]),f=w.useRef({x:null,y:null}),A=w.useRef(0),m=w.useRef(null),g=w.useRef({x:0,y:0}),x=w.useRef(null),v=w.useRef(!1),y=w.useRef(!1),N=w.useRef(!1),C=p0t();return w.useEffect(()=>{if(e!=null&&e.current){const _=wd(e.current),j=({x:k,y:B})=>{const{nodeInternals:M,onNodeDrag:P,onSelectionDrag:S,updateNodePositions:L,nodeExtent:U,snapGrid:q,snapToGrid:H,nodeOrigin:z,onError:W}=l.getState();f.current={x:k,y:B};let Z=!1,V={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&U){const R=vH(d.current,z);V=AH(R)}if(d.current=d.current.map(R=>{const O={x:k-R.distance.x,y:B-R.distance.y};H&&(O.x=q[0]*Math.round(O.x/q[0]),O.y=q[1]*Math.round(O.y/q[1]));const K=[[U[0][0],U[0][1]],[U[1][0],U[1][1]]];d.current.length>1&&U&&!R.extent&&(K[0][0]=R.positionAbsolute.x-V.x+U[0][0],K[1][0]=R.positionAbsolute.x+(R.width??0)-V.x2+U[1][0],K[0][1]=R.positionAbsolute.y-V.y+U[0][1],K[1][1]=R.positionAbsolute.y+(R.height??0)-V.y2+U[1][1]);const J=gpe(R,O,M,K,z,W);return Z=Z||R.position.x!==J.position.x||R.position.y!==J.position.y,R.position=J.position,R.positionAbsolute=J.positionAbsolute,R}),!Z)return;L(d.current,!0,!0),u(!0);const Y=a?P:LO(S);if(Y&&x.current){const[R,O]=RO({nodeId:a,dragItems:d.current,nodeInternals:M});Y(x.current,R,O)}},I=()=>{if(!m.current)return;const[k,B]=Ume(g.current,m.current);if(k!==0||B!==0){const{transform:M,panBy:P}=l.getState();f.current.x=(f.current.x??0)-k/M[2],f.current.y=(f.current.y??0)-B/M[2],P({x:k,y:B})&&j(f.current)}A.current=requestAnimationFrame(I)},T=k=>{var z;const{nodeInternals:B,multiSelectionActive:M,nodesDraggable:P,unselectNodesAndEdges:S,onNodeDragStart:L,onSelectionDragStart:U}=l.getState();y.current=!0;const q=a?L:LO(U);(!o||!s)&&!M&&a&&((z=B.get(a))!=null&&z.selected||S()),a&&s&&o&&CL({id:a,store:l,nodeRef:e});const H=C(k);if(f.current=H,d.current=A0t(B,P,H,a),q&&d.current){const[W,Z]=RO({nodeId:a,dragItems:d.current,nodeInternals:B});q(k.sourceEvent,W,Z)}};if(t)_.on(".drag",null);else{const k=Ydt().on("start",B=>{const{domNode:M,nodeDragThreshold:P}=l.getState();P===0&&T(B),N.current=!1;const S=C(B);f.current=S,m.current=(M==null?void 0:M.getBoundingClientRect())||null,g.current=gp(B.sourceEvent,m.current)}).on("drag",B=>{var L,U;const M=C(B),{autoPanOnNodeDrag:P,nodeDragThreshold:S}=l.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(N.current=!0),!N.current){if(!v.current&&y.current&&P&&(v.current=!0,I()),!y.current){const q=M.xSnapped-(((L=f==null?void 0:f.current)==null?void 0:L.x)??0),H=M.ySnapped-(((U=f==null?void 0:f.current)==null?void 0:U.y)??0);Math.sqrt(q*q+H*H)>S&&T(B)}(f.current.x!==M.xSnapped||f.current.y!==M.ySnapped)&&d.current&&y.current&&(x.current=B.sourceEvent,g.current=gp(B.sourceEvent,m.current),j(M))}}).on("end",B=>{if(!(!y.current||N.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(A.current),d.current)){const{updateNodePositions:M,nodeInternals:P,onNodeDragStop:S,onSelectionDragStop:L}=l.getState(),U=a?S:LO(L);if(M(d.current,!1,!1),U){const[q,H]=RO({nodeId:a,dragItems:d.current,nodeInternals:P});U(B.sourceEvent,q,H)}}}).filter(B=>{const M=B.target;return!B.button&&(!r||!oee(M,`.${r}`,e))&&(!n||oee(M,n,e))});return _.call(k),()=>{_.on(".drag",null)}}}},[e,t,r,n,s,l,a,o,C]),c}function vpe(){const e=ko();return w.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(N=>N.selected&&(N.draggable||d&&typeof N.draggable>"u")),A=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*A*g,v=r.y*m*g,y=f.map(N=>{if(N.positionAbsolute){const C={x:N.positionAbsolute.x+x,y:N.positionAbsolute.y+v};l&&(C.x=c[0]*Math.round(C.x/c[0]),C.y=c[1]*Math.round(C.y/c[1]));const{positionAbsolute:_,position:j}=gpe(N,C,n,a,void 0,u);N.position=j,N.positionAbsolute=_}return N});s(y,!0,!1)},[])}const w1={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var r2=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:A,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:N,isSelectable:C,isConnectable:_,isFocusable:j,selectNodesOnDrag:I,sourcePosition:T,targetPosition:k,hidden:B,resizeObserver:M,dragHandle:P,zIndex:S,isParent:L,noDragClassName:U,noPanClassName:q,initialized:H,disableKeyboardA11y:z,ariaLabel:W,rfId:Z,hasHandleBounds:V})=>{const Y=ko(),R=w.useRef(null),O=w.useRef(null),K=w.useRef(T),J=w.useRef(k),ce=w.useRef(n),oe=C||N||d||f||A||m,re=vpe(),ue=t2(r,Y.getState,f),le=t2(r,Y.getState,A),ve=t2(r,Y.getState,m),X=t2(r,Y.getState,g),Ee=t2(r,Y.getState,x),Be=ye=>{const{nodeDragThreshold:Ae}=Y.getState();if(C&&(!I||!N||Ae>0)&&CL({id:r,store:Y,nodeRef:R}),d){const se=Y.getState().nodeInternals.get(r);se&&d(ye,{...se})}},je=ye=>{if(!vL(ye)&&!z)if(Qme.includes(ye.key)&&C){const Ae=ye.key==="Escape";CL({id:r,store:Y,unselect:Ae,nodeRef:R})}else N&&u&&Object.prototype.hasOwnProperty.call(w1,ye.key)&&(Y.setState({ariaLiveMessage:`Moved selected node ${ye.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),re({x:w1[ye.key].x,y:w1[ye.key].y,isShiftPressed:ye.shiftKey}))};w.useEffect(()=>()=>{O.current&&(M==null||M.unobserve(O.current),O.current=null)},[]),w.useEffect(()=>{if(R.current&&!B){const ye=R.current;(!H||!V||O.current!==ye)&&(O.current&&(M==null||M.unobserve(O.current)),M==null||M.observe(ye),O.current=ye)}},[B,H,V]),w.useEffect(()=>{const ye=ce.current!==n,Ae=K.current!==T,se=J.current!==k;R.current&&(ye||Ae||se)&&(ye&&(ce.current=n),Ae&&(K.current=T),se&&(J.current=k),Y.getState().updateNodeDimensions([{id:r,nodeElement:R.current,forceUpdate:!0}]))},[r,n,T,k]);const fe=xpe({nodeRef:R,disabled:B||!N,noDragClassName:U,handleSelector:P,nodeId:r,isSelectable:C,selectNodesOnDrag:I});return B?null:At.createElement("div",{className:lc(["react-flow__node",`react-flow__node-${n}`,{[q]:N},y,{selected:u,selectable:C,parent:L,dragging:fe}]),ref:R,style:{zIndex:S,transform:`translate(${l}px,${c}px)`,pointerEvents:oe?"all":"none",visibility:H?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ue,onMouseMove:le,onMouseLeave:ve,onContextMenu:X,onClick:Be,onDoubleClick:Ee,onKeyDown:j?je:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":z?void 0:`${lpe}-${Z}`,"aria-label":W},At.createElement(Tht,{value:r},At.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:o,selected:u,isConnectable:_,sourcePosition:T,targetPosition:k,dragging:fe,dragHandle:P,zIndex:S})))};return t.displayName="NodeWrapper",w.memo(t)};const g0t=e=>{const t=e.getNodes().filter(r=>r.selected);return{...vH(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function x0t({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=ko(),{width:a,height:s,x:o,y:l,transformString:c,userSelectionActive:u}=Ds(g0t,Hl),d=vpe(),f=w.useRef(null);if(w.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),xpe({nodeRef:f}),u||!a||!s)return null;const A=e?g=>{const x=n.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(w1,g.key)&&d({x:w1[g.key].x,y:w1[g.key].y,isShiftPressed:g.shiftKey})};return At.createElement("div",{className:lc(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},At.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:A,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:s,top:l,left:o}}))}var v0t=w.memo(x0t);const b0t=e=>e.nodesSelectionActive,bpe=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:A,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:N,elementsSelectable:C,zoomOnScroll:_,zoomOnPinch:j,panOnScroll:I,panOnScrollSpeed:T,panOnScrollMode:k,zoomOnDoubleClick:B,panOnDrag:M,defaultViewport:P,translateExtent:S,minZoom:L,maxZoom:U,preventScrolling:q,onSelectionContextMenu:H,noWheelClassName:z,noPanClassName:W,disableKeyboardA11y:Z})=>{const V=Ds(b0t),Y=NC(f),R=NC(y),O=R||M,K=R||I,J=Y||A&&O!==!0;return s0t({deleteKeyCode:l,multiSelectionKeyCode:v}),At.createElement(c0t,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:_,zoomOnPinch:j,panOnScroll:K,panOnScrollSpeed:T,panOnScrollMode:k,zoomOnDoubleClick:B,panOnDrag:!Y&&O,defaultViewport:P,translateExtent:S,minZoom:L,maxZoom:U,zoomActivationKeyCode:N,preventScrolling:q,noWheelClassName:z,noPanClassName:W},At.createElement(mpe,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:O,isSelecting:!!J,selectionMode:m},e,V&&At.createElement(v0t,{onSelectionContextMenu:H,noPanClassName:W,disableKeyboardA11y:Z})))};bpe.displayName="FlowRenderer";var y0t=w.memo(bpe);function w0t(e){return Ds(w.useCallback(r=>e?Wme(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function N0t(e){const t={input:r2(e.input||ape),default:r2(e.default||NL),output:r2(e.output||ipe),group:r2(e.group||yH)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=r2(e[s]||NL),a),r);return{...t,...n}}const C0t=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},E0t=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ype=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:o}=Ds(E0t,Hl),l=w0t(e.onlyRenderVisibleElements),c=w.useRef(),u=w.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const A=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(A)});return c.current=d,d},[]);return w.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),At.createElement("div",{className:"react-flow__nodes",style:wH},l.map(d=>{var j,I,T;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",OA.error003(f)),f="default");const A=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?hH(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,N=(y==null?void 0:y.x)??0,C=(y==null?void 0:y.y)??0,_=C0t({x:N,y:C,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return At.createElement(A,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Pr.Bottom,targetPosition:d.targetPosition||Pr.Top,hidden:d.hidden,xPos:N,yPos:C,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((j=d[Xs])==null?void 0:j.z)??0,isParent:!!((I=d[Xs])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((T=d[Xs])!=null&&T.handleBounds)})}))};ype.displayName="NodeRenderer";var j0t=w.memo(ype);const k0t=(e,t,r)=>r===Pr.Left?e-t:r===Pr.Right?e+t:e,S0t=(e,t,r)=>r===Pr.Top?e-t:r===Pr.Bottom?e+t:e,cee="react-flow__edgeupdater",uee=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:o,type:l})=>At.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:o,className:lc([cee,`${cee}-${l}`]),cx:k0t(t,n,e),cy:S0t(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),_0t=()=>!0;var cb=e=>{const t=({id:r,className:n,type:a,data:s,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:A,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:N,sourceX:C,sourceY:_,targetX:j,targetY:I,sourcePosition:T,targetPosition:k,elementsSelectable:B,hidden:M,sourceHandleId:P,targetHandleId:S,onContextMenu:L,onMouseEnter:U,onMouseMove:q,onMouseLeave:H,reconnectRadius:z,onReconnect:W,onReconnectStart:Z,onReconnectEnd:V,markerEnd:Y,markerStart:R,rfId:O,ariaLabel:K,isFocusable:J,isReconnectable:ce,pathOptions:oe,interactionWidth:re,disableKeyboardA11y:ue})=>{const le=w.useRef(null),[ve,X]=w.useState(!1),[Ee,Be]=w.useState(!1),je=ko(),fe=w.useMemo(()=>`url('#${yL(R,O)}')`,[R,O]),ye=w.useMemo(()=>`url('#${yL(Y,O)}')`,[Y,O]);if(M)return null;const Ae=We=>{var et;const{edges:He,addSelectedEdges:Tt,unselectNodesAndEdges:Ie,multiSelectionActive:ft}=je.getState(),vt=He.find(Ct=>Ct.id===r);vt&&(B&&(je.setState({nodesSelectionActive:!1}),vt.selected&&ft?(Ie({nodes:[],edges:[vt]}),(et=le.current)==null||et.blur()):Tt([r])),o&&o(We,vt))},se=e2(r,je.getState,l),ne=e2(r,je.getState,L),de=e2(r,je.getState,U),me=e2(r,je.getState,q),ge=e2(r,je.getState,H),Te=(We,He)=>{if(We.button!==0)return;const{edges:Tt,isValidConnection:Ie}=je.getState(),ft=He?N:y,vt=(He?S:P)||null,et=He?"target":"source",Ct=Ie||_0t,St=He,ot=Tt.find(Zt=>Zt.id===r);Be(!0),Z==null||Z(We,ot,et);const nr=Zt=>{Be(!1),V==null||V(Zt,ot,et)};epe({event:We,handleId:vt,nodeId:ft,onConnect:Zt=>W==null?void 0:W(ot,Zt),isTarget:St,getState:je.getState,setState:je.setState,isValidConnection:Ct,edgeUpdaterType:et,onReconnectEnd:nr})},Ve=We=>Te(We,!0),Xe=We=>Te(We,!1),Ke=()=>X(!0),Qe=()=>X(!1),Je=!B&&!o,mt=We=>{var He;if(!ue&&Qme.includes(We.key)&&B){const{unselectNodesAndEdges:Tt,addSelectedEdges:Ie,edges:ft}=je.getState();We.key==="Escape"?((He=le.current)==null||He.blur(),Tt({edges:[ft.find(et=>et.id===r)]})):Ie([r])}};return At.createElement("g",{className:lc(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Je,updating:ve}]),onClick:Ae,onDoubleClick:se,onContextMenu:ne,onMouseEnter:de,onMouseMove:me,onMouseLeave:ge,onKeyDown:J?mt:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":K===null?void 0:K||`Edge from ${y} to ${N}`,"aria-describedby":J?`${cpe}-${O}`:void 0,ref:le},!Ee&&At.createElement(e,{id:r,source:y,target:N,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:A,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:v,sourceX:C,sourceY:_,targetX:j,targetY:I,sourcePosition:T,targetPosition:k,sourceHandleId:P,targetHandleId:S,markerStart:fe,markerEnd:ye,pathOptions:oe,interactionWidth:re}),ce&&At.createElement(At.Fragment,null,(ce==="source"||ce===!0)&&At.createElement(uee,{position:T,centerX:C,centerY:_,radius:z,onMouseDown:Ve,onMouseEnter:Ke,onMouseOut:Qe,type:"source"}),(ce==="target"||ce===!0)&&At.createElement(uee,{position:k,centerX:j,centerY:I,radius:z,onMouseDown:Xe,onMouseEnter:Ke,onMouseOut:Qe,type:"target"})))};return t.displayName="EdgeWrapper",w.memo(t)};function T0t(e){const t={default:cb(e.default||i4),straight:cb(e.bezier||gH),step:cb(e.step||pH),smoothstep:cb(e.step||QT),simplebezier:cb(e.simplebezier||mH)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=cb(e[s]||i4),a),r);return{...t,...n}}function dee(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,o=(r==null?void 0:r.height)||t.height;switch(e){case Pr.Top:return{x:n+s/2,y:a};case Pr.Right:return{x:n+s,y:a+o/2};case Pr.Bottom:return{x:n+s/2,y:a+o};case Pr.Left:return{x:n,y:a+o/2}}}function fee(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const B0t=(e,t,r,n,a,s)=>{const o=dee(r,e,t),l=dee(s,n,a);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function I0t({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=AH({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),A=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*A)>0}function hee(e){var n,a,s,o,l;const t=((n=e==null?void 0:e[Xs])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const D0t=[{level:0,isMaxLevel:!0,edges:[]}];function O0t(e,t,r=!1){let n=-1;const a=e.reduce((o,l)=>{var d,f;const c=jd(l.zIndex);let u=c?l.zIndex:0;if(r){const A=t.get(l.target),m=t.get(l.source),g=l.selected||(A==null?void 0:A.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Xs])==null?void 0:d.z)||0,((f=A==null?void 0:A[Xs])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(g?x:0)}return o[u]?o[u].push(l):o[u]=[l],n=u>n?u:n,o},{}),s=Object.entries(a).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===n}});return s.length===0?D0t:s}function P0t(e,t,r){const n=Ds(w.useCallback(a=>e?a.edges.filter(s=>{const o=t.get(s.source),l=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&I0t({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return O0t(n,t,r)}const F0t=({color:e="none",strokeWidth:t=1})=>At.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),R0t=({color:e="none",strokeWidth:t=1})=>At.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Aee={[s4.Arrow]:F0t,[s4.ArrowClosed]:R0t};function L0t(e){const t=ko();return w.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(Aee,e)?Aee[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",OA.error009(e)),null)},[e])}const M0t=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=L0t(t);return c?At.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},At.createElement(c,{color:r,strokeWidth:o})):null},U0t=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=yL(o,t);n.includes(l)||(a.push({id:l,color:o.color||e,...o}),n.push(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},wpe=({defaultColor:e,rfId:t})=>{const r=Ds(w.useCallback(U0t({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,o)=>s.id!==a[o].id)));return At.createElement("defs",null,r.map(n=>At.createElement(M0t,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};wpe.displayName="MarkerDefinitions";var H0t=w.memo(wpe);const Q0t=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Npe=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:A,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:N,edgesUpdatable:C,elementsSelectable:_,width:j,height:I,connectionMode:T,nodeInternals:k,onError:B}=Ds(Q0t,Hl),M=P0t(t,k,r);return j?At.createElement(At.Fragment,null,M.map(({level:P,edges:S,isMaxLevel:L})=>At.createElement("svg",{key:P,style:{zIndex:P},width:j,height:I,className:"react-flow__edges react-flow__container"},L&&At.createElement(H0t,{defaultColor:e,rfId:n}),At.createElement("g",null,S.map(U=>{const[q,H,z]=hee(k.get(U.source)),[W,Z,V]=hee(k.get(U.target));if(!z||!V)return null;let Y=U.type||"default";a[Y]||(B==null||B("011",OA.error011(Y)),Y="default");const R=a[Y]||a.default,O=T===Wx.Strict?Z.target:(Z.target??[]).concat(Z.source??[]),K=fee(H.source,U.sourceHandle),J=fee(O,U.targetHandle),ce=(K==null?void 0:K.position)||Pr.Bottom,oe=(J==null?void 0:J.position)||Pr.Top,re=!!(U.focusable||N&&typeof U.focusable>"u"),ue=U.reconnectable||U.updatable,le=typeof A<"u"&&(ue||C&&typeof ue>"u");if(!K||!J)return B==null||B("008",OA.error008(K,U)),null;const{sourceX:ve,sourceY:X,targetX:Ee,targetY:Be}=B0t(q,K,ce,W,J,oe);return At.createElement(R,{key:U.id,id:U.id,className:lc([U.className,s]),type:Y,data:U.data,selected:!!U.selected,animated:!!U.animated,hidden:!!U.hidden,label:U.label,labelStyle:U.labelStyle,labelShowBg:U.labelShowBg,labelBgStyle:U.labelBgStyle,labelBgPadding:U.labelBgPadding,labelBgBorderRadius:U.labelBgBorderRadius,style:U.style,source:U.source,target:U.target,sourceHandleId:U.sourceHandle,targetHandleId:U.targetHandle,markerEnd:U.markerEnd,markerStart:U.markerStart,sourceX:ve,sourceY:X,targetX:Ee,targetY:Be,sourcePosition:ce,targetPosition:oe,elementsSelectable:_,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:A,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:U.ariaLabel,isFocusable:re,isReconnectable:le,pathOptions:"pathOptions"in U?U.pathOptions:void 0,interactionWidth:U.interactionWidth,disableKeyboardA11y:y})})))),v):null};Npe.displayName="EdgeRenderer";var V0t=w.memo(Npe);const $0t=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function z0t({children:e}){const t=Ds($0t);return At.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function G0t(e){const t=VT(),r=w.useRef(!1);w.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const q0t={[Pr.Left]:Pr.Right,[Pr.Right]:Pr.Left,[Pr.Top]:Pr.Bottom,[Pr.Bottom]:Pr.Top},Cpe=({nodeId:e,handleType:t,style:r,type:n=Xm.Bezier,CustomComponent:a,connectionStatus:s})=>{var I,T,k;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=Ds(w.useCallback(B=>({fromNode:B.nodeInternals.get(e),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[e]),Hl),f=(I=o==null?void 0:o[Xs])==null?void 0:I.handleBounds;let A=f==null?void 0:f[t];if(d===Wx.Loose&&(A=A||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!A)return null;const m=l?A.find(B=>B.id===l):A[0],g=m?m.x+m.width/2:(o.width??0)/2,x=m?m.y+m.height/2:o.height??0,v=(((T=o.positionAbsolute)==null?void 0:T.x)??0)+g,y=(((k=o.positionAbsolute)==null?void 0:k.y)??0)+x,N=m==null?void 0:m.position,C=N?q0t[N]:null;if(!N||!C)return null;if(a)return At.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:N,toPosition:C,connectionStatus:s});let _="";const j={sourceX:v,sourceY:y,sourcePosition:N,targetX:c,targetY:u,targetPosition:C};return n===Xm.Bezier?[_]=qme(j):n===Xm.Step?[_]=bL({...j,borderRadius:0}):n===Xm.SmoothStep?[_]=bL(j):n===Xm.SimpleBezier?[_]=Gme(j):_=`M${v},${y} ${c},${u}`,At.createElement("path",{d:_,fill:"none",className:"react-flow__connection-path",style:r})};Cpe.displayName="ConnectionLine";const K0t=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function W0t({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:o,width:l,height:c,connectionStatus:u}=Ds(K0t,Hl);return!(a&&s&&l&&o)?null:At.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},At.createElement("g",{className:lc(["react-flow__connection",u])},At.createElement(Cpe,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function mee(e,t){return w.useRef(null),ko(),w.useMemo(()=>t(e),[e])}const Epe=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:A,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:N,connectionLineComponent:C,connectionLineContainerStyle:_,selectionKeyCode:j,selectionOnDrag:I,selectionMode:T,multiSelectionKeyCode:k,panActivationKeyCode:B,zoomActivationKeyCode:M,deleteKeyCode:P,onlyRenderVisibleElements:S,elementsSelectable:L,selectNodesOnDrag:U,defaultViewport:q,translateExtent:H,minZoom:z,maxZoom:W,preventScrolling:Z,defaultMarkerColor:V,zoomOnScroll:Y,zoomOnPinch:R,panOnScroll:O,panOnScrollSpeed:K,panOnScrollMode:J,zoomOnDoubleClick:ce,panOnDrag:oe,onPaneClick:re,onPaneMouseEnter:ue,onPaneMouseMove:le,onPaneMouseLeave:ve,onPaneScroll:X,onPaneContextMenu:Ee,onEdgeContextMenu:Be,onEdgeMouseEnter:je,onEdgeMouseMove:fe,onEdgeMouseLeave:ye,onReconnect:Ae,onReconnectStart:se,onReconnectEnd:ne,reconnectRadius:de,noDragClassName:me,noWheelClassName:ge,noPanClassName:Te,elevateEdgesOnSelect:Ve,disableKeyboardA11y:Xe,nodeOrigin:Ke,nodeExtent:Qe,rfId:Je})=>{const mt=mee(e,N0t),We=mee(t,T0t);return G0t(s),At.createElement(y0t,{onPaneClick:re,onPaneMouseEnter:ue,onPaneMouseMove:le,onPaneMouseLeave:ve,onPaneContextMenu:Ee,onPaneScroll:X,deleteKeyCode:P,selectionKeyCode:j,selectionOnDrag:I,selectionMode:T,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:k,panActivationKeyCode:B,zoomActivationKeyCode:M,elementsSelectable:L,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:Y,zoomOnPinch:R,zoomOnDoubleClick:ce,panOnScroll:O,panOnScrollSpeed:K,panOnScrollMode:J,panOnDrag:oe,defaultViewport:q,translateExtent:H,minZoom:z,maxZoom:W,onSelectionContextMenu:g,preventScrolling:Z,noDragClassName:me,noWheelClassName:ge,noPanClassName:Te,disableKeyboardA11y:Xe},At.createElement(z0t,null,At.createElement(V0t,{edgeTypes:We,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:S,onEdgeContextMenu:Be,onEdgeMouseEnter:je,onEdgeMouseMove:fe,onEdgeMouseLeave:ye,onReconnect:Ae,onReconnectStart:se,onReconnectEnd:ne,reconnectRadius:de,defaultMarkerColor:V,noPanClassName:Te,elevateEdgesOnSelect:!!Ve,disableKeyboardA11y:Xe,rfId:Je},At.createElement(W0t,{style:N,type:y,component:C,containerStyle:_})),At.createElement("div",{className:"react-flow__edgelabel-renderer"}),At.createElement(j0t,{nodeTypes:mt,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:A,onNodeContextMenu:m,selectNodesOnDrag:U,onlyRenderVisibleElements:S,noPanClassName:Te,noDragClassName:me,disableKeyboardA11y:Xe,nodeOrigin:Ke,nodeExtent:Qe,rfId:Je})))};Epe.displayName="GraphView";var X0t=w.memo(Epe);const EL=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Om={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:EL,nodeExtent:EL,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Wx.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Cht,isValidConnection:void 0},Y0t=()=>cut((e,t)=>({...Om,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:PO(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",o=a?PO(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:A}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=a.get(v.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Xs]:{...y[Xs],handleBounds:void 0}});else if(y){const N=fH(v.nodeElement);!!(N.width&&N.height&&(y.width!==N.width||y.height!==N.height||v.forceUpdate))&&(a.set(y.id,{...y,[Xs]:{...y[Xs],handleBounds:{source:lee(".source",v.nodeElement,A,u),target:lee(".target",v.nodeElement,A,u)}},...N}),x.push({id:y.id,type:"dimensions",dimensions:N}))}return x},[]);dpe(a,u);const g=o||s&&!o&&fpe(t,{initial:!0,...l});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),o=r.map(l=>{const c={id:l.id,type:"position",dragging:a};return n&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});s(o)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=Ape(r,l()),d=PO(u,a,o,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>Vm(c,!0)):(o=Vb(s(),r),l=Vb(a,[])),Uk({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>Vm(c,!0)):(o=Vb(a,r),l=Vb(s(),[])),Uk({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),o=r||s(),l=n||a,c=o.map(d=>(d.selected=!1,Vm(d.id,!1))),u=l.map(d=>Vm(d.id,!1));Uk({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(l=>l.selected).map(l=>Vm(l.id,!1)),o=r.filter(l=>l.selected).map(l=>Vm(l.id,!1));Uk({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=hH(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!r.x&&!r.y)return!1;const u=pp.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Om.connectionNodeId,connectionHandleId:Om.connectionHandleId,connectionHandleType:Om.connectionHandleType,connectionStatus:Om.connectionStatus,connectionStartHandle:Om.connectionStartHandle,connectionEndHandle:Om.connectionEndHandle}),reset:()=>e({...Om})}),Object.is),NH=({children:e})=>{const t=w.useRef(null);return t.current||(t.current=Y0t()),At.createElement(pht,{value:t.current},e)};NH.displayName="ReactFlowProvider";const jpe=({children:e})=>w.useContext(HT)?At.createElement(At.Fragment,null,e):At.createElement(NH,null,e);jpe.displayName="ReactFlowWrapper";const J0t={input:ape,default:NL,output:ipe,group:yH},Z0t={default:i4,straight:gH,step:pH,smoothstep:QT,simplebezier:mH},eAt=[0,0],tAt=[15,15],rAt={x:0,y:0,zoom:1},nAt={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},kpe=w.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=J0t,edgeTypes:o=Z0t,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:A,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:N,onNodeMouseMove:C,onNodeMouseLeave:_,onNodeContextMenu:j,onNodeDoubleClick:I,onNodeDragStart:T,onNodeDrag:k,onNodeDragStop:B,onNodesDelete:M,onEdgesDelete:P,onSelectionChange:S,onSelectionDragStart:L,onSelectionDrag:U,onSelectionDragStop:q,onSelectionContextMenu:H,onSelectionStart:z,onSelectionEnd:W,connectionMode:Z=Wx.Strict,connectionLineType:V=Xm.Bezier,connectionLineStyle:Y,connectionLineComponent:R,connectionLineContainerStyle:O,deleteKeyCode:K="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:ce=!1,selectionMode:oe=wC.Full,panActivationKeyCode:re="Space",multiSelectionKeyCode:ue=a4()?"Meta":"Control",zoomActivationKeyCode:le=a4()?"Meta":"Control",snapToGrid:ve=!1,snapGrid:X=tAt,onlyRenderVisibleElements:Ee=!1,selectNodesOnDrag:Be=!0,nodesDraggable:je,nodesConnectable:fe,nodesFocusable:ye,nodeOrigin:Ae=eAt,edgesFocusable:se,edgesUpdatable:ne,elementsSelectable:de,defaultViewport:me=rAt,minZoom:ge=.5,maxZoom:Te=2,translateExtent:Ve=EL,preventScrolling:Xe=!0,nodeExtent:Ke,defaultMarkerColor:Qe="#b1b1b7",zoomOnScroll:Je=!0,zoomOnPinch:mt=!0,panOnScroll:We=!1,panOnScrollSpeed:He=.5,panOnScrollMode:Tt=sx.Free,zoomOnDoubleClick:Ie=!0,panOnDrag:ft=!0,onPaneClick:vt,onPaneMouseEnter:et,onPaneMouseMove:Ct,onPaneMouseLeave:St,onPaneScroll:ot,onPaneContextMenu:nr,children:fr,onEdgeContextMenu:Zt,onEdgeDoubleClick:Ft,onEdgeMouseEnter:dr,onEdgeMouseMove:Sr,onEdgeMouseLeave:_r,onEdgeUpdate:Vn,onEdgeUpdateStart:qa,onEdgeUpdateEnd:ar,onReconnect:fn,onReconnectStart:$r,onReconnectEnd:mn,reconnectRadius:In=10,edgeUpdaterRadius:$n=10,onNodesChange:ke,onEdgesChange:$e,noDragClassName:Re="nodrag",noWheelClassName:Me="nowheel",noPanClassName:we="nopan",fitView:xe=!1,fitViewOptions:De,connectOnClick:Ge=!0,attributionPosition:Ue,proOptions:Ze,defaultEdgeOptions:rt,elevateNodesOnSelect:_t=!0,elevateEdgesOnSelect:Bt=!1,disableKeyboardA11y:Kt=!1,autoPanOnConnect:Ut=!0,autoPanOnNodeDrag:Jt=!0,connectionRadius:jr=20,isValidConnection:on,onError:ln,style:hn,id:Ka,nodeDragThreshold:Ci,...Da},us)=>{const Oa=Ka||"1";return At.createElement("div",{...Da,style:{...hn,...nAt},ref:us,className:lc(["react-flow",a]),"data-testid":"rf__wrapper",id:Ka},At.createElement(jpe,null,At.createElement(X0t,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:A,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:N,onNodeMouseMove:C,onNodeMouseLeave:_,onNodeContextMenu:j,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:o,connectionLineType:V,connectionLineStyle:Y,connectionLineComponent:R,connectionLineContainerStyle:O,selectionKeyCode:J,selectionOnDrag:ce,selectionMode:oe,deleteKeyCode:K,multiSelectionKeyCode:ue,panActivationKeyCode:re,zoomActivationKeyCode:le,onlyRenderVisibleElements:Ee,selectNodesOnDrag:Be,defaultViewport:me,translateExtent:Ve,minZoom:ge,maxZoom:Te,preventScrolling:Xe,zoomOnScroll:Je,zoomOnPinch:mt,zoomOnDoubleClick:Ie,panOnScroll:We,panOnScrollSpeed:He,panOnScrollMode:Tt,panOnDrag:ft,onPaneClick:vt,onPaneMouseEnter:et,onPaneMouseMove:Ct,onPaneMouseLeave:St,onPaneScroll:ot,onPaneContextMenu:nr,onSelectionContextMenu:H,onSelectionStart:z,onSelectionEnd:W,onEdgeContextMenu:Zt,onEdgeDoubleClick:Ft,onEdgeMouseEnter:dr,onEdgeMouseMove:Sr,onEdgeMouseLeave:_r,onReconnect:fn??Vn,onReconnectStart:$r??qa,onReconnectEnd:mn??ar,reconnectRadius:In??$n,defaultMarkerColor:Qe,noDragClassName:Re,noWheelClassName:Me,noPanClassName:we,elevateEdgesOnSelect:Bt,rfId:Oa,disableKeyboardA11y:Kt,nodeOrigin:Ae,nodeExtent:Ke}),At.createElement(qht,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:je,nodesConnectable:fe,nodesFocusable:ye,edgesFocusable:se,edgesUpdatable:ne,elementsSelectable:de,elevateNodesOnSelect:_t,minZoom:ge,maxZoom:Te,nodeExtent:Ke,onNodesChange:ke,onEdgesChange:$e,snapToGrid:ve,snapGrid:X,connectionMode:Z,translateExtent:Ve,connectOnClick:Ge,defaultEdgeOptions:rt,fitView:xe,fitViewOptions:De,onNodesDelete:M,onEdgesDelete:P,onNodeDragStart:T,onNodeDrag:k,onNodeDragStop:B,onSelectionDrag:U,onSelectionDragStart:L,onSelectionDragStop:q,noPanClassName:we,nodeOrigin:Ae,rfId:Oa,autoPanOnConnect:Ut,autoPanOnNodeDrag:Jt,onError:ln,connectionRadius:jr,isValidConnection:on,nodeDragThreshold:Ci}),At.createElement(zht,{onSelectionChange:S}),fr,At.createElement(xht,{proOptions:Ze,position:Ue}),At.createElement(Jht,{rfId:Oa,disableKeyboardA11y:Kt})))});kpe.displayName="ReactFlow";function Spe(e){return t=>{const[r,n]=w.useState(t),a=w.useCallback(s=>n(o=>e(s,o)),[]);return[r,n,a]}}const aAt=Spe(Ape),sAt=Spe(f0t);function iAt(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},At.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function oAt(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},At.createElement("path",{d:"M0 0h32v4.2H0z"}))}function lAt(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},At.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function cAt(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function uAt(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const B2=({children:e,className:t,...r})=>At.createElement("button",{type:"button",className:lc(["react-flow__controls-button",t]),...r},e);B2.displayName="ControlButton";const dAt=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),_pe=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const A=ko(),[m,g]=w.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=Ds(dAt,Hl),{zoomIn:N,zoomOut:C,fitView:_}=VT();if(w.useEffect(()=>{g(!0)},[]),!m)return null;const j=()=>{N(),s==null||s()},I=()=>{C(),o==null||o()},T=()=>{_(a),l==null||l()},k=()=>{A.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return At.createElement(Mme,{className:lc(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&At.createElement(At.Fragment,null,At.createElement(B2,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},At.createElement(iAt,null)),At.createElement(B2,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},At.createElement(oAt,null))),r&&At.createElement(B2,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view"},At.createElement(lAt,null)),n&&At.createElement(B2,{className:"react-flow__controls-interactive",onClick:k,title:"toggle interactivity","aria-label":"toggle interactivity"},x?At.createElement(uAt,null):At.createElement(cAt,null)),d)};_pe.displayName="Controls";var fAt=w.memo(_pe),Sf;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Sf||(Sf={}));function hAt({color:e,dimensions:t,lineWidth:r}){return At.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function AAt({color:e,radius:t}){return At.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const mAt={[Sf.Dots]:"#91919a",[Sf.Lines]:"#eee",[Sf.Cross]:"#e2e2e2"},pAt={[Sf.Dots]:1,[Sf.Lines]:1,[Sf.Cross]:6},gAt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Tpe({id:e,variant:t=Sf.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:o,style:l,className:c}){const u=w.useRef(null),{transform:d,patternId:f}=Ds(gAt,Hl),A=o||mAt[t],m=n||pAt[t],g=t===Sf.Dots,x=t===Sf.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],N=m*d[2],C=x?[N,N]:y,_=g?[N/s,N/s]:[C[0]/s,C[1]/s];return At.createElement("svg",{className:lc(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},At.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`},g?At.createElement(AAt,{color:A,radius:N/s}):At.createElement(hAt,{dimensions:C,color:A,lineWidth:a})),At.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Tpe.displayName="Background";var xAt=w.memo(Tpe);function vAt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const bAt=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function xp(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let ub=null;function Bpe(e={}){return ub||(e.includeStyleProperties?(ub=e.includeStyleProperties,ub):(ub=xp(window.getComputedStyle(document.documentElement)),ub))}function o4(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function yAt(e){const t=o4(e,"border-left-width"),r=o4(e,"border-right-width");return e.clientWidth+t+r}function wAt(e){const t=o4(e,"border-top-width"),r=o4(e,"border-bottom-width");return e.clientHeight+t+r}function Ipe(e,t={}){const r=t.width||yAt(e),n=t.height||wAt(e);return{width:r,height:n}}function NAt(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const du=16384;function CAt(e){(e.width>du||e.height>du)&&(e.width>du&&e.height>du?e.width>e.height?(e.height*=du/e.width,e.width=du):(e.width*=du/e.height,e.height=du):e.width>du?(e.height*=du/e.width,e.width=du):(e.width*=du/e.height,e.height=du))}function l4(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function EAt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function jAt(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),EAt(a)}const Qc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Qc(r,t)};function kAt(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function SAt(e,t){return Bpe(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function _At(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?kAt(r):SAt(r,n);return document.createTextNode(`${a}{${s}}`)}function pee(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const o=bAt();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(_At(o,r,a,n)),t.appendChild(l)}function TAt(e,t,r){pee(e,t,":before",r),pee(e,t,":after",r)}const gee="application/font-woff",xee="image/jpeg",BAt={woff:gee,woff2:gee,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:xee,jpeg:xee,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function IAt(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function CH(e){const t=IAt(e).toLowerCase();return BAt[t]||""}function DAt(e){return e.split(/,/)[1]}function jL(e){return e.search(/^(data:)/)!==-1}function OAt(e,t){return`data:${t};base64,${e}`}async function Dpe(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(r({res:n,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(a)})}const MO={};function PAt(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function EH(e,t,r){const n=PAt(e,t,r.includeQueryParams);if(MO[n]!=null)return MO[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await Dpe(e,r.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),DAt(l)));a=OAt(s,t)}catch(s){a=r.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return MO[n]=a,a}async function FAt(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):l4(t)}async function RAt(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o==null||o.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return l4(l)}const r=e.poster,n=CH(r),a=await EH(r,n,t);return l4(a)}async function LAt(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await $T(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function MAt(e,t){return Qc(e,HTMLCanvasElement)?FAt(e):Qc(e,HTMLVideoElement)?RAt(e,t):Qc(e,HTMLIFrameElement)?LAt(e,t):e.cloneNode(Ope(e))}const UAt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Ope=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function HAt(e,t,r){var n,a;if(Ope(t))return t;let s=[];return UAt(e)&&e.assignedNodes?s=xp(e.assignedNodes()):Qc(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=xp(e.contentDocument.body.childNodes):s=xp(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||Qc(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>$T(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function QAt(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):Bpe(r).forEach(s=>{let o=a.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Qc(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),n.setProperty(s,o,a.getPropertyPriority(s))})}function VAt(e,t){Qc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Qc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function $At(e,t){if(Qc(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function zAt(e,t,r){return Qc(t,Element)&&(QAt(e,t,r),TAt(e,t,r),VAt(e,t),$At(e,t)),t}async function GAt(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const l=r[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!n[l]&&(n[l]=await $T(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let c=0;c<a.length;c++)l.appendChild(a[c]);e.appendChild(o)}return e}async function $T(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>MAt(n,t)).then(n=>HAt(e,n,t)).then(n=>zAt(e,n,t)).then(n=>GAt(n,t))}const Ppe=/url\((['"]?)([^'"]+?)\1\)/g,qAt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,KAt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function WAt(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function XAt(e){const t=[];return e.replace(Ppe,(r,n,a)=>(t.push(a),r)),t.filter(r=>!jL(r))}async function YAt(e,t,r,n,a){try{const s=r?vAt(t,r):t,o=CH(t);let l;return a||(l=await EH(s,o,n)),e.replace(WAt(t),`$1${l}$3`)}catch{}return e}function JAt(e,{preferredFontFormat:t}){return t?e.replace(KAt,r=>{for(;;){const[n,,a]=qAt.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Fpe(e){return e.search(Ppe)!==-1}async function Rpe(e,t,r){if(!Fpe(e))return e;const n=JAt(e,r);return XAt(n).reduce((s,o)=>s.then(l=>YAt(l,o,t,r)),Promise.resolve(n))}async function db(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Rpe(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function ZAt(e,t){await db("background",e,t)||await db("background-image",e,t),await db("mask",e,t)||await db("-webkit-mask",e,t)||await db("mask-image",e,t)||await db("-webkit-mask-image",e,t)}async function emt(e,t){const r=Qc(e,HTMLImageElement);if(!(r&&!jL(e.src))&&!(Qc(e,SVGImageElement)&&!jL(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await EH(n,CH(n),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){o(u)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function tmt(e,t){const n=xp(e.childNodes).map(a=>Lpe(a,t));await Promise.all(n).then(()=>e)}async function Lpe(e,t){Qc(e,Element)&&(await ZAt(e,t),await emt(e,t),await tmt(e,t))}function rmt(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const vee={};async function bee(e){let t=vee[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},vee[e]=t,t}async function yee(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(n,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Dpe(l,t.fetchRequestInit,({result:c})=>(r=r.replace(o,`url(${c})`),[o,c]))});return Promise.all(s).then(()=>r)}function wee(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=l.exec(n),c===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(c[0])}return t}async function nmt(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{xp(a.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const c=s.href,u=bee(c).then(d=>yee(d,t)).then(d=>wee(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?l+=1:a.cssRules.length)}catch(A){console.error("Error inserting rule from remote css",{rule:f,error:A})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];a.href!=null&&n.push(bee(a.href).then(l=>yee(l,t)).then(l=>wee(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{xp(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function amt(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Fpe(t.style.getPropertyValue("src")))}async function smt(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=xp(e.ownerDocument.styleSheets),n=await nmt(r,t);return amt(n)}function Mpe(e){return e.trim().replace(/["']/g,"")}function imt(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Mpe(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function omt(e,t){const r=await smt(e,t),n=imt(e);return(await Promise.all(r.filter(s=>n.has(Mpe(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return Rpe(s.cssText,o,t)}))).join(`
`)}async function lmt(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await omt(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function cmt(e,t={}){const{width:r,height:n}=Ipe(e,t),a=await $T(e,t,!0);return await lmt(a,t),await Lpe(a,t),rmt(a,t),await jAt(a,r,n)}async function umt(e,t={}){const{width:r,height:n}=Ipe(e,t),a=await cmt(e,t),s=await l4(a),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||NAt(),u=t.canvasWidth||r,d=t.canvasHeight||n;return o.width=u*c,o.height=d*c,t.skipAutoScale||CAt(o),o.style.width=`${u}`,o.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function zT(e,t={}){return(await umt(e,t)).toDataURL()}const Upe="recursos_crucigramas",jH="recursos_lineas_de_tiempo",kH="recursos_mapas_mentales",Hpe="recursos_sopas_de_letras",GT=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},dmt=e=>{const t=Lt(pt(dt,Upe),tr("fechaCreacion","desc"));return hr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},fmt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:wr.fromDate(new Date)};return(await dn(pt(dt,Upe),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},hmt=e=>{const t=Lt(pt(dt,jH),tr("createdAt","desc"));return hr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a las lneas de tiempo:",r),e([])})},Amt=async(e,t)=>{try{const{id:r,...n}=e,a=er(dt,jH,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:wr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la lnea de tiempo:",r),new Error("No se pudo guardar la lnea de tiempo.")}},mmt=async e=>{try{const t=er(dt,jH,e);await fa(t)}catch(t){throw console.error("Error al eliminar la lnea de tiempo:",t),new Error("No se pudo eliminar la lnea de tiempo.")}},pmt=e=>{const t=Lt(pt(dt,kH),tr("createdAt","desc"));return hr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},gmt=async(e,t)=>{try{const{id:r,...n}=e,a=er(dt,kH,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:wr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},xmt=async e=>{try{const t=er(dt,kH,e);await fa(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},vmt=e=>{const t=Lt(pt(dt,Hpe),tr("createdAt","desc"));return hr(t,r=>{const n=r.docs.map(a=>GT(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},bmt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:wr.fromDate(new Date)};return(await dn(pt(dt,Hpe),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},ymt=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),wmt=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),Nmt=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),Cmt=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Prctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return i.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[i.jsx(iy,{type:"target",position:Pr.Left,className:"w-2 h-2 !bg-slate-400"}),i.jsx("span",{className:"text-xl",children:e.icon||""}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),i.jsx(iy,{type:"source",position:Pr.Right,className:"w-2 h-2 !bg-slate-400"})]})},kL=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+kL(n,t),0),Nee=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const o=(l,c,u)=>{r.push({id:l.id,position:{x:c*280,y:u},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const d=kL(l,100);let f=u-d/2+100/2;(l.children||[]).forEach(A=>{const m=kL(A,100),g=f+m/2-100/2;n.push({id:`e-${l.id}-${A.id}`,source:l.id,target:A.id,type:"smoothstep",animated:!0}),o(A,c+1,g),f+=m})};o(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const o=300,l=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:o*Math.cos(d),y:o*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,A)=>{const m=d+(A-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},Qpe=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],o=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return i.jsxs("div",{className:`pl-4 ${a>0?"border-l "+o[a-1%o.length]:""}`,children:[i.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),i.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""}),a>0&&i.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""})]})}),(e.children||[]).map(l=>i.jsx(Qpe,{node:l,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},l.id))]})},Emt={custom:Cmt},jmt=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=w.useState(e.treeData),[s,o]=w.useState("tree"),[l,c]=w.useState(!1),[u,d,f]=aAt([]),[A,m,g]=sAt([]),{fitView:x}=VT();w.useEffect(()=>{const{nodes:j,edges:I}=Nee(n,s);d(j),m(I),setTimeout(()=>x({duration:300}),50)},[n,s,d,m,x]);const v=(j,I)=>{const T=JSON.parse(JSON.stringify(n)),k=B=>B.id===j?(B.label=I,!0):(B.children||[]).some(k);k(T),a(T)},y=j=>{const I=JSON.parse(JSON.stringify(n)),T=k=>k.id===j?(k.children||(k.children=[]),k.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(k.children||[]).some(T);T(I),a(I)},N=j=>{const I=JSON.parse(JSON.stringify(n)),T=k=>{const B=(k.children||[]).findIndex(M=>M.id===j);return B!==-1?(k.children.splice(B,1),!0):(k.children||[]).some(T)};T(I),a(I)},C=()=>{c(!0);const{nodes:j,edges:I}=Nee(n,s);r({...e,treeData:n,nodes:j,edges:I}),setTimeout(()=>c(!1),1e3)},_=async j=>{const I=document.querySelector(".react-flow");I&&zT(I,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(T=>{{const k=document.createElement("a");k.download=`${e.tema}.png`,k.href=T,k.click()}}).catch(T=>console.error("oops, something went wrong!",T))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),i.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:" Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:i.jsxs(kpe,{nodes:u,edges:A,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:Emt,children:[i.jsx(fAt,{}),i.jsx(xAt,{})]})}),i.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[i.jsxs("button",{onClick:()=>o("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(wmt,{})," Vista en rbol"]}),i.jsxs("button",{onClick:()=>o("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(Nmt,{})," Vista central"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:i.jsx(Qpe,{node:n,onUpdate:v,onAddChild:y,onDelete:N})}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>_(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),i.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},kmt=({onBack:e,currentUser:t})=>{const[r,n]=w.useState("list"),[a,s]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(!0),[A,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState("");w.useEffect(()=>{f(!0);const T=pmt(k=>{s(k),f(!1)});return()=>T()},[]);const N=async T=>{if(T.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no est configurada."),u(!1);return}},C=async T=>{try{await gmt(T,t)}catch(k){console.error("Error saving mind map:",k),alert("No se pudo guardar el mapa mental.")}},_=T=>{l(T),n("editor")},j=async T=>{if(window.confirm("Eliminar este mapa mental?"))try{await xmt(T)}catch(k){console.error("Error deleting mind map:",k),alert("No se pudo eliminar el mapa mental.")}},I=()=>{switch(r){case"editor":return o?i.jsx(NH,{children:i.jsx(jmt,{mapData:o,onBack:()=>n("list"),onSave:C})}):null;case"config":return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),i.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:A,onChange:T=>m(T.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),i.jsx("textarea",{id:"contenido",value:v,onChange:T=>y(T.target.value),rows:4,placeholder:"Aade ms detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?i.jsx(ymt,{}):"Generar Mapa con IA"})})]})]});case"list":default:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),i.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(T=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[i.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:T.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(T.createdAt).toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx("button",{onClick:()=>_(T),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),i.jsx("button",{onClick:()=>j(T.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},T.id)):i.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningn mapa mental todava."})})]})}};return d?i.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),I()]})},Smt=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),_mt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Tmt=({onBack:e,currentUser:t})=>{const[r,n]=w.useState([]),[a,s]=w.useState("Media"),[o,l]=w.useState(10),[c,u]=w.useState(!1),[d,f]=w.useState(Array(10).fill("")),[A,m]=w.useState(""),[g,x]=w.useState(null),[v,y]=w.useState({ai:!1,puzzle:!1,data:!0}),N=w.useRef(null);w.useEffect(()=>{y(P=>({...P,data:!0}));const M=vmt(P=>{n(P),y(S=>({...S,data:!1}))});return()=>M()},[]),w.useEffect(()=>{f(M=>{const P=Array(o).fill("");for(let S=0;S<Math.min(M.length,o);S++)P[S]=M[S];return P})},[o]);const C=(M,P)=>{const S=[...d];S[M]=P,f(S)},_=async()=>{if(A.trim()){y(M=>({...M,ai:!0}));try{alert("La API Key de Gemini no est configurada."),y(Y=>({...Y,ai:!1}));return}catch(M){console.error("Error generating words with AI:",M),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{y(M=>({...M,ai:!1}))}}},j=(M,P,S,L,U,q)=>{for(let H=0;H<M.length;H++){const z=S+H*U.y,W=L+H*U.x;if(z<0||z>=q||W<0||W>=q||P[z][W]&&P[z][W]!==M[H])return!1}return!0},I=(M,P,S,L,U)=>{for(let q=0;q<M.length;q++)P[S+q*U.y][L+q*U.x]=M[q]},T=async()=>{y(z=>({...z,puzzle:!0})),x(null),await new Promise(z=>setTimeout(z,100));const M=d.map(z=>z.toUpperCase().replace(/[^A-Z]/g,"")).filter(Boolean);if(M.length===0){alert("Por favor, ingrese al menos una palabra vlida."),y(z=>({...z,puzzle:!1}));return}const P=Math.max(...M.map(z=>z.length));let S=Math.max(P,M.length)+2;a==="Media"&&(S+=3),a==="Difcil"&&(S+=5),S=Math.min(Math.max(S,10),25);const L=Array(S).fill(null).map(()=>Array(S).fill(null)),U=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fcil"&&U.push({x:1,y:-1}),a==="Difcil"&&U.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const z of M.sort((W,Z)=>Z.length-W.length)){let W=!1;for(let Z=0;Z<100;Z++){const V=U[Math.floor(Math.random()*U.length)],Y=Math.floor(Math.random()*S),R=Math.floor(Math.random()*S);if(j(z,L,Y,R,V,S)){I(z,L,Y,R,V),W=!0;break}}W||console.warn(`No se pudo colocar la palabra: ${z}`)}const q=L.map(z=>z.map(W=>W||"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*27)])),H={tema:A||"Personalizado",grid:q.map(z=>z.join("")),words:M.sort()};try{const z=await bmt(H,t);x({...H,id:z,createdAt:new Date().toISOString()})}catch(z){console.error("Error saving puzzle:",z),alert("No se pudo guardar la sopa de letras.")}finally{y(z=>({...z,puzzle:!1}))}},k=()=>{N.current&&zT(N.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(M=>{const P=document.createElement("a");P.download="sopa-de-letras.png",P.href=M,P.click()}).catch(M=>{console.error("oops, something went wrong!",M),alert("No se pudo generar la imagen. Intntelo de nuevo.")})},B=()=>{var S;if(!g)return null;const M=((S=g.grid[0])==null?void 0:S.length)||1,P=g.grid.join("").split("");return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:N,className:"p-6 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${M}, minmax(0, 1fr))`},children:P.map((L,U)=>i.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:L},U))})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),i.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(L=>i.jsx("li",{children:L},L))})]})]})}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),i.jsx("button",{onClick:k,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?i.jsx("div",{className:"text-center py-10",children:"Cargando..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),!g&&i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),i.jsxs("select",{value:a,onChange:M=>s(M.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{children:"Fcil"}),i.jsx("option",{children:"Media"}),i.jsx("option",{children:"Difcil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>i.jsx("button",{onClick:()=>{l(M),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&o===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),i.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&i.jsx("input",{type:"number",value:o,onChange:M=>l(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:M=>m(M.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:_,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?i.jsx(Smt,{}):i.jsxs(i.Fragment,{children:[i.jsx(_mt,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((M,P)=>i.jsx("input",{type:"text",value:M,onChange:S=>C(P,S.target.value),placeholder:`Palabra ${P+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},P))})]}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:T,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&B()]})},Bmt=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Imt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Dmt=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=w.useState(e),[s,o]=w.useState(null),l=w.useRef(null),c=(m,g,x)=>{a(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:""},g=[...n.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));a(x=>({...x,events:g}))},d=m=>{a(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripcin para que la IA la complete.");return}o(m.id);{alert("La API Key de Gemini no est configurada."),o(null);return}},A=()=>{l.current&&zT(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),i.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:i.jsxs("div",{ref:l,className:"relative p-10",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),i.jsx("div",{className:"relative",children:n.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return i.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[i.jsx("div",{className:"w-1/2",children:x&&i.jsx("div",{className:"text-right pr-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),i.jsx("div",{className:"z-10 flex-shrink-0",children:i.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),i.jsx("div",{className:"w-1/2",children:!x&&i.jsx("div",{className:"text-left pl-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[i.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Ao/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripcin",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),i.jsx("button",{onClick:()=>f(m),disabled:s===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===m.id?i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):i.jsx(Imt,{})})]}),i.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[i.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Aadir Hito"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:A,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),i.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},Omt=({onBack:e,currentUser:t})=>{const[r,n]=w.useState("list"),[a,s]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(!0),[A,m]=w.useState(""),[g,x]=w.useState(""),[v,y]=w.useState("");w.useEffect(()=>{f(!0);const j=hmt(I=>{s(I),f(!1)});return()=>j()},[]);const N=async j=>{if(j.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}u(!0);{alert("La API Key de Gemini no est configurada."),u(!1);return}},C=async j=>{try{await Amt(j,t),n("list"),l(null)}catch(I){console.error("Error saving timeline:",I),alert("No se pudo guardar la lnea de tiempo.")}},_=async j=>{if(window.confirm("Eliminar esta lnea de tiempo?"))try{await mmt(j)}catch(I){console.error("Error deleting timeline:",I),alert("No se pudo eliminar la lnea de tiempo.")}};return r==="editor"&&o?i.jsx(Dmt,{timeline:o,onSave:C,onBack:()=>n("list")}):d?i.jsx("div",{className:"text-center py-10",children:"Cargando lneas de tiempo..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Lnea de Tiempo"}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:A,onChange:j=>m(j.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),i.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:j=>x(j.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Trmino (Opcional)"}),i.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:j=>y(j.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?i.jsx(Bmt,{}):"Generar con IA"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo Guardadas"}),a.length>0?a.map(j=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:j.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(j.createdAt).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{l(j),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),i.jsx("button",{onClick:()=>_(j.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},j.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay lneas de tiempo guardadas."})]})]})},Pmt=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Cee=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Fmt=({onBack:e,currentUser:t})=>{const[r,n]=w.useState([]),[a,s]=w.useState(10),[o,l]=w.useState(!1),[c,u]=w.useState(Array(10).fill("")),[d,f]=w.useState(Array(10).fill("")),[A,m]=w.useState(""),[g,x]=w.useState(null),[v,y]=w.useState(!1),[N,C]=w.useState({ai:!1,puzzle:!1,data:!0}),[_,j]=w.useState(null),I=w.useRef(null);w.useEffect(()=>{C(q=>({...q,data:!0}));const U=dmt(q=>{const H=q.map(z=>{const{grid_flat:W,grid_width:Z,...V}=z,Y=[];if(W&&Z>0)for(let R=0;R<W.length;R+=Z)Y.push(W.slice(R,R+Z));return{...V,grid:Y}});n(H),C(z=>({...z,data:!1}))});return()=>U()},[]),w.useEffect(()=>{const U=a;u(q=>Array.from({length:U},(H,z)=>q[z]||"")),f(q=>Array.from({length:U},(H,z)=>q[z]||""))},[a]);const T=(U,q)=>{const H=[...c];H[U]=q,u(H)},k=(U,q)=>{const H=[...d];H[U]=q,f(H)},B=async()=>{if(A.trim()){C(U=>({...U,ai:!0}));try{alert("La API Key de Gemini no est configurada."),C(oe=>({...oe,ai:!1}));return}catch(U){console.error("Error generating words/clues with AI:",U),alert("No se pudieron generar las palabras y pistas. Intntelo de nuevo.")}finally{C(U=>({...U,ai:!1}))}}},M=async U=>{const q=c[U];if(!q||!q.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}j(U);try{alert("La API Key de Gemini no est configurada."),j(null);return}catch(H){console.error("Error generating clue with AI:",H),alert("No se pudo generar la pista.")}finally{j(null)}},P=w.useCallback(()=>{try{const U=c.map((ye,Ae)=>({word:ye.toUpperCase().replace(/[^A-Z]/g,""),clue:d[Ae]})).filter(ye=>ye.word.length>0);if(U.length===0)return alert("Por favor, ingrese al menos una palabra vlida."),null;U.sort((ye,Ae)=>Ae.word.length-ye.word.length);const q=U[0].word.length,H=Math.max(q,U.length)*2;let z=Array.from({length:H},()=>Array(H).fill(null));const W=[],Z=U.shift(),V=Math.floor(H/2),Y=Math.floor((H-Z.word.length)/2);for(let ye=0;ye<Z.word.length;ye++)z[V][Y+ye]=Z.word[ye];W.push({word:Z.word,clue:Z.clue,direction:"across",row:V,col:Y});for(const ye of U){let Ae={score:-1,row:-1,col:-1,direction:"across"};for(const se of W)for(let ne=0;ne<se.word.length;ne++)for(let de=0;de<ye.word.length;de++)if(se.word[ne]===ye.word[de]){let me=0,ge,Te,Ve;se.direction==="across"?(Ve="down",ge=se.row-de,Te=se.col+ne):(Ve="across",ge=se.row+ne,Te=se.col-de);let Xe=!0;for(let Ke=0;Ke<ye.word.length;Ke++){const Qe=ge+(Ve==="down"?Ke:0),Je=Te+(Ve==="across"?Ke:0);if(Qe<0||Qe>=H||Je<0||Je>=H){Xe=!1;break}const mt=z[Qe][Je],We=Qe===se.row+(se.direction==="down"?ne:0)&&Je===se.col+(se.direction==="across"?ne:0);if(mt&&!We){Xe=!1;break}if(mt&&We&&mt!==ye.word[de]){Xe=!1;break}if(!We){if(Ve==="across"&&(Qe>0&&z[Qe-1][Je]||Qe<H-1&&z[Qe+1][Je])){Xe=!1;break}if(Ve==="down"&&(Je>0&&z[Qe][Je-1]||Je<H-1&&z[Qe][Je+1])){Xe=!1;break}}mt&&me++}Xe&&me>Ae.score&&(Ae={score:me,row:ge,col:Te,direction:Ve})}if(Ae.score>-1){for(let se=0;se<ye.word.length;se++){const ne=Ae.row+(Ae.direction==="down"?se:0),de=Ae.col+(Ae.direction==="across"?se:0);z[ne][de]=ye.word[se]}W.push({word:ye.word,clue:ye.clue,direction:Ae.direction,row:Ae.row,col:Ae.col})}}let R=H,O=-1,K=H,J=-1;W.forEach(ye=>{R=Math.min(R,ye.row),O=Math.max(O,ye.row+(ye.direction==="down"?ye.word.length-1:0)),K=Math.min(K,ye.col),J=Math.max(J,ye.col+(ye.direction==="across"?ye.word.length-1:0))}),O===-1&&(R=W[0].row,O=W[0].row,K=W[0].col,J=W[0].col+W[0].word.length-1);const ce=1,oe=Math.max(0,R-ce),re=Math.min(H,O+1+ce),ue=Math.max(0,K-ce),le=Math.min(H,J+1+ce),ve=z.slice(oe,re).map(ye=>ye.slice(ue,le)),X=W.map(ye=>({...ye,row:ye.row-oe,col:ye.col-ue})).sort((ye,Ae)=>ye.row-Ae.row||ye.col-Ae.col);let Ee=1;const Be=[],je=new Map;X.forEach(ye=>{const Ae=`${ye.row},${ye.col}`;je.has(Ae)||je.set(Ae,Ee++),Be.push({...ye,number:je.get(Ae)})});const fe=ve.map(ye=>ye.map(Ae=>({char:Ae,number:null})));return Be.forEach(ye=>{const Ae=`${ye.row},${ye.col}`;fe[ye.row]&&fe[ye.row][ye.col]!==void 0&&(fe[ye.row][ye.col].number=je.get(Ae))}),{grid:fe,clues:{across:Be.filter(ye=>ye.direction==="across").sort((ye,Ae)=>ye.number-Ae.number),down:Be.filter(ye=>ye.direction==="down").sort((ye,Ae)=>ye.number-Ae.number)}}}catch(U){return console.error("Error generating crossword grid:",U),alert("Ocurri un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),S=async()=>{var q;C(H=>({...H,puzzle:!0})),x(null),await new Promise(H=>setTimeout(H,100));const U=P();if(U){const H={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:A||"Personalizado",grid:U.grid,clues:U.clues},{grid:z,...W}=H,Z={...W,grid_flat:z.flat().map(V=>V.char||""),grid_width:((q=z[0])==null?void 0:q.length)||0};try{const V=await fmt(Z,t);x({...H,id:V,fechaCreacion:new Date().toISOString()})}catch(V){console.error("Error saving puzzle:",V),alert("No se pudo guardar el crucigrama en la base de datos.")}}C(H=>({...H,puzzle:!1}))},L=()=>{I.current&&(y(!1),setTimeout(()=>{zT(I.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(U=>{const q=document.createElement("a");q.download="crucigrama.png",q.href=U,q.click()}).catch(U=>console.error("Error generating image",U))},100))};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),g?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:I,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsx("div",{children:i.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((U,q)=>i.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:U.char?"white":"black"},children:[U.number&&i.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:U.number}),v&&U.char&&i.jsx("span",{children:U.char})]},q))})}),i.jsxs("div",{className:"text-sm",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.across.map(U=>i.jsxs("li",{children:[i.jsxs("strong",{children:[U.number,"."]})," ",U.clue]},`${U.word}-${U.clue}`))}),i.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.down.map(U=>i.jsxs("li",{children:[i.jsxs("strong",{children:[U.number,"."]})," ",U.clue]},`${U.word}-${U.clue}`))})]})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),i.jsx("span",{children:"Mostrar Solucin"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),i.jsx("button",{onClick:L,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(U=>i.jsx("button",{onClick:()=>{s(U),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!o&&a===U?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:U},U)),i.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${o?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),o&&i.jsx("input",{type:"number",value:a,onChange:U=>s(parseInt(U.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:U=>m(U.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:B,disabled:N.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:N.ai?i.jsx(Pmt,{}):i.jsxs(i.Fragment,{children:[i.jsx(Cee,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((U,q)=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx("input",{type:"text",value:c[q],onChange:H=>T(q,H.target.value),placeholder:`Palabra ${q+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[i.jsx("textarea",{value:d[q],onChange:H=>k(q,H.target.value),placeholder:`Pista ${q+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:()=>M(q),disabled:_===q,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:_===q?i.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):i.jsx(Cee,{})})]})]},q))}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:S,disabled:N.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:N.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},Rmt=[{id:"sopaDeLetras",icon:"",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"",nombre:"Lneas de Tiempo",descripcion:"Construye lneas de tiempo para comprender procesos, hechos histricos o secuencias."}],Lmt=({recurso:e,onClick:t})=>i.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[i.jsx("div",{className:"text-6xl mb-4",children:e.icon}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),Mmt=()=>{const[e,t]=w.useState("menu"),{currentUser:r}=jE(),n=()=>e!=="menu"&&!r?i.jsx("div",{className:"text-center p-8",children:"Cargando informacin de usuario..."}):e==="mapasMentales"?i.jsx(kmt,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?i.jsx(Tmt,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?i.jsx(Omt,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?i.jsx(Fmt,{onBack:()=>t("menu"),currentUser:r}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Rmt.map(a=>i.jsx(Lmt,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return i.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},Umt="evaluaciones_formativas",Hmt="calificaciones_formativas",Vpe="trabajos_grupales_formativos",$pe=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},Qmt=(e,t)=>{const r=Lt(pt(dt,Umt),ur("curso","==",e));return hr(r,n=>{t(n.docs.map(a=>$pe(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},Vmt=(e,t)=>{if(!e||e.length===0)return()=>{};const r=e.map(n=>{const a=er(dt,Hmt,n);return hr(a,s=>{s.exists()?t({[n]:s.data()}):t({[n]:{}})},s=>{(s==null?void 0:s.code)!=="permission-denied"&&console.error(`Error subscribing to grade doc ${n}:`,s)})});return()=>r.forEach(n=>n())},$mt=(e,t)=>{const r=Lt(pt(dt,Vpe),ur("curso","==",e));return hr(r,n=>{t(n.docs.map(a=>$pe(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},zmt=async e=>{try{const{id:t,...r}=e,n=er(dt,Vpe,t);await yi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},Gmt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState({}),[s,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,A]=w.useState(!1),[m,g]=w.useState(null),x=w.useRef(null);w.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const _=Qmt(e.curso,r),j=$mt(e.curso,I=>{o(I),c(!1)});return()=>{_(),j()}},[e.curso]),w.useEffect(()=>{if(t.length===0){a({});return}const _=t.map(k=>k.id);let j={};const T=Vmt(_,k=>{j={...j,...k},a(j)});return()=>{T()}},[t]);const v=w.useMemo(()=>{if(!e.curso)return[];const j=t.filter(T=>T.curso===e.curso).reduce((T,k)=>((T[k.asignatura]=T[k.asignatura]||[]).push(k),T),{});return Object.entries(j).map(([T,k])=>{let B=0,M=0;const P=k.map(L=>{var H;const U=(H=n[L.id])==null?void 0:H[e.nombreCompleto];let q="No Trabajado";return U==="trabajado"?(B+=7,M++,q="Trabajado"):U==="no trabajado"&&(B+=2,M++,q="No Trabajado"),{id:L.id,nombreActividad:L.nombreActividad,fecha:L.fecha,estado:q}}).filter(L=>{var U;return(U=n[L.id])==null?void 0:U[e.nombreCompleto]}),S=M>0?(B/M).toFixed(1):"N/A";return{asignatura:T,promedio:S,actividades:P.sort((L,U)=>new Date(U.fecha).getTime()-new Date(L.fecha).getTime())}}).filter(T=>T.actividades.length>0).sort((T,k)=>T.asignatura.localeCompare(k.asignatura))},[t,n,e]);w.useEffect(()=>{if(v.reduce((B,M)=>B+M.actividades.length,0)===0){d(null);return}const j=v.reduce((B,M)=>{const P=parseFloat(M.promedio);return isNaN(P)?B:B+P},0),I=v.length>0?j/v.length:0,T=tk.find(B=>I>=B.promedioMin&&I<=B.promedioMax)||null,k=tk.filter(B=>I>=B.promedioMin);if(d({puntajeTotal:0,promedio:I,rangoActual:T,insigniasGanadas:k}),x.current!==null){const B=tk.find(M=>x.current>=M.promedioMin&&x.current<=M.promedioMax)||null;T&&(!B||T.nombre!==B.nombre)&&g(T)}x.current=I},[v]);const y=w.useMemo(()=>e.curso?s.filter(_=>_.curso===e.curso).map(_=>{const j=_.grupos.find(I=>I.integrantes.some(T=>T.nombre===e.nombreCompleto));return j?{..._,miGrupo:j}:null}).filter(_=>_!==null).sort((_,j)=>new Date(j.fechaPresentacion).getTime()-new Date(_.fechaPresentacion).getTime()):[],[s,e]),N=async(_,j)=>{const I=s.find(k=>k.id===_);if(!I)return;const T={...I,grupos:I.grupos.map(k=>k.integrantes.some(M=>M.nombre===e.nombreCompleto)?{...k,integrantes:k.integrantes.map(M=>M.nombre===e.nombreCompleto?{...M,rol:j||void 0}:M)}:k)};try{await zmt(T)}catch(k){console.error("Error updating role:",k),alert("No se pudo actualizar el rol.")}},C=_=>{const j=parseFloat(_);return isNaN(j)?"bg-slate-400":j<4?"bg-red-500":j<5.5?"bg-yellow-500":"bg-green-500"};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:_=>_.stopPropagation(),children:[i.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Subiste de Rango!"}),i.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),i.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),i.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"Genial!"})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>A(!1),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:_=>_.stopPropagation(),children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),i.jsx("div",{className:"overflow-y-auto space-y-3",children:tk.map(_=>{const j=u==null?void 0:u.insigniasGanadas.some(I=>I.nombre===_.nombre);return i.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${j?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[i.jsx("div",{className:"text-5xl",children:_.emoji}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${j?"text-amber-700":"text-slate-600"}`,children:_.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",_.promedioMin," y ",_.promedioMax]})]})]},_.nombre)})})]})}),i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Aqu puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&i.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),i.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),i.jsx("button",{onClick:()=>A(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),i.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),i.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(_=>i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:_.asignatura}),i.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${C(_.promedio)}`,children:_.promedio})]}),i.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),_.actividades.map(j=>i.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-700",children:j.nombreActividad}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(j.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),i.jsx("span",{className:`font-semibold ${j.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:j.estado==="Trabajado"?" Trabajado":" No Trabajado"})]},j.id))]})]},_.asignatura))}):i.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"An sin registros"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Todava no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),i.jsx("div",{className:"space-y-4",children:y.map(_=>{const j=_.miGrupo.integrantes.filter(T=>T.nombre!==e.nombreCompleto&&T.rol).map(T=>T.rol),I=Coe.filter(T=>!j.includes(T));return i.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-bold text-slate-800",children:_.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:[_.asignatura," - Presentacin: ",new Date(_.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-3 pt-3 border-t",children:[i.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",_.miGrupo.numero]}),i.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:_.miGrupo.integrantes.map(T=>i.jsxs("li",{className:"grid grid-cols-2 items-center",children:[i.jsx("span",{className:T.nombre===e.nombreCompleto?"font-bold":"",children:T.nombre}),T.nombre===e.nombreCompleto?i.jsxs("select",{value:T.rol||"",onChange:k=>N(_.id,k.target.value),className:"text-sm p-1 border rounded w-full",children:[i.jsx("option",{value:"",children:"-- Seleccionar rol --"}),T.rol&&!I.includes(T.rol)&&i.jsx("option",{value:T.rol,children:T.rol}),I.map(k=>i.jsx("option",{value:k,children:k},k))]}):i.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:T.rol||"Sin rol"})]},T.nombre))})]})]},_.id)})})]})]})},qmt="proyectos_interdisciplinarios",zpe="entregas_interdisciplinarias",Gpe=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},Kmt=(e,t)=>{const r=Lt(pt(dt,qmt),ur("cursos","array-contains",e));return hr(r,n=>{const a=n.docs.map(s=>Gpe(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},Wmt=(e,t)=>{const r=Lt(pt(dt,zpe),ur("estudianteId","==",e));return hr(r,n=>{const a=n.docs.map(s=>Gpe(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},Xmt=async e=>{try{const{id:t,...r}=e,n=er(dt,zpe,t),a={...r,fechaCompletado:wr.fromDate(new Date(r.fechaCompletado||Date.now()))};await yi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Ymt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState([]),[s,o]=w.useState(null),[l,c]=w.useState(!0);w.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=Kmt(e.curso,r),A=Wmt(e.id,m=>{a(m),c(!1)});return()=>{f(),A()}},[e.curso,e.id]);const u=async f=>{try{await Xmt(f)}catch(A){console.error("Failed to update submission:",A),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:A})=>{const m=w.useMemo(()=>{const j=n.find(I=>I.planificacionId===f.id&&I.tareaId===A.id);return j||{id:`${f.id}_${A.id}_${e.id}`,planificacionId:f.id,tareaId:A.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,A.id,n]),[g,x]=w.useState(!1),[v,y]=w.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),N=j=>{var T;const I=(T=j.target.files)==null?void 0:T[0];I&&(alert(`Simulacin: Archivo "${I.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:I.name,url:`simulated/path/${I.name}`},fechaCompletado:new Date().toISOString()}))},C=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},_=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:m.completada,onChange:_,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",A.numero,": ",A.instrucciones]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",A.fechaEntrega]}),A.recursoUrl&&i.jsx("a",{href:A.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),i.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[i.jsx("textarea",{value:v.observaciones,onChange:j=>y({...v,observaciones:j.target.value}),onBlur:C,placeholder:"Aadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"url",value:v.enlace,onChange:j=>y({...v,enlace:j.target.value}),onBlur:C,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"file",onChange:N,className:"text-sm"}),m.archivoAdjunto&&i.jsxs("p",{className:"text-xs text-green-600",children:[" Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentacin del profesor:"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const A=f.tareas||[],g=n.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=A.length>0?g/A.length*100:0;return i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[i.jsxs("button",{onClick:()=>o(s===f.id?null:f.id),className:"w-full text-left",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[i.jsx("span",{children:"Progreso"}),i.jsxs("span",{children:[Math.round(x),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&i.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:A.length>0?A.map(v=>i.jsx(d,{plan:f,tarea:v},v.id)):i.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto an no tiene tareas asignadas."})})]},f.id)}):i.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Todo al da!"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},Jmt=({ciclos:e})=>{var _,j,I,T,k;const[t,r]=w.useState(!1),[n,a]=w.useState(null),[s,o]=w.useState(null),[l,c]=w.useState(null),u=B=>{if(!B)return null;try{let M=B.trim();const P=M.match(/```json([\s\S]*?)```/i)||M.match(/```([\s\S]*?)```/i);P&&P[1]&&(M=P[1]);const S=M.indexOf("{"),L=M.lastIndexOf("}");return S!==-1&&L!==-1&&L>S&&(M=M.slice(S,L+1)),JSON.parse(M)}catch{return null}},d=e.length,f=e.filter(B=>B.videoObservacionUrl&&B.retroalimentacion.exito).length,A=new Set(e.map(B=>B.docenteInfo)).size,m=e.reduce((B,M)=>{if(!M.horaInicio||!M.horaTermino)return B;const P=new Date(`2000/01/01 ${M.horaInicio}`),L=(new Date(`2000/01/01 ${M.horaTermino}`).getTime()-P.getTime())/(1e3*60);return B+L},0)/e.length,g=e.reduce((B,M)=>{const P=new Date(M.fecha).toLocaleDateString("es-ES",{month:"long"});return B[P]=(B[P]||0)+1,B},{}),x=e.reduce((B,M)=>(M.asignaturaInfo&&(B[M.asignaturaInfo]=(B[M.asignaturaInfo]||0)+1),B),{}),v=Object.entries(x).sort(([,B],[,M])=>M-B).slice(0,5),y=w.useMemo(()=>e.map(B=>{var M,P,S;return{fecha:B.fecha,docente:B.docenteInfo,asignatura:B.asignaturaInfo,foco:(M=B.retroalimentacion)==null?void 0:M.foco,exito:(P=B.retroalimentacion)==null?void 0:P.exito,brecha:(S=B.retroalimentacion)==null?void 0:S.brecha}}).filter(B=>B.foco||B.brecha||B.exito),[e]),N=()=>{const B=Object.entries(g).map(([L,U])=>`${L}: ${U}`).join(", "),M=v.map(([L,U])=>`${L} (${U})`).join(", "),P=d?Math.round(f/d*100):0,S=y.slice(0,12).map(L=>`- ${new Date(L.fecha).toLocaleDateString()} | Docente: ${L.docente} | Asig.: ${L.asignatura}
         Exitos: ${L.exito||"-"}
         Foco: ${L.foco||"-"}
         Brecha: ${L.brecha?`min ${L.brecha.minutoInicial||"?"}-${L.brecha.minutoFinal||"?"} | preguntas: ${L.brecha.preguntas||"-"} | indicadores: ${L.brecha.indicadores||"-"}`:"-"}`).join(`
`);return`Eres un asesor pedaggico experto en OPR. Analiza los siguientes datos agregados de ciclos de observacin y retroalimentacin y devuelve un JSON con insights accionables para Subdireccin.

DATOS RESUMEN:
- Total de ciclos: ${d}
- Ciclos completados: ${f} (tasa: ${P}%)
- Docentes nicos observados: ${A}
- Tiempo promedio de observacin (min): ${isFinite(m)?Math.round(m):0}
- Distribucin por mes: ${B||"sin datos"}
- Asignaturas ms observadas (top 5): ${M||"sin datos"}

MUESTRAS DE FOCO/XITO/BRECHAS (mx. 12):
${S||"(no hay muestras)"}

DEVUELVE SOLO JSON (sin comentarios) con este esquema:
{
  "resumenGeneral": "string",
  "tendencias": ["string"],
  "riesgos": ["string"],
  "focosRecomendados": [
    { "foco": "string", "justificativo": "string opcional" }
  ],
  "proximosPasos": ["string"],
  "indicadores": [ { "nombre": "string", "valor": "string|number" } ]
}
`},C=async()=>{if(d){r(!0),a(null),c(null),o(null);try{const B=N(),M=await U7(B,1,!0,"OPR"),P=u(M);P?c(P):o(M)}catch(B){a((B==null?void 0:B.message)||"No se pudo obtener el anlisis con IA.")}finally{r(!1)}}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Dl,{className:"w-5 h-5 text-indigo-600"}),"Asistente IA del Ciclo OPR"]}),i.jsx("button",{onClick:C,disabled:t||d===0,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium border ${t||d===0?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700"} border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200`,title:d===0?"No hay ciclos para analizar":"Generar anlisis con IA",children:t?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"}),"Generando..."]}):i.jsx(i.Fragment,{children:"Generar anlisis"})})]}),n&&i.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:n}),!n&&(l||s)&&i.jsx("div",{className:"mt-2 grid grid-cols-1 lg:grid-cols-2 gap-4",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-3",children:[l.resumenGeneral&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Resumen"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:l.resumenGeneral})]}),(_=l.tendencias)!=null&&_.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Tendencias"}),i.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.tendencias.map((B,M)=>i.jsx("li",{children:B},M))})]}):null,(j=l.riesgos)!=null&&j.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Riesgos"}),i.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.riesgos.map((B,M)=>i.jsx("li",{children:B},M))})]}):null]}),i.jsxs("div",{className:"space-y-3",children:[(I=l.focosRecomendados)!=null&&I.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Focos recomendados"}),i.jsx("ul",{className:"space-y-2",children:l.focosRecomendados.map((B,M)=>i.jsxs("li",{className:"text-sm text-slate-700 dark:text-slate-300",children:[i.jsx("span",{className:"font-medium",children:B.foco}),B.justificativo?i.jsx("span",{className:"block text-slate-600 dark:text-slate-400",children:B.justificativo}):null]},M))})]}):null,(T=l.proximosPasos)!=null&&T.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Prximos pasos"}),i.jsx("ol",{className:"list-decimal pl-5 text-sm text-slate-700 dark:text-slate-300",children:l.proximosPasos.map((B,M)=>i.jsx("li",{children:B},M))})]}):null,(k=l.indicadores)!=null&&k.length?i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.indicadores.map((B,M)=>i.jsxs("div",{className:"px-3 py-2 rounded border dark:border-slate-700 text-sm",children:[i.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:B.nombre}),i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-100",children:String(B.valor)})]},M))})]}):null]})]}):i.jsx("div",{className:"col-span-2 text-sm text-slate-700 dark:text-slate-300",children:i.jsx(SE,{content:s,context:"dashboard-opr-ai"})})}),!n&&!l&&!s&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Genera un anlisis para obtener tendencias, focos y prximos pasos basados en los ciclos registrados."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:i.jsx(Dl,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(va,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Ciclos Completados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:f})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:i.jsx(Ys,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(Dc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Tiempo Promedio"}),i.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[Math.round(m)," min"]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Yo,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),i.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([B,M])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:B}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:M})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${M/d*100}%`}})})]})},B))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(wu,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Ms Observadas"]}),i.jsx("div",{className:"space-y-2",children:v.map(([B,M])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:B}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:M})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${M/Math.max(...Object.values(x))*100}%`}})})]})},B))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5 text-blue-600"}),"Estado de los Ciclos"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),i.jsx("tbody",{children:e.map(B=>i.jsxs("tr",{className:"border-t dark:border-slate-700",children:[i.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:B.docenteInfo}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(B.fecha).toLocaleDateString()}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:B.asignaturaInfo}),i.jsx("td",{className:"py-2 px-3",children:B.videoObservacionUrl&&B.retroalimentacion.exito?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[i.jsx(va,{className:"w-3 h-3"})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[i.jsx(Uc,{className:"w-3 h-3"})," Pendiente"]})})]},B.id))})]})})]})]})},Zmt=({acompanamientoId:e,onEdit:t,readOnly:r=!1,allowDelete:n=!0})=>{const[a,s]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null);w.useEffect(()=>{l(!0),u(null);let m=null;try{m=Sct(e,g=>{s(g),l(!1)},async g=>{console.warn("Suscripcin ciclos fall, usando fetch una vez.",g);try{const x=await uL(e);s(x)}catch(x){u((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})}catch(g){console.warn("Fallo suscripcin, hago fetch nico.",g),(async()=>{try{const x=await uL(e);s(x)}catch(x){u((x==null?void 0:x.message)||"No se pudieron cargar los ciclos OPR.")}finally{l(!1)}})()}return()=>{try{m&&m()}catch{}}},[e]);const d=async m=>{if(confirm("Eliminar este ciclo OPR? Esta accin no se puede deshacer."))try{await dL(m)}catch{alert("No se pudo eliminar el ciclo.")}},[f,A]=w.useState(!1);return o?i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-amber-600"})," Cargando ciclos OPR..."]}):c?i.jsx("div",{className:"p-3 border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/20 rounded",children:i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:c})}):a.length?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Ciclos OPR"}),i.jsx("button",{onClick:()=>A(!f),className:"px-4 py-2 text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 rounded-lg shadow-sm transition-colors",children:f?"Ver Lista":"Ver Dashboard"})]}),f?i.jsx("div",{children:i.jsx(Jmt,{ciclos:a})}):i.jsx("div",{className:"space-y-3",children:a.map(m=>{var g;return i.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm",children:i.jsxs("div",{className:"flex justify-between items-start gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qM,{className:"w-4 h-4 text-purple-600"}),i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:m.nombreCiclo||"Ciclo"}),i.jsxs("span",{className:"text-sm text-slate-500",children:[" ",new Date(m.fecha).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-600 dark:text-slate-300",children:[m.videoObservacionUrl&&i.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.videoObservacionUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video de observacin",children:[i.jsx(moe,{className:"w-4 h-4"})," Video observacin"]}),((g=m.retroalimentacion)==null?void 0:g.videoModeloUrl)&&i.jsxs("a",{className:"flex items-center gap-1 hover:underline text-blue-600 dark:text-blue-400",href:m.retroalimentacion.videoModeloUrl,target:"_blank",rel:"noopener noreferrer",title:"Ver video modelo",children:[i.jsx(Px,{className:"w-4 h-4"})," Video modelo"]}),m.horaInicio&&m.horaTermino&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Dc,{className:"w-4 h-4"})," ",m.horaInicio,"",m.horaTermino]})]})]}),!r&&i.jsxs("div",{className:"flex items-center gap-2",children:[t&&i.jsx("button",{onClick:()=>t(m),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Editar"}),n&&i.jsx("button",{onClick:()=>d(m.id),title:"Eliminar ciclo",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Qn,{className:"w-4 h-4"})})]})]})},m.id)})})]}):i.jsx("div",{className:"p-6 text-center bg-slate-100 dark:bg-slate-800 rounded",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"No hay ciclos OPR registrados para este acompaamiento."})})},oi=({label:e,value:t})=>t?i.jsxs("div",{className:"flex gap-2 text-sm",children:[i.jsx("div",{className:"text-slate-500 dark:text-slate-400 min-w-28",children:e}),i.jsx("div",{className:"text-slate-800 dark:text-slate-200 flex-1",children:t})]}):null,ept=({ciclo:e,onClose:t})=>{const{nombreCiclo:r,fecha:n,horaInicio:a,horaTermino:s,videoObservacionUrl:o,detallesObservacion:l=[],retroalimentacion:c,planificacion:u,seguimiento:d}=e,f=e.docenteInfo||e.docente||"",A=e.cursoInfo||"",m=e.asignaturaInfo||"";return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:t,children:i.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-slate-800 rounded-xl shadow-2xl overflow-hidden animate-fade-in-up",onClick:g=>g.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qM,{className:"w-5 h-5 text-purple-600"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:r||"Ciclo OPR"})]}),i.jsx("button",{onClick:t,className:"p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700",title:"Cerrar",children:i.jsx(No,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"px-5 py-4 space-y-6 max-h-[80vh] overflow-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(oi,{label:"Fecha",value:new Date(n).toLocaleDateString("es-CL")}),i.jsx(oi,{label:"Hora",value:a||s?`${a||""}${a&&s?"  ":""}${s||""}`:void 0}),i.jsx(oi,{label:"Docente",value:i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(q3e,{className:"w-4 h-4 text-sky-600"}),f]})}),i.jsx(oi,{label:"Curso / Asignatura",value:i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(ys,{className:"w-4 h-4 text-amber-600"}),[A,m].filter(Boolean).join("  ")]})}),o&&i.jsx(oi,{label:"Video",value:i.jsxs("a",{className:"inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline",href:o,target:"_blank",rel:"noopener noreferrer",children:[i.jsx(moe,{className:"w-4 h-4"})," Ver video de observacin"]})})]}),l!=null&&l.length?i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2",children:[i.jsx(Dc,{className:"w-4 h-4 text-blue-600"})," Registro detallado de observacin"]}),i.jsx("div",{className:"overflow-x-auto border rounded-md dark:border-slate-700",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2",children:"Minuto"}),i.jsx("th",{className:"text-left p-2",children:"Acciones Docente"}),i.jsx("th",{className:"text-left p-2",children:"Acciones Estudiantes"}),i.jsx("th",{className:"text-left p-2",children:"Actividades"})]})}),i.jsx("tbody",{children:l.map(g=>i.jsxs("tr",{className:"border-t dark:border-slate-700 align-top",children:[i.jsx("td",{className:"p-2 whitespace-nowrap",children:g.minuto}),i.jsx("td",{className:"p-2",children:g.accionesDocente||""}),i.jsx("td",{className:"p-2",children:g.accionesEstudiantes||""}),i.jsx("td",{className:"p-2",children:g.actividades||""})]},g.id))})]})})]}):null,c&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2",children:[i.jsx(Px,{className:"w-4 h-4 text-green-600"})," Retroalimentacin"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(oi,{label:"xito",value:c.exito}),i.jsx(oi,{label:"Foco",value:c.foco}),i.jsx(oi,{label:"Modelo",value:c.modelo}),i.jsx(oi,{label:"Elementos a identificar",value:c.elementosIdentificar})]}),c.brecha&&i.jsxs("div",{className:"mt-3 p-3 rounded border dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("div",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Anlisis de brecha"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[i.jsx(oi,{label:"Minuto inicial",value:c.brecha.minutoInicial}),i.jsx(oi,{label:"Minuto final",value:c.brecha.minutoFinal}),i.jsx(oi,{label:"Indicadores",value:c.brecha.indicadores})]}),i.jsx("div",{className:"mt-2 text-sm",children:i.jsx(oi,{label:"Preguntas",value:c.brecha.preguntas})})]})]}),u&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Planificacin de prctica"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(oi,{label:"Preparacin",value:u.preparacion}),i.jsx(oi,{label:"Objetivo",value:u.objetivo}),i.jsx(oi,{label:"Actividad",value:u.actividad}),i.jsx(oi,{label:"Tiempo",value:u.tiempo})]})]}),d&&(d.fecha||d.curso||d.profesor||d.firma)&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsx(oi,{label:"Fecha",value:d.fecha}),i.jsx(oi,{label:"Curso",value:d.curso}),i.jsx(oi,{label:"Profesor",value:d.profesor}),i.jsx(oi,{label:"Firma",value:d.firma})]})]})]}),i.jsx("div",{className:"px-5 py-3 bg-slate-50 dark:bg-slate-700/50 border-t dark:border-slate-700 flex justify-end",children:i.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cerrar"})})]})})},tpt=({data:e})=>i.jsx("div",{className:"space-y-4",children:e.map((r,n)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),i.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),rpt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(!1),[s,o]=w.useState(null),[l,c]=w.useState(null),[u,d]=w.useState(Y2),[f,A]=w.useState([]),[m,g]=w.useState(null),x=w.useCallback(async()=>{a(!0);try{let C;if(e.email)try{C=await Tct(e.email.toLowerCase())}catch{C=await PZ(e.nombreCompleto)}else C=await PZ(e.nombreCompleto);const _=C.sort((j,I)=>{const T=j.fecha?new Date(j.fecha).getTime():0;return(I.fecha?new Date(I.fecha).getTime():0)-T});r(_),o(null)}catch(C){console.error("Error al cargar acompaamientos desde Firestore",C),o("No se pudieron cargar tus acompaamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),v=w.useCallback(async()=>{try{const C=await Bct(e.nombreCompleto);C&&d(C)}catch(C){console.error("Error al cargar rbrica personalizada",C)}},[e.nombreCompleto]);w.useEffect(()=>{x(),v()},[x,v]),w.useEffect(()=>{(async()=>{try{const _=await Ame(),j=(e.email||"").toLowerCase(),I=e.nombreCompleto,T=_.filter(k=>k.docenteEmailLower===j||k.docenteInfo===I||k.docente===I);T.sort((k,B)=>k.fecha<B.fecha?1:k.fecha>B.fecha?-1:0),A(T)}catch(_){console.warn("No se pudieron cargar Ciclos OPR independientes.",_),A([])}})()},[e.email,e.nombreCompleto]);const y=w.useMemo(()=>{if(!l)return[];const C={};return u.forEach(_=>{C[_.domain]={total:0,count:0},_.criteria.forEach(j=>{const I=l.rubricaResultados[j.name];I&&(C[_.domain].total+=I,C[_.domain].count++)})}),Object.entries(C).map(([_,j])=>({label:_,value:j.count>0?j.total/j.count:0}))},[l,u]),N=C=>{const _=new Tr;_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),_.setFont("helvetica","bold"),_.setFontSize(16),_.setTextColor(40),_.text("Informe de Acompaamiento Docente",_.internal.pageSize.getWidth()/2,25,{align:"center"}),_.setFontSize(12),_.setFont("helvetica","normal"),Li(_,{startY:35,body:[["Docente:",C.docente],["Fecha:",new Date(C.fecha).toLocaleDateString("es-CL")],["Asignatura:",C.asignatura],["Curso:",C.curso],["Bloques:",C.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let j=_.lastAutoTable.finalY+15;if(Object.keys(C.rubricaResultados).length>0){const k=[],B=["Dbil","Incipiente","Satisfactorio","Avanzado"];u.forEach(M=>{k.push([{content:M.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),M.criteria.forEach(P=>{const S=C.rubricaResultados[P.name],L=S?B[S-1]:"No evaluado";k.push([P.name,L])})}),Li(_,{startY:j,head:[["Indicador","Nivel de Logro"]],body:k,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),j=_.lastAutoTable.finalY+15}const I=(k,B)=>{if(!B)return;j>250&&(_.addPage(),j=20,_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),j=25),_.setFont("helvetica","bold"),_.setFontSize(14),_.setTextColor(40),_.text(k,14,j),j+=8,_.setFont("helvetica","normal"),_.setFontSize(11),_.setTextColor(60);const M=_.splitTextToSize(B.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);_.text(M,14,j),j+=M.length*5+10};I("Observaciones Generales",C.observacionesGenerales),I("Retroalimentacin Consolidada",C.retroalimentacionConsolidada);const T=_.getNumberOfPages();for(let k=1;k<=T;k++)_.setPage(k),_.setFontSize(8),_.setTextColor(128),_.text(`Pgina ${k} de ${T}`,_.internal.pageSize.getWidth()/2,_.internal.pageSize.getHeight()-10,{align:"center"});_.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(C.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a mi historial"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompaamiento"}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),i.jsxs("button",{onClick:()=>N(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[i.jsx(Noe,{})," Exportar PDF"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsx("h3",{children:"Retroalimentacin Consolidada (IA)"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentacin."})}),i.jsx("h3",{children:"Observaciones Generales"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeo por Dominio"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx(tpt,{data:y})})]})]}),l.id&&i.jsxs("div",{className:"mt-10",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Mis Ciclos OPR"}),i.jsx("div",{className:"border rounded-lg dark:border-slate-700 p-4 bg-white dark:bg-slate-800",children:i.jsx(Zmt,{acompanamientoId:l.id,readOnly:!0,allowDelete:!1})})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompaamientos"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aqu encontrars el historial de tus observaciones de clase y la retroalimentacin asociada."}),n&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompaamientos desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompaamientos registrados en la nube."}),i.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(C=>i.jsx("button",{onClick:()=>c(C),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[C.curso," - ",C.asignatura]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(C.fecha).toLocaleDateString("es-CL"),C.bloques&&` | Bloques: ${C.bloques}`]}),Object.keys(C.rubricaResultados).length>0&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(C.rubricaResultados).length," criterios"]})]}),i.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},C.id)):!n&&i.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"An no tienes acompaamientos de clase registrados."})]})}),i.jsxs("div",{className:"mt-10",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Ciclos OPR Independientes"}),f.length===0?i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded border dark:border-slate-700 text-slate-600 dark:text-slate-300",children:"No tienes ciclos OPR independientes registrados."}):i.jsx("div",{className:"space-y-3",children:f.map(C=>i.jsx("button",{onClick:()=>g(C),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:i.jsx("div",{className:"flex justify-between items-start gap-3",children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.nombreCiclo||"Ciclo"}),i.jsxs("span",{className:"text-sm text-slate-500",children:[" ",new Date(C.fecha).toLocaleDateString("es-CL")]})]}),C.cursoInfo&&C.asignaturaInfo&&i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[C.cursoInfo,"  ",C.asignaturaInfo]})]})})},C.id))})]}),m&&i.jsx(ept,{ciclo:m,onClose:()=>g(null)})]})},npt=e=>{console.log(" Iniciando suscripcin a todas las planificaciones...");try{const t=pt(xr,"planificaciones"),r=Lt(t,tr("fechaCreacion","desc"));return hr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log(" Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error(" Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a todas las planificaciones:",t),t}},apt=(e,t)=>{if(console.log(" Iniciando suscripcin a planificaciones del usuario:",e),!e)throw console.error(" userId no proporcionado"),new Error("userId es requerido");try{const r=pt(xr,"planificaciones"),n=Lt(r,ur("userId","==",e),tr("fechaCreacion","desc"));return hr(n,s=>{const o=[];s.forEach(l=>{const c=l.data();o.push({id:l.id,...c})}),console.log(" Planificaciones del usuario cargadas:",o.length),t(o)},s=>{throw console.error(" Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error(" Error al configurar suscripcin a planificaciones del usuario:",r),r}};function spt(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const ipt=spt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var opt={value:function(){}};function qpe(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new qS(r)}function qS(e){this._=e}function lpt(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}qS.prototype=qpe.prototype={constructor:qS,on:function(e,t){var r=this._,n=lpt(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=cpt(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=Eee(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Eee(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new qS(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function cpt(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function Eee(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=opt,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const upt=Object.freeze(Object.defineProperty({__proto__:null,dispatch:qpe},Symbol.toStringTag,{value:"Module"})),dpt=W1e(upt);var UO,jee;function fpt(){if(jee)return UO;jee=1;const e=dpt.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},n=64,a=2048;UO=function(){var _=[256,256],j=s,I=o,T=c,k=l,B=l,M=u,P=d,S=x,L=[],U=1/0,q=e("word","end"),H=null,z=Math.random,W={},Z=N;W.canvas=function(R){return arguments.length?(Z=C(R),W):Z},W.start=function(){var R=V(Z()),O=y((_[0]>>5)*_[1]),K=null,J=L.length,ce=-1,oe=[],re=L.map(function(le,ve){return le.text=j.call(this,le,ve),le.font=I.call(this,le,ve),le.style=k.call(this,le,ve),le.weight=B.call(this,le,ve),le.rotate=M.call(this,le,ve),le.size=~~T.call(this,le,ve),le.padding=P.call(this,le,ve),le}).sort(function(le,ve){return ve.size-le.size});return H&&clearInterval(H),H=setInterval(ue,0),ue(),W;function ue(){for(var le=Date.now();Date.now()-le<U&&++ce<J&&H;){var ve=re[ce];ve.x=_[0]*(z()+.5)>>1,ve.y=_[1]*(z()+.5)>>1,f(R,ve,re,ce),ve.hasText&&Y(O,ve,K)&&(oe.push(ve),q.call("word",W,ve),K?m(K,ve):K=[{x:ve.x+ve.x0,y:ve.y+ve.y0},{x:ve.x+ve.x1,y:ve.y+ve.y1}],ve.x-=_[0]>>1,ve.y-=_[1]>>1)}ce>=J&&(W.stop(),q.call("end",W,oe,K))}},W.stop=function(){H&&(clearInterval(H),H=null);for(const R of L)delete R.sprite;return W};function V(R){const O=R.getContext("2d",{willReadFrequently:!0});R.width=R.height=1;const K=Math.sqrt(O.getImageData(0,0,1,1).data.length>>2);return R.width=(n<<5)/K,R.height=a/K,O.fillStyle=O.strokeStyle="red",{context:O,ratio:K}}function Y(R,O,K){_[0],_[1];for(var J=O.x,ce=O.y,oe=Math.sqrt(_[0]*_[0]+_[1]*_[1]),re=S(_),ue=z()<.5?1:-1,le=-ue,ve,X,Ee;(ve=re(le+=ue))&&(X=~~ve[0],Ee=~~ve[1],!(Math.min(Math.abs(X),Math.abs(Ee))>=oe));)if(O.x=J+X,O.y=ce+Ee,!(O.x+O.x0<0||O.y+O.y0<0||O.x+O.x1>_[0]||O.y+O.y1>_[1])&&(!K||g(O,K))&&!A(O,R,_[0])){for(var Be=O.sprite,je=O.width>>5,fe=_[0]>>5,ye=O.x-(je<<4),Ae=ye&127,se=32-Ae,ne=O.y1-O.y0,de=(O.y+O.y0)*fe+(ye>>5),me,ge=0;ge<ne;ge++){me=0;for(var Te=0;Te<=je;Te++)R[de+Te]|=me<<se|(Te<je?(me=Be[ge*je+Te])>>>Ae:0);de+=fe}return!0}return!1}return W.timeInterval=function(R){return arguments.length?(U=R??1/0,W):U},W.words=function(R){return arguments.length?(L=R,W):L},W.size=function(R){return arguments.length?(_=[+R[0],+R[1]],W):_},W.font=function(R){return arguments.length?(I=C(R),W):I},W.fontStyle=function(R){return arguments.length?(k=C(R),W):k},W.fontWeight=function(R){return arguments.length?(B=C(R),W):B},W.rotate=function(R){return arguments.length?(M=C(R),W):M},W.text=function(R){return arguments.length?(j=C(R),W):j},W.spiral=function(R){return arguments.length?(S=r[R]||R,W):S},W.fontSize=function(R){return arguments.length?(T=C(R),W):T},W.padding=function(R){return arguments.length?(P=C(R),W):P},W.random=function(R){return arguments.length?(z=R,W):z},W.on=function(){var R=q.on.apply(q,arguments);return R===q?W:R},W};function s(_){return _.text}function o(){return"serif"}function l(){return"normal"}function c(_){return Math.sqrt(_.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(_,j,I,T){if(!j.sprite){var k=_.context,B=_.ratio;k.clearRect(0,0,(n<<5)/B,a/B);var M=0,P=0,S=0,L=I.length;for(--T;++T<L;){j=I[T],k.save(),k.font=j.style+" "+j.weight+" "+~~((j.size+1)/B)+"px "+j.font;const ve=k.measureText(j.text),X=-Math.floor(ve.width/2);let Ee=(ve.width+1)*B,Be=j.size<<1;if(j.rotate){var U=Math.sin(j.rotate*t),q=Math.cos(j.rotate*t),H=Ee*q,z=Ee*U,W=Be*q,Z=Be*U;Ee=Math.max(Math.abs(H+Z),Math.abs(H-Z))+31>>5<<5,Be=~~Math.max(Math.abs(z+W),Math.abs(z-W))}else Ee=Ee+31>>5<<5;if(Be>S&&(S=Be),M+Ee>=n<<5&&(M=0,P+=S,S=0),P+Be>=a)break;k.translate((M+(Ee>>1))/B,(P+(Be>>1))/B),j.rotate&&k.rotate(j.rotate*t),k.fillText(j.text,X,0),j.padding&&(k.lineWidth=2*j.padding,k.strokeText(j.text,X,0)),k.restore(),j.width=Ee,j.height=Be,j.xoff=M,j.yoff=P,j.x1=Ee>>1,j.y1=Be>>1,j.x0=-j.x1,j.y0=-j.y1,j.hasText=!0,M+=Ee}for(var V=k.getImageData(0,0,(n<<5)/B,a/B).data,Y=[];--T>=0;)if(j=I[T],!!j.hasText){for(var R=j.width,O=R>>5,K=j.y1-j.y0,J=0;J<K*O;J++)Y[J]=0;if(M=j.xoff,M==null)return;P=j.yoff;for(var ce=0,oe=-1,re=0;re<K;re++){for(var J=0;J<R;J++){var ue=O*re+(J>>5),le=V[(P+re)*(n<<5)+(M+J)<<2]?1<<31-J%32:0;Y[ue]|=le,ce|=le}ce?oe=re:(j.y0++,K--,re--,P++)}j.y1=j.y0+oe,j.sprite=Y.slice(0,(j.y1-j.y0)*O)}}}function A(_,j,I){I>>=5;for(var T=_.sprite,k=_.width>>5,B=_.x-(k<<4),M=B&127,P=32-M,S=_.y1-_.y0,L=(_.y+_.y0)*I+(B>>5),U,q=0;q<S;q++){U=0;for(var H=0;H<=k;H++)if((U<<P|(H<k?(U=T[q*k+H])>>>M:0))&j[L+H])return!0;L+=I}return!1}function m(_,j){var I=_[0],T=_[1];j.x+j.x0<I.x&&(I.x=j.x+j.x0),j.y+j.y0<I.y&&(I.y=j.y+j.y0),j.x+j.x1>T.x&&(T.x=j.x+j.x1),j.y+j.y1>T.y&&(T.y=j.y+j.y1)}function g(_,j){return _.x+_.x1>j[0].x&&_.x+_.x0<j[1].x&&_.y+_.y1>j[0].y&&_.y+_.y0<j[1].y}function x(_){var j=_[0]/_[1];return function(I){return[j*(I*=.1)*Math.cos(I),I*Math.sin(I)]}}function v(_){var j=4,I=j*_[0]/_[1],T=0,k=0;return function(B){var M=B<0?-1:1;switch(Math.sqrt(1+4*M*B)-M&3){case 0:T+=I;break;case 1:k+=j;break;case 2:T-=I;break;default:k-=j;break}return[T,k]}}function y(_){for(var j=[],I=-1;++I<_;)j[I]=0;return j}function N(){return document.createElement("canvas")}function C(_){return typeof _=="function"?_:function(){return _}}return UO}var hpt=fpt();const Apt=oc(hpt),mpt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),ppt=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),gpt=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),xpt=e=>{const[t,r]=w.useState([]),[n,a]=w.useState(!0),[s,o]=w.useState(null),l=w.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return w.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){o("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),o(null)};if(l)c=npt(u);else{const d=e.email||e.id||"";c=apt(u,d)}return c}catch(c){o(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,l]),{planificaciones:t,loading:n,error:s,canViewAllPlans:l}},vpt=({plan:e,onClose:t})=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[i.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),i.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:i.jsx(ppt,{})})]}),i.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{className:"mt-2",children:[i.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),i.jsx("div",{className:"mt-3",children:i.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),i.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>i.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexin Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?i.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>i.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[i.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),kee=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],bpt=["1 Medio","2 Medio","3 Medio","4 Medio"],ypt=({words:e})=>{const t=w.useRef(null);return w.useEffect(()=>{if(!e.length||!t.current)return;const r=wd(t.current);r.selectAll("*").remove();const n=Apt().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",o=>`${o.size}px`).style("font-family","Impact").style("fill",(o,l)=>q3(ipt)(l.toString())).attr("text-anchor","middle").attr("transform",o=>`translate(${[o.x,o.y]})rotate(${o.rotate})`).text(o=>o.text)}},[e]),i.jsx("svg",{ref:t})},wpt=({planificaciones:e})=>{const[t,r]=w.useState("todos"),[n,a]=w.useState("todos"),s=w.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),o=w.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),l=w.useMemo(()=>{const d=kee.reduce((f,A)=>({...f,[A]:0}),{});return o.forEach(f=>{var A,m;return(m=(A=f.reflexionUnidad)==null?void 0:A.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=kee.length-x)})}),Object.entries(d).map(([f,A])=>({text:f,value:A})).sort((f,A)=>A.value-f.value)},[o]),c=w.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),A=(o.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(A).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[o]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[i.jsx("option",{value:"todos",children:"Todos los Niveles"}),bpt.map(d=>i.jsx("option",{value:d,children:d},d))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>i.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(d=>d.value===0)?i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):i.jsx("ul",{className:"space-y-3",children:l.map((d,f)=>i.jsxs("li",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(l[0].value||1)*100}%`}})})]})]},d.text))})]}),i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?i.jsx(ypt,{words:c}):i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},Npt=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=xpt(e),[s,o]=w.useState("seguimiento"),[l,c]=w.useState("1"),[u,d]=w.useState(null),[f,A]=w.useState(null),m=w.useMemo(()=>{const v={"1":"1 Medio","2":"2 Medio","3":"3 Medio","4":"4 Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1",label:"1 Medio"},{key:"2",label:"2 Medio"},{key:"3",label:"3 Medio"},{key:"4",label:"4 Medio"}];if(!(e!=null&&e.id))return i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{children:"Usuario no autenticado."})});if(r)return i.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[i.jsx(gpt,{}),i.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>i.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):i.jsx("div",{className:"space-y-4",children:xa.map(v=>{const y=m.filter(C=>C.asignatura===v);if(y.length===0)return null;const N=u===v;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("button",{onClick:()=>d(N?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),i.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),i.jsx("span",{className:`transform transition-transform ${N?"rotate-180":""}`,children:i.jsx(mpt,{})})]}),N&&i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:i.jsx("ul",{className:"space-y-3",children:y.map(C=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>A(C),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:C.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",C.autor||"N/A"]})]})},C.id))})})]},v)})})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&i.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Vista administrativa"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>o("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),i.jsx("button",{onClick:()=>o("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Anlisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&i.jsx(wpt,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&i.jsx(vpt,{plan:f,onClose:()=>A(null)})]})},qT="analisisTaxonomicos",Cpt=async()=>{try{const e=Lt(pt(xr,qT),tr("uploadDate","desc"));return(await Rr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los anlisis:",e),new Error("No se pudieron cargar los anlisis taxonmicos")}},Ept=async e=>{if(!e)return[];try{const t=Lt(pt(xr,qT),ur("userId","==",e),tr("uploadDate","desc"));return(await Rr(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anlisis por usuario:",t),new Error("No se pudieron cargar los anlisis del usuario")}},jpt=async e=>{try{return{id:(await dn(pt(xr,qT),e)).id,...e}}catch(t){throw console.error("Error al crear anlisis:",t),new Error("No se pudo crear el anlisis taxonmico")}},kpt=async e=>{try{const t=er(xr,qT,e);await fa(t)}catch(t){throw console.error("Error al eliminar anlisis:",t,"ID:",e),new Error("No se pudo eliminar el anlisis taxonmico")}},zy="multicopias",SH=e=>{if(e===null||typeof e!="object")return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=typeof n=="object"&&n!==null?SH(n):n)}),t},See=e=>{try{if(!e)return;if(typeof e.toDate=="function")return e.toDate().toISOString();if(e.seconds)return new Date(e.seconds*1e3+Math.floor((e.nanoseconds||0)/1e6)).toISOString()}catch{}},_H=e=>{const t=e.data()||{};return{...t,id:e.id,createdAt:See(t.createdAt)||new Date().toISOString(),updatedAt:See(t.updatedAt)||void 0}};async function Spt(e,t="multicopias"){const r=Date.now(),n=e.name.replace(/\s+/g,"_"),a=`${t}/${r}/${n}`,s=Iu(b3,a);return await WC(s,e),await MA(s)}async function Kpe(e){const{id:t,createdAt:r,updatedAt:n,solicitanteEmailLower:a,...s}=e||{},o=s,l=SH({...o,estado:o.estado||"Enviada",solicitanteEmailLower:o.solicitanteEmail?o.solicitanteEmail.toLowerCase():void 0,createdAt:Xn(),updatedAt:Xn()});return(await dn(pt(dt,zy),l)).id}async function Wpe(e,t){if(!e)throw new Error("updateSolicitudMulticopia: id requerido");const r=SH({...t,updatedAt:Xn()});await Zi(er(dt,zy,e),r)}function Xpe(e,t){const r=pt(dt,zy);let n;return e.emailLower?n=Lt(r,ur("solicitanteEmailLower","==",e.emailLower),tr("createdAt","desc")):e.solicitanteId?n=Lt(r,ur("solicitanteId","==",e.solicitanteId),tr("createdAt","desc")):n=Lt(r,tr("createdAt","desc")),hr(n,a=>t(a.docs.map(_H)),a=>{console.error("subscribeMulticopiasPorSolicitante",a),t([])})}function Ype(e,t){const r=pt(dt,zy),n=Lt(r,tr("createdAt","desc"));return hr(n,a=>{const o=a.docs.map(_H).filter(l=>!(e.nivel&&e.nivel!=="Todos"&&(l.nivel||"")!==e.nivel||e.curso&&e.curso!=="Todos"&&(l.curso||"")!==e.curso||e.asignatura&&e.asignatura!=="Todas"&&(l.asignatura||"")!==e.asignatura||e.docenteNombre&&e.docenteNombre!=="Todos"&&(l.solicitanteNombre||"")!==e.docenteNombre||e.estado&&e.estado!=="Todos"&&(l.estado||"Enviada")!==e.estado));t(o)},a=>{console.error("subscribeMulticopiasAllConFiltros",a),t([])})}async function I2(e,t,r,n){if(!e)throw new Error("cambiarEstadoMulticopia: id requerido");const a={estado:t};t==="Visada"&&(a.visadoPor=r),t==="Aceptada"&&(a.aceptadoPor=r),t==="Rechazada"&&(a.rechazadoPor=r,n!=null&&n.motivoRechazo&&(a.motivoRechazo=n.motivoRechazo)),t==="Completada"&&(a.completadoPor=r),await Wpe(e,a)}async function Jpe(e){try{if(!e.solicitanteNombre&&!e.solicitanteEmail)return;await Eoe({docenteNombre:e.solicitanteNombre,docenteEmail:e.solicitanteEmail,tipo:"alerta",titulo:"Multicopia aceptada",mensaje:"Su solicitud fue aceptada. La multicopia estar lista en un plazo mximo de 48 horas.",estudianteNombre:void 0,estudianteId:void 0,accionRequerida:void 0})}catch(t){console.warn("No se pudo crear notificacin de aceptacin:",t)}}async function Zpe(e,t){if(!e)throw new Error("eliminarSolicitudMulticopia: id requerido");if(t!=null&&t.adjuntoUrl)try{const r=Iu(b3,t.adjuntoUrl);await VM(r)}catch(r){console.warn("No se pudo eliminar adjunto de Storage (continuando con borrado de doc):",r)}await fa(er(dt,zy,e))}async function ege(e={}){const{emailLower:t,max:r=200}=e;let n;const a=pt(dt,zy);t?n=Lt(a,ur("solicitanteEmailLower","==",t)):n=Lt(a,tr("createdAt","desc"));let o=(await Rr(n)).docs.map(_H).filter(l=>!!l.adjuntoUrl);return t&&(o=o.sort((l,c)=>(c.createdAt||"").localeCompare(l.createdAt||""))),o.slice(0,r)}const _pt=Object.freeze(Object.defineProperty({__proto__:null,cambiarEstadoMulticopia:I2,createSolicitudMulticopia:Kpe,eliminarSolicitudMulticopia:Zpe,listarAdjuntosMulticopias:ege,notificarAceptacionMulticopia:Jpe,subscribeMulticopiasAllConFiltros:Ype,subscribeMulticopiasPorSolicitante:Xpe,updateSolicitudMulticopia:Wpe,uploadAdjuntoMulticopia:Spt},Symbol.toStringTag,{value:"Module"})),_ee=["1 Medio","2 Medio","3 Medio","4 Medio"],Pm=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],fb={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},Tpt=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Tee=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(!1),[s,o]=w.useState(null),[l,c]=w.useState(null),[u,d]=w.useState(""),[f,A]=w.useState(!1),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState([]),[C,_]=w.useState(""),[j,I]=w.useState(""),[T,k]=w.useState(""),[B,M]=w.useState(""),[P,S]=w.useState(""),[L,U]=w.useState("resumen"),q=w.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const O=e.profile==="SUBDIRECCION"?await Cpt():await Ept(e.id);r(O),o(null)}catch(O){console.error("Error al cargar anlisis:",O),o("No se pudieron cargar los anlisis.")}finally{a(!1)}}},[e]);w.useEffect(()=>{q()},[q]),w.useEffect(()=>{(async()=>{try{const O=(e.email||"").toLowerCase(),J=(await ege({emailLower:e.profile==="SUBDIRECCION"?void 0:O,max:300})).map(ce=>({id:ce.id,titulo:ce.tituloMaterial,url:ce.adjuntoUrl,createdAt:ce.createdAt,asignatura:ce.asignatura,nivel:ce.nivel}));N(J)}catch(O){console.warn("No se pudieron cargar adjuntos de Multicopias:",O)}})()},[e]);const H=async O=>{var J;const K=(J=O.target.files)==null?void 0:J[0];if(K){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(K.type)){o("Por favor, suba un archivo PDF o DOCX vlido.");return}g(K),d(K.name),o(null);const oe=new FileReader;oe.onloadend=()=>{var ue;const re=(ue=oe.result)==null?void 0:ue.split(",")[1];if(!re){o("No se pudo procesar el archivo. Puede que est vaco o corrupto."),v(null);return}v({mimeType:K.type,data:re})},oe.onerror=()=>o("Error al leer el archivo."),oe.readAsDataURL(K)}},z=async()=>{if(!u.trim()||!x&&!C){o("Debe subir un documento o seleccionar uno desde Multicopias, y asignarle un nombre para analizar.");return}if(!j||!T){o("Seleccione Nivel y Asignatura antes de analizar.");return}A(!0),o(null);const O=`
            Eres un experto en pedagoga y en la Taxonoma de Bloom. Analiza el siguiente documento de una evaluacin educativa.
            Tu tarea es:
            1. Identificar cada pregunta o tem de evaluacin en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonoma de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser vlido y tener la siguiente estructura:
               {
                 "analysisResults": [
                   { "question": "...", "habilidadBloom": "..." }
                 ],
                 "summary": {
                   "Recordar": 0,
                   "Comprender": 0,
                   "Aplicar": 0,
                   "Analizar": 0,
                   "Evaluar": 0,
                   "Crear": 0
                 }
               }
            Donde "summary" contiene el conteo total de preguntas por cada nivel de Bloom.
        `;Pm.reduce((K,J)=>({...K,[J]:{type:"number"}}),{});try{W9("Anlisis Taxonmico",e);const K=ua.currentUser;if(!K)throw new Error("Usuario no autenticado.");const J=await K.getIdToken(),ce=await fetch("/api/analisisTaxonomico",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`},body:JSON.stringify({prompt:O,fileData:x,fileUrl:C||void 0,documentName:u,nivelForm:j,asignaturaForm:T,userId:e.id})});if(!ce.ok){const le=await ce.text();throw console.error("Error response from backend:",le),new Error(`Error al analizar el documento con IA: ${ce.statusText}`)}const oe=await ce.json(),re={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:oe.analysisResults,summary:oe.summary,nivel:j,asignatura:T},ue=await jpt(re);await q(),c(ue),d(""),g(null),v(null),_(""),I(""),k("")}catch(K){console.error(K);const J=K instanceof Error?K.message:"Hubo un error al analizar el documento.";o(J)}finally{A(!1)}},W=async O=>{if(window.confirm("Est seguro de eliminar este anlisis?"))try{await kpt(O),await q(),(l==null?void 0:l.id)===O&&c(null)}catch{o("No se pudo eliminar el anlisis.")}},Z=w.useMemo(()=>t.filter(O=>{const K=B?O.nivel===B:!0,J=P?O.asignatura===P:!0;return K&&J}),[t,B,P]),V=w.useMemo(()=>{const O={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};Z.forEach(J=>{Pm.forEach(ce=>{var re;const oe=((re=J.summary)==null?void 0:re[ce])||0;O[ce]+=oe})});const K=Object.values(O).reduce((J,ce)=>J+ce,0);return{acc:O,total:K}},[Z]),Y=w.useMemo(()=>{const O=new Map;Z.forEach(J=>{const ce=J.asignatura||"Sin asignatura";O.has(ce)||O.set(ce,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const oe=O.get(ce);Pm.forEach(re=>{var ue;oe[re]+=((ue=J.summary)==null?void 0:ue[re])||0})});const K=Array.from(O.entries()).map(([J,ce])=>({asignatura:J,counts:ce,total:Object.values(ce).reduce((oe,re)=>oe+re,0)}));return K.sort((J,ce)=>ce.total-J.total),K},[Z]),R=w.useMemo(()=>l?Object.values(l.summary).reduce((K,J)=>K+(J||0),0):0,[l]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Anlisis Taxonomico de Evaluaciones"}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),i.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),i.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:H,accept:".pdf,.doc,.docx"}),i.jsx("span",{children:"Cargue un archivo"})]}),i.jsx("p",{className:"pl-1",children:"o arrstrelo aqu"})]}),i.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"O seleccionar desde Multicopias"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:C,onChange:O=>_(O.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 pl-10",children:[i.jsx("option",{value:"",children:" Seleccione un adjunto "}),y.map(O=>i.jsxs("option",{value:O.url,children:[O.titulo," ",O.nivel?` ${O.nivel}`:""," ",O.asignatura?` ${O.asignatura}`:""]},O.id))]}),i.jsx(Pb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se listan adjuntos que hayan sido subidos en Multicopias."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:j,onChange:O=>I(O.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),_ee.map(O=>i.jsx("option",{value:O,children:O},O))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:T,onChange:O=>k(O.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),xa.map(O=>i.jsx("option",{value:O,children:O},O))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),i.jsx("input",{type:"text",id:"documentName",value:u,onChange:O=>d(O.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("button",{onClick:z,disabled:f||!x&&!C,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?i.jsx(Tpt,{}):"Analizar con IA"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Anlisis"}),n?i.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay anlisis guardados."}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(O=>i.jsxs("button",{onClick:()=>c(O),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===O.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[i.jsx("p",{className:"font-semibold truncate",children:O.documentName}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(O.uploadDate).toLocaleString("es-CL")}),(O.nivel||O.asignatura)&&i.jsxs("p",{className:"text-xs text-slate-500",children:[O.nivel||"Nivel s/i","  ",O.asignatura||"Asignatura s/i"]})]},O.id))})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),i.jsxs("select",{value:B,onChange:O=>M(O.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos"}),_ee.map(O=>i.jsx("option",{value:O,children:O},O))]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),i.jsxs("select",{value:P,onChange:O=>S(O.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas"}),xa.map(O=>i.jsx("option",{value:O,children:O},O))]})]}),i.jsx("button",{type:"button",onClick:()=>{M(""),S("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>U("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${L==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),i.jsx("button",{onClick:()=>U("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${L==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparacin por Asignatura"})]})}),L==="resumen"?i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," anlisis considerados"]})]}),i.jsx("div",{className:"space-y-3",children:Pm.map(O=>{const K=V.acc[O],J=V.total>0?K/V.total*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:O}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[K," (",J.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${fb[O]} h-4 rounded-full`,style:{width:`${J}%`}})})]},O)})}),i.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Pm.map(O=>i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[i.jsx("span",{className:"text-sm",children:O}),i.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${fb[O]}`,children:V.acc[O]})]},O))})]}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparacin por Asignatura"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Y.length," asignaturas comparadas"]})]}),Y.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):i.jsx("div",{className:"space-y-5",children:Y.map(O=>{const K=O.total||1;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:O.asignatura}),i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[O.total," tems"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Pm.map(J=>{const ce=O.counts[J]||0,oe=ce/K*100;return i.jsx("div",{className:`${fb[J]} h-5`,style:{width:`${oe}%`},title:`${J}: ${ce} (${oe.toFixed(0)}%)`},J)})}),i.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Pm.map(J=>i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("span",{className:`inline-block w-3 h-3 rounded ${fb[J]}`}),i.jsx("span",{children:J})]},J))})]},O.asignatura)})})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&i.jsxs(i.Fragment,{children:[" "," ",l.nivel||"Nivel s/i","  ",l.asignatura||"Asignatura s/i"]})]})]}),i.jsx("button",{onClick:()=>W(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",R," preguntas)"]}),i.jsx("div",{className:"space-y-3",children:Pm.map(O=>{const K=l.summary[O]||0,J=R>0?K/R*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:O}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[K," (",J.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${fb[O]} h-4 rounded-full`,style:{width:`${J}%`}})})]},O)})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Anlisis"}),i.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / tem"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((O,K)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:O.question}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${fb[O.habilidadBloom]}`,children:O.habilidadBloom})})]},K))})]})})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Anlisis"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo anlisis o seleccione uno del historial para ver los resultados aqu."})]})})]})]})]})},TH="notas_practica",Bpt=e=>({id:e.id,...e.data()}),Ipt=(e,t)=>{const r=Lt(pt(dt,TH),ur("estudianteId","==",e),tr("createdAt","desc"));return hr(r,n=>{t(n.docs.map(a=>Bpt(a)))})},Dpt=async e=>{const t={...e};Object.keys(t).forEach(r=>{t[r]===void 0&&delete t[r]}),await dn(pt(dt,TH),{...t,createdAt:Xn()})},Opt=async e=>{await fa(er(dt,TH,e))};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Nx=function(){return Nx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Nx.apply(this,arguments)};function Ppt(e,t,r,n){return new(r||(r=Promise))(function(a,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(o,l)}c((n=n.apply(e,[])).next())})}function Fpt(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,n=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){o=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){o.label=d[1];break}if(d[0]===6&&o.label<a[1]){o.label=a[1],a=d;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(d);break}a[2]&&o.ops.pop(),o.trys.pop();continue}d=t.call(e,o)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function qr(){return qr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qr.apply(this,arguments)}function Cx(e){return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}function tge(e){var t=function(r,n){if(Cx(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Cx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Cx(t)==="symbol"?t:String(t)}function $b(e,t,r){return(t=tge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bee(Object(r),!0).forEach(function(n){$b(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bee(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Iee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tge(n.key),n)}}function SL(e,t){return SL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},SL(e,t)}function c4(e){return c4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c4(e)}function Rpt(e,t){if(t&&(Cx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function Lpt(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=c4(e);if(t){var a=c4(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Rpt(this,r)}}function _L(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rge(e,t){if(e){if(typeof e=="string")return _L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_L(e,t):void 0}}function BH(e){return function(t){if(Array.isArray(t))return _L(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||rge(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Mpt=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var o=document.createElement("style");return o.setAttribute("data-emotion",s.key),s.nonce!==void 0&&o.setAttribute("nonce",s.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===s)return document.styleSheets[o]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),cd="-ms-",Dee="-moz-",ca="-webkit-",IH="decl",nge="@keyframes",Upt=Math.abs,KT=String.fromCharCode,Hpt=Object.assign;function age(e){return e.trim()}function ga(e,t,r){return e.replace(t,r)}function TL(e,t){return e.indexOf(t)}function Uo(e,t){return 0|e.charCodeAt(t)}function CC(e,t,r){return e.slice(t,r)}function jh(e){return e.length}function DH(e){return e.length}function Qk(e,t){return t.push(e),e}var WT=1,oy=1,sge=0,zc=0,Pi=0,Gy="";function XT(e,t,r,n,a,s,o){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:WT,column:oy,length:o,return:""}}function n2(e,t){return Hpt(XT("",null,null,"",null,null,0),e,{length:-e.length},t)}function Tu(){return Pi=zc<sge?Uo(Gy,zc++):0,oy++,Pi===10&&(oy=1,WT++),Pi}function Wh(){return Uo(Gy,zc)}function KS(){return zc}function IE(e,t){return CC(Gy,e,t)}function EC(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ige(e){return WT=oy=1,sge=jh(Gy=e),zc=0,[]}function oge(e){return Gy="",e}function WS(e){return age(IE(zc-1,BL(e===91?e+2:e===40?e+1:e)))}function Qpt(e){for(;(Pi=Wh())&&Pi<33;)Tu();return EC(e)>2||EC(Pi)>3?"":" "}function Vpt(e,t){for(;--t&&Tu()&&!(Pi<48||Pi>102||Pi>57&&Pi<65||Pi>70&&Pi<97););return IE(e,KS()+(t<6&&Wh()==32&&Tu()==32))}function BL(e){for(;Tu();)switch(Pi){case e:return zc;case 34:case 39:e!==34&&e!==39&&BL(Pi);break;case 40:e===41&&BL(e);break;case 92:Tu()}return zc}function $pt(e,t){for(;Tu()&&e+Pi!==57&&(e+Pi!==84||Wh()!==47););return"/*"+IE(t,zc-1)+"*"+KT(e===47?e:Tu())}function zpt(e){for(;!EC(Wh());)Tu();return IE(e,zc)}function Oee(e){return oge(XS("",null,null,null,[""],e=ige(e),0,[0],e))}function XS(e,t,r,n,a,s,o,l,c){for(var u=0,d=0,f=o,A=0,m=0,g=0,x=1,v=1,y=1,N=0,C="",_=a,j=s,I=n,T=C;v;)switch(g=N,N=Tu()){case 40:if(g!=108&&Uo(T,f-1)==58){TL(T+=ga(WS(N),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:T+=WS(N);break;case 9:case 10:case 13:case 32:T+=Qpt(g);break;case 92:T+=Vpt(KS()-1,7);continue;case 47:switch(Wh()){case 42:case 47:Qk(Gpt($pt(Tu(),KS()),t,r),c);break;default:T+="/"}break;case 123*x:l[u++]=jh(T)*y;case 125*x:case 59:case 0:switch(N){case 0:case 125:v=0;case 59+d:m>0&&jh(T)-f&&Qk(m>32?Fee(T+";",n,r,f-1):Fee(ga(T," ","")+";",n,r,f-2),c);break;case 59:T+=";";default:if(Qk(I=Pee(T,t,r,u,d,a,l,C,_=[],j=[],f),s),N===123)if(d===0)XS(T,t,I,I,_,s,f,l,j);else switch(A===99&&Uo(T,3)===110?100:A){case 100:case 109:case 115:XS(e,I,I,n&&Qk(Pee(e,I,I,0,0,a,l,C,a,_=[],f),j),a,j,f,l,n?_:j);break;default:XS(T,I,I,I,[""],j,0,l,j)}}u=d=m=0,x=y=1,C=T="",f=o;break;case 58:f=1+jh(T),m=g;default:if(x<1){if(N==123)--x;else if(N==125&&x++==0&&(Pi=zc>0?Uo(Gy,--zc):0,oy--,Pi===10&&(oy=1,WT--),Pi==125))continue}switch(T+=KT(N),N*x){case 38:y=d>0?1:(T+="\f",-1);break;case 44:l[u++]=(jh(T)-1)*y,y=1;break;case 64:Wh()===45&&(T+=WS(Tu())),A=Wh(),d=f=jh(C=T+=zpt(KS())),N++;break;case 45:g===45&&jh(T)==2&&(x=0)}}return s}function Pee(e,t,r,n,a,s,o,l,c,u,d){for(var f=a-1,A=a===0?s:[""],m=DH(A),g=0,x=0,v=0;g<n;++g)for(var y=0,N=CC(e,f+1,f=Upt(x=o[g])),C=e;y<m;++y)(C=age(x>0?A[y]+" "+N:ga(N,/&\f/g,A[y])))&&(c[v++]=C);return XT(e,t,r,a===0?"rule":l,c,u,d)}function Gpt(e,t,r){return XT(e,t,r,"comm",KT(Pi),CC(e,2,-2),0)}function Fee(e,t,r,n){return XT(e,t,r,IH,CC(e,0,n),CC(e,n+1,-1),n)}function Ex(e,t){for(var r="",n=DH(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function Ree(e,t,r,n){switch(e.type){case"@import":case IH:return e.return=e.return||e.value;case"comm":return"";case nge:return e.return=e.value+"{"+Ex(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return jh(r=Ex(e.children,n))?e.return=e.value+"{"+r+"}":""}function Lee(e){var t=DH(e);return function(r,n,a,s){for(var o="",l=0;l<t;l++)o+=e[l](r,n,a,s)||"";return o}}function qpt(e){return function(t){t.root||(t=t.return)&&e(t)}}function lge(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Kpt=function(e,t,r){for(var n=0,a=0;n=a,a=Wh(),n===38&&a===12&&(t[r]=1),!EC(a);)Tu();return IE(e,zc)},Wpt=function(e,t){return oge(function(r,n){var a=-1,s=44;do switch(EC(s)){case 0:s===38&&Wh()===12&&(n[a]=1),r[a]+=Kpt(zc-1,n,a);break;case 2:r[a]+=WS(s);break;case 4:if(s===44){r[++a]=Wh()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=KT(s)}while(s=Tu());return r}(ige(e),t))},Mee=new WeakMap,Xpt=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||Mee.get(r))&&!n){Mee.set(e,!0);for(var a=[],s=Wpt(t,a),o=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=a[l]?s[l].replace(/&\f/g,o[u]):o[u]+" "+s[l]}}},Ypt=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function cge(e,t){switch(function(r,n){return 45^Uo(r,0)?(((n<<2^Uo(r,0))<<2^Uo(r,1))<<2^Uo(r,2))<<2^Uo(r,3):0}(e,t)){case 5103:return ca+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ca+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ca+e+Dee+e+cd+e+e;case 6828:case 4268:return ca+e+cd+e+e;case 6165:return ca+e+cd+"flex-"+e+e;case 5187:return ca+e+ga(e,/(\w+).+(:[^]+)/,ca+"box-$1$2-ms-flex-$1$2")+e;case 5443:return ca+e+cd+"flex-item-"+ga(e,/flex-|-self/,"")+e;case 4675:return ca+e+cd+"flex-line-pack"+ga(e,/align-content|flex-|-self/,"")+e;case 5548:return ca+e+cd+ga(e,"shrink","negative")+e;case 5292:return ca+e+cd+ga(e,"basis","preferred-size")+e;case 6060:return ca+"box-"+ga(e,"-grow","")+ca+e+cd+ga(e,"grow","positive")+e;case 4554:return ca+ga(e,/([^-])(transform)/g,"$1"+ca+"$2")+e;case 6187:return ga(ga(ga(e,/(zoom-|grab)/,ca+"$1"),/(image-set)/,ca+"$1"),e,"")+e;case 5495:case 3959:return ga(e,/(image-set\([^]*)/,ca+"$1$`$1");case 4968:return ga(ga(e,/(.+:)(flex-)?(.*)/,ca+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+ca+e+e;case 4095:case 3583:case 4068:case 2532:return ga(e,/(.+)-inline(.+)/,ca+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(jh(e)-1-t>6)switch(Uo(e,t+1)){case 109:if(Uo(e,t+4)!==45)break;case 102:return ga(e,/(.+:)(.+)-([^]+)/,"$1"+ca+"$2-$3$1"+Dee+(Uo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~TL(e,"stretch")?cge(ga(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Uo(e,t+1)!==115)break;case 6444:switch(Uo(e,jh(e)-3-(~TL(e,"!important")&&10))){case 107:return ga(e,":",":"+ca)+e;case 101:return ga(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ca+(Uo(e,14)===45?"inline-":"")+"box$3$1"+ca+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(Uo(e,t+11)){case 114:return ca+e+cd+ga(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ca+e+cd+ga(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ca+e+cd+ga(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ca+e+cd+e+e}return e}var Uee,Vk,YS=typeof document<"u",Jpt=YS?void 0:(Uee=function(){return lge(function(){var e={};return function(t){return e[t]}})},Vk=new WeakMap,function(e){if(Vk.has(e))return Vk.get(e);var t=Uee(e);return Vk.set(e,t),t}),Zpt=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case IH:e.return=cge(e.value,e.length);break;case nge:return Ex([n2(e,{value:ga(e.value,"@","@"+ca)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,o){return(s=o.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ex([n2(e,{props:[ga(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Ex([n2(e,{props:[ga(a,/:(plac\w+)/,":"+ca+"input-$1")]}),n2(e,{props:[ga(a,/:(plac\w+)/,":-moz-$1")]}),n2(e,{props:[ga(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],uge=function(e){var t=e.key;if(YS&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Zpt,a,s,o={},l=[];YS&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var N=y.getAttribute("data-emotion").split(" "),C=1;C<N.length;C++)o[N[C]]=!0;l.push(y)}));var c=[Xpt,Ypt];if(YS){var u,d=[Ree,qpt(function(y){u.insert(y)})],f=Lee(c.concat(n,d));s=function(y,N,C,_){u=C,Ex(Oee(y?y+"{"+N.styles+"}":N.styles),f),_&&(v.inserted[N.name]=!0)}}else{var A=[Ree],m=Lee(c.concat(n,A)),g=Jpt(n)(t),x=function(y,N){var C=N.name;return g[C]===void 0&&(g[C]=Ex(Oee(y?y+"{"+N.styles+"}":N.styles),m)),g[C]};s=function(y,N,C,_){var j=N.name,I=x(y,N);return v.compat===void 0?(_&&(v.inserted[j]=!0),I):_?void(v.inserted[j]=I):I}}var v={key:t,sheet:new Mpt({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return v.sheet.hydrate(l),v};function ya(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var So=typeof Symbol=="function"&&Symbol.for,IL=So?Symbol.for("react.element"):60103,DL=So?Symbol.for("react.portal"):60106,JS=So?Symbol.for("react.fragment"):60107,ZS=So?Symbol.for("react.strict_mode"):60108,e5=So?Symbol.for("react.profiler"):60114,t5=So?Symbol.for("react.provider"):60109,r5=So?Symbol.for("react.context"):60110,OL=So?Symbol.for("react.async_mode"):60111,u4=So?Symbol.for("react.concurrent_mode"):60111,n5=So?Symbol.for("react.forward_ref"):60112,a5=So?Symbol.for("react.suspense"):60113,egt=So?Symbol.for("react.suspense_list"):60120,s5=So?Symbol.for("react.memo"):60115,i5=So?Symbol.for("react.lazy"):60116,tgt=So?Symbol.for("react.block"):60121,rgt=So?Symbol.for("react.fundamental"):60117,ngt=So?Symbol.for("react.responder"):60118,agt=So?Symbol.for("react.scope"):60119;function fu(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case IL:switch(e=e.type){case OL:case u4:case JS:case e5:case ZS:case a5:return e;default:switch(e=e&&e.$$typeof){case r5:case n5:case i5:case s5:case t5:return e;default:return t}}case DL:return t}}}function Hee(e){return fu(e)===u4}var sgt={AsyncMode:OL,ConcurrentMode:u4,ContextConsumer:r5,ContextProvider:t5,Element:IL,ForwardRef:n5,Fragment:JS,Lazy:i5,Memo:s5,Portal:DL,Profiler:e5,StrictMode:ZS,Suspense:a5,isAsyncMode:function(e){return Hee(e)||fu(e)===OL},isConcurrentMode:Hee,isContextConsumer:function(e){return fu(e)===r5},isContextProvider:function(e){return fu(e)===t5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===IL},isForwardRef:function(e){return fu(e)===n5},isFragment:function(e){return fu(e)===JS},isLazy:function(e){return fu(e)===i5},isMemo:function(e){return fu(e)===s5},isPortal:function(e){return fu(e)===DL},isProfiler:function(e){return fu(e)===e5},isStrictMode:function(e){return fu(e)===ZS},isSuspense:function(e){return fu(e)===a5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===JS||e===u4||e===e5||e===ZS||e===a5||e===egt||typeof e=="object"&&e!==null&&(e.$$typeof===i5||e.$$typeof===s5||e.$$typeof===t5||e.$$typeof===r5||e.$$typeof===n5||e.$$typeof===rgt||e.$$typeof===ngt||e.$$typeof===agt||e.$$typeof===tgt)},typeOf:fu};ya(function(e,t){});var Qee=ya(function(e){e.exports=sgt}),Vee={};Vee[Qee.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Vee[Qee.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var PL=typeof document<"u";function dge(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var OH=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||PL===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},PH=function(e,t,r){OH(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var o=e.insert(t===s?"."+n:"",s,e.sheet,!0);PL||o===void 0||(a+=o),s=s.next}while(s!==void 0);if(!PL&&a.length!==0)return a}},igt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ogt=/[A-Z]|^ms/g,lgt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,fge=function(e){return e.charCodeAt(1)===45},$ee=function(e){return e!=null&&typeof e!="boolean"},HO=lge(function(e){return fge(e)?e:e.replace(ogt,"-$&").toLowerCase()}),zee=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(lgt,function(r,n,a){return kh={name:n,styles:a,next:kh},n})}return igt[e]===1||fge(e)||typeof t!="number"||t===0?t:t+"px"};function pN(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return kh={name:r.name,styles:r.styles,next:kh},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)kh={name:n.name,styles:n.styles,next:kh},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var A=0;A<d.length;A++)f+=pN(c,u,d[A])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=m+"{"+u[g]+"}":$ee(g)&&(f+=HO(m)+":"+zee(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=pN(c,u,g);switch(m){case"animation":case"animationName":f+=HO(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)$ee(g[v])&&(f+=HO(m)+":"+zee(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=kh,o=r(e);return kh=s,pN(e,t,o)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var kh,Gee=/label:\s*([^\s;\n{]+)\s*(;|$)/g,YT=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";kh=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=pN(r,t,s)):a+=s[0];for(var o=1;o<e.length;o++)a+=pN(r,t,e[o]),n&&(a+=s[o]);Gee.lastIndex=0;for(var l,c="";(l=Gee.exec(a))!==null;)c+="-"+l[1];var u=function(d){for(var f,A=0,m=0,g=d.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),A=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&A)+(59797*(A>>>16)<<16);switch(g){case 3:A^=(255&d.charCodeAt(m+2))<<16;case 2:A^=(255&d.charCodeAt(m+1))<<8;case 1:A=1540483477*(65535&(A^=255&d.charCodeAt(m)))+(59797*(A>>>16)<<16)}return(((A=1540483477*(65535&(A^=A>>>13))+(59797*(A>>>16)<<16))^A>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:kh}},cgt=typeof document<"u",ugt=function(e){return e()},hge=!!w.useInsertionEffect&&w.useInsertionEffect,Age=cgt&&hge||ugt,qee=hge||w.useLayoutEffect,N1=typeof document<"u",FH={}.hasOwnProperty,d4=w.createContext(typeof HTMLElement<"u"?uge({key:"css"}):null);d4.Provider;var JT=function(e){return w.forwardRef(function(t,r){var n=w.useContext(d4);return e(t,n,r)})};N1||(JT=function(e){return function(t){var r=w.useContext(d4);return r===null?(r=uge({key:"css"}),w.createElement(d4.Provider,{value:r},e(t,r))):e(t,r)}});var RH=w.createContext({}),FL="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",dgt=function(e,t){var r={};for(var n in t)FH.call(t,n)&&(r[n]=t[n]);return r[FL]=e,r},fgt=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;OH(t,r,n);var a=Age(function(){return PH(t,r,n)});if(!N1&&a!==void 0){for(var s,o=r.name,l=r.next;l!==void 0;)o+=" "+l.name,l=l.next;return w.createElement("style",((s={})["data-emotion"]=t.key+" "+o,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},hgt=JT(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[FL],s=[n],o="";typeof e.className=="string"?o=dge(t.registered,s,e.className):e.className!=null&&(o=e.className+" ");var l=YT(s,void 0,w.useContext(RH));o+=t.key+"-"+l.name;var c={};for(var u in e)!FH.call(e,u)||u==="css"||u===FL||(c[u]=e[u]);return c.ref=r,c.className=o,w.createElement(w.Fragment,null,w.createElement(fgt,{cache:t,serialized:l,isStringTag:typeof a=="string"}),w.createElement(a,c))});ya(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Mr=function(e,t){var r=arguments;if(t==null||!FH.call(t,"css"))return w.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=hgt,a[1]=dgt(e,t);for(var s=2;s<n;s++)a[s]=r[s];return w.createElement.apply(null,a)};JT(function(e,t){var r=e.styles,n=YT([r],void 0,w.useContext(RH));if(!N1){for(var a,s=n.name,o=n.styles,l=n.next;l!==void 0;)s+=" "+l.name,o+=l.styles,l=l.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:o},t.sheet,c);return c?null:w.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=w.useRef();return qee(function(){var f=t.key+"-global",A=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(A.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),A.hydrate([g])),d.current=[A,m],function(){A.flush()}},[t]),qee(function(){var f=d.current,A=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&PH(t,n.next,!0),A.tags.length){var m=A.tags[A.tags.length-1].nextElementSibling;A.before=m,A.flush()}t.insert("",n,A,!1)}},[t,n.name]),null});function LH(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return YT(t)}var Agt=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var o=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))o=e(s);else for(var l in o="",s)s[l]&&l&&(o&&(o+=" "),o+=l);break;default:o=s}o&&(a&&(a+=" "),a+=o)}}return a};function mgt(e,t,r){var n=[],a=dge(e,n,r);return n.length<2?r:a+t(n)}var pgt=function(e){var t,r=e.cache,n=e.serializedArr,a=Age(function(){for(var s="",o=0;o<n.length;o++){var l=PH(r,n[o],!1);N1||l===void 0||(s+=l)}if(!N1)return s});return N1||a.length===0?null:w.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};JT(function(e,t){var r=[],n=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=YT(l,t.registered);return r.push(u),OH(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return mgt(t.registered,n,Agt(l))},theme:w.useContext(RH)},s=e.children(a);return w.createElement(w.Fragment,null,w.createElement(pgt,{cache:t,serializedArr:r}),s)});function Ao(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,o,l,c,u=[],d=!0,f=!1;try{if(l=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=l.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(A){f=!0,o=A}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw o}}return u}}(e,t)||rge(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bh(e,t){if(e==null)return{};var r,n,a=function(o,l){if(o==null)return{};var c,u,d={},f=Object.keys(o);for(u=0;u<f.length;u++)c=f[u],l.indexOf(c)>=0||(d[c]=o[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fA(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function mge(e){return fA(e).getComputedStyle(e)}const $k=Math.round;function pge(e){return xge(e)?(e.nodeName||"").toLowerCase():""}let zk;function gge(e){return e instanceof fA(e).HTMLElement}function o5(e){return e instanceof fA(e).Element}function xge(e){return e instanceof fA(e).Node}function Kee(e){return typeof ShadowRoot>"u"?!1:e instanceof fA(e).ShadowRoot||e instanceof ShadowRoot}function vge(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=mge(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function ggt(){return/^((?!chrome|android).)*safari/i.test(function(){if(zk)return zk;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(zk=e.brands.map(t=>t.brand+"/"+t.version).join(" "),zk):navigator.userAgent}())}function bge(e){return o5(e)?e:e.contextElement}const yge={x:1,y:1};function Wee(e){const t=bge(e);if(!gge(t))return yge;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=mge(c);let d=parseFloat(u.width),f=parseFloat(u.height);const A=c.offsetWidth,m=c.offsetHeight,g=$k(d)!==A||$k(f)!==m;return g&&(d=A,f=m),{width:d,height:f,fallback:g}}(t);let o=(s?$k(r.width):r.width)/n,l=(s?$k(r.height):r.height)/a;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}function Xee(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),l=bge(e);let c=yge;t&&(c=Wee(e));const u=l?fA(l):window,d=ggt()&&r;let f=(o.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,A=(o.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=o.width/c.x,g=o.height/c.y;if(l){const x=fA(l),v=n;let y=x.frameElement;for(;y&&n&&v!==x;){const N=Wee(y),C=y.getBoundingClientRect(),_=getComputedStyle(y);C.x+=(y.clientLeft+parseFloat(_.paddingLeft))*N.x,C.y+=(y.clientTop+parseFloat(_.paddingTop))*N.y,f*=N.x,A*=N.y,m*=N.x,g*=N.y,f+=C.x,A+=C.y,y=fA(y).frameElement}}return{width:m,height:g,top:A,right:f+m,bottom:A+g,left:f,x:f,y:A}}function xgt(e){if(pge(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Kee(e)&&e.host||function(r){return((xge(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return Kee(t)?t.host:t}function wge(e){const t=xgt(e);return function(r){return["html","body","#document"].includes(pge(r))}(t)?t.ownerDocument.body:gge(t)&&vge(t)?t:wge(t)}function l5(e,t){var r;t===void 0&&(t=[]);const n=wge(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=fA(n);return a?t.concat(s,s.visualViewport||[],vge(n)?n:[]):t.concat(n,l5(n))}var RL=typeof document<"u"?w.useLayoutEffect:w.useEffect,vgt=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],f4=function(){};function bgt(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function ygt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(bgt(e,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var Yee=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Cx(e)==="object"&&e!==null?[e]:[];var t},Jee=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Or({},Bh(e,vgt))},Qs=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,o=e.className;return{css:a(t,e),className:n(r??{},s(t,e),o)}};function ZT(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Nge(e){return ZT(e)?window.pageYOffset:e.scrollTop}function h4(e,t){ZT(e)?window.scrollTo(0,t):e.scrollTop=t}function wgt(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function Gk(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f4,a=Nge(e),s=t-a,o=10,l=0;function c(){var u=wgt(l+=o,a,s,r);h4(e,u),l<r?window.requestAnimationFrame(c):n(e)}c()}function Zee(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?h4(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&h4(e,Math.max(t.offsetTop-a,0))}function ete(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Cge=!1,Ngt={get passive(){return Cge=!0}},qk=typeof window<"u"?window:{};qk.addEventListener&&qk.removeEventListener&&(qk.addEventListener("p",f4,Ngt),qk.removeEventListener("p",f4,!1));var Cgt=Cge;function Egt(e){return e!=null}function Kk(e,t,r){return e?t:r}var jgt=["children","innerProps"],kgt=["children","innerProps"];function Sgt(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=function(q){var H=getComputedStyle(q),z=H.position==="absolute",W=/(auto|scroll)/;if(H.position==="fixed")return document.documentElement;for(var Z=q;Z=Z.parentElement;)if(H=getComputedStyle(Z),(!z||H.position!=="static")&&W.test(H.overflow+H.overflowY+H.overflowX))return Z;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,A=r.getBoundingClientRect(),m=A.bottom,g=A.height,x=A.top,v=r.offsetParent.getBoundingClientRect().top,y=o||ZT(d=c)?window.innerHeight:d.clientHeight,N=Nge(c),C=parseInt(getComputedStyle(r).marginBottom,10),_=parseInt(getComputedStyle(r).marginTop,10),j=v-_,I=y-x,T=j+N,k=f-N-x,B=m-y+N+C,M=N+x-_,P=160;switch(a){case"auto":case"bottom":if(I>=g)return{placement:"bottom",maxHeight:t};if(k>=g&&!o)return s&&Gk(c,B,P),{placement:"bottom",maxHeight:t};if(!o&&k>=n||o&&I>=n)return s&&Gk(c,B,P),{placement:"bottom",maxHeight:o?I-C:k-C};if(a==="auto"||o){var S=t,L=o?j:T;return L>=n&&(S=Math.min(L-C-l,t)),{placement:"top",maxHeight:S}}if(a==="bottom")return s&&h4(c,B),{placement:"bottom",maxHeight:t};break;case"top":if(j>=g)return{placement:"top",maxHeight:t};if(T>=g&&!o)return s&&Gk(c,M,P),{placement:"top",maxHeight:t};if(!o&&T>=n||o&&j>=n){var U=t;return(!o&&T>=n||o&&j>=n)&&(U=o?j-_:T-_),s&&Gk(c,M,P),{placement:"top",maxHeight:U}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var tte,Ege=function(e){return e==="auto"?"bottom":e},jge=w.createContext(null),_gt=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=(w.useContext(jge)||{}).setPortalPlacement,u=w.useRef(null),d=Ao(w.useState(n),2),f=d[0],A=d[1],m=Ao(w.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return RL(function(){var y=u.current;if(y){var N=s==="fixed",C=Sgt({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:o&&!N,isFixedPosition:N,controlHeight:v});A(C.maxHeight),x(C.placement),c==null||c(C.placement)}},[n,a,s,o,r,c,v]),t({ref:u,placerProps:Or(Or({},e),{},{placement:g||Ege(a),maxHeight:f})})},Tgt=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Mr("div",qr({},Qs(e,"menu",{menu:!0}),{ref:r},n),t)},kge=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Or({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},Bgt=kge,Igt=kge,Dgt=["size"],Ogt=["innerProps","isRtl","size"],QO,VO,Pgt={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Sge=function(e){var t=e.size,r=Bh(e,Dgt);return Mr("svg",qr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Pgt},r))},$O=function(e){return Mr(Sge,qr({size:20},e),Mr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},rte=function(e){return Mr(Sge,qr({size:20},e),Mr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},_ge=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Or({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},Fgt=_ge,Rgt=_ge,Lgt=function(){var e=LH.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(tte||(QO=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],VO||(VO=QO.slice(0)),tte=Object.freeze(Object.defineProperties(QO,{raw:{value:Object.freeze(VO)}})))),zO=function(e){var t=e.delay,r=e.offset;return Mr("span",{css:LH({animation:"".concat(Lgt," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Mgt=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return Mr("div",qr({ref:a},Qs(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":o}),s,{"aria-disabled":r||void 0}),t)},Ugt=["data"],Hgt=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Mr("div",qr({},Qs(e,"group",{group:!0}),l),Mr(s,qr({},o,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Mr("div",null,t))},Qgt=["innerRef","isDisabled","isHidden","inputClassName"],Tge={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Vgt={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Or({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Tge)},$gt=function(e){return Or({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Tge)},nte=function(e){var t=e.children,r=e.innerProps;return Mr("div",r,t)},zgt=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,o=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Mr(c,{data:n,innerProps:Or(Or({},Qs(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},Mr(u,{data:n,innerProps:Or({},Qs(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Mr(d,{data:n,innerProps:Or(Or({},Qs(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},Ggt={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Mr("div",qr({},Qs(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Mr($O,null))},Control:Mgt,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Mr("div",qr({},Qs(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Mr(rte,null))},DownChevron:rte,CrossIcon:$O,Group:Hgt,GroupHeading:function(e){var t=Jee(e);t.data;var r=Bh(t,Ugt);return Mr("div",qr({},Qs(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Mr("div",qr({},Qs(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Mr("span",qr({},t,Qs(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=Jee(e),a=n.innerRef,s=n.isDisabled,o=n.isHidden,l=n.inputClassName,c=Bh(n,Qgt);return Mr("div",qr({},Qs(e,"input",{"input-container":!0}),{"data-value":r||""}),Mr("input",qr({className:t({input:!0},l),ref:a,style:$gt(o),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=Bh(e,Ogt);return Mr("div",qr({},Qs(Or(Or({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Mr(zO,{delay:0,offset:r}),Mr(zO,{delay:160,offset:!0}),Mr(zO,{delay:320,offset:!r}))},Menu:Tgt,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Mr("div",qr({},Qs(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,o=e.menuPosition,l=w.useRef(null),c=w.useRef(null),u=Ao(w.useState(Ege(s)),2),d=u[0],f=u[1],A=w.useMemo(function(){return{setPortalPlacement:f}},[]),m=Ao(w.useState(null),2),g=m[0],x=m[1],v=w.useCallback(function(){if(n){var _=function(T){var k=T.getBoundingClientRect();return{bottom:k.bottom,height:k.height,left:k.left,right:k.right,top:k.top,width:k.width}}(n),j=o==="fixed"?0:window.pageYOffset,I=_[d]+j;I===(g==null?void 0:g.offset)&&_.left===(g==null?void 0:g.rect.left)&&_.width===(g==null?void 0:g.rect.width)||x({offset:I,rect:_})}},[n,o,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);RL(function(){v()},[v]);var y=w.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&l.current&&(c.current=function(_,j,I,T){T===void 0&&(T={});const{ancestorScroll:k=!0,ancestorResize:B=!0,elementResize:M=!0,animationFrame:P=!1}=T,S=k&&!P,L=S||B?[...o5(_)?l5(_):_.contextElement?l5(_.contextElement):[],...l5(j)]:[];L.forEach(z=>{S&&z.addEventListener("scroll",I,{passive:!0}),B&&z.addEventListener("resize",I)});let U,q=null;if(M){let z=!0;q=new ResizeObserver(()=>{z||I(),z=!1}),o5(_)&&!P&&q.observe(_),o5(_)||!_.contextElement||P||q.observe(_.contextElement),q.observe(j)}let H=P?Xee(_):null;return P&&function z(){const W=Xee(_);!H||W.x===H.x&&W.y===H.y&&W.width===H.width&&W.height===H.height||I(),H=W,U=requestAnimationFrame(z)}(),I(),()=>{var z;L.forEach(W=>{S&&W.removeEventListener("scroll",I),B&&W.removeEventListener("resize",I)}),(z=q)==null||z.disconnect(),q=null,P&&cancelAnimationFrame(U)}}(n,l.current,v,{elementResize:"ResizeObserver"in window}))},[n,v]);RL(function(){y()},[y]);var N=w.useCallback(function(_){l.current=_,y()},[y]);if(!t&&o!=="fixed"||!g)return null;var C=Mr("div",qr({ref:N},Qs(Or(Or({},e),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Mr(jge.Provider,{value:A},t?q7.createPortal(C,t):C)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=Bh(e,kgt);return Mr("div",qr({},Qs(Or(Or({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=Bh(e,jgt);return Mr("div",qr({},Qs(Or(Or({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:zgt,MultiValueContainer:nte,MultiValueLabel:nte,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Mr("div",qr({role:"button"},r),t||Mr($O,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,o=e.innerProps;return Mr("div",qr({},Qs(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},o),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Mr("div",qr({},Qs(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Mr("div",qr({},Qs(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Mr("div",qr({},Qs(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Mr("div",qr({},Qs(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},ate=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function qgt(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||ate(n)&&ate(a)))return!1;var n,a;return!0}for(var Kgt={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ste=function(e){return Mr("span",qr({css:Kgt},e))},Wgt={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,o=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&o)return"value ".concat(s," focused, ").concat(d(o,r),".");if(t==="menu"&&u){var f=l?" disabled":"",A="".concat(c?" selected":"").concat(f);return"".concat(s).concat(A,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},Xgt=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,f=l.getOptionLabel,A=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,N=l.screenReaderStatus,C=l.tabSelectsValue,_=l.isLoading,j=l["aria-label"],I=l["aria-live"],T=w.useMemo(function(){return Or(Or({},Wgt),d||{})},[d]),k=w.useMemo(function(){var U,q="";if(t&&T.onChange){var H=t.option,z=t.options,W=t.removedValue,Z=t.removedValues,V=t.value,Y=W||H||(U=V,Array.isArray(U)?null:U),R=Y?f(Y):"",O=z||Z||void 0,K=O?O.map(f):[],J=Or({isDisabled:Y&&g(Y,o),label:R,labels:K},t);q=T.onChange(J)}return q},[t,T,g,o,f]),B=w.useMemo(function(){var U="",q=r||n,H=!!(r&&o&&o.includes(r));if(q&&T.onFocus){var z={focused:q,label:f(q),isDisabled:g(q,o),isSelected:H,options:a,context:q===r?"menu":"value",selectValue:o,isAppleDevice:u};U=T.onFocus(z)}return U},[r,n,f,g,T,a,o,u]),M=w.useMemo(function(){var U="";if(v&&y.length&&!_&&T.onFilter){var q=N({count:a.length});U=T.onFilter({inputValue:A,resultsMessage:q})}return U},[a,A,v,T,y,N,_]),P=(t==null?void 0:t.action)==="initial-input-focus",S=w.useMemo(function(){var U="";if(T.guidance){var q=n?"value":v?"menu":"input";U=T.guidance({"aria-label":j,context:q,isDisabled:r&&g(r,o),isMulti:m,isSearchable:x,tabSelectsValue:C,isInitialFocus:P})}return U},[j,r,n,m,g,x,v,T,o,C,P]),L=Mr(w.Fragment,null,Mr("span",{id:"aria-selection"},k),Mr("span",{id:"aria-focused"},B),Mr("span",{id:"aria-results"},M),Mr("span",{id:"aria-guidance"},S));return Mr(w.Fragment,null,Mr(ste,{id:c},P&&L),Mr(ste,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!P&&L))},GO=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Ygt=new RegExp("["+GO.map(function(e){return e.letters}).join("")+"]","g"),Bge={},qO=0;qO<GO.length;qO++)for(var KO=GO[qO],WO=0;WO<KO.letters.length;WO++)Bge[KO.letters[WO]]=KO.base;var Ige=function(e){return e.replace(Ygt,function(t){return Bge[t]})},Jgt=function(e,t){t===void 0&&(t=qgt);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}(Ige),ite=function(e){return e.replace(/^\s+|\s+$/g,"")},Zgt=function(e){return"".concat(e.label," ").concat(e.value)},ext=["innerRef"];function txt(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var l=Object.entries(n).filter(function(c){var u=Ao(c,1)[0];return!s.includes(u)});return l.reduce(function(c,u){var d=Ao(u,2),f=d[0],A=d[1];return c[f]=A,c},{})}(Bh(e,ext),"onExited","in","enter","exit","appear");return Mr("input",qr({ref:t},r,{css:LH({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var ote=["boxSizing","height","overflow","paddingRight","position"],lte={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function cte(e){e.preventDefault()}function ute(e){e.stopPropagation()}function dte(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function fte(){return"ontouchstart"in window||navigator.maxTouchPoints}var hte=!(typeof window>"u"||!window.document||!window.document.createElement),a2=0,hb={capture:!1,passive:!1},rxt=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},nxt={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function axt(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(o){var l=o.isEnabled,c=o.onBottomArrive,u=o.onBottomLeave,d=o.onTopArrive,f=o.onTopLeave,A=w.useRef(!1),m=w.useRef(!1),g=w.useRef(0),x=w.useRef(null),v=w.useCallback(function(I,T){if(x.current!==null){var k=x.current,B=k.scrollTop,M=k.scrollHeight,P=k.clientHeight,S=x.current,L=T>0,U=M-P-B,q=!1;U>T&&A.current&&(u&&u(I),A.current=!1),L&&m.current&&(f&&f(I),m.current=!1),L&&T>U?(c&&!A.current&&c(I),S.scrollTop=M,q=!0,A.current=!0):!L&&-T>B&&(d&&!m.current&&d(I),S.scrollTop=0,q=!0,m.current=!0),q&&function(H){H.cancelable&&H.preventDefault(),H.stopPropagation()}(I)}},[c,u,d,f]),y=w.useCallback(function(I){v(I,I.deltaY)},[v]),N=w.useCallback(function(I){g.current=I.changedTouches[0].clientY},[]),C=w.useCallback(function(I){var T=g.current-I.changedTouches[0].clientY;v(I,T)},[v]),_=w.useCallback(function(I){if(I){var T=!!Cgt&&{passive:!1};I.addEventListener("wheel",y,T),I.addEventListener("touchstart",N,T),I.addEventListener("touchmove",C,T)}},[C,N,y]),j=w.useCallback(function(I){I&&(I.removeEventListener("wheel",y,!1),I.removeEventListener("touchstart",N,!1),I.removeEventListener("touchmove",C,!1))},[C,N,y]);return w.useEffect(function(){if(l){var I=x.current;return _(I),function(){j(I)}}},[l,_,j]),function(I){x.current=I}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(o){var l=o.isEnabled,c=o.accountForScrollbars,u=c===void 0||c,d=w.useRef({}),f=w.useRef(null),A=w.useCallback(function(g){if(hte){var x=document.body,v=x&&x.style;if(u&&ote.forEach(function(_){var j=v&&v[_];d.current[_]=j}),u&&a2<1){var y=parseInt(d.current.paddingRight,10)||0,N=document.body?document.body.clientWidth:0,C=window.innerWidth-N+y||0;Object.keys(lte).forEach(function(_){var j=lte[_];v&&(v[_]=j)}),v&&(v.paddingRight="".concat(C,"px"))}x&&fte()&&(x.addEventListener("touchmove",cte,hb),g&&(g.addEventListener("touchstart",dte,hb),g.addEventListener("touchmove",ute,hb))),a2+=1}},[u]),m=w.useCallback(function(g){if(hte){var x=document.body,v=x&&x.style;a2=Math.max(a2-1,0),u&&a2<1&&ote.forEach(function(y){var N=d.current[y];v&&(v[y]=N)}),x&&fte()&&(x.removeEventListener("touchmove",cte,hb),g&&(g.removeEventListener("touchstart",dte,hb),g.removeEventListener("touchmove",ute,hb)))}},[u]);return w.useEffect(function(){if(l){var g=f.current;return A(g),function(){m(g)}}},[l,A,m]),function(g){f.current=g}}({isEnabled:r});return Mr(w.Fragment,null,r&&Mr("div",{onClick:rxt,css:nxt}),t(function(o){a(o),s(o)}))}var sxt={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},ixt=function(e){var t=e.name,r=e.onFocus;return Mr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:sxt,value:"",onChange:function(){}})};function LL(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Dge(){return LL(/^Mac/i)}function oxt(){return LL(/^iPhone/i)||LL(/^iPad/i)||Dge()&&navigator.maxTouchPoints>1}var lxt,cxt={clearIndicator:Rgt,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,o=a.borderRadius;return Or({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:Fgt,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Or({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Or({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,o=a.colors;return Or(Or({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},Vgt),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,o=a.spacing.baseUnit;return Or({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*o})},loadingMessage:Igt,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,o=a.spacing,l=a.colors;return Or(($b(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),$b(r,"position","absolute"),$b(r,"width","100%"),$b(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Or({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return Or({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return Or({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,o=e.isFocused;return Or({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:Bgt,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,o=s.spacing,l=s.colors;return Or({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?l.primary:n?l.primary25:"transparent",color:r?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Or({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return Or({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return Or({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},XO={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},uxt={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:ete(),captureMenuScroll:!ete(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Or({ignoreCase:!0,ignoreAccents:!0,stringify:Zgt,trim:!0,matchFrom:"any"},lxt),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,o=r.trim,l=r.matchFrom,c=o?ite(t):t,u=o?ite(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=Jgt(c),u=Ige(u)),l==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Ate(e,t,r,n){return{type:"option",data:t,isDisabled:Pge(e,t,r),isSelected:Fge(e,t,r),label:Oge(e,t),value:A4(e,t),index:n}}function Wk(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(o,l){return Ate(e,o,t,l)}).filter(function(o){return gte(e,o)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=Ate(e,r,t,n);return gte(e,s)?s:void 0}).filter(Egt)}function mte(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,BH(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function pte(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,BH(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function gte(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,o=t.label,l=t.value;return(!Lge(e)||!s)&&Rge(e,{label:o,value:l,data:a},n)}var YO=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Oge=function(e,t){return e.getOptionLabel(t)},A4=function(e,t){return e.getOptionValue(t)};function Pge(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function Fge(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=A4(e,t);return r.some(function(a){return A4(e,a)===n})}function Rge(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Lge=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},dxt=1,Mge=function(e){(function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),l&&SL(o,l)})(s,w.Component);var t,r,n,a=Lpt(s);function s(o){var l;if(function(f,A){if(!(f instanceof A))throw new TypeError("Cannot call a class as a function")}(this,s),(l=a.call(this,o)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=Dge()||oxt(),l.controlRef=null,l.getControlRef=function(f){l.controlRef=f},l.focusedOptionRef=null,l.getFocusedOptionRef=function(f){l.focusedOptionRef=f},l.menuListRef=null,l.getMenuListRef=function(f){l.menuListRef=f},l.inputRef=null,l.getInputRef=function(f){l.inputRef=f},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(f,A){var m=l.props,g=m.onChange,x=m.name;A.name=x,l.ariaOnChange(f,A),g(f,A)},l.setValue=function(f,A,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(f,{action:A,option:m})},l.selectOption=function(f){var A=l.props,m=A.blurInputOnSelect,g=A.isMulti,x=A.name,v=l.state.selectValue,y=g&&l.isOptionSelected(f,v),N=l.isOptionDisabled(f,v);if(y){var C=l.getOptionValue(f);l.setValue(v.filter(function(_){return l.getOptionValue(_)!==C}),"deselect-option",f)}else{if(N)return void l.ariaOnChange(f,{action:"select-option",option:f,name:x});g?l.setValue([].concat(BH(v),[f]),"select-option",f):l.setValue(f,"select-option")}m&&l.blurInput()},l.removeValue=function(f){var A=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(f),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=Kk(A,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:f}),l.focusInput()},l.clearValue=function(){var f=l.state.selectValue;l.onChange(Kk(l.props.isMulti,[],null),{action:"clear",removedValues:f})},l.popValue=function(){var f=l.props.isMulti,A=l.state.selectValue,m=A[A.length-1],g=A.slice(0,A.length-1),x=Kk(f,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(f){return YO(l.state.focusableOptionsWithIds,f)},l.getFocusableOptionsWithIds=function(){return pte(Wk(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var f=arguments.length,A=new Array(f),m=0;m<f;m++)A[m]=arguments[m];return ygt.apply(void 0,[l.props.classNamePrefix].concat(A))},l.getOptionLabel=function(f){return Oge(l.props,f)},l.getOptionValue=function(f){return A4(l.props,f)},l.getStyles=function(f,A){var m=l.props.unstyled,g=cxt[f](A,m);g.boxSizing="border-box";var x=l.props.styles[f];return x?x(g,A):g},l.getClassNames=function(f,A){var m,g;return(m=(g=l.props.classNames)[f])===null||m===void 0?void 0:m.call(g,A)},l.getElementId=function(f){return"".concat(l.state.instancePrefix,"-").concat(f)},l.getComponents=function(){return f=l.props,Or(Or({},Ggt),f.components);var f},l.buildCategorizedOptions=function(){return Wk(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return mte(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(f,A){l.setState({ariaSelection:Or({value:f},A)})},l.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(f){l.blockOptionHover=!1},l.onControlMouseDown=function(f){if(!f.defaultPrevented){var A=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&l.onMenuClose():A&&l.openMenu("first"):(A&&(l.openAfterFocus=!0),l.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},l.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||l.props.isDisabled)){var A=l.props,m=A.isMulti,g=A.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),f.preventDefault()}},l.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(l.clearValue(),f.preventDefault(),l.openAfterFocus=!1,f.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(f){typeof l.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&ZT(f.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(f)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(f){var A=f.touches,m=A&&A.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(f){var A=f.touches,m=A&&A.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(f){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(f.target)&&l.menuListRef&&!l.menuListRef.contains(f.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(f){l.userIsDragging||l.onControlMouseDown(f)},l.onClearIndicatorTouchEnd=function(f){l.userIsDragging||l.onClearIndicatorMouseDown(f)},l.onDropdownIndicatorTouchEnd=function(f){l.userIsDragging||l.onDropdownIndicatorMouseDown(f)},l.handleInputChange=function(f){var A=l.props.inputValue,m=f.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:A}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(f){l.props.onFocus&&l.props.onFocus(f),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(f){var A=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(f),l.onInputChange("",{action:"input-blur",prevInputValue:A}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(f){if(!l.blockOptionHover&&l.state.focusedOption!==f){var A=l.getFocusableOptions().indexOf(f);l.setState({focusedOption:f,focusedOptionId:A>-1?l.getFocusedOptionId(f):null})}},l.shouldHideSelectedOptions=function(){return Lge(l.props)},l.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),l.focus()},l.onKeyDown=function(f){var A=l.props,m=A.isMulti,g=A.backspaceRemovesValue,x=A.escapeClearsValue,v=A.inputValue,y=A.isClearable,N=A.isDisabled,C=A.menuIsOpen,_=A.onKeyDown,j=A.tabSelectsValue,I=A.openMenuOnFocus,T=l.state,k=T.focusedOption,B=T.focusedValue,M=T.selectValue;if(!(N||typeof _=="function"&&(_(f),f.defaultPrevented))){switch(l.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(B)l.removeValue(B);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||f.shiftKey||!C||!j||!k||I&&l.isOptionSelected(k,M))return;l.selectOption(k);break;case"Enter":if(f.keyCode===229)break;if(C){if(!k||l.isComposing)return;l.selectOption(k);break}return;case"Escape":C?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!C){l.openMenu("first");break}if(!k)return;l.selectOption(k);break;case"ArrowUp":C?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":C?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!C)return;l.focusOption("pageup");break;case"PageDown":if(!C)return;l.focusOption("pagedown");break;case"Home":if(!C)return;l.focusOption("first");break;case"End":if(!C)return;l.focusOption("last");break;default:return}f.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++dxt),l.state.selectValue=Yee(o.value),o.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),u=l.buildFocusableOptions(),d=u.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=u[d],l.state.focusedOptionId=YO(c,u[d])}return l}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Zee(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var l=this.props,c=l.isDisabled,u=l.menuIsOpen,d=this.state.isFocused;(d&&!c&&o.isDisabled||d&&u&&!o.menuIsOpen)&&this.focusInput(),d&&c&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!o.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Zee(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,l){this.props.onInputChange(o,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var l=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),A=o==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(u[0]);m>-1&&(A=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[A],focusedOptionId:this.getFocusedOptionId(f[A])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(o){var l=this.state,c=l.selectValue,u=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,A=-1;if(c.length){switch(o){case"previous":A=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(A=d+1)}this.setState({inputIsHidden:A!==-1,focusedValue:c[A]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),o==="up"?d=f>0?f-1:u.length-1:o==="down"?d=(f+1)%u.length:o==="pageup"?(d=f-l)<0&&(d=0):o==="pagedown"?(d=f+l)>u.length-1&&(d=u.length-1):o==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(XO):Or(Or({},XO),this.props.theme):XO}},{key:"getCommonProps",value:function(){var o=this.clearValue,l=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,A=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:o,cx:l,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:A,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,l=o.isClearable,c=o.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(o,l){return Pge(this.props,o,l)}},{key:"isOptionSelected",value:function(o,l){return Fge(this.props,o,l)}},{key:"filterOption",value:function(o,l){return Rge(this.props,o,l)}},{key:"formatOptionLabel",value:function(o,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(o,{context:l,inputValue:c,selectValue:u})}return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,l=o.isDisabled,c=o.isSearchable,u=o.inputId,d=o.inputValue,f=o.tabIndex,A=o.form,m=o.menuIsOpen,g=o.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,N=v.ariaSelection,C=this.commonProps,_=u||this.getElementId("input"),j=Or(Or(Or({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(N==null?void 0:N.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?w.createElement(x,qr({},C,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:_,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:A,type:"text",value:d},j)):w.createElement(txt,qr({id:_,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:f4,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:A,value:""},j))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,l=this.getComponents(),c=l.MultiValue,u=l.MultiValueContainer,d=l.MultiValueLabel,f=l.MultiValueRemove,A=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,N=x.isMulti,C=x.inputValue,_=x.placeholder,j=this.state,I=j.selectValue,T=j.focusedValue,k=j.isFocused;if(!this.hasValue()||!v)return C?null:w.createElement(m,qr({},g,{key:"placeholder",isDisabled:y,isFocused:k,innerProps:{id:this.getElementId("placeholder")}}),_);if(N)return I.map(function(M,P){var S=M===T,L="".concat(o.getOptionLabel(M),"-").concat(o.getOptionValue(M));return w.createElement(c,qr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:S,isDisabled:y,key:L,index:P,removeProps:{onClick:function(){return o.removeValue(M)},onTouchEnd:function(){return o.removeValue(M)},onMouseDown:function(U){U.preventDefault()}},data:M}),o.formatOptionLabel(M,"value"))});if(C)return null;var B=I[0];return w.createElement(A,qr({},g,{data:B,isDisabled:y}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||u||!this.hasValue()||d)return null;var A={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,qr({},l,{innerProps:A,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return o&&d?w.createElement(o,qr({},l,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),l=o.DropdownIndicator,c=o.IndicatorSeparator;if(!l||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return w.createElement(c,qr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents().DropdownIndicator;if(!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,qr({},l,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var o=this,l=this.getComponents(),c=l.Group,u=l.GroupHeading,d=l.Menu,f=l.MenuList,A=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,N=this.props,C=N.captureMenuScroll,_=N.inputValue,j=N.isLoading,I=N.loadingMessage,T=N.minMenuHeight,k=N.maxMenuHeight,B=N.menuIsOpen,M=N.menuPlacement,P=N.menuPosition,S=N.menuPortalTarget,L=N.menuShouldBlockScroll,U=N.menuShouldScrollIntoView,q=N.noOptionsMessage,H=N.onMenuScrollToTop,z=N.onMenuScrollToBottom;if(!B)return null;var W,Z=function(K,J){var ce=K.type,oe=K.data,re=K.isDisabled,ue=K.isSelected,le=K.label,ve=K.value,X=y===oe,Ee=re?void 0:function(){return o.onOptionHover(oe)},Be=re?void 0:function(){return o.selectOption(oe)},je="".concat(o.getElementId("option"),"-").concat(J),fe={id:je,onClick:Be,onMouseMove:Ee,onMouseOver:Ee,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:ue};return w.createElement(x,qr({},v,{innerProps:fe,data:oe,isDisabled:re,isSelected:ue,key:je,label:le,type:ce,value:ve,isFocused:X,innerRef:X?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(K.data,"menu"))};if(this.hasOptions())W=this.getCategorizedOptions().map(function(K){if(K.type==="group"){var J=K.data,ce=K.options,oe=K.index,re="".concat(o.getElementId("group"),"-").concat(oe),ue="".concat(re,"-heading");return w.createElement(c,qr({},v,{key:re,data:J,options:ce,Heading:u,headingProps:{id:ue,data:K.data},label:o.formatGroupLabel(K.data)}),K.options.map(function(le){return Z(le,"".concat(oe,"-").concat(le.index))}))}if(K.type==="option")return Z(K,"".concat(K.index))});else if(j){var V=I({inputValue:_});if(V===null)return null;W=w.createElement(m,v,V)}else{var Y=q({inputValue:_});if(Y===null)return null;W=w.createElement(g,v,Y)}var R={minMenuHeight:T,maxMenuHeight:k,menuPlacement:M,menuPosition:P,menuShouldScrollIntoView:U},O=w.createElement(_gt,qr({},v,R),function(K){var J=K.ref,ce=K.placerProps,oe=ce.placement,re=ce.maxHeight;return w.createElement(d,qr({},v,R,{innerRef:J,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:j,placement:oe}),w.createElement(axt,{captureEnabled:C,onTopArrive:H,onBottomArrive:z,lockEnabled:L},function(ue){return w.createElement(f,qr({},v,{innerRef:function(le){o.getMenuListRef(le),ue(le)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:o.getElementId("listbox")},isLoading:j,maxHeight:re,focusedOption:y}),W)}))});return S||P==="fixed"?w.createElement(A,qr({},v,{appendTo:S,controlElement:this.controlRef,menuPlacement:M,menuPosition:P}),O):O}},{key:"renderFormField",value:function(){var o=this,l=this.props,c=l.delimiter,u=l.isDisabled,d=l.isMulti,f=l.name,A=l.required,m=this.state.selectValue;if(A&&!this.hasValue()&&!u)return w.createElement(ixt,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=m.map(function(y){return o.getOptionValue(y)}).join(c);return w.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,N){return w.createElement("input",{key:"i-".concat(N),name:f,type:"hidden",value:o.getOptionValue(y)})}):w.createElement("input",{name:f,type:"hidden",value:""});return w.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return w.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,l=this.state,c=l.ariaSelection,u=l.focusedOption,d=l.focusedValue,f=l.isFocused,A=l.selectValue,m=this.getFocusableOptions();return w.createElement(Xgt,qr({},o,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:A,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),l=o.Control,c=o.IndicatorsContainer,u=o.SelectContainer,d=o.ValueContainer,f=this.props,A=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return w.createElement(u,qr({},y,{className:A,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),w.createElement(l,qr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),w.createElement(d,qr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),w.createElement(c,qr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,u=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,A=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=o.options,v=o.value,y=o.menuIsOpen,N=o.inputValue,C=o.isMulti,_=Yee(v),j={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||N!==c.inputValue)){var I=y?function(L,U){return mte(Wk(L,U))}(o,_):[],T=y?pte(Wk(o,_),"".concat(g,"-option")):[],k=u?function(L,U){var q=L.focusedValue,H=L.selectValue.indexOf(q);if(H>-1){if(U.indexOf(q)>-1)return q;if(H<U.length)return U[H]}return null}(l,_):null,B=function(L,U){var q=L.focusedOption;return q&&U.indexOf(q)>-1?q:U[0]}(l,I);j={selectValue:_,focusedOption:B,focusedOptionId:YO(T,B),focusableOptionsWithIds:T,focusedValue:k,clearFocusValueOnUpdate:!1}}var M=d!=null&&o!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},P=f,S=A&&m;return A&&!S&&(P={value:Kk(C,_,_[0]||null),options:_,action:"initial-input-focus"},S=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(P=null),Or(Or(Or({},j),M),{},{prevProps:o,ariaSelection:P,prevWasFocused:S})}}],r&&Iee(t.prototype,r),n&&Iee(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();Mge.defaultProps=uxt;var fxt=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],hxt=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],MH=ya(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Axt=ya(function(e){var t=MH.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),Uge=ya(function(e){var t=MH.default;e.exports=function(r){var n=Axt(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),mxt=ya(function(e){e.exports=function(t,r,n){return(r=Uge(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});ya(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){mxt(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),ya(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),ya(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,Uge(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var pxt=ya(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});ya(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&pxt(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var xte=ya(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),gxt=ya(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),xxt=ya(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),vxt=ya(function(e){var t=MH.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xxt(r)},e.exports.__esModule=!0,e.exports.default=e.exports});ya(function(e){e.exports=function(t){var r=gxt();return function(){var n,a=xte(t);if(r){var s=xte(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return vxt(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var ML=ya(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),bxt=ya(function(e){e.exports=function(t){if(Array.isArray(t))return ML(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),yxt=ya(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Hge=ya(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return ML(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ML(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),wxt=ya(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ya(function(e){e.exports=function(t){return bxt(t)||yxt(t)||Hge(t)||wxt()},e.exports.__esModule=!0,e.exports.default=e.exports});var Nxt=ya(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Cxt=ya(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),Ext=ya(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ya(function(e){e.exports=function(t,r){return Nxt(t)||Cxt(t,r)||Hge(t,r)||Ext()},e.exports.__esModule=!0,e.exports.default=e.exports});var jxt=ya(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});ya(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=jxt(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),ya(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var kxt=w.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,o=s!==void 0&&s,l=a.cacheOptions,c=l!==void 0&&l,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,A=a.onInputChange,m=a.filterOption,g=m===void 0?null:m,x=Bh(a,hxt),v=x.inputValue,y=w.useRef(void 0),N=w.useRef(!1),C=Ao(w.useState(Array.isArray(o)?o:void 0),2),_=C[0],j=C[1],I=Ao(w.useState(v!==void 0?v:""),2),T=I[0],k=I[1],B=Ao(w.useState(o===!0),2),M=B[0],P=B[1],S=Ao(w.useState(void 0),2),L=S[0],U=S[1],q=Ao(w.useState([]),2),H=q[0],z=q[1],W=Ao(w.useState(!1),2),Z=W[0],V=W[1],Y=Ao(w.useState({}),2),R=Y[0],O=Y[1],K=Ao(w.useState(void 0),2),J=K[0],ce=K[1],oe=Ao(w.useState(void 0),2),re=oe[0],ue=oe[1];c!==re&&(O({}),ue(c)),o!==J&&(j(Array.isArray(o)?o:void 0),ce(o)),w.useEffect(function(){return N.current=!0,function(){N.current=!1}},[]);var le=w.useCallback(function(Ee,Be){if(!u)return Be();var je=u(Ee,Be);je&&typeof je.then=="function"&&je.then(Be,function(){return Be()})},[u]);w.useEffect(function(){o===!0&&le(T,function(Ee){N.current&&(j(Ee||[]),P(!!y.current))})},[]);var ve=w.useCallback(function(Ee,Be){var je=function(ye,Ae,se){if(se){var ne=se(ye,Ae);if(typeof ne=="string")return ne}return ye}(Ee,Be,A);if(!je)return y.current=void 0,k(""),U(""),z([]),P(!1),void V(!1);if(c&&R[je])k(je),U(je),z(R[je]),P(!1),V(!1);else{var fe=y.current={};k(je),P(!0),V(!L),le(je,function(ye){N&&fe===y.current&&(y.current=void 0,P(!1),U(je),z(ye||[]),V(!1),O(ye?Or(Or({},R),{},$b({},je,ye)):R))})}},[c,le,L,R,A]),X=Z?[]:T&&L?H:_||[];return Or(Or({},x),{},{options:X,isLoading:M||f,onInputChange:ve,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,o=s===void 0?"":s,l=a.defaultMenuIsOpen,c=l!==void 0&&l,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,A=a.menuIsOpen,m=a.onChange,g=a.onInputChange,x=a.onMenuClose,v=a.onMenuOpen,y=a.value,N=Bh(a,fxt),C=Ao(w.useState(f!==void 0?f:o),2),_=C[0],j=C[1],I=Ao(w.useState(A!==void 0?A:c),2),T=I[0],k=I[1],B=Ao(w.useState(y!==void 0?y:d),2),M=B[0],P=B[1],S=w.useCallback(function(Z,V){typeof m=="function"&&m(Z,V),P(Z)},[m]),L=w.useCallback(function(Z,V){var Y;typeof g=="function"&&(Y=g(Z,V)),j(Y!==void 0?Y:Z)},[g]),U=w.useCallback(function(){typeof v=="function"&&v(),k(!0)},[v]),q=w.useCallback(function(){typeof x=="function"&&x(),k(!1)},[x]),H=f!==void 0?f:_,z=A!==void 0?A:T,W=y!==void 0?y:M;return Or(Or({},N),{},{inputValue:H,menuIsOpen:z,onChange:S,onInputChange:L,onMenuClose:q,onMenuOpen:U,value:W})}(r);return w.createElement(Mge,qr({ref:t},n))}),Sxt=kxt,_xt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var o=s[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r},zb;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(zb||(zb={}));class Wg{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:A="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=A,this.version=m,Wg.instance){if(!_xt(this.options,Wg.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Wg.instance.options)}`);return Wg.instance}Wg.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?zb.FAILURE:this.done?zb.SUCCESS:this.loading?zb.LOADING:zb.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var Txt=function(e,t,r){var n,a=e.bounds,s=e.location,o=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var A=0;for(f=Object.getOwnPropertySymbols(c);A<f.length;A++)u.indexOf(f[A])<0&&Object.prototype.propertyIsEnumerable.call(c,f[A])&&(d[f[A]]=c[f[A]])}return d}(e,["bounds","location"]),l=Nx({input:t},o);return r&&(l.sessionToken=r),a&&(l.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),A=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,A++)f[A]=m[g];return f}([void 0],a)))),s&&(l.location=new google.maps.LatLng(s)),l},Bxt=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,o=e.withSessionToken,l=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,A=w.useRef(null),m=w.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=w.useRef(!1),y=w.useRef(null),N=w.useRef(!1),C=w.useRef(c);C.current=c;var _=w.useCallback(function(){clearTimeout(y.current),clearTimeout(A.current),A.current=null,m.current=[],y.current=null,v.current=!1},[]);w.useEffect(function(){return N.current=!1,function(){N.current=!0}},[]);var j=w.useCallback(function(){for(var T=[],k=0;k<arguments.length;k++)T[k]=arguments[k];m.current=T,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(C.current.apply(C,T),v.current=!0),y.current=setTimeout(function(){var B=!0;g&&v.current&&(B=!1),_(),!N.current&&x&&B&&C.current.apply(C,T)},u),f&&!A.current&&x&&(A.current=setTimeout(function(){var B=m.current;_(),N.current||C.current.apply(null,B)},f))},[f,u,_,g,x]),I=w.useCallback(function(){y.current&&(C.current.apply(null,m.current),_())},[_]);return[j,_,I]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=Nx({},t);a.getPlacePredictions(Txt(d,c,o&&s),function(f){u((f||[]).map(function(A){return{label:A.description,value:A}}))})},r)[0];return l},vte=w.forwardRef(function(e,t){var r,n,a,s,o,l,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,N=x.onLoadFailed,C=w.useState(void 0),_=C[0],j=C[1],I=w.useState(void 0),T=I[0],k=I[1],B=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");j(new window.google.maps.places.AutocompleteService),k(new google.maps.places.AutocompleteSessionToken)};return w.useEffect(function(){v?Ppt(void 0,void 0,void 0,function(){var M;return Fpt(this,function(P){switch(P.label){case 0:if(!v)return[2];P.label=1;case 1:return P.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Wg(Nx({apiKey:v},Nx({libraries:["places"]},y))).load()];case 2:P.sent(),P.label=3;case 3:return B(),[3,5];case 4:return M=P.sent(),typeof N=="function"&&N(M),[3,5];case 5:return[2]}})}):B()},[]),{placesService:_,sessionToken:T,setSessionToken:k}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,A=d.sessionToken,m=d.setSessionToken,g=Bxt({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(o=e.debounce)!==null&&o!==void 0?o:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:f,sessionToken:A,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return w.useImperativeHandle(t,function(){return{getSessionToken:function(){return A},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[A]),At.createElement(Sxt,Nx({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var UL=function(e,t){return UL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},UL(e,t)};function Qf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");UL(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var HL=function(){return HL=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},HL.apply(this,arguments)};function Xl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,[])).next())})}function xl(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Xk(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var PA=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),eB=function(e,t){return PA.fromClientRect(e,t.getBoundingClientRect())},Ixt=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new PA(0,0,n,a)},tB=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},fi=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},bte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dxt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yk=0;Yk<bte.length;Yk++)Dxt[bte.charCodeAt(Yk)]=Yk;var yte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jk=0;Jk<yte.length;Jk++)D2[yte.charCodeAt(Jk)]=Jk;var Oxt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=D2[e.charCodeAt(n)],o=D2[e.charCodeAt(n+1)],l=D2[e.charCodeAt(n+2)],c=D2[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},Pxt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},Fxt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},jx=5,UH=11,JO=2,Rxt=UH-jx,Qge=65536>>jx,Lxt=1<<jx,ZO=Lxt-1,Mxt=1024>>jx,Uxt=Qge+Mxt,Hxt=Uxt,Qxt=32,Vxt=Hxt+Qxt,$xt=65536>>UH,zxt=1<<Rxt,Gxt=zxt-1,wte=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},qxt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Kxt=function(e,t){var r=Oxt(e),n=Array.isArray(r)?Fxt(r):new Uint32Array(r),a=Array.isArray(r)?Pxt(r):new Uint16Array(r),s=24,o=wte(a,s/2,n[4]/2),l=n[5]===2?wte(a,(s+n[4])/2):qxt(n,Math.ceil((s+n[4])/4));return new Wxt(n[0],n[1],n[2],n[3],o,l)},Wxt=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>jx],r=(r<<JO)+(t&ZO),this.data[r];if(t<=65535)return r=this.index[Qge+(t-55296>>jx)],r=(r<<JO)+(t&ZO),this.data[r];if(t<this.highStart)return r=Vxt-$xt+(t>>UH),r=this.index[r],r+=t>>jx&Gxt,r=this.index[r],r=(r<<JO)+(t&ZO),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Nte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xxt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zk=0;Zk<Nte.length;Zk++)Xxt[Nte.charCodeAt(Zk)]=Zk;var Yxt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Cte=50,Jxt=1,Vge=2,$ge=3,Zxt=4,evt=5,Ete=7,zge=8,jte=9,np=10,QL=11,kte=12,VL=13,tvt=14,O2=15,$L=16,eS=17,s2=18,rvt=19,Ste=20,zL=21,i2=22,eP=23,Ab=24,hu=25,P2=26,F2=27,mb=28,nvt=29,Xg=30,avt=31,tS=32,rS=33,GL=34,qL=35,KL=36,jC=37,WL=38,c5=39,u5=40,tP=41,Gge=42,svt=43,ivt=[9001,65288],qge="!",Fn="",nS="",XL=Kxt(Yxt),M0=[Xg,KL],YL=[Jxt,Vge,$ge,evt],Kge=[np,zge],_te=[F2,P2],ovt=YL.concat(Kge),Tte=[WL,c5,u5,GL,qL],lvt=[O2,VL],cvt=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,o){var l=XL.get(s);if(l>Cte?(a.push(!0),l-=Cte):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push($L);if(l===Zxt||l===QL){if(o===0)return n.push(o),r.push(Xg);var c=r[o-1];return ovt.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(Xg))}if(n.push(o),l===avt)return r.push(t==="strict"?zL:jC);if(l===Gge||l===nvt)return r.push(Xg);if(l===svt)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(jC):r.push(Xg);r.push(l)}),[n,r,a]},rP=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===t)return!0;if(o!==np)break}if(a===np)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===t)return!0;if(o!==np)break}if(l!==np)break}return!1},Bte=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===np)r--;else return n}return 0},uvt=function(e,t,r,n,a){if(r[n]===0)return Fn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Fn;var o=s-1,l=s+1,c=t[s],u=o>=0?t[o]:0,d=t[l];if(c===Vge&&d===$ge)return Fn;if(YL.indexOf(c)!==-1)return qge;if(YL.indexOf(d)!==-1||Kge.indexOf(d)!==-1)return Fn;if(Bte(s,t)===zge)return nS;if(XL.get(e[s])===QL||(c===tS||c===rS)&&XL.get(e[l])===QL||c===Ete||d===Ete||c===jte||[np,VL,O2].indexOf(c)===-1&&d===jte||[eS,s2,rvt,Ab,mb].indexOf(d)!==-1||Bte(s,t)===i2||rP(eP,i2,s,t)||rP([eS,s2],zL,s,t)||rP(kte,kte,s,t))return Fn;if(c===np)return nS;if(c===eP||d===eP)return Fn;if(d===$L||c===$L)return nS;if([VL,O2,zL].indexOf(d)!==-1||c===tvt||u===KL&&lvt.indexOf(c)!==-1||c===mb&&d===KL||d===Ste||M0.indexOf(d)!==-1&&c===hu||M0.indexOf(c)!==-1&&d===hu||c===F2&&[jC,tS,rS].indexOf(d)!==-1||[jC,tS,rS].indexOf(c)!==-1&&d===P2||M0.indexOf(c)!==-1&&_te.indexOf(d)!==-1||_te.indexOf(c)!==-1&&M0.indexOf(d)!==-1||[F2,P2].indexOf(c)!==-1&&(d===hu||[i2,O2].indexOf(d)!==-1&&t[l+1]===hu)||[i2,O2].indexOf(c)!==-1&&d===hu||c===hu&&[hu,mb,Ab].indexOf(d)!==-1)return Fn;if([hu,mb,Ab,eS,s2].indexOf(d)!==-1)for(var f=s;f>=0;){var A=t[f];if(A===hu)return Fn;if([mb,Ab].indexOf(A)!==-1)f--;else break}if([F2,P2].indexOf(d)!==-1)for(var f=[eS,s2].indexOf(c)!==-1?o:s;f>=0;){var A=t[f];if(A===hu)return Fn;if([mb,Ab].indexOf(A)!==-1)f--;else break}if(WL===c&&[WL,c5,GL,qL].indexOf(d)!==-1||[c5,GL].indexOf(c)!==-1&&[c5,u5].indexOf(d)!==-1||[u5,qL].indexOf(c)!==-1&&d===u5||Tte.indexOf(c)!==-1&&[Ste,P2].indexOf(d)!==-1||Tte.indexOf(d)!==-1&&c===F2||M0.indexOf(c)!==-1&&M0.indexOf(d)!==-1||c===Ab&&M0.indexOf(d)!==-1||M0.concat(hu).indexOf(c)!==-1&&d===i2&&ivt.indexOf(e[l])===-1||M0.concat(hu).indexOf(d)!==-1&&c===s2)return Fn;if(c===tP&&d===tP){for(var m=r[s],g=1;m>0&&(m--,t[m]===tP);)g++;if(g%2!==0)return Fn}return c===tS&&d===rS?Fn:nS},dvt=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=cvt(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[hu,Xg,Gge].indexOf(l)!==-1?jC:l}));var o=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,o]},fvt=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===qge,this.start=n,this.end=a}return e.prototype.slice=function(){return fi.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),hvt=function(e,t){var r=tB(e),n=dvt(r,t),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Fn;u<l&&(d=uvt(r,s,a,++u,o))===Fn;);if(d!==Fn||u===l){var f=new fvt(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Avt=1,mvt=2,DE=4,Ite=8,m4=10,Dte=47,gN=92,pvt=9,gvt=32,aS=34,o2=61,xvt=35,vvt=36,bvt=37,sS=39,iS=40,l2=41,yvt=95,Tc=45,wvt=33,Nvt=60,Cvt=62,Evt=64,jvt=91,kvt=93,Svt=61,_vt=123,oS=63,Tvt=125,Ote=124,Bvt=126,Ivt=128,Pte=65533,nP=42,ix=43,Dvt=44,Ovt=58,Pvt=59,kC=46,Fvt=0,Rvt=8,Lvt=11,Mvt=14,Uvt=31,Hvt=127,vh=-1,Wge=48,Xge=97,Yge=101,Qvt=102,Vvt=117,$vt=122,Jge=65,Zge=69,exe=70,zvt=85,Gvt=90,El=function(e){return e>=Wge&&e<=57},qvt=function(e){return e>=55296&&e<=57343},pb=function(e){return El(e)||e>=Jge&&e<=exe||e>=Xge&&e<=Qvt},Kvt=function(e){return e>=Xge&&e<=$vt},Wvt=function(e){return e>=Jge&&e<=Gvt},Xvt=function(e){return Kvt(e)||Wvt(e)},Yvt=function(e){return e>=Ivt},lS=function(e){return e===m4||e===pvt||e===gvt},p4=function(e){return Xvt(e)||Yvt(e)||e===yvt},Fte=function(e){return p4(e)||El(e)||e===Tc},Jvt=function(e){return e>=Fvt&&e<=Rvt||e===Lvt||e>=Mvt&&e<=Uvt||e===Hvt},$m=function(e,t){return e!==gN?!1:t!==m4},cS=function(e,t,r){return e===Tc?p4(t)||$m(t,r):p4(e)?!0:!!(e===gN&&$m(e,t))},aP=function(e,t,r){return e===ix||e===Tc?El(t)?!0:t===kC&&El(r):El(e===kC?t:e)},Zvt=function(e){var t=0,r=1;(e[t]===ix||e[t]===Tc)&&(e[t]===Tc&&(r=-1),t++);for(var n=[];El(e[t]);)n.push(e[t++]);var a=n.length?parseInt(fi.apply(void 0,n),10):0;e[t]===kC&&t++;for(var s=[];El(e[t]);)s.push(e[t++]);var o=s.length,l=o?parseInt(fi.apply(void 0,s),10):0;(e[t]===Zge||e[t]===Yge)&&t++;var c=1;(e[t]===ix||e[t]===Tc)&&(e[t]===Tc&&(c=-1),t++);for(var u=[];El(e[t]);)u.push(e[t++]);var d=u.length?parseInt(fi.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},ebt={type:2},tbt={type:3},rbt={type:4},nbt={type:13},abt={type:8},sbt={type:21},ibt={type:9},obt={type:10},lbt={type:11},cbt={type:12},ubt={type:14},uS={type:23},dbt={type:1},fbt={type:25},hbt={type:24},Abt={type:26},mbt={type:27},pbt={type:28},gbt={type:29},xbt={type:31},JL={type:32},txe=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(tB(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==JL;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case aS:return this.consumeStringToken(aS);case xvt:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Fte(r)||$m(n,a)){var s=cS(r,n,a)?mvt:Avt,o=this.consumeName();return{type:5,value:o,flags:s}}break;case vvt:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),nbt;break;case sS:return this.consumeStringToken(sS);case iS:return ebt;case l2:return tbt;case nP:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),ubt;break;case ix:if(aP(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Dvt:return rbt;case Tc:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(aP(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(cS(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Tc&&u===Cvt)return this.consumeCodePoint(),this.consumeCodePoint(),hbt;break;case kC:if(aP(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Dte:if(this.peekCodePoint(0)===nP)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===nP&&(d=this.consumeCodePoint(),d===Dte))return this.consumeToken();if(d===vh)return this.consumeToken()}break;case Ovt:return Abt;case Pvt:return mbt;case Nvt:if(this.peekCodePoint(0)===wvt&&this.peekCodePoint(1)===Tc&&this.peekCodePoint(2)===Tc)return this.consumeCodePoint(),this.consumeCodePoint(),fbt;break;case Evt:var f=this.peekCodePoint(0),A=this.peekCodePoint(1),m=this.peekCodePoint(2);if(cS(f,A,m)){var o=this.consumeName();return{type:7,value:o}}break;case jvt:return pbt;case gN:if($m(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case kvt:return gbt;case Svt:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),abt;break;case _vt:return lbt;case Tvt:return cbt;case Vvt:case zvt:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===ix&&(pb(x)||x===oS)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case Ote:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),ibt;if(this.peekCodePoint(0)===Ote)return this.consumeCodePoint(),sbt;break;case Bvt:if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),obt;break;case vh:return JL}return lS(t)?(this.consumeWhiteSpace(),xbt):El(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):p4(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:fi(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();pb(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===oS&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(fi.apply(void 0,t.map(function(c){return c===oS?Wge:c})),16),s=parseInt(fi.apply(void 0,t.map(function(c){return c===oS?exe:c})),16);return{type:30,start:a,end:s}}var o=parseInt(fi.apply(void 0,t),16);if(this.peekCodePoint(0)===Tc&&pb(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];pb(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(fi.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===iS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===iS?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===vh)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===sS||r===aS){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===vh||this.peekCodePoint(0)===l2)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),uS)}for(;;){var a=this.consumeCodePoint();if(a===vh||a===l2)return{type:22,value:fi.apply(void 0,t)};if(lS(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===vh||this.peekCodePoint(0)===l2?(this.consumeCodePoint(),{type:22,value:fi.apply(void 0,t)}):(this.consumeBadUrlRemnants(),uS);if(a===aS||a===sS||a===iS||Jvt(a))return this.consumeBadUrlRemnants(),uS;if(a===gN)if($m(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),uS;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;lS(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===l2||t===vh)return;$m(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=fi.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===vh||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===m4)return this._value.splice(0,n),dbt;if(a===gN){var s=this._value[n+1];s!==vh&&s!==void 0&&(s===m4?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):$m(a,s)&&(r+=this.consumeStringSlice(n),r+=fi(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=DE,n=this.peekCodePoint(0);for((n===ix||n===Tc)&&t.push(this.consumeCodePoint());El(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===kC&&El(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Ite;El(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Zge||n===Yge)&&((a===ix||a===Tc)&&El(s)||El(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Ite;El(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Zvt(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(cS(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===bvt?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(pb(t)){for(var r=fi(t);pb(this.peekCodePoint(0))&&r.length<6;)r+=fi(this.consumeCodePoint());lS(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||qvt(n)||n>1114111?Pte:n}return t===vh?Pte:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(Fte(r))t+=fi(r);else if($m(r,this.peekCodePoint(0)))t+=fi(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),rxe=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new txe;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||bbt(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?JL:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),OE=function(e){return e.type===15},qy=function(e){return e.type===17},La=function(e){return e.type===20},vbt=function(e){return e.type===0},ZL=function(e,t){return La(e)&&e.value===t},nxe=function(e){return e.type!==31},ly=function(e){return e.type!==31&&e.type!==4},l0=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},bbt=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Lp=function(e){return e.type===17||e.type===15},Fi=function(e){return e.type===16||Lp(e)},axe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Xo={type:17,number:0,flags:DE},HH={type:16,number:50,flags:DE},ap={type:16,number:100,flags:DE},R2=function(e,t,r){var n=e[0],a=e[1];return[Za(n,t),Za(typeof a<"u"?a:n,r)]},Za=function(e,t){if(e.type===16)return e.number/100*t;if(OE(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},sxe="deg",ixe="grad",oxe="rad",lxe="turn",rB={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case sxe:return Math.PI*t.number/180;case ixe:return Math.PI/200*t.number;case oxe:return t.number;case lxe:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},cxe=function(e){return e.type===15&&(e.unit===sxe||e.unit===ixe||e.unit===oxe||e.unit===lxe)},uxe=function(e){var t=e.filter(La).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Xo,Xo];case"to top":case"bottom":return kd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Xo,ap];case"to right":case"left":return kd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ap,ap];case"to bottom":case"top":return kd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ap,Xo];case"to left":case"right":return kd(270)}return 0},kd=function(e){return Math.PI*e/180},vp={name:"color",parse:function(e,t){if(t.type===18){var r=ybt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return sp(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return sp(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return sp(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return sp(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var l=hA[t.value.toUpperCase()];if(typeof l<"u")return l}return hA.TRANSPARENT}},bp=function(e){return(255&e)===0},ho=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},sp=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},Rte=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},Lte=function(e,t){var r=t.filter(ly);if(r.length===3){var n=r.map(Rte),a=n[0],s=n[1],o=n[2];return sp(a,s,o,1)}if(r.length===4){var l=r.map(Rte),a=l[0],s=l[1],o=l[2],c=l[3];return sp(a,s,o,c)}return 0};function sP(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var Mte=function(e,t){var r=t.filter(ly),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?kd(n.number):rB.parse(e,n))/(Math.PI*2),c=Fi(a)?a.number/100:0,u=Fi(s)?s.number/100:0,d=typeof o<"u"&&Fi(o)?Za(o,1):1;if(c===0)return sp(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,A=u*2-f,m=sP(A,f,l+1/3),g=sP(A,f,l),x=sP(A,f,l-1/3);return sp(m*255,g*255,x*255,d)},ybt={hsl:Mte,hsla:Mte,rgb:Lte,rgba:Lte},xN=function(e,t){return vp.parse(e,rxe.create(t).parseComponentValue())},hA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},wbt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(La(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Nbt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nB=function(e,t){var r=vp.parse(e,t[0]),n=t[1];return n&&Fi(n)?{color:r,stop:n}:{color:r,stop:null}},Ute=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Xo),n.stop===null&&(n.stop=ap);for(var a=[],s=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=Za(l,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,A=a[u-1],m=(d-A)/(f+1),g=1;g<=f;g++)a[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[v]/t),0)}})},Cbt=function(e,t,r){var n=t/2,a=r/2,s=Za(e[0],t)-n,o=a-Za(e[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},Ebt=function(e,t,r){var n=typeof e=="number"?e:Cbt(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},df=function(e,t){return Math.sqrt(e*e+t*t)},Hte=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=df(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},jbt=function(e,t,r,n,a){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=o=Math.min(df(t,r),df(t,r-a),df(t-n,r),df(t-n,r-a));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=Hte(n,a,t,r,!0),u=c[0],d=c[1];s=df(u-t,(d-r)/l),o=l*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=o=Math.max(df(t,r),df(t,r-a),df(t-n,r),df(t-n,r-a));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=Hte(n,a,t,r,!1),u=f[0],d=f[1];s=df(u-t,(d-r)/l),o=l*s}break}return Array.isArray(e.size)&&(s=Za(e.size[0],n),o=e.size.length===2?Za(e.size[1],a):s),[s,o]},kbt=function(e,t){var r=kd(180),n=[];return l0(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=uxe(a);return}else if(cxe(o)){r=rB.parse(e,o);return}}var l=nB(e,a);n.push(l)}),{angle:r,stops:n,type:1}},dS=function(e,t){var r=kd(180),n=[];return l0(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=uxe(a);return}else if(cxe(o)){r=(rB.parse(e,o)+kd(270))%kd(360);return}}var l=nB(e,a);n.push(l)}),{angle:r,stops:n,type:1}},Sbt=function(e,t){var r=kd(180),n=[],a=1,s=0,o=3,l=[];return l0(t).forEach(function(c,u){var d=c[0];if(u===0){if(La(d)&&d.value==="linear"){a=1;return}else if(La(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=vp.parse(e,d.values[0]);n.push({stop:Xo,color:f})}else if(d.name==="to"){var f=vp.parse(e,d.values[0]);n.push({stop:ap,color:f})}else if(d.name==="color-stop"){var A=d.values.filter(ly);if(A.length===2){var f=vp.parse(e,A[1]),m=A[0];qy(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),a===1?{angle:(r+kd(180))%kd(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},dxe="closest-side",fxe="farthest-side",hxe="closest-corner",Axe="farthest-corner",mxe="circle",pxe="ellipse",gxe="cover",xxe="contain",_bt=function(e,t){var r=0,n=3,a=[],s=[];return l0(t).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,A){if(u)if(La(A))switch(A.value){case"center":return s.push(HH),f;case"top":case"left":return s.push(Xo),f;case"right":case"bottom":return s.push(ap),f}else(Fi(A)||Lp(A))&&s.push(A);else if(La(A))switch(A.value){case mxe:return r=0,!1;case pxe:return r=1,!1;case"at":return u=!0,!1;case dxe:return n=0,!1;case gxe:case fxe:return n=1,!1;case xxe:case hxe:return n=2,!1;case Axe:return n=3,!1}else if(Lp(A)||Fi(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return f},c)}if(c){var d=nB(e,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},fS=function(e,t){var r=0,n=3,a=[],s=[];return l0(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(La(f))switch(f.value){case"center":return s.push(HH),!1;case"top":case"left":return s.push(Xo),!1;case"right":case"bottom":return s.push(ap),!1}else if(Fi(f)||Lp(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(La(f))switch(f.value){case mxe:return r=0,!1;case pxe:return r=1,!1;case xxe:case dxe:return n=0,!1;case fxe:return n=1,!1;case hxe:return n=2,!1;case gxe:case Axe:return n=3,!1}else if(Lp(f)||Fi(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=nB(e,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},Tbt=function(e){return e.type===1},Bbt=function(e){return e.type===2},QH={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=vxe[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Ibt(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!vxe[e.name])}var vxe={"linear-gradient":kbt,"-moz-linear-gradient":dS,"-ms-linear-gradient":dS,"-o-linear-gradient":dS,"-webkit-linear-gradient":dS,"radial-gradient":_bt,"-moz-radial-gradient":fS,"-ms-radial-gradient":fS,"-o-radial-gradient":fS,"-webkit-radial-gradient":fS,"-webkit-gradient":Sbt},Dbt={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return ly(n)&&Ibt(n)}).map(function(n){return QH.parse(e,n)})}},Obt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(La(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Pbt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return l0(t).map(function(r){return r.filter(Fi)}).map(axe)}},Fbt={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return l0(t).map(function(r){return r.filter(La).map(function(n){return n.value}).join(" ")}).map(Rbt)}},Rbt=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},C1;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(C1||(C1={}));var Lbt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return l0(t).map(function(r){return r.filter(Mbt)})}},Mbt=function(e){return La(e)||Fi(e)},aB=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Ubt=aB("top"),Hbt=aB("right"),Qbt=aB("bottom"),Vbt=aB("left"),sB=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return axe(r.filter(Fi))}}},$bt=sB("top-left"),zbt=sB("top-right"),Gbt=sB("bottom-right"),qbt=sB("bottom-left"),iB=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Kbt=iB("top"),Wbt=iB("right"),Xbt=iB("bottom"),Ybt=iB("left"),oB=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return OE(r)?r.number:0}}},Jbt=oB("top"),Zbt=oB("right"),e1t=oB("bottom"),t1t=oB("left"),r1t={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},n1t={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},a1t={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(La).reduce(function(r,n){return r|s1t(n.value)},0)}},s1t=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},i1t={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},o1t={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},g4;(function(e){e.NORMAL="normal",e.STRICT="strict"})(g4||(g4={}));var l1t={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return g4.STRICT;case"normal":default:return g4.NORMAL}}},c1t={name:"line-height",initialValue:"normal",prefix:!1,type:4},Qte=function(e,t){return La(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Fi(e)?Za(e,t):t},u1t={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:QH.parse(e,t)}},d1t={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},e8={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},lB=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},f1t=lB("top"),h1t=lB("right"),A1t=lB("bottom"),m1t=lB("left"),p1t={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(La).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},g1t={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},cB=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},x1t=cB("top"),v1t=cB("right"),b1t=cB("bottom"),y1t=cB("left"),w1t={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},N1t={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},C1t={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&ZL(t[0],"none")?[]:l0(t).map(function(r){for(var n={color:hA.TRANSPARENT,offsetX:Xo,offsetY:Xo,blur:Xo},a=0,s=0;s<r.length;s++){var o=r[s];Lp(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=vp.parse(e,o)}return n})}},E1t={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},j1t={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=_1t[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},k1t=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},S1t=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,n,a,s,o,l]:null},_1t={matrix:k1t,matrix3d:S1t},Vte={type:16,number:50,flags:DE},T1t=[Vte,Vte],B1t={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Fi);return r.length!==2?T1t:[r[0],r[1]]}},I1t={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},vN;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(vN||(vN={}));var D1t={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return vN.BREAK_ALL;case"keep-all":return vN.KEEP_ALL;case"normal":default:return vN.NORMAL}}},O1t={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(qy(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},bxe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},P1t={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return qy(t)?t.number:1}},F1t={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},R1t={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(La).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},L1t={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},M1t={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},U1t={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(qy(t))return t.number;if(La(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},H1t={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(La).map(function(r){return r.value})}},Q1t={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},qi=function(e,t){return(e&t)!==0},V1t={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},$1t={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(nxe),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&qy(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},z1t={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(nxe),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(La(s)&&s.value!=="none"){var l=o&&qy(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},G1t={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(OE).map(function(r){return bxe.parse(e,r)})}},q1t={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(vbt);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},$te=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},K1t={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&ZL(t[0],"none")?[]:l0(t).map(function(r){for(var n={color:255,offsetX:Xo,offsetY:Xo,blur:Xo,spread:Xo,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];ZL(o,"inset")?n.inset=!0:Lp(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=vp.parse(e,o)}return n})}},W1t={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(La).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},X1t={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Y1t={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return OE(t)?t.number:0}},J1t=function(){function e(t,r){var n,a;this.animationDuration=vr(t,G1t,r.animationDuration),this.backgroundClip=vr(t,wbt,r.backgroundClip),this.backgroundColor=vr(t,Nbt,r.backgroundColor),this.backgroundImage=vr(t,Dbt,r.backgroundImage),this.backgroundOrigin=vr(t,Obt,r.backgroundOrigin),this.backgroundPosition=vr(t,Pbt,r.backgroundPosition),this.backgroundRepeat=vr(t,Fbt,r.backgroundRepeat),this.backgroundSize=vr(t,Lbt,r.backgroundSize),this.borderTopColor=vr(t,Ubt,r.borderTopColor),this.borderRightColor=vr(t,Hbt,r.borderRightColor),this.borderBottomColor=vr(t,Qbt,r.borderBottomColor),this.borderLeftColor=vr(t,Vbt,r.borderLeftColor),this.borderTopLeftRadius=vr(t,$bt,r.borderTopLeftRadius),this.borderTopRightRadius=vr(t,zbt,r.borderTopRightRadius),this.borderBottomRightRadius=vr(t,Gbt,r.borderBottomRightRadius),this.borderBottomLeftRadius=vr(t,qbt,r.borderBottomLeftRadius),this.borderTopStyle=vr(t,Kbt,r.borderTopStyle),this.borderRightStyle=vr(t,Wbt,r.borderRightStyle),this.borderBottomStyle=vr(t,Xbt,r.borderBottomStyle),this.borderLeftStyle=vr(t,Ybt,r.borderLeftStyle),this.borderTopWidth=vr(t,Jbt,r.borderTopWidth),this.borderRightWidth=vr(t,Zbt,r.borderRightWidth),this.borderBottomWidth=vr(t,e1t,r.borderBottomWidth),this.borderLeftWidth=vr(t,t1t,r.borderLeftWidth),this.boxShadow=vr(t,K1t,r.boxShadow),this.color=vr(t,r1t,r.color),this.direction=vr(t,n1t,r.direction),this.display=vr(t,a1t,r.display),this.float=vr(t,i1t,r.cssFloat),this.fontFamily=vr(t,L1t,r.fontFamily),this.fontSize=vr(t,M1t,r.fontSize),this.fontStyle=vr(t,Q1t,r.fontStyle),this.fontVariant=vr(t,H1t,r.fontVariant),this.fontWeight=vr(t,U1t,r.fontWeight),this.letterSpacing=vr(t,o1t,r.letterSpacing),this.lineBreak=vr(t,l1t,r.lineBreak),this.lineHeight=vr(t,c1t,r.lineHeight),this.listStyleImage=vr(t,u1t,r.listStyleImage),this.listStylePosition=vr(t,d1t,r.listStylePosition),this.listStyleType=vr(t,e8,r.listStyleType),this.marginTop=vr(t,f1t,r.marginTop),this.marginRight=vr(t,h1t,r.marginRight),this.marginBottom=vr(t,A1t,r.marginBottom),this.marginLeft=vr(t,m1t,r.marginLeft),this.opacity=vr(t,P1t,r.opacity);var s=vr(t,p1t,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=vr(t,g1t,r.overflowWrap),this.paddingTop=vr(t,x1t,r.paddingTop),this.paddingRight=vr(t,v1t,r.paddingRight),this.paddingBottom=vr(t,b1t,r.paddingBottom),this.paddingLeft=vr(t,y1t,r.paddingLeft),this.paintOrder=vr(t,W1t,r.paintOrder),this.position=vr(t,N1t,r.position),this.textAlign=vr(t,w1t,r.textAlign),this.textDecorationColor=vr(t,F1t,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=vr(t,R1t,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=vr(t,C1t,r.textShadow),this.textTransform=vr(t,E1t,r.textTransform),this.transform=vr(t,j1t,r.transform),this.transformOrigin=vr(t,B1t,r.transformOrigin),this.visibility=vr(t,I1t,r.visibility),this.webkitTextStrokeColor=vr(t,X1t,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=vr(t,Y1t,r.webkitTextStrokeWidth),this.wordBreak=vr(t,D1t,r.wordBreak),this.zIndex=vr(t,O1t,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return bp(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return qi(this.display,4)||qi(this.display,33554432)||qi(this.display,268435456)||qi(this.display,536870912)||qi(this.display,67108864)||qi(this.display,134217728)},e}(),Z1t=function(){function e(t,r){this.content=vr(t,V1t,r.content),this.quotes=vr(t,q1t,r.quotes)}return e}(),zte=function(){function e(t,r){this.counterIncrement=vr(t,$1t,r.counterIncrement),this.counterReset=vr(t,z1t,r.counterReset)}return e}(),vr=function(e,t,r){var n=new txe,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new rxe(n.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,La(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return rB.parse(e,s.parseComponentValue());case"color":return vp.parse(e,s.parseComponentValue());case"image":return QH.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return Lp(l)?l:Xo;case"length-percentage":var c=s.parseComponentValue();return Fi(c)?c:Xo;case"time":return bxe.parse(e,s.parseComponentValue())}break}},eyt="data-html2canvas-debug",tyt=function(e){var t=e.getAttribute(eyt);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},t8=function(e,t){var r=tyt(e);return r===1||t===r},c0=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,t8(r,3))debugger;this.styles=new J1t(t,window.getComputedStyle(r,null)),a8(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=eB(this.context,r),t8(r,4)&&(this.flags|=16)}return e}(),ryt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Gte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var hS=0;hS<Gte.length;hS++)L2[Gte.charCodeAt(hS)]=hS;var nyt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=L2[e.charCodeAt(n)],o=L2[e.charCodeAt(n+1)],l=L2[e.charCodeAt(n+2)],c=L2[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},ayt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},syt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},kx=5,VH=11,iP=2,iyt=VH-kx,yxe=65536>>kx,oyt=1<<kx,oP=oyt-1,lyt=1024>>kx,cyt=yxe+lyt,uyt=cyt,dyt=32,fyt=uyt+dyt,hyt=65536>>VH,Ayt=1<<iyt,myt=Ayt-1,qte=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},pyt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},gyt=function(e,t){var r=nyt(e),n=Array.isArray(r)?syt(r):new Uint32Array(r),a=Array.isArray(r)?ayt(r):new Uint16Array(r),s=24,o=qte(a,s/2,n[4]/2),l=n[5]===2?qte(a,(s+n[4])/2):pyt(n,Math.ceil((s+n[4])/4));return new xyt(n[0],n[1],n[2],n[3],o,l)},xyt=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>kx],r=(r<<iP)+(t&oP),this.data[r];if(t<=65535)return r=this.index[yxe+(t-55296>>kx)],r=(r<<iP)+(t&oP),this.data[r];if(t<this.highStart)return r=fyt-hyt+(t>>VH),r=this.index[r],r+=t>>kx&myt,r=this.index[r],r=(r<<iP)+(t&oP),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Kte="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vyt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var AS=0;AS<Kte.length;AS++)vyt[Kte.charCodeAt(AS)]=AS;var byt=1,lP=2,cP=3,Wte=4,Xte=5,yyt=7,Yte=8,uP=9,dP=10,Jte=11,Zte=12,ere=13,tre=14,fP=15,wyt=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Nyt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Cyt=gyt(ryt),gd="",hP="",Eyt=function(e){return Cyt.get(e)},jyt=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],o=t[r];if(s===lP&&o===cP)return gd;if(s===lP||s===cP||s===Wte||o===lP||o===cP||o===Wte)return hP;if(s===Yte&&[Yte,uP,Jte,Zte].indexOf(o)!==-1||(s===Jte||s===uP)&&(o===uP||o===dP)||(s===Zte||s===dP)&&o===dP||o===ere||o===Xte||o===yyt||s===byt)return gd;if(s===ere&&o===tre){for(;a===Xte;)a=t[--n];if(a===tre)return gd}if(s===fP&&o===fP){for(var l=0;a===fP;)l++,a=t[--n];if(l%2===0)return gd}return hP},kyt=function(e){var t=wyt(e),r=t.length,n=0,a=0,s=t.map(Eyt);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=gd;n<r&&(o=jyt(t,s,++n))===gd;);if(o!==gd||n===r){var l=Nyt.apply(null,t.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},Syt=function(e){for(var t=kyt(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},_yt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},Tyt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=tB(n.data).map(function(c){return fi(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return e.body.removeChild(t),l},Byt=function(){return typeof new Image().crossOrigin<"u"},Iyt=function(){return typeof new XMLHttpRequest().responseType=="string"},Dyt=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},rre=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},Oyt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var o=r8(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),nre(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",rre(c)?nre(r8(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),rre(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},r8=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},nre=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Qo={get SUPPORT_RANGE_BOUNDS(){var e=_yt(document);return Object.defineProperty(Qo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Qo.SUPPORT_RANGE_BOUNDS&&Tyt(document);return Object.defineProperty(Qo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Dyt(document);return Object.defineProperty(Qo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?Oyt(document):Promise.resolve(!1);return Object.defineProperty(Qo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Byt();return Object.defineProperty(Qo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=Iyt();return Object.defineProperty(Qo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Qo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Qo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},bN=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),Pyt=function(e,t,r,n){var a=Lyt(t,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Qo.SUPPORT_RANGE_BOUNDS){var c=are(n,o,l.length).getClientRects();if(c.length>1){var u=$H(l),d=0;u.forEach(function(A){s.push(new bN(A,PA.fromDOMRectList(e,are(n,d+o,A.length).getClientRects()))),d+=A.length})}else s.push(new bN(l,PA.fromDOMRectList(e,c)))}else{var f=n.splitText(l.length);s.push(new bN(l,Fyt(e,n))),n=f}else Qo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},Fyt=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=eB(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return PA.EMPTY},are=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},$H=function(e){if(Qo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return Syt(e)},Ryt=function(e,t){if(Qo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return Uyt(e,t)},Lyt=function(e,t){return t.letterSpacing!==0?$H(e):Ryt(e,t)},Myt=[32,160,4961,65792,65793,4153,4241],Uyt=function(e,t){for(var r=hvt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=tB(o),c="";l.forEach(function(u){Myt.indexOf(u)===-1?c+=fi(u):(c.length&&n.push(c),n.push(fi(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},Hyt=function(){function e(t,r,n){this.text=Qyt(r.data,n.textTransform),this.textBounds=Pyt(t,this.text,n,r)}return e}(),Qyt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Vyt,$yt);case 2:return e.toUpperCase();default:return e}},Vyt=/(^|\s|:|-|\(|\))([a-z])/g,$yt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},wxe=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(c0),Nxe=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(c0),Cxe=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,o=eB(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(c0),Exe=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(c0),n8=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(c0),zyt=[{type:15,flags:0,unit:"px",number:3}],Gyt=[{type:16,flags:0,number:50}],qyt=function(e){return e.width>e.height?new PA(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new PA(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Kyt=function(e){var t=e.type===Wyt?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},x4="checkbox",v4="radio",Wyt="password",sre=707406591,zH=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=Kyt(n),(a.type===x4||a.type===v4)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=qyt(a.bounds)),a.type){case x4:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=zyt;break;case v4:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Gyt;break}return a}return t}(c0),jxe=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(c0),kxe=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(c0),Sxe=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Txe(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?xN(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):hA.TRANSPARENT,o=n.contentWindow.document.body?xN(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):hA.TRANSPARENT;a.backgroundColor=bp(s)?bp(o)?a.styles.backgroundColor:o:s}}catch{}return a}return t}(c0),Xyt=["OL","UL","MENU"],d5=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Bxe(a)&&a.data.trim().length>0)r.textNodes.push(new Hyt(e,a,r.styles));else if(Gb(a))if(Pxe(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return d5(e,l,r,n)});else{var o=_xe(e,a);o.styles.isVisible()&&(Yyt(a,o,n)?o.flags|=4:Jyt(o.styles)&&(o.flags|=2),Xyt.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?d5(e,a.shadowRoot,o,n):!b4(a)&&!Ixe(a)&&!y4(a)&&d5(e,a,o,n))}},_xe=function(e,t){return s8(t)?new wxe(e,t):Dxe(t)?new Nxe(e,t):Ixe(t)?new Cxe(e,t):Zyt(t)?new Exe(e,t):ewt(t)?new n8(e,t):twt(t)?new zH(e,t):y4(t)?new jxe(e,t):b4(t)?new kxe(e,t):Oxe(t)?new Sxe(e,t):new c0(e,t)},Txe=function(e,t){var r=_xe(e,t);return r.flags|=4,d5(e,t,r,r),r},Yyt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||GH(e)&&r.styles.isTransparent()},Jyt=function(e){return e.isPositioned()||e.isFloating()},Bxe=function(e){return e.nodeType===Node.TEXT_NODE},Gb=function(e){return e.nodeType===Node.ELEMENT_NODE},a8=function(e){return Gb(e)&&typeof e.style<"u"&&!f5(e)},f5=function(e){return typeof e.className=="object"},Zyt=function(e){return e.tagName==="LI"},ewt=function(e){return e.tagName==="OL"},twt=function(e){return e.tagName==="INPUT"},rwt=function(e){return e.tagName==="HTML"},Ixe=function(e){return e.tagName==="svg"},GH=function(e){return e.tagName==="BODY"},Dxe=function(e){return e.tagName==="CANVAS"},ire=function(e){return e.tagName==="VIDEO"},s8=function(e){return e.tagName==="IMG"},Oxe=function(e){return e.tagName==="IFRAME"},ore=function(e){return e.tagName==="STYLE"},nwt=function(e){return e.tagName==="SCRIPT"},b4=function(e){return e.tagName==="TEXTAREA"},y4=function(e){return e.tagName==="SELECT"},Pxe=function(e){return e.tagName==="SLOT"},lre=function(e){return e.tagName.indexOf("-")>0},awt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),cre={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ure={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},swt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},iwt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},gb=function(e,t,r,n,a,s){return e<t||e>r?SC(e,a,s.length>0):n.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=n.values[c];return o},"")+s},Fxe=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},li=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(Fxe(Math.abs(e),s,n,function(o){return fi(Math.floor(o%s)+t)})+a)},Tg=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return Fxe(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},Tb=1,Rm=2,Lm=4,M2=8,U0=function(e,t,r,n,a,s){if(e<-9999||e>9999)return SC(e,4,a.length>0);var o=Math.abs(e),l=a;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&qi(s,Tb)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&qi(s,Rm)||u===1&&c===1&&qi(s,Lm)&&e>100||u===1&&c>1&&qi(s,M2)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?n:"")+l},dre="",fre="",hre="",AP="",SC=function(e,t,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",o=r?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=li(e,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Tg(e,"",a);case 6:return gb(e,1,3999,cre,3,n).toLowerCase();case 7:return gb(e,1,3999,cre,3,n);case 8:return li(e,945,969,!1,n);case 9:return li(e,97,122,!1,n);case 10:return li(e,65,90,!1,n);case 11:return li(e,1632,1641,!0,n);case 12:case 49:return gb(e,1,9999,ure,3,n);case 35:return gb(e,1,9999,ure,3,n).toLowerCase();case 13:return li(e,2534,2543,!0,n);case 14:case 30:return li(e,6112,6121,!0,n);case 15:return Tg(e,"",a);case 16:return Tg(e,"",a);case 17:case 48:return U0(e,"",dre,"",a,Rm|Lm|M2);case 47:return U0(e,"",fre,"",a,Tb|Rm|Lm|M2);case 42:return U0(e,"",dre,"",a,Rm|Lm|M2);case 41:return U0(e,"",fre,"",a,Tb|Rm|Lm|M2);case 26:return U0(e,"","",hre,a,0);case 25:return U0(e,"","",hre,a,Tb|Rm|Lm);case 31:return U0(e,"","",AP,s,Tb|Rm|Lm);case 33:return U0(e,"","",AP,s,0);case 32:return U0(e,"","",AP,s,Tb|Rm|Lm);case 18:return li(e,2406,2415,!0,n);case 20:return gb(e,1,19999,iwt,3,n);case 21:return li(e,2790,2799,!0,n);case 22:return li(e,2662,2671,!0,n);case 22:return gb(e,1,10999,swt,3,n);case 23:return Tg(e,"");case 24:return Tg(e,"");case 27:return li(e,3302,3311,!0,n);case 28:return Tg(e,"",a);case 29:return Tg(e,"",a);case 34:return li(e,3792,3801,!0,n);case 37:return li(e,6160,6169,!0,n);case 38:return li(e,4160,4169,!0,n);case 39:return li(e,2918,2927,!0,n);case 40:return li(e,1776,1785,!0,n);case 43:return li(e,3046,3055,!0,n);case 44:return li(e,3174,3183,!0,n);case 45:return li(e,3664,3673,!0,n);case 46:return li(e,3872,3881,!0,n);case 3:default:return li(e,48,57,!0,n)}},Rxe="data-html2canvas-ignore",Are=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new awt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=owt(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=uwt(a).then(function(){return Xl(n,void 0,void 0,function(){var d,f;return xl(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(Awt),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,cwt(c)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(fwt(document.doctype)+"<html></html>"),hwt(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(t8(t,2))debugger;if(Dxe(t))return this.createCanvasClone(t);if(ire(t))return this.createVideoClone(t);if(ore(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return s8(r)&&(s8(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),lre(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return mP(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Gb(r)||!nwt(r)&&!r.hasAttribute(Rxe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Gb(r)||!ore(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Gb(s)&&Pxe(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(Bxe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Gb(t)&&(a8(t)||f5(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),o=n.getComputedStyle(t,":before"),l=n.getComputedStyle(t,":after");this.referenceElement===t&&a8(a)&&(this.clonedReferenceElement=a),GH(a)&&gwt(a);var c=this.counters.parse(new zte(this.context,s)),u=this.resolvePseudoContent(t,a,o,yN.BEFORE);lre(t)&&(r=!0),ire(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,l,yN.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||f5(t))&&!Oxe(t)||r)&&mP(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(b4(t)||y4(t))&&(b4(a)||y4(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new zte(this.context,n));var c=new Z1t(this.context,n),u=l.createElement("html2canvaspseudoelement");mP(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var A=l.createElement("img");A.src=f.value,A.style.opacity="1",u.appendChild(A)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(La);m.length&&u.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(ly),x=g[0],v=g[1];if(x&&La(x)){var y=s.counters.getCounterValue(x.value),N=v&&La(v)?e8.parse(s.context,v.value):3;u.appendChild(l.createTextNode(SC(y,N,!1)))}}else if(f.name==="counters"){var C=f.values.filter(ly),x=C[0],_=C[1],v=C[2];if(x&&La(x)){var j=s.counters.getCounterValues(x.value),I=v&&La(v)?e8.parse(s.context,v.value):3,T=_&&_.type===0?_.value:"",k=j.map(function(P){return SC(P,I,!1)}).join(T);u.appendChild(l.createTextNode(k))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode($te(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode($te(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=i8+" "+o8;var d=a===yN.BEFORE?" "+i8:" "+o8;return f5(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),yN;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(yN||(yN={}));var owt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(Rxe,"true"),e.body.appendChild(r),r},lwt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},cwt=function(e){return Promise.all([].slice.call(e.images,0).map(lwt))},uwt=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},dwt=["all","d","content"],mP=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);dwt.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},fwt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},hwt=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},Awt=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},mwt=":before",pwt=":after",i8="___html2canvas___pseudoelement_before",o8="___html2canvas___pseudoelement_after",mre=`{
    content: "" !important;
    display: none !important;
}`,gwt=function(e){xwt(e,"."+i8+mwt+mre+`
         .`+o8+pwt+mre)},xwt=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},Lxe=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),vwt=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(gP(t)||Nwt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Xl(this,void 0,void 0,function(){var r,n,a,s,o=this;return xl(this,function(l){switch(l.label){case 0:return r=Lxe.isSameOrigin(t),n=!pP(t)&&this._options.useCORS===!0&&Qo.SUPPORT_CORS_IMAGES&&!r,a=!pP(t)&&!r&&!gP(t)&&typeof this._options.proxy=="string"&&Qo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!pP(t)&&!gP(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(Cwt(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,o){var l=Qo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(A){return o(A)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),bwt=/^data:image\/svg\+xml/i,ywt=/^data:image\/.*;base64,/i,wwt=/^data:image\/.*/i,Nwt=function(e){return Qo.SUPPORT_SVG_DRAWING||!Ewt(e)},pP=function(e){return wwt.test(e)},Cwt=function(e){return ywt.test(e)},gP=function(e){return e.substr(0,4)==="blob"},Ewt=function(e){return e.substr(-3).toLowerCase()==="svg"||bwt.test(e)},pr=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),xb=function(e,t,r){return new pr(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},mS=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=xb(this.start,this.startControl,t),a=xb(this.startControl,this.endControl,t),s=xb(this.endControl,this.end,t),o=xb(n,a,t),l=xb(a,s,t),c=xb(o,l,t);return r?new e(this.start,n,o,c):new e(c,l,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),yd=function(e){return e.type===1},jwt=function(){function e(t){var r=t.styles,n=t.bounds,a=R2(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=R2(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=R2(r.borderBottomRightRadius,n.width,n.height),f=d[0],A=d[1],m=R2(r.borderBottomLeftRadius,n.width,n.height),g=m[0],x=m[1],v=[];v.push((s+c)/n.width),v.push((g+f)/n.width),v.push((o+x)/n.height),v.push((u+A)/n.height);var y=Math.max.apply(Math,v);y>1&&(s/=y,o/=y,c/=y,u/=y,f/=y,A/=y,g/=y,x/=y);var N=n.width-c,C=n.height-A,_=n.width-f,j=n.height-x,I=r.borderTopWidth,T=r.borderRightWidth,k=r.borderBottomWidth,B=r.borderLeftWidth,M=Za(r.paddingTop,t.bounds.width),P=Za(r.paddingRight,t.bounds.width),S=Za(r.paddingBottom,t.bounds.width),L=Za(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?gs(n.left+B/3,n.top+I/3,s-B/3,o-I/3,pa.TOP_LEFT):new pr(n.left+B/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||o>0?gs(n.left+N,n.top+I/3,c-T/3,u-I/3,pa.TOP_RIGHT):new pr(n.left+n.width-T/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||A>0?gs(n.left+_,n.top+C,f-T/3,A-k/3,pa.BOTTOM_RIGHT):new pr(n.left+n.width-T/3,n.top+n.height-k/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?gs(n.left+B/3,n.top+j,g-B/3,x-k/3,pa.BOTTOM_LEFT):new pr(n.left+B/3,n.top+n.height-k/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?gs(n.left+B*2/3,n.top+I*2/3,s-B*2/3,o-I*2/3,pa.TOP_LEFT):new pr(n.left+B*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?gs(n.left+N,n.top+I*2/3,c-T*2/3,u-I*2/3,pa.TOP_RIGHT):new pr(n.left+n.width-T*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||A>0?gs(n.left+_,n.top+C,f-T*2/3,A-k*2/3,pa.BOTTOM_RIGHT):new pr(n.left+n.width-T*2/3,n.top+n.height-k*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?gs(n.left+B*2/3,n.top+j,g-B*2/3,x-k*2/3,pa.BOTTOM_LEFT):new pr(n.left+B*2/3,n.top+n.height-k*2/3),this.topLeftBorderStroke=s>0||o>0?gs(n.left+B/2,n.top+I/2,s-B/2,o-I/2,pa.TOP_LEFT):new pr(n.left+B/2,n.top+I/2),this.topRightBorderStroke=s>0||o>0?gs(n.left+N,n.top+I/2,c-T/2,u-I/2,pa.TOP_RIGHT):new pr(n.left+n.width-T/2,n.top+I/2),this.bottomRightBorderStroke=f>0||A>0?gs(n.left+_,n.top+C,f-T/2,A-k/2,pa.BOTTOM_RIGHT):new pr(n.left+n.width-T/2,n.top+n.height-k/2),this.bottomLeftBorderStroke=g>0||x>0?gs(n.left+B/2,n.top+j,g-B/2,x-k/2,pa.BOTTOM_LEFT):new pr(n.left+B/2,n.top+n.height-k/2),this.topLeftBorderBox=s>0||o>0?gs(n.left,n.top,s,o,pa.TOP_LEFT):new pr(n.left,n.top),this.topRightBorderBox=c>0||u>0?gs(n.left+N,n.top,c,u,pa.TOP_RIGHT):new pr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||A>0?gs(n.left+_,n.top+C,f,A,pa.BOTTOM_RIGHT):new pr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?gs(n.left,n.top+j,g,x,pa.BOTTOM_LEFT):new pr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?gs(n.left+B,n.top+I,Math.max(0,s-B),Math.max(0,o-I),pa.TOP_LEFT):new pr(n.left+B,n.top+I),this.topRightPaddingBox=c>0||u>0?gs(n.left+Math.min(N,n.width-T),n.top+I,N>n.width+T?0:Math.max(0,c-T),Math.max(0,u-I),pa.TOP_RIGHT):new pr(n.left+n.width-T,n.top+I),this.bottomRightPaddingBox=f>0||A>0?gs(n.left+Math.min(_,n.width-B),n.top+Math.min(C,n.height-k),Math.max(0,f-T),Math.max(0,A-k),pa.BOTTOM_RIGHT):new pr(n.left+n.width-T,n.top+n.height-k),this.bottomLeftPaddingBox=g>0||x>0?gs(n.left+B,n.top+Math.min(j,n.height-k),Math.max(0,g-B),Math.max(0,x-k),pa.BOTTOM_LEFT):new pr(n.left+B,n.top+n.height-k),this.topLeftContentBox=s>0||o>0?gs(n.left+B+L,n.top+I+M,Math.max(0,s-(B+L)),Math.max(0,o-(I+M)),pa.TOP_LEFT):new pr(n.left+B+L,n.top+I+M),this.topRightContentBox=c>0||u>0?gs(n.left+Math.min(N,n.width+B+L),n.top+I+M,N>n.width+B+L?0:c-B+L,u-(I+M),pa.TOP_RIGHT):new pr(n.left+n.width-(T+P),n.top+I+M),this.bottomRightContentBox=f>0||A>0?gs(n.left+Math.min(_,n.width-(B+L)),n.top+Math.min(C,n.height+I+M),Math.max(0,f-(T+P)),A-(k+S),pa.BOTTOM_RIGHT):new pr(n.left+n.width-(T+P),n.top+n.height-(k+S)),this.bottomLeftContentBox=g>0||x>0?gs(n.left+B+L,n.top+j,Math.max(0,g-(B+L)),x-(k+S),pa.BOTTOM_LEFT):new pr(n.left+B+L,n.top+n.height-(k+S))}return e}(),pa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(pa||(pa={}));var gs=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=e+r,u=t+n;switch(a){case pa.TOP_LEFT:return new mS(new pr(e,u),new pr(e,u-l),new pr(c-o,t),new pr(c,t));case pa.TOP_RIGHT:return new mS(new pr(e,t),new pr(e+o,t),new pr(c,u-l),new pr(c,u));case pa.BOTTOM_RIGHT:return new mS(new pr(c,t),new pr(c,t+l),new pr(e+o,u),new pr(e,u));case pa.BOTTOM_LEFT:default:return new mS(new pr(c,u),new pr(c-o,u),new pr(e,t+l),new pr(e,t))}},w4=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},kwt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},N4=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Swt=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),pS=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),_wt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),Twt=function(e){return e.type===0},Mxe=function(e){return e.type===1},Bwt=function(e){return e.type===2},pre=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},Iwt=function(e,t,r,n,a){return e.map(function(s,o){switch(o){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},Uxe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Hxe=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new jwt(this.container),this.container.styles.opacity<1&&this.effects.push(new _wt(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Swt(n,a,s))}if(this.container.styles.overflowX!==0){var o=w4(this.curves),l=N4(this.curves);pre(o,l)?this.effects.push(new pS(o,6)):(this.effects.push(new pS(o,2)),this.effects.push(new pS(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!Mxe(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=w4(n.curves),l=N4(n.curves);pre(o,l)||a.unshift(new pS(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return qi(c.target,t)})},e}(),l8=function(e,t,r,n){e.container.elements.forEach(function(a){var s=qi(a.flags,4),o=qi(a.flags,2),l=new Hxe(a,e);qi(a.styles.display,2048)&&n.push(l);var c=qi(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:t,d=new Uxe(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var A=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(A=x,!1):A>0}),u.negativeZIndex.splice(A,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);l8(l,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),l8(l,t,r,c);qi(a.flags,8)&&Qxe(a,c)})},Qxe=function(e,t){for(var r=e instanceof n8?e.start:1,n=e instanceof n8?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof Exe&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=SC(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},Dwt=function(e){var t=new Hxe(e,null),r=new Uxe(t),n=[];return l8(t,r,r,n),Qxe(t.container,n),r},gre=function(e,t){switch(t){case 0:return Sd(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Sd(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Sd(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Sd(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Owt=function(e,t){switch(t){case 0:return Sd(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Sd(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Sd(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Sd(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Pwt=function(e,t){switch(t){case 0:return Sd(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Sd(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Sd(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Sd(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Fwt=function(e,t){switch(t){case 0:return gS(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return gS(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return gS(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return gS(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},gS=function(e,t){var r=[];return yd(e)?r.push(e.subdivide(.5,!1)):r.push(e),yd(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Sd=function(e,t,r,n){var a=[];return yd(e)?a.push(e.subdivide(.5,!1)):a.push(e),yd(r)?a.push(r.subdivide(.5,!0)):a.push(r),yd(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),yd(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Vxe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},C4=function(e){var t=e.styles,r=e.bounds,n=Za(t.paddingLeft,r.width),a=Za(t.paddingRight,r.width),s=Za(t.paddingTop,r.width),o=Za(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+o))},Rwt=function(e,t){return e===0?t.bounds:e===2?C4(t):Vxe(t)},Lwt=function(e,t){return e===0?t.bounds:e===2?C4(t):Vxe(t)},xP=function(e,t,r){var n=Rwt(Bb(e.styles.backgroundOrigin,t),e),a=Lwt(Bb(e.styles.backgroundClip,t),e),s=Mwt(Bb(e.styles.backgroundSize,t),r,n),o=s[0],l=s[1],c=R2(Bb(e.styles.backgroundPosition,t),n.width-o,n.height-l),u=Uwt(Bb(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},vb=function(e){return La(e)&&e.value===C1.AUTO},xS=function(e){return typeof e=="number"},Mwt=function(e,t,r){var n=t[0],a=t[1],s=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(Fi(o)&&l&&Fi(l))return[Za(o,r.width),Za(l,r.height)];var c=xS(s);if(La(o)&&(o.value===C1.CONTAIN||o.value===C1.COVER)){if(xS(s)){var u=r.width/r.height;return u<s!=(o.value===C1.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=xS(n),f=xS(a),A=d||f;if(vb(o)&&(!l||vb(l))){if(d&&f)return[n,a];if(!c&&!A)return[r.width,r.height];if(A&&c){var m=d?n:a*s,g=f?a:n/s;return[m,g]}var x=d?n:r.width,v=f?a:r.height;return[x,v]}if(c){var y=0,N=0;return Fi(o)?y=Za(o,r.width):Fi(l)&&(N=Za(l,r.height)),vb(o)?y=N*s:(!l||vb(l))&&(N=y/s),[y,N]}var C=null,_=null;if(Fi(o)?C=Za(o,r.width):l&&Fi(l)&&(_=Za(l,r.height)),C!==null&&(!l||vb(l))&&(_=d&&f?C/n*a:r.height),_!==null&&vb(o)&&(C=d&&f?_/a*n:r.width),C!==null&&_!==null)return[C,_];throw new Error("Unable to calculate background-size for element")},Bb=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},Uwt=function(e,t,r,n,a){var s=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new pr(Math.round(n.left),Math.round(n.top+o)),new pr(Math.round(n.left+n.width),Math.round(n.top+o)),new pr(Math.round(n.left+n.width),Math.round(c+n.top+o)),new pr(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new pr(Math.round(n.left+s),Math.round(n.top)),new pr(Math.round(n.left+s+l),Math.round(n.top)),new pr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new pr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new pr(Math.round(n.left+s),Math.round(n.top+o)),new pr(Math.round(n.left+s+l),Math.round(n.top+o)),new pr(Math.round(n.left+s+l),Math.round(n.top+o+c)),new pr(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new pr(Math.round(a.left),Math.round(a.top)),new pr(Math.round(a.left+a.width),Math.round(a.top)),new pr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new pr(Math.round(a.left),Math.round(a.height+a.top))]}},Hwt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",xre="Hidden Text",Qwt=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=Hwt,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(xre)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(xre)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),$xe=function(){function e(t,r){this.context=t,this.options=r}return e}(),Vwt=1e4,$wt=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new Qwt(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),Bwt(r)&&(this.ctx.globalAlpha=r.opacity),Twt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Mxe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return Xl(this,void 0,void 0,function(){var n;return xl(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return Xl(this,void 0,void 0,function(){return xl(this,function(n){switch(n.label){case 0:if(qi(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=$H(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=Wwt(r.fontFamily).join(", "),s=OE(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return Xl(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A=this;return xl(this,function(m){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:A.ctx.fillStyle=ho(n.color),A.renderTextWithLetterSpacing(g,n.letterSpacing,u);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){A.ctx.shadowColor=ho(y.color),A.ctx.shadowOffsetX=y.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=y.offsetY.number*A.options.scale,A.ctx.shadowBlur=y.blur.number,A.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),n.textDecorationLine.length&&(A.ctx.fillStyle=ho(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:A.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:A.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:A.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(A.ctx.strokeStyle=ho(n.webkitTextStrokeColor),A.ctx.lineWidth=n.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=C4(r),o=N4(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return Xl(this,void 0,void 0,function(){var n,a,s,o,l,c,N,N,u,d,f,A,_,m,g,j,x,v,y,N,C,_,j;return xl(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,I.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof wxe))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return N=I.sent(),this.renderReplacedElement(n,a,N),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Nxe&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof Cxe))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return N=I.sent(),this.renderReplacedElement(n,a,N),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Sxe&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof zH&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===x4?n.checked&&(this.ctx.save(),this.path([new pr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new pr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new pr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new pr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new pr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new pr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new pr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=ho(sre),this.ctx.fill(),this.ctx.restore()):n.type===v4&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=ho(sre),this.ctx.fill(),this.ctx.restore())),zwt(n)&&n.value.length){switch(A=this.createFontStyle(s),_=A[0],m=A[1],g=this.fontMetrics.getMetrics(_,m).baseline,this.ctx.font=_,this.ctx.fillStyle=ho(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qwt(n.styles.textAlign),j=C4(n),x=0,n.styles.textAlign){case 1:x+=j.width/2;break;case 2:x+=j.width;break}v=j.add(x,0,0,-j.height/2+1),this.ctx.save(),this.path([new pr(j.left,j.top),new pr(j.left+j.width,j.top),new pr(j.left+j.width,j.top+j.height),new pr(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new bN(n.value,v),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!qi(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];N=void 0,C=y.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(C)];case 16:return N=I.sent(),this.ctx.drawImage(N,n.bounds.left-(N.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+C),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(_=this.createFontStyle(s)[0],this.ctx.font=_,this.ctx.fillStyle=ho(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new PA(n.bounds.left,n.bounds.top+Za(n.styles.paddingTop,n.bounds.width),n.bounds.width,Qte(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new bN(r.listValue,j),s.letterSpacing,Qte(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return Xl(this,void 0,void 0,function(){var n,a,y,s,o,y,l,c,y,u,d,y,f,A,y,m,g,y,x,v,y;return xl(this,function(N){switch(N.label){case 0:if(qi(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:N.sent(),n=0,a=r.negativeZIndex,N.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:N.sent(),N.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:N.sent(),s=0,o=r.nonInlineLevel,N.label=7;case 7:return s<o.length?(y=o[s],[4,this.renderNode(y)]):[3,10];case 8:N.sent(),N.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,N.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:N.sent(),N.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,N.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:N.sent(),N.label=17;case 17:return u++,[3,15];case 18:f=0,A=r.inlineLevel,N.label=19;case 19:return f<A.length?(y=A[f],[4,this.renderNode(y)]):[3,22];case 20:N.sent(),N.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,N.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:N.sent(),N.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,N.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:N.sent(),N.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=yd(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),yd(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},t.prototype.renderBackgroundImage=function(r){return Xl(this,void 0,void 0,function(){var n,a,s,o,l,c;return xl(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,A,m,M,H,z,L,U,k,g,M,H,z,L,U,x,v,y,N,C,_,j,I,T,k,B,M,P,S,L,U,q,H,z,W,Z,V,Y,R,O,K,J;return xl(this,function(ce){switch(ce.label){case 0:if(d.type!==0)return[3,5];f=void 0,A=d.url,ce.label=1;case 1:return ce.trys.push([1,3,,4]),[4,s.context.cache.match(A)];case 2:return f=ce.sent(),[3,4];case 3:return ce.sent(),s.context.logger.error("Error loading background-image "+A),[3,4];case 4:return f&&(m=xP(r,n,[f.width,f.height,f.width/f.height]),M=m[0],H=m[1],z=m[2],L=m[3],U=m[4],k=s.ctx.createPattern(s.resizeImage(f,L,U),"repeat"),s.renderRepeat(M,k,H,z)),[3,6];case 5:Tbt(d)?(g=xP(r,n,[null,null,null]),M=g[0],H=g[1],z=g[2],L=g[3],U=g[4],x=Ebt(d.angle,L,U),v=x[0],y=x[1],N=x[2],C=x[3],_=x[4],j=document.createElement("canvas"),j.width=L,j.height=U,I=j.getContext("2d"),T=I.createLinearGradient(y,C,N,_),Ute(d.stops,v).forEach(function(oe){return T.addColorStop(oe.stop,ho(oe.color))}),I.fillStyle=T,I.fillRect(0,0,L,U),L>0&&U>0&&(k=s.ctx.createPattern(j,"repeat"),s.renderRepeat(M,k,H,z))):Bbt(d)&&(B=xP(r,n,[null,null,null]),M=B[0],P=B[1],S=B[2],L=B[3],U=B[4],q=d.position.length===0?[HH]:d.position,H=Za(q[0],L),z=Za(q[q.length-1],U),W=jbt(d,H,z,L,U),Z=W[0],V=W[1],Z>0&&V>0&&(Y=s.ctx.createRadialGradient(P+H,S+z,0,P+H,S+z,Z),Ute(d.stops,Z*2).forEach(function(oe){return Y.addColorStop(oe.stop,ho(oe.color))}),s.path(M),s.ctx.fillStyle=Y,Z!==V?(R=r.bounds.left+.5*r.bounds.width,O=r.bounds.top+.5*r.bounds.height,K=V/Z,J=1/K,s.ctx.save(),s.ctx.translate(R,O),s.ctx.transform(1,0,0,K,0,0),s.ctx.translate(-R,-O),s.ctx.fillRect(P,J*(S-O)+O,L,U*J),s.ctx.restore()):s.ctx.fill())),ce.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return Xl(this,void 0,void 0,function(){return xl(this,function(s){return this.path(gre(a,n)),this.ctx.fillStyle=ho(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return Xl(this,void 0,void 0,function(){var o,l;return xl(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=Owt(s,a),this.path(o),this.ctx.fillStyle=ho(r),this.ctx.fill(),l=Pwt(s,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return Xl(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return xl(this,function(A){switch(A.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!bp(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=Gwt(Bb(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),bp(n.backgroundColor)||(this.ctx.fillStyle=ho(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=w4(r.curves),x=m.inset?0:Vwt,v=Iwt(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=ho(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?ho(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),A.label=2;case 2:l=0,c=0,u=s,A.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!bp(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return A.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:A.sent(),A.label=11;case 11:l++,A.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return Xl(this,void 0,void 0,function(){var l,c,u,d,f,A,m,g,x,v,y,N,C,_,j,I,j,I;return xl(this,function(T){return this.ctx.save(),l=Fwt(s,a),c=gre(s,a),o===2&&(this.path(c),this.ctx.clip()),yd(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),yd(c[1])?(f=c[1].end.x,A=c[1].end.y):(f=c[1].x,A=c[1].y),a===0||a===2?m=Math.abs(u-f):m=Math.abs(d-A),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,o===3&&(g=n,x=n),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(N=Math.floor((m+x)/(g+x)),C=(m-N*g)/(N-1),_=(m-(N+1)*g)/N,x=_<=0||Math.abs(x-C)<Math.abs(x-_)?C:_),v&&(o===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=ho(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(yd(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new pr(j.end.x,j.end.y),new pr(I.start.x,I.start.y)]),this.ctx.stroke()),yd(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new pr(j.end.x,j.end.y),new pr(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return Xl(this,void 0,void 0,function(){var n;return xl(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ho(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=Dwt(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}($xe),zwt=function(e){return e instanceof kxe||e instanceof jxe?!0:e instanceof zH&&e.type!==v4&&e.type!==x4},Gwt=function(e,t){switch(e){case 0:return w4(t);case 2:return kwt(t);case 1:default:return N4(t)}},qwt=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Kwt=["-apple-system","system-ui"],Wwt=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Kwt.indexOf(t)===-1}):e},Xwt=function(e){Qf(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return Xl(this,void 0,void 0,function(){var n,a;return xl(this,function(s){switch(s.label){case 0:return n=r8(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,Ywt(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ho(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}($xe),Ywt=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Jwt=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Xk([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Xk([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Xk([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Xk([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Zwt=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new Jwt({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new vwt(this,t)}return e.instanceCount=1,e}(),zxe=function(e,t){return t===void 0&&(t={}),e2t(e,t)};typeof window<"u"&&Lxe.setContext(window);var e2t=function(e,t){return Xl(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,A,m,g,x,v,y,N,C,_,j,T,I,T,k,B,M,P,S,L,U,q,H,z,W,Z,V,Y,R,O,K;return xl(this,function(J){switch(J.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(k=t.allowTaint)!==null&&k!==void 0?k:!1,imageTimeout:(B=t.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:t.proxy,useCORS:(M=t.useCORS)!==null&&M!==void 0?M:!1},s=HL({logging:(P=t.logging)!==null&&P!==void 0?P:!0,cache:t.cache},a),o={windowWidth:(S=t.windowWidth)!==null&&S!==void 0?S:n.innerWidth,windowHeight:(L=t.windowHeight)!==null&&L!==void 0?L:n.innerHeight,scrollX:(U=t.scrollX)!==null&&U!==void 0?U:n.pageXOffset,scrollY:(q=t.scrollY)!==null&&q!==void 0?q:n.pageYOffset},l=new PA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new Zwt(s,l),u=(H=t.foreignObjectRendering)!==null&&H!==void 0?H:!1,d={allowTaint:(z=t.allowTaint)!==null&&z!==void 0?z:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new Are(c,e,d),A=f.clonedReferenceElement,A?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=J.sent(),g=GH(A)||rwt(A)?Ixt(A.ownerDocument):eB(c,A),x=g.width,v=g.height,y=g.left,N=g.top,C=t2t(c,A,t.backgroundColor),_={canvas:t.canvas,backgroundColor:C,scale:(Z=(W=t.scale)!==null&&W!==void 0?W:n.devicePixelRatio)!==null&&Z!==void 0?Z:1,x:((V=t.x)!==null&&V!==void 0?V:0)+y,y:((Y=t.y)!==null&&Y!==void 0?Y:0)+N,width:(R=t.width)!==null&&R!==void 0?R:Math.ceil(x),height:(O=t.height)!==null&&O!==void 0?O:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),T=new Xwt(c,_),[4,T.render(A)]):[3,3];case 2:return j=J.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+N+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=Txe(c,A),C===I.styles.backgroundColor&&(I.styles.backgroundColor=hA.TRANSPARENT),c.logger.debug("Starting renderer for element at "+_.x+","+_.y+" with size "+_.width+"x"+_.height),T=new $wt(c,_),[4,T.render(I)];case 4:j=J.sent(),J.label=5;case 5:return(!((K=t.removeContainer)!==null&&K!==void 0)||K)&&(Are.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},t2t=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?xN(e,getComputedStyle(n.documentElement).backgroundColor):hA.TRANSPARENT,s=n.body?xN(e,getComputedStyle(n.body).backgroundColor):hA.TRANSPARENT,o=typeof r=="string"?xN(e,r):r===null?hA.TRANSPARENT:4294967295;return t===n.documentElement?bp(a)?bp(s)?o:s:a:o};const r2t=Object.freeze(Object.defineProperty({__proto__:null,default:zxe},Symbol.toStringTag,{value:"Module"})),n2t=e=>{const[t,r]=w.useState(!1),[n,a]=w.useState(null);return w.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const o=document.createElement("script");o.id=s,o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,o.async=!0,o.defer=!0,o.onload=()=>r(!0),o.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(o)},[e]),{isLoaded:t,error:n}},Gxe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de prctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisin y mentora"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicacin interna"}],a2t=["Mecnica Industrial","Mecnica Automotriz"],s2t=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:Gxe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),vre=({empresas:e,isLoaded:t,route:r,heightPx:n})=>{const a=w.useRef(null),s=w.useRef(null),o=w.useRef([]),l=w.useRef(null),c=e.filter(u=>{var d,f;return((d=u.coordenadas)==null?void 0:d.lat)&&((f=u.coordenadas)==null?void 0:f.lng)});return w.useEffect(()=>{if(!(!t||!a.current||!window.google)){s.current||(s.current=new window.google.maps.Map(a.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),l.current?l.current.getMap()==null&&l.current.setMap(s.current):l.current=new window.google.maps.DirectionsRenderer({map:s.current,suppressMarkers:!1,preserveViewport:!1}),o.current.forEach(u=>u.setMap(null)),o.current=[];for(const u of c){const d=new window.google.maps.Marker({position:u.coordenadas,map:s.current,title:u.nombre||"Empresa"});o.current.push(d)}if(c.length){const u=new window.google.maps.LatLngBounds;c.forEach(d=>u.extend(d.coordenadas)),s.current.fitBounds(u)}r?l.current.setDirections(r):l.current.setDirections({routes:[]})}},[t,c.length,!!r]),i.jsx("div",{id:"map-container-for-pdf",ref:a,style:{width:"100%",height:`${n??400}px`,borderRadius:8}})},qxe=({data:e})=>{var o;const t=["#6366F1","#06B6D4","#22C55E","#F59E0B","#EF4444"],r=((o=e==null?void 0:e.porEspecialidad)==null?void 0:o.reduce((l,c)=>l+(c.value||0),0))||0,n=((e==null?void 0:e.ranking)||[]).filter(l=>l.coordenadas).length||0,a=(()=>{const l=((e==null?void 0:e.ranking)||[]).map(c=>c.promedio).filter(c=>!isNaN(c)&&c>0);return l.length?l.reduce((c,u)=>c+u,0)/l.length:0})(),s=new Set(((e==null?void 0:e.porSupervisor)||[]).map(l=>l.name)).size;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-indigo-500 to-indigo-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Empresas"}),i.jsx("div",{className:"text-2xl font-bold",children:r})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-cyan-500 to-cyan-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Geo-localizadas"}),i.jsx("div",{className:"text-2xl font-bold",children:n})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-emerald-500 to-emerald-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Promedio Calificacin"}),i.jsxs("div",{className:"text-2xl font-bold",children:[a.toFixed(1)," "]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-tr from-amber-500 to-amber-400 text-white shadow-md",children:[i.jsx("div",{className:"text-xs opacity-90",children:"Supervisores Activos"}),i.jsx("div",{className:"text-2xl font-bold",children:s})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),i.jsx(Ko,{width:"100%",height:300,children:i.jsxs(CT,{children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"grad1",x1:"0",y1:"0",x2:"1",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),i.jsx("stop",{offset:"100%",stopColor:"#22C55E"})]})}),i.jsx(NE,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,strokeWidth:3,stroke:"#ffffff",children:e.porEspecialidad.map((l,c)=>i.jsx(SA,{fill:t[c%t.length]},`cell-${c}`))}),i.jsx(qo,{})]})}),i.jsx("div",{className:"-mt-24 h-0 flex items-center justify-center pointer-events-none select-none",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Total"}),i.jsx("div",{className:"text-2xl font-bold",children:r})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),i.jsx(Ko,{width:"100%",height:300,children:i.jsxs(yf,{data:e.porSupervisor,layout:"vertical",margin:{left:12,right:12},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradGreen",x1:"0",y1:"0",x2:"1",y2:"0",children:[i.jsx("stop",{offset:"0%",stopColor:"#06B6D4"}),i.jsx("stop",{offset:"100%",stopColor:"#22C55E"})]})}),i.jsx(Rc,{type:"number",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),i.jsx(Lc,{type:"category",dataKey:"name",width:140,axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12}}),i.jsx(qo,{cursor:{fill:"rgba(148,163,184,0.15)"}}),i.jsx(Ed,{dataKey:"value",fill:"url(#gradGreen)",name:"Empresas",radius:[8,8,8,8]})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1 lg:col-span-3",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Distribucin por Comuna"}),i.jsx(Ko,{width:"100%",height:300,children:i.jsxs(yf,{data:e.porComuna,margin:{left:0,right:0},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradIndigo",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),i.jsx("stop",{offset:"100%",stopColor:"#8B5CF6"})]})}),i.jsx(Rc,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12},interval:0,angle:-15,height:60,dy:10}),i.jsx(Lc,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),i.jsx(qo,{cursor:{fill:"rgba(99,102,241,0.08)"}}),i.jsx(Ed,{dataKey:"value",name:"Empresas",fill:"url(#gradIndigo)",radius:[6,6,0,0]})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Calificacin por mbito"}),i.jsx(Ko,{width:"100%",height:300,children:i.jsxs(Uat,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[i.jsx(qhe,{stroke:"#e2e8f0"}),i.jsx(vT,{dataKey:"subject",tick:{fill:"#64748b",fontSize:12}}),i.jsx(gT,{angle:30,domain:[0,5],tick:{fill:"#94a3b8",fontSize:10}}),i.jsx(D9,{name:"Promedio",dataKey:"A",stroke:"#06B6D4",fill:"#06B6D4",fillOpacity:.35}),i.jsx(qo,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-slate-900 col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),i.jsx("div",{className:"overflow-y-auto max-h-[300px] divide-y",children:(e.ranking||[]).map((l,c)=>i.jsxs("div",{className:"flex items-center justify-between py-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-sm font-semibold text-slate-600",children:c+1}),i.jsx("span",{className:"font-medium",children:l.nombre})]}),i.jsxs("span",{className:"font-bold text-amber-500",children:[(l.promedio||0).toFixed(1)," "]})]},l.id||c))})]})]})]})},i2t=({data:e})=>i.jsx(qxe,{data:e}),o2t=()=>{const{currentUser:e}=jE(),[t,r]=w.useState([]),[n,a]=w.useState([]),[s,o]=w.useState([]),[l,c]=w.useState("todos"),[u,d]=w.useState("list"),[f,A]=w.useState(!0),[m,g]=w.useState(null),[x,v]=w.useState(!0),[y,N]=w.useState(null),[C,_]=w.useState(null),[j,I]=w.useState(null),[T,k]=w.useState([]),[B,M]=w.useState(null),[P,S]=w.useState(!1),[L,U]=w.useState("DRIVING"),[q,H]=w.useState(""),[z,W]=w.useState([]),[Z,V]=w.useState(void 0),[Y,R]=w.useState({}),[O,K]=w.useState({}),J="AIzaSyDjpSq97TvCxx7jIY7fEapTysmiZ1H30bg",{isLoaded:ce,error:oe}=n2t(J),re=w.useMemo(()=>{const Ie=new Map;return s.forEach(ft=>Ie.set(ft.id,ft)),Ie},[s]),ue=Ie=>t.find(vt=>vt.id===Ie.id)||Ie,le=Ie=>{const ft=t.find(Ct=>Ct.id===Ie),vt=(ft==null?void 0:ft.estudiantesAsignados)||[],et=[];return vt.forEach(Ct=>{const St=re.get(Ct);St&&et.push(St)}),et},ve=w.useMemo(()=>{const Ie=e==null?void 0:e.profile;return Ie===Ot.SUBDIRECCION||Ie===Ot.PROFESORADO||Ie===Ot.COORDINACION_TP},[e==null?void 0:e.profile]);w.useEffect(()=>{if(!ve){v(!1);return}v(!0);const Ie=cme(r),ft=Wlt(a),vt=Klt(o),et=Ylt(W);return v(!1),()=>{Ie(),ft(),vt(),et(),Object.values(Y).forEach(Ct=>{var St;return(St=Ct.unsub)==null?void 0:St.call(Ct)})}},[ve]),w.useEffect(()=>{Object.values(Y).forEach(et=>{var Ct;return(Ct=et.unsub)==null?void 0:Ct.call(et)});const Ie={},ft=et=>!!et&&(et.startsWith("3")||et.startsWith("4"));let vt=s.filter(et=>ft(et.curso));return l!=="todos"&&(vt=vt.filter(et=>(et.curso||"")===l)),vt.forEach(et=>{const Ct=Ipt(et.id,St=>{R(ot=>({...ot,[et.id]:{...ot[et.id]||{},notas:St}}))});Ie[et.id]={notas:[],unsub:Ct}}),R(et=>({...et,...Ie})),()=>{Object.values(Ie).forEach(et=>et.unsub&&et.unsub())}},[s,l]);const X=w.useMemo(()=>{const Ie=t.reduce((St,ot)=>{const nr=ot.area||"Sin especificar";return St[nr]=(St[nr]||0)+1,St},{}),ft=t.reduce((St,ot)=>{var fr;const nr=((fr=ot.docenteSupervisor)==null?void 0:fr.nombreCompleto)||"Sin asignar";return St[nr]=(St[nr]||0)+1,St},{}),vt=t.reduce((St,ot)=>{const nr=ot.direccion.split(",").map(Zt=>Zt.trim()),fr=nr.length>1?nr[1]:"Desconocida";return St[fr]=(St[fr]||0)+1,St},{}),et=Gxe.map(St=>{const ot=t.flatMap(fr=>{var Zt;return(Zt=fr.calificaciones.find(Ft=>Ft.elemento===St.elemento))==null?void 0:Zt.score}).filter(fr=>fr!=null),nr=ot.length>0?ot.reduce((fr,Zt)=>fr+Zt,0)/ot.length:0;return{subject:St.elemento.split(" ")[0],A:nr,fullMark:5}}),Ct=t.map(St=>{const ot=St.calificaciones.map(fr=>fr.score).filter(fr=>fr!=null),nr=ot.length>0?ot.reduce((fr,Zt)=>fr+Zt,0)/ot.length:0;return{...St,promedio:nr}}).filter(St=>St.promedio>0).sort((St,ot)=>ot.promedio-St.promedio);return{porEspecialidad:Object.entries(Ie).map(([St,ot])=>({name:St,value:ot})),porSupervisor:Object.entries(ft).map(([St,ot])=>({name:St,value:ot})),porComuna:Object.entries(vt).map(([St,ot])=>({name:St,value:ot})),calificacionPorAmbito:et,ranking:Ct}},[t]),Ee=async()=>{if(m)try{const Ie=new Set(m.estudiantesAsignados||[]),ft=m.id,vt=[];if(Ie.size>0){const et=new Map(s.map(Ct=>[Ct.id,Ct]));for(const Ct of t){if(ft&&Ct.id===ft)continue;const St=Ct.estudiantesAsignados||[];for(const ot of Ie)if(St.includes(ot)){const nr=et.get(ot);nr&&vt.push({student:nr,empresa:Ct})}}}if(vt.length>0){const Ct=`Algunos estudiantes ya estn asignados a otra empresa:

${vt.map(nr=>` ${nr.student.nombreCompleto}${nr.student.curso?` (${nr.student.curso})`:""}  ${nr.empresa.nombre}`).join(`
`)}

Deseas reasignarlos a "${m.nombre}"? Esto los quitar de su empresa anterior.`;if(!window.confirm(Ct))return;const ot=new Map;for(const{student:nr,empresa:fr}of vt)ot.has(fr.id)||ot.set(fr.id,{empresa:fr,ids:new Set}),ot.get(fr.id).ids.add(nr.id);for(const{empresa:nr,ids:fr}of ot.values()){const Zt=(nr.estudiantesAsignados||[]).filter(Ft=>!fr.has(Ft));await Yw({...nr,estudiantesAsignados:Zt})}}await Yw(m),d("list"),g(null),N(null)}catch(Ie){console.error(Ie),alert("No se pudo guardar la empresa.")}},Be=async Ie=>{window.confirm("Est seguro de eliminar esta empresa?")&&await qlt(Ie)},je=(Ie,ft)=>{g(vt=>vt?{...vt,[Ie]:ft}:null)},fe=async Ie=>{var ft;if(N(Ie),(ft=Ie==null?void 0:Ie.value)!=null&&ft.place_id&&ce){const vt=await ye(Ie.value.place_id);je("direccion",Ie.label||""),je("coordenadas",vt)}else je("direccion",(Ie==null?void 0:Ie.label)||"")},ye=async Ie=>window.google?await new Promise(ft=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:Ie,fields:["geometry"]},(et,Ct)=>{var St;Ct===window.google.maps.places.PlacesServiceStatus.OK&&((St=et==null?void 0:et.geometry)!=null&&St.location)?ft({lat:et.geometry.location.lat(),lng:et.geometry.location.lng()}):ft(null)})}):null,Ae=Ie=>{g(JSON.parse(JSON.stringify(Ie))),Ie.direccion&&N({label:Ie.direccion,value:{description:Ie.direccion}}),d("form")},se=async Ie=>{var ft;if(_(Ie),(ft=Ie==null?void 0:Ie.value)!=null&&ft.place_id&&ce){const vt=await ye(Ie.value.place_id);I(vt)}},ne=Ie=>{k(ft=>ft.some(vt=>vt.id===Ie.id)?ft.filter(vt=>vt.id!==Ie.id):[...ft,Ie])},de=()=>{if(!j||T.length===0||!ce)return;S(!0);const Ie=new window.google.maps.DirectionsService,ft=T.filter(St=>St.coordenadas).map(St=>({location:St.coordenadas,stopover:!0})),vt=ft.slice(0,23);ft.length>vt.length&&console.warn("Se limitaron las paradas a 23 por restriccin de Google Directions.");const et=St=>({origin:j,destination:j,waypoints:vt,optimizeWaypoints:!0,travelMode:St,region:"CL",provideRouteAlternatives:!1}),Ct=async(St,ot=3)=>await new Promise((nr,fr)=>{const Zt=Ft=>{Ie.route(et(St),(dr,Sr)=>{if(Sr===window.google.maps.DirectionsStatus.OK&&dr)nr(dr);else if(Sr===window.google.maps.DirectionsStatus.UNKNOWN_ERROR||Sr===window.google.maps.DirectionsStatus.OVER_QUERY_LIMIT)if(Ft<ot){const _r=400*Math.pow(2,Ft);setTimeout(()=>Zt(Ft+1),_r)}else fr(Sr);else window.google.maps.DirectionsStatus.ZERO_RESULTS,fr(Sr)})};Zt(0)});(async()=>{try{const St=window.google.maps.TravelMode[L];let ot=await Ct(St);M(ot)}catch(St){if(L==="TRANSIT")try{const ot=await Ct(window.google.maps.TravelMode.DRIVING);M(ot),alert("No se encontr una ruta en transporte pblico. Se us Automvil como alternativa.")}catch(ot){console.error("Fallo al calcular ruta (fallback DRIVING):",ot),alert("No se pudo calcular la ruta en este momento. Intenta nuevamente ms tarde.")}else console.error("Fallo al calcular ruta:",St),alert("No se pudo calcular la ruta en este momento. Intenta nuevamente ms tarde.")}finally{S(!1)}})()},me=()=>{M(null),_(null),I(null),k([]),H("")},ge=async()=>{if(!q||!C||!j||T.length===0){alert("Por favor, asigna un nombre a la ruta y asegrate de tener un punto de partida y empresas seleccionadas.");return}const Ie={nombre:q,startPoint:{label:C.label,coords:j},empresas:T.map(ft=>({id:ft.id,nombre:ft.nombre,coordenadas:ft.coordenadas})),travelMode:L,supervisor:Z};try{await Xlt(Ie),alert("Ruta guardada con xito."),d("saved-routes")}catch{alert("Error al guardar la ruta.")}},Te=Ie=>{let ft=0,vt=0;const et=[],Ct=St=>{let ot=St<0?~(St<<1):St<<1;for(;ot>=32;)et.push(String.fromCharCode((32|ot&31)+63)),ot>>=5;et.push(String.fromCharCode(ot+63))};for(const St of Ie){const ot=Math.round(St.lat*1e5),nr=Math.round(St.lng*1e5);Ct(ot-ft),Ct(nr-vt),ft=ot,vt=nr}return et.join("")},Ve=Ie=>{var ft;try{const vt=(ft=Ie==null?void 0:Ie.routes)==null?void 0:ft[0];if(!vt)return null;let et=[];if(vt.overview_path&&Array.isArray(vt.overview_path)&&vt.overview_path.length)et=vt.overview_path.map(Ct=>({lat:Ct.lat(),lng:Ct.lng()}));else if(vt.overview_polyline&&typeof vt.overview_polyline.getPath=="function")et=vt.overview_polyline.getPath().getArray().map(St=>({lat:St.lat(),lng:St.lng()}));else return null;if(et.length>200){const Ct=Math.ceil(et.length/200),St=[];for(let ot=0;ot<et.length;ot+=Ct)St.push(et[ot]);St[St.length-1]!==et[et.length-1]&&St.push(et[et.length-1]),et=St}return et}catch{return null}},Xe=(Ie,ft,vt,et,Ct,St,ot)=>{if(!Ct||Ct.length<2)return!1;const nr=Ct.map(ke=>ke.lat),fr=Ct.map(ke=>ke.lng),Zt=Math.min(...nr),Ft=Math.max(...nr),dr=Math.min(...fr),Sr=Math.max(...fr),_r=3,Vn=et-_r*2,qa=et-_r*2,ar=Sr-dr||1e-6,fn=Ft-Zt||1e-6,$r=Math.min(Vn/ar,qa/fn),mn=ft+_r,In=vt+_r;Ie.setDrawColor(200),Ie.setFillColor(255,255,255),Ie.rect(ft,vt,et,et,"FD"),Ie.setDrawColor(30,58,138),Ie.setLineWidth(.6);for(let ke=1;ke<Ct.length;ke++){const $e=Ct[ke-1],Re=Ct[ke],Me=mn+($e.lng-dr)*$r,we=In+(Ft-$e.lat)*$r,xe=mn+(Re.lng-dr)*$r,De=In+(Ft-Re.lat)*$r;Ie.line(Me,we,xe,De)}const $n=(ke,$e,Re,Me)=>{Ie.setFillColor(...Me),Ie.circle(ke,$e,Re,"F")};if(St){const ke=mn+(St.lng-dr)*$r,$e=In+(Ft-St.lat)*$r;$n(ke,$e,1.6,[34,197,94])}return ot&&ot.length&&ot.slice(0,5).forEach(ke=>{const $e=mn+(ke.lng-dr)*$r,Re=In+(Ft-ke.lat)*$r;$n($e,Re,1.4,[239,68,68])}),!0},Ke=async(Ie,ft,vt)=>{const et=await fetch("/api/staticMapBuild",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enc:Ie,size:"640x640",scale:2,maptype:"roadmap",region:"CL",start:ft,stops:(vt||[]).slice(0,8)})});if(!et.ok)throw new Error(`staticMapBuild HTTP ${et.status}`);const Ct=await et.blob();return await new Promise((St,ot)=>{const nr=new FileReader;nr.onloadend=()=>St(String(nr.result)),nr.onerror=ot,nr.readAsDataURL(Ct)})},Qe=async Ie=>{const ft=Ve(Ie)||[],et={pathEnc:Te(ft),start:j,stops:T.filter(ot=>ot.coordenadas).map(ot=>ot.coordenadas),size:640,maptype:"roadmap"},Ct=await fetch("/api/staticMapBuild",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(et)});if(!Ct.ok)throw new Error(`staticMapBuild HTTP ${Ct.status}`);const St=await Ct.blob();return await new Promise((ot,nr)=>{const fr=new FileReader;fr.onloadend=()=>ot(String(fr.result)),fr.onerror=nr,fr.readAsDataURL(St)})},Je=async Ie=>{const ft=await fetch(Ie);if(!ft.ok)throw new Error(`image HTTP ${ft.status}`);const vt=await ft.blob();return await new Promise((et,Ct)=>{const St=new FileReader;St.onloadend=()=>et(String(St.result)),St.onerror=Ct,St.readAsDataURL(vt)})},mt=async()=>{var Pd,$l;if(!B){alert("Falta informacin para generar el PDF. Primero visualiza la ruta.");return}const Ie=new Tr("p","mm","a4"),ft=Ie.internal.pageSize.getWidth(),vt=Ie.internal.pageSize.getHeight(),et=10,Ct=ft-et*2,St=10;let ot=et;const nr=()=>{ot+6>vt-et&&(Ie.addPage(),ot=et),Ie.setFont("helvetica","bold"),Ie.setFontSize(14);const kr=`Ruta de Supervisin: ${q||"Sin nombre"}`;Ie.text(kr,et,ot+6),ot+=9;const rn=new Date,yn=String(rn.getDate()).padStart(2,"0"),Ur=String(rn.getMonth()+1).padStart(2,"0"),Un=rn.getFullYear(),Ei=`Fecha: ${yn}-${Ur}-${Un}`,Zo=`Modo: ${L==="DRIVING"?"Automvil":"Transporte Pblico"}`,Hi=Z!=null&&Z.nombreCompleto?`Supervisor: ${Z.nombreCompleto}`:"",Pn=[Ei,Zo,Hi].filter(Boolean).join("    ");Ie.setFont("helvetica","normal"),Ie.setFontSize(10),Ie.setTextColor(100,116,139);const el=Ie.splitTextToSize(Pn,Ct);for(const Qi of el)ot+5>vt-et&&(Ie.addPage(),ot=et),Ie.text(Qi,et,ot),ot+=5;Ie.setTextColor(0,0,0),ot+=4};try{const rn=await Je("https://res.cloudinary.com/dwncmu1wu/image/upload/v1756260600/Captura_de_pantalla_2025-08-26_a_la_s_10.09.17_p._m._aakgkt.png"),yn=15,Ur=Ct;Ie.addImage(rn,"PNG",et,ot,Ur,yn),ot+=yn+4,nr()}catch{ot+=4,nr()}ot+=Math.max(0,St-4);const fr=document.getElementById("map-container-for-pdf"),Zt=Math.min(Ct,120);let Ft=!1;try{const kr=await Qe(B);ot+Zt>vt-et&&(Ie.addPage(),ot=et),Ie.addImage(kr,"PNG",et,ot,Zt,Zt),ot+=Zt+St,Ft=!0}catch{}if(!Ft)try{const kr=Ve(B);if(kr&&kr.length>=2){const rn=Te(kr),yn=T.filter(Un=>Un.coordenadas).map(Un=>Un.coordenadas),Ur=await Ke(rn,j||void 0,yn);ot+Zt>vt-et&&(Ie.addPage(),ot=et),Ie.addImage(Ur,"PNG",et,ot,Zt,Zt),ot+=Zt+St,Ft=!0}}catch{}if(!Ft&&fr)try{const rn=(await zxe(fr,{useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",scale:2})).toDataURL("image/png");ot+Zt>vt-et&&(Ie.addPage(),ot=et),Ie.addImage(rn,"PNG",et,ot,Zt,Zt),ot+=Zt+St,Ft=!0}catch{}if(!Ft){const kr=Ve(B)||[];kr.length>=2&&(ot+Zt>vt-et&&(Ie.addPage(),ot=et),Xe(Ie,et,ot,Zt,kr,j,T.filter(yn=>yn.coordenadas).map(yn=>yn.coordenadas))&&(ot+=Zt+St,Ft=!0))}Ft||(Ie.setDrawColor(200),Ie.setFillColor(245,245,245),ot+Zt>vt-et&&(Ie.addPage(),ot=et),Ie.rect(et,ot,Zt,Zt,"FD"),Ie.setTextColor(120),Ie.setFontSize(11),Ie.text("Mapa no disponible para captura. (Se omiti en el PDF)",et+Zt/2,ot+Zt/2,{align:"center"}),Ie.setTextColor(0),ot+=Zt+St);const dr=6,Sr=kr=>{ot+dr>vt-et&&(Ie.addPage(),ot=et),Ie.setFontSize(12),Ie.setFont("helvetica","bold"),Ie.text(kr,et,ot),Ie.setFont("helvetica","normal"),ot+=dr};Sr("Detalles de la Ruta"),Ie.setFontSize(10);const _r=B.routes[0].legs||[],Vn=_r.reduce((kr,rn)=>{var yn;return kr+(((yn=rn.duration)==null?void 0:yn.value)||0)},0),fn=(_r.length>1?_r.length-1:0)*(L==="TRANSIT"?45:30)*60,$r=Vn+fn,mn=_r.reduce((kr,rn)=>{var yn;return kr+(((yn=rn.distance)==null?void 0:yn.value)||0)},0),ke=L==="DRIVING"?mn/1e3/12*1300:0,$e=[{label:"Tiempo de viaje",value:`${Math.round(Vn/60)} min`},{label:"Tiempo en paradas",value:`${Math.round(fn/60)} min`},{label:"Duracin total",value:`${Math.round($r/60)} min`},{label:"Distancia total",value:`${(mn/1e3).toFixed(1)} km`},{label:"Costo estimado",value:L==="DRIVING"?`$${Math.round(ke).toLocaleString("es-CL")}`:""}],Re=5,Me=4,we=(Ct-Me*(Re-1))/Re,xe=16;let De=et,Ge=ot+2;for(let kr=0;kr<$e.length;kr++)Ge+xe>vt-et&&(Ie.addPage(),Ge=et,De=et),Ie.setFillColor(248,250,252),Ie.setDrawColor(226,232,240),Ie.rect(De,Ge,we,xe,"FD"),Ie.setTextColor(100,116,139),Ie.setFontSize(8),Ie.setFont("helvetica","normal"),Ie.text($e[kr].label,De+2,Ge+4),Ie.setTextColor(0,0,0),Ie.setFontSize(11),Ie.setFont("helvetica","bold"),Ie.text(String($e[kr].value),De+2,Ge+xe-5),(kr+1)%Re===0?(De=et,Ge+=xe+2):De+=we+Me;ot=Ge+($e.length%Re===0?0:xe)+St;const Ue=2,Ze=4,rt=(Ct-Ze*(Ue-1))/Ue,_t=2,Bt=5,Kt=4;Ie.setFont("helvetica","normal"),Ie.setFontSize(10);let Ut=0,Jt=0,jr=ot;for(let kr=0;kr<_r.length;kr++){const rn=_r[kr],yn=et+Ut*(rt+Ze),Ur=(rn.start_address||"").split(",")[0],Un=(rn.end_address||"").split(",")[0],Ei=`${Ur} -> ${Un}
${((Pd=rn.duration)==null?void 0:Pd.text)||""}  ${(($l=rn.distance)==null?void 0:$l.text)||""}`,Zo=rt-_t*2,Hi=Ie.splitTextToSize(Ei,Zo),Pn=Hi.length*Kt,el=Bt+2+Pn+2,_o=Math.max(18,el);jr+_o>vt-et&&(Ie.addPage(),jr=et,ot=et,Ut=0,Jt=0),Ie.setFillColor(248,250,252),Ie.setDrawColor(226,232,240),Ie.rect(yn,jr,rt,_o,"FD"),Ie.setTextColor(100,116,139),Ie.setFontSize(8),Ie.text(`Tramo ${kr+1}`,yn+_t,jr+4),Ie.setTextColor(0,0,0),Ie.setFontSize(10),Ie.setFont("helvetica","normal");let Fd=jr+4+2;for(const Rd of Hi)Ie.text(Rd,yn+_t,Fd+5),Fd+=Kt;Jt=Math.max(Jt,_o),Ut++,Ut===Ue&&(jr+=Jt+3,ot=jr,Jt=0,Ut=0)}Ut!==0&&(ot=jr+Jt+St);const on=(kr,rn,yn,Ur=10)=>{Ie.setFontSize(Ur);const Un=Ie.splitTextToSize(kr,yn);for(const Ei of Un)ot+4>vt-et&&(Ie.addPage(),ot=et),Ie.text(Ei,rn,ot),ot+=4};Sr("Estudiantes por empresa"),Ie.setFont("helvetica","normal");const ln=Ct,hn=T.map(kr=>ue(kr));for(const kr of hn){ot+8>vt-et&&(Ie.addPage(),ot=et),Ie.setFont("helvetica","bold"),Ie.setFontSize(10);const rn=(kr==null?void 0:kr.nombre)||"Empresa";Ie.text(rn,et,ot),ot+=5,Ie.setFont("helvetica","normal");const yn=(kr==null?void 0:kr.estudiantesAsignados)||[];if(yn.length===0)on(" Sin estudiantes asignados",et,ln,10);else{const Ur=yn.map(Un=>re.get(Un)).filter(Boolean);for(const Un of Ur){const Ei=` ${Un.nombreCompleto}${Un.curso?` (${Un.curso})`:""}`;on(Ei,et,ln,10)}}ot+=2}ot+=St;const Ka=kr=>{ot+kr>vt-et&&(Ie.addPage(),ot=et)};Ka(20),Ie.setFontSize(11),Ie.setFont("helvetica","bold"),Ie.text("Firmas",et,ot),Ie.setFont("helvetica","normal"),ot+=8;const Ci=T.map(kr=>kr.nombre||"Empresa"),Da=3,us=12,Oa=(Ct-us*(Da-1))/Da,ds=14,la=[et,et+Oa+us,et+(Oa+us)*2];for(let kr=0;kr<Ci.length;kr++){const rn=kr%Da;rn===0&&Ka(ds+8);const yn=la[rn];Ie.line(yn,ot,yn+Oa,ot),Ie.setFontSize(9);const Ur=`Firma representante: ${Ci[kr]}`;Ie.text(Ur.length>60?Ur.slice(0,59)+"":Ur,yn+Oa/2,ot+6,{align:"center"}),rn===Da-1&&(ot+=ds)}Ci.length%Da!==0&&(ot+=ds),Ka(ds+8);const fs=la[1];Ie.line(fs,ot,fs+Oa,ot),Ie.setFontSize(9);const Mu=Z!=null&&Z.nombreCompleto?`Firma profesor tutor: ${Z.nombreCompleto}`:"Firma profesor tutor";Ie.text(Mu,fs+Oa/2,ot+6,{align:"center"});try{Ie.save(`ruta-${q||"supervision"}.pdf`)}catch(kr){console.error(kr),alert("No se pudo descargar el PDF. Reintenta o prueba en otro navegador.")}},We=Ie=>{_({label:Ie.startPoint.label,value:null}),I(Ie.startPoint.coords),k(Ie.empresas),U(Ie.travelMode),H(Ie.nombre),V(Ie.supervisor),d("route")},He=async Ie=>{window.confirm("Ests seguro de que quieres eliminar esta ruta guardada?")&&(await Jlt(Ie),alert("Ruta eliminada."))},Tt=async(Ie,ft)=>{try{const vt=t.find(St=>(St.estudiantesAsignados||[]).includes(Ie.id))||null;if(!ft){if(!vt)return;const St=(vt.estudiantesAsignados||[]).filter(ot=>ot!==Ie.id);await Yw({...vt,estudiantesAsignados:St});return}const et=t.find(St=>St.id===ft);if(!et){alert("Empresa no encontrada.");return}if(vt&&vt.id===et.id)return;if(vt){const St=`"${Ie.nombreCompleto}" ya est asignado a "${vt.nombre}".

Deseas reasignarlo a "${et.nombre}"?`;if(!window.confirm(St))return}if(vt){const St=(vt.estudiantesAsignados||[]).filter(ot=>ot!==Ie.id);await Yw({...vt,estudiantesAsignados:St})}const Ct=new Set(et.estudiantesAsignados||[]);Ct.add(Ie.id),await Yw({...et,estudiantesAsignados:Array.from(Ct)})}catch(vt){console.error(vt),alert("No se pudo asignar la empresa.")}};return x?i.jsx("div",{className:"text-center p-8",children:"Cargando..."}):ve?oe?i.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-6 rounded-xl shadow-md",role:"alert",children:[i.jsx("p",{className:"font-bold text-lg",children:"Error de Configuracin de Google Maps"}),i.jsx("p",{className:"mt-2",children:oe.message}),i.jsxs("p",{className:"mt-4 text-sm",children:["Para solucionar este problema, por favor crea un archivo llamado ",i.jsx("code",{children:".env.local"})," en la raz del proyecto y aade la siguiente lnea:"]}),i.jsx("pre",{className:"bg-gray-800 text-white p-3 rounded-md mt-2 text-sm",children:"VITE_GOOGLE_MAPS_API_KEY=TU_API_KEY_DE_GOOGLE_MAPS"}),i.jsxs("p",{className:"mt-2 text-sm",children:["Reemplaza ",i.jsx("code",{children:"TU_API_KEY_DE_GOOGLE_MAPS"}),' con tu clave real. Asegrate de que la clave tenga habilitada la "Maps JavaScript API" y la "Places API" en tu consola de Google Cloud.']})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Gestin de Empresas"}),i.jsxs("div",{className:"flex items-center gap-4",children:[u!=="list"&&i.jsx("button",{onClick:()=>{d("list"),N(null),g(null),me()},className:"font-semibold hover:text-blue-600",children:" Volver al listado"}),u==="list"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>d("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[i.jsx(goe,{size:18})," Dashboard"]}),i.jsx("button",{onClick:()=>d("estudiantes"),title:"Estudiantes",className:"bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Estudiantes"}),i.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-700 text-sm",children:[i.jsx("span",{children:"Vista moderna"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f,onChange:Ie=>A(Ie.target.checked)}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full dark:bg-gray-600 peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all"})]})]}),i.jsx("button",{onClick:()=>d("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),i.jsx("button",{onClick:()=>d("route"),title:"Ruta de Supervisin",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisin"}),i.jsx("button",{onClick:()=>d("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:()=>{g(s2t()),d("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),u==="dashboard"&&(f?i.jsx(qxe,{data:X}):i.jsx(i2t,{data:X})),u==="estudiantes"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Estudiantes (3 y 4)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Curso"}),i.jsxs("select",{value:l,onChange:Ie=>c(Ie.target.value),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"todos",children:"Todos"}),hp.map(Ie=>i.jsx("option",{value:Ie,children:Ie},Ie))]})]})]}),(()=>{const Ie=et=>!!et&&(et.startsWith("3")||et.startsWith("4"));let ft=s.filter(et=>Ie(et.curso));l!=="todos"&&(ft=ft.filter(et=>(et.curso||"")===l));const vt=et=>{for(const Ct of t){const St=Ct.estudiantesAsignados||[];if(St.includes(et.id)||et.email&&St.includes(et.email))return Ct}return null};return ft.length===0?i.jsx("div",{className:"text-center p-8 text-slate-500 bg-slate-50 dark:bg-slate-700/30 rounded-lg",children:"No hay estudiantes para el filtro seleccionado."}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ft.map(et=>{var St,ot,nr,fr,Zt;const Ct=vt(et);return i.jsxs("div",{className:"p-4 rounded-xl border bg-white dark:bg-slate-900 flex flex-col gap-3 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 text-indigo-700 flex items-center justify-center font-bold",children:((St=et.nombreCompleto)==null?void 0:St.split(" ").map(Ft=>Ft[0]).slice(0,2).join(""))||"E"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:et.nombreCompleto}),i.jsx("div",{className:"text-xs text-slate-500",children:et.curso||""})]})]}),i.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700"}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(TG,{className:"w-4 h-4 text-slate-400 mt-1"}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Empresa:"})," ",(Ct==null?void 0:Ct.nombre)||"Sin empresa asignada"]}),i.jsx("div",{className:"text-xs text-slate-500",children:(Ct==null?void 0:Ct.direccion)||""})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(fx,{className:"w-4 h-4 text-slate-400 mt-1"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"Supervisor:"})," ",((ot=Ct==null?void 0:Ct.docenteSupervisor)==null?void 0:ot.nombreCompleto)||""]})]}),i.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("label",{className:"text-xs text-slate-500",children:"Asignar empresa"}),i.jsxs("select",{value:(Ct==null?void 0:Ct.id)||"",onChange:Ft=>Tt(et,Ft.target.value),className:"border rounded-md px-2 py-1 text-sm dark:bg-slate-800 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Sin empresa"}),t.slice().sort((Ft,dr)=>(Ft.nombre||"").localeCompare(dr.nombre||"","es")).map(Ft=>i.jsx("option",{value:Ft.id,children:Ft.nombre},Ft.id))]})]}),i.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Notas de prctica"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{value:((nr=O[et.id])==null?void 0:nr.color)||"yellow",onChange:Ft=>K(dr=>{var Sr;return{...dr,[et.id]:{texto:((Sr=dr[et.id])==null?void 0:Sr.texto)||"",color:Ft.target.value}}}),className:"border rounded px-1 py-0.5 text-xs dark:bg-slate-800 dark:border-slate-600",children:[i.jsx("option",{value:"yellow",children:"Amarillo"}),i.jsx("option",{value:"pink",children:"Rosado"}),i.jsx("option",{value:"green",children:"Verde"}),i.jsx("option",{value:"blue",children:"Azul"})]}),i.jsx("button",{className:"text-xs bg-indigo-500 hover:bg-indigo-600 text-white px-2 py-1 rounded",onClick:async()=>{var _r,Vn;const Ft=(((_r=O[et.id])==null?void 0:_r.texto)||"").trim(),dr=((Vn=O[et.id])==null?void 0:Vn.color)||"yellow";if(!Ft)return;const Sr={estudianteId:et.id,estudianteNombre:et.nombreCompleto,curso:et.curso,autorId:(e==null?void 0:e.id)||"system",autorNombre:(e==null?void 0:e.nombreCompleto)||"Usuario",texto:Ft,color:dr};Ct!=null&&Ct.id&&(Sr.empresaId=Ct.id),Ct!=null&&Ct.nombre&&(Sr.empresaNombre=Ct.nombre),await Dpt(Sr),K(qa=>({...qa,[et.id]:{texto:"",color:dr}}))},children:"Agregar"})]})]}),i.jsx("textarea",{value:((fr=O[et.id])==null?void 0:fr.texto)||"",onChange:Ft=>K(dr=>{var Sr;return{...dr,[et.id]:{texto:Ft.target.value,color:((Sr=dr[et.id])==null?void 0:Sr.color)||"yellow"}}}),placeholder:"Escribe una nota breve...",className:"w-full border rounded p-2 text-sm dark:bg-slate-800 dark:border-slate-600",rows:2}),i.jsx("div",{className:"space-y-2",children:(((Zt=Y[et.id])==null?void 0:Zt.notas)||[]).map(Ft=>i.jsxs("div",{className:`rounded p-2 text-sm shadow border ${Ft.color==="pink"?"bg-pink-50 border-pink-200":Ft.color==="green"?"bg-green-50 border-green-200":Ft.color==="blue"?"bg-blue-50 border-blue-200":"bg-yellow-50 border-yellow-200"}`,children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"font-medium text-slate-700",children:Ft.autorNombre||"Usuario"}),i.jsx("button",{onClick:()=>Opt(Ft.id),className:"text-xs text-red-600 hover:underline",children:"Eliminar"})]}),i.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:Ft.texto})]},Ft.id))})]})]},et.id)})})})()]}),u==="saved-routes"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisin Guardadas"}),i.jsx("div",{className:"space-y-3",children:z.length===0?i.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):z.map(Ie=>i.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:Ie.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[Ie.empresas.length," paradas"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>We(Ie),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),i.jsx("button",{onClick:()=>He(Ie.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},Ie.id))})]}),u==="route"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisin"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),i.jsx("input",{type:"text",value:q,onChange:Ie=>H(Ie.target.value),placeholder:"Ej: Supervisin Zona Norte",className:"input-style w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),i.jsx(vte,{apiKey:J,selectProps:{value:C,onChange:se,placeholder:"Buscar direccin de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),i.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[i.jsx("button",{onClick:()=>U("DRIVING"),className:`w-full py-2 rounded-md transition ${L==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automvil"}),i.jsx("button",{onClick:()=>U("TRANSIT"),className:`w-full py-2 rounded-md transition ${L==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Pblico"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3.b Selecciona profesor supervisor (Coordinacin TP)"}),i.jsxs("select",{value:Z?JSON.stringify(Z):"",onChange:Ie=>{const ft=Ie.target.value;V(ft?JSON.parse(ft):void 0)},className:"input-style w-full",children:[i.jsx("option",{value:"",children:"Sin supervisor"}),n.filter(Ie=>Ie.profile===Ot.COORDINACION_TP).map(Ie=>i.jsx("option",{value:JSON.stringify({id:Ie.id,nombreCompleto:Ie.nombreCompleto}),children:Ie.nombreCompleto},Ie.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),i.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-2 space-y-2",children:t.filter(Ie=>Ie.coordenadas).map(Ie=>{const ft=le(Ie.id),vt=ft.map(Ct=>`${Ct.nombreCompleto}${Ct.curso?` (${Ct.curso})`:""}`),et=T.some(Ct=>Ct.id===Ie.id);return i.jsxs("div",{className:"py-1 px-2 rounded hover:bg-slate-50",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`route-${Ie.id}`,checked:et,onChange:()=>ne(Ie),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsxs("label",{htmlFor:`route-${Ie.id}`,className:"ml-3 text-sm text-gray-700",children:[Ie.nombre,ft.length>0&&i.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",ft.length," estudiante",ft.length!==1?"s":"",")"]})]})]}),ft.length>0&&i.jsx("div",{className:"ml-7 mt-1 text-xs text-slate-500 line-clamp-2",children:vt.join(", ")})]},Ie.id)})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("button",{onClick:de,disabled:!j||T.length===0||P,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:P?"Calculando...":"Visualizar Ruta"}),i.jsx("button",{onClick:ge,disabled:!q||!j||T.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),i.jsx("button",{onClick:mt,disabled:!B,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),i.jsx("button",{onClick:me,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),i.jsx("div",{})]}),B&&(()=>{var Zt;const Ie=((Zt=B.routes[0])==null?void 0:Zt.legs)||[],ft=Ie.reduce((Ft,dr)=>{var Sr;return Ft+(((Sr=dr.duration)==null?void 0:Sr.value)||0)},0),Ct=(Ie.length>1?Ie.length-1:0)*(L==="TRANSIT"?45:30)*60,St=ft+Ct,ot=Ie.reduce((Ft,dr)=>{var Sr;return Ft+(((Sr=dr.distance)==null?void 0:Sr.value)||0)},0),nr=L==="DRIVING"?ot/1e3/12*1300:0,fr=(()=>{const Ft=new Date,dr=String(Ft.getDate()).padStart(2,"0"),Sr=String(Ft.getMonth()+1).padStart(2,"0"),_r=Ft.getFullYear();return`${dr}-${Sr}-${_r}`})();return i.jsxs("div",{className:"bg-white shadow-lg rounded-2xl mx-auto max-w-5xl p-6 font-sans text-gray-800 mt-6",children:[i.jsxs("div",{className:"bg-slate-900 text-white rounded-xl px-6 py-3 mb-4 flex justify-between items-center",children:[i.jsxs("div",{className:"font-bold",children:["Ruta de Supervisin: ",q||"Sin nombre"]}),i.jsxs("div",{className:"text-sm opacity-90 flex gap-3",children:[i.jsx("span",{children:fr}),i.jsx("span",{children:""}),i.jsx("span",{children:L==="DRIVING"?"Automvil":"Transporte Pblico"})]})]}),i.jsx("div",{className:"rounded-xl shadow-sm border overflow-hidden mb-6",children:i.jsx(vre,{empresas:T,isLoaded:ce,route:B,heightPx:384})}),i.jsx("h3",{className:"text-lg font-bold mt-6",children:"Detalles de la Ruta"}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Tiempo de viaje"}),i.jsxs("div",{className:"font-semibold",children:[Math.round(ft/60)," min"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Tiempo en paradas"}),i.jsxs("div",{className:"font-semibold",children:[Math.round(Ct/60)," min"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Duracin total"}),i.jsxs("div",{className:"font-semibold",children:[Math.round(St/60)," min"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Distancia total"}),i.jsxs("div",{className:"font-semibold",children:[(ot/1e3).toFixed(1)," km"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Costo estimado"}),i.jsx("div",{className:"font-semibold",children:L==="DRIVING"?`$${Math.round(nr).toLocaleString("es-CL")}`:""})]})]}),i.jsx("div",{className:"mt-4 divide-y",children:Ie.map((Ft,dr)=>{var Sr,_r;return i.jsx("div",{className:"py-2",children:i.jsxs("div",{className:"text-sm",children:["Tramo ",dr+1,": ",(Ft.start_address||"").split(",")[0],"  ",(Ft.end_address||"").split(",")[0],". ",((Sr=Ft.duration)==null?void 0:Sr.text)||"","  ",((_r=Ft.distance)==null?void 0:_r.text)||""]})},dr)})}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Estudiantes por empresa"}),i.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:T.map(Ft=>{const dr=ue(Ft),Sr=(dr.estudiantesAsignados||[]).map(_r=>re.get(_r)).filter(Boolean);return i.jsxs("div",{className:"p-3 rounded-lg bg-slate-50 border",children:[i.jsx("div",{className:"font-semibold text-sm mb-1 break-words",children:dr.nombre}),Sr.length>0?i.jsx("ul",{className:"text-xs text-slate-700 list-disc list-inside space-y-0.5",children:Sr.map(_r=>i.jsxs("li",{children:[_r.nombreCompleto,_r.curso?` (${_r.curso})`:""]},_r.id))}):i.jsx("div",{className:"text-xs text-slate-500",children:"Sin estudiantes asignados"})]},dr.id)})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8 mt-10",children:[T.map((Ft,dr)=>i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"border-t-2 border-gray-400 h-10"}),i.jsxs("div",{className:"text-sm text-gray-600 mt-2 break-words",children:["Firma representante: ",Ft.nombre||"Empresa"]})]},Ft.id||dr)),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"border-t-2 border-gray-400 h-10"}),i.jsx("div",{className:"text-sm text-gray-600 mt-2 break-words",children:Z!=null&&Z.nombreCompleto?`Firma profesor tutor: ${Z.nombreCompleto}`:"Firma profesor tutor"})]})]})]})})()]}),u==="map"&&i.jsx(vre,{empresas:t,isLoaded:ce}),u==="list"&&i.jsx("div",{className:"space-y-3",children:t.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):t.map(Ie=>{var ft,vt;return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:Ie.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[Ie.rut," | ",Ie.direccion]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["rea: ",Ie.area||"No especificada"," | Cupos: ",Ie.cupos," | Supervisor: ",((ft=Ie.docenteSupervisor)==null?void 0:ft.nombreCompleto)||"Ninguno"," | Estudiantes: ",((vt=Ie.estudiantesAsignados)==null?void 0:vt.length)||0]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>Ae(Ie),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),i.jsx("button",{onClick:()=>Be(Ie.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},Ie.id)})}),u==="form"&&m&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"id"in m?"Editando Empresa":"Nueva Empresa"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(TG,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:m.nombre,onChange:Ie=>je("nombre",Ie.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(N4e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:m.rut,onChange:Ie=>je("rut",Ie.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(HN,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),i.jsx("div",{className:"w-full pl-10",children:i.jsx(vte,{apiKey:J,selectProps:{value:y,onChange:fe,placeholder:"Buscar direccin..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(fx,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:m.contacto,onChange:Ie=>je("contacto",Ie.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(xoe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"email",value:m.email||"",onChange:Ie=>je("email",Ie.target.value),placeholder:"Correo electrnico",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(Ys,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"number",value:m.cupos,onChange:Ie=>je("cupos",parseInt(Ie.target.value)||1),placeholder:"N de cupos",className:"input-style pl-10",min:"1"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(F1,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:m.area||"",onChange:Ie=>je("area",Ie.target.value),className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",disabled:!0,children:"Seleccione un rea"}),a2t.map(Ie=>i.jsx("option",{value:Ie,children:Ie},Ie))]})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(fx,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:m.docenteSupervisor?JSON.stringify(m.docenteSupervisor):"",onChange:Ie=>{const ft=Ie.target.value;je("docenteSupervisor",ft?JSON.parse(ft):void 0)},className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",children:"Sin supervisor asignado"}),n.map(Ie=>i.jsx("option",{value:JSON.stringify({id:Ie.id,nombreCompleto:Ie.nombreCompleto}),children:Ie.nombreCompleto},Ie.id))]})]}),i.jsxs("div",{className:"md:col-span-2 border rounded-lg p-4 bg-white dark:bg-slate-900",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estudiantes asignados"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-center",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Curso"}),i.jsxs("select",{className:"input-style w-full",value:l,onChange:Ie=>c(Ie.target.value),children:[i.jsx("option",{value:"todos",children:"Todos 3 y 4"}),i.jsx("option",{value:"3A",children:"3A"}),i.jsx("option",{value:"3B",children:"3B"}),i.jsx("option",{value:"3C",children:"3C"}),i.jsx("option",{value:"3D",children:"3D"}),i.jsx("option",{value:"4A",children:"4A"}),i.jsx("option",{value:"4B",children:"4B"}),i.jsx("option",{value:"4C",children:"4C"}),i.jsx("option",{value:"4D",children:"4D"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Selecciona estudiantes"}),i.jsxs("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2",children:[s.filter(Ie=>{const ft=(Ie.curso||"").toUpperCase(),vt=/^([34])[A-D]$/.test(ft),et=l==="todos"?vt:ft===l.toUpperCase();return vt&&et}).map(Ie=>{const ft=(m.estudiantesAsignados||[]).includes(Ie.id);return i.jsxs("label",{className:"flex items-center gap-2 py-1 px-2 rounded hover:bg-slate-50",children:[i.jsx("input",{type:"checkbox",checked:ft,onChange:vt=>{const et=new Set(m.estudiantesAsignados||[]);vt.target.checked?et.add(Ie.id):et.delete(Ie.id),je("estudiantesAsignados",Array.from(et))},className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),i.jsxs("span",{className:"text-sm",children:[Ie.nombreCompleto," ",i.jsxs("span",{className:"text-slate-500",children:["(",Ie.curso||"",")"]})]})]},Ie.id)}),s.filter(Ie=>{const ft=(Ie.curso||"").toUpperCase(),vt=/^([34])[A-D]$/.test(ft),et=l==="todos"?vt:ft===l.toUpperCase();return vt&&et}).length===0&&i.jsx("div",{className:"text-sm text-slate-500 p-2",children:"No hay estudiantes para el filtro seleccionado."})]})]})]})]})]}),i.jsxs("div",{className:"space-y-4 pt-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Evaluacin de la Empresa"}),m.calificaciones.map((Ie,ft)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[i.jsx(boe,{className:"w-5 h-5 text-slate-400"}),i.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:Ie.elemento}),i.jsxs("select",{value:Ie.score||"",onChange:vt=>{const et=[...m.calificaciones];et[ft].score=vt.target.value?parseInt(vt.target.value):null,je("calificaciones",et)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[i.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(vt=>i.jsx("option",{value:vt,children:vt},vt))]})]},ft))]}),i.jsx("div",{className:"pt-6",children:i.jsx("button",{onClick:Ee,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!m.nombre||!m.rut,children:"Guardar Empresa"})})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Gestin de Empresas"}),i.jsx("div",{className:"p-4 rounded-lg border bg-amber-50 text-amber-800",children:"No tienes permisos para acceder a este mdulo. Requiere perfil de Subdireccin, Profesorado o Coordinacin TP."})]})},qH="dpd_actividades",Kxe="dpd_respuestas",l2t="usuarios";function c2t(e,{includeArchived:t=!1}={}){const r=pt(dt,qH),n=t?Lt(r,tr("createdAt","desc")):Lt(r,ur("isArchived","==",!1),tr("createdAt","desc"));return hr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));e(s)})}async function u2t(e){const t=pt(dt,qH);return(await dn(t,{...e,isArchived:!1,createdAt:Xn(),updatedAt:Xn()})).id}async function d2t(e){const t=er(dt,qH,e);await fa(t)}function f2t(e,t){const r=pt(dt,Kxe),n=Lt(r,ur("activityId","==",e),tr("createdAt","desc"));return hr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));t(s)})}async function h2t(e){const t=pt(dt,Kxe);return(await dn(t,{...e,createdAt:Xn()})).id}function A2t(e,t){const r=pt(dt,l2t),n=Lt(r,ur("profile","in",e));return hr(n,a=>{const s=a.docs.map(o=>{const l=o.data();return{id:o.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(s)})}function Wxe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const E4=500,bre=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificacin y organizacin del currculo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),c2=At.memo(({title:e,icon:t,right:r,children:n})=>i.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[i.jsxs("header",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),m2t=At.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>i.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return i.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),p2t=At.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?i.jsx("ul",{className:"space-y-2",children:e.map(s=>{const o=s.id===t;return i.jsxs("li",{children:[i.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${o?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo}  ${s.dimension} / ${s.subdimension}`,children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(e0,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:s.titulo})]}),i.jsx(XC,{className:"w-4 h-4 opacity-70"})]}),n(s)&&i.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):i.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(d4e,{className:"w-4 h-4"})," An no hay actividades creadas."]})),vP=At.memo(({label:e,value:t,pill:r})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?i.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):i.jsx("span",{className:"font-medium",children:t})]})),g2t=At.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return i.jsxs("div",{className:"relative mt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),i.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),i.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:i.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),x2t=At.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=w.useCallback(o=>r(e.id,o.target.value),[e.id,r]),s=w.useCallback(()=>n(e.id),[e.id,n]);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opcin ${t.findIndex(o=>o.id===e.id)+1}`}),i.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opcin",children:i.jsx(Qn,{className:"w-4 h-4"})})]})}),v2t=At.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=w.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=w.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),o=w.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),l=w.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=w.useCallback((f,A)=>{n(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:A}:m)})},[e.id,e.opciones,n]),u=w.useCallback(f=>n(e.id,{opciones:e.opciones.filter(A=>A.id!==f)}),[e.id,e.opciones,n]),d=w.useCallback(()=>r(e.id),[e.id,r]);return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1,"  ",e.tipo==="abierta"?"Abierta":"Seleccin mltiple"]}),i.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:i.jsx(Qn,{className:"w-4 h-4"})})]}),i.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("label",{className:"text-sm",children:"Mx. palabras"}),i.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||E4,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:o})," Permitir seleccin mltiple"]}),e.opciones.map(f=>i.jsx(x2t,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),i.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Aadir opcin"})]})]})}),b2t=At.memo(({q:e,respuestas:t,onChange:r})=>{var o,l;const n=w.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((o=t[e.id])==null?void 0:o.valorTexto)||"";return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Mximo ${e.maxPalabras||E4} palabras`,className:"w-full border rounded-lg px-3 py-2"}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[Wxe(c)," / ",e.maxPalabras||E4," palabras"]})]})}const a=((l=t[e.id])==null?void 0:l.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return i.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),i.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),y2t=({currentUser:e})=>{var R;const[t,r]=w.useState("responder"),[n,a]=w.useState([]),[s,o]=w.useState(""),[l,c]=w.useState(""),[u,d]=w.useState(bre()),f=w.useCallback(O=>d(K=>({...K,...O})),[]),[A,m]=w.useState([]),[g,x]=w.useState({}),[v,y]=w.useState([]),N=QG.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);w.useEffect(()=>{const O=c2t(K=>{a(K),o(J=>{var ce;return J||(((ce=K[0])==null?void 0:ce.id)??"")})});return()=>O()},[]),w.useEffect(()=>{const O=A2t(["PROFESORADO","SUBDIRECCION"],K=>{m(K),d(J=>{if(J.creadorId)return J;const ce=K.find(oe=>oe.id===(e==null?void 0:e.uid));return ce?{...J,creadorId:ce.id,creadorNombre:ce.nombre,creadorPerfil:ce.profile||J.creadorPerfil}:J})});return()=>O()},[e]),w.useEffect(()=>{if(!s)return;const O=f2t(s,y);return()=>O()},[s]);const C=w.useMemo(()=>n.find(O=>O.id===s),[n,s]);w.useMemo(()=>G0[u.dimension]||[],[u.dimension]),w.useEffect(()=>{d(O=>{const K=G0[O.dimension]||[],J=K.includes(O.subdimension)?O.subdimension:K[0]||"";return J===O.subdimension?O:{...O,subdimension:J}})},[u.dimension]);const _=w.useCallback(()=>{const O={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aqu tu pregunta abierta",maxPalabras:E4};d(K=>({...K,preguntas:[...K.preguntas,O]}))},[]),j=w.useCallback(()=>{const O={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opcin(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opcin 1"},{id:crypto.randomUUID(),text:"Opcin 2"},{id:crypto.randomUUID(),text:"Opcin 3"},{id:crypto.randomUUID(),text:"Opcin 4"}],multiple:!0};d(K=>({...K,preguntas:[...K.preguntas,O]}))},[]),I=w.useCallback((O,K)=>{d(J=>({...J,preguntas:J.preguntas.map(ce=>ce.id===O?{...ce,...K}:ce)}))},[]),T=w.useCallback(O=>{d(K=>({...K,preguntas:K.preguntas.filter(J=>J.id!==O)}))},[]),[k,B]=w.useState(!1),M=w.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){B(!0);try{const K=(await zUe(u.aiTema,u.aiCantidad)).map(J=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:J.enunciado,opciones:J.opciones.slice(0,5).map(ce=>({id:crypto.randomUUID(),text:ce})),multiple:!0}));d(J=>({...J,preguntas:[...J.preguntas,...K]}))}finally{B(!1)}}},[u.aiTema,u.aiCantidad]),[P,S]=w.useState([]);w.useEffect(()=>{(async()=>{var J;if(!C)return;const K=[];for(const ce of v)if(ce.respuestas)for(const[oe,re]of Object.entries(ce.respuestas)){const ue=C.preguntas.find(ve=>ve.id===oe);if(!ue||ue.tipo!=="abierta")continue;const le=re;le.tipo==="abierta"&&((J=le.valorTexto)!=null&&J.trim())&&K.push(le.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",K.length),K.length>0)try{const ce=await GUe(K,30);console.log("Keywords generadas:",ce),S(ce)}catch(ce){console.error("Error al extraer keywords:",ce),S([])}else S([])})()},[C,v]);const L=w.useMemo(()=>{if(!C)return{};const O={};for(const K of C.preguntas)K.tipo==="seleccion_multiple"&&(O[K.id]={},(K.opciones||[]).forEach(J=>O[K.id][J]=0));for(const K of v)for(const[J,ce]of Object.entries(K.respuestas||{})){const oe=ce;if((oe==null?void 0:oe.tipo)==="seleccion_multiple")for(const re of oe.seleccionados||[])O[J]||(O[J]={}),O[J][re]=(O[J][re]||0)+1}return O},[C,v]),U=w.useCallback(O=>O.map(K=>K.tipo==="abierta"?K:{...K,opciones:K.opciones.map(J=>J.text)}),[]),q=w.useCallback(()=>d(bre()),[]),H=w.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un ttulo");if(!u.creadorId)return alert("Debes seleccionar un creador");const O={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:U(u.preguntas)},K=await u2t(O);q(),o(K),r("responder")},[u,U,q]),z=w.useCallback(async(O,K)=>{var ce;if(window.confirm(`Eliminar "${K}"?
Se eliminarn la actividad, sus preguntas y respuestas. Esta accin no se puede deshacer.`)){if(await d2t(O),s===O){const oe=n.filter(re=>re.id!==O);o(((ce=oe[0])==null?void 0:ce.id)||""),oe.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),W=w.useCallback(async()=>{if(!C||!v.length)return;const O=new Tr("p","mm","a4"),K=20;let J=K;O.setFontSize(20),O.text(`Informe: ${C.titulo}`,K,J),J+=10,O.setFontSize(12),O.text(`Dimensin: ${C.dimension}`,K,J+=10),O.text(`Subdimensin: ${C.subdimension}`,K,J+=7),O.text(`Creador: ${C.creadorNombre} (${C.creadorPerfil})`,K,J+=7),O.text(`Total de respuestas: ${v.length}`,K,J+=7),J+=10;for(const ce of C.preguntas){if(J>250&&(O.addPage(),J=K),O.setFontSize(14),O.text(`Pregunta: ${ce.enunciado}`,K,J+=10),J+=5,O.setFontSize(12),ce.tipo==="seleccion_multiple"){const oe=L[ce.id]||{},re=v.length;Object.entries(oe).forEach(([ue,le])=>{const ve=re>0?Math.round(le/re*100):0;O.text(`${ue}: ${le} respuestas (${ve}%)`,K+5,J+=7)})}else{O.text("Respuestas:",K,J+=7);for(const oe of v){const re=oe.respuestas[ce.id];if((re==null?void 0:re.tipo)==="abierta"&&re.valorTexto){J>250&&(O.addPage(),J=K),O.text(`${oe.userNombre}:`,K+5,J+=7);const ue=O.splitTextToSize(re.valorTexto,170);O.text(ue,K+10,J+=7),J+=ue.length*7}}}J+=10}if(P.length>0){J>250&&(O.addPage(),J=K),O.setFontSize(14),O.text("Conceptos clave detectados:",K,J+=10),O.setFontSize(12);const ce=P.map(re=>`${re.keyword} (${Math.round(re.score*100)}%)`).join(", "),oe=O.splitTextToSize(ce,170);O.text(oe,K,J+=7)}O.save(`informe_${C.titulo.replace(/\s+/g,"_")}.pdf`)},[C,v,L,P]),Z=w.useCallback(O=>{const K=e==null?void 0:e.isAdmin,J=O.creadorId===(e==null?void 0:e.uid);return N&&(K||J)},[e,N]),V=w.useCallback((O,K)=>{x(J=>({...J,[O.id]:O.tipo==="abierta"?{tipo:"abierta",valorTexto:K}:{tipo:"seleccion_multiple",seleccionados:K}}))},[]),Y=w.useCallback(async()=>{if(C){for(const O of C.preguntas){const K=g[O.id];if(K&&O.tipo==="abierta"&&O.maxPalabras){const J=Wxe(K.valorTexto||"");if(J>O.maxPalabras)return alert(`La respuesta a "${O.enunciado}" supera el mximo de ${O.maxPalabras} palabras (${J}).`)}}await h2t({activityId:C.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Annimo",respuestas:g}),x({}),alert("Respuestas enviadas!")}},[C,g,e]);return i.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(g3,{className:"w-7 h-7 text-indigo-600"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),i.jsx(m2t,{value:t,onChange:r,canCreate:N})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[i.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:i.jsx(c2,{title:"Actividades",icon:i.jsx(e0,{className:"w-5 h-5 text-indigo-600"}),children:i.jsx(p2t,{items:n,selectedId:s,onSelect:O=>{o(O),r("responder")},canDelete:Z,onDelete:z})})}),i.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&N&&i.jsxs(c2,{title:"Nueva actividad / sesin",icon:i.jsx(OG,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:H,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Ml,{className:"w-4 h-4"}),"Guardar"]}),children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Ttulo"}),i.jsx("input",{value:u.titulo,onChange:O=>f({titulo:O.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"rea de trabajo (Dimensin PME)"}),i.jsx("select",{value:u.dimension,onChange:O=>f({dimension:O.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(G0).map(O=>i.jsx("option",{value:O,children:O},O))}),i.jsx("select",{value:u.subdimension,onChange:O=>f({subdimension:O.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(G0[u.dimension]||[]).map(O=>i.jsx("option",{value:O,children:O},O))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador  Perfil"}),i.jsx("select",{value:u.creadorPerfil,onChange:O=>f({creadorPerfil:O.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:QG.map(O=>i.jsx("option",{value:O,children:O},O))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador  Usuario"}),i.jsxs("select",{value:u.creadorId,onChange:O=>{const K=O.target.value,J=A.find(ce=>ce.id===K);f({creadorId:K,creadorNombre:(J==null?void 0:J.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[i.jsx("option",{value:"",children:"Seleccione"}),A.filter(O=>O.profile===u.creadorPerfil).map(O=>i.jsx("option",{value:O.id,children:O.nombre},O.id))]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Px,{className:"w-4 h-4"})," Preguntas"]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(xi,{className:"w-4 h-4"})," Abierta"]}),i.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(xi,{className:"w-4 h-4"})," Seleccin mltiple"]}),i.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[i.jsx(woe,{className:"w-4 h-4"})," IA"]}),i.jsx("input",{value:u.aiTema,onChange:O=>f({aiTema:O.target.value}),placeholder:"Tema para IA (p. ej., evaluacin formativa)",className:"border rounded-lg px-3 py-1.5"}),i.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:O=>f({aiCantidad:parseInt(O.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),i.jsxs("button",{onClick:M,disabled:k||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[i.jsx(dx,{className:"w-4 h-4"}),k?"Generando":"Generar con IA"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((O,K)=>i.jsx(v2t,{q:O,index:K,onRemove:T,onPatch:I},O.id)),u.preguntas.length===0&&i.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(va,{className:"w-4 h-4"}),"Aade preguntas abiertas o de seleccin mltiple (o usa IA)."]})]})]})]}),t==="responder"&&C&&i.jsx(c2,{title:`Responder: ${C.titulo}`,icon:i.jsx(Ys,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:Y,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Ml,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[i.jsx(vP,{pill:!0,label:"Dimensin",value:C.dimension}),i.jsx(vP,{pill:!0,label:"Subdimensin",value:C.subdimension}),i.jsx(vP,{pill:!0,label:"Creador",value:`${C.creadorNombre}  ${C.creadorPerfil}`})]}),C.preguntas.map(O=>i.jsx(b2t,{q:O,respuestas:g,onChange:V},O.id))]})}),t==="respuestas_individuales"&&C&&i.jsx(c2,{title:`Respuestas individuales: ${C.titulo}`,icon:i.jsx(Ys,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:W,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(Df,{className:"w-4 h-4"}),"Descargar informe"]}),i.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Dl,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:i.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[i.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:i.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[i.jsx(jb,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(O=>{var K;return i.jsxs("button",{onClick:()=>c(O.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===O.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:i.jsx(jb,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("span",{className:"font-medium",children:O.userNombre})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[i.jsx(Yo,{className:"w-3.5 h-3.5"}),new Date(((K=O.createdAt)==null?void 0:K.seconds)*1e3).toLocaleDateString()]})]},O.userId)}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(jb,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay respuestas todava"})]})})]})}),i.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[i.jsx(OG,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",i.jsx("span",{className:"text-indigo-600",children:(R=v.find(O=>O.userId===l))==null?void 0:R.userNombre})]}),i.jsx("div",{className:"space-y-6",children:C.preguntas.map(O=>{var ce;const K=v.find(oe=>oe.userId===l),J=(ce=K==null?void 0:K.respuestas)==null?void 0:ce[O.id];return console.log("Respuesta encontrada:",{preguntaId:O.id,tipo:O.tipo,respuesta:J}),i.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:O.tipo==="abierta"?i.jsx(FG,{className:"w-5 h-5 text-indigo-600"}):i.jsx(i1,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900",children:O.enunciado}),i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:O.tipo==="abierta"?"Respuesta abierta":"Seleccin mltiple"})]})]}),O.tipo==="abierta"?(J==null?void 0:J.tipo)==="abierta"&&J.valorTexto?i.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:J.valorTexto})}):i.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):i.jsxs("div",{className:"space-y-2 mt-3",children:[(O.opciones||[]).map(oe=>{const ue=((J==null?void 0:J.tipo)==="seleccion_multiple"?J.seleccionados||[]:[]).includes(oe.text);return i.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ue?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[i.jsx("div",{className:"flex-shrink-0",children:ue?i.jsx(va,{className:"w-4 h-4 text-indigo-600"}):i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),i.jsx("span",{className:"text-sm",children:typeof oe=="string"?oe:oe.text})]},typeof oe=="string"?oe:oe.id)}),!J&&i.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},O.id)})})]}):i.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&C&&i.jsxs(c2,{title:`Dashboard: ${C.titulo}`,icon:i.jsx(MN,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx(jb,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),Z(C)&&i.jsxs("button",{onClick:()=>z(C.id,C.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[i.jsx(Qn,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[i.jsx("div",{className:"mb-6",children:i.jsxs("button",{onClick:W,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(Df,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(jb,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),i.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:i.jsx(i1,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),i.jsx("p",{className:"text-xl font-semibold",children:C.preguntas.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(wA,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),i.jsx("p",{className:"text-sm font-medium truncate",children:C.creadorNombre})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:i.jsx(Yo,{className:"w-5 h-5 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),i.jsx("p",{className:"text-sm font-medium",children:(()=>{const O=C.createdAt,K=O!=null&&O.toDate?O.toDate():O!=null&&O.seconds?new Date(O.seconds*1e3):O?new Date(O):null;return K?K.toLocaleDateString():"No disponible"})()})]})]})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(s1,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Resultados de seleccin mltiple"})]}),i.jsxs("div",{className:"space-y-4",children:[C.preguntas.filter(O=>O.tipo==="seleccion_multiple").map(O=>i.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[i.jsx("p",{className:"font-medium mb-3 text-slate-700",children:O.enunciado}),Object.entries(L[O.id]||{}).map(([K,J])=>i.jsx(g2t,{label:K,value:J},K)),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[i.jsx(R1,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},O.id)),C.preguntas.filter(O=>O.tipo==="seleccion_multiple").length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(i1,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay preguntas de seleccin mltiple en esta actividad."})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(o_e,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),P.length?i.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(O=>i.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(O.score*18)}px`},children:O.keyword},O.keyword))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(FG,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"An no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var PE=e=>e.type==="checkbox",ox=e=>e instanceof Date,ec=e=>e==null;const Xxe=e=>typeof e=="object";var bi=e=>!ec(e)&&!Array.isArray(e)&&Xxe(e)&&!ox(e),w2t=e=>bi(e)&&e.target?PE(e.target)?e.target.checked:e.target.value:e,N2t=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,C2t=(e,t)=>e.has(N2t(t)),E2t=e=>{const t=e.constructor&&e.constructor.prototype;return bi(t)&&t.hasOwnProperty("isPrototypeOf")},KH=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function xs(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(KH&&(e instanceof Blob||n))&&(r||bi(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!E2t(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=xs(e[a]));else return e;return t}var uB=e=>/^\w*$/.test(e),vs=e=>e===void 0,dB=e=>Array.isArray(e)?e.filter(Boolean):[],WH=e=>dB(e.replace(/["|']|\]/g,"").split(/\.|\[/)),br=(e,t,r)=>{if(!t||!bi(e))return r;const n=(uB(t)?[t]:WH(t)).reduce((a,s)=>ec(a)?a:a[s],e);return vs(n)||n===e?vs(e[t])?r:e[t]:n},Eh=e=>typeof e=="boolean",Ya=(e,t,r)=>{let n=-1;const a=uB(t)?[t]:WH(t),s=a.length,o=s-1;for(;++n<s;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=bi(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const yre={BLUR:"blur",FOCUS_OUT:"focusout"},Nd={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},H0={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Yxe=At.createContext(null);Yxe.displayName="HookFormContext";const j2t=()=>At.useContext(Yxe);var k2t=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const o=s;return t._proxyFormState[o]!==Nd.all&&(t._proxyFormState[o]=!n||Nd.all),e[o]}});return a};const Jxe=typeof window<"u"?At.useLayoutEffect:At.useEffect;var Mh=e=>typeof e=="string",S2t=(e,t,r,n,a)=>Mh(e)?(n&&t.watch.add(e),br(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),br(r,s))):(n&&(t.watchAll=!0),r),c8=e=>ec(e)||!Xxe(e);function Ym(e,t,r=new WeakSet){if(c8(e)||c8(t))return e===t;if(ox(e)&&ox(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const o=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const l=t[s];if(ox(o)&&ox(l)||bi(o)&&bi(l)||Array.isArray(o)&&Array.isArray(l)?!Ym(o,l,r):o!==l)return!1}}return!0}var _2t=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Mc=e=>Array.isArray(e)?e:[e],wre=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},Yl=e=>bi(e)&&!Object.keys(e).length,XH=e=>e.type==="file",gf=e=>typeof e=="function",j4=e=>{if(!KH)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Zxe=e=>e.type==="select-multiple",YH=e=>e.type==="radio",T2t=e=>YH(e)||PE(e),bP=e=>j4(e)&&e.isConnected;function B2t(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=vs(e)?n++:e[t[n++]];return e}function I2t(e){for(const t in e)if(e.hasOwnProperty(t)&&!vs(e[t]))return!1;return!0}function ui(e,t){const r=Array.isArray(t)?t:uB(t)?[t]:WH(t),n=r.length===1?e:B2t(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(bi(n)&&Yl(n)||Array.isArray(n)&&I2t(n))&&ui(e,r.slice(0,-1)),e}var eve=e=>{for(const t in e)if(gf(e[t]))return!0;return!1};function k4(e,t={}){const r=Array.isArray(e);if(bi(e)||r)for(const n in e)Array.isArray(e[n])||bi(e[n])&&!eve(e[n])?(t[n]=Array.isArray(e[n])?[]:{},k4(e[n],t[n])):ec(e[n])||(t[n]=!0);return t}function tve(e,t,r){const n=Array.isArray(e);if(bi(e)||n)for(const a in e)Array.isArray(e[a])||bi(e[a])&&!eve(e[a])?vs(t)||c8(r[a])?r[a]=Array.isArray(e[a])?k4(e[a],[]):{...k4(e[a])}:tve(e[a],ec(t)?{}:t[a],r[a]):r[a]=!Ym(e[a],t[a]);return r}var u2=(e,t)=>tve(e,t,k4(t));const Nre={value:!1,isValid:!1},Cre={value:!0,isValid:!0};var rve=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!vs(e[0].attributes.value)?vs(e[0].value)||e[0].value===""?Cre:{value:e[0].value,isValid:!0}:Cre:Nre}return Nre},nve=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>vs(e)?e:t?e===""?NaN:e&&+e:r&&Mh(e)?new Date(e):n?n(e):e;const Ere={isValid:!1,value:null};var ave=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Ere):Ere;function jre(e){const t=e.ref;return XH(t)?t.files:YH(t)?ave(e.refs).value:Zxe(t)?[...t.selectedOptions].map(({value:r})=>r):PE(t)?rve(e.refs).value:nve(vs(t.value)?e.ref.value:t.value,e)}var D2t=(e,t,r,n)=>{const a={};for(const s of e){const o=br(t,s);o&&Ya(a,s,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},S4=e=>e instanceof RegExp,d2=e=>vs(e)?e:S4(e)?e.source:bi(e)?S4(e.value)?e.value.source:e.value:e,qb=e=>({isOnSubmit:!e||e===Nd.onSubmit,isOnBlur:e===Nd.onBlur,isOnChange:e===Nd.onChange,isOnAll:e===Nd.all,isOnTouch:e===Nd.onTouched});const kre="AsyncFunction";var O2t=e=>!!e&&!!e.validate&&!!(gf(e.validate)&&e.validate.constructor.name===kre||bi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===kre)),P2t=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),u8=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const E1=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=br(e,a);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(E1(l,t))break}else if(bi(l)&&E1(l,t))break}}};function Sre(e,t,r){const n=br(e,r);if(n||uB(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),o=br(t,s),l=br(e,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};a.pop()}return{name:r}}var F2t=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return Yl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!n||Nd.all))},R2t=(e,t,r)=>!e||!t||e===t||Mc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),L2t=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,M2t=(e,t)=>!dB(br(e,t)).length&&ui(e,t),sve=(e,t,r)=>{const n=Mc(br(e,r));return Ya(n,"root",t[r]),Ya(e,r,n),e},h5=e=>Mh(e);function _re(e,t,r="validate"){if(h5(e)||Array.isArray(e)&&e.every(h5)||Eh(e)&&!e)return{type:r,message:h5(e)?e:"",ref:t}}var bb=e=>bi(e)&&!S4(e)?e:{value:e,message:""},d8=async(e,t,r,n,a,s)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:A,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,N=br(r,x);if(!y||t.has(x))return{};const C=l?l[0]:o,_=S=>{a&&C.reportValidity&&(C.setCustomValidity(Eh(S)?"":S||""),C.reportValidity())},j={},I=YH(o),T=PE(o),k=I||T,B=(v||XH(o))&&vs(o.value)&&vs(N)||j4(o)&&o.value===""||N===""||Array.isArray(N)&&!N.length,M=_2t.bind(null,x,n,j),P=(S,L,U,q=H0.maxLength,H=H0.minLength)=>{const z=S?L:U;j[x]={type:S?q:H,message:z,ref:o,...M(S?q:H,z)}};if(s?!Array.isArray(N)||!N.length:c&&(!k&&(B||ec(N))||Eh(N)&&!N||T&&!rve(l).isValid||I&&!ave(l).isValid)){const{value:S,message:L}=h5(c)?{value:!!c,message:c}:bb(c);if(S&&(j[x]={type:H0.required,message:L,ref:C,...M(H0.required,L)},!n))return _(L),j}if(!B&&(!ec(f)||!ec(A))){let S,L;const U=bb(A),q=bb(f);if(!ec(N)&&!isNaN(N)){const H=o.valueAsNumber||N&&+N;ec(U.value)||(S=H>U.value),ec(q.value)||(L=H<q.value)}else{const H=o.valueAsDate||new Date(N),z=V=>new Date(new Date().toDateString()+" "+V),W=o.type=="time",Z=o.type=="week";Mh(U.value)&&N&&(S=W?z(N)>z(U.value):Z?N>U.value:H>new Date(U.value)),Mh(q.value)&&N&&(L=W?z(N)<z(q.value):Z?N<q.value:H<new Date(q.value))}if((S||L)&&(P(!!S,U.message,q.message,H0.max,H0.min),!n))return _(j[x].message),j}if((u||d)&&!B&&(Mh(N)||s&&Array.isArray(N))){const S=bb(u),L=bb(d),U=!ec(S.value)&&N.length>+S.value,q=!ec(L.value)&&N.length<+L.value;if((U||q)&&(P(U,S.message,L.message),!n))return _(j[x].message),j}if(m&&!B&&Mh(N)){const{value:S,message:L}=bb(m);if(S4(S)&&!N.match(S)&&(j[x]={type:H0.pattern,message:L,ref:o,...M(H0.pattern,L)},!n))return _(L),j}if(g){if(gf(g)){const S=await g(N,r),L=_re(S,C);if(L&&(j[x]={...L,...M(H0.validate,L.message)},!n))return _(L.message),j}else if(bi(g)){let S={};for(const L in g){if(!Yl(S)&&!n)break;const U=_re(await g[L](N,r),C,L);U&&(S={...U,...M(L,U.message)},_(U.message),n&&(j[x]=S))}if(!Yl(S)&&(j[x]={ref:C,...S},!n))return j}}return _(!0),j};const U2t={mode:Nd.onSubmit,reValidateMode:Nd.onChange,shouldFocusError:!0};function H2t(e={}){let t={...U2t,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:gf(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=bi(t.defaultValues)||bi(t.values)?xs(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:xs(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const A={array:wre(),state:wre()},m=t.criteriaMode===Nd.all,g=ne=>de=>{clearTimeout(u),u=setTimeout(ne,de)},x=async ne=>{if(!t.disabled&&(d.isValid||f.isValid||ne)){const de=t.resolver?Yl((await T()).errors):await B(n,!0);de!==r.isValid&&A.state.next({isValid:de})}},v=(ne,de)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ne||Array.from(l.mount)).forEach(me=>{me&&(de?Ya(r.validatingFields,me,de):ui(r.validatingFields,me))}),A.state.next({validatingFields:r.validatingFields,isValidating:!Yl(r.validatingFields)}))},y=(ne,de=[],me,ge,Te=!0,Ve=!0)=>{if(ge&&me&&!t.disabled){if(o.action=!0,Ve&&Array.isArray(br(n,ne))){const Xe=me(br(n,ne),ge.argA,ge.argB);Te&&Ya(n,ne,Xe)}if(Ve&&Array.isArray(br(r.errors,ne))){const Xe=me(br(r.errors,ne),ge.argA,ge.argB);Te&&Ya(r.errors,ne,Xe),M2t(r.errors,ne)}if((d.touchedFields||f.touchedFields)&&Ve&&Array.isArray(br(r.touchedFields,ne))){const Xe=me(br(r.touchedFields,ne),ge.argA,ge.argB);Te&&Ya(r.touchedFields,ne,Xe)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=u2(a,s)),A.state.next({name:ne,isDirty:P(ne,de),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ya(s,ne,de)},N=(ne,de)=>{Ya(r.errors,ne,de),A.state.next({errors:r.errors})},C=ne=>{r.errors=ne,A.state.next({errors:r.errors,isValid:!1})},_=(ne,de,me,ge)=>{const Te=br(n,ne);if(Te){const Ve=br(s,ne,vs(me)?br(a,ne):me);vs(Ve)||ge&&ge.defaultChecked||de?Ya(s,ne,de?Ve:jre(Te._f)):U(ne,Ve),o.mount&&x()}},j=(ne,de,me,ge,Te)=>{let Ve=!1,Xe=!1;const Ke={name:ne};if(!t.disabled){if(!me||ge){(d.isDirty||f.isDirty)&&(Xe=r.isDirty,r.isDirty=Ke.isDirty=P(),Ve=Xe!==Ke.isDirty);const Qe=Ym(br(a,ne),de);Xe=!!br(r.dirtyFields,ne),Qe?ui(r.dirtyFields,ne):Ya(r.dirtyFields,ne,!0),Ke.dirtyFields=r.dirtyFields,Ve=Ve||(d.dirtyFields||f.dirtyFields)&&Xe!==!Qe}if(me){const Qe=br(r.touchedFields,ne);Qe||(Ya(r.touchedFields,ne,me),Ke.touchedFields=r.touchedFields,Ve=Ve||(d.touchedFields||f.touchedFields)&&Qe!==me)}Ve&&Te&&A.state.next(Ke)}return Ve?Ke:{}},I=(ne,de,me,ge)=>{const Te=br(r.errors,ne),Ve=(d.isValid||f.isValid)&&Eh(de)&&r.isValid!==de;if(t.delayError&&me?(c=g(()=>N(ne,me)),c(t.delayError)):(clearTimeout(u),c=null,me?Ya(r.errors,ne,me):ui(r.errors,ne)),(me?!Ym(Te,me):Te)||!Yl(ge)||Ve){const Xe={...ge,...Ve&&Eh(de)?{isValid:de}:{},errors:r.errors,name:ne};r={...r,...Xe},A.state.next(Xe)}},T=async ne=>{v(ne,!0);const de=await t.resolver(s,t.context,D2t(ne||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(ne),de},k=async ne=>{const{errors:de}=await T(ne);if(ne)for(const me of ne){const ge=br(de,me);ge?Ya(r.errors,me,ge):ui(r.errors,me)}else r.errors=de;return de},B=async(ne,de,me={valid:!0})=>{for(const ge in ne){const Te=ne[ge];if(Te){const{_f:Ve,...Xe}=Te;if(Ve){const Ke=l.array.has(Ve.name),Qe=Te._f&&O2t(Te._f);Qe&&d.validatingFields&&v([ge],!0);const Je=await d8(Te,l.disabled,s,m,t.shouldUseNativeValidation&&!de,Ke);if(Qe&&d.validatingFields&&v([ge]),Je[Ve.name]&&(me.valid=!1,de))break;!de&&(br(Je,Ve.name)?Ke?sve(r.errors,Je,Ve.name):Ya(r.errors,Ve.name,Je[Ve.name]):ui(r.errors,Ve.name))}!Yl(Xe)&&await B(Xe,de,me)}}return me.valid},M=()=>{for(const ne of l.unMount){const de=br(n,ne);de&&(de._f.refs?de._f.refs.every(me=>!bP(me)):!bP(de._f.ref))&&oe(ne)}l.unMount=new Set},P=(ne,de)=>!t.disabled&&(ne&&de&&Ya(s,ne,de),!Ym(V(),a)),S=(ne,de,me)=>S2t(ne,l,{...o.mount?s:vs(de)?a:Mh(ne)?{[ne]:de}:de},me,de),L=ne=>dB(br(o.mount?s:a,ne,t.shouldUnregister?br(a,ne,[]):[])),U=(ne,de,me={})=>{const ge=br(n,ne);let Te=de;if(ge){const Ve=ge._f;Ve&&(!Ve.disabled&&Ya(s,ne,nve(de,Ve)),Te=j4(Ve.ref)&&ec(de)?"":de,Zxe(Ve.ref)?[...Ve.ref.options].forEach(Xe=>Xe.selected=Te.includes(Xe.value)):Ve.refs?PE(Ve.ref)?Ve.refs.forEach(Xe=>{(!Xe.defaultChecked||!Xe.disabled)&&(Array.isArray(Te)?Xe.checked=!!Te.find(Ke=>Ke===Xe.value):Xe.checked=Te===Xe.value||!!Te)}):Ve.refs.forEach(Xe=>Xe.checked=Xe.value===Te):XH(Ve.ref)?Ve.ref.value="":(Ve.ref.value=Te,Ve.ref.type||A.state.next({name:ne,values:xs(s)})))}(me.shouldDirty||me.shouldTouch)&&j(ne,Te,me.shouldTouch,me.shouldDirty,!0),me.shouldValidate&&Z(ne)},q=(ne,de,me)=>{for(const ge in de){if(!de.hasOwnProperty(ge))return;const Te=de[ge],Ve=ne+"."+ge,Xe=br(n,Ve);(l.array.has(ne)||bi(Te)||Xe&&!Xe._f)&&!ox(Te)?q(Ve,Te,me):U(Ve,Te,me)}},H=(ne,de,me={})=>{const ge=br(n,ne),Te=l.array.has(ne),Ve=xs(de);Ya(s,ne,Ve),Te?(A.array.next({name:ne,values:xs(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&me.shouldDirty&&A.state.next({name:ne,dirtyFields:u2(a,s),isDirty:P(ne,Ve)})):ge&&!ge._f&&!ec(Ve)?q(ne,Ve,me):U(ne,Ve,me),u8(ne,l)&&A.state.next({...r,name:ne}),A.state.next({name:o.mount?ne:void 0,values:xs(s)})},z=async ne=>{o.mount=!0;const de=ne.target;let me=de.name,ge=!0;const Te=br(n,me),Ve=Qe=>{ge=Number.isNaN(Qe)||ox(Qe)&&isNaN(Qe.getTime())||Ym(Qe,br(s,me,Qe))},Xe=qb(t.mode),Ke=qb(t.reValidateMode);if(Te){let Qe,Je;const mt=de.type?jre(Te._f):w2t(ne),We=ne.type===yre.BLUR||ne.type===yre.FOCUS_OUT,He=!P2t(Te._f)&&!t.resolver&&!br(r.errors,me)&&!Te._f.deps||L2t(We,br(r.touchedFields,me),r.isSubmitted,Ke,Xe),Tt=u8(me,l,We);Ya(s,me,mt),We?(!de||!de.readOnly)&&(Te._f.onBlur&&Te._f.onBlur(ne),c&&c(0)):Te._f.onChange&&Te._f.onChange(ne);const Ie=j(me,mt,We),ft=!Yl(Ie)||Tt;if(!We&&A.state.next({name:me,type:ne.type,values:xs(s)}),He)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?We&&x():We||x()),ft&&A.state.next({name:me,...Tt?{}:Ie});if(!We&&Tt&&A.state.next({...r}),t.resolver){const{errors:vt}=await T([me]);if(Ve(mt),ge){const et=Sre(r.errors,n,me),Ct=Sre(vt,n,et.name||me);Qe=Ct.error,me=Ct.name,Je=Yl(vt)}}else v([me],!0),Qe=(await d8(Te,l.disabled,s,m,t.shouldUseNativeValidation))[me],v([me]),Ve(mt),ge&&(Qe?Je=!1:(d.isValid||f.isValid)&&(Je=await B(n,!0)));ge&&(Te._f.deps&&Z(Te._f.deps),I(me,Je,Qe,Ie))}},W=(ne,de)=>{if(br(r.errors,de)&&ne.focus)return ne.focus(),1},Z=async(ne,de={})=>{let me,ge;const Te=Mc(ne);if(t.resolver){const Ve=await k(vs(ne)?ne:Te);me=Yl(Ve),ge=ne?!Te.some(Xe=>br(Ve,Xe)):me}else ne?(ge=(await Promise.all(Te.map(async Ve=>{const Xe=br(n,Ve);return await B(Xe&&Xe._f?{[Ve]:Xe}:Xe)}))).every(Boolean),!(!ge&&!r.isValid)&&x()):ge=me=await B(n);return A.state.next({...!Mh(ne)||(d.isValid||f.isValid)&&me!==r.isValid?{}:{name:ne},...t.resolver||!ne?{isValid:me}:{},errors:r.errors}),de.shouldFocus&&!ge&&E1(n,W,ne?Te:l.mount),ge},V=ne=>{const de={...o.mount?s:a};return vs(ne)?de:Mh(ne)?br(de,ne):ne.map(me=>br(de,me))},Y=(ne,de)=>({invalid:!!br((de||r).errors,ne),isDirty:!!br((de||r).dirtyFields,ne),error:br((de||r).errors,ne),isValidating:!!br(r.validatingFields,ne),isTouched:!!br((de||r).touchedFields,ne)}),R=ne=>{ne&&Mc(ne).forEach(de=>ui(r.errors,de)),A.state.next({errors:ne?r.errors:{}})},O=(ne,de,me)=>{const ge=(br(n,ne,{_f:{}})._f||{}).ref,Te=br(r.errors,ne)||{},{ref:Ve,message:Xe,type:Ke,...Qe}=Te;Ya(r.errors,ne,{...Qe,...de,ref:ge}),A.state.next({name:ne,errors:r.errors,isValid:!1}),me&&me.shouldFocus&&ge&&ge.focus&&ge.focus()},K=(ne,de)=>gf(ne)?A.state.subscribe({next:me=>"values"in me&&ne(S(void 0,de),me)}):S(ne,de,!0),J=ne=>A.state.subscribe({next:de=>{R2t(ne.name,de.name,ne.exact)&&F2t(de,ne.formState||d,ye,ne.reRenderRoot)&&ne.callback({values:{...s},...r,...de,defaultValues:a})}}).unsubscribe,ce=ne=>(o.mount=!0,f={...f,...ne.formState},J({...ne,formState:f})),oe=(ne,de={})=>{for(const me of ne?Mc(ne):l.mount)l.mount.delete(me),l.array.delete(me),de.keepValue||(ui(n,me),ui(s,me)),!de.keepError&&ui(r.errors,me),!de.keepDirty&&ui(r.dirtyFields,me),!de.keepTouched&&ui(r.touchedFields,me),!de.keepIsValidating&&ui(r.validatingFields,me),!t.shouldUnregister&&!de.keepDefaultValue&&ui(a,me);A.state.next({values:xs(s)}),A.state.next({...r,...de.keepDirty?{isDirty:P()}:{}}),!de.keepIsValid&&x()},re=({disabled:ne,name:de})=>{(Eh(ne)&&o.mount||ne||l.disabled.has(de))&&(ne?l.disabled.add(de):l.disabled.delete(de))},ue=(ne,de={})=>{let me=br(n,ne);const ge=Eh(de.disabled)||Eh(t.disabled);return Ya(n,ne,{...me||{},_f:{...me&&me._f?me._f:{ref:{name:ne}},name:ne,mount:!0,...de}}),l.mount.add(ne),me?re({disabled:Eh(de.disabled)?de.disabled:t.disabled,name:ne}):_(ne,!0,de.value),{...ge?{disabled:de.disabled||t.disabled}:{},...t.progressive?{required:!!de.required,min:d2(de.min),max:d2(de.max),minLength:d2(de.minLength),maxLength:d2(de.maxLength),pattern:d2(de.pattern)}:{},name:ne,onChange:z,onBlur:z,ref:Te=>{if(Te){ue(ne,de),me=br(n,ne);const Ve=vs(Te.value)&&Te.querySelectorAll&&Te.querySelectorAll("input,select,textarea")[0]||Te,Xe=T2t(Ve),Ke=me._f.refs||[];if(Xe?Ke.find(Qe=>Qe===Ve):Ve===me._f.ref)return;Ya(n,ne,{_f:{...me._f,...Xe?{refs:[...Ke.filter(bP),Ve,...Array.isArray(br(a,ne))?[{}]:[]],ref:{type:Ve.type,name:ne}}:{ref:Ve}}}),_(ne,!1,void 0,Ve)}else me=br(n,ne,{}),me._f&&(me._f.mount=!1),(t.shouldUnregister||de.shouldUnregister)&&!(C2t(l.array,ne)&&o.action)&&l.unMount.add(ne)}}},le=()=>t.shouldFocusError&&E1(n,W,l.mount),ve=ne=>{Eh(ne)&&(A.state.next({disabled:ne}),E1(n,(de,me)=>{const ge=br(n,me);ge&&(de.disabled=ge._f.disabled||ne,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(Te=>{Te.disabled=ge._f.disabled||ne}))},0,!1))},X=(ne,de)=>async me=>{let ge;me&&(me.preventDefault&&me.preventDefault(),me.persist&&me.persist());let Te=xs(s);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:Ve,values:Xe}=await T();r.errors=Ve,Te=xs(Xe)}else await B(n);if(l.disabled.size)for(const Ve of l.disabled)ui(Te,Ve);if(ui(r.errors,"root"),Yl(r.errors)){A.state.next({errors:{}});try{await ne(Te,me)}catch(Ve){ge=Ve}}else de&&await de({...r.errors},me),le(),setTimeout(le);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Yl(r.errors)&&!ge,submitCount:r.submitCount+1,errors:r.errors}),ge)throw ge},Ee=(ne,de={})=>{br(n,ne)&&(vs(de.defaultValue)?H(ne,xs(br(a,ne))):(H(ne,de.defaultValue),Ya(a,ne,xs(de.defaultValue))),de.keepTouched||ui(r.touchedFields,ne),de.keepDirty||(ui(r.dirtyFields,ne),r.isDirty=de.defaultValue?P(ne,xs(br(a,ne))):P()),de.keepError||(ui(r.errors,ne),d.isValid&&x()),A.state.next({...r}))},Be=(ne,de={})=>{const me=ne?xs(ne):a,ge=xs(me),Te=Yl(ne),Ve=Te?a:ge;if(de.keepDefaultValues||(a=me),!de.keepValues){if(de.keepDirtyValues){const Xe=new Set([...l.mount,...Object.keys(u2(a,s))]);for(const Ke of Array.from(Xe))br(r.dirtyFields,Ke)?Ya(Ve,Ke,br(s,Ke)):H(Ke,br(Ve,Ke))}else{if(KH&&vs(ne))for(const Xe of l.mount){const Ke=br(n,Xe);if(Ke&&Ke._f){const Qe=Array.isArray(Ke._f.refs)?Ke._f.refs[0]:Ke._f.ref;if(j4(Qe)){const Je=Qe.closest("form");if(Je){Je.reset();break}}}}if(de.keepFieldsRef)for(const Xe of l.mount)H(Xe,br(Ve,Xe));else n={}}s=t.shouldUnregister?de.keepDefaultValues?xs(a):{}:xs(Ve),A.array.next({values:{...Ve}}),A.state.next({values:{...Ve}})}l={mount:de.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!de.keepIsValid||!!de.keepDirtyValues,o.watch=!!t.shouldUnregister,A.state.next({submitCount:de.keepSubmitCount?r.submitCount:0,isDirty:Te?!1:de.keepDirty?r.isDirty:!!(de.keepDefaultValues&&!Ym(ne,a)),isSubmitted:de.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Te?{}:de.keepDirtyValues?de.keepDefaultValues&&s?u2(a,s):r.dirtyFields:de.keepDefaultValues&&ne?u2(a,ne):de.keepDirty?r.dirtyFields:{},touchedFields:de.keepTouched?r.touchedFields:{},errors:de.keepErrors?r.errors:{},isSubmitSuccessful:de.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},je=(ne,de)=>Be(gf(ne)?ne(s):ne,de),fe=(ne,de={})=>{const me=br(n,ne),ge=me&&me._f;if(ge){const Te=ge.refs?ge.refs[0]:ge.ref;Te.focus&&(Te.focus(),de.shouldSelect&&gf(Te.select)&&Te.select())}},ye=ne=>{r={...r,...ne}},se={control:{register:ue,unregister:oe,getFieldState:Y,handleSubmit:X,setError:O,_subscribe:J,_runSchema:T,_focusError:le,_getWatch:S,_getDirty:P,_setValid:x,_setFieldArray:y,_setDisabledField:re,_setErrors:C,_getFieldArray:L,_reset:Be,_resetDefaultValues:()=>gf(t.defaultValues)&&t.defaultValues().then(ne=>{je(ne,t.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:ve,_subjects:A,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(ne){o=ne},get _defaultValues(){return a},get _names(){return l},set _names(ne){l=ne},get _formState(){return r},get _options(){return t},set _options(ne){t={...t,...ne}}},subscribe:ce,trigger:Z,register:ue,handleSubmit:X,watch:K,setValue:H,getValues:V,reset:je,resetField:Ee,clearErrors:R,unregister:oe,setError:O,setFocus:fe,getFieldState:Y};return{...se,formControl:se}}var Fm=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},yP=(e,t,r={})=>r.shouldFocus||vs(r.shouldFocus)?r.focusName||`${e}.${vs(r.focusIndex)?t:r.focusIndex}.`:"",wP=(e,t)=>[...e,...Mc(t)],NP=e=>Array.isArray(e)?e.map(()=>{}):void 0;function CP(e,t,r){return[...e.slice(0,t),...Mc(r),...e.slice(t)]}var EP=(e,t,r)=>Array.isArray(e)?(vs(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],jP=(e,t)=>[...Mc(t),...Mc(e)];function Q2t(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return dB(n).length?n:[]}var kP=(e,t)=>vs(t)?[]:Q2t(e,Mc(t).sort((r,n)=>r-n)),SP=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},Tre=(e,t,r)=>(e[t]=r,e);function V2t(e){const t=j2t(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:o}=e,[l,c]=At.useState(r._getFieldArray(n)),u=At.useRef(r._getFieldArray(n).map(Fm)),d=At.useRef(l),f=At.useRef(!1);d.current=l,r._names.array.add(n),At.useMemo(()=>o&&r.register(n,o),[r,o,n]),Jxe(()=>r._subjects.array.subscribe({next:({values:j,name:I})=>{if(I===n||!I){const T=br(j,n);Array.isArray(T)&&(c(T),u.current=T.map(Fm))}}}).unsubscribe,[r,n]);const A=At.useCallback(j=>{f.current=!0,r._setFieldArray(n,j)},[r,n]),m=(j,I)=>{const T=Mc(xs(j)),k=wP(r._getFieldArray(n),T);r._names.focus=yP(n,k.length-1,I),u.current=wP(u.current,T.map(Fm)),A(k),c(k),r._setFieldArray(n,k,wP,{argA:NP(j)})},g=(j,I)=>{const T=Mc(xs(j)),k=jP(r._getFieldArray(n),T);r._names.focus=yP(n,0,I),u.current=jP(u.current,T.map(Fm)),A(k),c(k),r._setFieldArray(n,k,jP,{argA:NP(j)})},x=j=>{const I=kP(r._getFieldArray(n),j);u.current=kP(u.current,j),A(I),c(I),!Array.isArray(br(r._fields,n))&&Ya(r._fields,n,void 0),r._setFieldArray(n,I,kP,{argA:j})},v=(j,I,T)=>{const k=Mc(xs(I)),B=CP(r._getFieldArray(n),j,k);r._names.focus=yP(n,j,T),u.current=CP(u.current,j,k.map(Fm)),A(B),c(B),r._setFieldArray(n,B,CP,{argA:j,argB:NP(I)})},y=(j,I)=>{const T=r._getFieldArray(n);SP(T,j,I),SP(u.current,j,I),A(T),c(T),r._setFieldArray(n,T,SP,{argA:j,argB:I},!1)},N=(j,I)=>{const T=r._getFieldArray(n);EP(T,j,I),EP(u.current,j,I),A(T),c(T),r._setFieldArray(n,T,EP,{argA:j,argB:I},!1)},C=(j,I)=>{const T=xs(I),k=Tre(r._getFieldArray(n),j,T);u.current=[...k].map((B,M)=>!B||M===j?Fm():u.current[M]),A(k),c([...k]),r._setFieldArray(n,k,Tre,{argA:j,argB:T},!0,!1)},_=j=>{const I=Mc(xs(j));u.current=I.map(Fm),A([...I]),c([...I]),r._setFieldArray(n,[...I],T=>T,{},!0,!1)};return At.useEffect(()=>{if(r._state.action=!1,u8(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!qb(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!qb(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(j=>{const I=br(j.errors,n),T=br(r._formState.errors,n);(T?!I&&T.type||I&&(T.type!==I.type||T.message!==I.message):I&&I.type)&&(I?Ya(r._formState.errors,n,I):ui(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const j=br(r._fields,n);j&&j._f&&!(qb(r._options.reValidateMode).isOnSubmit&&qb(r._options.mode).isOnSubmit)&&d8(j,r._names.disabled,r._formValues,r._options.criteriaMode===Nd.all,r._options.shouldUseNativeValidation,!0).then(I=>!Yl(I)&&r._subjects.state.next({errors:sve(r._formState.errors,I,n)}))}r._subjects.state.next({name:n,values:xs(r._formValues)}),r._names.focus&&E1(r._fields,(j,I)=>{if(r._names.focus&&I.startsWith(r._names.focus)&&j.focus)return j.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[l,n,r]),At.useEffect(()=>(!br(r._formValues,n)&&r._setFieldArray(n),()=>{const j=(I,T)=>{const k=br(r._fields,I);k&&k._f&&(k._f.mount=T)};r._options.shouldUnregister||s?r.unregister(n):j(n,!1)}),[n,r,a,s]),{swap:At.useCallback(y,[A,n,r]),move:At.useCallback(N,[A,n,r]),prepend:At.useCallback(g,[A,n,r]),append:At.useCallback(m,[A,n,r]),remove:At.useCallback(x,[A,n,r]),insert:At.useCallback(v,[A,n,r]),update:At.useCallback(C,[A,n,r]),replace:At.useCallback(_,[A,n,r]),fields:At.useMemo(()=>l.map((j,I)=>({...j,[a]:u.current[I]||Fm()})),[l,a])}}function $2t(e={}){const t=At.useRef(void 0),r=At.useRef(void 0),[n,a]=At.useState({isDirty:!1,isValidating:!1,isLoading:gf(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:gf(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!gf(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=H2t(e);t.current={...l,formState:n}}const s=t.current.control;return s._options=e,Jxe(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),s._formState.isReady=!0,o},[s]),At.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),At.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),At.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),At.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),At.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),At.useEffect(()=>{e.values&&!Ym(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(o=>({...o}))):s._resetDefaultValues()},[s,e.values]),At.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=k2t(n,s),t.current}const f8=pt(xr,"alternancias");async function z2t(e){return(await dn(f8,{...e,createdAt:Xn(),updatedAt:Xn()})).id}async function G2t({especialidad:e,pageSize:t=10,lastDoc:r}){let n=Lt(f8,tr("createdAt","desc"),Fl(t));e&&(n=Lt(f8,ur("especialidad","==",e),tr("createdAt","desc"),Fl(t))),r&&(n=Lt(n,Pie(r)));const a=await Rr(n);return{items:a.docs.map(o=>({id:o.id,...o.data()})),lastDoc:a.docs[a.docs.length-1]}}async function q2t(e,t){const r=er(xr,"alternancias",e);await Zi(r,{...t,updatedAt:Xn()})}async function K2t(e){const t=er(xr,"alternancias",e);await fa(t)}async function W2t(e,t,r){const n=pt(xr,"alternancias",e,t);await dn(n,{...r,createdAt:Xn()})}async function X2t(e,t){const r=pt(xr,"alternancias",e,t);return(await Rr(r)).docs.map(a=>({id:a.id,...a.data()}))}async function Y2t(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=Iu(yA,r);await WC(n,t);const a=await MA(n);return await W2t(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const Bg=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return i.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),i.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},gl=({children:e,hint:t})=>i.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&i.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),Ig=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return i.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},Q0=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const o={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return i.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${o[r]} disabled:opacity-60`,children:n})},J2t=({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Z2t=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(null),[s,o]=w.useState(!1),[l,c]=w.useState(!1),[u,d]=w.useState(null),[f,A]=w.useState([]),[m,g]=w.useState(!1),{register:x,control:v,handleSubmit:y,reset:N,watch:C,setValue:_,formState:{isSubmitting:j}}=$2t({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),I=V2t({control:v,name:"actividades"}),T=["COORDINACION_TP","SUBDIRECCION"],k=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!k||T.some(O=>k.includes(O))))return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[i.jsx(S3e,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const M=O=>(O||"").replace(/\s*[-]\s*\d+\s*horas?$/i,"").trim(),P=(O,K)=>{var J;return!O||!K?[]:((J=kTe[O])==null?void 0:J[K])??[]},S=C("especialidad"),L=C("modulos")||[],U=w.useMemo(()=>S?CTe[S]??[]:[],[S]),q=w.useMemo(()=>S?jTe[S]??[]:[],[S]);w.useEffect(()=>{_("curso",[]),_("modulos",[]);const O=[...C("actividades")||[]].map(K=>({...K,modulo:"",oa:""}));_("actividades",O)},[S]),w.useEffect(()=>{const O=[...C("actividades")||[]].map(K=>K.modulo&&!L.includes(K.modulo)?{...K,modulo:"",oa:""}:K);_("actividades",O)},[L]);const H=async()=>{o(!0);const{items:O}=await G2t({});r(O),o(!1)};w.useEffect(()=>{H()},[]);const z=async O=>{n?await q2t(n,{...O}):await z2t({...O,createdBy:(e==null?void 0:e.email)||"desconocido"}),N(),a(null),await H()},W=O=>{const K=Array.isArray(O.curso)?O.curso:O.curso?[O.curso]:[],J=Array.isArray(O.modulos)?O.modulos.map(oe=>M(oe)):[],ce=Array.isArray(O.actividades)?O.actividades.map(oe=>({...oe,modulo:oe!=null&&oe.modulo?M(oe.modulo):"",oa:(oe==null?void 0:oe.oa)||""})):[];N({...O,curso:K,modulos:J,actividades:ce}),a(O.id),window.scrollTo({top:0,behavior:"smooth"})},Z=async O=>{confirm("Eliminar esta alternancia?")&&(await K2t(O),await H())},V=async(O,K)=>{await Y2t(O,K),alert("Evidencia subida correctamente")},Y=async O=>{g(!0);const K=Array.isArray(O.curso)?O.curso:O.curso?[O.curso]:[],J=Array.isArray(O.modulos)?O.modulos:[],ce=Array.isArray(O.actividades)?O.actividades.map(re=>({fecha:(re==null?void 0:re.fecha)||"",tipo:(re==null?void 0:re.tipo)||"",actividad:(re==null?void 0:re.actividad)||"",lugar:(re==null?void 0:re.lugar)||"",evidencias:(re==null?void 0:re.evidencias)||"",modulo:(re==null?void 0:re.modulo)||"",oa:(re==null?void 0:re.oa)||""})):[],oe={...O,curso:K,modulos:J,actividades:ce};d(oe);try{const re=await X2t(O.id,"evidencias");A(re)}catch{A([])}c(!0),g(!1)},R=O=>{const K=Array.from(O.currentTarget.selectedOptions).map(J=>J.value);_("curso",K,{shouldDirty:!0})};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:i.jsx(F1,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formacin por Alternancia"}),i.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con conos."})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Q0,{title:"Nuevo plan",onClick:()=>{N(),a(null)},tone:"neutral",children:[i.jsx(No,{className:"w-4 h-4"}),"Limpiar"]}),i.jsxs(Q0,{title:"Guardar",type:"submit",tone:"success",disabled:j,children:[j?i.jsx(ks,{className:"w-4 h-4 animate-spin"}):i.jsx(Ml,{className:"w-4 h-4"}),"Guardar"]})]})]})}),i.jsx(Bg,{title:"Planes guardados",icon:i.jsx(e0,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(ks,{className:"w-4 h-4 animate-spin"})," Cargando"]}):t.length===0?i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(O=>i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[i.jsx(Dh,{className:"w-4 h-4 text-indigo-600"}),O.especialidad]}),i.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[i.jsx(Ig,{tone:"indigo",children:Array.isArray(O.curso)?O.curso.join(", "):O.curso}),i.jsx(Ig,{tone:"sky",children:O.institucion}),(Array.isArray(O.tipoAlternancia)?O.tipoAlternancia:[]).slice(0,2).map(K=>i.jsx(Ig,{tone:"emerald",children:K},K))]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Q0,{title:"Ver",onClick:()=>Y(O),children:[i.jsx(J2t,{className:"w-4 h-4"})," Ver"]}),i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[i.jsx(av,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",onChange:K=>K.target.files&&V(O.id,K.target.files[0])}),"Evidencia"]}),i.jsxs(Q0,{title:"Editar",onClick:()=>W(O),children:[i.jsx(QN,{className:"w-4 h-4"})," Editar"]}),i.jsxs(Q0,{title:"Eliminar",onClick:()=>Z(O.id),tone:"danger",children:[i.jsx(Qn,{className:"w-4 h-4"})," Eliminar"]})]})]})},O.id))})}),l&&u&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>c(!1)}),i.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-5 py-3 border-b bg-white/90 backdrop-blur",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-9 h-9 rounded-xl bg-indigo-50 border border-indigo-100 flex items-center justify-center",children:i.jsx(F1,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Plan de Alternancia"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Visualizacin detallada"})]})]}),i.jsxs(Q0,{title:"Cerrar",onClick:()=>c(!1),children:[i.jsx(No,{className:"w-4 h-4"})," Cerrar"]})]}),i.jsxs("div",{className:"p-5 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(gl,{children:"Especialidad"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(Dh,{className:"w-4 h-4 text-indigo-600"})," ",u.especialidad||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(gl,{children:"Institucin"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-800",children:[i.jsx(a1,{className:"w-4 h-4 text-sky-600"})," ",u.institucion||"-"]})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(gl,{children:"Cursos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.curso||[]).map(O=>i.jsx(Ig,{tone:"sky",children:O},O))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(gl,{children:"Tipos de Alternancia"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.tipoAlternancia||[]).map(O=>i.jsx(Ig,{tone:"emerald",children:O},O))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(gl,{children:"Mdulos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(u.modulos||[]).map(O=>i.jsx(Ig,{tone:"indigo",children:O},O))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 p-3 bg-slate-50/50",children:[i.jsx(gl,{children:"Creado por"}),i.jsx("div",{className:"text-slate-700 text-sm",children:u.createdBy||"-"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Fundamentacin tcnicopedaggica"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.fundamentacion||""})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsx("div",{className:"px-4 py-3 border-b bg-slate-50/50",children:i.jsx("h4",{className:"font-semibold text-slate-800",children:"Plan de actividades"})}),u.actividades&&u.actividades.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 text-left",children:"Actividad"}),i.jsx("th",{className:"p-2 text-left",children:"Lugar"}),i.jsx("th",{className:"p-2 text-left",children:"Mdulo"}),i.jsx("th",{className:"p-2 text-left",children:"OA"}),i.jsx("th",{className:"p-2 text-left",children:"Evidencias"})]})}),i.jsx("tbody",{className:"divide-y",children:u.actividades.map((O,K)=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 text-slate-700",children:O.fecha||""}),i.jsx("td",{className:"p-2 text-slate-700",children:O.tipo||""}),i.jsx("td",{className:"p-2 text-slate-700",children:O.actividad||""}),i.jsx("td",{className:"p-2 text-slate-700",children:O.lugar||""}),i.jsx("td",{className:"p-2 text-slate-700",children:O.modulo||""}),i.jsx("td",{className:"p-2 text-slate-700",children:O.oa||""}),i.jsx("td",{className:"p-2 text-slate-700",children:O.evidencias||""})]},K))})]})}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Sin actividades registradas"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Equipo"}),(u.equipo||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.equipo.map((O,K)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:O.nombre||""}),i.jsx("span",{className:"text-slate-500",children:O.rol||""})]},K))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin equipo registrado"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Contrapartes"}),(u.contrapartes||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.contrapartes.map((O,K)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:O.nombre||""}),i.jsx("span",{className:"text-slate-500",children:O.rol||""})]},K))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin contrapartes"})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Tutores"}),(u.tutores||[]).length>0?i.jsx("ul",{className:"space-y-1 text-sm",children:u.tutores.map((O,K)=>i.jsxs("li",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-700",children:O.nombre||""}),i.jsx("span",{className:"text-slate-500",children:O.rol||""})]},K))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Sin tutores"})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Anlisis Curricular"}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:u.analisisCurricular||""})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200",children:[i.jsxs("div",{className:"px-4 py-3 border-b bg-slate-50/50 flex items-center justify-between",children:[i.jsx("h4",{className:"font-semibold text-slate-800",children:"Evidencias subidas"}),m&&i.jsx("span",{className:"text-sm text-slate-500",children:"Cargando"})]}),(f||[]).length>0?i.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:f.map(O=>i.jsxs("a",{href:O.url,target:"_blank",rel:"noreferrer",className:"group rounded-xl border border-slate-200 p-3 hover:shadow-sm transition bg-white flex items-center gap-3",children:[i.jsx(jF,{className:"w-5 h-5 text-emerald-600"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm text-slate-800 truncate group-hover:underline",children:O.nombre||"archivo"}),i.jsx("div",{className:"text-xs text-slate-500 truncate",children:O.path||""})]})]},O.id))}):i.jsx("div",{className:"p-4 text-sm text-slate-500",children:"No hay evidencias adjuntas"})]})]})]})]}),i.jsxs("form",{onSubmit:y(z),className:"mt-6 space-y-5",children:[i.jsx(Bg,{title:"Contexto de la Alternancia",icon:i.jsx(a1,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(gl,{children:"Especialidad"}),i.jsxs("div",{className:"relative",children:[i.jsx(Dh,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[i.jsx("option",{value:"",children:"Selecciona"}),wTe.map(O=>i.jsx("option",{value:O,children:O},O))]})]})]}),i.jsxs("div",{children:[i.jsx(gl,{children:"Institucin"}),i.jsxs("div",{className:"relative",children:[i.jsx(a1,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...x("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[i.jsx("option",{value:"",children:"Selecciona"}),NTe.map(O=>i.jsx("option",{value:O,children:O},O))]})]})]}),i.jsxs("div",{children:[i.jsx(gl,{hint:"Ctrl/Cmd + clic para seleccionar mltiples cursos.",children:"Cursos"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ys,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsx("select",{multiple:!0,size:4,...x("curso"),onChange:R,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!S,children:S?U.map(O=>i.jsx("option",{value:O,children:O},O)):i.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(C("curso")||[]).map(O=>i.jsx(Ig,{tone:"sky",children:O},O))})]})]})}),i.jsx(Bg,{title:"Mdulos implicados",icon:i.jsx(g3,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:S?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:q.map(O=>i.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:O,className:"mt-1 accent-emerald-600",...x("modulos")}),i.jsx("span",{className:"text-sm text-slate-700",children:O})]},O))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los mdulos."})}),i.jsx(Bg,{title:"Tipo de Alternancia",icon:i.jsx(i1,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:i.jsx("div",{className:"flex gap-3 flex-wrap",children:ETe.map(O=>i.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:O,className:"accent-amber-600",...x("tipoAlternancia")}),i.jsx("span",{className:"text-slate-700",children:O})]},O))})}),i.jsx(Bg,{title:"Fundamentacin tcnicopedaggica",icon:i.jsx(n_e,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedaggica, vnculos curriculares y el aporte para los estudiantes."})}),i.jsx(Bg,{title:"Plan de actividades",icon:i.jsx(e0,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"space-y-3",children:[I.fields.map((O,K)=>{const J=C(`actividades.${K}.modulo`)||"",ce=P(S,J);return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(gl,{children:"Fecha"}),i.jsx(Yo,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{type:"date",placeholder:"Fecha",...x(`actividades.${K}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(gl,{children:"Tipo"}),i.jsx("input",{placeholder:"Pasanta, visita, taller...",...x(`actividades.${K}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(gl,{children:"Actividad"}),i.jsx("input",{placeholder:"Descripcin breve",...x(`actividades.${K}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(gl,{children:"Lugar"}),i.jsx(HN,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...x(`actividades.${K}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(gl,{children:"Evidencias"}),i.jsx(jF,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...x(`actividades.${K}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx(gl,{children:"Mdulo"}),i.jsxs("select",{...x(`actividades.${K}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!S||L.length===0,children:[i.jsx("option",{value:"",children:!S&&"Elige especialidad arriba"||L.length===0&&"Selecciona mdulos arriba"||"Selecciona"}),L.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),i.jsxs("div",{children:[i.jsx(gl,{children:"Objetivo de Aprendizaje (OA)"}),i.jsxs("select",{...x(`actividades.${K}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!J||ce.length===0,children:[i.jsx("option",{value:"",children:J?ce.length===0?"Sin OA definidos para este mdulo":"Selecciona":"Selecciona mdulo primero"}),ce.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]})]}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsxs(Q0,{title:"Eliminar fila",onClick:()=>I.remove(K),tone:"danger",children:[i.jsx(Qn,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},O.id)}),i.jsxs(Q0,{title:"Agregar actividad",onClick:()=>I.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[i.jsx(xi,{className:"w-4 h-4"})," Agregar actividad"]})]})}),i.jsx(Bg,{title:"Anlisis Curricular",icon:i.jsx(Dh,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...x("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Mdulos implicados + OA/AE asociados + distribucin de horas (liceo/otro lugar)."})}),i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs(Q0,{title:"Guardar",type:"submit",tone:"success",disabled:j,children:[j?i.jsx(ks,{className:"w-4 h-4 animate-spin"}):i.jsx(va,{className:"w-4 h-4"}),"Guardar"]})})]})]})},h8=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],eNt={INCIPIENTE:25},tNt=["AULA","TALLER","EMPRESA"],Bre={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},ive="tp_especialidades",ove="tp_modulos",rNt="tp_resultados_aprendizaje",nNt="tp_criterios_evaluacion",A8="tp_rubricas",lve="tp_evidencias",cve="tp_evaluaciones_comp",m8="config_evaluacion/competencias",Ire=()=>Date.now(),uve=async()=>{const e=await bA(er(xr,m8));return e.exists()?e.data():(await yi(er(xr,m8),Bre),Bre)},aNt=(e,t)=>{const{escalaMin:r,escalaMax:n,porcentajeAprobacion:a,notaAprobacion:s}=t;if(e<=a){const o=(s-r)/(a-0||1);return Number((r+o*(e-0)).toFixed(1))}else{const o=(n-s)/(100-a||1);return Number((s+o*(e-a)).toFixed(1))}},sNt=async(e,t)=>{const r=await uve();let n=0,a=0;Object.entries(t).forEach(([l,c])=>{a+=c;const u=e[l],d=(u==null?void 0:u.puntaje)??eNt.INCIPIENTE;n+=d*c/100});const s=a?n/a*100:0,o=aNt(s,r);return{puntajeTotal:n,porcentaje:s,nota:o}},Dre=e=>dn(pt(xr,ive),e),iNt=e=>{const t=Lt(pt(xr,ive),tr("nombre"));return hr(t,r=>{e(r.docs.map(n=>({id:n.id,...n.data()})))},r=>{console.error("[competenciasHelper] subscribeEspecialidades error:",r),e([])})},Ore=e=>dn(pt(xr,ove),e),Pre=async e=>{const t=Lt(pt(xr,ove),ur("especialidadId","==",e),tr("nombre"));return(await Rr(t)).docs.map(n=>({id:n.id,...n.data()}))},oNt=async e=>{const t=Lt(pt(xr,rNt),ur("moduloId","==",e),tr("codigo"));return(await Rr(t)).docs.map(n=>({id:n.id,...n.data()}))},lNt=async e=>{const t=Lt(pt(xr,nNt),ur("raId","==",e),tr("codigo"));return(await Rr(t)).docs.map(n=>({id:n.id,...n.data()}))},cNt=async e=>e.id?(await Zi(er(xr,A8,e.id),{...e,updatedAt:Ire()}),e.id):(await dn(pt(xr,A8),{...e,updatedAt:Ire()})).id,dve=async e=>{const t=Lt(pt(xr,A8),ur("raId","==",e)),n=(await Rr(t)).docs[0];return n?{id:n.id,...n.data()}:null},uNt=async(e,t)=>{const r=Iu(yA,t),n=await WC(r,e);return{url:await MA(n.ref),path:n.ref.fullPath}},dNt=e=>dn(pt(xr,lve),e),fNt=(e,t)=>{const r=Lt(pt(xr,lve),ur("raId","==",e),tr("fecha","desc"));return hr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))},n=>{console.error("[competenciasHelper] subscribeEvidenciasByRA error:",n,"raId=",e),t([])})},hNt=async e=>{const t=await dve(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:n,porcentaje:a,nota:s}=await sNt(e.ceIdScores,r);return dn(pt(xr,cve),{...e,puntajeTotal:n,porcentaje:a,nota:s})},ANt=(e,t)=>{const r=Lt(pt(xr,cve),ur("raId","==",e),tr("fecha","desc"));return hr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))},n=>{console.error("[competenciasHelper] subscribeEvaluacionesByRA error:",n,"raId=",e),t([])})},mNt=async e=>{const t=await uve();await yi(er(xr,m8),{...t,...e},{merge:!0})},pNt=({raId:e,ces:t,rubrica:r,onSaved:n,currentUserId:a})=>{const[s,o]=w.useState(null);if(w.useEffect(()=>{o(e?r??{id:"",raId:e,niveles:h8,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:a}:null)},[e,r,t,a]),!e)return i.jsx("div",{children:"Selecciona un RA para editar su rbrica."});if(!s)return null;const l=(f,A)=>{o(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:A}})},c=(f,A,m)=>{o(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===A));return{...g,descriptores:[...x,{ceId:f,nivel:A,descriptor:m,puntaje:A==="SOBRESALIENTE"?100:A==="LOGRADO"?75:A==="EN_DESARROLLO"?50:25}]}})},u=w.useMemo(()=>Object.values(s.ponderacionCE).reduce((f,A)=>f+(Number(A)||0),0),[s.ponderacionCE]),d=async()=>{const f=await cNt(s);n==null||n(f)};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rbrica por CE (debe sumar 100%)"}),i.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),i.jsx("div",{className:"space-y-4",children:t.map(f=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo,"  ",f.descriptor]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||""]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),i.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[f.id]??0,onChange:A=>l(f.id,Number(A.target.value))}),i.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:h8.map(A=>{const m=s.descriptores.find(g=>g.ceId===f.id&&g.nivel===A);return i.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[i.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:A.replace("_"," ")}),i.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,A,g.target.value),placeholder:"Descriptor observable y medible"})]},A)})})]},f.id))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[i.jsx(Ml,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar rbrica"})]})})]})},gNt=({raId:e,currentUser:t,evidencias:r})=>{const[n,a]=w.useState(""),[s,o]=w.useState(""),[l,c]=w.useState("AULA"),[u,d]=w.useState(null),[f,A]=w.useState(""),[m,g]=w.useState(!1);if(!e)return i.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!n)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${n}/${Date.now()}.${v}`,{url:N,path:C}=await uNt(u,y);await dNt({estudianteId:n,raId:e,ceId:s||void 0,url:N,tipo:xNt(u.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:f,storagePath:C}),d(null),A(""),a(""),o("")}finally{g(!1)}}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:n,onChange:v=>a(v.target.value)}),i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:v=>o(v.target.value)}),i.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[i.jsx("option",{value:"AULA",children:"AULA"}),i.jsx("option",{value:"TALLER",children:"TALLER"}),i.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),i.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),i.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones",value:f,onChange:v=>A(v.target.value)}),i.jsxs("button",{onClick:x,disabled:m||!u||!n,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!n?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[i.jsx(av,{className:"w-4 h-4"}),i.jsx("span",{children:"Subir evidencia"})]}),i.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>i.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[vNt(v.tipo),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),i.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto,"  Est.: ",v.estudianteId]})]})]}),v.observaciones&&i.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},xNt=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},vNt=e=>{switch(e){case"imagen":return i.jsx(U5,{className:"w-5 h-5 text-rose-600"});case"video":return i.jsx(s4e,{className:"w-5 h-5 text-indigo-600"});case"documento":return i.jsx(Wi,{className:"w-5 h-5 text-emerald-600"});default:return i.jsx(av,{className:"w-5 h-5 text-slate-500"})}},Fre=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],bNt=({raId:e})=>{const[t,r]=w.useState([]);if(w.useEffect(()=>{if(!e){r([]);return}const o=ANt(e,r);return()=>o()},[e]),!e)return i.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const n=w.useMemo(()=>{const o={};return t.forEach(l=>{const c=l.curso||"";o[c]||(o[c]={curso:c,promedio:0,n:0}),o[c].promedio+=l.nota,o[c].n+=1}),Object.values(o).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),a=w.useMemo(()=>{const o={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?o["1.0-3.9"]++:l.nota<5?o["4.0-4.9"]++:l.nota<6?o["5.0-5.9"]++:o["6.0-7.0"]++}),Object.entries(o).map(([l,c])=>({rango:l,value:c}))},[t]),s=()=>{const o=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),l=Ws.book_new(),c=Ws.json_to_sheet(o);Ws.book_append_sheet(l,c,"Evaluaciones_RA"),_y(l,`evaluaciones_${e}.xlsx`)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(Dl,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),i.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[i.jsx(Df,{className:"w-4 h-4"}),i.jsx("span",{children:"Descargar CSV"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(yf,{data:n,children:[i.jsx(Rc,{dataKey:"curso"}),i.jsx(Lc,{domain:[1,7]}),i.jsx(qo,{}),i.jsx(Ed,{dataKey:"promedio"})]})})}),i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(CT,{children:[i.jsx(NE,{data:a,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:a.map((o,l)=>i.jsx(SA,{fill:Fre[l%Fre.length]},`c-${l}`))}),i.jsx(qo,{}),i.jsx(Xp,{})]})})})]}),i.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversin lineal configurable (Decreto 67)."})]})},f2=({active:e,onClick:t,icon:r,label:n})=>i.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,i.jsx("span",{className:"font-medium",children:n})]}),yb=({children:e,className:t})=>i.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),yNt=({currentUser:e})=>{const[t,r]=w.useState("planificacion"),[n,a]=w.useState([]),[s,o]=w.useState([]),[l,c]=w.useState([]),[u,d]=w.useState([]),[f,A]=w.useState({}),[m,g]=w.useState(null),[x,v]=w.useState([]),[y,N]=w.useState(""),C=H=>(H||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/\s+/g," ").trim(),_="automotriz",j="industrial",I=w.useMemo(()=>new Set(["modulo 01  ajuste de motores.","modulo 01 - ajuste de motores.","modulo 01 ajuste de motores.","modulo 02  lectura de planos y manuales tecnicos.","modulo 03  manejo de residuos y desechos automotrices.","modulo 04  mantenimiento de sistemas de seguridad y confortabilidad.","modulo 05  mantenimiento de sistemas electricos y electronicos."].map(C)),[]),T=w.useMemo(()=>new Set(["modulo 00  emprendimiento y empleabilidad (mecanica automotriz).","modulo 06  mantenimiento de motores.","modulo 07  mantenimiento de sistemas hidraulicos y neumaticos.","modulo 08  mantenimiento de los sistemas de transmision y frenos.","modulo 09  mantenimiento de sistemas de direccion y suspension."].map(C)),[]),k=w.useMemo(()=>new Set(["modulo 01  soldadura industrial.","modulo 02  mantenimiento de herramientas.","modulo 03  medicion y verificacion.","modulo 04  mecanica de banco.","modulo 05  lectura de manuales y planos.","modulo 06  emprendimiento y empleabilidad (mencion maquinas-herramientas).","modulo 07  torneado de piezas y conjuntos mecanicos.","modulo 08  fresado de piezas y conjuntos mecanicos.","modulo 09  taladrado y rectificado de piezas mecanicas.","modulo 10  mecanizado con maquinas de control numerico computacional (cnc)."].map(C)),[]),B=w.useMemo(()=>new Set(["modulo 03  manejo de residuos y desechos automotrices.","modulo 03 - manejo de residuos y desechos automotrices.","modulo 06  mantenimiento de motores.","modulo 06 - mantenimiento de motores."].map(C)),[]);w.useEffect(()=>{const H=iNt(a);return()=>H()},[]),w.useEffect(()=>{f.especialidadId?Pre(f.especialidadId).then(o):o([]),A(H=>({...H,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),w.useEffect(()=>{const H=n.find(W=>W.id===f.especialidadId);C(H==null?void 0:H.nombre).includes(_)?N(W=>W===""?"3":W):N("")},[f.especialidadId,n]),w.useEffect(()=>{f.moduloId?oNt(f.moduloId).then(c):c([]),A(H=>({...H,raId:void 0})),d([]),g(null)},[f.moduloId]),w.useEffect(()=>{if(f.raId){lNt(f.raId).then(d),dve(f.raId).then(g);const H=fNt(f.raId,v);return()=>H()}else d([]),g(null),v([])},[f.raId]);const M=f.raId&&u.length>0,{especialidadesFiltradas:P,espFiltroFallback:S}=w.useMemo(()=>{if(!(n!=null&&n.length))return{especialidadesFiltradas:[],espFiltroFallback:!1};const H=n.filter(z=>{const W=C(z.nombre);return W.includes(_)||W.includes(j)});return H.length===0?{especialidadesFiltradas:n,espFiltroFallback:!0}:{especialidadesFiltradas:H,espFiltroFallback:!1}},[n]),L=w.useMemo(()=>{const H=n.find(z=>z.id===f.especialidadId);return C(H==null?void 0:H.nombre)},[n,f.especialidadId]),{modulosFiltrados:U,filtroFallback:q}=w.useMemo(()=>{let H=!1;if(!(s!=null&&s.length))return{modulosFiltrados:[],filtroFallback:!1};if(L.includes(_)){if(!y)return{modulosFiltrados:[],filtroFallback:!1};const z=y==="3"?I:T,W=s.filter(Z=>z.has(C(Z.nombre)));return W.length===0?(H=!0,{modulosFiltrados:s,filtroFallback:H}):{modulosFiltrados:W,filtroFallback:H}}if(L.includes(j)){const z=s.filter(W=>k.has(C(W.nombre)));return z.length===0&&s.length>0?(H=!0,{modulosFiltrados:s,filtroFallback:H}):{modulosFiltrados:z,filtroFallback:H}}return{modulosFiltrados:s,filtroFallback:H}},[s,L,y,I,T,k]);return i.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(g3,{className:"w-6 h-6 text-indigo-600"}),i.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluacin por Competencias EMTP"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(f2,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:i.jsx(e0,{className:"w-4 h-4"}),label:"Planificar"}),i.jsx(f2,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:i.jsx(b3e,{className:"w-4 h-4"}),label:"Evaluar"}),i.jsx(f2,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:i.jsx(av,{className:"w-4 h-4"}),label:"Evidencias"}),i.jsx(f2,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:i.jsx(Dl,{className:"w-4 h-4"}),label:"Dashboard"}),i.jsx(f2,{active:t==="config",onClick:()=>r("config"),icon:i.jsx(VN,{className:"w-4 h-4"}),label:"Config"})]})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[i.jsx(yb,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:H=>A({especialidadId:H.target.value}),children:[i.jsx("option",{value:"",children:" Selecciona "}),P.map(H=>i.jsx("option",{value:H.id,children:H.nombre},H.id))]}),S&&i.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Mostrando todas las especialidades por falta de coincidencia exacta con los nombres esperados (Automotriz/Industrial)."})]}),L.includes(_)&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Curso (Automotriz)"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:y,onChange:H=>{N(H.target.value),A(z=>({...z,moduloId:void 0,raId:void 0}))},children:[i.jsx("option",{value:"",children:" Selecciona "}),i.jsx("option",{value:"3",children:"3 medio"}),i.jsx("option",{value:"4",children:"4 medio TP"})]})]}),i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Mdulo"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:H=>A(z=>({...z,moduloId:H.target.value})),children:[i.jsx("option",{value:"",children:" Selecciona "}),U.map(H=>{const W=L.includes(_)&&B.has(C(H.nombre))?`${H.nombre}  Currculum Nacional`:H.nombre;return i.jsx("option",{value:H.id,children:W},H.id)})]}),q&&i.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Mostrando todos los mdulos de la especialidad por falta de coincidencia exacta con la lista. Podemos alinear los nombres en Firestore para filtrar con precisin."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:H=>A(z=>({...z,raId:H.target.value})),children:[i.jsx("option",{value:"",children:" Selecciona "}),l.map(H=>i.jsxs("option",{value:H.id,children:[H.codigo,"  ",H.enunciado.slice(0,60),H.enunciado.length>60?"":""]},H.id))]})]})]})}),t==="planificacion"&&i.jsx(yb,{children:i.jsx(pNt,{raId:f.raId,ces:u,rubrica:m,onSaved:H=>{},currentUserId:e.id})}),t==="evaluar"&&i.jsxs(yb,{children:[!M&&i.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),M&&i.jsx(wNt,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&i.jsx(yb,{children:i.jsx(gNt,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&i.jsx(yb,{children:i.jsx(bNt,{raId:f.raId})}),t==="config"&&i.jsxs(yb,{children:[i.jsx(NNt,{}),i.jsxs("div",{className:"mt-6 border-t pt-4",children:[i.jsx(CNt,{especialidades:n,normalize:C,onSeeded:async()=>{if(f.especialidadId){const H=await Pre(f.especialidadId);o(H)}}}),i.jsx("div",{className:"mt-4",children:i.jsx(SeedRAAutomotriz,{getModuloByName:H=>s.find(z=>C(z.nombre)===C(H))})})]})]})]})]})},wNt=({raId:e,ces:t,currentUser:r})=>{const[n,a]=w.useState(""),[s,o]=w.useState(r.curso||""),[l,c]=w.useState("AULA"),[u,d]=w.useState(""),[f,A]=w.useState({}),m=(v,y,N)=>{A(C=>({...C,[v]:{nivel:y,puntaje:N}}))},g=n&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:n,curso:s,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:u};await hNt(v),d(""),A({}),a("")};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:n,onChange:v=>a(v.target.value),placeholder:"rut_o_uid"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:v=>o(v.target.value),placeholder:"p.ej. 3B"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),i.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:tNt.map(v=>i.jsx("option",{value:v,children:v},v))})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[i.jsx(va,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar evaluacin"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo,"  ",v.descriptor]}),i.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:h8.map(y=>{var N;return i.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((N=f[v.id])==null?void 0:N.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentacin formativa"}),i.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias especficas para mejorar..."})]})]})},NNt=()=>{const[e,t]=w.useState(60),[r,n]=w.useState(4),a=async()=>{await mNt({porcentajeAprobacion:e,notaAprobacion:r})};return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobacin (%)"}),i.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobacin"}),i.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>n(Number(s.target.value))})]}),i.jsx("button",{onClick:a,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})},CNt=({especialidades:e,normalize:t,onSeeded:r})=>{const[n,a]=w.useState(!1),[s,o]=w.useState(""),l=async()=>{a(!0),o("Sembrando especialidades y mdulos base");try{const c=m=>e.find(g=>t(g.nombre)===t(m));let u=c("Mecnica Automotriz"),d=c("Mecnica Industrial");u||(u={id:(await Dre({nombre:"Mecnica Automotriz"})).id,nombre:"Mecnica Automotriz"}),d||(d={id:(await Dre({nombre:"Mecnica Industrial"})).id,nombre:"Mecnica Industrial"});const f=["Mdulo 01  Ajuste de motores.","Mdulo 02  Lectura de planos y manuales tcnicos.","Mdulo 03  Manejo de residuos y desechos automotrices.","Mdulo 04  Mantenimiento de sistemas de seguridad y confortabilidad.","Mdulo 05  Mantenimiento de sistemas elctricos y electrnicos.","Mdulo 00  Emprendimiento y empleabilidad (mecnica automotriz).","Mdulo 06  Mantenimiento de motores.","Mdulo 07  Mantenimiento de sistemas hidrulicos y neumticos.","Mdulo 08  Mantenimiento de los sistemas de transmisin y frenos.","Mdulo 09  Mantenimiento de sistemas de direccin y suspensin."],A=["Mdulo 01  Soldadura industrial.","Mdulo 02  Mantenimiento de herramientas.","Mdulo 03  Medicin y verificacin.","Mdulo 04  Mecnica de banco.","Mdulo 05  Lectura de manuales y planos.","Mdulo 06  Emprendimiento y empleabilidad (mencin Mquinas-Herramientas).","Mdulo 07  Torneado de piezas y conjuntos mecnicos.","Mdulo 08  Fresado de piezas y conjuntos mecnicos.","Mdulo 09  Taladrado y rectificado de piezas mecnicas.","Mdulo 10  Mecanizado con mquinas de control numrico computacional (CNC)."];for(const m of f)await Ore({nombre:m,especialidadId:u.id});for(const m of A)await Ore({nombre:m,especialidadId:d.id});o("Datos base sembrados correctamente. Actualiza los selectores para verlos."),await r()}catch(c){console.error(c),o(`Error al sembrar: ${(c==null?void 0:c.message)||c}`)}finally{a(!1)}};return i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{disabled:n,onClick:l,className:`px-4 py-2 rounded-xl text-white ${n?"bg-slate-400":"bg-amber-600 hover:bg-amber-700"}`,children:n?"Sembrando":"Sembrar datos base (Automotriz/Industrial)"}),s&&i.jsx("span",{className:"text-sm text-slate-600",children:s})]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Crea especialidades y mdulos mnimos si no existen an."})]})};function ENt(e){for(const t of e)if(t.textoBase&&t.textoBase.trim())return t.textoBase.trim();return null}function jNt(e){if(e.asignatura!=="Lectura")return e;const t={...e};let r=ENt(t.preguntas||[]);return!r&&t.descripcion&&t.descripcion.length>100&&(r=t.descripcion,t.preguntas&&t.preguntas.length>0&&(t.preguntas[0]={...t.preguntas[0],textoBase:r})),r&&(t.textoBase=r),t}const kNt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(null),[s,o]=w.useState({}),[l,c]=w.useState(!0),[u,d]=w.useState(!1),[f,A]=w.useState(!1),[m,g]=w.useState(null),[x,v]=w.useState(null),[y,N]=w.useState(null),[C,_]=w.useState([]),[j,I]=w.useState(null),T=q=>{if(!q)return"";let H=q.trim().toLowerCase();return H=H.replace(//g,""),H=H.replace(/\s+(medio|bsico|basico)/g,""),H=H.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),H=H.replace(/^(\d)(?![])/,"$1"),H=H.replace(/\s+/g,"").toUpperCase(),H};w.useEffect(()=>{(async()=>{if(e.id)try{c(!0);const H=T(e.curso||"");console.log(`[DEBUG] SimceEvaluacionEstudiante - Cargando evaluaciones para estudiante: ${e.id}, curso: ${e.curso} (normalizado: ${H})`);const[z,W]=await Promise.all([gi(()=>Promise.resolve().then(()=>sL),void 0).then(Y=>Y.obtenerSetsPreguntasPorCurso(H)),gi(()=>Promise.resolve().then(()=>sL),void 0).then(Y=>Y.obtenerSetsPreguntasPorEstudiante(e.id))]),Z=new Map;[...z,...W].forEach(Y=>Z.set(Y.id,Y));const V=Array.from(Z.values());r(V),B({porCurso:z.length,porEstudiante:W.length,total:V.length}),console.log(`[DEBUG] SimceEvaluacionEstudiante - Evaluaciones por curso: ${z.length}, por estudiante: ${W.length}, total: ${V.length}`)}catch(H){console.error("Error al cargar evaluaciones:",H),v("No se pudieron cargar las evaluaciones disponibles")}finally{c(!1)}})()},[e]);const[k,B]=w.useState(null),M=async q=>{var H,z;try{c(!0),o({}),v(null),g(null),A(!1),console.log(`[DEBUG] Seleccionando evaluacin con ID: ${q}`);let W=await hN(q);if(console.log("[DEBUG] Evaluacin completa obtenida:",W),console.log("[DEBUG] Preguntas en la evaluacin:",((H=W==null?void 0:W.preguntas)==null?void 0:H.length)||0),W&&(W=jNt(W),console.log("[DEBUG] Evaluacin procesada con texto base asegurado"),a(W)),W!=null&&W.preguntas){const V=W.preguntas.some(Y=>Y.textoBase)||W.textoBase;if(console.log("[DEBUG] La evaluacin tiene texto base?",V),V){const Y=W.textoBase||((z=W.preguntas.find(R=>R.textoBase))==null?void 0:z.textoBase);console.log("[DEBUG] Texto base encontrado:",(Y==null?void 0:Y.substring(0,50))+"...")}}const Z=await JAe(e.id||"",q);if(console.log(`[DEBUG] Intentos existentes para esta evaluacin: ${Z.length}`),_(Z),Z.length>0){I(Z[0]),A(!0);const V=await hN(q);if(V){a(V);const Y=Z[0],R=V.preguntas.map(O=>{var J;const K=((J=Y.respuestas.find(ce=>ce.preguntaId===O.id))==null?void 0:J.alternativaSeleccionada)||"";return{preguntaId:O.id,pregunta:O,respuestaSeleccionada:K,esCorrecta:K===O.respuestaCorrecta}});g({porcentajeLogro:Y.porcentajeLogro,nivelLogro:Y.nivelLogro,respuestasCorrectas:R.filter(O=>O.esCorrecta).length,totalPreguntas:V.preguntas.length,detalle:R})}}else{const V=await hN(q);if(V){const Y=[...V.preguntas].sort(()=>Math.random()-.5);Y.forEach(R=>{R.alternativas=[...R.alternativas].sort(()=>Math.random()-.5)}),a({...V,preguntas:Y}),N(Date.now())}}}catch(W){console.error("Error al seleccionar evaluacin:",W),v("No se pudo cargar la evaluacin seleccionada")}finally{c(!1)}},P=(q,H)=>{o({...s,[q]:H})},S=async()=>{if(n)try{const q=n.preguntas.map(J=>J.id),H=Object.keys(s);if(H.length<q.length){v(`Debe responder todas las preguntas antes de enviar (faltan ${q.length-H.length})`);return}d(!0);let z=0;const W=n.preguntas.map(J=>{const ce=s[J.id],oe=ce===J.respuestaCorrecta;return oe&&z++,{preguntaId:J.id,pregunta:J,respuestaSeleccionada:ce,esCorrecta:oe}}),Z=n.preguntas.length,V=z/Z*100;let Y;V>=80?Y="Adecuado":V>=50?Y="Elemental":Y="Insuficiente";const R=Date.now(),O=y?Math.floor((R-y)/1e3):0,K={setId:n.id,estudianteId:e.id||"",estudianteNombre:e.nombreCompleto||"",respuestas:Object.entries(s).map(([J,ce])=>{const oe=n.preguntas.find(ue=>ue.id===J),re=oe==null?void 0:oe.respuestaCorrecta;return{preguntaId:J,alternativaSeleccionadaId:String(ce),esCorrecta:String(ce)===re}}),porcentajeAciertos:V,nivelLogro:Y,fechaEnvio:new Date().toISOString()};await YAe(K),g({porcentajeLogro:V,nivelLogro:Y,respuestasCorrectas:z,totalPreguntas:Z,detalle:W}),A(!0)}catch(q){console.error("Error al enviar respuestas:",q),v("Ocurri un error al enviar sus respuestas. Intente nuevamente.")}finally{d(!1)}},L=q=>{const H=Math.floor(q/60),z=q%60;return`${H}:${z<10?"0":""}${z}`},U=q=>{switch(q){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}};return l?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(zh,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsx("div",{className:"space-y-6",children:n?f?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Resultados: ",n.titulo]}),i.jsx("button",{onClick:()=>{a(null),g(null),A(!1)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Volver a evaluaciones"})]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-6 rounded-lg mb-6",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tu nivel de logro"}),i.jsx("div",{className:`text-lg font-bold px-4 py-1 rounded-md ${U((m==null?void 0:m.nivelLogro)||"")}`,children:m==null?void 0:m.nivelLogro}),i.jsxs("div",{className:"mt-4",children:[i.jsx(CF,{className:"w-16 h-16 mx-auto text-indigo-500 mb-2"}),i.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:[m==null?void 0:m.porcentajeLogro.toFixed(1),"%"]}),i.jsxs("div",{className:"text-slate-600 dark:text-slate-400",children:[m==null?void 0:m.respuestasCorrectas," de ",m==null?void 0:m.totalPreguntas," correctas"]})]})]}),i.jsx("div",{className:"w-full max-w-md h-6 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden mt-4",children:i.jsx("div",{className:`h-full ${(m==null?void 0:m.nivelLogro)==="Adecuado"?"bg-green-500":(m==null?void 0:m.nivelLogro)==="Elemental"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${(m==null?void 0:m.porcentajeLogro)||0}%`}})}),i.jsxs("div",{className:"flex justify-between w-full max-w-md text-xs mt-1",children:[i.jsx("span",{children:"0%"}),i.jsx("span",{children:"50%"}),i.jsx("span",{children:"100%"})]})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detalle de respuestas"}),i.jsx("div",{className:"space-y-6",children:m==null?void 0:m.detalle.map((q,H)=>i.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",H+1]}),q.pregunta.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:q.pregunta.alternativas.map(z=>i.jsxs("div",{className:`flex items-start ${z.id===q.respuestaSeleccionada?z.id===q.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":"text-red-700 dark:text-red-400 font-semibold":z.id===q.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":""}`,children:[i.jsxs("div",{className:"font-bold mr-2 min-w-[20px]",children:[z.id,")"]}),i.jsx("div",{children:z.texto}),z.id===q.respuestaSeleccionada&&z.id===q.pregunta.respuestaCorrecta&&i.jsx(va,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"}),z.id===q.respuestaSeleccionada&&z.id!==q.pregunta.respuestaCorrecta&&i.jsx(Sh,{className:"w-4 h-4 ml-1 text-red-600 dark:text-red-400"}),z.id!==q.respuestaSeleccionada&&z.id===q.pregunta.respuestaCorrecta&&i.jsx(va,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"})]},z.id))}),i.jsx("div",{className:"mt-4 text-sm",children:i.jsxs("div",{className:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300 p-2 rounded-md",children:[i.jsx("span",{className:"font-semibold",children:"Explicacin:"})," ",q.pregunta.explicacion]})})]},q.preguntaId))}),i.jsx("div",{className:"mt-6 flex justify-center",children:i.jsx("button",{onClick:()=>{a(null),g(null),A(!1)},className:"py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Volver a evaluaciones"})})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura," - ",n.preguntas.length," preguntas"]})]}),i.jsx("button",{onClick:()=>{window.confirm("Est seguro que desea salir? Se perdern todas las respuestas.")&&a(null)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Cancelar"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 mb-6 flex items-start",children:[i.jsx(L1,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400",children:"Instrucciones"}),i.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 list-disc pl-5",children:[i.jsx("li",{children:"Responde todas las preguntas antes de enviar."}),i.jsx("li",{children:"Solo tienes un intento para responder."}),i.jsx("li",{children:"Una vez enviado, podrs ver tu resultado y las respuestas correctas."}),i.jsx("li",{children:"No refresques ni cierres la pgina durante la evaluacin."})]})]})]}),x&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(Sh,{className:"w-4 h-4 mr-2"}),x]}),(n.asignatura==="Lectura"||n.asignatura==="Competencia Lectora")&&(()=>{var H,z;console.log("[DEBUG] Asignatura de Lectura detectada, buscando texto base");let q=n.textoBase||((H=n.preguntas.find(W=>W.textoBase))==null?void 0:H.textoBase)||((z=n.preguntas[0])==null?void 0:z.textoBase);return console.log("[DEBUG] Texto base encontrado:",q?"S":"NO"),q||(console.log("[WARNING] Es una evaluacin de Lectura pero no tiene texto base"),n.descripcion&&n.descripcion.length>50&&(q=` NOTA: El texto de comprensin no est disponible. La evaluacin podra estar incompleta. Comuncate con tu profesor.

`+n.descripcion,console.log("[DEBUG] Usando descripcin como texto base alternativo"))),q?i.jsxs("div",{className:"mb-8 p-5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:i.jsx(ys,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-200 text-lg",children:" Texto de Comprensin Lectora"}),i.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"Lee atentamente el siguiente texto antes de responder las preguntas"})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-md border border-blue-100 dark:border-blue-800",children:i.jsx("div",{className:"prose prose-sm max-w-none text-slate-800 dark:text-slate-200",children:i.jsx(SE,{content:q,context:"simce-texto-base"})})})]}):null})(),i.jsx("div",{className:"space-y-6",children:n.preguntas.map((q,H)=>i.jsxs("div",{className:`p-4 rounded-lg border ${s[q.id]?"border-green-200 dark:border-green-700/50":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",H+1]}),q.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:q.alternativas.map(z=>i.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer ${s[q.id]===z.id?"bg-indigo-100 dark:bg-indigo-900/50":"hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,onClick:()=>P(q.id,z.id),children:[i.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mr-3 ${s[q.id]===z.id?"border-indigo-600 dark:border-indigo-400":"border-slate-400 dark:border-slate-500"}`,children:s[q.id]===z.id&&i.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-600 dark:bg-indigo-400"})}),i.jsxs("div",{className:"font-bold mr-2",children:[z.id,")"]}),i.jsx("div",{children:z.texto})]},z.id))}),!s[q.id]&&i.jsx("div",{className:"mt-2 text-amber-600 dark:text-amber-400 text-sm",children:"Por favor selecciona una respuesta"})]},q.id))}),i.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[i.jsxs("div",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:[i.jsx(Dc,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"text-sm",children:y&&i.jsxs(i.Fragment,{children:["Tiempo transcurrido: ",L(Math.floor((Date.now()-y)/1e3))]})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Object.keys(s).length," de ",n.preguntas.length," respondidas"]}),i.jsx("button",{onClick:S,disabled:u||Object.keys(s).length!==n.preguntas.length,className:"py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx(zh,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Enviando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(KM,{className:"w-4 h-4"}),i.jsx("span",{children:"Enviar respuestas"})]})})]})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones disponibles"}),k&&i.jsxs("div",{className:"mb-4 p-3 rounded-md bg-slate-50 dark:bg-slate-900/20 border border-slate-200 dark:border-slate-700 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("strong",{children:"Debug:"})," Detectadas ",i.jsx("b",{children:k.porCurso})," por curso, ",i.jsx("b",{children:k.porEstudiante})," por asignacin directa, ",i.jsx("b",{children:k.total})," total."]}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(jF,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones asignadas para tu curso en este momento."})]}):i.jsx("div",{className:"space-y-4",children:t.map(q=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>M(q.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${q.asignatura==="Lectura"||q.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:q.asignatura==="Lectura"||q.asignatura==="Competencia Lectora"?i.jsx(ys,{className:"w-6 h-6"}):i.jsx(GM,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:q.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:q.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:q.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[q.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(q.fechaAsignacion).toLocaleDateString()})]})]})]})},q.id))})]})})},SNt=({currentUser:e})=>{const[t,r]=w.useState([]),[n,a]=w.useState(null),[s,o]=w.useState([]),[l,c]=w.useState([]),[u,d]=w.useState(null),[f,A]=w.useState(!0),[m,g]=w.useState(null),[x,v]=w.useState("general"),[y,N]=w.useState("todos"),C=q=>typeof(q==null?void 0:q.porcentajeAciertos)=="number"?q.porcentajeAciertos:typeof(q==null?void 0:q.porcentajeLogro)=="number"?q.porcentajeLogro:0,_=q=>{const H=q&&(q.fechaEnvio||q.fechaRealizacion)||null;return H?new Date(H).toLocaleDateString():"-"},j=q=>Array.isArray(q==null?void 0:q.respuestas)?q.respuestas.filter(H=>H==null?void 0:H.esCorrecta).length:typeof(q==null?void 0:q.respuestasCorrectas)=="number"?q.respuestasCorrectas:"-",I=q=>{const H=q&&(q.tiempoRealizacion??q.duracionSegundos);if(typeof H=="number"&&H>0){const z=Math.floor(H/60),W=(H%60).toString().padStart(2,"0");return`${z}:${W}`}return"-"};w.useEffect(()=>{(async()=>{try{A(!0);const H=await ZAe(e.id||"");r(H)}catch(H){console.error("Error al cargar evaluaciones:",H),g("No se pudieron cargar las evaluaciones")}finally{A(!1)}})()},[e]);const T=async q=>{try{A(!0),g(null);const H=await hN(q);if(H){a(H);const z=Array.isArray(H.cursosAsignados)?H.cursosAsignados:[];if(z.length>0){const W=await pv(),Z=J=>{if(!J)return"";let ce=J.trim().toLowerCase();return ce=ce.replace(//g,""),ce=ce.replace(/\s+(medio|bsico|basico)/g,""),ce=ce.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),ce=ce.replace(/^(\d)(?![])/,"$1"),ce=ce.replace(/\s+/g,"").toUpperCase(),ce},V=Z(z[0]),Y=W.filter(J=>J.profile==="ESTUDIANTE"&&Z(J.curso||"")===V);c(Y);const R=Y.map(J=>J.id);let O=[];if(R.length>0){const{obtenerResultadosPorCurso:J}=await gi(async()=>{const{obtenerResultadosPorCurso:ce}=await Promise.resolve().then(()=>sL);return{obtenerResultadosPorCurso:ce}},void 0);O=await J(q,R)}else O=await aL(q);o(O);const K=await eme(q,z[0]);K&&d(K)}else{const W=await aL(q);o(W),c([]),d(null)}}}catch(H){console.error("Error al seleccionar evaluacin:",H),g("No se pudo cargar la informacin de la evaluacin seleccionada")}finally{A(!1)}},k=async()=>{console.log("Generando Excel...")},B=q=>{switch(q){case"Adecuado":return"text-green-600 dark:text-green-400";case"Elemental":return"text-yellow-600 dark:text-yellow-400";case"Insuficiente":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}},M=q=>{switch(q){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}},P=()=>{if(!u)return null;const{porcentajeAdecuado:q,porcentajeElemental:H,porcentajeInsuficiente:z}=u;return i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Distribucin por niveles de logro"}),i.jsxs("div",{className:"w-full h-8 rounded-md overflow-hidden flex mb-2",children:[i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all",style:{width:`${q}%`}}),i.jsx("div",{className:"h-full bg-yellow-500 dark:bg-yellow-600 transition-all",style:{width:`${H}%`}}),i.jsx("div",{className:"h-full bg-red-500 dark:bg-red-600 transition-all",style:{width:`${z}%`}})]}),i.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 dark:bg-green-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Adecuado: ",q.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-500 dark:bg-yellow-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Elemental: ",H.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 dark:bg-red-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Insuficiente: ",z.toFixed(1),"%"]})]})]})]})},S=()=>u?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/50",children:i.jsx(Ys,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estudiantes evaluados"}),i.jsx("div",{className:"text-2xl font-bold",children:u.totalEstudiantes})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-indigo-100 dark:bg-indigo-900/50",children:i.jsx(foe,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Promedio de logro"}),i.jsxs("div",{className:"text-2xl font-bold",children:[u.promedioLogro.toFixed(1),"%"]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/50",children:i.jsx(W5e,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Nivel predominante"}),i.jsx("div",{className:`text-2xl font-bold ${B(u.nivelPredominante)}`,children:u.nivelPredominante})]})]})})]}),P(),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estadsticas por eje temtico"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"space-y-4",children:u.porEjeTematico.map((q,H)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-medium",children:q.eje}),i.jsxs("span",{className:"text-sm",children:[q.promedio.toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full",children:i.jsx("div",{className:`h-full rounded-full ${q.promedio>=80?"bg-green-500":q.promedio>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${q.promedio}%`}})})]},H))})})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(zh,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}),L=()=>{const H=(l.length>0?l:[]).map(z=>({est:z,intento:s.find(W=>W.estudianteId===z.id)})).filter(({intento:z})=>y==="todos"?!0:z&&typeof z.nivelLogro=="string"&&z.nivelLogro.toLowerCase()===y);return i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Resultados por estudiante"}),i.jsx("div",{className:"flex space-x-2",children:i.jsxs("select",{className:"text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 px-2 py-1",value:y,onChange:z=>N(z.target.value),children:[i.jsx("option",{value:"todos",children:"Todos los niveles"}),i.jsx("option",{value:"adecuado",children:"Adecuado"}),i.jsx("option",{value:"elemental",children:"Elemental"}),i.jsx("option",{value:"insuficiente",children:"Insuficiente"})]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Curso"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"% Logro"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Correctas"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Tiempo"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Fecha"})]})}),i.jsx("tbody",{children:H.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-slate-600 dark:text-slate-400",children:l.length===0?"No hay estudiantes detectados para el curso asignado o no hay intentos registrados.":"No hay datos para mostrar con los filtros seleccionados"})}):H.map(({est:z,intento:W})=>i.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-3",children:(W==null?void 0:W.estudianteNombre)||z.nombreCompleto||""}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:z.curso||(W==null?void 0:W.curso)||"-"}),i.jsx("td",{className:"px-4 py-3 font-semibold",children:W?C(W).toFixed(1)+"%":""}),i.jsx("td",{className:"px-4 py-3",children:W?i.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${M(W.nivelLogro)}`,children:W.nivelLogro}):i.jsx("span",{className:"text-slate-400",children:""})}),i.jsx("td",{className:"px-4 py-3",children:W?`${j(W)}/${(n==null?void 0:n.preguntas.length)||"-"}`:""}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:W?I(W):""}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:W?_(W):""})]},z.id))})]})})})]})},U=()=>!n||!(u!=null&&u.porPregunta)||!u.porPregunta.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(zh,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}):i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Anlisis por pregunta"}),i.jsx("div",{className:"space-y-6",children:u.porPregunta.map((q,H)=>{var W;const z=n.preguntas.find(Z=>Z.id===q.preguntaId);return z?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",H+1]}),z.enunciado]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:"Eje temtico:"})," ",z.ejeTematico||"No especificado"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Porcentaje de acierto"}),i.jsxs("div",{className:`text-xl font-bold ${q.porcentajeAcierto>=80?"text-green-600 dark:text-green-400":q.porcentajeAcierto>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[q.porcentajeAcierto.toFixed(1),"%"]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full mb-2",children:i.jsx("div",{className:`h-full rounded-full ${q.porcentajeAcierto>=80?"bg-green-500":q.porcentajeAcierto>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${q.porcentajeAcierto}%`}})})}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Distribucin de respuestas"}),i.jsx("div",{className:"space-y-2",children:q.distribucionRespuestas.map(Z=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs ${Z.alternativaId===z.respuestaCorrecta?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"} mr-2`,children:Z.alternativaId}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-sm overflow-hidden",children:i.jsx("div",{className:`h-full ${Z.alternativaId===z.respuestaCorrecta?"bg-green-500 dark:bg-green-600":"bg-red-500 dark:bg-red-600"}`,style:{width:`${Z.porcentaje}%`}})})}),i.jsxs("div",{className:"ml-2 w-10 text-right text-sm",children:[Z.porcentaje.toFixed(0),"%"]})]},Z.alternativaId))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Alternativa correcta"}),i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",children:i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"font-bold mr-2",children:[z.respuestaCorrecta,")"]}),i.jsx("div",{children:(W=z.alternativas.find(Z=>Z.id===z.respuestaCorrecta))==null?void 0:W.texto})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"text-sm font-semibold mb-1",children:"Dificultad"}),i.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm ${q.porcentajeAcierto>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":q.porcentajeAcierto>=50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:q.porcentajeAcierto>=80?"Baja":q.porcentajeAcierto>=50?"Media":"Alta"})]})]})]})]},q.preguntaId):null})})]});return f?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(zh,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando informacin..."})]}):i.jsx("div",{className:"space-y-6",children:n?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-200 dark:border-slate-700 pb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura,"  ",s.length," estudiantes evaluados"]}),Array.isArray(n.cursosAsignados)&&n.cursosAsignados.length>0&&i.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[i.jsx("span",{className:"font-semibold text-xs text-indigo-700 dark:text-indigo-300",children:"Cursos asignados:"}),n.cursosAsignados.map((q,H)=>i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-0.5 px-2 rounded-full text-xs",children:q},q+H))]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:k,className:"py-2 px-3 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 text-sm",children:[i.jsx(Df,{className:"w-4 h-4"}),i.jsx("span",{children:"Exportar"})]}),i.jsx("button",{onClick:()=>a(null),className:"py-2 px-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 text-sm",children:"Volver"})]})]}),m&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(Sh,{className:"w-4 h-4 mr-2"}),m]}),i.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="general"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("general"),children:"Vista general"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porEstudiante"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porEstudiante"),children:"Por estudiante"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${x==="porPregunta"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>v("porPregunta"),children:"Por pregunta"})]}),x==="general"&&S(),x==="porEstudiante"&&L(),x==="porPregunta"&&U()]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones para analizar"}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Dh,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones SIMCE creadas an."})]}):i.jsx("div",{className:"space-y-4",children:t.map(q=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>T(q.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${q.asignatura==="Lectura"||q.asignatura==="Competencia Lectora"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:q.asignatura==="Lectura"||q.asignatura==="Competencia Lectora"?i.jsx(ys,{className:"w-6 h-6"}):i.jsx(GM,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:q.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:q.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:q.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[q.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:(()=>{try{const H=q.fechaCreacion,z=typeof(H==null?void 0:H.toDate)=="function"?H.toDate():new Date(H);return isNaN(z.getTime())?"-":z.toLocaleDateString()}catch{return"-"}})()})]})]})]})},q.id))})]})})},vS=({currentUser:e})=>{const[t,r]=w.useState("generador"),n=(e==null?void 0:e.profile)===Ot.PROFESORADO||(e==null?void 0:e.profile)===Ot.SUBDIRECCION||(e==null?void 0:e.profile)===Ot.COORDINACION_TP,a=(e==null?void 0:e.profile)===Ot.ESTUDIANTE;return w.useEffect(()=>{a&&r("evaluacion")},[a]),i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluacin SIMCE"})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex",children:[n&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>r("generador"),className:`flex items-center gap-2 px-4 py-3 ${t==="generador"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(QN,{className:"w-4 h-4"}),i.jsx("span",{children:"Generador de Preguntas"})]}),i.jsxs("button",{onClick:()=>r("resultados"),className:`flex items-center gap-2 px-4 py-3 ${t==="resultados"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(Dl,{className:"w-4 h-4"}),i.jsx("span",{children:"Resultados"})]})]}),a&&i.jsxs("button",{onClick:()=>r("evaluacion"),className:`flex items-center gap-2 px-4 py-3 ${t==="evaluacion"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(i1,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Evaluaciones"})]})]})}),i.jsxs("div",{className:"p-6",children:[n&&t==="generador"&&i.jsx(kot,{currentUser:e}),n&&t==="resultados"&&i.jsx(SNt,{currentUser:e}),a&&t==="evaluacion"&&i.jsx(kNt,{currentUser:e}),!n&&!a&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes permisos para acceder a este mdulo."})})]})]})]})},_Nt=["Enviada","Visada","Aceptada","Rechazada","Completada"],_P=({currentUser:e})=>{const t=e.profile===Ot.SUBDIRECCION,r=e.profile===Ot.COORDINACION_TP,[n,a]=w.useState(""),[s,o]=w.useState(xa[0]),[l,c]=w.useState(Y0[0]),[u,d]=w.useState(""),[f,A]=w.useState(30),[m,g]=w.useState(new Date().toISOString().split("T")[0]),[x,v]=w.useState(""),[y,N]=w.useState(null),[C,_]=w.useState(""),[j,I]=w.useState(null),[T,k]=w.useState(!1),[B,M]=w.useState([]),[P,S]=w.useState([]),[L,U]=w.useState("Todos"),[q,H]=w.useState("Todas"),[z,W]=w.useState("Todos"),[Z,V]=w.useState("Todos"),[Y,R]=w.useState("Todos"),[O,K]=w.useState(null),[J,ce]=w.useState(""),[oe,re]=w.useState(!1),[ue,le]=w.useState(null),[ve,X]=w.useState(!1),[Ee,Be]=w.useState(!0),je=w.useMemo(()=>{const He=new Set;return P.forEach(Tt=>Tt.solicitanteNombre&&He.add(Tt.solicitanteNombre)),["Todos",...Array.from(He).sort()]},[P]),fe=w.useMemo(()=>{const He=new Set;return P.forEach(Tt=>Tt.asignatura&&He.add(Tt.asignatura)),["Todas",...Array.from(He).sort()]},[P]),ye=w.useMemo(()=>{const He=new Set;return P.forEach(Tt=>Tt.curso&&He.add(Tt.curso)),["Todos",...Array.from(He).sort()]},[P]),Ae=w.useMemo(()=>P.length,[P]),se=w.useMemo(()=>P.reduce((He,Tt)=>He+(Number(Tt.cantidadCopias)||0),0),[P]),ne=He=>{const Tt=new Map;for(const Ie of P){const ft=(He(Ie)||"").trim()||"";Tt.set(ft,(Tt.get(ft)||0)+1)}return Array.from(Tt.entries()).map(([Ie,ft])=>({name:Ie,value:ft})).sort((Ie,ft)=>ft.value-Ie.value)},de=w.useMemo(()=>ne(He=>He.estado||"Enviada"),[P]),me=w.useMemo(()=>ne(He=>He.nivel||""),[P]),ge=w.useMemo(()=>ne(He=>He.asignatura||"").slice(0,10),[P]),Te=w.useMemo(()=>ne(He=>He.solicitanteNombre||"").slice(0,10),[P]),Ve=w.useMemo(()=>ne(He=>He.curso||"").slice(0,10),[P]),Xe={Enviada:"#f59e0b",Visada:"#3b82f6",Aceptada:"#10b981",Rechazada:"#ef4444",Completada:"#059669"},Ke=["#0ea5e9","#22c55e","#f97316","#6366f1","#14b8a6","#eab308","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f43f5e"];w.useEffect(()=>{var Tt;const He=Xpe({emailLower:(Tt=e.email)==null?void 0:Tt.toLowerCase()},M);if(t||r){const Ie=Ype({nivel:Y,curso:L,asignatura:q,docenteNombre:z,estado:Z},S);return()=>{He(),Ie()}}return()=>{He()}},[e.email,t,r,Y,L,q,z,Z]);const Qe=async He=>{if(He.preventDefault(),!n.trim()){I("Debe indicar un ttulo o descripcin del material.");return}try{k(!0),I(null);let Tt;if(y)try{const{uploadAdjuntoMulticopia:ft}=await gi(async()=>{const{uploadAdjuntoMulticopia:vt}=await Promise.resolve().then(()=>_pt);return{uploadAdjuntoMulticopia:vt}},void 0);Tt=await ft(y,"multicopias")}catch(ft){console.warn("No se pudo subir el adjunto:",ft)}const Ie={solicitanteId:e.id,solicitanteNombre:e.nombreCompleto,solicitanteEmail:e.email,tituloMaterial:n,asignatura:s,nivel:l,curso:u||void 0,cantidadCopias:Math.max(1,Number(f)||1),fechaEntregaDeseada:m,enlaceUrl:x||void 0,adjuntoUrl:Tt,comentarios:C||void 0,estado:"Enviada"};await Kpe(Ie),a(""),c(Y0[0]),d(""),A(30),v(""),N(null),_("")}catch(Tt){I((Tt==null?void 0:Tt.message)||"No se pudo crear la solicitud.")}finally{k(!1)}},Je=()=>i.jsxs("form",{onSubmit:Qe,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Ttulo o descripcin del material"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{value:n,onChange:He=>a(He.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Ej: Prueba de ecuaciones lineales Unidad 2"}),i.jsx(Wi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),i.jsx("select",{value:s,onChange:He=>o(He.target.value),className:"w-full border rounded-md px-3 py-2",children:xa.map(He=>i.jsx("option",{value:He,children:He},He))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Nivel"}),i.jsx("select",{required:!0,value:l,onChange:He=>c(He.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:Y0.map(He=>i.jsx("option",{value:He,children:He},He))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso (opcional)"}),i.jsxs("select",{value:u,onChange:He=>d(He.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[i.jsx("option",{value:"",children:""}),Sa.map(He=>i.jsx("option",{value:He,children:He},He))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Cantidad de copias"}),i.jsx("input",{type:"number",min:1,value:f,onChange:He=>A(parseInt(He.target.value)||1),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Fecha de entrega deseada"}),i.jsx("input",{type:"date",value:m,onChange:He=>g(He.target.value),className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Enlace al material (Drive, etc.)"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{value:x,onChange:He=>v(He.target.value),className:"w-full border rounded-md px-3 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"https://..."}),i.jsx(H5,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"O subir archivo (opcional)"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"file",onChange:He=>{var Tt;return N(((Tt=He.target.files)==null?void 0:Tt[0])||null)},className:"block w-full text-sm text-slate-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"}),i.jsx(Pb,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se guardar en Storage y se adjuntar a la solicitud."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Comentarios"}),i.jsx("textarea",{value:C,onChange:He=>_(He.target.value),rows:3,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Indicaciones adicionales"})]}),j&&i.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:j}),i.jsx("div",{className:"text-right",children:i.jsxs("button",{type:"submit",disabled:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400 shadow-sm",children:[i.jsx(KM,{className:"h-4 w-4"})," ",T?"Enviando":"Enviar solicitud"]})})]}),mt=()=>i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Ttulo"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),i.jsx("th",{className:"px-4 py-2"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:B.map(He=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-2 text-sm",children:He.createdAt?new Date(He.createdAt).toLocaleString("es-CL"):""}),i.jsx("td",{className:"px-4 py-2 text-sm font-medium text-slate-800",children:He.tituloMaterial}),i.jsx("td",{className:"px-4 py-2 text-sm",children:He.asignatura}),i.jsx("td",{className:"px-4 py-2 text-sm",children:He.nivel}),i.jsx("td",{className:"px-4 py-2 text-sm",children:He.curso||""}),i.jsx("td",{className:"px-4 py-2 text-sm",children:He.cantidadCopias}),i.jsx("td",{className:"px-4 py-2 text-sm",children:He.fechaEntregaDeseada}),i.jsxs("td",{className:"px-4 py-2 text-sm",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[He.enlaceUrl&&i.jsx("a",{href:He.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Enlace"}),He.adjuntoUrl&&i.jsx("a",{href:He.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline",children:"Archivo"}),!He.enlaceUrl&&!He.adjuntoUrl&&i.jsx("span",{className:"text-slate-400",children:""})]}),He.estado==="Rechazada"&&He.motivoRechazo&&i.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Motivo: ",He.motivoRechazo]})]}),i.jsx("td",{className:"px-4 py-2 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${He.estado==="Aceptada"?"bg-green-100 text-green-800":He.estado==="Rechazada"?"bg-red-100 text-red-700":He.estado==="Visada"?"bg-blue-100 text-blue-800":He.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[He.estado==="Aceptada"&&i.jsx(va,{className:"h-3 w-3"}),He.estado==="Rechazada"&&i.jsx(Sh,{className:"h-3 w-3"}),He.estado==="Visada"&&i.jsx(fp,{className:"h-3 w-3"}),He.estado==="Completada"&&i.jsx(y2,{className:"h-3 w-3"}),He.estado==="Enviada"&&i.jsx(Pb,{className:"h-3 w-3"}),He.estado]})}),i.jsx("td",{className:"px-4 py-2 text-sm text-right",children:(He.estado==="Enviada"||He.estado==="Rechazada")&&i.jsx("button",{title:"Eliminar",onClick:()=>le(He),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:i.jsx(Qn,{className:"h-4 w-4"})})})]},He.id))})]})}),We=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 w-full md:w-auto",children:[i.jsx(JC,{className:"h-4 w-4"})," ",i.jsx("span",{className:"text-sm",children:"Filtros"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Nivel"}),i.jsx("select",{value:Y,onChange:He=>R(He.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",...Y0].map(He=>i.jsx("option",{value:He,children:He},He))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Docente"}),i.jsx("select",{value:z,onChange:He=>W(He.target.value),className:"border rounded-md px-3 py-1.5",children:je.map(He=>i.jsx("option",{value:He,children:He},He))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Asignatura"}),i.jsx("select",{value:q,onChange:He=>H(He.target.value),className:"border rounded-md px-3 py-1.5",children:fe.map(He=>i.jsx("option",{value:He,children:He},He))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Curso"}),i.jsx("select",{value:L,onChange:He=>U(He.target.value),className:"border rounded-md px-3 py-1.5",children:ye.map(He=>i.jsx("option",{value:He,children:He},He))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Estado"}),i.jsx("select",{value:Z,onChange:He=>V(He.target.value),className:"border rounded-md px-3 py-1.5",children:["Todos",..._Nt].map(He=>i.jsx("option",{value:He,children:He},He))})]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700",children:"Resumen grfico"}),i.jsxs("button",{onClick:()=>Be(He=>!He),className:"text-xs px-3 py-1.5 rounded border bg-white hover:bg-slate-50",children:[Ee?"Ocultar":"Ver"," grficos"]})]}),Ee&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"col-span-1 lg:col-span-3 grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Total solicitudes"}),i.jsx("div",{className:"text-2xl font-bold",children:Ae})]}),i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Total copias pedidas"}),i.jsx("div",{className:"text-2xl font-bold",children:se})]}),i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Docentes nicos"}),i.jsx("div",{className:"text-2xl font-bold",children:new Set(P.map(He=>He.solicitanteNombre||"")).size})]}),i.jsxs("div",{className:"rounded-xl border p-4 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Asignaturas nicas"}),i.jsx("div",{className:"text-2xl font-bold",children:new Set(P.map(He=>He.asignatura||"")).size})]})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por estado"}),i.jsx("div",{className:"h-[240px]",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(CT,{children:[i.jsx(NE,{data:de,dataKey:"value",nameKey:"name",outerRadius:80,children:de.map((He,Tt)=>i.jsx(SA,{fill:Xe[He.name]||Ke[Tt%Ke.length]},`estado-${Tt}`))}),i.jsx(qo,{}),i.jsx(Xp,{})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por nivel"}),i.jsx("div",{className:"h-[240px]",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(yf,{data:me,margin:{left:8,right:8,bottom:8},children:[i.jsx(Rh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",tick:{fontSize:12},interval:0,angle:-20,height:50,textAnchor:"end"}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(qo,{}),i.jsx(Ed,{dataKey:"value",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por asignatura (Top 10)"}),i.jsx("div",{className:"h-[240px]",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(yf,{data:ge,margin:{left:8,right:8,bottom:8},children:[i.jsx(Rh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(qo,{}),i.jsx(Ed,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por docente (Top 10)"}),i.jsx("div",{className:"h-[260px]",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(yf,{data:Te,margin:{left:8,right:8,bottom:8},children:[i.jsx(Rh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(qo,{}),i.jsx(Ed,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})})})]}),i.jsxs("div",{className:"rounded-xl border p-3 bg-white",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Por curso (Top 10)"}),i.jsx("div",{className:"h-[240px]",children:i.jsx(Ko,{width:"100%",height:"100%",children:i.jsxs(yf,{data:Ve,margin:{left:8,right:8,bottom:8},children:[i.jsx(Rh,{strokeDasharray:"3 3"}),i.jsx(Rc,{dataKey:"name",tick:{fontSize:11},interval:0,angle:-30,height:70,textAnchor:"end"}),i.jsx(Lc,{allowDecimals:!1}),i.jsx(qo,{}),i.jsx(Ed,{dataKey:"value",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Docente"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Ttulo"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Nivel"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Cantidad"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha deseada"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Material"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Estado"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Motivo"}),i.jsx("th",{className:"px-3 py-2"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:P.map(He=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-3 py-2 text-sm",children:He.createdAt?new Date(He.createdAt).toLocaleString("es-CL"):""}),i.jsx("td",{className:"px-3 py-2 text-sm",children:He.solicitanteNombre}),i.jsx("td",{className:"px-3 py-2 text-sm font-medium text-slate-800",children:He.tituloMaterial}),i.jsx("td",{className:"px-3 py-2 text-sm",children:He.asignatura}),i.jsx("td",{className:"px-3 py-2 text-sm",children:He.nivel}),i.jsx("td",{className:"px-3 py-2 text-sm",children:He.curso||""}),i.jsx("td",{className:"px-3 py-2 text-sm",children:He.cantidadCopias}),i.jsx("td",{className:"px-3 py-2 text-sm",children:He.fechaEntregaDeseada}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("div",{className:"flex gap-2 items-center",children:[He.enlaceUrl&&i.jsxs("a",{href:He.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline",children:[i.jsx(H5,{className:"h-4 w-4"})," Enlace"]}),He.adjuntoUrl&&i.jsxs("a",{href:He.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-emerald-600 hover:underline",children:[i.jsx(Pb,{className:"h-4 w-4"})," Archivo"]}),!He.enlaceUrl&&!He.adjuntoUrl&&i.jsx("span",{className:"text-slate-400",children:""})]})}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${He.estado==="Aceptada"?"bg-green-100 text-green-800":He.estado==="Rechazada"?"bg-red-100 text-red-700":He.estado==="Visada"?"bg-blue-100 text-blue-800":He.estado==="Completada"?"bg-emerald-100 text-emerald-800":"bg-yellow-100 text-yellow-800"}`,children:[He.estado==="Aceptada"&&i.jsx(va,{className:"h-3 w-3"}),He.estado==="Rechazada"&&i.jsx(Sh,{className:"h-3 w-3"}),He.estado==="Visada"&&i.jsx(fp,{className:"h-3 w-3"}),He.estado==="Completada"&&i.jsx(y2,{className:"h-3 w-3"}),He.estado==="Enviada"&&i.jsx(Pb,{className:"h-3 w-3"}),He.estado]})}),i.jsx("td",{className:"px-3 py-2 text-sm max-w-[240px] truncate",title:He.motivoRechazo||"",children:He.motivoRechazo||""}),i.jsxs("td",{className:"px-3 py-2 text-sm text-right space-x-2",children:[He.estado==="Enviada"&&i.jsxs("button",{onClick:async()=>await I2(He.id,"Visada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:[i.jsx(fp,{className:"h-4 w-4"})," Visar"]}),(He.estado==="Enviada"||He.estado==="Visada")&&i.jsxs("button",{onClick:async()=>{await I2(He.id,"Aceptada",e.nombreCompleto),await Jpe(He)},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700",children:[i.jsx(va,{className:"h-4 w-4"})," Aceptar"]}),He.estado!=="Rechazada"&&He.estado!=="Completada"&&i.jsxs("button",{onClick:()=>{K(He),ce("")},className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",children:[i.jsx(Sh,{className:"h-4 w-4"})," Rechazar"]}),He.estado==="Aceptada"&&i.jsxs("button",{onClick:async()=>await I2(He.id,"Completada",e.nombreCompleto),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:[i.jsx(y2,{className:"h-4 w-4"})," Completada"]}),e.id===He.solicitanteId&&(He.estado==="Enviada"||He.estado==="Rechazada")&&i.jsxs("button",{title:"Eliminar",onClick:()=>le(He),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 text-slate-800 hover:bg-slate-300",children:[i.jsx(Qn,{className:"h-4 w-4"})," Eliminar"]})]})]},He.id))})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl p-6 shadow-xl",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Motivo de rechazo"}),i.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Indica brevemente el motivo del rechazo para que el docente pueda corregir o reenviar."}),i.jsx("textarea",{rows:4,value:J,onChange:He=>ce(He.target.value),className:"w-full border-slate-300 rounded-md",placeholder:"Ej: El material no es legible o falta la portada."}),i.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[i.jsxs("button",{onClick:()=>{K(null),ce("")},className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:[i.jsx(Sh,{className:"h-4 w-4"})," Cancelar"]}),i.jsx("button",{disabled:oe,onClick:async()=>{if(O)try{re(!0),await I2(O.id,"Rechazada",e.nombreCompleto,{motivoRechazo:J||void 0}),K(null),ce("")}finally{re(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:oe?"Guardando":i.jsxs(i.Fragment,{children:[i.jsx(Sh,{className:"h-4 w-4"})," Confirmar rechazo"]})})]})]})}),ue&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl p-6 shadow-xl",children:[i.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2 text-red-700",children:[i.jsx(Qn,{className:"h-5 w-5"})," Eliminar solicitud"]}),i.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:["Esta accin eliminar la solicitud ",ue.tituloMaterial,". Si tiene un archivo adjunto, tambin se intentar borrar del almacenamiento."]}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Deseas continuar?"}),i.jsxs("div",{className:"mt-1 flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>le(null),className:"inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{disabled:ve,onClick:async()=>{try{X(!0),await Zpe(ue.id,{adjuntoUrl:ue.adjuntoUrl}),le(null)}catch{alert("No se pudo eliminar.")}finally{X(!1)}},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400",children:ve?"Eliminando":i.jsxs(i.Fragment,{children:[i.jsx(Qn,{className:"h-4 w-4"})," Eliminar"]})})]})]})})]});return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(g3,{className:"h-6 w-6 text-amber-600"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Multicopias"})]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Gestiona solicitudes de copias de material evaluativo y pedaggico."}),(e.profile===Ot.PROFESORADO||r)&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[i.jsx(Wi,{className:"h-5 w-5 text-amber-600"})," Nueva solicitud"]}),Je()]}),(e.profile===Ot.PROFESORADO||r)&&i.jsxs("div",{className:"mb-10",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[i.jsx(jb,{className:"h-5 w-5 text-amber-600"})," Mis solicitudes"]}),mt()]}),t&&i.jsxs("div",{children:[i.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-200 mb-3",children:[i.jsx(y2,{className:"h-5 w-5 text-amber-600"})," Panel de Subdireccin"]}),We()]})]})};async function TNt(e){const t=pt(dt,"ensayo_evaluaciones"),r={...e,createdAt:Xn(),tipo:"evaluacion_ensayo",indicadores:10};return(await dn(t,r)).id}async function BNt(e){const t=pt(dt,"ensayo_evaluaciones"),r=Lt(t,tr("createdAt","desc"),Fl(e==null?void 0:e.max)),n=await Rr(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:l.createdAt??null,tipo:l.tipo,indicadores:l.indicadores})});let s=a;return e!=null&&e.filtroCurso&&(s=s.filter(o=>(o.curso||"").toUpperCase()===e.filtroCurso.toUpperCase())),e!=null&&e.filtroAsignatura&&(s=s.filter(o=>(o.asignatura||"")===e.filtroAsignatura)),e!=null&&e.filtroProfesorId&&(s=s.filter(o=>(o.profesorId||"")===e.filtroProfesorId)),e!=null&&e.filtroCreadorId&&(s=s.filter(o=>(o.creadorId||"")===e.filtroCreadorId)),s}function p8(e){if(e!==void 0){if(e===null)return null;if(Array.isArray(e))return e.map(p8);if(typeof e=="object"){const t={};return Object.entries(e).forEach(([r,n])=>{const a=p8(n);a!==void 0&&(t[r]=a)}),t}return e}}async function INt(e,t){const r=er(dt,"ensayo_evaluaciones",e),n=p8({...t});await Zi(r,n)}async function DNt(e){const t=er(dt,"ensayo_evaluaciones",e);await fa(t)}const bS=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},pu=[1,2,3,4,5,6,7,8,9,10],g8={1:"Llega puntualmente a la evaluacin.",2:"Sigue las instrucciones dadas por el/la docente respecto a su ubicacin en la sala de clases.",3:"Sigue las instrucciones dadas por el/la docente respecto al inicio de la evaluacin.",4:"Se mantiene en silencio mientras desarrolla la evaluacin.",5:"Mantiene su celular o cualquier equipo tecnolgico en silencio y guardado.",6:"Levanta la mano si requiere consultar alguna duda.",7:"Espera en silencio mientras es atendido por el/la docente para resolver sus dudas.",8:"Se observa que el/la estudiante realiza el esfuerzo por llevar a trmino satisfactorio su evaluacin.",9:"Respeta los tiempos considerados para realizar la evaluacin y se mantiene en silencio una vez finalizada.",10:"Entrega el instrumento de evaluacin cuando se le solicita."},TP=({currentUser:e})=>{const[t,r]=w.useState("captura"),[n,a]=w.useState(""),[s,o]=w.useState("Lengua y Literatura"),[l,c]=w.useState(""),[u,d]=w.useState([]),[f,A]=w.useState(!1),[m,g]=w.useState(!1),[x,v]=w.useState(!1),[y,N]=w.useState([]),[C,_]=w.useState({}),[j,I]=w.useState(null),[T,k]=w.useState(!1),[B,M]=w.useState(""),[P,S]=w.useState(""),[L,U]=w.useState(""),[q,H]=w.useState(!0),[z,W]=w.useState(""),[Z,V]=w.useState(""),[Y,R]=w.useState([]),[O,K]=w.useState({}),[J,ce]=w.useState({});w.useEffect(()=>{A(!0),pv().then(X=>d(X)).finally(()=>A(!1))},[]);const oe=w.useMemo(()=>u.filter(X=>X.profile==="PROFESORADO"||X.profile==="PROFESORADO"),[u]);w.useEffect(()=>{const X=bS(n),Ee=u.filter(je=>je.profile==="ESTUDIANTE"&&bS(je.curso||"")===X).map(je=>({id:je.id,nombre:je.nombreCompleto}));R(Ee);const Be={};Ee.forEach(je=>{Be[je.id]={},pu.forEach(fe=>{Be[je.id][fe]=!0})}),K(Be),ce({})},[n,u]);const re=(X,Ee)=>{K(Be=>{var je;return{...Be,[X]:{...Be[X],[Ee]:!((je=Be[X])!=null&&je[Ee])}}})},ue=X=>{if(J[X])return 0;const Ee=O[X];if(!Ee)return 0;const je=pu.map(fe=>Ee[fe]?7:2).reduce((fe,ye)=>fe+ye,0)/pu.length;return Math.round(je*10)/10},le=w.useMemo(()=>{if(Y.length===0)return pu.map(Ee=>({indicador:Ee,porcentajeOn:0,promedio:0}));const X=Y.filter(Ee=>!J[Ee.id]);return X.length===0?pu.map(Ee=>({indicador:Ee,porcentajeOn:0,promedio:0})):pu.map(Ee=>{const Be=X.reduce((ye,Ae)=>{var se;return ye+((se=O[Ae.id])!=null&&se[Ee]?1:0)},0),je=Math.round(Be/X.length*100),fe=X.reduce((ye,Ae)=>{var se;return ye+((se=O[Ae.id])!=null&&se[Ee]?7:2)},0)/X.length;return{indicador:Ee,porcentajeOn:je,promedio:Math.round(fe*10)/10}})},[Y,O,J]),ve=async()=>{var X;if(!(!n||!s||!l||Y.length===0)){g(!0);try{await TNt({curso:bS(n),asignatura:s,profesorId:l,profesorNombre:((X=u.find(Ee=>Ee.id===l))==null?void 0:X.nombreCompleto)||"",creadorId:e.id,creadorNombre:e.nombreCompleto,fecha:new Date().toISOString(),resultados:Y.map(Ee=>{const Be=!!J[Ee.id];return{estudianteId:Ee.id,estudianteNombre:Ee.nombre,indicadores:pu.map(je=>{var fe;return(fe=O[Ee.id])!=null&&fe[je]?7:2}),promedio:Be?null:ue(Ee.id),ausente:Be}})}),alert("Evaluacin guardada")}catch(Ee){console.error("Error guardando evaluacin de ensayo",Ee),alert("No se pudo guardar. Reintenta.")}finally{g(!1)}}};return w.useEffect(()=>{(async()=>{if(t==="guardados"){v(!0);try{let Be=await BNt({max:200,filtroCurso:B?bS(B):void 0,filtroAsignatura:P||void 0,filtroProfesorId:L||void 0,filtroCreadorId:q?e.id:void 0});if(z){const je=new Date(z+"T00:00:00");Be=Be.filter(fe=>{var ye,Ae;return(((Ae=(ye=fe.createdAt)==null?void 0:ye.toDate)==null?void 0:Ae.call(ye))||new Date(fe.fecha))>=je})}if(Z){const je=new Date(Z+"T23:59:59");Be=Be.filter(fe=>{var ye,Ae;return(((Ae=(ye=fe.createdAt)==null?void 0:ye.toDate)==null?void 0:Ae.call(ye))||new Date(fe.fecha))<=je})}N(Be)}finally{v(!1)}}})()},[t,e.id,B,P,L,q,z,Z]),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{className:`px-3 py-2 text-sm inline-flex items-center gap-2 border-b-2 ${t==="captura"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,onClick:()=>r("captura"),children:[i.jsx(e0,{className:"w-4 h-4"})," Captura"]}),i.jsxs("button",{className:`px-3 py-2 text-sm inline-flex items-center gap-2 border-b-2 ${t==="guardados"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"}`,onClick:()=>r("guardados"),children:[i.jsx(H4e,{className:"w-4 h-4"})," Guardados"]})]}),t==="guardados"&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Ensayos guardados"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>RNt(y),title:"Exportar CSV (aplica filtros)",children:[i.jsx(Df,{className:"w-3.5 h-3.5"})," Exportar CSV"]}),i.jsx("button",{className:"text-xs text-slate-500 hover:text-slate-700",onClick:()=>r("captura"),children:"Ir a captura"})]})]}),i.jsx(ONt,{guardados:y}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Curso"}),i.jsxs("select",{value:B,onChange:X=>M(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[i.jsx("option",{value:"",children:"Todos"}),Sa.map(X=>i.jsx("option",{value:X,children:X},X))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Asignatura"}),i.jsxs("select",{value:P,onChange:X=>S(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[i.jsx("option",{value:"",children:"Todas"}),xa.map(X=>i.jsx("option",{value:X,children:X},X))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Profesor/a"}),i.jsxs("select",{value:L,onChange:X=>U(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",children:[i.jsx("option",{value:"",children:"Todos"}),u.filter(X=>X.profile==="PROFESORADO").map(X=>i.jsx("option",{value:X.id,children:X.nombreCompleto},X.id))]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[i.jsx("input",{type:"checkbox",checked:q,onChange:X=>H(X.target.checked)})," Solo mis registros"]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Desde"}),i.jsx("input",{type:"date",value:z,onChange:X=>W(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Hasta"}),i.jsx("input",{type:"date",value:Z,onChange:X=>V(X.target.value),className:"w-full border rounded-md px-2 py-1 text-sm"})]})]}),i.jsx("div",{className:"mt-3 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/40",children:[i.jsx("th",{className:"px-2 py-2 text-left text-xs font-semibold text-slate-500",children:"Detalle"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Asignatura"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Profesor"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Creador/a"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"N Estudiantes"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Exportar"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Acciones"})]})}),i.jsxs("tbody",{children:[x&&i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-slate-500",children:"Cargando"})}),!x&&y.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"px-4 py-6 text-center text-slate-500",children:"No hay ensayos guardados."})}),y.map(X=>{var Ee,Be,je;return i.jsxs(At.Fragment,{children:[i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/50 hover:bg-slate-50/50",children:[i.jsx("td",{className:"px-2 py-2",children:i.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-800",onClick:()=>_(fe=>({...fe,[X.id]:!fe[X.id]})),children:[C[X.id]?i.jsx(X2,{className:"w-4 h-4"}):i.jsx(XC,{className:"w-4 h-4"}),C[X.id]?"Ocultar":"Ver"]})}),i.jsx("td",{className:"px-3 py-2 text-sm",children:(((Be=(Ee=X.createdAt)==null?void 0:Ee.toDate)==null?void 0:Be.call(Ee))||new Date(X.fecha)).toLocaleString()}),i.jsx("td",{className:"px-3 py-2 text-sm",children:X.curso}),i.jsx("td",{className:"px-3 py-2 text-sm",children:X.asignatura}),i.jsx("td",{className:"px-3 py-2 text-sm",children:X.profesorNombre}),i.jsx("td",{className:"px-3 py-2 text-sm",children:X.creadorNombre}),i.jsx("td",{className:"px-3 py-2 text-sm",children:((je=X.resultados)==null?void 0:je.length)??0}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>FNt(X),title:"Exportar CSV de esta evaluacin",children:[i.jsx(Df,{className:"w-3.5 h-3.5"})," CSV"]})}),i.jsx("td",{className:"px-3 py-2 text-sm",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>I(X),title:"Editar",children:[i.jsx(x3,{className:"w-3.5 h-3.5"})," Editar"]}),i.jsxs("button",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-md border border-red-300 text-red-700 hover:bg-red-50",onClick:async()=>{if(confirm("Eliminar esta evaluacin? Esta accin no se puede deshacer."))try{await DNt(X.id),N(ye=>ye.filter(Ae=>Ae.id!==X.id))}catch(ye){alert("No se pudo eliminar"),console.error(ye)}},title:"Eliminar",children:[i.jsx(Qn,{className:"w-3.5 h-3.5"})," Eliminar"]})]})})]}),C[X.id]&&i.jsx("tr",{className:"bg-slate-50/40 dark:bg-slate-900/30",children:i.jsx("td",{colSpan:9,className:"px-4 py-3",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Estudiante"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Ausente"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Promedio"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-500",children:"Indicadores"})]})}),i.jsx("tbody",{children:(X.resultados||[]).map((fe,ye)=>i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/40",children:[i.jsx("td",{className:"px-3 py-1.5 whitespace-nowrap",children:fe.estudianteNombre}),i.jsx("td",{className:"px-3 py-1.5",children:fe.ausente?i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-slate-200 text-slate-700 text-xs",children:"S"}):i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700 text-xs",children:"No"})}),i.jsx("td",{className:"px-3 py-1.5 font-semibold",children:fe.ausente?"":(fe.promedio??0).toFixed(1)}),i.jsx("td",{className:"px-3 py-1.5",children:i.jsx("div",{className:"flex items-center gap-1",children:(fe.indicadores||[]).map((Ae,se)=>i.jsx("span",{className:`w-4 h-4 rounded-full border ${Ae>=7?"bg-emerald-500 border-emerald-600":"bg-red-400 border-red-500"}`,title:`${se+1}: ${Ae.toFixed(1)}`},se))})})]},fe.estudianteId||ye))})]})})})})]},X.id)})]})]})})]})}),j&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>!T&&I(null)}),i.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 w-full max-w-2xl p-4 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-sm font-semibold",children:"Editar evaluacin"}),i.jsx("button",{className:"p-1 text-slate-500 hover:text-slate-700",onClick:()=>!T&&I(null),children:i.jsx(No,{className:"w-4 h-4"})})]}),i.jsxs("form",{onSubmit:async X=>{X.preventDefault(),k(!0);try{await INt(j.id,{curso:j.curso,asignatura:j.asignatura,profesorId:j.profesorId,profesorNombre:j.profesorNombre,creadorId:j.creadorId,creadorNombre:j.creadorNombre,fecha:j.fecha}),N(Ee=>Ee.map(Be=>Be.id===j.id?{...Be,...j}:Be)),I(null)}catch(Ee){console.error(Ee),alert("No se pudo guardar cambios")}finally{k(!1)}},className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Curso"}),i.jsx("select",{value:j.curso,onChange:X=>I({...j,curso:X.target.value}),className:"w-full border rounded-md px-2 py-1 text-sm",children:Sa.map(X=>i.jsx("option",{value:X,children:X},X))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Asignatura"}),i.jsx("select",{value:j.asignatura,onChange:X=>I({...j,asignatura:X.target.value}),className:"w-full border rounded-md px-2 py-1 text-sm",children:xa.map(X=>i.jsx("option",{value:X,children:X},X))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Profesor/a"}),i.jsx("select",{value:j.profesorId,onChange:X=>{const Ee=X.target.value,Be=u.find(je=>je.id===Ee);I({...j,profesorId:Ee,profesorNombre:(Be==null?void 0:Be.nombreCompleto)||j.profesorNombre})},className:"w-full border rounded-md px-2 py-1 text-sm",children:u.filter(X=>X.profile==="PROFESORADO").map(X=>i.jsx("option",{value:X.id,children:X.nombreCompleto},X.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500",children:"Fecha (ISO)"}),i.jsx("input",{type:"datetime-local",value:new Date(j.fecha).toISOString().slice(0,16),onChange:X=>{const Ee=new Date(X.target.value).toISOString();I({...j,fecha:Ee})},className:"w-full border rounded-md px-2 py-1 text-sm"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-1.5 text-sm rounded-md border",onClick:()=>I(null),disabled:T,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1.5 text-sm rounded-md bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50",disabled:T,children:T?"Guardando":"Guardar cambios"})]})]}),i.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Nota: La edicin de resultados individuales no est habilitada an en este modal."})]})]}),t==="captura"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Indicadores evaluados"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:pu.map(X=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 text-xs font-bold shrink-0",children:X}),i.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:g8[X]})]},X))})]}),Y.length>0&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Desempeo del curso por indicador"}),i.jsx("div",{className:"space-y-2",children:le.map(X=>i.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[i.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 text-xs text-slate-600 dark:text-slate-300",children:[X.indicador,". ",g8[X.indicador]]}),i.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-7",children:i.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-3 bg-emerald-500",style:{width:`${X.porcentajeOn}%`}})})}),i.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-3 flex justify-between text-xs text-slate-700 dark:text-slate-200",children:[i.jsxs("span",{className:"font-medium",children:[X.porcentajeOn,"% con 7.0"]}),i.jsxs("span",{children:["Prom: ",X.promedio.toFixed(1)]})]})]},X.indicador))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Curso"}),i.jsxs("select",{value:n,onChange:X=>a(X.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"Seleccione"}),Sa.map(X=>i.jsx("option",{value:X,children:X},X))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Asignatura"}),i.jsx("select",{value:s,onChange:X=>o(X.target.value),className:"w-full border rounded-md px-3 py-2",children:xa.map(X=>i.jsx("option",{value:X,children:X},X))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Profesor responsable"}),i.jsxs("select",{value:l,onChange:X=>c(X.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"Seleccione"}),oe.map(X=>i.jsx("option",{value:X.id,children:X.nombreCompleto},X.id))]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{onClick:ve,disabled:!n||!s||!l||m,className:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?i.jsx(ks,{className:"w-4 h-4 animate-spin"}):i.jsx(Ml,{className:"w-4 h-4"})," Guardar"]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-slate-200 dark:border-slate-700 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/40",children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-slate-500",children:"Estudiante"}),pu.map(X=>i.jsx("th",{className:"px-2 py-2 text-center text-xs font-semibold text-slate-500",children:X},X)),i.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-slate-500",children:"Prom."})]})}),i.jsxs("tbody",{children:[f&&i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Cargando estudiantes"})}),!f&&Y.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"px-4 py-6 text-center text-slate-500",children:"Seleccione curso para listar estudiantes."})}),Y.map(X=>i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/50 hover:bg-slate-50/50",children:[i.jsx("td",{className:"px-4 py-2 text-sm whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(fx,{className:"w-4 h-4 text-slate-400"})," ",X.nombre]}),i.jsxs("label",{className:"inline-flex items-center gap-1 text-xs text-slate-600",children:[i.jsx("input",{type:"checkbox",checked:!!J[X.id],onChange:Ee=>ce(Be=>({...Be,[X.id]:Ee.target.checked}))}),"Ausente"]})]})}),pu.map(Ee=>{var je;const Be=((je=O[X.id])==null?void 0:je[Ee])??!0;return i.jsx("td",{className:"px-2 py-2 text-center",children:i.jsx("button",{type:"button",onClick:()=>!J[X.id]&&re(X.id,Ee),disabled:!!J[X.id],className:`inline-flex items-center justify-center w-7 h-7 rounded-full border transition ${J[X.id]?"opacity-40 cursor-not-allowed bg-slate-50 border-slate-200":Be?"bg-green-100 border-green-300 text-green-700":"bg-red-50 border-red-300 text-red-600"}`,title:J[X.id]?"Ausente":Be?"7.0":"2.0",children:Be?i.jsx(YC,{className:"w-4 h-4"}):i.jsx(F_e,{className:"w-4 h-4"})})},Ee)}),i.jsx("td",{className:"px-3 py-2 text-center font-semibold text-slate-700",children:J[X.id]?"":ue(X.id).toFixed(1)})]},X.id))]})]})})]})]})},ONt=({guardados:e})=>{const t=At.useMemo(()=>{let r=e.length,n=0,a=0,s=0,o=0,l=0;const c=Array(10).fill(0),u=Array(10).fill(0);e.forEach(A=>{const m=A.resultados||[];n+=m.length,m.forEach(g=>{g.ausente?s+=1:(a+=1,typeof g.promedio=="number"&&(o+=g.promedio,l+=1),(g.indicadores||[]).forEach((x,v)=>{x>=7&&(c[v]+=1),u[v]+=1}))})});const d=l>0?Math.round(o/l*10)/10:0,f=c.map((A,m)=>{const g=u[m]||0;return g>0?Math.round(A/g*100):0});return{evaluaciones:r,estudiantes:n,presentes:a,ausentes:s,promedioGlobal:d,indicadoresPct:f}},[e]);return i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[i.jsx(h2,{label:"Evaluaciones",value:t.evaluaciones}),i.jsx(h2,{label:"Estudiantes",value:t.estudiantes}),i.jsx(h2,{label:"Presentes",value:t.presentes}),i.jsx(h2,{label:"Ausentes",value:t.ausentes}),i.jsx(h2,{label:"Prom. global",value:t.promedioGlobal.toFixed(1)})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-semibold text-slate-500 mb-2",children:"Porcentaje 7.0 por indicador"}),i.jsx("div",{className:"space-y-2",children:pu.map((r,n)=>i.jsxs("div",{className:"grid grid-cols-12 items-center gap-2",children:[i.jsxs("div",{className:"col-span-12 md:col-span-3 lg:col-span-2 text-xs text-slate-600 dark:text-slate-300",children:[r,". ",g8[r]]}),i.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-7",children:i.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-3 bg-emerald-500",style:{width:`${t.indicadoresPct[n]}%`}})})}),i.jsx("div",{className:"col-span-12 md:col-span-3 lg:col-span-3 flex justify-end text-xs text-slate-700 dark:text-slate-200",children:i.jsxs("span",{className:"font-medium",children:[t.indicadoresPct[n],"%"]})})]},r))})]})]})},h2=({label:e,value:t})=>i.jsxs("div",{className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[i.jsx("div",{className:"text-xs text-slate-500",children:e}),i.jsx("div",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:t})]});function PNt(e){if(e==null)return"";const t=String(e).replace(/"/g,'""');return/[",\n]/.test(t)?'"'+t+'"':t}function fve(e,t){const r=t.map(o=>o.map(PNt).join(",")).join(`
`),n=new Blob([r],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}function FNt(e){var a,s;const t=["EvaluacionID","Fecha","Curso","Asignatura","Profesor","Creador","EstudianteID","Estudiante","Ausente","Promedio",...pu.map(o=>`Indicador_${o}`)],r=(((s=(a=e.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a))||new Date(e.fecha)).toISOString(),n=[t];(e.resultados||[]).forEach(o=>{const l=[e.id,r,e.curso,e.asignatura,e.profesorNombre,e.creadorNombre,o.estudianteId,o.estudianteNombre,o.ausente?"SI":"NO",o.ausente?"":String(o.promedio??"")],c=(o.indicadores||[]).map(u=>typeof u=="number"?u.toFixed(1):"");n.push([...l,...c])}),fve(`evaluacion_${e.id}.csv`,n)}function RNt(e){const r=[["EvaluacionID","Fecha","Curso","Asignatura","Profesor","Creador","EstudianteID","Estudiante","Ausente","Promedio",...pu.map(a=>`Indicador_${a}`)]];e.forEach(a=>{var o,l;const s=(((l=(o=a.createdAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||new Date(a.fecha)).toISOString();(a.resultados||[]).forEach(c=>{const u=[a.id,s,a.curso,a.asignatura,a.profesorNombre,a.creadorNombre,c.estudianteId,c.estudianteNombre,c.ausente?"SI":"NO",c.ausente?"":String(c.promedio??"")],d=(c.indicadores||[]).map(f=>typeof f=="number"?f.toFixed(1):"");r.push([...u,...d])})});const n=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");fve(`evaluaciones_filtradas_${n}.csv`,r)}const LNt={"1 Medio":"1","2 Medio":"2","3 Medio":"3","4 Medio":"4"};function MNt(e){const t=LNt[e]||"";return Sa.filter(r=>r.startsWith(t))}function UNt(){const[e,t]=w.useState({}),[r,n]=w.useState(!0);w.useEffect(()=>{const s=Mce(o=>{t(o||{}),n(!1)});return()=>s&&s()},[]);const a=w.useMemo(()=>Y0.map(s=>({nivel:s,cursos:MNt(s)})).filter(s=>s.cursos.length>0),[]);return i.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-semibold",children:"Horario semanal del liceo"}),r&&i.jsx("span",{className:"text-sm text-gray-500",children:"Cargando"})]}),i.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:Gh.map(s=>i.jsxs("section",{className:"rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-slate-900 shadow-sm overflow-hidden",children:[i.jsx("header",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-slate-800/40",children:i.jsx("h2",{className:"text-lg font-semibold",children:s})}),i.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:a.map(({nivel:o,cursos:l})=>i.jsxs("div",{className:"p-3 md:p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"h-5 w-1.5 rounded bg-amber-500"}),i.jsx("h3",{className:"text-base md:text-lg font-medium",children:o}),i.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[l.length," curso(s)"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-gray-600 dark:text-gray-300",children:[i.jsx("th",{className:"px-2 py-2 font-semibold sticky left-0 bg-white dark:bg-slate-900 z-10",children:"BLOQUE"}),i.jsx("th",{className:"px-2 py-2 font-semibold",children:"INICIO"}),i.jsx("th",{className:"px-2 py-2 font-semibold",children:"FINAL"}),l.map(c=>i.jsx("th",{className:"px-2 py-2 font-semibold whitespace-nowrap",children:c},c))]})}),i.jsx("tbody",{children:zs.map(c=>{const u=String(c.bloque);return i.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800 align-top",children:[i.jsx("td",{className:"px-2 py-2 font-medium sticky left-0 bg-white dark:bg-slate-900 z-10",children:c.bloque}),i.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.inicio}),i.jsx("td",{className:"px-2 py-2 text-gray-600 dark:text-gray-300",children:c.fin}),l.map(d=>{var x,v;const f=(v=(x=e==null?void 0:e[s])==null?void 0:x[u])==null?void 0:v[d],A=(f==null?void 0:f.asignatura)||"",m=(f==null?void 0:f.profesor)||"",g=!!(A||m);return i.jsx("td",{className:`px-2 py-2 ${g?"bg-white dark:bg-slate-900":"bg-gray-50 dark:bg-slate-800/30"}`,children:i.jsxs("div",{className:"min-w-[9rem] md:min-w-[12rem] lg:min-w-[14rem] xl:min-w-[16rem]",children:[i.jsx("div",{className:"font-medium leading-5 truncate",title:A,children:A||""}),i.jsx("div",{className:"text-xs text-gray-500 truncate",title:m,children:m})]})},d)})]},c.bloque)})})]})})]},o))})]},s))})]})}const fB="intranet_entries",HNt=(e,t)=>{try{const r=Lt(pt(xr,fB),tr("createdAt","desc"));return hr(r,n=>{const a=[];n.forEach(s=>a.push({id:s.id,...s.data()})),e(a)},n=>t&&t(n))}catch(r){return t&&t(r),()=>{}}},QNt=async e=>{const t=ua.currentUser;if(!t)throw new Error("No autenticado");const r={...e,creadoPor:t.email||"desconocido",createdAt:e.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};return(await dn(pt(xr,fB),r)).id},Rre=async(e,t)=>{const r={...t,updatedAt:new Date().toISOString()},n=JSON.parse(JSON.stringify(r));await Zi(er(xr,fB,e),n)},VNt=async e=>{await fa(er(xr,fB,e))},$Nt=e=>e.replace(/[^a-zA-Z0-9._-]/g,"_");function zNt(e,t){const r=Date.now(),n=$Nt(t);return`${e==="image"?"intranet/images":"intranet/videos"}/${r}_${n}`}function Lre(e,t,r){return new Promise((n,a)=>{const s=zNt(t,e.name),o=Iu(yA,s),l=soe(o,e,{contentType:e.type});l.on("state_changed",c=>{const u=c.bytesTransferred/c.totalBytes*100;r==null||r(Math.round(u))},a,async()=>{try{const c=await MA(l.snapshot.ref);n({url:c,path:s})}catch(c){a(c)}})})}async function GNt(e){try{await VM(Iu(yA,e))}catch(t){console.warn("No se pudo eliminar del storage:",t)}}const hB="intranet_notes",qNt=(e,t)=>{try{const r=Lt(pt(xr,hB),tr("destacado","desc"),tr("fechaPublicacion","desc"));return hr(r,n=>{const a=[];n.forEach(s=>a.push({id:s.id,...s.data()})),e(a)},n=>t&&t(n))}catch(r){return t&&t(r),()=>{}}},KNt=async e=>{const t=ua.currentUser;if(!t)throw new Error("No autenticado");const r={...e,destacado:e.destacado??!1,autor:t.displayName||t.email||"Usuario",autorId:t.uid,fechaPublicacion:new Date().toISOString()};return(await dn(pt(xr,hB),r)).id},WNt=async(e,t)=>{const r=JSON.parse(JSON.stringify(t));await Zi(er(xr,hB,e),r)},XNt=async e=>{await fa(er(xr,hB,e))},BP={titulo:"",resumen:"",contenidoHtml:"",etiquetas:[],enlaces:[],imagenes:[],videos:[],destacado:!1,autorNombre:""},hve=({label:e})=>i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 ring-1 ring-amber-200/60 dark:ring-amber-800/40",children:[i.jsx(yoe,{className:"w-3.5 h-3.5 mr-1.5"})," ",e]}),_C=e=>{try{return e?new URL(e).hostname.replace(/^www\./,""):""}catch{return e||""}},x8=e=>{const t=_C(e);return t?`https://www.google.com/s2/favicons?sz=64&domain=${encodeURIComponent(t)}`:void 0},Mre=(e,t=28)=>e?e.length>t?e.slice(0,t-1)+"":e:"",YNt=({draft:e,setDraft:t,newLink:r,setNewLink:n,showPreview:a,setShowPreview:s,editing:o,saveDraft:l,cancelEdit:c,imgUploadPct:u,setImgUploadPct:d,vidUploadPct:f,setVidUploadPct:A})=>{var _,j,I,T;const m=k=>{try{return new URL(k),!0}catch{return!1}},[g,x]=w.useState(!1),[v,y]=w.useState(!1),N=async k=>{const B=Array.from(k);for(const M of B){if(!/^image\/(png|jpe?g|gif)$/i.test(M.type)){alert("Formato de imagen no soportado. Usa PNG, JPG o GIF.");continue}if(M.size>10*1024*1024){alert("Imagen supera 10 MB.");continue}try{d(0);const{url:S}=await Lre(M,"image",L=>d(L));t(L=>({...L,imagenes:[...L.imagenes||[],{url:S}]}))}catch(S){alert((S==null?void 0:S.message)||"Error al subir imagen")}finally{d(null)}}},C=async k=>{const B=Array.from(k);for(const M of B){if(!/^(video\/mp4|video\/quicktime)$/i.test(M.type)){alert("Formato de video no soportado. Usa MP4 o MOV.");continue}if(M.size>500*1024*1024){alert("Video supera 500 MB.");continue}try{A(0);const{url:S}=await Lre(M,"video",L=>A(L));t(L=>({...L,videos:[...L.videos||[],{url:S}]}))}catch(S){alert((S==null?void 0:S.message)||"Error al subir video")}finally{A(null)}}};return i.jsxs("div",{className:"bg-white p-5 md:p-6 rounded-xl shadow border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-slate-900",children:o?"Editar entrada":"Nueva entrada"}),e.destacado&&i.jsx("span",{className:"inline-flex items-center text-xs font-semibold text-amber-700 bg-amber-50 border border-amber-200 px-2 py-0.5 rounded-full",children:"Destacado"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-slate-100 text-slate-700 hover:bg-slate-200",children:[i.jsx(No,{className:"w-4 h-4"})," Cancelar"]}),i.jsxs("button",{disabled:u!==null||f!==null,onClick:l,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:[i.jsx(Ml,{className:"w-4 h-4"})," Guardar"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Ttulo"}),i.jsx("input",{value:e.titulo,onChange:k=>t({...e,titulo:k.target.value}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ttulo de la entrada"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Contenido principal (HTML bsico o texto)"}),i.jsx("textarea",{rows:14,value:e.contenidoHtml,onChange:k=>t({...e,contenidoHtml:k.target.value}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Puedes pegar HTML limpio (sin scripts) o escribir texto plano."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Etiquetas (separadas por comas)"}),i.jsx("input",{value:(e.etiquetas||[]).join(", "),onChange:k=>t({...e,etiquetas:k.target.value.split(",").map(B=>B.trim()).filter(Boolean)}),className:"w-full mt-1 rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ej: admisin, protocolos, reuniones"}),i.jsx("div",{className:"mt-2",children:!!((_=e.etiquetas)!=null&&_.length)&&i.jsx("div",{className:"flex flex-wrap gap-2",children:e.etiquetas.map(k=>i.jsx(hve,{label:k},k))})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Enlaces externos"}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 mt-1",children:[i.jsx("input",{placeholder:"Ttulo (opcional)",value:r.titulo||"",onChange:k=>n({...r,titulo:k.target.value}),className:"sm:flex-1 rounded-md border border-slate-300 px-3 py-2"}),i.jsx("input",{placeholder:"https://sitio.com/recurso",value:r.url,onChange:k=>n({...r,url:k.target.value}),className:"sm:flex-[2] rounded-md border border-slate-300 px-3 py-2"}),i.jsxs("button",{type:"button",onClick:()=>{if(!r.url||!m(r.url)){alert("Ingresa una URL vlida.");return}const k=[...e.enlaces||[]];k.push({url:r.url.trim(),...r.titulo?{titulo:r.titulo.trim()}:{}}),t({...e,enlaces:k}),n({url:""})},className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:[i.jsx(xi,{className:"w-4 h-4"})," Agregar enlace"]})]}),!!((j=e.enlaces)!=null&&j.length)&&i.jsx("div",{className:"mt-3 space-y-2",children:e.enlaces.map((k,B)=>i.jsxs("div",{className:"flex items-center justify-between gap-3 px-3 py-2 rounded-md bg-slate-50 border border-slate-200",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 min-w-0",children:[x8(k.url)&&i.jsx("img",{src:x8(k.url),alt:k.titulo||k.url,className:"w-4 h-4 rounded"}),i.jsx("span",{className:"font-medium truncate max-w-[220px] sm:max-w-[260px]",title:k.titulo||k.url,children:k.titulo||_C(k.url)}),i.jsx("span",{className:"text-slate-400",children:""}),i.jsxs("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline whitespace-nowrap",children:[i.jsx(ux,{className:"w-3.5 h-3.5"})," Abrir"]})]}),i.jsx("button",{onClick:()=>t({...e,enlaces:(e.enlaces||[]).filter((M,P)=>P!==B)}),className:"p-1 rounded hover:bg-red-50 text-red-600",title:"Eliminar",children:i.jsx(Qn,{className:"w-4 h-4"})})]},B))})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-slate-700",children:[i.jsx("input",{type:"checkbox",checked:!!e.destacado,onChange:k=>t({...e,destacado:k.target.checked})}),i.jsx(DS,{className:"w-4 h-4"})," Destacado"]})})]}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800",children:"Resumen"}),i.jsx("span",{className:"text-xs text-slate-500",children:"Opcional"})]}),i.jsx("textarea",{rows:5,value:e.resumen||"",onChange:k=>t({...e,resumen:k.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Breve sntesis para el feed"})]}),i.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800",children:"Previsualizacin"}),i.jsx("button",{onClick:()=>s(k=>!k),className:"inline-flex items-center gap-1 text-sm text-slate-600 hover:text-slate-800",children:a?i.jsxs(i.Fragment,{children:[i.jsx(X_e,{className:"w-4 h-4"})," Ocultar"]}):i.jsxs(i.Fragment,{children:[i.jsx(fp,{className:"w-4 h-4"})," Mostrar"]})})]}),i.jsx("div",{className:"p-3 min-h-[8rem]",children:a?i.jsx("div",{className:"prose prose-sm max-w-none",children:i.jsx(SE,{content:e.contenidoHtml,context:"intranet-editor-preview"})}):i.jsx("div",{className:"text-slate-500 text-sm",children:"Activa la previsualizacin para ver el contenido renderizado."})})]}),i.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-3 border-b border-slate-200",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(U5,{className:"w-4 h-4"})," Imgenes"]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Formatos: PNG, JPG, GIF. Mx. 10 MB."})]}),i.jsx("div",{onDragOver:k=>{k.preventDefault(),x(!0)},onDragLeave:()=>x(!1),onDrop:k=>{var B;k.preventDefault(),x(!1),(B=k.dataTransfer.files)!=null&&B.length&&N(k.dataTransfer.files)},className:`m-3 rounded-md border-2 ${g?"border-blue-500 bg-blue-50":"border-dashed border-slate-300"} p-4 text-center cursor-pointer`,children:i.jsxs("label",{className:"block",children:[i.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:k=>{k.target.files&&N(k.target.files),k.currentTarget.value=""}}),i.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-600",children:[u!==null?i.jsx(ks,{className:"w-6 h-6 animate-spin"}):i.jsx(EF,{className:"w-6 h-6"}),i.jsx("span",{className:"text-sm",children:"Arrastra y suelta o haz click para subir"}),u!==null&&i.jsxs("div",{className:"w-full max-w-xs mt-1",children:[i.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-blue-600",style:{width:`${Math.round(u)}%`}})}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Subiendo imagen ",Math.round(u),"%"]})]})]})]})}),!!((I=e.imagenes)!=null&&I.length)&&i.jsx("div",{className:"px-3 pb-3 grid grid-cols-3 gap-2",children:e.imagenes.map((k,B)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:k.url,alt:k.titulo||`img-${B}`,className:"w-full h-20 object-cover rounded-md"}),i.jsx("button",{type:"button",onClick:()=>t({...e,imagenes:(e.imagenes||[]).filter((M,P)=>P!==B)}),className:"absolute top-1 right-1 p-1 rounded bg-white/90 hover:bg-white",children:i.jsx(No,{className:"w-3.5 h-3.5"})})]},B))})]}),i.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-3 border-b border-slate-200",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(wu,{className:"w-4 h-4"})," Videos"]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Formatos: MP4, MOV. Mx. 500 MB. Tambin puedes pegar URLs."})]}),i.jsxs("div",{className:"m-3",children:[i.jsxs("div",{onDragOver:k=>{k.preventDefault(),y(!0)},onDragLeave:()=>y(!1),onDrop:k=>{var B;k.preventDefault(),y(!1),(B=k.dataTransfer.files)!=null&&B.length&&C(k.dataTransfer.files)},className:`rounded-md border-2 ${v?"border-blue-500 bg-blue-50":"border-dashed border-slate-300"} p-4 text-center cursor-pointer`,children:[i.jsxs("label",{className:"block",children:[i.jsx("input",{type:"file",accept:"video/*",multiple:!0,className:"hidden",onChange:k=>{k.target.files&&C(k.target.files),k.currentTarget.value=""}}),i.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-600",children:[f!==null?i.jsx(ks,{className:"w-6 h-6 animate-spin"}):i.jsx(EF,{className:"w-6 h-6"}),i.jsx("span",{className:"text-sm",children:"Arrastra y suelta o haz click para subir"})]})]}),f!==null&&i.jsxs("div",{className:"w-full max-w-xs mt-3 mx-auto",children:[i.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-blue-600",style:{width:`${Math.round(f)}%`}})}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1 text-center",children:["Subiendo video ",Math.round(f),"%"]})]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("input",{placeholder:"https://video-ejemplo.com/archivo.mp4",className:"flex-1 rounded-md border border-slate-300 px-3 py-2",onKeyDown:k=>{const B=k.currentTarget.value.trim();if(k.key==="Enter"){if(!m(B)){alert("URL de video no vlida.");return}t(M=>({...M,videos:[...M.videos||[],{url:B}]})),k.currentTarget.value=""}}}),i.jsx("button",{type:"button",onClick:k=>{var P;const B=k.currentTarget.previousSibling,M=(P=B==null?void 0:B.value)==null?void 0:P.trim();if(M){if(!m(M)){alert("URL de video no vlida.");return}t(S=>({...S,videos:[...S.videos||[],{url:M}]})),B.value=""}},className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Agregar URL"})]}),!!((T=e.videos)!=null&&T.length)&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.videos.map((k,B)=>i.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-slate-50 border border-slate-200 text-sm",children:[i.jsx(wu,{className:"w-4 h-4"})," ",k.titulo||_C(k.url),i.jsx("button",{type:"button",onClick:()=>t({...e,videos:(e.videos||[]).filter((M,P)=>P!==B)}),className:"ml-2 p-1 rounded hover:bg-slate-200",children:i.jsx(No,{className:"w-3.5 h-3.5"})})]},B))})]})]})]})]})]})},JNt=At.memo(YNt),ZNt=({currentUser:e})=>{const t=e.profile===Ot.SUBDIRECCION,r=[Ot.SUBDIRECCION,Ot.PROFESORADO,Ot.COORDINACION_TP].includes(e.profile),n=[Ot.PROFESORADO,Ot.COORDINACION_TP].includes(e.profile),a=[Ot.SUBDIRECCION,Ot.PROFESORADO,Ot.COORDINACION_TP].includes(e.profile),[s,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),[f,A]=w.useState(null),[m,g]=w.useState(BP),[x,v]=w.useState(!1),[y,N]=w.useState(!1),[C,_]=w.useState({url:""}),[j,I]=w.useState(null),[T,k]=w.useState(null),[B,M]=w.useState([]),[P,S]=w.useState(!0),[L,U]=w.useState({titulo:"",mensaje:"",color:"yellow"}),[q,H]=w.useState({order:[],colors:{},version:1}),[z,W]=w.useState(!1),[Z,V]=w.useState(null),[Y,R]=w.useState(null),O=w.useMemo(()=>[{id:"auto",label:"Auto",Comp:woe},{id:"file",label:"Documento",Comp:Wi},{id:"folder",label:"Carpeta",Comp:p4e},{id:"link",label:"Enlace",Comp:H5},{id:"image",label:"Imagen",Comp:U5},{id:"video",label:"Video",Comp:wu},{id:"calendar",label:"Calendario",Comp:Yo},{id:"megaphone",label:"Anuncio",Comp:voe},{id:"book",label:"Libro/Gua",Comp:ys},{id:"users",label:"Personas",Comp:Ys},{id:"settings",label:"Ajustes",Comp:VN},{id:"star",label:"Destacado",Comp:boe},{id:"message",label:"Mensaje",Comp:Px},{id:"bell",label:"Notificacin",Comp:Z5e},{id:"clipboard",label:"Lista",Comp:e0},{id:"check",label:"Aprobado",Comp:YC},{id:"alert",label:"Alerta",Comp:L1},{id:"pin",label:"Pin",Comp:DS},{id:"mappin",label:"Ubicacin",Comp:HN},{id:"graduation",label:"Educacin",Comp:wA},{id:"briefcase",label:"Portafolio",Comp:F1},{id:"building",label:"Edificio",Comp:a1},{id:"sheet",label:"Hoja de clculo",Comp:p3},{id:"barchart",label:"Grfico barras",Comp:Dl},{id:"piechart",label:"Grfico torta",Comp:s1},{id:"heart",label:"Corazn",Comp:E4e},{id:"lightbulb",label:"Idea",Comp:F4e},{id:"rocket",label:"Cohete",Comp:m3e},{id:"globe",label:"Globo",Comp:b4e},{id:"map",label:"Mapa",Comp:G4e},{id:"clock",label:"Reloj",Comp:U_e},{id:"mail",label:"Correo",Comp:xoe},{id:"phone",label:"Telfono",Comp:i3e},{id:"camera",label:"Cmara",Comp:p_e},{id:"play",label:"Reproducir",Comp:B_e}],[]),[K,J]=w.useState("auto"),[ce,oe]=w.useState(""),re=se=>{R(se),J(se.iconId||"auto")},ue=()=>{R(null)};w.useEffect(()=>{if(!r)return;c(!0);const se=HNt(ne=>{o(ne),H(de=>{const me=new Set(ne.map(Xe=>Xe.id)),ge=de.order.filter(Xe=>me.has(Xe)),Te={};Object.entries(de.colors).forEach(([Xe,Ke])=>{me.has(Xe)&&(Te[Xe]=String(Ke))});const Ve={...de,order:ge,colors:Te};return le(Ve),Ve}),c(!1)},ne=>{console.error("Error al suscribirse a intranet:",ne),d("No se pudo cargar la intranet."),c(!1)});return()=>{try{se&&se()}catch{}}},[r]),w.useEffect(()=>{if(!r)return;S(!0);const se=qNt(ne=>{M(ne),S(!1)},ne=>{console.error("Error al suscribirse a intranet_notes:",ne),S(!1)});return()=>{try{se&&se()}catch{}}},[r]),w.useEffect(()=>{if(n)try{const se=localStorage.getItem(`intranet_prefs_${e.id}`);if(se){const ne=JSON.parse(se);ne&&typeof ne=="object"&&H({order:ne.order||[],colors:ne.colors||{},version:1})}}catch{}},[n,e.id]);const le=se=>{try{localStorage.setItem(`intranet_prefs_${e.id}`,JSON.stringify(se))}catch{}},ve=(se,ne)=>{H(de=>{const me={...de,colors:{...de.colors}};return ne?me.colors[se]=ne:delete me.colors[se],le(me),me})},X=(se,ne)=>{H(de=>{const me=s.map(Qe=>Qe.id),ge=de.order.filter(Qe=>me.includes(Qe)).concat(me.filter(Qe=>!de.order.includes(Qe))),Te=ge.indexOf(se);if(Te<0)return de;const Ve=ne==="up"?Te-1:Te+1;if(Ve<0||Ve>=ge.length)return de;const Xe=ge.slice();[Xe[Te],Xe[Ve]]=[Xe[Ve],Xe[Te]];const Ke={...de,order:Xe,colors:de.colors,version:de.version};return le(Ke),Ke})},Ee=()=>{A(null),g({...BP,autorNombre:e.nombreCompleto}),v(!0)},Be=({e:se,index:ne})=>{var Ke,Qe,Je,mt;const de="p-1.5 rounded-md bg-slate-100 hover:bg-slate-200 text-slate-700",me=q.colors[se.id],ge=()=>{var We,He,Tt;return(We=se.videos)!=null&&We.length?wu:(He=se.imagenes)!=null&&He.length?U5:(Tt=se.enlaces)!=null&&Tt.length?ux:Wi},Te=w.useMemo(()=>{const We={};return O.forEach(({id:He,Comp:Tt})=>{He!=="auto"&&(We[He]=Tt)}),We},[O]),Ve=se.iconId&&se.iconId!=="auto"&&Te[se.iconId]||ge(),Xe=n&&z;return i.jsxs("div",{className:`relative rounded-xl shadow-sm hover:shadow-md transition overflow-hidden border bg-white ${Xe?"cursor-move":""} ${Z===se.id?"opacity-80 ring-2 ring-blue-400":""}`,style:{borderColor:"var(--tw-colors-slate-200)",borderLeft:me?`6px solid ${me}`:void 0},draggable:Xe,onDragStart:We=>{Xe&&(V(se.id),We.dataTransfer.setData("text/plain",se.id),We.dataTransfer.effectAllowed="move")},onDragEnd:()=>V(null),onDragOver:We=>{Xe&&(We.preventDefault(),We.dataTransfer.dropEffect="move")},onDrop:We=>{if(!Xe)return;We.preventDefault();const He=We.dataTransfer.getData("text/plain"),Tt=se.id;!He||He===Tt||(H(Ie=>{const ft=s.map(fr=>fr.id),vt=Ie.order.filter(fr=>ft.includes(fr)).concat(ft.filter(fr=>!Ie.order.includes(fr))),et=vt.indexOf(He),Ct=vt.indexOf(Tt);if(et<0||Ct<0)return Ie;const St=vt.slice(),[ot]=St.splice(et,1);St.splice(Ct,0,ot);const nr={...Ie,order:St};return le(nr),nr}),V(null))},children:[t&&i.jsxs("div",{className:"absolute top-2 right-2 z-20 flex items-center gap-1",children:[i.jsx("button",{onClick:()=>je(se),className:de,title:"Editar contenido",children:i.jsx(QN,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>re(se),className:de,title:"Editar icono",children:i.jsx(DS,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>Ae(se.id),className:"p-1.5 rounded-md bg-slate-100 hover:bg-slate-200 text-red-600",title:"Eliminar",children:i.jsx(Qn,{className:"w-4 h-4"})})]}),n&&z&&i.jsxs("div",{className:"absolute top-2 left-2 z-20 flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50 text-xs",onClick:()=>X(se.id,"up"),title:"Subir",children:""}),i.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50 text-xs",onClick:()=>X(se.id,"down"),title:"Bajar",children:""})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[i.jsx("input",{type:"color",value:me||"#ffffff",onChange:We=>ve(se.id,We.target.value),title:"Color"}),i.jsx("button",{type:"button",className:"px-1.5 py-1 rounded-md border border-slate-300 bg-white hover:bg-slate-50",onClick:()=>ve(se.id,void 0),title:"Quitar color",children:""})]})]}),i.jsxs("div",{className:"p-4 relative z-0",children:[i.jsx("div",{className:"flex items-start justify-between gap-3",children:i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white truncate",title:se.titulo,children:se.titulo}),i.jsxs("p",{className:"text-sm text-slate-700/80 dark:text-slate-300/90",children:[new Date(se.createdAt).toLocaleString("es-CL"),"  ",se.autorNombre||se.creadoPor]})]})}),!!se.resumen&&i.jsx("p",{className:"mt-1 text-slate-800 dark:text-slate-200",children:se.resumen}),i.jsx("div",{className:"mt-3 prose prose-slate max-w-none dark:prose-invert text-sm",children:i.jsx(SE,{content:se.contenidoHtml,context:"intranet-entry"})}),!!((Ke=se.etiquetas)!=null&&Ke.length)&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:se.etiquetas.map(We=>i.jsx(hve,{label:We},We))}),!!((Qe=se.enlaces)!=null&&Qe.length)&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:se.enlaces.map((We,He)=>{const Tt=_C(We.url),Ie=x8(We.url),ft=We.titulo||Tt||"Abrir";return i.jsxs("a",{href:We.url,target:"_blank",rel:"noopener noreferrer",className:"min-w-0 inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-blue-50 text-blue-700 ring-1 ring-blue-200 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300 dark:ring-blue-800 text-sm transition max-w-full",children:[Ie&&i.jsx("img",{src:Ie,alt:Tt,className:"w-4 h-4 rounded shrink-0"}),i.jsx("span",{className:"font-medium truncate max-w-[180px] sm:max-w-[220px]",title:ft,children:Mre(ft,30)}),i.jsx(ux,{className:"w-3.5 h-3.5 shrink-0"})]},He)})}),!!((Je=se.imagenes)!=null&&Je.length)&&i.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-3 gap-2",children:se.imagenes.map((We,He)=>i.jsx("img",{src:We.url,alt:We.titulo||`img-${He}`,className:"w-full h-32 object-cover rounded-md"},He))}),!!((mt=se.videos)!=null&&mt.length)&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:se.videos.map((We,He)=>i.jsxs("a",{href:We.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-amber-50 text-amber-700 ring-1 ring-amber-200 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-300 dark:ring-amber-800 text-sm transition",children:[i.jsx(wu,{className:"w-4 h-4"})," ",Mre(We.titulo||_C(We.url)||"Video",30),i.jsx(ux,{className:"w-3.5 h-3.5"})]},He))}),i.jsx("div",{className:"mt-6 grid place-items-center pointer-events-none select-none",children:i.jsx(Ve,{className:"text-slate-300 w-16 h-16 md:w-20 md:h-20"})})]})]})},je=se=>{A(se);const{id:ne,createdAt:de,creadoPor:me,...ge}=se;g({...ge}),v(!0)},fe=()=>{A(null),g(BP),v(!1)},ye=async()=>{try{const se={...m};if(!se.titulo||!se.contenidoHtml){alert("Ttulo y contenido son obligatorios");return}f?await Rre(f.id,se):await QNt(se),fe(),v(!1)}catch(se){alert((se==null?void 0:se.message)||"No se pudo guardar la entrada")}},Ae=async se=>{var ne,de;if(confirm("Eliminar esta entrada?"))try{const me=s.find(Te=>Te.id===se),ge=[];(ne=me==null?void 0:me.imagenes)==null||ne.forEach(Te=>{Te.storagePath&&ge.push(Te.storagePath)}),(de=me==null?void 0:me.videos)==null||de.forEach(Te=>{Te.storagePath&&ge.push(Te.storagePath)}),ge.length&&await Promise.all(ge.map(Te=>GNt(Te).catch(()=>{}))),await VNt(se)}catch(me){alert((me==null?void 0:me.message)||"No se pudo eliminar")}};return r?i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Intranet"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Informacin institucional, enlaces y recursos para el profesorado y coordinacin."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[n&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>W(se=>!se),className:`inline-flex items-center gap-2 px-3 py-2 rounded-lg border ${z?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:z?"Salir de personalizacin":"Personalizar"}),z&&i.jsx("button",{onClick:()=>{const se={order:[],colors:{},version:1};H(se),le(se)},className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border bg-white text-slate-700 border-slate-300 hover:bg-slate-50",children:"Restablecer"})]}),t&&i.jsxs("button",{onClick:Ee,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-500 text-white hover:bg-amber-600",children:[i.jsx(xi,{className:"w-4 h-4"})," Nueva entrada"]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 md:p-6 rounded-xl shadow border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Notas rpidas"}),a&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{value:L.color,onChange:se=>U(ne=>({...ne,color:se.target.value})),className:"rounded-md border border-slate-300 px-2 py-1 text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",title:"Color del post-it",children:[i.jsx("option",{value:"yellow",children:"Amarillo"}),i.jsx("option",{value:"lime",children:"Verde"}),i.jsx("option",{value:"sky",children:"Celeste"}),i.jsx("option",{value:"red",children:"Rojo"}),i.jsx("option",{value:"violet",children:"Violeta"})]}),i.jsxs("button",{onClick:async()=>{if(!L.titulo||!L.mensaje){alert("Ttulo y mensaje son obligatorios");return}try{await KNt({titulo:L.titulo,mensaje:L.mensaje,color:L.color}),U({titulo:"",mensaje:"",color:L.color})}catch(se){alert((se==null?void 0:se.message)||"No se pudo crear la nota")}},className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-800 text-white hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:[i.jsx(xi,{className:"w-4 h-4"})," Agregar Nota"]})]})]}),a&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsx("input",{value:L.titulo,onChange:se=>U(ne=>({...ne,titulo:se.target.value})),placeholder:"Ttulo de la nota",className:"rounded-md border border-slate-300 px-3 py-2 dark:bg-slate-700 dark:border-slate-600 dark:text-white"}),i.jsx("input",{value:L.mensaje,onChange:se=>U(ne=>({...ne,mensaje:se.target.value})),placeholder:"Mensaje (breve)",className:"rounded-md border border-slate-300 px-3 py-2 dark:bg-slate-700 dark:border-slate-600 dark:text-white"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(DS,{className:"w-4 h-4"})," Usa estas notas para comunicar situaciones importantes."]})]}),P?i.jsx("div",{className:"text-slate-600 dark:text-slate-300",children:"Cargando notas"}):B.length===0?i.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"No hay notas an."}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:B.map((se,ne)=>{const de={yellow:"bg-yellow-200 dark:bg-yellow-800/50",lime:"bg-lime-200 dark:bg-lime-800/50",sky:"bg-sky-200 dark:bg-sky-800/50",red:"bg-red-200 dark:bg-red-800/50",violet:"bg-violet-200 dark:bg-violet-800/50"},me=["-rotate-2","rotate-1","rotate-2","-rotate-1","rotate-1"][ne%5],ge=e.profile===Ot.SUBDIRECCION||se.autor===e.nombreCompleto,Te=[Ot.SUBDIRECCION,Ot.PROFESORADO].includes(e.profile);return i.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${de[se.color||"yellow"]} transform ${me}`,children:[se.destacado&&i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:i.jsx("span",{className:"text-5xl",role:"img","aria-label":"Nota fijada",children:""})}),i.jsx("h4",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-3 break-words",children:se.titulo}),i.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[80px]",children:se.mensaje}),i.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:se.autor}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(se.fechaPublicacion).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[Te&&i.jsx("button",{onClick:async()=>{try{await WNt(se.id,{destacado:!se.destacado})}catch{alert("No se pudo fijar")}},title:se.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("span",{className:`text-xl transition-opacity ${se.destacado?"opacity-100":"opacity-30"}`,children:""})}),ge&&i.jsx("button",{onClick:async()=>{if(confirm("Eliminar nota?"))try{await XNt(se.id)}catch{alert("No se pudo eliminar")}},title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},se.id)})})]}),t&&x&&i.jsx(JNt,{draft:m,setDraft:g,newLink:C,setNewLink:_,showPreview:y,setShowPreview:N,editing:!!f,saveDraft:ye,cancelEdit:fe,imgUploadPct:j,setImgUploadPct:I,vidUploadPct:T,setVidUploadPct:k}),l?i.jsx("div",{className:"text-slate-600 dark:text-slate-300",children:"Cargando intranet..."}):s.length===0?i.jsx("div",{className:"p-8 text-center rounded-xl bg-slate-50 dark:bg-slate-800 border dark:border-slate-700",children:"An no hay entradas publicadas."}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(()=>{const se=s.slice().sort((ne,de)=>+!!de.destacado-+!!ne.destacado);if(n){const ne=q.order.filter(ge=>se.find(Te=>Te.id===ge)),de=se.filter(ge=>!ne.includes(ge.id));return[...ne.map(ge=>se.find(Te=>Te.id===ge)).filter(Boolean),...de].map((ge,Te)=>i.jsx(Be,{e:ge,index:Te},ge.id))}return se.map((ne,de)=>i.jsx(Be,{e:ne,index:de},ne.id))})()}),t&&Y&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:ue}),i.jsxs("div",{className:"relative w-full max-w-lg mx-4 bg-white rounded-xl shadow-xl border border-slate-200 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h5",{className:"text-slate-800 font-semibold",children:"Apariencia de tarjeta (icono)"}),i.jsx("button",{onClick:ue,className:"p-1 rounded hover:bg-slate-100","aria-label":"Cerrar",children:i.jsx(No,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Icono"}),i.jsx("input",{type:"text",value:ce,onChange:se=>oe(se.target.value),placeholder:"Buscar icono...",className:"w-40 rounded-md border border-slate-300 px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsx("div",{className:"mt-2 grid grid-cols-5 gap-2",children:O.filter(se=>se.label.toLowerCase().includes(ce.toLowerCase())||se.id.includes(ce.toLowerCase())).map(se=>{const ne=se.Comp,de=K===se.id||se.id==="auto"&&K==="auto";return i.jsxs("button",{type:"button",onClick:()=>J(se.id),className:`flex flex-col items-center justify-center gap-1 px-2 py-2 rounded-md border text-xs ${de?"border-blue-600 bg-blue-50 text-blue-700":"border-slate-200 hover:bg-slate-50 text-slate-700"}`,title:se.label,children:[i.jsx(ne,{className:"w-5 h-5"}),i.jsx("span",{className:"truncate w-full text-center",children:se.label})]},se.id)})})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap justify-end gap-2",children:[i.jsx("button",{onClick:ue,className:"px-3 py-2 rounded-md bg-slate-100 text-slate-700 hover:bg-slate-200",children:"Cancelar"}),i.jsx("button",{onClick:async()=>{if(Y)try{await Rre(Y.id,{gradiente:null,iconId:K==="auto"?null:K}),ue()}catch(se){alert((se==null?void 0:se.message)||"No se pudo guardar")}},className:"px-3 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})]}):i.jsx("div",{className:"p-6 rounded-xl bg-white dark:bg-slate-800 border dark:border-slate-700",children:"No autorizado."})},A2=({icon:e,title:t,badge:r,children:n})=>i.jsxs("div",{className:"p-5 rounded-2xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 flex flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[e,i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 text-sm",children:t})]}),r&&i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-amber-500 text-white",children:r})]}),n&&i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-300 leading-relaxed",children:n})]}),eCt=({currentUser:e})=>i.jsxs("div",{className:"flex flex-col gap-6",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-slate-900 text-white text-sm w-fit",children:[i.jsx(hx,{className:"w-4 h-4"}),i.jsx("span",{children:"Configuracin de Documentacin (ZXCONF-1)"})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 max-w-2xl",children:"Panel para administrar parmetros avanzados del mdulo de Documentacin. Esta es una versin inicial para validar visibilidad en produccin."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:[i.jsx(A2,{icon:i.jsx(EF,{className:"w-4 h-4 text-amber-500"}),title:"Ingesta",badge:"BETA",children:"Tipos MIME permitidos, lmites de tamao y procesamiento previo (OCR, normalizacin)."}),i.jsx(A2,{icon:i.jsx(yoe,{className:"w-4 h-4 text-emerald-600"}),title:"Taxonomas y Tags",children:"Sugerencias, sinnimos y conjuntos de etiquetas institucionales."}),i.jsx(A2,{icon:i.jsx(G_e,{className:"w-4 h-4 text-indigo-600"}),title:"Reindexacin",children:"Reindexacin programada o reconstruccin completa del ndice."}),i.jsx(A2,{icon:i.jsx(T3e,{className:"w-4 h-4 text-rose-600"}),title:"Permisos",children:"Visibilidad por perfil y confidencialidad de conjuntos documentales."}),i.jsx(A2,{icon:i.jsx(hx,{className:"w-4 h-4 text-slate-600"}),title:"Mantenimiento",children:"Deteccin de duplicados, archivos corruptos y metadatos incompletos."})]}),i.jsxs("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 pt-2",children:["Usuario: ",e.email,"  ID: ",e.id]})]}),Mm=["Gestin Curricular","Apoyo a los Estudiantes","Enseanza y Aprendizaje en el Aula","Desarrollo profesional Docente"],Ug=["Protocolos","Registros"],IP=e=>`section:${e}`,DP=e=>`subsection:${e}`,tCt=e=>{const t=Array.isArray(e.tags)?e.tags.find(n=>n.startsWith("section:")):null,r=t==null?void 0:t.slice(8);return Mm.includes(r||"")?r:null},rCt=e=>{const t=Array.isArray(e.tags)?e.tags.find(n=>n.startsWith("subsection:")):null,r=t==null?void 0:t.slice(11);return Ug.includes(r||"")?r:null},nCt={"Gestin Curricular":{bg:"bg-indigo-50 dark:bg-indigo-500/10",text:"text-indigo-700 dark:text-indigo-300",ring:"ring-indigo-200 dark:ring-indigo-700/50"},"Apoyo a los Estudiantes":{bg:"bg-emerald-50 dark:bg-emerald-500/10",text:"text-emerald-700 dark:text-emerald-300",ring:"ring-emerald-200 dark:ring-emerald-700/50"},"Enseanza y Aprendizaje en el Aula":{bg:"bg-amber-50 dark:bg-amber-500/10",text:"text-amber-700 dark:text-amber-300",ring:"ring-amber-200 dark:ring-amber-700/50"},"Desarrollo profesional Docente":{bg:"bg-rose-50 dark:bg-rose-500/10",text:"text-rose-700 dark:text-rose-300",ring:"ring-rose-200 dark:ring-rose-700/50"}},aCt=({currentUser:e})=>{if(e.profile===Ot.ESTUDIANTE)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl ring-1 ring-slate-200 dark:ring-slate-700",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-2",children:"Documentacin"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"No tienes acceso a este mdulo."})]});const[t,r]=w.useState(!0),[n,a]=w.useState([]),[s,o]=w.useState(""),[l,c]=w.useState([]),[u,d]=w.useState(!1),[f,A]=w.useState(!1),[m,g]=w.useState(null),[x,v]=w.useState(""),[y,N]=w.useState(""),[C,_]=w.useState(""),[j,I]=w.useState([]),[T,k]=w.useState(null),[B,M]=w.useState(""),[P,S]=w.useState("consulta"),[L,U]=w.useState(null),[q,H]=w.useState(""),[z,W]=w.useState(""),[Z,V]=w.useState(""),[Y,R]=w.useState({}),O=w.useRef(null),K=w.useMemo(()=>e.profile===Ot.SUBDIRECCION,[e.profile]),J=K,ce=w.useMemo(()=>[Ot.SUBDIRECCION,Ot.PROFESORADO,Ot.COORDINACION_TP].includes(e.profile),[e.profile]);w.useEffect(()=>{const se=nAe(ne=>{a(ne),r(!1)});return()=>se()},[]),w.useEffect(()=>{var se;(se=O.current)==null||se.scrollIntoView({behavior:"smooth"})},[l]);const oe=w.useMemo(()=>{const ne=n.flatMap(de=>Array.isArray(de.tags)?de.tags:[]).filter(de=>!de.startsWith("section:")&&!de.startsWith("subsection:"));return Array.from(new Set(ne))},[n]),re=w.useMemo(()=>{const se=new Map;return Mm.forEach(ne=>{se.set(ne,new Map),Ug.forEach(de=>se.get(ne).set(de,[]))}),n.forEach(ne=>{const de=tCt(ne)??Mm[0],me=rCt(ne)??"Protocolos";(j.length===0||Array.isArray(ne.tags)&&ne.tags.some(Te=>j.includes(Te)))&&se.get(de).get(me).push(ne)}),se},[n,j]),ue=async()=>{const se=s.trim();if(se){if(!q||!z){c(ne=>[...ne,{role:"assistant",text:"Por favor selecciona **Seccin** y **Sub-seccin (Protocolos o Registros)** antes de consultar."}]);return}c(ne=>[...ne,{role:"user",text:se}]),o(""),d(!0);try{const ne=j.length>0?[...j,IP(q),DP(z)]:[IP(q),DP(z)],de=l.slice(-4).map(Ve=>({role:Ve.role,text:Ve.text})),me=`[SECCIN: ${q}] [SUBSECCIN: ${z}] ${se}`,ge=await sst(me,3,ne,de),Te=Array.isArray(ge.citations)?ge.citations.map(Ve=>({index:Ve.index,id:Ve.id,title:Ve.title})):[];c(Ve=>[...Ve,{role:"assistant",text:ge.answer,citations:Te}])}catch(ne){console.error("Error consultando Documentacin:",ne);const de=(ne==null?void 0:ne.message)||"Ocurri un error al consultar la documentacin.";c(me=>[...me,{role:"assistant",text:de}])}finally{d(!1)}}},le=async()=>{if(K&&m){if(!q||!z){alert("Debes seleccionar Seccin y Sub-seccin para subir el documento.");return}try{A(!0);const se=x.trim()||m.name.replace(/\.[^.]+$/,"").replace(/[_-]+/g," "),ne=[IP(q),DP(z)],de=C.split(",").map(Ve=>Ve.trim()).filter(Boolean),me=Array.from(new Set([...de,...ne])),ge=await aAe(se,y.trim()||"",me),Te=await sAe(ge,m);await G_(ge,Te.storagePath,se,y.trim()||"",me,Te.contentType),g(null),v(""),N(""),_("")}catch(se){console.error("Upload error:",se)}finally{A(!1)}}},ve=async se=>{if(K)try{A(!0),await G_(se.id,se.storagePath,se.title,se.description||"",Array.isArray(se.tags)?se.tags:[],se.contentType||void 0)}catch(ne){console.error("Reindex error:",ne)}finally{A(!1)}},X=async se=>{try{U(se.id);let ne=se.storagePath;if(!ne){const me=Iu(yA,`documentacion/${se.id}`),Te=(await ioe(me)).items[0];if(!Te)throw new Error("No se encontr archivo asociado a este documento.");ne=Te.fullPath}const de=await MA(Iu(yA,ne));M(se.title),k(de)}catch(ne){console.error("Error abriendo documento:",ne),alert((ne==null?void 0:ne.message)||"No se pudo abrir el documento.")}finally{U(null)}},Ee=se=>{I(ne=>ne.includes(se)?ne.filter(de=>de!==se):[...ne,se])},Be=()=>I([]),je=se=>{se.key==="Enter"&&!se.shiftKey&&(se.preventDefault(),ue())};w.useEffect(()=>{const se=ne=>{if(ne.key==="Escape"&&T){k(null);return}ne.altKey&&ne.key==="q"?S("consulta"):ne.altKey&&ne.key==="v"?S("visualizador"):ne.altKey&&ne.key==="c"&&j.length>0&&Be()};return window.addEventListener("keydown",se),()=>window.removeEventListener("keydown",se)},[j.length]);const fe=(se,ne)=>{const de=`${se}::${ne}`;R(me=>({...me,[de]:!me[de]}))},ye=()=>i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700",children:[i.jsx(Wi,{className:"w-5 h-5 text-amber-500"}),i.jsx("span",{className:"font-semibold",children:"Documentacin institucional"})]}),J&&i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("select",{value:q,onChange:se=>H(se.target.value),className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm",children:[i.jsx("option",{value:"",children:"Seccin"}),Mm.map(se=>i.jsx("option",{value:se,children:se},se))]}),i.jsxs("select",{value:z,onChange:se=>W(se.target.value),className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm",children:[i.jsx("option",{value:"",children:"Sub-seccin"}),Ug.map(se=>i.jsx("option",{value:se,children:se},se))]})]}),J&&i.jsxs("div",{className:"flex-1 min-w-[280px] flex flex-wrap gap-2 items-center",children:[i.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 cursor-pointer",children:[i.jsx(Pb,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",accept:"application/pdf,text/plain",onChange:se=>{var ne;return g(((ne=se.target.files)==null?void 0:ne[0])||null)}}),i.jsx("span",{className:"text-sm",children:m?m.name:"Seleccionar archivo (PDF/TXT)"})]}),i.jsx("input",{value:x,onChange:se=>v(se.target.value),placeholder:"Ttulo (opcional)",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm"}),i.jsx("input",{value:y,onChange:se=>N(se.target.value),placeholder:"Descripcin (opcional)",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm flex-1"}),i.jsx("input",{value:C,onChange:se=>_(se.target.value),placeholder:"Tags (coma)",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm"}),i.jsxs("button",{disabled:f||!m||!q||!z,onClick:le,className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50",title:!q||!z?"Selecciona Seccin y Sub-seccin":"Subir e indexar",children:[f?i.jsx(ks,{className:"w-4 h-4 animate-spin"}):i.jsx(av,{className:"w-4 h-4"}),"Subir e indexar"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 rounded-2xl ring-1 ring-slate-200 dark:ring-slate-700 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-semibold",children:"Repositorio"}),K&&i.jsx(VN,{className:"w-4 h-4 text-slate-500",title:"Slo Subdireccin configura"})]}),i.jsxs("div",{className:"mb-3 flex flex-wrap gap-2",children:[oe.map(se=>i.jsx("button",{onClick:()=>Ee(se),className:`text-xs px-2 py-1 rounded-full ring-1 ${j.includes(se)?"bg-amber-500 text-white ring-amber-500":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-slate-200 dark:ring-slate-600"}`,children:se},se)),j.length>0&&i.jsx("button",{onClick:Be,className:"text-xs px-2 py-1 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-1 ring-slate-200 dark:ring-slate-600",children:"Limpiar"})]}),i.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-auto pr-1",children:Mm.map(se=>{const ne=re.get(se),de=ne.get("Protocolos").length+ne.get("Registros").length;return i.jsxs("div",{className:"rounded-xl ring-1 ring-slate-200 dark:ring-slate-700",children:[i.jsxs("div",{className:"px-3 py-2 bg-slate-50 dark:bg-slate-700/40 text-sm font-semibold rounded-t-xl",children:[se," ",i.jsxs("span",{className:"text-slate-400 font-normal",children:["(",de,")"]})]}),Ug.map(me=>{const ge=ne.get(me);return i.jsxs("div",{children:[i.jsxs("div",{className:"px-3 py-1 text-xs uppercase tracking-wide text-slate-500 dark:text-slate-300",children:[me," ",i.jsxs("span",{className:"text-slate-400",children:["(",ge.length,")"]})]}),ge.length===0&&i.jsx("div",{className:"px-3 pb-2 text-xs text-slate-400",children:"Sin documentos"}),ge.map(Te=>i.jsxs("div",{className:"flex items-start gap-3 px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-50 text-amber-600 dark:bg-amber-500/20 dark:text-amber-300 flex items-center justify-center",children:i.jsx(Wi,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium truncate",title:Te.title,children:Te.title}),Te.description&&i.jsx("div",{className:"text-[11px] text-slate-500 truncate",title:Te.description,children:Te.description}),i.jsxs("div",{className:"text-[10px] text-slate-400 mt-0.5",children:[Te.pageCount?`${Te.pageCount} pg.`:""," ",Te.contentText?` ${Te.contentText.length} chars`:""]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[ce&&i.jsx("button",{className:"text-slate-400 hover:text-indigo-600 disabled:opacity-50",title:L===Te.id?"Cargando documento...":"Ver documento",onClick:()=>X(Te),disabled:L===Te.id,children:L===Te.id?i.jsx(ks,{className:"w-4 h-4 animate-spin"}):i.jsx(fp,{className:"w-4 h-4"})}),K&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:`text-slate-400 ${Te.storagePath?"hover:text-emerald-600":"opacity-40 cursor-not-allowed"}`,title:Te.storagePath?"Reindexar":"No hay archivo asociado para reindexar",onClick:()=>Te.storagePath&&ve(Te),disabled:!Te.storagePath,children:i.jsx(PG,{className:"w-4 h-4"})}),i.jsx("button",{className:"text-slate-400 hover:text-red-600",title:"Eliminar",onClick:()=>HR(Te.id),children:i.jsx(Qn,{className:"w-4 h-4"})})]})]})]},Te.id))]},me)})]},se)})})]}),i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-2xl ring-1 ring-slate-200 dark:ring-slate-700 p-4 flex flex-col min-h-[60vh]",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"w-9 h-9 rounded-lg bg-emerald-50 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-300 flex items-center justify-center",children:i.jsx(Px,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Asistente de Documentacin"}),i.jsx("div",{className:"text-xs text-slate-500",children:"Debes elegir **Seccin** y **Sub-seccin** para delimitar la bsqueda"})]})]}),i.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2",children:[i.jsxs("select",{value:q,onChange:se=>H(se.target.value),className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm",children:[i.jsx("option",{value:"",children:"Seccin"}),Mm.map(se=>i.jsx("option",{value:se,children:se},se))]}),i.jsxs("select",{value:z,onChange:se=>W(se.target.value),className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-sm",children:[i.jsx("option",{value:"",children:"Sub-seccin"}),Ug.map(se=>i.jsx("option",{value:se,children:se},se))]}),oe.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"Tags:"}),oe.map(se=>i.jsx("button",{onClick:()=>Ee(se),className:`text-xs px-2 py-1 rounded-full ring-1 ${j.includes(se)?"bg-emerald-600 text-white ring-emerald-600":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-slate-200 dark:ring-slate-600"}`,children:se},`chat-${se}`)),j.length>0&&i.jsx("button",{onClick:Be,className:"text-xs px-2 py-1 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 ring-1 ring-slate-200 dark:ring-slate-600",children:"Limpiar"})]})]}),i.jsxs("div",{className:"flex-1 overflow-auto space-y-3",children:[l.map((se,ne)=>i.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 ${se.role==="user"?"ml-auto bg-amber-100 dark:bg-amber-900/40 text-slate-900 dark:text-slate-100":"bg-slate-100 dark:bg-slate-700/60 text-slate-800 dark:text-slate-100"}`,children:[i.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:se.text}),se.citations&&se.citations.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:se.citations.map(de=>i.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-white/70 dark:bg-slate-800/70 ring-1 ring-slate-200 dark:ring-slate-600",title:de.title,children:["Doc ",de.index]},de.id))})]},ne)),i.jsx("div",{ref:O})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx("input",{value:s,onChange:se=>o(se.target.value),onKeyDown:je,placeholder:"Escribe tu pregunta",className:"flex-1 px-4 py-3 rounded-xl bg-white dark:bg-slate-900 ring-1 ring-slate-200 dark:ring-slate-700"}),i.jsxs("button",{onClick:ue,disabled:u||!s.trim(),className:"inline-flex items-center gap-2 px-4 py-3 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50",title:!q||!z?"Selecciona Seccin y Sub-seccin":"Enviar consulta",children:[u?i.jsx(ks,{className:"w-4 h-4 animate-spin"}):i.jsx(KM,{className:"w-4 h-4"})," Enviar"]})]})]})]})]}),Ae=()=>{const se=de=>{const me=Z.trim().toLowerCase();if(!me)return!0;const ge=Te=>(Te||"").toLowerCase().includes(me);return ge(de.title)||ge(de.description||"")},ne=Mm.map(de=>{const me=re.get(de),ge=Ug.map(Ve=>{const Xe=(me.get(Ve)||[]).filter(se);return{sub:Ve,total:Xe.length}}),Te=ge.reduce((Ve,Xe)=>Ve+Xe.total,0);return{sec:de,total:Te,subs:ge}});return i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700",children:[i.jsx(kF,{className:"w-5 h-5 text-slate-600 dark:text-slate-200"}),i.jsx("span",{className:"font-semibold",children:"Visualizador"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{value:Z,onChange:de=>V(de.target.value),placeholder:"Buscar por ttulo o descripcin",className:"px-3 py-2 rounded-xl bg-white dark:bg-slate-900 ring-1 ring-slate-200 dark:ring-slate-700 text-sm min-w-[260px]"}),Object.values(Y).some(Boolean)?i.jsx("button",{onClick:()=>R({}),className:"px-3 py-2 text-xs rounded-xl ring-1 ring-slate-200 dark:ring-slate-700",title:"Contraer todo",children:"Contraer todo"}):i.jsx("button",{onClick:()=>{const de={};Mm.forEach(me=>Ug.forEach(ge=>de[`${me}::${ge}`]=!0)),R(de)},className:"px-3 py-2 text-xs rounded-xl ring-1 ring-slate-200 dark:ring-slate-700",title:"Expandir todo",children:"Expandir todo"})]})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:ne.map(({sec:de,total:me,subs:ge})=>{const Te=nCt[de];return i.jsxs("div",{className:`rounded-2xl ring-1 ${Te.ring} overflow-hidden bg-white dark:bg-slate-800`,children:[i.jsx("div",{className:`flex items-center justify-between px-4 py-3 ${Te.bg}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center ${Te.bg} ${Te.text} ring-1 ${Te.ring}`,children:i.jsx(Wi,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("div",{className:`font-semibold ${Te.text}`,children:de}),i.jsxs("div",{className:"text-xs text-slate-500",children:[me," documento",me===1?"":"s"]})]})]})}),i.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:ge.map(({sub:Ve,total:Xe})=>{var mt;const Ke=`${de}::${Ve}`,Qe=!!Y[Ke],Je=(((mt=re.get(de))==null?void 0:mt.get(Ve))||[]).filter(We=>Z&&Z.trim()?We.title.toLowerCase().includes(Z.toLowerCase())||(We.description||"").toLowerCase().includes(Z.toLowerCase()):!0);return i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>fe(de,Ve),className:"w-full flex items-center justify-between px-4 py-2 text-left hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsxs("div",{className:"inline-flex items-center gap-2",children:[Qe?i.jsx(X2,{className:"w-4 h-4 text-slate-500"}):i.jsx(XC,{className:"w-4 h-4 text-slate-500"}),i.jsx("span",{className:"text-sm font-medium",children:Ve})]}),i.jsx("span",{className:"text-xs text-slate-500",children:Xe})]}),Qe&&i.jsx("div",{className:"px-4 pb-3",children:Je.length===0?i.jsx("div",{className:"text-xs text-slate-400",children:"Sin documentos"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Je.map(We=>i.jsxs("div",{className:"group flex items-start gap-3 p-3 rounded-xl ring-1 ring-slate-200 dark:ring-slate-700 bg-white dark:bg-slate-900 hover:shadow-sm",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 flex items-center justify-center",children:i.jsx(Wi,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium truncate",title:We.title,children:We.title}),We.description&&i.jsx("div",{className:"text-[11px] text-slate-500 line-clamp-2",children:We.description}),i.jsxs("div",{className:"mt-1 text-[10px] text-slate-400",children:[We.pageCount?`${We.pageCount} pg.`:""," ",We.contentText?` ${We.contentText.length} chars`:""]}),Array.isArray(We.tags)&&We.tags.some(He=>!He.startsWith("section:")&&!He.startsWith("subsection:"))&&i.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:We.tags.filter(He=>!He.startsWith("section:")&&!He.startsWith("subsection:")).slice(0,6).map(He=>i.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-800 ring-1 ring-slate-200 dark:ring-slate-700 text-slate-600 dark:text-slate-300",children:He},He))})]}),i.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[ce&&i.jsx("button",{className:"text-slate-400 hover:text-indigo-600 disabled:opacity-50",title:L===We.id?"Cargando documento...":"Ver documento",onClick:()=>X(We),disabled:L===We.id,children:L===We.id?i.jsx(ks,{className:"w-4 h-4 animate-spin"}):i.jsx(fp,{className:"w-4 h-4"})}),K&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:`text-slate-400 ${We.storagePath?"hover:text-emerald-600":"opacity-40 cursor-not-allowed"}`,title:We.storagePath?"Reindexar":"No hay archivo asociado para reindexar",onClick:()=>We.storagePath&&ve(We),disabled:!We.storagePath,children:i.jsx(PG,{className:"w-4 h-4"})}),i.jsx("button",{className:"text-slate-400 hover:text-red-600",title:"Eliminar",onClick:()=>HR(We.id),children:i.jsx(Qn,{className:"w-4 h-4"})})]})]})]},We.id))})})]},Ke)})})]},de)})})]})};return i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>S("consulta"),className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl ring-1 transition 
            ${P==="consulta"?"bg-slate-900 text-white ring-slate-900":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-100 ring-slate-200 dark:ring-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,title:"Realizar consultas y gestionar el repositorio (Alt + Q)",role:"tab","aria-selected":P==="consulta","aria-controls":"panel-consulta",children:[i.jsx(Px,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Consulta"}),i.jsx("kbd",{className:"ml-2 text-xs text-slate-400",children:"Alt+Q"})]}),i.jsxs("button",{onClick:()=>S("visualizador"),className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl ring-1 transition
            ${P==="visualizador"?"bg-slate-900 text-white ring-slate-900":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-100 ring-slate-200 dark:ring-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,title:"Visualiza el repositorio por Seccin y Sub-seccin (Alt + V)",role:"tab","aria-selected":P==="visualizador","aria-controls":"panel-visualizador",children:[i.jsx(kF,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Visualizador"}),i.jsx("kbd",{className:"ml-2 text-xs text-slate-400",children:"Alt+V"})]}),K&&i.jsxs("button",{onClick:()=>S("configuracion"),className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl ring-1 transition
              ${P==="configuracion"?"bg-slate-900 text-white ring-slate-900":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-100 ring-slate-200 dark:ring-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,title:"Configuracin de Documentacin (Slo Subdireccin)",role:"tab","aria-selected":P==="configuracion","aria-controls":"panel-configuracion",children:[i.jsx(h4e,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Configuracin"})]})]}),P==="consulta"&&ye(),P==="visualizador"&&Ae(),P==="configuracion"&&K&&i.jsx(eCt,{currentUser:e}),T&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>k(null),children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full h-[90vh] max-w-5xl overflow-hidden flex flex-col",onClick:se=>se.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"font-medium truncate mr-2",children:B}),i.jsx("button",{className:"text-slate-500 hover:text-slate-800 p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700/50",onClick:()=>k(null),title:"Cerrar visor (Esc)",children:i.jsx(No,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"flex-1 bg-slate-50 dark:bg-slate-800",children:i.jsx("iframe",{src:`${T}#toolbar=1&navpanes=0`,className:"w-full h-full",title:B,loading:"lazy"})})]})})]})},sCt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},iCt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:o})=>{const l=e.profile,c=w.useMemo(()=>{const I=vTe[l]||[];return l!==Ot.ESTUDIANTE?I:I.filter(T=>{if(T.name==="Asistencia a Empresa"){const k=sCt(e.curso||"");return k.startsWith("3")||k.startsWith("4")}return!0})},[l,e.curso]),[u,d]=w.useState(null),[f,A]=w.useState(!1),[m,g]=w.useState(!1),[x,v]=w.useState({planificacion:!0,evaluacion:!0,reflexion:!0,herramientas:!0,sd_gestion:!0,sd_planificacion:!0,sd_reflexion:!0,sd_herramientas:!0,coord_gestion:!0,coord_formacion:!0,coord_utilidades:!0}),y=w.useRef([]);w.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[l,c]);const N=w.useCallback(I=>{d(I),window.innerWidth<768&&A(!1)},[]),C=w.useCallback(I=>{const T=c.find(k=>k.name===I);T&&N(T)},[c,N]),_=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center h-16 px-4 border-b border-slate-200 bg-white",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-9 h-9 rounded-full bg-amber-400 flex items-center justify-center",children:i.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:i.jsx(nTe,{className:"w-4 h-4"})})}),!m&&i.jsx("span",{className:"text-blue-900 font-extrabold text-xl tracking-tight",children:"Gestin LIR"})]}),i.jsx("button",{type:"button",onClick:()=>g(I=>!I),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-md hover:bg-slate-100 transition",title:m?"Expandir":"Colapsar",children:m?i.jsx(XC,{className:"w-5 h-5 text-slate-600"}):i.jsx(UN,{className:"w-5 h-5 text-slate-600"})})]}),i.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-white",children:l===Ot.PROFESORADO&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"planificacion",title:"Planificacin",items:["Intranet","Planificacin","Recursos de Aprendizaje","Interdisciplinario","Inclusin"]},{id:"evaluacion",title:"Evaluacin",items:["Evaluacin de Ensayo","Evaluacin de Aprendizajes","Evaluaciones Formativas","Evaluacin de Competencias","Actividades Remotas","SIMCE"]},{id:"reflexion",title:"Reflexin",items:["Anlisis Taxonmico","Mis Acompaamientos","Desarrollo Profesional"]},{id:"herramientas",title:"Herramientas",items:["Documentacin"]}].map(I=>{const T=!!x[I.id],k=I.items.map(B=>c.find(M=>M.name===B)).filter(Boolean);return k.length===0?null:i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-slate-50 transition",onClick:()=>v(B=>({...B,[I.id]:!B[I.id]})),"aria-expanded":T,children:[i.jsx("span",{className:"text-sm font-semibold text-blue-900",children:I.title}),i.jsx(X2,{className:`w-4 h-4 text-slate-500 transition-transform ${T?"rotate-180":""}`})]}),T&&i.jsx("div",{className:"px-2 pb-2",children:k.map(B=>{const M=(u==null?void 0:u.name)===B.name;return i.jsxs("button",{onClick:()=>N(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${M?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:B.name,children:[i.jsx("span",{className:`shrink-0 ${M?"text-slate-900":"text-blue-900"}`,children:B.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]},I.id)}),c.filter(I=>!["Intranet","Planificacin","Recursos de Aprendizaje","Interdisciplinario","Inclusin","Evaluacin de Aprendizajes","Evaluaciones Formativas","Evaluacin de Competencias","Actividades Remotas","SIMCE","Anlisis Taxonmico","Mis Acompaamientos","Desarrollo Profesional"].includes(I.name)).length>0&&i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-blue-900",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(I=>!["Intranet","Planificacin","Recursos de Aprendizaje","Interdisciplinario","Inclusin","Evaluacin de Aprendizajes","Evaluaciones Formativas","Evaluacin de Competencias","Actividades Remotas","SIMCE","Anlisis Taxonmico","Mis Acompaamientos","Desarrollo Profesional"].includes(I.name)).map(I=>{const T=(u==null?void 0:u.name)===I.name;return i.jsxs("button",{onClick:()=>N(I),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${T?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:I.name,children:[i.jsx("span",{className:`shrink-0 ${T?"text-slate-900":"text-blue-900"}`,children:I.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:I.name})]},I.name)})})]})]}):l===Ot.SUBDIRECCION&&!m?i.jsxs("div",{className:"space-y-3",children:[[{id:"sd_gestion",title:"Gestin",items:["Intranet","Administracin","Horario del liceo","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedaggicas"]},{id:"sd_planificacion",title:"Planificacin",items:["Planificacin","Seguimiento Curricular","Interdisciplinario","Inclusin"]},{id:"sd_reflexion",title:"Reflexin",items:["Acompaamiento docente","Anlisis Taxonmico","Dashboard"]},{id:"sd_herramientas",title:"Herramientas",items:["Documentacin","Calendario Acadmico"]}].map(I=>{const T=!!x[I.id],k=I.items.map(B=>c.find(M=>M.name===B)).filter(Boolean);return k.length===0?null:i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-slate-50 transition",onClick:()=>v(B=>({...B,[I.id]:!B[I.id]})),"aria-expanded":T,children:[i.jsx("span",{className:"text-sm font-semibold text-blue-900",children:I.title}),i.jsx(X2,{className:`w-4 h-4 text-slate-500 transition-transform ${T?"rotate-180":""}`})]}),T&&i.jsx("div",{className:"px-2 pb-2",children:k.map(B=>{const M=(u==null?void 0:u.name)===B.name;return i.jsxs("button",{onClick:()=>N(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${M?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:B.name,children:[i.jsx("span",{className:`shrink-0 ${M?"text-slate-900":"text-blue-900"}`,children:B.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]},I.id)}),c.filter(I=>!["Intranet","Administracin","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedaggicas","Seguimiento Curricular","Interdisciplinario","Inclusin","Acompaamiento docente","Anlisis Taxonmico","Dashboard","Calendario Acadmico"].includes(I.name)).length>0&&i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 text-sm font-semibold text-blue-900",children:"Otros"}),i.jsx("div",{className:"px-2 pb-2",children:c.filter(I=>!["Intranet","Administracin","Registro de inasistencias y reemplazos docentes","Crear horarios","Seguimiento de acciones pedaggicas","Seguimiento Curricular","Interdisciplinario","Inclusin","Acompaamiento docente","Anlisis Taxonmico","Dashboard","Calendario Acadmico"].includes(I.name)).map(I=>{const T=(u==null?void 0:u.name)===I.name;return i.jsxs("button",{onClick:()=>N(I),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${T?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:I.name,children:[i.jsx("span",{className:`shrink-0 ${T?"text-slate-900":"text-blue-900"}`,children:I.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:I.name})]},I.name)})})]})]}):l===Ot.COORDINACION_TP&&!m?i.jsx("div",{className:"space-y-3",children:[{id:"coord_gestion",title:"Gestin",items:["Seguimiento Dual","Asistencia Dual","Gestin de Empresas","Paol"]},{id:"coord_formacion",title:"Formacin",items:["Alternancia TP","Desarrollo Profesional","Evaluacin de Ensayo","SIMCE"]},{id:"coord_utilidades",title:"Utilidades",items:["Documentacin","Calendario Acadmico","Multicopias"]}].map(I=>{const T=!!x[I.id],k=I.items.map(B=>c.find(M=>M.name===B)).filter(Boolean);return k.length===0?null:i.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 hover:bg-slate-50 transition",onClick:()=>v(B=>({...B,[I.id]:!B[I.id]})),"aria-expanded":T,children:[i.jsx("span",{className:"text-sm font-semibold text-blue-900",children:I.title}),i.jsx(X2,{className:`w-4 h-4 text-slate-500 transition-transform ${T?"rotate-180":""}`})]}),T&&i.jsx("div",{className:"px-2 pb-2",children:k.map(B=>{const M=(u==null?void 0:u.name)===B.name;return i.jsxs("button",{onClick:()=>N(B),className:`w-full group flex items-center justify-start px-3 gap-3 py-2 rounded-lg transition-all mt-1
                              ${M?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:B.name,children:[i.jsx("span",{className:`shrink-0 ${M?"text-slate-900":"text-blue-900"}`,children:B.icon}),i.jsx("span",{className:"text-[0.98rem] leading-tight text-left",children:B.name})]},B.name)})})]},I.id)})}):i.jsx("div",{className:"space-y-1",onKeyDown:I=>{var k,B,M;const T=y.current.findIndex(P=>P===document.activeElement);if(I.key==="ArrowDown"){I.preventDefault();const P=Math.min(T===-1?0:T+1,y.current.length-1);(k=y.current[P])==null||k.focus()}else if(I.key==="ArrowUp"){I.preventDefault();const P=Math.max(T===-1?0:T-1,0);(B=y.current[P])==null||B.focus()}else I.key==="Enter"&&T>=0&&((M=y.current[T])==null||M.click())},children:c.map((I,T)=>{const k=(u==null?void 0:u.name)===I.name;return i.jsxs("button",{ref:B=>y.current[T]=B,onClick:()=>N(I),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-xl transition-all
                    ${k?"bg-amber-400/90 text-slate-900 font-semibold":"text-blue-900 hover:bg-slate-50"}`,title:m?I.name:void 0,children:[i.jsx("span",{className:`shrink-0 ${k?"text-slate-900":"text-blue-900"}`,children:I.icon}),!m&&i.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:I.name})]},I.name)})})})]}),j=()=>{if(!u)return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl border border-slate-200 dark:border-slate-700 h-full w-full flex items-center justify-center",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un mdulo del men para comenzar."})});if(u.name==="Intranet")return i.jsx(ZNt,{currentUser:e});if(u.name==="Documentacin"&&l!==Ot.ESTUDIANTE)return i.jsx(aCt,{currentUser:e});if(u.name==="Calendario Acadmico")return i.jsx(vst,{profile:l});if(u.name==="Desarrollo Profesional")return i.jsx(y2t,{currentUser:e});if(l===Ot.SUBDIRECCION){if(u.name==="Dashboard")return i.jsx(aUe,{currentUser:e});if(u.name==="Administracin")return i.jsx(Mot,{});if(u.name==="Horario del liceo")return i.jsx(UNt,{});if(u.name==="Planificacin")return i.jsx(VJ,{currentUser:e});if(u.name==="Multicopias")return i.jsx(_P,{currentUser:e});if(u.name==="Evaluacin de Ensayo")return i.jsx(TP,{currentUser:e});if(u.name==="Seguimiento Curricular")return i.jsx(Npt,{currentUser:e});if(u.name==="Acompaamiento docente")return i.jsx(Pct,{currentUser:e});if(u.name==="Anlisis Taxonmico")return i.jsx(Tee,{currentUser:e});if(u.name==="SIMCE")return i.jsx(vS,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(RZ,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return i.jsx(Z7e,{currentUser:e});if(u.name==="Crear horarios")return i.jsx(ZUe,{});if(u.name==="Seguimiento de acciones pedaggicas")return i.jsx(Kat,{});if(u.name==="Inclusin")return i.jsx(BZ,{currentUser:e})}if(l===Ot.PROFESORADO){if(u.name==="Planificacin")return i.jsx(VJ,{currentUser:e});if(u.name==="Mis Acompaamientos")return i.jsx(rpt,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return i.jsx(Mmt,{});if(u.name==="Multicopias")return i.jsx(_P,{currentUser:e});if(u.name==="Anlisis Taxonmico")return i.jsx(Tee,{currentUser:e});if(u.name==="SIMCE")return i.jsx(vS,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(RZ,{});if(u.name==="Inclusin")return i.jsx(BZ,{currentUser:e});if(u.name==="Actividades Remotas")return i.jsx(mlt,{});if(u.name==="Evaluacin de Ensayo")return i.jsx(TP,{currentUser:e});if(u.name==="Evaluacin de Aprendizajes")return i.jsx(Fot,{});if(u.name==="Evaluaciones Formativas")return i.jsx(gct,{currentUser:e});if(u.name==="Evaluacin de Competencias")return i.jsx(yNt,{currentUser:e})}if(l===Ot.COORDINACION_TP){if(u.name==="Seguimiento Dual")return i.jsx(Wot,{});if(u.name==="Asistencia Dual")return i.jsx(tct,{});if(u.name==="Paol")return i.jsx(nut,{});if(u.name==="Multicopias")return i.jsx(_P,{currentUser:e});if(u.name==="Evaluacin de Ensayo")return i.jsx(TP,{currentUser:e});if(u.name==="SIMCE")return i.jsx(vS,{currentUser:e});if(u.name==="Gestin de Empresas")return i.jsx(o2t,{});if(u.name==="Alternancia TP")return i.jsx(Z2t,{})}if(l===Ot.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return i.jsx(jlt,{currentUser:e});if(u.name==="Evaluacin Formativa")return i.jsx(Gmt,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return i.jsx(Ymt,{currentUser:e});if(u.name==="SIMCE")return i.jsx(vS,{currentUser:e});if(u.name==="Asistencia a Empresa")return i.jsx(Ult,{currentUser:e})}return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl border border-slate-200 dark:border-slate-700 h-full w-full animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),i.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aqu ir la funcionalidad de ",i.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return i.jsxs("div",{className:"h-screen flex flex-col bg-slate-50 dark:bg-slate-900",children:[i.jsx(PTe,{currentUser:e,onLogout:t,onNavigate:C,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>A(I=>!I),unreadMessagesCount:s,refreshUnreadCount:o}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&i.jsx("div",{onClick:()=>A(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),i.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-white text-blue-900 flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-slate-200`,children:i.jsx(_,{})}),i.jsx("main",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 transition",onClick:()=>A(!0),title:"Abrir men",children:i.jsx(W4e,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&i.jsx("span",{className:"inline-flex items-center justify-center w-9 h-9 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",children:u.icon}),i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),i.jsx("div",{className:"min-h-[60vh]",children:j()})]})})]})]})},Ave=w.createContext({});function oCt(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const JH=w.createContext(null),mve=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function lCt(e=!0){const t=w.useContext(JH);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=t,s=w.useId();w.useEffect(()=>{e&&a(s)},[e]);const o=w.useCallback(()=>e&&n&&n(s),[s,n,e]);return!r&&n?[!1,o]:[!0]}const ZH=typeof window<"u",cCt=ZH?w.useLayoutEffect:w.useEffect,Bu=e=>e;let pve=Bu;function eQ(e){let t;return()=>(t===void 0&&(t=e()),t)}const cy=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},AA=e=>e*1e3,mA=e=>e/1e3,uCt={useManualTiming:!1};function dCt(e){let t=new Set,r=new Set,n=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){s.has(u)&&(c.schedule(u),e()),u(o)}const c={schedule:(u,d=!1,f=!1)=>{const m=f&&n?t:r;return d&&s.add(u),m.has(u)||m.add(u),u},cancel:u=>{r.delete(u),s.delete(u)},process:u=>{if(o=u,n){a=!0;return}n=!0,[t,r]=[r,t],t.forEach(l),t.clear(),n=!1,a&&(a=!1,c.process(u))}};return c}const yS=["read","resolveKeyframes","update","preRender","render","postRender"],fCt=40;function gve(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=yS.reduce((y,N)=>(y[N]=dCt(s),y),{}),{read:l,resolveKeyframes:c,update:u,preRender:d,render:f,postRender:A}=o,m=()=>{const y=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(y-a.timestamp,fCt),1),a.timestamp=y,a.isProcessing=!0,l.process(a),c.process(a),u.process(a),d.process(a),f.process(a),A.process(a),a.isProcessing=!1,r&&t&&(n=!1,e(m))},g=()=>{r=!0,n=!0,a.isProcessing||e(m)};return{schedule:yS.reduce((y,N)=>{const C=o[N];return y[N]=(_,j=!1,I=!1)=>(r||g(),C.schedule(_,j,I)),y},{}),cancel:y=>{for(let N=0;N<yS.length;N++)o[yS[N]].cancel(y)},state:a,steps:o}}const{schedule:os,cancel:Mp,state:Ho,steps:OP}=gve(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bu,!0),xve=w.createContext({strict:!1}),Ure={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uy={};for(const e in Ure)uy[e]={isEnabled:t=>Ure[e].some(r=>!!t[r])};function hCt(e){for(const t in e)uy[t]={...uy[t],...e[t]}}const ACt=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _4(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ACt.has(e)}let vve=e=>!_4(e);function mCt(e){e&&(vve=t=>t.startsWith("on")?!_4(t):e(t))}try{mCt(require("@emotion/is-prop-valid").default)}catch{}function pCt(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(vve(a)||r===!0&&_4(a)||!t&&!_4(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function gCt(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...n)=>e(...n);return new Proxy(r,{get:(n,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const AB=w.createContext({});function TC(e){return typeof e=="string"||Array.isArray(e)}function mB(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const tQ=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rQ=["initial",...tQ];function pB(e){return mB(e.animate)||rQ.some(t=>TC(e[t]))}function bve(e){return!!(pB(e)||e.variants)}function xCt(e,t){if(pB(e)){const{initial:r,animate:n}=e;return{initial:r===!1||TC(r)?r:void 0,animate:TC(n)?n:void 0}}return e.inherit!==!1?t:{}}function vCt(e){const{initial:t,animate:r}=xCt(e,w.useContext(AB));return w.useMemo(()=>({initial:t,animate:r}),[Hre(t),Hre(r)])}function Hre(e){return Array.isArray(e)?e.join(" "):e}const bCt=Symbol.for("motionComponentSymbol");function Kb(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function yCt(e,t,r){return w.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Kb(r)&&(r.current=n))},[t])}const nQ=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),wCt="framerAppearId",yve="data-"+nQ(wCt),{schedule:aQ}=gve(queueMicrotask,!1),wve=w.createContext({});function NCt(e,t,r,n,a){var s,o;const{visualElement:l}=w.useContext(AB),c=w.useContext(xve),u=w.useContext(JH),d=w.useContext(mve).reducedMotion,f=w.useRef(null);n=n||c.renderer,!f.current&&n&&(f.current=n(e,{visualState:t,parent:l,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const A=f.current,m=w.useContext(wve);A&&!A.projection&&a&&(A.type==="html"||A.type==="svg")&&CCt(f.current,r,a,m);const g=w.useRef(!1);w.useInsertionEffect(()=>{A&&g.current&&A.update(r,u)});const x=r[yve],v=w.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return cCt(()=>{A&&(g.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),aQ.render(A.render),v.current&&A.animationState&&A.animationState.animateChanges())}),w.useEffect(()=>{A&&(!v.current&&A.animationState&&A.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,x)}),v.current=!1))}),A}function CCt(e,t,r,n){const{layoutId:a,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Nve(e.parent)),e.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:!!o||l&&Kb(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:u})}function Nve(e){if(e)return e.options.allowProjection!==!1?e.projection:Nve(e.parent)}function ECt({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){var s,o;e&&hCt(e);function l(u,d){let f;const A={...w.useContext(mve),...u,layoutId:jCt(u)},{isStatic:m}=A,g=vCt(u),x=n(u,m);if(!m&&ZH){kCt();const v=SCt(A);f=v.MeasureLayout,g.visualElement=NCt(a,x,A,t,v.ProjectionNode)}return i.jsxs(AB.Provider,{value:g,children:[f&&g.visualElement?i.jsx(f,{visualElement:g.visualElement,...A}):null,r(a,u,yCt(x,g.visualElement,d),x,m,g.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${(o=(s=a.displayName)!==null&&s!==void 0?s:a.name)!==null&&o!==void 0?o:""})`}`;const c=w.forwardRef(l);return c[bCt]=a,c}function jCt({layoutId:e}){const t=w.useContext(Ave).id;return t&&e!==void 0?t+"-"+e:e}function kCt(e,t){w.useContext(xve).strict}function SCt(e){const{drag:t,layout:r}=uy;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const _Ct=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sQ(e){return typeof e!="string"||e.includes("-")?!1:!!(_Ct.indexOf(e)>-1||/[A-Z]/u.test(e))}function Qre(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function iQ(e,t,r,n){if(typeof t=="function"){const[a,s]=Qre(n);t=t(r!==void 0?r:e.custom,a,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,s]=Qre(n);t=t(r!==void 0?r:e.custom,a,s)}return t}const v8=e=>Array.isArray(e),TCt=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),BCt=e=>v8(e)?e[e.length-1]||0:e,Ol=e=>!!(e&&e.getVelocity);function A5(e){const t=Ol(e)?e.get():e;return TCt(t)?t.toValue():t}function ICt({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,a,s){const o={latestValues:DCt(n,a,s,e),renderState:t()};return r&&(o.onMount=l=>r({props:n,current:l,...o}),o.onUpdate=l=>r(l)),o}const Cve=e=>(t,r)=>{const n=w.useContext(AB),a=w.useContext(JH),s=()=>ICt(e,t,n,a);return r?s():oCt(s)};function DCt(e,t,r,n){const a={},s=n(e,{});for(const A in s)a[A]=A5(s[A]);let{initial:o,animate:l}=e;const c=pB(e),u=bve(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const f=d?l:o;if(f&&typeof f!="boolean"&&!mB(f)){const A=Array.isArray(f)?f:[f];for(let m=0;m<A.length;m++){const g=iQ(e,A[m]);if(g){const{transitionEnd:x,transition:v,...y}=g;for(const N in y){let C=y[N];if(Array.isArray(C)){const _=d?C.length-1:0;C=C[_]}C!==null&&(a[N]=C)}for(const N in x)a[N]=x[N]}}}return a}const Ky=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gv=new Set(Ky),Eve=e=>t=>typeof t=="string"&&t.startsWith(e),jve=Eve("--"),OCt=Eve("var(--"),oQ=e=>OCt(e)?PCt.test(e.split("/*")[0].trim()):!1,PCt=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,kve=(e,t)=>t&&typeof e=="number"?t.transform(e):e,FA=(e,t,r)=>r>t?t:r<e?e:r,Wy={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},BC={...Wy,transform:e=>FA(0,1,e)},wS={...Wy,default:1},FE=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Um=FE("deg"),Xh=FE("%"),Gr=FE("px"),FCt=FE("vh"),RCt=FE("vw"),Vre={...Xh,parse:e=>Xh.parse(e)/100,transform:e=>Xh.transform(e*100)},LCt={borderWidth:Gr,borderTopWidth:Gr,borderRightWidth:Gr,borderBottomWidth:Gr,borderLeftWidth:Gr,borderRadius:Gr,radius:Gr,borderTopLeftRadius:Gr,borderTopRightRadius:Gr,borderBottomRightRadius:Gr,borderBottomLeftRadius:Gr,width:Gr,maxWidth:Gr,height:Gr,maxHeight:Gr,top:Gr,right:Gr,bottom:Gr,left:Gr,padding:Gr,paddingTop:Gr,paddingRight:Gr,paddingBottom:Gr,paddingLeft:Gr,margin:Gr,marginTop:Gr,marginRight:Gr,marginBottom:Gr,marginLeft:Gr,backgroundPositionX:Gr,backgroundPositionY:Gr},MCt={rotate:Um,rotateX:Um,rotateY:Um,rotateZ:Um,scale:wS,scaleX:wS,scaleY:wS,scaleZ:wS,skew:Um,skewX:Um,skewY:Um,distance:Gr,translateX:Gr,translateY:Gr,translateZ:Gr,x:Gr,y:Gr,z:Gr,perspective:Gr,transformPerspective:Gr,opacity:BC,originX:Vre,originY:Vre,originZ:Gr},$re={...Wy,transform:Math.round},lQ={...LCt,...MCt,zIndex:$re,size:Gr,fillOpacity:BC,strokeOpacity:BC,numOctaves:$re},UCt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},HCt=Ky.length;function QCt(e,t,r){let n="",a=!0;for(let s=0;s<HCt;s++){const o=Ky[s],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=kve(l,lQ[o]);if(!c){a=!1;const d=UCt[o]||o;n+=`${d}(${u}) `}r&&(t[o]=u)}}return n=n.trim(),r?n=r(t,a?"":n):a&&(n="none"),n}function cQ(e,t,r){const{style:n,vars:a,transformOrigin:s}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(gv.has(c)){o=!0;continue}else if(jve(c)){a[c]=u;continue}else{const d=kve(u,lQ[c]);c.startsWith("origin")?(l=!0,s[c]=d):n[c]=d}}if(t.transform||(o||r?n.transform=QCt(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=s;n.transformOrigin=`${c} ${u} ${d}`}}const VCt={offset:"stroke-dashoffset",array:"stroke-dasharray"},$Ct={offset:"strokeDashoffset",array:"strokeDasharray"};function zCt(e,t,r=1,n=0,a=!0){e.pathLength=1;const s=a?VCt:$Ct;e[s.offset]=Gr.transform(-n);const o=Gr.transform(t),l=Gr.transform(r);e[s.array]=`${o} ${l}`}function zre(e,t,r){return typeof e=="string"?e:Gr.transform(t+r*e)}function GCt(e,t,r){const n=zre(t,e.x,e.width),a=zre(r,e.y,e.height);return`${n} ${a}`}function uQ(e,{attrX:t,attrY:r,attrScale:n,originX:a,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,f){if(cQ(e,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:A,style:m,dimensions:g}=e;A.transform&&(g&&(m.transform=A.transform),delete A.transform),g&&(a!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=GCt(g,a!==void 0?a:.5,s!==void 0?s:.5)),t!==void 0&&(A.x=t),r!==void 0&&(A.y=r),n!==void 0&&(A.scale=n),o!==void 0&&zCt(A,o,l,c,!1)}const dQ=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Sve=()=>({...dQ(),attrs:{}}),fQ=e=>typeof e=="string"&&e.toLowerCase()==="svg";function _ve(e,{style:t,vars:r},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const s in r)e.style.setProperty(s,r[s])}const Tve=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Bve(e,t,r,n){_ve(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(Tve.has(a)?a:nQ(a),t.attrs[a])}const T4={};function qCt(e){Object.assign(T4,e)}function Ive(e,{layout:t,layoutId:r}){return gv.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!T4[e]||e==="opacity")}function hQ(e,t,r){var n;const{style:a}=e,s={};for(const o in a)(Ol(a[o])||t.style&&Ol(t.style[o])||Ive(o,e)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[o]=a[o]);return s}function Dve(e,t,r){const n=hQ(e,t,r);for(const a in e)if(Ol(e[a])||Ol(t[a])){const s=Ky.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[s]=e[a]}return n}function KCt(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Gre=["x","y","width","height","cx","cy","r"],WCt={useVisualState:Cve({scrapeMotionValuesFromProps:Dve,createRenderState:Sve,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:a})=>{if(!r)return;let s=!!e.drag;if(!s){for(const l in a)if(gv.has(l)){s=!0;break}}if(!s)return;let o=!t;if(t)for(let l=0;l<Gre.length;l++){const c=Gre[l];e[c]!==t[c]&&(o=!0)}o&&os.read(()=>{KCt(r,n),os.render(()=>{uQ(n,a,fQ(r.tagName),e.transformTemplate),Bve(r,n)})})}})},XCt={useVisualState:Cve({scrapeMotionValuesFromProps:hQ,createRenderState:dQ})};function Ove(e,t,r){for(const n in t)!Ol(t[n])&&!Ive(n,r)&&(e[n]=t[n])}function YCt({transformTemplate:e},t){return w.useMemo(()=>{const r=dQ();return cQ(r,t,e),Object.assign({},r.vars,r.style)},[t])}function JCt(e,t){const r=e.style||{},n={};return Ove(n,r,e),Object.assign(n,YCt(e,t)),n}function ZCt(e,t){const r={},n=JCt(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}function eEt(e,t,r,n){const a=w.useMemo(()=>{const s=Sve();return uQ(s,t,fQ(n),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};Ove(s,e.style,e),a.style={...s,...a.style}}return a}function tEt(e=!1){return(r,n,a,{latestValues:s},o)=>{const c=(sQ(r)?eEt:ZCt)(n,s,o,r),u=pCt(n,typeof r=="string",e),d=r!==w.Fragment?{...u,...c,ref:a}:{},{children:f}=n,A=w.useMemo(()=>Ol(f)?f.get():f,[f]);return w.createElement(r,{...d,children:A})}}function rEt(e,t){return function(n,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...sQ(n)?WCt:XCt,preloadedFeatures:e,useRender:tEt(a),createVisualElement:t,Component:n};return ECt(o)}}function Pve(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function gB(e,t,r){const n=e.getProps();return iQ(n,t,r!==void 0?r:n.custom,e)}const nEt=eQ(()=>window.ScrollTimeline!==void 0);class aEt{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(a=>{if(nEt()&&a.attachTimeline)return a.attachTimeline(t);if(typeof r=="function")return r(a)});return()=>{n.forEach((a,s)=>{a&&a(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class sEt extends aEt{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}function AQ(e,t){return e?e[t]||e.default||e:void 0}const b8=2e4;function Fve(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<b8;)t+=r,n=e.next(t);return t>=b8?1/0:t}function mQ(e){return typeof e=="function"}function qre(e,t){e.timeline=t,e.onfinish=null}const pQ=e=>Array.isArray(e)&&typeof e[0]=="number",iEt={linearEasing:void 0};function oEt(e,t){const r=eQ(e);return()=>{var n;return(n=iEt[t])!==null&&n!==void 0?n:r()}}const B4=oEt(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Rve=(e,t,r=10)=>{let n="";const a=Math.max(Math.round(t/r),2);for(let s=0;s<a;s++)n+=e(cy(0,a-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function Lve(e){return!!(typeof e=="function"&&B4()||!e||typeof e=="string"&&(e in y8||B4())||pQ(e)||Array.isArray(e)&&e.every(Lve))}const U2=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,y8={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:U2([0,.65,.55,1]),circOut:U2([.55,0,1,.45]),backIn:U2([.31,.01,.66,-.59]),backOut:U2([.33,1.53,.69,.99])};function Mve(e,t){if(e)return typeof e=="function"&&B4()?Rve(e,t):pQ(e)?U2(e):Array.isArray(e)?e.map(r=>Mve(r,t)||y8.easeOut):y8[e]}const ff={x:!1,y:!1};function Uve(){return ff.x||ff.y}function lEt(e,t,r){var n;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const s=(n=void 0)!==null&&n!==void 0?n:a.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function Hve(e,t){const r=lEt(e),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[r,a,()=>n.abort()]}function Kre(e){return t=>{t.pointerType==="touch"||Uve()||e(t)}}function cEt(e,t,r={}){const[n,a,s]=Hve(e,r),o=Kre(l=>{const{target:c}=l,u=t(l);if(typeof u!="function"||!c)return;const d=Kre(f=>{u(f),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,a)});return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),s}const Qve=(e,t)=>t?e===t?!0:Qve(e,t.parentElement):!1,gQ=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,uEt=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dEt(e){return uEt.has(e.tagName)||e.tabIndex!==-1}const H2=new WeakSet;function Wre(e){return t=>{t.key==="Enter"&&e(t)}}function PP(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const fEt=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=Wre(()=>{if(H2.has(r))return;PP(r,"down");const a=Wre(()=>{PP(r,"up")}),s=()=>PP(r,"cancel");r.addEventListener("keyup",a,t),r.addEventListener("blur",s,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function Xre(e){return gQ(e)&&!Uve()}function hEt(e,t,r={}){const[n,a,s]=Hve(e,r),o=l=>{const c=l.currentTarget;if(!Xre(l)||H2.has(c))return;H2.add(c);const u=t(l),d=(m,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",A),!(!Xre(m)||!H2.has(c))&&(H2.delete(c),typeof u=="function"&&u(m,{success:g}))},f=m=>{d(m,r.useGlobalTarget||Qve(c,m.target))},A=m=>{d(m,!1)};window.addEventListener("pointerup",f,a),window.addEventListener("pointercancel",A,a)};return n.forEach(l=>{!dEt(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),l.addEventListener("focus",u=>fEt(u,a),a)}),s}function AEt(e){return e==="x"||e==="y"?ff[e]?null:(ff[e]=!0,()=>{ff[e]=!1}):ff.x||ff.y?null:(ff.x=ff.y=!0,()=>{ff.x=ff.y=!1})}const Vve=new Set(["width","height","top","left","right","bottom",...Ky]);let m5;function mEt(){m5=void 0}const Yh={now:()=>(m5===void 0&&Yh.set(Ho.isProcessing||uCt.useManualTiming?Ho.timestamp:performance.now()),m5),set:e=>{m5=e,queueMicrotask(mEt)}};function xQ(e,t){e.indexOf(t)===-1&&e.push(t)}function vQ(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class bQ{constructor(){this.subscriptions=[]}add(t){return xQ(this.subscriptions,t),()=>vQ(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let s=0;s<a;s++){const o=this.subscriptions[s];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function $ve(e,t){return t?e*(1e3/t):0}const Yre=30,pEt=e=>!isNaN(parseFloat(e));class gEt{constructor(t,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,a=!0)=>{const s=Yh.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Yh.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=pEt(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new bQ);const n=this.events[t].add(r);return t==="change"?()=>{n(),os.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Yh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Yre)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Yre);return $ve(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function IC(e,t){return new gEt(e,t)}function xEt(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,IC(r))}function vEt(e,t){const r=gB(e,t);let{transitionEnd:n={},transition:a={},...s}=r||{};s={...s,...n};for(const o in s){const l=BCt(s[o]);xEt(e,o,l)}}function bEt(e){return!!(Ol(e)&&e.add)}function w8(e,t){const r=e.getValue("willChange");if(bEt(r))return r.add(t)}function zve(e){return e.props[yve]}const Gve=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,yEt=1e-7,wEt=12;function NEt(e,t,r,n,a){let s,o,l=0;do o=t+(r-t)/2,s=Gve(o,n,a)-e,s>0?r=o:t=o;while(Math.abs(s)>yEt&&++l<wEt);return o}function RE(e,t,r,n){if(e===t&&r===n)return Bu;const a=s=>NEt(s,0,1,e,r);return s=>s===0||s===1?s:Gve(a(s),t,n)}const qve=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Kve=e=>t=>1-e(1-t),Wve=RE(.33,1.53,.69,.99),yQ=Kve(Wve),Xve=qve(yQ),Yve=e=>(e*=2)<1?.5*yQ(e):.5*(2-Math.pow(2,-10*(e-1))),wQ=e=>1-Math.sin(Math.acos(e)),Jve=Kve(wQ),Zve=qve(wQ),ebe=e=>/^0[^.\s]+$/u.test(e);function CEt(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||ebe(e):!0}const wN=e=>Math.round(e*1e5)/1e5,NQ=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function EEt(e){return e==null}const jEt=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,CQ=(e,t)=>r=>!!(typeof r=="string"&&jEt.test(r)&&r.startsWith(e)||t&&!EEt(r)&&Object.prototype.hasOwnProperty.call(r,t)),tbe=(e,t,r)=>n=>{if(typeof n!="string")return n;const[a,s,o,l]=n.match(NQ);return{[e]:parseFloat(a),[t]:parseFloat(s),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},kEt=e=>FA(0,255,e),FP={...Wy,transform:e=>Math.round(kEt(e))},lx={test:CQ("rgb","red"),parse:tbe("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+FP.transform(e)+", "+FP.transform(t)+", "+FP.transform(r)+", "+wN(BC.transform(n))+")"};function SEt(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const N8={test:CQ("#"),parse:SEt,transform:lx.transform},Wb={test:CQ("hsl","hue"),parse:tbe("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Xh.transform(wN(t))+", "+Xh.transform(wN(r))+", "+wN(BC.transform(n))+")"},bl={test:e=>lx.test(e)||N8.test(e)||Wb.test(e),parse:e=>lx.test(e)?lx.parse(e):Wb.test(e)?Wb.parse(e):N8.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?lx.transform(e):Wb.transform(e)},_Et=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function TEt(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(NQ))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(_Et))===null||r===void 0?void 0:r.length)||0)>0}const rbe="number",nbe="color",BEt="var",IEt="var(",Jre="${}",DEt=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function DC(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},a=[];let s=0;const l=t.replace(DEt,c=>(bl.test(c)?(n.color.push(s),a.push(nbe),r.push(bl.parse(c))):c.startsWith(IEt)?(n.var.push(s),a.push(BEt),r.push(c)):(n.number.push(s),a.push(rbe),r.push(parseFloat(c))),++s,Jre)).split(Jre);return{values:r,split:l,indexes:n,types:a}}function abe(e){return DC(e).values}function sbe(e){const{split:t,types:r}=DC(e),n=t.length;return a=>{let s="";for(let o=0;o<n;o++)if(s+=t[o],a[o]!==void 0){const l=r[o];l===rbe?s+=wN(a[o]):l===nbe?s+=bl.transform(a[o]):s+=a[o]}return s}}const OEt=e=>typeof e=="number"?0:e;function PEt(e){const t=abe(e);return sbe(e)(t.map(OEt))}const Up={test:TEt,parse:abe,createTransformer:sbe,getAnimatableNone:PEt},FEt=new Set(["brightness","contrast","saturate","opacity"]);function REt(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(NQ)||[];if(!n)return e;const a=r.replace(n,"");let s=FEt.has(t)?1:0;return n!==r&&(s*=100),t+"("+s+a+")"}const LEt=/\b([a-z-]*)\(.*?\)/gu,C8={...Up,getAnimatableNone:e=>{const t=e.match(LEt);return t?t.map(REt).join(" "):e}},MEt={...lQ,color:bl,backgroundColor:bl,outlineColor:bl,fill:bl,stroke:bl,borderColor:bl,borderTopColor:bl,borderRightColor:bl,borderBottomColor:bl,borderLeftColor:bl,filter:C8,WebkitFilter:C8},EQ=e=>MEt[e];function ibe(e,t){let r=EQ(e);return r!==C8&&(r=Up),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const UEt=new Set(["auto","none","0"]);function HEt(e,t,r){let n=0,a;for(;n<e.length&&!a;){const s=e[n];typeof s=="string"&&!UEt.has(s)&&DC(s).values.length&&(a=e[n]),n++}if(a&&r)for(const s of t)e[s]=ibe(r,a)}const Zre=e=>e===Wy||e===Gr,ene=(e,t)=>parseFloat(e.split(", ")[t]),tne=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/u);if(a)return ene(a[1],t);{const s=n.match(/^matrix\((.+)\)$/u);return s?ene(s[1],e):0}},QEt=new Set(["x","y","z"]),VEt=Ky.filter(e=>!QEt.has(e));function $Et(e){const t=[];return VEt.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const dy={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:tne(4,13),y:tne(5,14)};dy.translateX=dy.x;dy.translateY=dy.y;const Sx=new Set;let E8=!1,j8=!1;function obe(){if(j8){const e=Array.from(Sx).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const a=$Et(n);a.length&&(r.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([s,o])=>{var l;(l=n.getValue(s))===null||l===void 0||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}j8=!1,E8=!1,Sx.forEach(e=>e.complete()),Sx.clear()}function lbe(){Sx.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(j8=!0)})}function zEt(){lbe(),obe()}class jQ{constructor(t,r,n,a,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=a,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Sx.add(this),E8||(E8=!0,os.read(lbe),os.resolveKeyframes(obe))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:a}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const o=a==null?void 0:a.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&r){const c=n.readValue(r,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Sx.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Sx.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const cbe=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),GEt=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function qEt(e){const t=GEt.exec(e);if(!t)return[,];const[,r,n,a]=t;return[`--${r??n}`,a]}function ube(e,t,r=1){const[n,a]=qEt(e);if(!n)return;const s=window.getComputedStyle(t).getPropertyValue(n);if(s){const o=s.trim();return cbe(o)?parseFloat(o):o}return oQ(a)?ube(a,t,r+1):a}const dbe=e=>t=>t.test(e),KEt={test:e=>e==="auto",parse:e=>e},fbe=[Wy,Gr,Xh,Um,RCt,FCt,KEt],rne=e=>fbe.find(dbe(e));class hbe extends jQ{constructor(t,r,n,a,s){super(t,r,n,a,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),oQ(u))){const d=ube(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Vve.has(n)||t.length!==2)return;const[a,s]=t,o=rne(a),l=rne(s);if(o!==l)if(Zre(o)&&Zre(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let a=0;a<t.length;a++)CEt(t[a])&&n.push(a);n.length&&HEt(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dy[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const s=r.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=a.length-1,l=a[o];a[o]=dy[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,u])=>{r.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const nne=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Up.test(e)||e==="0")&&!e.startsWith("url("));function WEt(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function XEt(e,t,r,n){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=nne(a,t),l=nne(s,t);return!o||!l?!1:WEt(e)||(r==="spring"||mQ(r))&&n}const YEt=e=>e!==null;function xB(e,{repeat:t,repeatType:r="loop"},n){const a=e.filter(YEt),s=t&&r!=="loop"&&t%2===1?0:a.length-1;return!s||n===void 0?a[s]:n}const JEt=40;class Abe{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Yh.now(),this.options={autoplay:t,delay:r,type:n,repeat:a,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>JEt?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&zEt(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=Yh.now(),this.hasAttemptedResolve=!0;const{name:n,type:a,velocity:s,delay:o,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!XEt(t,n,a,s))if(o)this.options.duration=0;else{c&&c(xB(t,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,r);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...d},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Ss=(e,t,r)=>e+(t-e)*r;function RP(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function ZEt({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,s=0,o=0;if(!t)a=s=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=RP(c,l,e+1/3),s=RP(c,l,e),o=RP(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function I4(e,t){return r=>r>0?t:e}const LP=(e,t,r)=>{const n=e*e,a=r*(t*t-n)+n;return a<0?0:Math.sqrt(a)},ejt=[N8,lx,Wb],tjt=e=>ejt.find(t=>t.test(e));function ane(e){const t=tjt(e);if(!t)return!1;let r=t.parse(e);return t===Wb&&(r=ZEt(r)),r}const sne=(e,t)=>{const r=ane(e),n=ane(t);if(!r||!n)return I4(e,t);const a={...r};return s=>(a.red=LP(r.red,n.red,s),a.green=LP(r.green,n.green,s),a.blue=LP(r.blue,n.blue,s),a.alpha=Ss(r.alpha,n.alpha,s),lx.transform(a))},rjt=(e,t)=>r=>t(e(r)),LE=(...e)=>e.reduce(rjt),k8=new Set(["none","hidden"]);function njt(e,t){return k8.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function ajt(e,t){return r=>Ss(e,t,r)}function kQ(e){return typeof e=="number"?ajt:typeof e=="string"?oQ(e)?I4:bl.test(e)?sne:ojt:Array.isArray(e)?mbe:typeof e=="object"?bl.test(e)?sne:sjt:I4}function mbe(e,t){const r=[...e],n=r.length,a=e.map((s,o)=>kQ(s)(s,t[o]));return s=>{for(let o=0;o<n;o++)r[o]=a[o](s);return r}}function sjt(e,t){const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=kQ(e[a])(e[a],t[a]));return a=>{for(const s in n)r[s]=n[s](a);return r}}function ijt(e,t){var r;const n=[],a={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],l=e.indexes[o][a[o]],c=(r=e.values[l])!==null&&r!==void 0?r:0;n[s]=c,a[o]++}return n}const ojt=(e,t)=>{const r=Up.createTransformer(t),n=DC(e),a=DC(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?k8.has(e)&&!a.values.length||k8.has(t)&&!n.values.length?njt(e,t):LE(mbe(ijt(n,a),a.values),r):I4(e,t)};function pbe(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ss(e,t,r):kQ(e)(e,t)}const ljt=5;function gbe(e,t,r){const n=Math.max(t-ljt,0);return $ve(r-e(n),t-n)}const Gs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},MP=.001;function cjt({duration:e=Gs.duration,bounce:t=Gs.bounce,velocity:r=Gs.velocity,mass:n=Gs.mass}){let a,s,o=1-t;o=FA(Gs.minDamping,Gs.maxDamping,o),e=FA(Gs.minDuration,Gs.maxDuration,mA(e)),o<1?(a=u=>{const d=u*o,f=d*e,A=d-r,m=S8(u,o),g=Math.exp(-f);return MP-A/m*g},s=u=>{const f=u*o*e,A=f*r+r,m=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-f),x=S8(Math.pow(u,2),o);return(-a(u)+MP>0?-1:1)*((A-m)*g)/x}):(a=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-MP+d*f},s=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const l=5/e,c=djt(a,s,l);if(e=AA(e),isNaN(c))return{stiffness:Gs.stiffness,damping:Gs.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const ujt=12;function djt(e,t,r){let n=r;for(let a=1;a<ujt;a++)n=n-e(n)/t(n);return n}function S8(e,t){return e*Math.sqrt(1-t*t)}const fjt=["duration","bounce"],hjt=["stiffness","damping","mass"];function ine(e,t){return t.some(r=>e[r]!==void 0)}function Ajt(e){let t={velocity:Gs.velocity,stiffness:Gs.stiffness,damping:Gs.damping,mass:Gs.mass,isResolvedFromDuration:!1,...e};if(!ine(e,hjt)&&ine(e,fjt))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,s=2*FA(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Gs.mass,stiffness:a,damping:s}}else{const r=cjt(e);t={...t,...r,mass:Gs.mass},t.isResolvedFromDuration=!0}return t}function xbe(e=Gs.visualDuration,t=Gs.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=r;const s=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:f,velocity:A,isResolvedFromDuration:m}=Ajt({...r,velocity:-mA(r.velocity||0)}),g=A||0,x=u/(2*Math.sqrt(c*d)),v=o-s,y=mA(Math.sqrt(c/d)),N=Math.abs(v)<5;n||(n=N?Gs.restSpeed.granular:Gs.restSpeed.default),a||(a=N?Gs.restDelta.granular:Gs.restDelta.default);let C;if(x<1){const j=S8(y,x);C=I=>{const T=Math.exp(-x*y*I);return o-T*((g+x*y*v)/j*Math.sin(j*I)+v*Math.cos(j*I))}}else if(x===1)C=j=>o-Math.exp(-y*j)*(v+(g+y*v)*j);else{const j=y*Math.sqrt(x*x-1);C=I=>{const T=Math.exp(-x*y*I),k=Math.min(j*I,300);return o-T*((g+x*y*v)*Math.sinh(k)+j*v*Math.cosh(k))/j}}const _={calculatedDuration:m&&f||null,next:j=>{const I=C(j);if(m)l.done=j>=f;else{let T=0;x<1&&(T=j===0?AA(g):gbe(C,j,I));const k=Math.abs(T)<=n,B=Math.abs(o-I)<=a;l.done=k&&B}return l.value=l.done?o:I,l},toString:()=>{const j=Math.min(Fve(_),b8),I=Rve(T=>_.next(j*T).value,j,30);return j+"ms "+I}};return _}function one({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],A={done:!1,value:f},m=k=>l!==void 0&&k<l||c!==void 0&&k>c,g=k=>l===void 0?c:c===void 0||Math.abs(l-k)<Math.abs(c-k)?l:c;let x=r*t;const v=f+x,y=o===void 0?v:o(v);y!==v&&(x=y-f);const N=k=>-x*Math.exp(-k/n),C=k=>y+N(k),_=k=>{const B=N(k),M=C(k);A.done=Math.abs(B)<=u,A.value=A.done?y:M};let j,I;const T=k=>{m(A.value)&&(j=k,I=xbe({keyframes:[A.value,g(A.value)],velocity:gbe(C,k,A.value),damping:a,stiffness:s,restDelta:u,restSpeed:d}))};return T(0),{calculatedDuration:null,next:k=>{let B=!1;return!I&&j===void 0&&(B=!0,_(k),T(k)),j!==void 0&&k>=j?I.next(k-j):(!B&&_(k),A)}}}const mjt=RE(.42,0,1,1),pjt=RE(0,0,.58,1),vbe=RE(.42,0,.58,1),gjt=e=>Array.isArray(e)&&typeof e[0]!="number",xjt={linear:Bu,easeIn:mjt,easeInOut:vbe,easeOut:pjt,circIn:wQ,circInOut:Zve,circOut:Jve,backIn:yQ,backInOut:Xve,backOut:Wve,anticipate:Yve},lne=e=>{if(pQ(e)){pve(e.length===4);const[t,r,n,a]=e;return RE(t,r,n,a)}else if(typeof e=="string")return xjt[e];return e};function vjt(e,t,r){const n=[],a=r||pbe,s=e.length-1;for(let o=0;o<s;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Bu:t;l=LE(c,l)}n.push(l)}return n}function bjt(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const s=e.length;if(pve(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=vjt(t,n,a),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const A=cy(e[f],e[f+1],d);return l[f](A)};return r?d=>u(FA(e[0],e[s-1],d)):u}function yjt(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=cy(0,t,n);e.push(Ss(r,1,a))}}function wjt(e){const t=[0];return yjt(t,e.length-1),t}function Njt(e,t){return e.map(r=>r*t)}function Cjt(e,t){return e.map(()=>t||vbe).splice(0,e.length-1)}function D4({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=gjt(n)?n.map(lne):lne(n),s={done:!1,value:t[0]},o=Njt(r&&r.length===t.length?r:wjt(t),e),l=bjt(o,t,{ease:Array.isArray(a)?a:Cjt(t,a)});return{calculatedDuration:e,next:c=>(s.value=l(c),s.done=c>=e,s)}}const Ejt=e=>{const t=({timestamp:r})=>e(r);return{start:()=>os.update(t,!0),stop:()=>Mp(t),now:()=>Ho.isProcessing?Ho.timestamp:Yh.now()}},jjt={decay:one,inertia:one,tween:D4,keyframes:D4,spring:xbe},kjt=e=>e/100;class SQ extends Abe{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:n,element:a,keyframes:s}=this.options,o=(a==null?void 0:a.KeyframeResolver)||jQ,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new o(s,l,r,n,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:s,velocity:o=0}=this.options,l=mQ(r)?r:jjt[r]||D4;let c,u;l!==D4&&typeof t[0]!="number"&&(c=LE(kjt,pbe(t[0],t[1])),t=[0,100]);const d=l({...this.options,keyframes:t});s==="mirror"&&(u=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Fve(d));const{calculatedDuration:f}=d,A=f+a,m=A*(n+1)-a;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:A,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:a,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=n;if(this.startTime===null)return s.next(0);const{delay:A,repeat:m,repeatType:g,repeatDelay:x,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-A*(this.speed>=0?1:-1),N=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let C=this.currentTime,_=s;if(m){const k=Math.min(this.currentTime,d)/f;let B=Math.floor(k),M=k%1;!M&&k>=1&&(M=1),M===1&&B--,B=Math.min(B,m+1),!!(B%2)&&(g==="reverse"?(M=1-M,x&&(M-=x/f)):g==="mirror"&&(_=o)),C=FA(0,1,M)*f}const j=N?{done:!1,value:c[0]}:_.next(C);l&&(j.value=l(j.value));let{done:I}=j;!N&&u!==null&&(I=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return T&&a!==void 0&&(j.value=xB(c,this.options,a)),v&&v(j.value),T&&this.finish(),j}get duration(){const{resolved:t}=this;return t?mA(t.calculatedDuration):0}get time(){return mA(this.currentTime)}set time(t){t=AA(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=mA(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=Ejt,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const Sjt=new Set(["opacity","clipPath","filter","transform"]);function _jt(e,t,r,{delay:n=0,duration:a=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=Mve(l,a);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Tjt=eQ(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),O4=10,Bjt=2e4;function Ijt(e){return mQ(e.type)||e.type==="spring"||!Lve(e.ease)}function Djt(e,t){const r=new SQ({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const a=[];let s=0;for(;!n.done&&s<Bjt;)n=r.sample(s),a.push(n.value),s+=O4;return{times:void 0,keyframes:a,duration:s-O4,ease:"linear"}}const bbe={anticipate:Yve,backInOut:Xve,circInOut:Zve};function Ojt(e){return e in bbe}class cne extends Abe{constructor(t){super(t);const{name:r,motionValue:n,element:a,keyframes:s}=this.options;this.resolver=new hbe(s,(o,l)=>this.onKeyframesResolved(o,l),r,n,a),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:n=300,times:a,ease:s,type:o,motionValue:l,name:c,startTime:u}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&B4()&&Ojt(s)&&(s=bbe[s]),Ijt(this.options)){const{onComplete:f,onUpdate:A,motionValue:m,element:g,...x}=this.options,v=Djt(t,x);t=v.keyframes,t.length===1&&(t[1]=t[0]),n=v.duration,a=v.times,s=v.ease,o="keyframes"}const d=_jt(l.owner.current,c,t,{...this.options,duration:n,times:a,ease:s});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(qre(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(xB(t,this.options,r)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:a,type:o,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return mA(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return mA(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=AA(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return Bu;const{animation:n}=r;qre(n,t)}return Bu}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:a,type:s,ease:o,times:l}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:A,...m}=this.options,g=new SQ({...m,keyframes:n,duration:a,type:s,ease:o,times:l,isGenerator:!0}),x=AA(this.time);u.setWithVelocity(g.sample(x-O4).value,g.sample(x).value,O4)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:a,repeatType:s,damping:o,type:l}=t;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=r.owner.getProps();return Tjt()&&n&&Sjt.has(n)&&!c&&!u&&!a&&s!=="mirror"&&o!==0&&l!=="inertia"}}const Pjt={type:"spring",stiffness:500,damping:25,restSpeed:10},Fjt=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Rjt={type:"keyframes",duration:.8},Ljt={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mjt=(e,{keyframes:t})=>t.length>2?Rjt:gv.has(e)?e.startsWith("scale")?Fjt(t[1]):Pjt:Ljt;function Ujt({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const _Q=(e,t,r,n={},a,s)=>o=>{const l=AQ(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-AA(c);let d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:A=>{t.set(A),l.onUpdate&&l.onUpdate(A)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:a};Ujt(l)||(d={...d,...Mjt(e,d)}),d.duration&&(d.duration=AA(d.duration)),d.repeatDelay&&(d.repeatDelay=AA(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&t.get()!==void 0){const A=xB(d.keyframes,l);if(A!==void 0)return os.update(()=>{d.onUpdate(A),d.onComplete()}),new sEt([])}return!s&&cne.supports(d)?new cne(d):new SQ(d)};function Hjt({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function ybe(e,t,{delay:r=0,transitionOverride:n,type:a}={}){var s;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(o=n);const u=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const f in c){const A=e.getValue(f,(s=e.latestValues[f])!==null&&s!==void 0?s:null),m=c[f];if(m===void 0||d&&Hjt(d,f))continue;const g={delay:r,...AQ(o||{},f)};let x=!1;if(window.MotionHandoffAnimation){const y=zve(e);if(y){const N=window.MotionHandoffAnimation(y,f,os);N!==null&&(g.startTime=N,x=!0)}}w8(e,f),A.start(_Q(f,A,m,e.shouldReduceMotion&&Vve.has(f)?{type:!1}:g,e,x));const v=A.animation;v&&u.push(v)}return l&&Promise.all(u).then(()=>{os.update(()=>{l&&vEt(e,l)})}),u}function _8(e,t,r={}){var n;const a=gB(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(s=r.transitionOverride);const o=a?()=>Promise.all(ybe(e,a,r)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:A}=s;return Qjt(e,t,d+u,f,A,r)}:()=>Promise.resolve(),{when:c}=s;if(c){const[u,d]=c==="beforeChildren"?[o,l]:[l,o];return u().then(()=>d())}else return Promise.all([o(),l(r.delay)])}function Qjt(e,t,r=0,n=0,a=1,s){const o=[],l=(e.variantChildren.size-1)*n,c=a===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(Vjt).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(_8(u,t,{...s,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Vjt(e,t){return e.sortNodePosition(t)}function $jt(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(s=>_8(e,s,r));n=Promise.all(a)}else if(typeof t=="string")n=_8(e,t,r);else{const a=typeof t=="function"?gB(e,t,r.custom):t;n=Promise.all(ybe(e,a,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const zjt=rQ.length;function wbe(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?wbe(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<zjt;r++){const n=rQ[r],a=e.props[n];(TC(a)||a===!1)&&(t[n]=a)}return t}const Gjt=[...tQ].reverse(),qjt=tQ.length;function Kjt(e){return t=>Promise.all(t.map(({animation:r,options:n})=>$jt(e,r,n)))}function Wjt(e){let t=Kjt(e),r=une(),n=!0;const a=c=>(u,d)=>{var f;const A=gB(e,d,c==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(A){const{transition:m,transitionEnd:g,...x}=A;u={...u,...x,...g}}return u};function s(c){t=c(e)}function o(c){const{props:u}=e,d=wbe(e.parent)||{},f=[],A=new Set;let m={},g=1/0;for(let v=0;v<qjt;v++){const y=Gjt[v],N=r[y],C=u[y]!==void 0?u[y]:d[y],_=TC(C),j=y===c?N.isActive:null;j===!1&&(g=v);let I=C===d[y]&&C!==u[y]&&_;if(I&&n&&e.manuallyAnimateOnMount&&(I=!1),N.protectedKeys={...m},!N.isActive&&j===null||!C&&!N.prevProp||mB(C)||typeof C=="boolean")continue;const T=Xjt(N.prevProp,C);let k=T||y===c&&N.isActive&&!I&&_||v>g&&_,B=!1;const M=Array.isArray(C)?C:[C];let P=M.reduce(a(y),{});j===!1&&(P={});const{prevResolvedValues:S={}}=N,L={...S,...P},U=z=>{k=!0,A.has(z)&&(B=!0,A.delete(z)),N.needsAnimating[z]=!0;const W=e.getValue(z);W&&(W.liveStyle=!1)};for(const z in L){const W=P[z],Z=S[z];if(m.hasOwnProperty(z))continue;let V=!1;v8(W)&&v8(Z)?V=!Pve(W,Z):V=W!==Z,V?W!=null?U(z):A.add(z):W!==void 0&&A.has(z)?U(z):N.protectedKeys[z]=!0}N.prevProp=C,N.prevResolvedValues=P,N.isActive&&(m={...m,...P}),n&&e.blockInitialAnimation&&(k=!1),k&&(!(I&&T)||B)&&f.push(...M.map(z=>({animation:z,options:{type:y}})))}if(A.size){const v={};A.forEach(y=>{const N=e.getBaseTarget(y),C=e.getValue(y);C&&(C.liveStyle=!0),v[y]=N??null}),f.push({animation:v})}let x=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(x=!1),n=!1,x?t(f):Promise.resolve()}function l(c,u){var d;if(r[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(A=>{var m;return(m=A.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),r[c].isActive=u;const f=o(c);for(const A in r)r[A].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>r,reset:()=>{r=une(),n=!0}}}function Xjt(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Pve(t,e):!1}function Dg(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function une(){return{animate:Dg(!0),whileInView:Dg(),whileHover:Dg(),whileTap:Dg(),whileDrag:Dg(),whileFocus:Dg(),exit:Dg()}}class ag{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Yjt extends ag{constructor(t){super(t),t.animationState||(t.animationState=Wjt(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();mB(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Jjt=0;class Zjt extends ag{constructor(){super(...arguments),this.id=Jjt++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);r&&!t&&a.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const ekt={animation:{Feature:Yjt},exit:{Feature:Zjt}};function OC(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function ME(e){return{point:{x:e.pageX,y:e.pageY}}}const tkt=e=>t=>gQ(t)&&e(t,ME(t));function NN(e,t,r,n){return OC(e,t,tkt(r),n)}const dne=(e,t)=>Math.abs(e-t);function rkt(e,t){const r=dne(e.x,t.x),n=dne(e.y,t.y);return Math.sqrt(r**2+n**2)}class Nbe{constructor(t,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=HP(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,m=rkt(f.offset,{x:0,y:0})>=3;if(!A&&!m)return;const{point:g}=f,{timestamp:x}=Ho;this.history.push({...g,timestamp:x});const{onStart:v,onMove:y}=this.handlers;A||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,A)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=UP(A,this.transformPagePoint),os.update(this.updatePoint,!0)},this.handlePointerUp=(f,A)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=HP(f.type==="pointercancel"?this.lastMoveEventInfo:UP(A,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,v),g&&g(f,v)},!gQ(t))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const o=ME(t),l=UP(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ho;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,HP(l,this.history)),this.removeListeners=LE(NN(this.contextWindow,"pointermove",this.handlePointerMove),NN(this.contextWindow,"pointerup",this.handlePointerUp),NN(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Mp(this.updatePoint)}}function UP(e,t){return t?{point:t(e.point)}:e}function fne(e,t){return{x:e.x-t.x,y:e.y-t.y}}function HP({point:e},t){return{point:e,delta:fne(e,Cbe(t)),offset:fne(e,nkt(t)),velocity:akt(t,.1)}}function nkt(e){return e[0]}function Cbe(e){return e[e.length-1]}function akt(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=Cbe(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>AA(t)));)r--;if(!n)return{x:0,y:0};const s=mA(a.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(a.x-n.x)/s,y:(a.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Ebe=1e-4,skt=1-Ebe,ikt=1+Ebe,jbe=.01,okt=0-jbe,lkt=0+jbe;function Ru(e){return e.max-e.min}function ckt(e,t,r){return Math.abs(e-t)<=r}function hne(e,t,r,n=.5){e.origin=n,e.originPoint=Ss(t.min,t.max,e.origin),e.scale=Ru(r)/Ru(t),e.translate=Ss(r.min,r.max,e.origin)-e.originPoint,(e.scale>=skt&&e.scale<=ikt||isNaN(e.scale))&&(e.scale=1),(e.translate>=okt&&e.translate<=lkt||isNaN(e.translate))&&(e.translate=0)}function CN(e,t,r,n){hne(e.x,t.x,r.x,n?n.originX:void 0),hne(e.y,t.y,r.y,n?n.originY:void 0)}function Ane(e,t,r){e.min=r.min+t.min,e.max=e.min+Ru(t)}function ukt(e,t,r){Ane(e.x,t.x,r.x),Ane(e.y,t.y,r.y)}function mne(e,t,r){e.min=t.min-r.min,e.max=e.min+Ru(t)}function EN(e,t,r){mne(e.x,t.x,r.x),mne(e.y,t.y,r.y)}function dkt(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ss(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ss(r,e,n.max):Math.min(e,r)),e}function pne(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function fkt(e,{top:t,left:r,bottom:n,right:a}){return{x:pne(e.x,r,a),y:pne(e.y,t,n)}}function gne(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function hkt(e,t){return{x:gne(e.x,t.x),y:gne(e.y,t.y)}}function Akt(e,t){let r=.5;const n=Ru(e),a=Ru(t);return a>n?r=cy(t.min,t.max-n,e.min):n>a&&(r=cy(e.min,e.max-a,t.min)),FA(0,1,r)}function mkt(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const T8=.35;function pkt(e=T8){return e===!1?e=0:e===!0&&(e=T8),{x:xne(e,"left","right"),y:xne(e,"top","bottom")}}function xne(e,t,r){return{min:vne(e,t),max:vne(e,r)}}function vne(e,t){return typeof e=="number"?e:e[t]||0}const bne=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xb=()=>({x:bne(),y:bne()}),yne=()=>({min:0,max:0}),di=()=>({x:yne(),y:yne()});function md(e){return[e("x"),e("y")]}function kbe({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function gkt({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function xkt(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function QP(e){return e===void 0||e===1}function B8({scale:e,scaleX:t,scaleY:r}){return!QP(e)||!QP(t)||!QP(r)}function Hg(e){return B8(e)||Sbe(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Sbe(e){return wne(e.x)||wne(e.y)}function wne(e){return e&&e!=="0%"}function P4(e,t,r){const n=e-r,a=t*n;return r+a}function Nne(e,t,r,n,a){return a!==void 0&&(e=P4(e,a,n)),P4(e,r,n)+t}function I8(e,t=0,r=1,n,a){e.min=Nne(e.min,t,r,n,a),e.max=Nne(e.max,t,r,n,a)}function _be(e,{x:t,y:r}){I8(e.x,t.translate,t.scale,t.originPoint),I8(e.y,r.translate,r.scale,r.originPoint)}const Cne=.999999999999,Ene=1.0000000000001;function vkt(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let s,o;for(let l=0;l<a;l++){s=r[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Jb(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,_be(e,o)),n&&Hg(s.latestValues)&&Jb(e,s.latestValues))}t.x<Ene&&t.x>Cne&&(t.x=1),t.y<Ene&&t.y>Cne&&(t.y=1)}function Yb(e,t){e.min=e.min+t,e.max=e.max+t}function jne(e,t,r,n,a=.5){const s=Ss(e.min,e.max,a);I8(e,t,r,s,n)}function Jb(e,t){jne(e.x,t.x,t.scaleX,t.scale,t.originX),jne(e.y,t.y,t.scaleY,t.scale,t.originY)}function Tbe(e,t){return kbe(xkt(e.getBoundingClientRect(),t))}function bkt(e,t,r){const n=Tbe(e,r),{scroll:a}=t;return a&&(Yb(n.x,a.offset.x),Yb(n.y,a.offset.y)),n}const Bbe=({current:e})=>e?e.ownerDocument.defaultView:null,ykt=new WeakMap;class wkt{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=di(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ME(d).point)},s=(d,f)=>{const{drag:A,dragPropagation:m,onDragStart:g}=this.getProps();if(A&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=AEt(A),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),md(v=>{let y=this.getAxisMotionValue(v).get()||0;if(Xh.test(y)){const{projection:N}=this.visualElement;if(N&&N.layout){const C=N.layout.layoutBox[v];C&&(y=Ru(C)*(parseFloat(y)/100))}}this.originPoint[v]=y}),g&&os.postRender(()=>g(d,f)),w8(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:A,dragDirectionLock:m,onDirectionLock:g,onDrag:x}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:v}=f;if(m&&this.currentDirection===null){this.currentDirection=Nkt(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),x&&x(d,f)},l=(d,f)=>this.stop(d,f),c=()=>md(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Nbe(t,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Bbe(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:s}=this.getProps();s&&os.postRender(()=>s(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!NS(t,a,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=dkt(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;r&&Kb(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=fkt(a.layoutBox,r):this.constraints=!1,this.elastic=pkt(n),s!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&md(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=mkt(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Kb(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const s=bkt(n,a.root,this.visualElement.getTransformPagePoint());let o=hkt(a.layout.layoutBox,s);if(r){const l=r(gkt(o));this.hasMutatedConstraints=!!l,l&&(o=kbe(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=md(d=>{if(!NS(d,r,this.currentDirection))return;let f=c&&c[d]||{};o&&(f={min:0,max:0});const A=a?200:1e6,m=a?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:A,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return w8(this.visualElement,t),n.start(_Q(t,n,0,r,this.visualElement,!1))}stopAnimation(){md(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){md(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){md(r=>{const{drag:n}=this.getProps();if(!NS(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,s=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];s.set(t[r]-Ss(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Kb(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};md(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=Akt({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),md(o=>{if(!NS(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Ss(c,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;ykt.set(this.visualElement,this);const t=this.visualElement.current,r=NN(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Kb(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),os.read(n);const o=OC(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(md(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:s=!1,dragElastic:o=T8,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function NS(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Nkt(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Ckt extends ag{constructor(t){super(t),this.removeGroupControls=Bu,this.removeListeners=Bu,this.controls=new wkt(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bu}unmount(){this.removeGroupControls(),this.removeListeners()}}const kne=e=>(t,r)=>{e&&os.postRender(()=>e(t,r))};class Ekt extends ag{constructor(){super(...arguments),this.removePointerDownListener=Bu}onPointerDown(t){this.session=new Nbe(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Bbe(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:kne(t),onStart:kne(r),onMove:n,onEnd:(s,o)=>{delete this.session,a&&os.postRender(()=>a(s,o))}}}mount(){this.removePointerDownListener=NN(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const p5={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sne(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const m2={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Gr.test(e))e=parseFloat(e);else return e;const r=Sne(e,t.target.x),n=Sne(e,t.target.y);return`${r}% ${n}%`}},jkt={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=Up.parse(e);if(a.length>5)return n;const s=Up.createTransformer(e),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const u=Ss(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),s(a)}};class kkt extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:s}=t;qCt(Skt),s&&(r.group&&r.group.add(s),n&&n.register&&a&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),p5.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||os.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),aQ.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ibe(e){const[t,r]=lCt(),n=w.useContext(Ave);return i.jsx(kkt,{...e,layoutGroup:n,switchLayoutGroup:w.useContext(wve),isPresent:t,safeToRemove:r})}const Skt={borderRadius:{...m2,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:m2,borderTopRightRadius:m2,borderBottomLeftRadius:m2,borderBottomRightRadius:m2,boxShadow:jkt};function _kt(e,t,r){const n=Ol(e)?e:IC(e);return n.start(_Q("",n,t,r)),n.animation}function Tkt(e){return e instanceof SVGElement&&e.tagName!=="svg"}const Bkt=(e,t)=>e.depth-t.depth;class Ikt{constructor(){this.children=[],this.isDirty=!1}add(t){xQ(this.children,t),this.isDirty=!0}remove(t){vQ(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Bkt),this.isDirty=!1,this.children.forEach(t)}}function Dkt(e,t){const r=Yh.now(),n=({timestamp:a})=>{const s=a-r;s>=t&&(Mp(n),e(s-t))};return os.read(n,!0),()=>Mp(n)}const Dbe=["TopLeft","TopRight","BottomLeft","BottomRight"],Okt=Dbe.length,_ne=e=>typeof e=="string"?parseFloat(e):e,Tne=e=>typeof e=="number"||Gr.test(e);function Pkt(e,t,r,n,a,s){a?(e.opacity=Ss(0,r.opacity!==void 0?r.opacity:1,Fkt(n)),e.opacityExit=Ss(t.opacity!==void 0?t.opacity:1,0,Rkt(n))):s&&(e.opacity=Ss(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<Okt;o++){const l=`border${Dbe[o]}Radius`;let c=Bne(t,l),u=Bne(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Tne(c)===Tne(u)?(e[l]=Math.max(Ss(_ne(c),_ne(u),n),0),(Xh.test(u)||Xh.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Ss(t.rotate||0,r.rotate||0,n))}function Bne(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Fkt=Obe(0,.5,Jve),Rkt=Obe(.5,.95,Bu);function Obe(e,t,r){return n=>n<e?0:n>t?1:r(cy(e,t,n))}function Ine(e,t){e.min=t.min,e.max=t.max}function ud(e,t){Ine(e.x,t.x),Ine(e.y,t.y)}function Dne(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function One(e,t,r,n,a){return e-=t,e=P4(e,1/r,n),a!==void 0&&(e=P4(e,1/a,n)),e}function Lkt(e,t=0,r=1,n=.5,a,s=e,o=e){if(Xh.test(t)&&(t=parseFloat(t),t=Ss(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ss(s.min,s.max,n);e===s&&(l-=t),e.min=One(e.min,t,r,l,a),e.max=One(e.max,t,r,l,a)}function Pne(e,t,[r,n,a],s,o){Lkt(e,t[r],t[n],t[a],t.scale,s,o)}const Mkt=["x","scaleX","originX"],Ukt=["y","scaleY","originY"];function Fne(e,t,r,n){Pne(e.x,t,Mkt,r?r.x:void 0,n?n.x:void 0),Pne(e.y,t,Ukt,r?r.y:void 0,n?n.y:void 0)}function Rne(e){return e.translate===0&&e.scale===1}function Pbe(e){return Rne(e.x)&&Rne(e.y)}function Lne(e,t){return e.min===t.min&&e.max===t.max}function Hkt(e,t){return Lne(e.x,t.x)&&Lne(e.y,t.y)}function Mne(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Fbe(e,t){return Mne(e.x,t.x)&&Mne(e.y,t.y)}function Une(e){return Ru(e.x)/Ru(e.y)}function Hne(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Qkt{constructor(){this.members=[]}add(t){xQ(this.members,t),t.scheduleRender()}remove(t){if(vQ(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const s=this.members[a];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Vkt(e,t,r){let n="";const a=e.x.translate/t.x,s=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((a||s||o)&&(n=`translate3d(${a}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:A,skewX:m,skewY:g}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),A&&(n+=`rotateY(${A}deg) `),m&&(n+=`skewX(${m}deg) `),g&&(n+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Qg={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Q2=typeof window<"u"&&window.MotionDebug!==void 0,VP=["","X","Y","Z"],$kt={visibility:"hidden"},Qne=1e3;let zkt=0;function $P(e,t,r,n){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Rbe(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=zve(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",os,!(a||s))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Rbe(n)}function Lbe({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=zkt++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Q2&&(Qg.totalNodes=Qg.resolvedTargetDeltas=Qg.recalculatedProjection=0),this.nodes.forEach(Kkt),this.nodes.forEach(Zkt),this.nodes.forEach(eSt),this.nodes.forEach(Wkt),Q2&&window.MotionDebug.record(Qg)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ikt)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new bQ),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Tkt(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let f;const A=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Dkt(A,250),p5.hasAnimatedSinceResize&&(p5.hasAnimatedSinceResize=!1,this.nodes.forEach($ne))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:A,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||sSt,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=d.getProps(),N=!this.targetLayout||!Fbe(this.targetLayout,g)||m,C=!A&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||A&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,C);const _={...AQ(x,"layout"),onPlay:v,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else A||$ne(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Mp(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tSt),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Rbe(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Vne);return}this.isUpdating||this.nodes.forEach(Ykt),this.isUpdating=!1,this.nodes.forEach(Jkt),this.nodes.forEach(Gkt),this.nodes.forEach(qkt),this.clearAllSnapshots();const l=Yh.now();Ho.delta=FA(0,1e3/60,l-Ho.timestamp),Ho.timestamp=l,Ho.isProcessing=!0,OP.update.process(Ho),OP.preRender.process(Ho),OP.render.process(Ho),Ho.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,aQ.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Xkt),this.sharedNodes.forEach(rSt)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,os.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){os.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=di(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Pbe(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||Hg(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),iSt(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return di();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(oSt))){const{scroll:d}=this.root;d&&(Yb(c.x,d.offset.x),Yb(c.y,d.offset.y))}return c}removeElementScroll(o){var l;const c=di();if(ud(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:A}=d;d!==this.root&&f&&A.layoutScroll&&(f.wasRoot&&ud(c,o),Yb(c.x,f.offset.x),Yb(c.y,f.offset.y))}return c}applyTransform(o,l=!1){const c=di();ud(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Jb(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Hg(d.latestValues)&&Jb(c,d.latestValues)}return Hg(this.latestValues)&&Jb(c,this.latestValues),c}removeTransform(o){const l=di();ud(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Hg(u.latestValues))continue;B8(u.latestValues)&&u.updateSnapshot();const d=di(),f=u.measurePageBox();ud(d,f),Fne(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Hg(this.latestValues)&&Fne(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ho.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:A}=this.options;if(!(!this.layout||!(f||A))){if(this.resolvedRelativeTargetAt=Ho.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=di(),this.relativeTargetOrigin=di(),EN(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ud(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=di(),this.targetWithTransforms=di()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ukt(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ud(this.target,this.layout.layoutBox),_be(this.target,this.targetDelta)):ud(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=di(),this.relativeTargetOrigin=di(),EN(this.relativeTargetOrigin,this.target,m.target),ud(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Q2&&Qg.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||B8(this.parent.latestValues)||Sbe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ho.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;ud(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,m=this.treeScale.y;vkt(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=di());const{target:g}=l;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Dne(this.prevProjectionDelta.x,this.projectionDelta.x),Dne(this.prevProjectionDelta.y,this.projectionDelta.y)),CN(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==A||this.treeScale.y!==m||!Hne(this.projectionDelta.x,this.prevProjectionDelta.x)||!Hne(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Q2&&Qg.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xb(),this.projectionDelta=Xb(),this.projectionDeltaWithTransform=Xb()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Xb();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const A=di(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,x=m!==g,v=this.getStack(),y=!v||v.members.length<=1,N=!!(x&&!y&&this.options.crossfade===!0&&!this.path.some(aSt));this.animationProgress=0;let C;this.mixTargetDelta=_=>{const j=_/1e3;zne(f.x,o.x,j),zne(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(EN(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nSt(this.relativeTarget,this.relativeTargetOrigin,A,j),C&&Hkt(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=di()),ud(C,this.relativeTarget)),x&&(this.animationValues=d,Pkt(d,u,this.latestValues,j,N,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Mp(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=os.update(()=>{p5.hasAnimatedSinceResize=!0,this.currentAnimation=_kt(0,Qne,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Qne),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Mbe(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||di();const f=Ru(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const A=Ru(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+A}ud(l,c),Jb(l,d),CN(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Qkt),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&$P("z",o,u,this.animationValues);for(let d=0;d<VP.length;d++)$P(`rotate${VP[d]}`,o,u,this.animationValues),$P(`skew${VP[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $kt;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=A5(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=A5(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Hg(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const A=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Vkt(this.projectionDeltaWithTransform,this.treeScale,A),d&&(u.transform=d(A,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=A.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:u.opacity=f===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const x in T4){if(A[x]===void 0)continue;const{correct:v,applyTo:y}=T4[x],N=u.transform==="none"?A[x]:v(A[x],f);if(y){const C=y.length;for(let _=0;_<C;_++)u[y[_]]=N}else u[x]=N}return this.options.layoutId&&(u.pointerEvents=f===this?A5(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Vne),this.root.sharedNodes.clear()}}}function Gkt(e){e.updateLayout()}function qkt(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:s}=e.options,o=r.source!==e.layout.source;s==="size"?md(f=>{const A=o?r.measuredBox[f]:r.layoutBox[f],m=Ru(A);A.min=n[f].min,A.max=A.min+m}):Mbe(s,r.layoutBox,n)&&md(f=>{const A=o?r.measuredBox[f]:r.layoutBox[f],m=Ru(n[f]);A.max=A.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const l=Xb();CN(l,n,r.layoutBox);const c=Xb();o?CN(c,e.applyTransform(a,!0),r.measuredBox):CN(c,n,r.layoutBox);const u=!Pbe(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:A,layout:m}=f;if(A&&m){const g=di();EN(g,r.layoutBox,A.layoutBox);const x=di();EN(x,n,m.layoutBox),Fbe(g,x)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Kkt(e){Q2&&Qg.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Wkt(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Xkt(e){e.clearSnapshot()}function Vne(e){e.clearMeasurements()}function Ykt(e){e.isLayoutDirty=!1}function Jkt(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function $ne(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Zkt(e){e.resolveTargetDelta()}function eSt(e){e.calcProjection()}function tSt(e){e.resetSkewAndRotation()}function rSt(e){e.removeLeadSnapshot()}function zne(e,t,r){e.translate=Ss(t.translate,0,r),e.scale=Ss(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Gne(e,t,r,n){e.min=Ss(t.min,r.min,n),e.max=Ss(t.max,r.max,n)}function nSt(e,t,r,n){Gne(e.x,t.x,r.x,n),Gne(e.y,t.y,r.y,n)}function aSt(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const sSt={duration:.45,ease:[.4,0,.1,1]},qne=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Kne=qne("applewebkit/")&&!qne("chrome/")?Math.round:Bu;function Wne(e){e.min=Kne(e.min),e.max=Kne(e.max)}function iSt(e){Wne(e.x),Wne(e.y)}function Mbe(e,t,r){return e==="position"||e==="preserve-aspect"&&!ckt(Une(t),Une(r),.2)}function oSt(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const lSt=Lbe({attachResizeListener:(e,t)=>OC(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zP={current:void 0},Ube=Lbe({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!zP.current){const e=new lSt({});e.mount(window),e.setOptions({layoutScroll:!0}),zP.current=e}return zP.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),cSt={pan:{Feature:Ekt},drag:{Feature:Ckt,ProjectionNode:Ube,MeasureLayout:Ibe}};function Xne(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,s=n[a];s&&os.postRender(()=>s(t,ME(t)))}class uSt extends ag{mount(){const{current:t}=this.node;t&&(this.unmount=cEt(t,r=>(Xne(this.node,r,"Start"),n=>Xne(this.node,n,"End"))))}unmount(){}}class dSt extends ag{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=LE(OC(this.node.current,"focus",()=>this.onFocus()),OC(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yne(e,t,r){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),s=n[a];s&&os.postRender(()=>s(t,ME(t)))}class fSt extends ag{mount(){const{current:t}=this.node;t&&(this.unmount=hEt(t,r=>(Yne(this.node,r,"Start"),(n,{success:a})=>Yne(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const D8=new WeakMap,GP=new WeakMap,hSt=e=>{const t=D8.get(e.target);t&&t(e)},ASt=e=>{e.forEach(hSt)};function mSt({root:e,...t}){const r=e||document;GP.has(r)||GP.set(r,{});const n=GP.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(ASt,{root:e,...t})),n[a]}function pSt(e,t,r){const n=mSt(t);return D8.set(e,r),n.observe(e),()=>{D8.delete(e),n.unobserve(e)}}const gSt={some:0,all:1};class xSt extends ag{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:s}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:gSt[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),A=u?d:f;A&&A(c)};return pSt(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(vSt(t,r))&&this.startObserver()}unmount(){}}function vSt({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const bSt={inView:{Feature:xSt},tap:{Feature:fSt},focus:{Feature:dSt},hover:{Feature:uSt}},ySt={layout:{ProjectionNode:Ube,MeasureLayout:Ibe}},F4={current:null},TQ={current:!1};function Hbe(){if(TQ.current=!0,!!ZH)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>F4.current=e.matches;e.addListener(t),t()}else F4.current=!1}const wSt=[...fbe,bl,Up],NSt=e=>wSt.find(dbe(e)),Jne=new WeakMap;function CSt(e,t,r){for(const n in t){const a=t[n],s=r[n];if(Ol(a))e.addValue(n,a);else if(Ol(s))e.addValue(n,IC(a,{owner:e}));else if(s!==a)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(n);e.addValue(n,IC(o!==void 0?o:a,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const Zne=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ESt{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jQ,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Yh.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,os.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=o;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=pB(r),this.isVariantNode=bve(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...A}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in A){const g=A[m];c[m]!==void 0&&Ol(g)&&g.set(c[m],!1)}}mount(t){this.current=t,Jne.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),TQ.current||Hbe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:F4.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Jne.delete(this.current),this.projection&&this.projection.unmount(),Mp(this.notifyUpdate),Mp(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=gv.has(t),a=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&os.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{a(),s(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in uy){const r=uy[t];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):di()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Zne.length;n++){const a=Zne[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const s="on"+a,o=t[s];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=CSt(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=IC(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(cbe(a)||ebe(a))?a=parseFloat(a):!NSt(a)&&Up.test(r)&&(a=ibe(t,r)),this.setBaseTarget(t,Ol(a)?a.get():a)),Ol(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const o=iQ(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(a=o[t])}if(n&&a!==void 0)return a;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ol(s)?s:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new bQ),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class Qbe extends ESt{constructor(){super(...arguments),this.KeyframeResolver=hbe}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ol(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function jSt(e){return window.getComputedStyle(e)}class kSt extends Qbe{constructor(){super(...arguments),this.type="html",this.renderInstance=_ve}readValueFromInstance(t,r){if(gv.has(r)){const n=EQ(r);return n&&n.default||0}else{const n=jSt(t),a=(jve(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Tbe(t,r)}build(t,r,n){cQ(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return hQ(t,r,n)}}class SSt extends Qbe{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=di}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(gv.has(r)){const n=EQ(r);return n&&n.default||0}return r=Tve.has(r)?r:nQ(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return Dve(t,r,n)}build(t,r,n){uQ(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,a){Bve(t,r,n,a)}mount(t){this.isSVGTag=fQ(t.tagName),super.mount(t)}}const _St=(e,t)=>sQ(e)?new SSt(t):new kSt(t,{allowProjection:e!==w.Fragment}),TSt=rEt({...ekt,...bSt,...cSt,...ySt},_St),BSt=gCt(TSt);function ISt(){!TQ.current&&Hbe();const[e]=w.useState(F4.current);return e}const eae=({onSelectProfile:e,isAdminView:t=!1,allowedProfiles:r})=>{const n=ISt(),[a,s]=At.useState(()=>{const u=typeof window<"u"?window.innerWidth:1280;return u<640?{cols:4,rows:2,amp:5,opMin:.05,opMax:.1}:u<1024?{cols:6,rows:2,amp:6,opMin:.06,opMax:.12}:{cols:6,rows:3,amp:8,opMin:.06,opMax:.14}});At.useEffect(()=>{const u=()=>{const d=window.innerWidth;s(f=>d<640&&(f.cols!==4||f.rows!==2||f.amp!==5)?{cols:4,rows:2,amp:5,opMin:.05,opMax:.1}:d>=640&&d<1024&&(f.cols!==6||f.rows!==2||f.amp!==6)?{cols:6,rows:2,amp:6,opMin:.06,opMax:.12}:d>=1024&&(f.cols!==6||f.rows!==3||f.amp!==8)?{cols:6,rows:3,amp:8,opMin:.06,opMax:.14}:f)};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const o=At.useMemo(()=>{const u=[ys,CF,Ys,VN,wA,e0,Dh,ys,Ys,CF,VN,Dh];let d=12345;const f=()=>(d=(d*1664525+1013904223)%4294967296,d/4294967296),{cols:A,rows:m,opMin:g,opMax:x}=a,v=A*m;return Array.from({length:v}).map((y,N)=>{const C=u[N%u.length],_=N%A,j=Math.floor(N/A),I=(_+.5)/A*100,T=(j+.5)/m*100,k=f()*10-5,B=f()*8-4,M=22+Math.floor(f()*14),P=g+f()*(x-g),S=f()*4,L=f()>.5?1:-1,U=f()>.5?1:-1;return{Icon:C,style:{left:`${I+k}%`,top:`${T+B}%`,width:`${M}px`,height:`${M}px`,opacity:P,filter:"blur(0.5px)"},delay:S,dirX:L,dirY:U}})},[a]),l=At.useMemo(()=>new Map(UG.map(u=>[u.id,u])),[]),c=At.useMemo(()=>r&&r.length>0?r.map(u=>l.get(u)).filter(Boolean):UG,[r,l]);return i.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-20",children:[i.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),i.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),i.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),i.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10",children:o.map(({Icon:u,style:d,delay:f,dirX:A,dirY:m},g)=>i.jsx(BSt.span,{className:"absolute text-[#1f2937]",style:d,initial:!1,animate:n?void 0:{x:[0,a.amp/2*A,0,-(a.amp/2)*A,0],y:[0,-a.amp*m,0,a.amp*m,0]},transition:n?void 0:{duration:12,repeat:1/0,ease:"easeInOut",delay:f},children:i.jsx(u,{className:"w-full h-full"})},g))}),i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(WM,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestin Pedaggica LIR"}),i.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:c.map(u=>i.jsxs("button",{onClick:()=>e(u.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[i.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),i.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:u.icon}),i.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:u.label})]},u.id))}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},DSt=()=>{const[e,t]=w.useState(null),[r,n]=w.useState(null),[a,s]=w.useState(!0),[o,l]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(null),[A,m]=w.useState(!1),[g,x]=w.useState(null),[v,y]=w.useState(null);w.useEffect(()=>{const k=new URLSearchParams(window.location.search),B=k.get("auth"),M=k.get("userId");k.get("module"),B==="success"&&M&&(y("Autorizacin de Google Slides completada exitosamente!"),setTimeout(()=>{const P=window.location.pathname;window.history.replaceState({},document.title,P),y(null)},3e3))},[]),w.useEffect(()=>{const k=Fae(ua,async B=>{if(t(B),B)try{const M=await uoe(B.email);if(M){if(n(M),M.profile===Ot.SUBDIRECCION)u(!0);else if(M.profile===Ot.COORDINACION_TP){const P=localStorage.getItem(`lir-effective-profile-${B.email}`);P===Ot.PROFESORADO||P===Ot.COORDINACION_TP?(x(P),m(!1)):m(!0)}}else l("Usuario no encontrado en la base de datos. Contacte al administrador."),await WI()}catch{l("Error al conectar con la base de datos."),await WI()}else n(null),f(null),u(!1),l(null),m(!1),x(null);s(!1)});return()=>k()},[]);const N=async(k,B)=>{if(l(null),!k.trim()||!B.trim()){l("Por favor ingrese email y contrasea");return}try{await F5e(k.trim(),B)}catch(M){switch(M.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales invlidas. Verifique su email y contrasea.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente ms tarde.");break;case"auth/network-request-failed":l("Error de conexin. Verifique su internet.");break;default:l("Ocurri un error al intentar iniciar sesin.")}}},C=async k=>{try{await R5e(k)}catch(B){console.error("Error al enviar email de recuperacin:",B)}},_=k=>{f(k),u(!1)},j=()=>{(r==null?void 0:r.profile)===Ot.SUBDIRECCION?(u(!0),f(null)):(r==null?void 0:r.profile)===Ot.COORDINACION_TP&&(m(!0),x(null))},I=async()=>{try{await WI()}catch(k){console.error("Error al cerrar sesin:",k)}};if(a)return i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(WM,{})}),i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicacin..."})]})});if(!e||!r)return i.jsx(STe,{onLoginAttempt:N,onForgotPasswordRequest:C,error:o});if(c&&r.profile===Ot.SUBDIRECCION)return i.jsx(eae,{onSelectProfile:_,isAdminView:!0});if(A&&r.profile===Ot.COORDINACION_TP){const k=[Ot.COORDINACION_TP,Ot.PROFESORADO];return i.jsx(eae,{onSelectProfile:B=>{x(B),m(!1),e!=null&&e.email&&localStorage.setItem(`lir-effective-profile-${e.email}`,B)},isAdminView:!0,allowedProfiles:k})}const T=d||g||r.profile;return i.jsxs(i.Fragment,{children:[v&&i.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{children:v})]}),i.jsx(iCt,{currentUser:{...r,profile:T},onLogout:I,onChangeProfile:r.profile===Ot.SUBDIRECCION||r.profile===Ot.COORDINACION_TP?j:void 0,canChangeProfile:r.profile===Ot.SUBDIRECCION||r.profile===Ot.COORDINACION_TP})]})},Vbe=document.getElementById("root");if(!Vbe)throw new Error("Could not find root element to mount to");const OSt=iye.createRoot(Vbe);OSt.render(i.jsx(At.StrictMode,{children:i.jsx(DSt,{})}));export{Ia as _,FSt as c,oc as g};
